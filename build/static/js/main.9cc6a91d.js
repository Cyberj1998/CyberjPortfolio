/*! For license information please see main.9cc6a91d.js.LICENSE.txt */
!function(){var e={5345:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var s=2*(r+1)-1,u=e[s],l=s+1,c=e[l];if(0>a(u,n))l<i&&0>a(c,u)?(e[r]=c,e[l]=n,r=l):(e[r]=u,e[s]=n,r=s);else{if(!(l<i&&0>a(c,n)))break e;e[r]=c,e[l]=n,r=l}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,u=s.now();t.unstable_now=function(){return s.now()-u}}var l=[],c=[],h=1,d=null,f=3,p=!1,A=!1,v=!1,m="function"===typeof setTimeout?setTimeout:null,g="function"===typeof clearTimeout?clearTimeout:null,y="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(c);null!==t;){if(null===t.callback)i(c);else{if(!(t.startTime<=e))break;i(c),t.sortIndex=t.expirationTime,n(l,t)}t=r(c)}}function x(e){if(v=!1,b(e),!A)if(null!==r(l))A=!0,N(_);else{var t=r(c);null!==t&&I(x,t.startTime-e)}}function _(e,n){A=!1,v&&(v=!1,g(k),k=-1),p=!0;var a=f;try{for(b(n),d=r(l);null!==d&&(!(d.expirationTime>n)||e&&!C());){var o=d.callback;if("function"===typeof o){d.callback=null,f=d.priorityLevel;var s=o(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?d.callback=s:d===r(l)&&i(l),b(n)}else i(l);d=r(l)}if(null!==d)var u=!0;else{var h=r(c);null!==h&&I(x,h.startTime-n),u=!1}return u}finally{d=null,f=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var w,S=!1,M=null,k=-1,T=5,E=-1;function C(){return!(t.unstable_now()-E<T)}function R(){if(null!==M){var e=t.unstable_now();E=e;var n=!0;try{n=M(!0,e)}finally{n?w():(S=!1,M=null)}}else S=!1}if("function"===typeof y)w=function(){y(R)};else if("undefined"!==typeof MessageChannel){var B=new MessageChannel,P=B.port2;B.port1.onmessage=R,w=function(){P.postMessage(null)}}else w=function(){m(R,0)};function N(e){M=e,S||(S=!0,w())}function I(e,n){k=m((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){A||p||(A=!0,N(_))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:a,expirationTime:s=a+s,sortIndex:-1},a>o?(e.sortIndex=a,n(c,e),null===r(l)&&e===r(c)&&(v?(g(k),k=-1):v=!0,I(x,a-o))):(e.sortIndex=s,n(l,e),A||p||(A=!0,N(_))),e},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},4545:function(e,t,n){"use strict";e.exports=n(5345)},7494:function(e){function t(e,t,n){var r,i,a,o,s;function u(){var l=Date.now()-o;l<t&&l>=0?r=setTimeout(u,t-l):(r=null,n||(s=e.apply(a,i),a=i=null))}null==t&&(t=100);var l=function(){a=this,i=arguments,o=Date.now();var l=n&&!r;return r||(r=setTimeout(u,t)),l&&(s=e.apply(a,i),a=i=null),s};return l.clear=function(){r&&(clearTimeout(r),r=null)},l.flush=function(){r&&(s=e.apply(a,i),a=i=null,clearTimeout(r),r=null)},l}t.debounce=t,e.exports=t},6253:function(e){e.exports=function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";var r=n(1),i=function(){function e(e,t,n){void 0===e&&(e=NaN),void 0===t&&(t=NaN),void 0===n&&(n=!1),this._minFPS=t,this._maxFPS=e,this._timeScale=1,this._currentTick=0,this._currentTime=0,this._tickDeltaTime=0,this._isRunning=!1,this._maxInterval=isNaN(this._minFPS)?NaN:1e3/this._minFPS,this._minInterval=isNaN(this._maxFPS)?NaN:1e3/this._maxFPS,this._onResume=new r.default,this._onPause=new r.default,this._onTick=new r.default,this._onTickOncePerFrame=new r.default,n||this.resume()}return e.prototype.updateOnce=function(e){e(this.currentTimeSeconds,this.tickDeltaTimeSeconds,this.currentTick)},e.prototype.resume=function(){this._isRunning||(this._isRunning=!0,this._lastTimeUpdated=this.getTimer(),this._onResume.dispatch(),this.animateOnce())},e.prototype.pause=function(){this._isRunning&&(this._isRunning=!1,this._onPause.dispatch(),window.cancelAnimationFrame(this._animationFrameHandle))},e.prototype.dispose=function(){this.pause(),this._onResume.removeAll(),this._onPause.removeAll(),this._onTick.removeAll()},Object.defineProperty(e.prototype,"currentTick",{get:function(){return this._currentTick},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentTimeSeconds",{get:function(){return this._currentTime/1e3},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tickDeltaTimeSeconds",{get:function(){return this._tickDeltaTime/1e3},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"timeScale",{get:function(){return this._timeScale},set:function(e){this._timeScale!==e&&(this._timeScale=e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onResume",{get:function(){return this._onResume},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onPause",{get:function(){return this._onPause},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onTick",{get:function(){return this._onTick},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onTickOncePerFrame",{get:function(){return this._onTickOncePerFrame},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isRunning",{get:function(){return this._isRunning},enumerable:!0,configurable:!0}),e.prototype.animateOnce=function(){var e=this;this._animationFrameHandle=window.requestAnimationFrame((function(){return e.onFrame()}))},e.prototype.onFrame=function(){if(this._now=this.getTimer(),this._frameDeltaTime=this._now-this._lastTimeUpdated,isNaN(this._minInterval)||this._frameDeltaTime>=this._minInterval)if(isNaN(this._maxInterval))this.update(this._frameDeltaTime*this._timeScale,!0),this._lastTimeUpdated=this._now;else for(this._interval=Math.min(this._frameDeltaTime,this._maxInterval);this._now>=this._lastTimeUpdated+this._interval;)this.update(this._interval*this._timeScale,this._now<=this._lastTimeUpdated+2*this._maxInterval),this._lastTimeUpdated+=this._interval;this._isRunning&&this.animateOnce()},e.prototype.update=function(e,t){void 0===t&&(t=!0),this._currentTick++,this._currentTime+=e,this._tickDeltaTime=e,this._onTick.dispatch(this.currentTimeSeconds,this.tickDeltaTimeSeconds,this.currentTick),t&&this._onTickOncePerFrame.dispatch(this.currentTimeSeconds,this.tickDeltaTimeSeconds,this.currentTick)},e.prototype.getTimer=function(){return Date.now()},e}();Object.defineProperty(t,"__esModule",{value:!0}),t.default=i},function(e,t,n){!function(t,n){e.exports=n()}(0,(function(){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t){"use strict";var n=function(){function e(){this.functions=[]}return e.prototype.add=function(e){return-1===this.functions.indexOf(e)&&(this.functions.push(e),!0)},e.prototype.remove=function(e){var t=this.functions.indexOf(e);return t>-1&&(this.functions.splice(t,1),!0)},e.prototype.removeAll=function(){return this.functions.length>0&&(this.functions.length=0,!0)},e.prototype.dispatch=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.functions.concat().forEach((function(t){t.apply(void 0,e)}))},Object.defineProperty(e.prototype,"numItems",{get:function(){return this.functions.length},enumerable:!0,configurable:!0}),e}();Object.defineProperty(t,"__esModule",{value:!0}),t.default=n}])}))}])},3881:function(e,t,n){var r="Expected a function",i=/^\s+|\s+$/g,a=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,s=/^0o[0-7]+$/i,u=parseInt,l="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,c="object"==typeof self&&self&&self.Object===Object&&self,h=l||c||Function("return this")(),d=Object.prototype.toString,f=Math.max,p=Math.min,A=function(){return h.Date.now()};function v(e,t,n){var i,a,o,s,u,l,c=0,h=!1,d=!1,v=!0;if("function"!=typeof e)throw new TypeError(r);function y(t){var n=i,r=a;return i=a=void 0,c=t,s=e.apply(r,n)}function b(e){return c=e,u=setTimeout(_,t),h?y(e):s}function x(e){var n=e-l;return void 0===l||n>=t||n<0||d&&e-c>=o}function _(){var e=A();if(x(e))return w(e);u=setTimeout(_,function(e){var n=t-(e-l);return d?p(n,o-(e-c)):n}(e))}function w(e){return u=void 0,v&&i?y(e):(i=a=void 0,s)}function S(){var e=A(),n=x(e);if(i=arguments,a=this,l=e,n){if(void 0===u)return b(l);if(d)return u=setTimeout(_,t),y(l)}return void 0===u&&(u=setTimeout(_,t)),s}return t=g(t)||0,m(n)&&(h=!!n.leading,o=(d="maxWait"in n)?f(g(n.maxWait)||0,t):o,v="trailing"in n?!!n.trailing:v),S.cancel=function(){void 0!==u&&clearTimeout(u),c=0,i=l=a=u=void 0},S.flush=function(){return void 0===u?s:w(A())},S}function m(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function g(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==d.call(e)}(e))return NaN;if(m(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=m(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(i,"");var n=o.test(e);return n||s.test(e)?u(e.slice(2),n?2:8):a.test(e)?NaN:+e}e.exports=function(e,t,n){var i=!0,a=!0;if("function"!=typeof e)throw new TypeError(r);return m(n)&&(i="leading"in n?!!n.leading:i,a="trailing"in n?!!n.trailing:a),v(e,t,{leading:i,maxWait:t,trailing:a})}},888:function(e,t,n){"use strict";var r=n(9047);function i(){}function a(){}a.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,a,o){if(o!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:i};return n.PropTypes=n,n}},2007:function(e,t,n){e.exports=n(888)()},9047:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},7557:function(e){e.exports=function(e,t,n,r){var i=0,a=0,o=(r=r||{}).step||1,s=r.maxTimeMS||8,u=r.probeElements||5e3;setTimeout((function r(){var l=Math.min(e.length,i+u),c=i,h=new Date;for(c=i;c<l;c+=o)t(e[c],c,e);c<e.length?(a+=new Date-h,i=c,u=Math.round(i*s/a),setTimeout(r,0)):n(e)}),0)}},4463:function(e,t,n){"use strict";var r=n(2791),i=n(5296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,s={};function u(e,t){l(e,t),l(e+"Capture",t)}function l(e,t){for(s[e]=t,e=0;e<t.length;e++)o.add(t[e])}var c=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function A(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var v={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){v[e]=new A(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];v[t]=new A(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){v[e]=new A(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){v[e]=new A(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){v[e]=new A(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){v[e]=new A(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){v[e]=new A(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){v[e]=new A(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){v[e]=new A(e,5,!1,e.toLowerCase(),null,!1,!1)}));var m=/[\-:]([a-z])/g;function g(e){return e[1].toUpperCase()}function y(e,t,n,r){var i=v.hasOwnProperty(t)?v[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(p,e)||!h.call(f,e)&&(d.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(m,g);v[t]=new A(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(m,g);v[t]=new A(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(m,g);v[t]=new A(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){v[e]=new A(e,1,!1,e.toLowerCase(),null,!1,!1)})),v.xlinkHref=new A("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){v[e]=new A(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x=Symbol.for("react.element"),_=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),M=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),T=Symbol.for("react.context"),E=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),B=Symbol.for("react.memo"),P=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var N=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var I=Symbol.iterator;function D(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=I&&e[I]||e["@@iterator"])?e:null}var L,O=Object.assign;function F(e){if(void 0===L)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);L=t&&t[1]||""}return"\n"+L+e}var U=!1;function z(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var r=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){r=l}e.call(t.prototype)}else{try{throw Error()}catch(l){r=l}e()}}catch(l){if(l&&r&&"string"===typeof l.stack){for(var i=l.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,s=a.length-1;1<=o&&0<=s&&i[o]!==a[s];)s--;for(;1<=o&&0<=s;o--,s--)if(i[o]!==a[s]){if(1!==o||1!==s)do{if(o--,0>--s||i[o]!==a[s]){var u="\n"+i[o].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=o&&0<=s);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function G(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=z(e.type,!1);case 11:return e=z(e.type.render,!1);case 1:return e=z(e.type,!0);default:return""}}function q(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case w:return"Fragment";case _:return"Portal";case M:return"Profiler";case S:return"StrictMode";case C:return"Suspense";case R:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case k:return(e._context.displayName||"Context")+".Provider";case E:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case B:return null!==(t=e.displayName||null)?t:q(e.type)||"Memo";case P:t=e._payload,e=e._init;try{return q(e(t))}catch(n){}}return null}function H(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return q(t);case 8:return t===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function V(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function j(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function W(e){e._valueTracker||(e._valueTracker=function(e){var t=j(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function X(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=j(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Y(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Q(e,t){var n=t.checked;return O({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function J(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=V(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function K(e,t){null!=(t=t.checked)&&y(e,"checked",t,!1)}function Z(e,t){K(e,t);var n=V(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,V(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function $(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Y(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+V(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return O({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:V(n)}}function ae(e,t){var n=V(t.value),r=V(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ue(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var le,ce,he=(ce=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((le=le||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=le.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ce(e,t)}))}:ce);function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function Ae(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ve(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=Ae(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(fe).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]}))}));var me=O({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(e,t){if(t){if(me[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ye(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function xe(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var _e=null,we=null,Se=null;function Me(e){if(e=yi(e)){if("function"!==typeof _e)throw Error(a(280));var t=e.stateNode;t&&(t=xi(t),_e(e.stateNode,e.type,t))}}function ke(e){we?Se?Se.push(e):Se=[e]:we=e}function Te(){if(we){var e=we,t=Se;if(Se=we=null,Me(e),t)for(e=0;e<t.length;e++)Me(t[e])}}function Ee(e,t){return e(t)}function Ce(){}var Re=!1;function Be(e,t,n){if(Re)return e(t,n);Re=!0;try{return Ee(e,t,n)}finally{Re=!1,(null!==we||null!==Se)&&(Ce(),Te())}}function Pe(e,t){var n=e.stateNode;if(null===n)return null;var r=xi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Ne=!1;if(c)try{var Ie={};Object.defineProperty(Ie,"passive",{get:function(){Ne=!0}}),window.addEventListener("test",Ie,Ie),window.removeEventListener("test",Ie,Ie)}catch(ce){Ne=!1}function De(e,t,n,r,i,a,o,s,u){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(c){this.onError(c)}}var Le=!1,Oe=null,Fe=!1,Ue=null,ze={onError:function(e){Le=!0,Oe=e}};function Ge(e,t,n,r,i,a,o,s,u){Le=!1,Oe=null,De.apply(ze,arguments)}function qe(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function He(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ve(e){if(qe(e)!==e)throw Error(a(188))}function je(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=qe(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Ve(i),e;if(o===r)return Ve(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,u=i.child;u;){if(u===n){s=!0,n=i,r=o;break}if(u===r){s=!0,r=i,n=o;break}u=u.sibling}if(!s){for(u=o.child;u;){if(u===n){s=!0,n=o,r=i;break}if(u===r){s=!0,r=o,n=i;break}u=u.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?We(e):null}function We(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=We(e);if(null!==t)return t;e=e.sibling}return null}var Xe=i.unstable_scheduleCallback,Ye=i.unstable_cancelCallback,Qe=i.unstable_shouldYield,Je=i.unstable_requestPaint,Ke=i.unstable_now,Ze=i.unstable_getCurrentPriorityLevel,$e=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(st(e)/ut|0)|0},st=Math.log,ut=Math.LN2;var lt=64,ct=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var s=o&~i;0!==s?r=ht(s):0!==(a&=o)&&(r=ht(a))}else 0!==(o=n&~i)?r=ht(o):0!==a&&(r=ht(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function At(){var e=lt;return 0===(4194240&(lt<<=1))&&(lt=64),e}function vt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function mt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function gt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var yt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var xt,_t,wt,St,Mt,kt=!1,Tt=[],Et=null,Ct=null,Rt=null,Bt=new Map,Pt=new Map,Nt=[],It="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Dt(e,t){switch(e){case"focusin":case"focusout":Et=null;break;case"dragenter":case"dragleave":Ct=null;break;case"mouseover":case"mouseout":Rt=null;break;case"pointerover":case"pointerout":Bt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pt.delete(t.pointerId)}}function Lt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=yi(t))&&_t(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ot(e){var t=gi(e.target);if(null!==t){var n=qe(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=He(n)))return e.blockedOn=t,void Mt(e.priority,(function(){wt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Qt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=yi(n))&&_t(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Ut(e,t,n){Ft(e)&&n.delete(t)}function zt(){kt=!1,null!==Et&&Ft(Et)&&(Et=null),null!==Ct&&Ft(Ct)&&(Ct=null),null!==Rt&&Ft(Rt)&&(Rt=null),Bt.forEach(Ut),Pt.forEach(Ut)}function Gt(e,t){e.blockedOn===t&&(e.blockedOn=null,kt||(kt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,zt)))}function qt(e){function t(t){return Gt(t,e)}if(0<Tt.length){Gt(Tt[0],e);for(var n=1;n<Tt.length;n++){var r=Tt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Et&&Gt(Et,e),null!==Ct&&Gt(Ct,e),null!==Rt&&Gt(Rt,e),Bt.forEach(t),Pt.forEach(t),n=0;n<Nt.length;n++)(r=Nt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Nt.length&&null===(n=Nt[0]).blockedOn;)Ot(n),null===n.blockedOn&&Nt.shift()}var Ht=b.ReactCurrentBatchConfig,Vt=!0;function jt(e,t,n,r){var i=yt,a=Ht.transition;Ht.transition=null;try{yt=1,Xt(e,t,n,r)}finally{yt=i,Ht.transition=a}}function Wt(e,t,n,r){var i=yt,a=Ht.transition;Ht.transition=null;try{yt=4,Xt(e,t,n,r)}finally{yt=i,Ht.transition=a}}function Xt(e,t,n,r){if(Vt){var i=Qt(e,t,n,r);if(null===i)Vr(e,t,r,Yt,n),Dt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Et=Lt(Et,e,t,n,r,i),!0;case"dragenter":return Ct=Lt(Ct,e,t,n,r,i),!0;case"mouseover":return Rt=Lt(Rt,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Bt.set(a,Lt(Bt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Pt.set(a,Lt(Pt.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Dt(e,r),4&t&&-1<It.indexOf(e)){for(;null!==i;){var a=yi(i);if(null!==a&&xt(a),null===(a=Qt(e,t,n,r))&&Vr(e,t,r,Yt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Vr(e,t,r,null,n)}}var Yt=null;function Qt(e,t,n,r){if(Yt=null,null!==(e=gi(e=xe(r))))if(null===(t=qe(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=He(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Yt=e,null}function Jt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ze()){case $e:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Kt=null,Zt=null,$t=null;function en(){if($t)return $t;var e,t,n=Zt,r=n.length,i="value"in Kt?Kt.value:Kt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return $t=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return O(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,sn,un,ln={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cn=an(ln),hn=O({},ln,{view:0,detail:0}),dn=an(hn),fn=O({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Mn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==un&&(un&&"mousemove"===e.type?(on=e.screenX-un.screenX,sn=e.screenY-un.screenY):sn=on=0,un=e),on)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),pn=an(fn),An=an(O({},fn,{dataTransfer:0})),vn=an(O({},hn,{relatedTarget:0})),mn=an(O({},ln,{animationName:0,elapsedTime:0,pseudoElement:0})),gn=O({},ln,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),yn=an(gn),bn=an(O({},ln,{data:0})),xn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_n={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=wn[e])&&!!t[e]}function Mn(){return Sn}var kn=O({},hn,{key:function(e){if(e.key){var t=xn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?_n[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Mn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Tn=an(kn),En=an(O({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Cn=an(O({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Mn})),Rn=an(O({},ln,{propertyName:0,elapsedTime:0,pseudoElement:0})),Bn=O({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Pn=an(Bn),Nn=[9,13,27,32],In=c&&"CompositionEvent"in window,Dn=null;c&&"documentMode"in document&&(Dn=document.documentMode);var Ln=c&&"TextEvent"in window&&!Dn,On=c&&(!In||Dn&&8<Dn&&11>=Dn),Fn=String.fromCharCode(32),Un=!1;function zn(e,t){switch(e){case"keyup":return-1!==Nn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Gn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var qn=!1;var Hn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Hn[e.type]:"textarea"===t}function jn(e,t,n,r){ke(r),0<(t=Wr(t,"onChange")).length&&(n=new cn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Wn=null,Xn=null;function Yn(e){Fr(e,0)}function Qn(e){if(X(bi(e)))return e}function Jn(e,t){if("change"===e)return t}var Kn=!1;if(c){var Zn;if(c){var $n="oninput"in document;if(!$n){var er=document.createElement("div");er.setAttribute("oninput","return;"),$n="function"===typeof er.oninput}Zn=$n}else Zn=!1;Kn=Zn&&(!document.documentMode||9<document.documentMode)}function tr(){Wn&&(Wn.detachEvent("onpropertychange",nr),Xn=Wn=null)}function nr(e){if("value"===e.propertyName&&Qn(Xn)){var t=[];jn(t,Xn,e,xe(e)),Be(Yn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Xn=n,(Wn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Qn(Xn)}function ar(e,t){if("click"===e)return Qn(t)}function or(e,t){if("input"===e||"change"===e)return Qn(t)}var sr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function ur(e,t){if(sr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!sr(e[i],t[i]))return!1}return!0}function lr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function cr(e,t){var n,r=lr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=lr(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function dr(){for(var e=window,t=Y();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Y((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=dr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=cr(n,a);var o=cr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Ar=c&&"documentMode"in document&&11>=document.documentMode,vr=null,mr=null,gr=null,yr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;yr||null==vr||vr!==Y(r)||("selectionStart"in(r=vr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},gr&&ur(gr,r)||(gr=r,0<(r=Wr(mr,"onSelect")).length&&(t=new cn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=vr)))}function xr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var _r={animationend:xr("Animation","AnimationEnd"),animationiteration:xr("Animation","AnimationIteration"),animationstart:xr("Animation","AnimationStart"),transitionend:xr("Transition","TransitionEnd")},wr={},Sr={};function Mr(e){if(wr[e])return wr[e];if(!_r[e])return e;var t,n=_r[e];for(t in n)if(n.hasOwnProperty(t)&&t in Sr)return wr[e]=n[t];return e}c&&(Sr=document.createElement("div").style,"AnimationEvent"in window||(delete _r.animationend.animation,delete _r.animationiteration.animation,delete _r.animationstart.animation),"TransitionEvent"in window||delete _r.transitionend.transition);var kr=Mr("animationend"),Tr=Mr("animationiteration"),Er=Mr("animationstart"),Cr=Mr("transitionend"),Rr=new Map,Br="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pr(e,t){Rr.set(e,t),u(t,[e])}for(var Nr=0;Nr<Br.length;Nr++){var Ir=Br[Nr];Pr(Ir.toLowerCase(),"on"+(Ir[0].toUpperCase()+Ir.slice(1)))}Pr(kr,"onAnimationEnd"),Pr(Tr,"onAnimationIteration"),Pr(Er,"onAnimationStart"),Pr("dblclick","onDoubleClick"),Pr("focusin","onFocus"),Pr("focusout","onBlur"),Pr(Cr,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Dr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Dr));function Or(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,s,u,l){if(Ge.apply(this,arguments),Le){if(!Le)throw Error(a(198));var c=Oe;Le=!1,Oe=null,Fe||(Fe=!0,Ue=c)}}(r,t,void 0,e),e.currentTarget=null}function Fr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var s=r[o],u=s.instance,l=s.currentTarget;if(s=s.listener,u!==a&&i.isPropagationStopped())break e;Or(i,s,l),a=u}else for(o=0;o<r.length;o++){if(u=(s=r[o]).instance,l=s.currentTarget,s=s.listener,u!==a&&i.isPropagationStopped())break e;Or(i,s,l),a=u}}}if(Fe)throw e=Ue,Fe=!1,Ue=null,e}function Ur(e,t){var n=t[Ai];void 0===n&&(n=t[Ai]=new Set);var r=e+"__bubble";n.has(r)||(Hr(t,e,2,!1),n.add(r))}function zr(e,t,n){var r=0;t&&(r|=4),Hr(n,e,r,t)}var Gr="_reactListening"+Math.random().toString(36).slice(2);function qr(e){if(!e[Gr]){e[Gr]=!0,o.forEach((function(t){"selectionchange"!==t&&(Lr.has(t)||zr(t,!1,e),zr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Gr]||(t[Gr]=!0,zr("selectionchange",!1,t))}}function Hr(e,t,n,r){switch(Jt(t)){case 1:var i=jt;break;case 4:i=Wt;break;default:i=Xt}n=i.bind(null,t,n,e),i=void 0,!Ne||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Vr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var u=o.tag;if((3===u||4===u)&&((u=o.stateNode.containerInfo)===i||8===u.nodeType&&u.parentNode===i))return;o=o.return}for(;null!==s;){if(null===(o=gi(s)))return;if(5===(u=o.tag)||6===u){r=a=o;continue e}s=s.parentNode}}r=r.return}Be((function(){var r=a,i=xe(n),o=[];e:{var s=Rr.get(e);if(void 0!==s){var u=cn,l=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":u=Tn;break;case"focusin":l="focus",u=vn;break;case"focusout":l="blur",u=vn;break;case"beforeblur":case"afterblur":u=vn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=An;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=Cn;break;case kr:case Tr:case Er:u=mn;break;case Cr:u=Rn;break;case"scroll":u=dn;break;case"wheel":u=Pn;break;case"copy":case"cut":case"paste":u=yn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=En}var c=0!==(4&t),h=!c&&"scroll"===e,d=c?null!==s?s+"Capture":null:s;c=[];for(var f,p=r;null!==p;){var A=(f=p).stateNode;if(5===f.tag&&null!==A&&(f=A,null!==d&&(null!=(A=Pe(p,d))&&c.push(jr(p,A,f)))),h)break;p=p.return}0<c.length&&(s=new u(s,l,null,n,i),o.push({event:s,listeners:c}))}}if(0===(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===be||!(l=n.relatedTarget||n.fromElement)||!gi(l)&&!l[pi])&&(u||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,u?(u=r,null!==(l=(l=n.relatedTarget||n.toElement)?gi(l):null)&&(l!==(h=qe(l))||5!==l.tag&&6!==l.tag)&&(l=null)):(u=null,l=r),u!==l)){if(c=pn,A="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(c=En,A="onPointerLeave",d="onPointerEnter",p="pointer"),h=null==u?s:bi(u),f=null==l?s:bi(l),(s=new c(A,p+"leave",u,n,i)).target=h,s.relatedTarget=f,A=null,gi(i)===r&&((c=new c(d,p+"enter",l,n,i)).target=f,c.relatedTarget=h,A=c),h=A,u&&l)e:{for(d=l,p=0,f=c=u;f;f=Xr(f))p++;for(f=0,A=d;A;A=Xr(A))f++;for(;0<p-f;)c=Xr(c),p--;for(;0<f-p;)d=Xr(d),f--;for(;p--;){if(c===d||null!==d&&c===d.alternate)break e;c=Xr(c),d=Xr(d)}c=null}else c=null;null!==u&&Yr(o,s,u,c,!1),null!==l&&null!==h&&Yr(o,h,l,c,!0)}if("select"===(u=(s=r?bi(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===u&&"file"===s.type)var v=Jn;else if(Vn(s))if(Kn)v=or;else{v=ir;var m=rr}else(u=s.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(v=ar);switch(v&&(v=v(e,r))?jn(o,v,n,i):(m&&m(e,s,r),"focusout"===e&&(m=s._wrapperState)&&m.controlled&&"number"===s.type&&ee(s,"number",s.value)),m=r?bi(r):window,e){case"focusin":(Vn(m)||"true"===m.contentEditable)&&(vr=m,mr=r,gr=null);break;case"focusout":gr=mr=vr=null;break;case"mousedown":yr=!0;break;case"contextmenu":case"mouseup":case"dragend":yr=!1,br(o,n,i);break;case"selectionchange":if(Ar)break;case"keydown":case"keyup":br(o,n,i)}var g;if(In)e:{switch(e){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else qn?zn(e,n)&&(y="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(y="onCompositionStart");y&&(On&&"ko"!==n.locale&&(qn||"onCompositionStart"!==y?"onCompositionEnd"===y&&qn&&(g=en()):(Zt="value"in(Kt=i)?Kt.value:Kt.textContent,qn=!0)),0<(m=Wr(r,y)).length&&(y=new bn(y,e,null,n,i),o.push({event:y,listeners:m}),g?y.data=g:null!==(g=Gn(n))&&(y.data=g))),(g=Ln?function(e,t){switch(e){case"compositionend":return Gn(t);case"keypress":return 32!==t.which?null:(Un=!0,Fn);case"textInput":return(e=t.data)===Fn&&Un?null:e;default:return null}}(e,n):function(e,t){if(qn)return"compositionend"===e||!In&&zn(e,t)?(e=en(),$t=Zt=Kt=null,qn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return On&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Wr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}Fr(o,t)}))}function jr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Wr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Pe(e,n))&&r.unshift(jr(e,a,i)),null!=(a=Pe(e,t))&&r.push(jr(e,a,i))),e=e.return}return r}function Xr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Yr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var s=n,u=s.alternate,l=s.stateNode;if(null!==u&&u===r)break;5===s.tag&&null!==l&&(s=l,i?null!=(u=Pe(n,a))&&o.unshift(jr(n,u,s)):i||null!=(u=Pe(n,a))&&o.push(jr(n,u,s))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Qr=/\r\n?/g,Jr=/\u0000|\uFFFD/g;function Kr(e){return("string"===typeof e?e:""+e).replace(Qr,"\n").replace(Jr,"")}function Zr(e,t,n){if(t=Kr(t),Kr(e)!==t&&n)throw Error(a(425))}function $r(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(si)}:ri;function si(e){setTimeout((function(){throw e}))}function ui(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void qt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);qt(t)}function li(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ci(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hi=Math.random().toString(36).slice(2),di="__reactFiber$"+hi,fi="__reactProps$"+hi,pi="__reactContainer$"+hi,Ai="__reactEvents$"+hi,vi="__reactListeners$"+hi,mi="__reactHandles$"+hi;function gi(e){var t=e[di];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[di]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ci(e);null!==e;){if(n=e[di])return n;e=ci(e)}return t}n=(e=n).parentNode}return null}function yi(e){return!(e=e[di]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function xi(e){return e[fi]||null}var _i=[],wi=-1;function Si(e){return{current:e}}function Mi(e){0>wi||(e.current=_i[wi],_i[wi]=null,wi--)}function ki(e,t){wi++,_i[wi]=e.current,e.current=t}var Ti={},Ei=Si(Ti),Ci=Si(!1),Ri=Ti;function Bi(e,t){var n=e.type.contextTypes;if(!n)return Ti;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Pi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ni(){Mi(Ci),Mi(Ei)}function Ii(e,t,n){if(Ei.current!==Ti)throw Error(a(168));ki(Ei,t),ki(Ci,n)}function Di(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,H(e)||"Unknown",i));return O({},n,r)}function Li(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ti,Ri=Ei.current,ki(Ei,e),ki(Ci,Ci.current),!0}function Oi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Di(e,t,Ri),r.__reactInternalMemoizedMergedChildContext=e,Mi(Ci),Mi(Ei),ki(Ei,e)):Mi(Ci),ki(Ci,n)}var Fi=null,Ui=!1,zi=!1;function Gi(e){null===Fi?Fi=[e]:Fi.push(e)}function qi(){if(!zi&&null!==Fi){zi=!0;var e=0,t=yt;try{var n=Fi;for(yt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Fi=null,Ui=!1}catch(i){throw null!==Fi&&(Fi=Fi.slice(e+1)),Xe($e,qi),i}finally{yt=t,zi=!1}}return null}var Hi=[],Vi=0,ji=null,Wi=0,Xi=[],Yi=0,Qi=null,Ji=1,Ki="";function Zi(e,t){Hi[Vi++]=Wi,Hi[Vi++]=ji,ji=e,Wi=t}function $i(e,t,n){Xi[Yi++]=Ji,Xi[Yi++]=Ki,Xi[Yi++]=Qi,Qi=e;var r=Ji;e=Ki;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Ji=1<<32-ot(t)+i|n<<i|r,Ki=a+e}else Ji=1<<a|n<<i|r,Ki=e}function ea(e){null!==e.return&&(Zi(e,1),$i(e,1,0))}function ta(e){for(;e===ji;)ji=Hi[--Vi],Hi[Vi]=null,Wi=Hi[--Vi],Hi[Vi]=null;for(;e===Qi;)Qi=Xi[--Yi],Xi[Yi]=null,Ki=Xi[--Yi],Xi[Yi]=null,Ji=Xi[--Yi],Xi[Yi]=null}var na=null,ra=null,ia=!1,aa=null;function oa(e,t){var n=Bl(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function sa(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ra=li(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Qi?{id:Ji,overflow:Ki}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Bl(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ra=null,!0);default:return!1}}function ua(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function la(e){if(ia){var t=ra;if(t){var n=t;if(!sa(e,t)){if(ua(e))throw Error(a(418));t=li(n.nextSibling);var r=na;t&&sa(e,t)?oa(r,n):(e.flags=-4097&e.flags|2,ia=!1,na=e)}}else{if(ua(e))throw Error(a(418));e.flags=-4097&e.flags|2,ia=!1,na=e}}}function ca(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function ha(e){if(e!==na)return!1;if(!ia)return ca(e),ia=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ra)){if(ua(e))throw da(),Error(a(418));for(;t;)oa(e,t),t=li(t.nextSibling)}if(ca(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ra=li(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ra=null}}else ra=na?li(e.stateNode.nextSibling):null;return!0}function da(){for(var e=ra;e;)e=li(e.nextSibling)}function fa(){ra=na=null,ia=!1}function pa(e){null===aa?aa=[e]:aa.push(e)}var Aa=b.ReactCurrentBatchConfig;function va(e,t){if(e&&e.defaultProps){for(var n in t=O({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ma=Si(null),ga=null,ya=null,ba=null;function xa(){ba=ya=ga=null}function _a(e){var t=ma.current;Mi(ma),e._currentValue=t}function wa(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Sa(e,t){ga=e,ba=ya=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bs=!0),e.firstContext=null)}function Ma(e){var t=e._currentValue;if(ba!==e)if(e={context:e,memoizedValue:t,next:null},null===ya){if(null===ga)throw Error(a(308));ya=e,ga.dependencies={lanes:0,firstContext:e}}else ya=ya.next=e;return t}var ka=null;function Ta(e){null===ka?ka=[e]:ka.push(e)}function Ea(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ta(t)):(n.next=i.next,i.next=n),t.interleaved=n,Ca(e,r)}function Ca(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ra=!1;function Ba(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Pa(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Na(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ia(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Eu)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Ca(e,n)}return null===(i=r.interleaved)?(t.next=t,Ta(r)):(t.next=i.next,i.next=t),r.interleaved=t,Ca(e,n)}function Da(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}function La(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Oa(e,t,n,r){var i=e.updateQueue;Ra=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var u=s,l=u.next;u.next=null,null===o?a=l:o.next=l,o=u;var c=e.alternate;null!==c&&((s=(c=c.updateQueue).lastBaseUpdate)!==o&&(null===s?c.firstBaseUpdate=l:s.next=l,c.lastBaseUpdate=u))}if(null!==a){var h=i.baseState;for(o=0,c=l=u=null,s=a;;){var d=s.lane,f=s.eventTime;if((r&d)===d){null!==c&&(c=c.next={eventTime:f,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var p=e,A=s;switch(d=t,f=n,A.tag){case 1:if("function"===typeof(p=A.payload)){h=p.call(f,h,d);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(d="function"===typeof(p=A.payload)?p.call(f,h,d):p)||void 0===d)break e;h=O({},h,d);break e;case 2:Ra=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(d=i.effects)?i.effects=[s]:d.push(s))}else f={eventTime:f,lane:d,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===c?(l=c=f,u=h):c=c.next=f,o|=d;if(null===(s=s.next)){if(null===(s=i.shared.pending))break;s=(d=s).next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}if(null===c&&(u=h),i.baseState=u,i.firstBaseUpdate=l,i.lastBaseUpdate=c,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Lu|=o,e.lanes=o,e.memoizedState=h}}function Fa(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var Ua=(new r.Component).refs;function za(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:O({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Ga={isMounted:function(e){return!!(e=e._reactInternals)&&qe(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=el(),i=tl(e),a=Na(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Ia(e,a,i))&&(nl(t,e,i,r),Da(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=el(),i=tl(e),a=Na(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Ia(e,a,i))&&(nl(t,e,i,r),Da(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=el(),r=tl(e),i=Na(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Ia(e,i,r))&&(nl(t,e,r,n),Da(t,e,r))}};function qa(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!ur(n,r)||!ur(i,a))}function Ha(e,t,n){var r=!1,i=Ti,a=t.contextType;return"object"===typeof a&&null!==a?a=Ma(a):(i=Pi(t)?Ri:Ei.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Bi(e,i):Ti),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Ga,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function Va(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Ga.enqueueReplaceState(t,t.state,null)}function ja(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Ua,Ba(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Ma(a):(a=Pi(t)?Ri:Ei.current,i.context=Bi(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(za(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Ga.enqueueReplaceState(i,i.state,null),Oa(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Wa(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===Ua&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Xa(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Ya(e){return(0,e._init)(e._payload)}function Qa(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Nl(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function u(e,t,n,r){return null===t||6!==t.tag?((t=Ol(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function l(e,t,n,r){var a=n.type;return a===w?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===P&&Ya(a)===t.type)?((r=i(t,n.props)).ref=Wa(e,t,n),r.return=e,r):((r=Il(n.type,n.key,n.props,null,e.mode,r)).ref=Wa(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Fl(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,a){return null===t||7!==t.tag?((t=Dl(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Ol(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case x:return(n=Il(t.type,t.key,t.props,null,e.mode,n)).ref=Wa(e,null,t),n.return=e,n;case _:return(t=Fl(t,e.mode,n)).return=e,t;case P:return d(e,(0,t._init)(t._payload),n)}if(te(t)||D(t))return(t=Dl(t,e.mode,n,null)).return=e,t;Xa(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:u(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case x:return n.key===i?l(e,t,n,r):null;case _:return n.key===i?c(e,t,n,r):null;case P:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||D(n))return null!==i?null:h(e,t,n,r,null);Xa(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return u(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case x:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case _:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case P:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||D(r))return h(t,e=e.get(n)||null,r,i,null);Xa(t,r)}return null}function A(i,a,s,u){for(var l=null,c=null,h=a,A=a=0,v=null;null!==h&&A<s.length;A++){h.index>A?(v=h,h=null):v=h.sibling;var m=f(i,h,s[A],u);if(null===m){null===h&&(h=v);break}e&&h&&null===m.alternate&&t(i,h),a=o(m,a,A),null===c?l=m:c.sibling=m,c=m,h=v}if(A===s.length)return n(i,h),ia&&Zi(i,A),l;if(null===h){for(;A<s.length;A++)null!==(h=d(i,s[A],u))&&(a=o(h,a,A),null===c?l=h:c.sibling=h,c=h);return ia&&Zi(i,A),l}for(h=r(i,h);A<s.length;A++)null!==(v=p(h,i,A,s[A],u))&&(e&&null!==v.alternate&&h.delete(null===v.key?A:v.key),a=o(v,a,A),null===c?l=v:c.sibling=v,c=v);return e&&h.forEach((function(e){return t(i,e)})),ia&&Zi(i,A),l}function v(i,s,u,l){var c=D(u);if("function"!==typeof c)throw Error(a(150));if(null==(u=c.call(u)))throw Error(a(151));for(var h=c=null,A=s,v=s=0,m=null,g=u.next();null!==A&&!g.done;v++,g=u.next()){A.index>v?(m=A,A=null):m=A.sibling;var y=f(i,A,g.value,l);if(null===y){null===A&&(A=m);break}e&&A&&null===y.alternate&&t(i,A),s=o(y,s,v),null===h?c=y:h.sibling=y,h=y,A=m}if(g.done)return n(i,A),ia&&Zi(i,v),c;if(null===A){for(;!g.done;v++,g=u.next())null!==(g=d(i,g.value,l))&&(s=o(g,s,v),null===h?c=g:h.sibling=g,h=g);return ia&&Zi(i,v),c}for(A=r(i,A);!g.done;v++,g=u.next())null!==(g=p(A,i,v,g.value,l))&&(e&&null!==g.alternate&&A.delete(null===g.key?v:g.key),s=o(g,s,v),null===h?c=g:h.sibling=g,h=g);return e&&A.forEach((function(e){return t(i,e)})),ia&&Zi(i,v),c}return function e(r,a,o,u){if("object"===typeof o&&null!==o&&o.type===w&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case x:e:{for(var l=o.key,c=a;null!==c;){if(c.key===l){if((l=o.type)===w){if(7===c.tag){n(r,c.sibling),(a=i(c,o.props.children)).return=r,r=a;break e}}else if(c.elementType===l||"object"===typeof l&&null!==l&&l.$$typeof===P&&Ya(l)===c.type){n(r,c.sibling),(a=i(c,o.props)).ref=Wa(r,c,o),a.return=r,r=a;break e}n(r,c);break}t(r,c),c=c.sibling}o.type===w?((a=Dl(o.props.children,r.mode,u,o.key)).return=r,r=a):((u=Il(o.type,o.key,o.props,null,r.mode,u)).ref=Wa(r,a,o),u.return=r,r=u)}return s(r);case _:e:{for(c=o.key;null!==a;){if(a.key===c){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Fl(o,r.mode,u)).return=r,r=a}return s(r);case P:return e(r,a,(c=o._init)(o._payload),u)}if(te(o))return A(r,a,o,u);if(D(o))return v(r,a,o,u);Xa(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=Ol(o,r.mode,u)).return=r,r=a),s(r)):n(r,a)}}var Ja=Qa(!0),Ka=Qa(!1),Za={},$a=Si(Za),eo=Si(Za),to=Si(Za);function no(e){if(e===Za)throw Error(a(174));return e}function ro(e,t){switch(ki(to,t),ki(eo,e),ki($a,Za),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ue(null,"");break;default:t=ue(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Mi($a),ki($a,t)}function io(){Mi($a),Mi(eo),Mi(to)}function ao(e){no(to.current);var t=no($a.current),n=ue(t,e.type);t!==n&&(ki(eo,e),ki($a,n))}function oo(e){eo.current===e&&(Mi($a),Mi(eo))}var so=Si(0);function uo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var lo=[];function co(){for(var e=0;e<lo.length;e++)lo[e]._workInProgressVersionPrimary=null;lo.length=0}var ho=b.ReactCurrentDispatcher,fo=b.ReactCurrentBatchConfig,po=0,Ao=null,vo=null,mo=null,go=!1,yo=!1,bo=0,xo=0;function _o(){throw Error(a(321))}function wo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sr(e[n],t[n]))return!1;return!0}function So(e,t,n,r,i,o){if(po=o,Ao=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ho.current=null===e||null===e.memoizedState?ss:us,e=n(r,i),yo){o=0;do{if(yo=!1,bo=0,25<=o)throw Error(a(301));o+=1,mo=vo=null,t.updateQueue=null,ho.current=ls,e=n(r,i)}while(yo)}if(ho.current=os,t=null!==vo&&null!==vo.next,po=0,mo=vo=Ao=null,go=!1,t)throw Error(a(300));return e}function Mo(){var e=0!==bo;return bo=0,e}function ko(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===mo?Ao.memoizedState=mo=e:mo=mo.next=e,mo}function To(){if(null===vo){var e=Ao.alternate;e=null!==e?e.memoizedState:null}else e=vo.next;var t=null===mo?Ao.memoizedState:mo.next;if(null!==t)mo=t,vo=e;else{if(null===e)throw Error(a(310));e={memoizedState:(vo=e).memoizedState,baseState:vo.baseState,baseQueue:vo.baseQueue,queue:vo.queue,next:null},null===mo?Ao.memoizedState=mo=e:mo=mo.next=e}return mo}function Eo(e,t){return"function"===typeof t?t(e):t}function Co(e){var t=To(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=vo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var u=s=null,l=null,c=o;do{var h=c.lane;if((po&h)===h)null!==l&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var d={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===l?(u=l=d,s=r):l=l.next=d,Ao.lanes|=h,Lu|=h}c=c.next}while(null!==c&&c!==o);null===l?s=r:l.next=u,sr(r,t.memoizedState)||(bs=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=l,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,Ao.lanes|=o,Lu|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ro(e){var t=To(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{o=e(o,s.action),s=s.next}while(s!==i);sr(o,t.memoizedState)||(bs=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Bo(){}function Po(e,t){var n=Ao,r=To(),i=t(),o=!sr(r.memoizedState,i);if(o&&(r.memoizedState=i,bs=!0),r=r.queue,Vo(Do.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==mo&&1&mo.memoizedState.tag){if(n.flags|=2048,Uo(9,Io.bind(null,n,r,i,t),void 0,null),null===Cu)throw Error(a(349));0!==(30&po)||No(n,t,i)}return i}function No(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=Ao.updateQueue)?(t={lastEffect:null,stores:null},Ao.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Io(e,t,n,r){t.value=n,t.getSnapshot=r,Lo(t)&&Oo(e)}function Do(e,t,n){return n((function(){Lo(t)&&Oo(e)}))}function Lo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sr(e,n)}catch(r){return!0}}function Oo(e){var t=Ca(e,1);null!==t&&nl(t,e,1,-1)}function Fo(e){var t=ko();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Eo,lastRenderedState:e},t.queue=e,e=e.dispatch=ns.bind(null,Ao,e),[t.memoizedState,e]}function Uo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=Ao.updateQueue)?(t={lastEffect:null,stores:null},Ao.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function zo(){return To().memoizedState}function Go(e,t,n,r){var i=ko();Ao.flags|=e,i.memoizedState=Uo(1|t,n,void 0,void 0===r?null:r)}function qo(e,t,n,r){var i=To();r=void 0===r?null:r;var a=void 0;if(null!==vo){var o=vo.memoizedState;if(a=o.destroy,null!==r&&wo(r,o.deps))return void(i.memoizedState=Uo(t,n,a,r))}Ao.flags|=e,i.memoizedState=Uo(1|t,n,a,r)}function Ho(e,t){return Go(8390656,8,e,t)}function Vo(e,t){return qo(2048,8,e,t)}function jo(e,t){return qo(4,2,e,t)}function Wo(e,t){return qo(4,4,e,t)}function Xo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Yo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,qo(4,4,Xo.bind(null,t,e),n)}function Qo(){}function Jo(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&wo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Ko(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&wo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Zo(e,t,n){return 0===(21&po)?(e.baseState&&(e.baseState=!1,bs=!0),e.memoizedState=n):(sr(n,t)||(n=At(),Ao.lanes|=n,Lu|=n,e.baseState=!0),t)}function $o(e,t){var n=yt;yt=0!==n&&4>n?n:4,e(!0);var r=fo.transition;fo.transition={};try{e(!1),t()}finally{yt=n,fo.transition=r}}function es(){return To().memoizedState}function ts(e,t,n){var r=tl(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},rs(e))is(t,n);else if(null!==(n=Ea(e,t,n,r))){nl(n,e,r,el()),as(n,t,r)}}function ns(e,t,n){var r=tl(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(rs(e))is(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,s=a(o,n);if(i.hasEagerState=!0,i.eagerState=s,sr(s,o)){var u=t.interleaved;return null===u?(i.next=i,Ta(t)):(i.next=u.next,u.next=i),void(t.interleaved=i)}}catch(l){}null!==(n=Ea(e,t,i,r))&&(nl(n,e,r,i=el()),as(n,t,r))}}function rs(e){var t=e.alternate;return e===Ao||null!==t&&t===Ao}function is(e,t){yo=go=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function as(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}var os={readContext:Ma,useCallback:_o,useContext:_o,useEffect:_o,useImperativeHandle:_o,useInsertionEffect:_o,useLayoutEffect:_o,useMemo:_o,useReducer:_o,useRef:_o,useState:_o,useDebugValue:_o,useDeferredValue:_o,useTransition:_o,useMutableSource:_o,useSyncExternalStore:_o,useId:_o,unstable_isNewReconciler:!1},ss={readContext:Ma,useCallback:function(e,t){return ko().memoizedState=[e,void 0===t?null:t],e},useContext:Ma,useEffect:Ho,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Go(4194308,4,Xo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Go(4194308,4,e,t)},useInsertionEffect:function(e,t){return Go(4,2,e,t)},useMemo:function(e,t){var n=ko();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ko();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ts.bind(null,Ao,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},ko().memoizedState=e},useState:Fo,useDebugValue:Qo,useDeferredValue:function(e){return ko().memoizedState=e},useTransition:function(){var e=Fo(!1),t=e[0];return e=$o.bind(null,e[1]),ko().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Ao,i=ko();if(ia){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Cu)throw Error(a(349));0!==(30&po)||No(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Ho(Do.bind(null,r,o,e),[e]),r.flags|=2048,Uo(9,Io.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=ko(),t=Cu.identifierPrefix;if(ia){var n=Ki;t=":"+t+"R"+(n=(Ji&~(1<<32-ot(Ji)-1)).toString(32)+n),0<(n=bo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=xo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},us={readContext:Ma,useCallback:Jo,useContext:Ma,useEffect:Vo,useImperativeHandle:Yo,useInsertionEffect:jo,useLayoutEffect:Wo,useMemo:Ko,useReducer:Co,useRef:zo,useState:function(){return Co(Eo)},useDebugValue:Qo,useDeferredValue:function(e){return Zo(To(),vo.memoizedState,e)},useTransition:function(){return[Co(Eo)[0],To().memoizedState]},useMutableSource:Bo,useSyncExternalStore:Po,useId:es,unstable_isNewReconciler:!1},ls={readContext:Ma,useCallback:Jo,useContext:Ma,useEffect:Vo,useImperativeHandle:Yo,useInsertionEffect:jo,useLayoutEffect:Wo,useMemo:Ko,useReducer:Ro,useRef:zo,useState:function(){return Ro(Eo)},useDebugValue:Qo,useDeferredValue:function(e){var t=To();return null===vo?t.memoizedState=e:Zo(t,vo.memoizedState,e)},useTransition:function(){return[Ro(Eo)[0],To().memoizedState]},useMutableSource:Bo,useSyncExternalStore:Po,useId:es,unstable_isNewReconciler:!1};function cs(e,t){try{var n="",r=t;do{n+=G(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i,digest:null}}function hs(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ds(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var fs="function"===typeof WeakMap?WeakMap:Map;function ps(e,t,n){(n=Na(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Vu||(Vu=!0,ju=r),ds(0,t)},n}function As(e,t,n){(n=Na(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){ds(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){ds(0,t),"function"!==typeof r&&(null===Wu?Wu=new Set([this]):Wu.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function vs(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new fs;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Ml.bind(null,e,t,n),t.then(e,e))}function ms(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function gs(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Na(-1,1)).tag=2,Ia(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ys=b.ReactCurrentOwner,bs=!1;function xs(e,t,n,r){t.child=null===e?Ka(t,null,n,r):Ja(t,e.child,n,r)}function _s(e,t,n,r,i){n=n.render;var a=t.ref;return Sa(t,i),r=So(e,t,n,r,a,i),n=Mo(),null===e||bs?(ia&&n&&ea(t),t.flags|=1,xs(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Vs(e,t,i))}function ws(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Pl(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Il(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Ss(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:ur)(o,r)&&e.ref===t.ref)return Vs(e,t,i)}return t.flags|=1,(e=Nl(a,r)).ref=t.ref,e.return=t,t.child=e}function Ss(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(ur(a,r)&&e.ref===t.ref){if(bs=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,Vs(e,t,i);0!==(131072&e.flags)&&(bs=!0)}}return Ts(e,t,n,r,i)}function Ms(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ki(Nu,Pu),Pu|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ki(Nu,Pu),Pu|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,ki(Nu,Pu),Pu|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,ki(Nu,Pu),Pu|=r;return xs(e,t,i,n),t.child}function ks(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ts(e,t,n,r,i){var a=Pi(n)?Ri:Ei.current;return a=Bi(t,a),Sa(t,i),n=So(e,t,n,r,a,i),r=Mo(),null===e||bs?(ia&&r&&ea(t),t.flags|=1,xs(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Vs(e,t,i))}function Es(e,t,n,r,i){if(Pi(n)){var a=!0;Li(t)}else a=!1;if(Sa(t,i),null===t.stateNode)Hs(e,t),Ha(t,n,r),ja(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var u=o.context,l=n.contextType;"object"===typeof l&&null!==l?l=Ma(l):l=Bi(t,l=Pi(n)?Ri:Ei.current);var c=n.getDerivedStateFromProps,h="function"===typeof c||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==r||u!==l)&&Va(t,o,r,l),Ra=!1;var d=t.memoizedState;o.state=d,Oa(t,r,o,i),u=t.memoizedState,s!==r||d!==u||Ci.current||Ra?("function"===typeof c&&(za(t,n,c,r),u=t.memoizedState),(s=Ra||qa(t,n,s,r,d,u,l))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=l,r=s):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Pa(e,t),s=t.memoizedProps,l=t.type===t.elementType?s:va(t.type,s),o.props=l,h=t.pendingProps,d=o.context,"object"===typeof(u=n.contextType)&&null!==u?u=Ma(u):u=Bi(t,u=Pi(n)?Ri:Ei.current);var f=n.getDerivedStateFromProps;(c="function"===typeof f||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==h||d!==u)&&Va(t,o,r,u),Ra=!1,d=t.memoizedState,o.state=d,Oa(t,r,o,i);var p=t.memoizedState;s!==h||d!==p||Ci.current||Ra?("function"===typeof f&&(za(t,n,f,r),p=t.memoizedState),(l=Ra||qa(t,n,l,r,d,p,u)||!1)?(c||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,u),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,u)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=u,r=l):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return Cs(e,t,n,r,a,i)}function Cs(e,t,n,r,i,a){ks(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Oi(t,n,!1),Vs(e,t,a);r=t.stateNode,ys.current=t;var s=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Ja(t,e.child,null,a),t.child=Ja(t,null,s,a)):xs(e,t,s,a),t.memoizedState=r.state,i&&Oi(t,n,!0),t.child}function Rs(e){var t=e.stateNode;t.pendingContext?Ii(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ii(0,t.context,!1),ro(e,t.containerInfo)}function Bs(e,t,n,r,i){return fa(),pa(i),t.flags|=256,xs(e,t,n,r),t.child}var Ps,Ns,Is,Ds={dehydrated:null,treeContext:null,retryLane:0};function Ls(e){return{baseLanes:e,cachePool:null,transitions:null}}function Os(e,t,n){var r,i=t.pendingProps,o=so.current,s=!1,u=0!==(128&t.flags);if((r=u)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),ki(so,1&o),null===e)return la(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(u=i.children,e=i.fallback,s?(i=t.mode,s=t.child,u={mode:"hidden",children:u},0===(1&i)&&null!==s?(s.childLanes=0,s.pendingProps=u):s=Ll(u,i,0,null),e=Dl(e,i,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Ls(n),t.memoizedState=Ds,e):Fs(t,u));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,s){if(n)return 256&t.flags?(t.flags&=-257,Us(e,t,s,r=hs(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Ll({mode:"visible",children:r.children},i,0,null),(o=Dl(o,i,s,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&Ja(t,e.child,null,s),t.child.memoizedState=Ls(s),t.memoizedState=Ds,o);if(0===(1&t.mode))return Us(e,t,s,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var u=r.dgst;return r=u,Us(e,t,s,r=hs(o=Error(a(419)),r,void 0))}if(u=0!==(s&e.childLanes),bs||u){if(null!==(r=Cu)){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|s))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Ca(e,i),nl(r,e,i,-1))}return Al(),Us(e,t,s,r=hs(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Tl.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,ra=li(i.nextSibling),na=t,ia=!0,aa=null,null!==e&&(Xi[Yi++]=Ji,Xi[Yi++]=Ki,Xi[Yi++]=Qi,Ji=e.id,Ki=e.overflow,Qi=t),t=Fs(t,r.children),t.flags|=4096,t)}(e,t,u,i,r,o,n);if(s){s=i.fallback,u=t.mode,r=(o=e.child).sibling;var l={mode:"hidden",children:i.children};return 0===(1&u)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=l,t.deletions=null):(i=Nl(o,l)).subtreeFlags=14680064&o.subtreeFlags,null!==r?s=Nl(r,s):(s=Dl(s,u,n,null)).flags|=2,s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,u=null===(u=e.child.memoizedState)?Ls(n):{baseLanes:u.baseLanes|n,cachePool:null,transitions:u.transitions},s.memoizedState=u,s.childLanes=e.childLanes&~n,t.memoizedState=Ds,i}return e=(s=e.child).sibling,i=Nl(s,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Fs(e,t){return(t=Ll({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Us(e,t,n,r){return null!==r&&pa(r),Ja(t,e.child,null,n),(e=Fs(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function zs(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),wa(e.return,t,n)}function Gs(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function qs(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(xs(e,t,r.children,n),0!==(2&(r=so.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&zs(e,n,t);else if(19===e.tag)zs(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ki(so,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===uo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Gs(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===uo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Gs(t,!0,n,null,a);break;case"together":Gs(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Hs(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Vs(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Lu|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Nl(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Nl(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function js(e,t){if(!ia)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ws(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Xs(e,t,n){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ws(t),null;case 1:case 17:return Pi(t.type)&&Ni(),Ws(t),null;case 3:return r=t.stateNode,io(),Mi(Ci),Mi(Ei),co(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ha(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(ol(aa),aa=null))),Ws(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Ns(e,t,n,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Ws(t),null}if(e=no($a.current),ha(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[di]=t,r[fi]=o,e=0!==(1&t.mode),n){case"dialog":Ur("cancel",r),Ur("close",r);break;case"iframe":case"object":case"embed":Ur("load",r);break;case"video":case"audio":for(i=0;i<Dr.length;i++)Ur(Dr[i],r);break;case"source":Ur("error",r);break;case"img":case"image":case"link":Ur("error",r),Ur("load",r);break;case"details":Ur("toggle",r);break;case"input":J(r,o),Ur("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Ur("invalid",r);break;case"textarea":ie(r,o),Ur("invalid",r)}for(var u in ge(n,o),i=null,o)if(o.hasOwnProperty(u)){var l=o[u];"children"===u?"string"===typeof l?r.textContent!==l&&(!0!==o.suppressHydrationWarning&&Zr(r.textContent,l,e),i=["children",l]):"number"===typeof l&&r.textContent!==""+l&&(!0!==o.suppressHydrationWarning&&Zr(r.textContent,l,e),i=["children",""+l]):s.hasOwnProperty(u)&&null!=l&&"onScroll"===u&&Ur("scroll",r)}switch(n){case"input":W(r),$(r,o,!0);break;case"textarea":W(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=$r)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{u=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=u.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=u.createElement(n,{is:r.is}):(e=u.createElement(n),"select"===n&&(u=e,r.multiple?u.multiple=!0:r.size&&(u.size=r.size))):e=u.createElementNS(e,n),e[di]=t,e[fi]=r,Ps(e,t),t.stateNode=e;e:{switch(u=ye(n,r),n){case"dialog":Ur("cancel",e),Ur("close",e),i=r;break;case"iframe":case"object":case"embed":Ur("load",e),i=r;break;case"video":case"audio":for(i=0;i<Dr.length;i++)Ur(Dr[i],e);i=r;break;case"source":Ur("error",e),i=r;break;case"img":case"image":case"link":Ur("error",e),Ur("load",e),i=r;break;case"details":Ur("toggle",e),i=r;break;case"input":J(e,r),i=Q(e,r),Ur("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=O({},r,{value:void 0}),Ur("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Ur("invalid",e)}for(o in ge(n,i),l=i)if(l.hasOwnProperty(o)){var c=l[o];"style"===o?ve(e,c):"dangerouslySetInnerHTML"===o?null!=(c=c?c.__html:void 0)&&he(e,c):"children"===o?"string"===typeof c?("textarea"!==n||""!==c)&&de(e,c):"number"===typeof c&&de(e,""+c):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(s.hasOwnProperty(o)?null!=c&&"onScroll"===o&&Ur("scroll",e):null!=c&&y(e,o,c,u))}switch(n){case"input":W(e),$(e,r,!1);break;case"textarea":W(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+V(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=$r)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ws(t),null;case 6:if(e&&null!=t.stateNode)Is(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=no(to.current),no($a.current),ha(t)){if(r=t.stateNode,n=t.memoizedProps,r[di]=t,(o=r.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:Zr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Zr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[di]=t,t.stateNode=r}return Ws(t),null;case 13:if(Mi(so),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ia&&null!==ra&&0!==(1&t.mode)&&0===(128&t.flags))da(),fa(),t.flags|=98560,o=!1;else if(o=ha(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[di]=t}else fa(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ws(t),o=!1}else null!==aa&&(ol(aa),aa=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&so.current)?0===Iu&&(Iu=3):Al())),null!==t.updateQueue&&(t.flags|=4),Ws(t),null);case 4:return io(),null===e&&qr(t.stateNode.containerInfo),Ws(t),null;case 10:return _a(t.type._context),Ws(t),null;case 19:if(Mi(so),null===(o=t.memoizedState))return Ws(t),null;if(r=0!==(128&t.flags),null===(u=o.rendering))if(r)js(o,!1);else{if(0!==Iu||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(u=uo(e))){for(t.flags|=128,js(o,!1),null!==(r=u.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(u=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=u.childLanes,o.lanes=u.lanes,o.child=u.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=u.memoizedProps,o.memoizedState=u.memoizedState,o.updateQueue=u.updateQueue,o.type=u.type,e=u.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ki(so,1&so.current|2),t.child}e=e.sibling}null!==o.tail&&Ke()>qu&&(t.flags|=128,r=!0,js(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=uo(u))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),js(o,!0),null===o.tail&&"hidden"===o.tailMode&&!u.alternate&&!ia)return Ws(t),null}else 2*Ke()-o.renderingStartTime>qu&&1073741824!==n&&(t.flags|=128,r=!0,js(o,!1),t.lanes=4194304);o.isBackwards?(u.sibling=t.child,t.child=u):(null!==(n=o.last)?n.sibling=u:t.child=u,o.last=u)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Ke(),t.sibling=null,n=so.current,ki(so,r?1&n|2:1&n),t):(Ws(t),null);case 22:case 23:return hl(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Pu)&&(Ws(t),6&t.subtreeFlags&&(t.flags|=8192)):Ws(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Ys(e,t){switch(ta(t),t.tag){case 1:return Pi(t.type)&&Ni(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),Mi(Ci),Mi(Ei),co(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Mi(so),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));fa()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Mi(so),null;case 4:return io(),null;case 10:return _a(t.type._context),null;case 22:case 23:return hl(),null;default:return null}}Ps=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ns=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no($a.current);var a,o=null;switch(n){case"input":i=Q(e,i),r=Q(e,r),o=[];break;case"select":i=O({},i,{value:void 0}),r=O({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=$r)}for(c in ge(n,r),n=null,i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&null!=i[c])if("style"===c){var u=i[c];for(a in u)u.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(s.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in r){var l=r[c];if(u=null!=i?i[c]:void 0,r.hasOwnProperty(c)&&l!==u&&(null!=l||null!=u))if("style"===c)if(u){for(a in u)!u.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in l)l.hasOwnProperty(a)&&u[a]!==l[a]&&(n||(n={}),n[a]=l[a])}else n||(o||(o=[]),o.push(c,n)),n=l;else"dangerouslySetInnerHTML"===c?(l=l?l.__html:void 0,u=u?u.__html:void 0,null!=l&&u!==l&&(o=o||[]).push(c,l)):"children"===c?"string"!==typeof l&&"number"!==typeof l||(o=o||[]).push(c,""+l):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(s.hasOwnProperty(c)?(null!=l&&"onScroll"===c&&Ur("scroll",e),o||u===l||(o=[])):(o=o||[]).push(c,l))}n&&(o=o||[]).push("style",n);var c=o;(t.updateQueue=c)&&(t.flags|=4)}},Is=function(e,t,n,r){n!==r&&(t.flags|=4)};var Qs=!1,Js=!1,Ks="function"===typeof WeakSet?WeakSet:Set,Zs=null;function $s(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Sl(e,t,r)}else n.current=null}function eu(e,t,n){try{n()}catch(r){Sl(e,t,r)}}var tu=!1;function nu(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&eu(t,n,a)}i=i.next}while(i!==r)}}function ru(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function iu(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function au(e){var t=e.alternate;null!==t&&(e.alternate=null,au(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[di],delete t[fi],delete t[Ai],delete t[vi],delete t[mi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ou(e){return 5===e.tag||3===e.tag||4===e.tag}function su(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ou(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function uu(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=$r));else if(4!==r&&null!==(e=e.child))for(uu(e,t,n),e=e.sibling;null!==e;)uu(e,t,n),e=e.sibling}function lu(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(lu(e,t,n),e=e.sibling;null!==e;)lu(e,t,n),e=e.sibling}var cu=null,hu=!1;function du(e,t,n){for(n=n.child;null!==n;)fu(e,t,n),n=n.sibling}function fu(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(s){}switch(n.tag){case 5:Js||$s(n,t);case 6:var r=cu,i=hu;cu=null,du(e,t,n),hu=i,null!==(cu=r)&&(hu?(e=cu,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):cu.removeChild(n.stateNode));break;case 18:null!==cu&&(hu?(e=cu,n=n.stateNode,8===e.nodeType?ui(e.parentNode,n):1===e.nodeType&&ui(e,n),qt(e)):ui(cu,n.stateNode));break;case 4:r=cu,i=hu,cu=n.stateNode.containerInfo,hu=!0,du(e,t,n),cu=r,hu=i;break;case 0:case 11:case 14:case 15:if(!Js&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&eu(n,t,o),i=i.next}while(i!==r)}du(e,t,n);break;case 1:if(!Js&&($s(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){Sl(n,t,s)}du(e,t,n);break;case 21:du(e,t,n);break;case 22:1&n.mode?(Js=(r=Js)||null!==n.memoizedState,du(e,t,n),Js=r):du(e,t,n);break;default:du(e,t,n)}}function pu(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Ks),t.forEach((function(t){var r=El.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function Au(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,s=t,u=s;e:for(;null!==u;){switch(u.tag){case 5:cu=u.stateNode,hu=!1;break e;case 3:case 4:cu=u.stateNode.containerInfo,hu=!0;break e}u=u.return}if(null===cu)throw Error(a(160));fu(o,s,i),cu=null,hu=!1;var l=i.alternate;null!==l&&(l.return=null),i.return=null}catch(c){Sl(i,t,c)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)vu(t,e),t=t.sibling}function vu(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Au(t,e),mu(e),4&r){try{nu(3,e,e.return),ru(3,e)}catch(v){Sl(e,e.return,v)}try{nu(5,e,e.return)}catch(v){Sl(e,e.return,v)}}break;case 1:Au(t,e),mu(e),512&r&&null!==n&&$s(n,n.return);break;case 5:if(Au(t,e),mu(e),512&r&&null!==n&&$s(n,n.return),32&e.flags){var i=e.stateNode;try{de(i,"")}catch(v){Sl(e,e.return,v)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,s=null!==n?n.memoizedProps:o,u=e.type,l=e.updateQueue;if(e.updateQueue=null,null!==l)try{"input"===u&&"radio"===o.type&&null!=o.name&&K(i,o),ye(u,s);var c=ye(u,o);for(s=0;s<l.length;s+=2){var h=l[s],d=l[s+1];"style"===h?ve(i,d):"dangerouslySetInnerHTML"===h?he(i,d):"children"===h?de(i,d):y(i,h,d,c)}switch(u){case"input":Z(i,o);break;case"textarea":ae(i,o);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):f!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[fi]=o}catch(v){Sl(e,e.return,v)}}break;case 6:if(Au(t,e),mu(e),4&r){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(v){Sl(e,e.return,v)}}break;case 3:if(Au(t,e),mu(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{qt(t.containerInfo)}catch(v){Sl(e,e.return,v)}break;case 4:default:Au(t,e),mu(e);break;case 13:Au(t,e),mu(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(Gu=Ke())),4&r&&pu(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?(Js=(c=Js)||h,Au(t,e),Js=c):Au(t,e),mu(e),8192&r){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!h&&0!==(1&e.mode))for(Zs=e,h=e.child;null!==h;){for(d=Zs=h;null!==Zs;){switch(p=(f=Zs).child,f.tag){case 0:case 11:case 14:case 15:nu(4,f,f.return);break;case 1:$s(f,f.return);var A=f.stateNode;if("function"===typeof A.componentWillUnmount){r=f,n=f.return;try{t=r,A.props=t.memoizedProps,A.state=t.memoizedState,A.componentWillUnmount()}catch(v){Sl(r,n,v)}}break;case 5:$s(f,f.return);break;case 22:if(null!==f.memoizedState){xu(d);continue}}null!==p?(p.return=f,Zs=p):xu(d)}h=h.sibling}e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{i=d.stateNode,c?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(u=d.stateNode,s=void 0!==(l=d.memoizedProps.style)&&null!==l&&l.hasOwnProperty("display")?l.display:null,u.style.display=Ae("display",s))}catch(v){Sl(e,e.return,v)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(v){Sl(e,e.return,v)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Au(t,e),mu(e),4&r&&pu(e);case 21:}}function mu(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ou(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(de(i,""),r.flags&=-33),lu(e,su(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;uu(e,su(e),o);break;default:throw Error(a(161))}}catch(s){Sl(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function gu(e,t,n){Zs=e,yu(e,t,n)}function yu(e,t,n){for(var r=0!==(1&e.mode);null!==Zs;){var i=Zs,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Qs;if(!o){var s=i.alternate,u=null!==s&&null!==s.memoizedState||Js;s=Qs;var l=Js;if(Qs=o,(Js=u)&&!l)for(Zs=i;null!==Zs;)u=(o=Zs).child,22===o.tag&&null!==o.memoizedState?_u(i):null!==u?(u.return=o,Zs=u):_u(i);for(;null!==a;)Zs=a,yu(a,t,n),a=a.sibling;Zs=i,Qs=s,Js=l}bu(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Zs=a):bu(e)}}function bu(e){for(;null!==Zs;){var t=Zs;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Js||ru(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Js)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:va(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Fa(t,o,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Fa(t,s,n)}break;case 5:var u=t.stateNode;if(null===n&&4&t.flags){n=u;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var h=c.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&qt(d)}}}break;default:throw Error(a(163))}Js||512&t.flags&&iu(t)}catch(f){Sl(t,t.return,f)}}if(t===e){Zs=null;break}if(null!==(n=t.sibling)){n.return=t.return,Zs=n;break}Zs=t.return}}function xu(e){for(;null!==Zs;){var t=Zs;if(t===e){Zs=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Zs=n;break}Zs=t.return}}function _u(e){for(;null!==Zs;){var t=Zs;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ru(4,t)}catch(u){Sl(t,n,u)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(u){Sl(t,i,u)}}var a=t.return;try{iu(t)}catch(u){Sl(t,a,u)}break;case 5:var o=t.return;try{iu(t)}catch(u){Sl(t,o,u)}}}catch(u){Sl(t,t.return,u)}if(t===e){Zs=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Zs=s;break}Zs=t.return}}var wu,Su=Math.ceil,Mu=b.ReactCurrentDispatcher,ku=b.ReactCurrentOwner,Tu=b.ReactCurrentBatchConfig,Eu=0,Cu=null,Ru=null,Bu=0,Pu=0,Nu=Si(0),Iu=0,Du=null,Lu=0,Ou=0,Fu=0,Uu=null,zu=null,Gu=0,qu=1/0,Hu=null,Vu=!1,ju=null,Wu=null,Xu=!1,Yu=null,Qu=0,Ju=0,Ku=null,Zu=-1,$u=0;function el(){return 0!==(6&Eu)?Ke():-1!==Zu?Zu:Zu=Ke()}function tl(e){return 0===(1&e.mode)?1:0!==(2&Eu)&&0!==Bu?Bu&-Bu:null!==Aa.transition?(0===$u&&($u=At()),$u):0!==(e=yt)?e:e=void 0===(e=window.event)?16:Jt(e.type)}function nl(e,t,n,r){if(50<Ju)throw Ju=0,Ku=null,Error(a(185));mt(e,n,r),0!==(2&Eu)&&e===Cu||(e===Cu&&(0===(2&Eu)&&(Ou|=n),4===Iu&&sl(e,Bu)),rl(e,r),1===n&&0===Eu&&0===(1&t.mode)&&(qu=Ke()+500,Ui&&qi()))}function rl(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),s=1<<o,u=i[o];-1===u?0!==(s&n)&&0===(s&r)||(i[o]=ft(s,t)):u<=t&&(e.expiredLanes|=s),a&=~s}}(e,t);var r=dt(e,e===Cu?Bu:0);if(0===r)null!==n&&Ye(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ye(n),1===t)0===e.tag?function(e){Ui=!0,Gi(e)}(ul.bind(null,e)):Gi(ul.bind(null,e)),oi((function(){0===(6&Eu)&&qi()})),n=null;else{switch(bt(r)){case 1:n=$e;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Cl(n,il.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function il(e,t){if(Zu=-1,$u=0,0!==(6&Eu))throw Error(a(327));var n=e.callbackNode;if(_l()&&e.callbackNode!==n)return null;var r=dt(e,e===Cu?Bu:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=vl(e,r);else{t=r;var i=Eu;Eu|=2;var o=pl();for(Cu===e&&Bu===t||(Hu=null,qu=Ke()+500,dl(e,t));;)try{gl();break}catch(u){fl(e,u)}xa(),Mu.current=o,Eu=i,null!==Ru?t=0:(Cu=null,Bu=0,t=Iu)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=al(e,i))),1===t)throw n=Du,dl(e,0),sl(e,r),rl(e,Ke()),n;if(6===t)sl(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!sr(a(),i))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=vl(e,r))&&(0!==(o=pt(e))&&(r=o,t=al(e,o))),1===t))throw n=Du,dl(e,0),sl(e,r),rl(e,Ke()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:xl(e,zu,Hu);break;case 3:if(sl(e,r),(130023424&r)===r&&10<(t=Gu+500-Ke())){if(0!==dt(e,0))break;if(((i=e.suspendedLanes)&r)!==r){el(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(xl.bind(null,e,zu,Hu),t);break}xl(e,zu,Hu);break;case 4:if(sl(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var s=31-ot(r);o=1<<s,(s=t[s])>i&&(i=s),r&=~o}if(r=i,10<(r=(120>(r=Ke()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Su(r/1960))-r)){e.timeoutHandle=ri(xl.bind(null,e,zu,Hu),r);break}xl(e,zu,Hu);break;default:throw Error(a(329))}}}return rl(e,Ke()),e.callbackNode===n?il.bind(null,e):null}function al(e,t){var n=Uu;return e.current.memoizedState.isDehydrated&&(dl(e,t).flags|=256),2!==(e=vl(e,t))&&(t=zu,zu=n,null!==t&&ol(t)),e}function ol(e){null===zu?zu=e:zu.push.apply(zu,e)}function sl(e,t){for(t&=~Fu,t&=~Ou,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function ul(e){if(0!==(6&Eu))throw Error(a(327));_l();var t=dt(e,0);if(0===(1&t))return rl(e,Ke()),null;var n=vl(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=al(e,r))}if(1===n)throw n=Du,dl(e,0),sl(e,t),rl(e,Ke()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,xl(e,zu,Hu),rl(e,Ke()),null}function ll(e,t){var n=Eu;Eu|=1;try{return e(t)}finally{0===(Eu=n)&&(qu=Ke()+500,Ui&&qi())}}function cl(e){null!==Yu&&0===Yu.tag&&0===(6&Eu)&&_l();var t=Eu;Eu|=1;var n=Tu.transition,r=yt;try{if(Tu.transition=null,yt=1,e)return e()}finally{yt=r,Tu.transition=n,0===(6&(Eu=t))&&qi()}}function hl(){Pu=Nu.current,Mi(Nu)}function dl(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Ru)for(n=Ru.return;null!==n;){var r=n;switch(ta(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ni();break;case 3:io(),Mi(Ci),Mi(Ei),co();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:Mi(so);break;case 10:_a(r.type._context);break;case 22:case 23:hl()}n=n.return}if(Cu=e,Ru=e=Nl(e.current,null),Bu=Pu=t,Iu=0,Du=null,Fu=Ou=Lu=0,zu=Uu=null,null!==ka){for(t=0;t<ka.length;t++)if(null!==(r=(n=ka[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}ka=null}return e}function fl(e,t){for(;;){var n=Ru;try{if(xa(),ho.current=os,go){for(var r=Ao.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}go=!1}if(po=0,mo=vo=Ao=null,yo=!1,bo=0,ku.current=null,null===n||null===n.return){Iu=1,Du=t,Ru=null;break}e:{var o=e,s=n.return,u=n,l=t;if(t=Bu,u.flags|=32768,null!==l&&"object"===typeof l&&"function"===typeof l.then){var c=l,h=u,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=ms(s);if(null!==p){p.flags&=-257,gs(p,s,u,0,t),1&p.mode&&vs(o,c,t),l=c;var A=(t=p).updateQueue;if(null===A){var v=new Set;v.add(l),t.updateQueue=v}else A.add(l);break e}if(0===(1&t)){vs(o,c,t),Al();break e}l=Error(a(426))}else if(ia&&1&u.mode){var m=ms(s);if(null!==m){0===(65536&m.flags)&&(m.flags|=256),gs(m,s,u,0,t),pa(cs(l,u));break e}}o=l=cs(l,u),4!==Iu&&(Iu=2),null===Uu?Uu=[o]:Uu.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,La(o,ps(0,l,t));break e;case 1:u=l;var g=o.type,y=o.stateNode;if(0===(128&o.flags)&&("function"===typeof g.getDerivedStateFromError||null!==y&&"function"===typeof y.componentDidCatch&&(null===Wu||!Wu.has(y)))){o.flags|=65536,t&=-t,o.lanes|=t,La(o,As(o,u,t));break e}}o=o.return}while(null!==o)}bl(n)}catch(b){t=b,Ru===n&&null!==n&&(Ru=n=n.return);continue}break}}function pl(){var e=Mu.current;return Mu.current=os,null===e?os:e}function Al(){0!==Iu&&3!==Iu&&2!==Iu||(Iu=4),null===Cu||0===(268435455&Lu)&&0===(268435455&Ou)||sl(Cu,Bu)}function vl(e,t){var n=Eu;Eu|=2;var r=pl();for(Cu===e&&Bu===t||(Hu=null,dl(e,t));;)try{ml();break}catch(i){fl(e,i)}if(xa(),Eu=n,Mu.current=r,null!==Ru)throw Error(a(261));return Cu=null,Bu=0,Iu}function ml(){for(;null!==Ru;)yl(Ru)}function gl(){for(;null!==Ru&&!Qe();)yl(Ru)}function yl(e){var t=wu(e.alternate,e,Pu);e.memoizedProps=e.pendingProps,null===t?bl(e):Ru=t,ku.current=null}function bl(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Xs(n,t,Pu)))return void(Ru=n)}else{if(null!==(n=Ys(n,t)))return n.flags&=32767,void(Ru=n);if(null===e)return Iu=6,void(Ru=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Ru=t);Ru=t=e}while(null!==t);0===Iu&&(Iu=5)}function xl(e,t,n){var r=yt,i=Tu.transition;try{Tu.transition=null,yt=1,function(e,t,n,r){do{_l()}while(null!==Yu);if(0!==(6&Eu))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===Cu&&(Ru=Cu=null,Bu=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Xu||(Xu=!0,Cl(tt,(function(){return _l(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Tu.transition,Tu.transition=null;var s=yt;yt=1;var u=Eu;Eu|=4,ku.current=null,function(e,t){if(ei=Vt,fr(e=dr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(x){n=null;break e}var s=0,u=-1,l=-1,c=0,h=0,d=e,f=null;t:for(;;){for(var p;d!==n||0!==i&&3!==d.nodeType||(u=s+i),d!==o||0!==r&&3!==d.nodeType||(l=s+r),3===d.nodeType&&(s+=d.nodeValue.length),null!==(p=d.firstChild);)f=d,d=p;for(;;){if(d===e)break t;if(f===n&&++c===i&&(u=s),f===o&&++h===r&&(l=s),null!==(p=d.nextSibling))break;f=(d=f).parentNode}d=p}n=-1===u||-1===l?null:{start:u,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Vt=!1,Zs=t;null!==Zs;)if(e=(t=Zs).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Zs=e;else for(;null!==Zs;){t=Zs;try{var A=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==A){var v=A.memoizedProps,m=A.memoizedState,g=t.stateNode,y=g.getSnapshotBeforeUpdate(t.elementType===t.type?v:va(t.type,v),m);g.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(a(163))}}catch(x){Sl(t,t.return,x)}if(null!==(e=t.sibling)){e.return=t.return,Zs=e;break}Zs=t.return}A=tu,tu=!1}(e,n),vu(n,e),pr(ti),Vt=!!ei,ti=ei=null,e.current=n,gu(n,e,i),Je(),Eu=u,yt=s,Tu.transition=o}else e.current=n;if(Xu&&(Xu=!1,Yu=e,Qu=i),o=e.pendingLanes,0===o&&(Wu=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rl(e,Ke()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Vu)throw Vu=!1,e=ju,ju=null,e;0!==(1&Qu)&&0!==e.tag&&_l(),o=e.pendingLanes,0!==(1&o)?e===Ku?Ju++:(Ju=0,Ku=e):Ju=0,qi()}(e,t,n,r)}finally{Tu.transition=i,yt=r}return null}function _l(){if(null!==Yu){var e=bt(Qu),t=Tu.transition,n=yt;try{if(Tu.transition=null,yt=16>e?16:e,null===Yu)var r=!1;else{if(e=Yu,Yu=null,Qu=0,0!==(6&Eu))throw Error(a(331));var i=Eu;for(Eu|=4,Zs=e.current;null!==Zs;){var o=Zs,s=o.child;if(0!==(16&Zs.flags)){var u=o.deletions;if(null!==u){for(var l=0;l<u.length;l++){var c=u[l];for(Zs=c;null!==Zs;){var h=Zs;switch(h.tag){case 0:case 11:case 15:nu(8,h,o)}var d=h.child;if(null!==d)d.return=h,Zs=d;else for(;null!==Zs;){var f=(h=Zs).sibling,p=h.return;if(au(h),h===c){Zs=null;break}if(null!==f){f.return=p,Zs=f;break}Zs=p}}}var A=o.alternate;if(null!==A){var v=A.child;if(null!==v){A.child=null;do{var m=v.sibling;v.sibling=null,v=m}while(null!==v)}}Zs=o}}if(0!==(2064&o.subtreeFlags)&&null!==s)s.return=o,Zs=s;else e:for(;null!==Zs;){if(0!==(2048&(o=Zs).flags))switch(o.tag){case 0:case 11:case 15:nu(9,o,o.return)}var g=o.sibling;if(null!==g){g.return=o.return,Zs=g;break e}Zs=o.return}}var y=e.current;for(Zs=y;null!==Zs;){var b=(s=Zs).child;if(0!==(2064&s.subtreeFlags)&&null!==b)b.return=s,Zs=b;else e:for(s=y;null!==Zs;){if(0!==(2048&(u=Zs).flags))try{switch(u.tag){case 0:case 11:case 15:ru(9,u)}}catch(_){Sl(u,u.return,_)}if(u===s){Zs=null;break e}var x=u.sibling;if(null!==x){x.return=u.return,Zs=x;break e}Zs=u.return}}if(Eu=i,qi(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(_){}r=!0}return r}finally{yt=n,Tu.transition=t}}return!1}function wl(e,t,n){e=Ia(e,t=ps(0,t=cs(n,t),1),1),t=el(),null!==e&&(mt(e,1,t),rl(e,t))}function Sl(e,t,n){if(3===e.tag)wl(e,e,n);else for(;null!==t;){if(3===t.tag){wl(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Wu||!Wu.has(r))){t=Ia(t,e=As(t,e=cs(n,e),1),1),e=el(),null!==t&&(mt(t,1,e),rl(t,e));break}}t=t.return}}function Ml(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=el(),e.pingedLanes|=e.suspendedLanes&n,Cu===e&&(Bu&n)===n&&(4===Iu||3===Iu&&(130023424&Bu)===Bu&&500>Ke()-Gu?dl(e,0):Fu|=n),rl(e,t)}function kl(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ct,0===(130023424&(ct<<=1))&&(ct=4194304)));var n=el();null!==(e=Ca(e,t))&&(mt(e,t,n),rl(e,n))}function Tl(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),kl(e,n)}function El(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),kl(e,n)}function Cl(e,t){return Xe(e,t)}function Rl(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bl(e,t,n,r){return new Rl(e,t,n,r)}function Pl(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Nl(e,t){var n=e.alternate;return null===n?((n=Bl(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Il(e,t,n,r,i,o){var s=2;if(r=e,"function"===typeof e)Pl(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case w:return Dl(n.children,i,o,t);case S:s=8,i|=8;break;case M:return(e=Bl(12,n,t,2|i)).elementType=M,e.lanes=o,e;case C:return(e=Bl(13,n,t,i)).elementType=C,e.lanes=o,e;case R:return(e=Bl(19,n,t,i)).elementType=R,e.lanes=o,e;case N:return Ll(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case k:s=10;break e;case T:s=9;break e;case E:s=11;break e;case B:s=14;break e;case P:s=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Bl(s,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Dl(e,t,n,r){return(e=Bl(7,e,r,t)).lanes=n,e}function Ll(e,t,n,r){return(e=Bl(22,e,r,t)).elementType=N,e.lanes=n,e.stateNode={isHidden:!1},e}function Ol(e,t,n){return(e=Bl(6,e,null,t)).lanes=n,e}function Fl(e,t,n){return(t=Bl(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Ul(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=vt(0),this.expirationTimes=vt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function zl(e,t,n,r,i,a,o,s,u){return e=new Ul(e,t,n,s,u),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Bl(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ba(a),e}function Gl(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function ql(e){if(!e)return Ti;e:{if(qe(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Pi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Pi(n))return Di(e,n,t)}return t}function Hl(e,t,n,r,i,a,o,s,u){return(e=zl(n,r,!0,e,0,a,0,s,u)).context=ql(null),n=e.current,(a=Na(r=el(),i=tl(n))).callback=void 0!==t&&null!==t?t:null,Ia(n,a,i),e.current.lanes=i,mt(e,i,r),rl(e,r),e}function Vl(e,t,n,r){var i=t.current,a=el(),o=tl(i);return n=ql(n),null===t.context?t.context=n:t.pendingContext=n,(t=Na(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Ia(i,t,o))&&(nl(e,i,o,a),Da(e,i,o)),o}function jl(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Wl(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Xl(e,t){Wl(e,t),(e=e.alternate)&&Wl(e,t)}wu=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ci.current)bs=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return bs=!1,function(e,t,n){switch(t.tag){case 3:Rs(t),fa();break;case 5:ao(t);break;case 1:Pi(t.type)&&Li(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;ki(ma,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(ki(so,1&so.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Os(e,t,n):(ki(so,1&so.current),null!==(e=Vs(e,t,n))?e.sibling:null);ki(so,1&so.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return qs(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),ki(so,so.current),r)break;return null;case 22:case 23:return t.lanes=0,Ms(e,t,n)}return Vs(e,t,n)}(e,t,n);bs=0!==(131072&e.flags)}else bs=!1,ia&&0!==(1048576&t.flags)&&$i(t,Wi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Hs(e,t),e=t.pendingProps;var i=Bi(t,Ei.current);Sa(t,n),i=So(null,t,r,e,i,n);var o=Mo();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Pi(r)?(o=!0,Li(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Ba(t),i.updater=Ga,t.stateNode=i,i._reactInternals=t,ja(t,r,e,n),t=Cs(null,t,r,!0,o,n)):(t.tag=0,ia&&o&&ea(t),xs(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Hs(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Pl(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===E)return 11;if(e===B)return 14}return 2}(r),e=va(r,e),i){case 0:t=Ts(null,t,r,e,n);break e;case 1:t=Es(null,t,r,e,n);break e;case 11:t=_s(null,t,r,e,n);break e;case 14:t=ws(null,t,r,va(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ts(e,t,r,i=t.elementType===r?i:va(r,i),n);case 1:return r=t.type,i=t.pendingProps,Es(e,t,r,i=t.elementType===r?i:va(r,i),n);case 3:e:{if(Rs(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,Pa(e,t),Oa(t,r,null,n);var s=t.memoizedState;if(r=s.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Bs(e,t,r,n,i=cs(Error(a(423)),t));break e}if(r!==i){t=Bs(e,t,r,n,i=cs(Error(a(424)),t));break e}for(ra=li(t.stateNode.containerInfo.firstChild),na=t,ia=!0,aa=null,n=Ka(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fa(),r===i){t=Vs(e,t,n);break e}xs(e,t,r,n)}t=t.child}return t;case 5:return ao(t),null===e&&la(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,s=i.children,ni(r,i)?s=null:null!==o&&ni(r,o)&&(t.flags|=32),ks(e,t),xs(e,t,s,n),t.child;case 6:return null===e&&la(t),null;case 13:return Os(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ja(t,null,r,n):xs(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,_s(e,t,r,i=t.elementType===r?i:va(r,i),n);case 7:return xs(e,t,t.pendingProps,n),t.child;case 8:case 12:return xs(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,s=i.value,ki(ma,r._currentValue),r._currentValue=s,null!==o)if(sr(o.value,s)){if(o.children===i.children&&!Ci.current){t=Vs(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var u=o.dependencies;if(null!==u){s=o.child;for(var l=u.firstContext;null!==l;){if(l.context===r){if(1===o.tag){(l=Na(-1,n&-n)).tag=2;var c=o.updateQueue;if(null!==c){var h=(c=c.shared).pending;null===h?l.next=l:(l.next=h.next,h.next=l),c.pending=l}}o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),wa(o.return,n,t),u.lanes|=n;break}l=l.next}}else if(10===o.tag)s=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(s=o.return))throw Error(a(341));s.lanes|=n,null!==(u=s.alternate)&&(u.lanes|=n),wa(s,n,t),s=o.sibling}else s=o.child;if(null!==s)s.return=o;else for(s=o;null!==s;){if(s===t){s=null;break}if(null!==(o=s.sibling)){o.return=s.return,s=o;break}s=s.return}o=s}xs(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Sa(t,n),r=r(i=Ma(i)),t.flags|=1,xs(e,t,r,n),t.child;case 14:return i=va(r=t.type,t.pendingProps),ws(e,t,r,i=va(r.type,i),n);case 15:return Ss(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:va(r,i),Hs(e,t),t.tag=1,Pi(r)?(e=!0,Li(t)):e=!1,Sa(t,n),Ha(t,r,i),ja(t,r,i,n),Cs(null,t,r,!0,e,n);case 19:return qs(e,t,n);case 22:return Ms(e,t,n)}throw Error(a(156,t.tag))};var Yl="function"===typeof reportError?reportError:function(e){console.error(e)};function Ql(e){this._internalRoot=e}function Jl(e){this._internalRoot=e}function Kl(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Zl(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function $l(){}function ec(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var s=i;i=function(){var e=jl(o);s.call(e)}}Vl(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=jl(o);a.call(e)}}var o=Hl(t,r,e,0,null,!1,0,"",$l);return e._reactRootContainer=o,e[pi]=o.current,qr(8===e.nodeType?e.parentNode:e),cl(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var s=r;r=function(){var e=jl(u);s.call(e)}}var u=zl(e,0,!1,null,0,!1,0,"",$l);return e._reactRootContainer=u,e[pi]=u.current,qr(8===e.nodeType?e.parentNode:e),cl((function(){Vl(t,u,n,r)})),u}(n,t,e,i,r);return jl(o)}Jl.prototype.render=Ql.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Vl(e,t,null,null)},Jl.prototype.unmount=Ql.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;cl((function(){Vl(null,e,null,null)})),t[pi]=null}},Jl.prototype.unstable_scheduleHydration=function(e){if(e){var t=St();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Nt.length&&0!==t&&t<Nt[n].priority;n++);Nt.splice(n,0,e),0===n&&Ot(e)}},xt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(gt(t,1|n),rl(t,Ke()),0===(6&Eu)&&(qu=Ke()+500,qi()))}break;case 13:cl((function(){var t=Ca(e,1);if(null!==t){var n=el();nl(t,e,1,n)}})),Xl(e,1)}},_t=function(e){if(13===e.tag){var t=Ca(e,134217728);if(null!==t)nl(t,e,134217728,el());Xl(e,134217728)}},wt=function(e){if(13===e.tag){var t=tl(e),n=Ca(e,t);if(null!==n)nl(n,e,t,el());Xl(e,t)}},St=function(){return yt},Mt=function(e,t){var n=yt;try{return yt=e,t()}finally{yt=n}},_e=function(e,t,n){switch(t){case"input":if(Z(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=xi(r);if(!i)throw Error(a(90));X(r),Z(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ee=ll,Ce=cl;var tc={usingClientEntryPoint:!1,Events:[yi,bi,xi,ke,Te,ll]},nc={findFiberByHostInstance:gi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rc={bundleType:nc.bundleType,version:nc.version,rendererPackageName:nc.rendererPackageName,rendererConfig:nc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=je(e))?null:e.stateNode},findFiberByHostInstance:nc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ic=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ic.isDisabled&&ic.supportsFiber)try{it=ic.inject(rc),at=ic}catch(ce){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tc,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Kl(t))throw Error(a(200));return Gl(e,t,null,n)},t.createRoot=function(e,t){if(!Kl(e))throw Error(a(299));var n=!1,r="",i=Yl;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=zl(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,qr(8===e.nodeType?e.parentNode:e),new Ql(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=je(t))?null:e.stateNode},t.flushSync=function(e){return cl(e)},t.hydrate=function(e,t,n){if(!Zl(t))throw Error(a(200));return ec(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Kl(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",s=Yl;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=Hl(t,null,e,1,null!=n?n:null,i,0,o,s),e[pi]=t.current,qr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Jl(t)},t.render=function(e,t,n){if(!Zl(t))throw Error(a(200));return ec(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Zl(e))throw Error(a(40));return!!e._reactRootContainer&&(cl((function(){ec(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=ll,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Zl(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return ec(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},1250:function(e,t,n){"use strict";var r=n(4164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},4164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(4463)},8105:function(e,t,n){"use strict";n.r(t),n.d(t,{InView:function(){return A},default:function(){return A},defaultFallbackInView:function(){return c},observe:function(){return d},useInView:function(){return v}});var r=n(2791);function i(){return i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i.apply(this,arguments)}function a(e,t){return a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},a(e,t)}var o=new Map,s=new WeakMap,u=0,l=void 0;function c(e){l=e}function h(e){return Object.keys(e).sort().filter((function(t){return void 0!==e[t]})).map((function(t){return t+"_"+("root"===t?(n=e.root)?(s.has(n)||(u+=1,s.set(n,u.toString())),s.get(n)):"0":e[t]);var n})).toString()}function d(e,t,n,r){if(void 0===n&&(n={}),void 0===r&&(r=l),"undefined"===typeof window.IntersectionObserver&&void 0!==r){var i=e.getBoundingClientRect();return t(r,{isIntersecting:r,target:e,intersectionRatio:"number"===typeof n.threshold?n.threshold:0,time:0,boundingClientRect:i,intersectionRect:i,rootBounds:i}),function(){}}var a=function(e){var t=h(e),n=o.get(t);if(!n){var r,i=new Map,a=new IntersectionObserver((function(t){t.forEach((function(t){var n,a=t.isIntersecting&&r.some((function(e){return t.intersectionRatio>=e}));e.trackVisibility&&"undefined"===typeof t.isVisible&&(t.isVisible=a),null==(n=i.get(t.target))||n.forEach((function(e){e(a,t)}))}))}),e);r=a.thresholds||(Array.isArray(e.threshold)?e.threshold:[e.threshold||0]),n={id:t,observer:a,elements:i},o.set(t,n)}return n}(n),s=a.id,u=a.observer,c=a.elements,d=c.get(e)||[];return c.has(e)||c.set(e,d),d.push(t),u.observe(e),function(){d.splice(d.indexOf(t),1),0===d.length&&(c.delete(e),u.unobserve(e)),0===c.size&&(u.disconnect(),o.delete(s))}}var f=["children","as","triggerOnce","threshold","root","rootMargin","onChange","skip","trackVisibility","delay","initialInView","fallbackInView"];function p(e){return"function"!==typeof e.children}var A=function(e){var t,n;function o(t){var n;return(n=e.call(this,t)||this).node=null,n._unobserveCb=null,n.handleNode=function(e){n.node&&(n.unobserve(),e||n.props.triggerOnce||n.props.skip||n.setState({inView:!!n.props.initialInView,entry:void 0})),n.node=e||null,n.observeNode()},n.handleChange=function(e,t){e&&n.props.triggerOnce&&n.unobserve(),p(n.props)||n.setState({inView:e,entry:t}),n.props.onChange&&n.props.onChange(e,t)},n.state={inView:!!t.initialInView,entry:void 0},n}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,a(t,n);var s=o.prototype;return s.componentDidUpdate=function(e){e.rootMargin===this.props.rootMargin&&e.root===this.props.root&&e.threshold===this.props.threshold&&e.skip===this.props.skip&&e.trackVisibility===this.props.trackVisibility&&e.delay===this.props.delay||(this.unobserve(),this.observeNode())},s.componentWillUnmount=function(){this.unobserve(),this.node=null},s.observeNode=function(){if(this.node&&!this.props.skip){var e=this.props,t=e.threshold,n=e.root,r=e.rootMargin,i=e.trackVisibility,a=e.delay,o=e.fallbackInView;this._unobserveCb=d(this.node,this.handleChange,{threshold:t,root:n,rootMargin:r,trackVisibility:i,delay:a},o)}},s.unobserve=function(){this._unobserveCb&&(this._unobserveCb(),this._unobserveCb=null)},s.render=function(){if(!p(this.props)){var e=this.state,t=e.inView,n=e.entry;return this.props.children({inView:t,entry:n,ref:this.handleNode})}var a=this.props,o=a.children,s=a.as,u=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(a,f);return r.createElement(s||"div",i({ref:this.handleNode},u),o)},o}(r.Component);function v(e){var t=void 0===e?{}:e,n=t.threshold,i=t.delay,a=t.trackVisibility,o=t.rootMargin,s=t.root,u=t.triggerOnce,l=t.skip,c=t.initialInView,h=t.fallbackInView,f=r.useRef(),p=r.useState({inView:!!c}),A=p[0],v=p[1],m=r.useCallback((function(e){void 0!==f.current&&(f.current(),f.current=void 0),l||e&&(f.current=d(e,(function(e,t){v({inView:e,entry:t}),t.isIntersecting&&u&&f.current&&(f.current(),f.current=void 0)}),{root:s,rootMargin:o,threshold:n,trackVisibility:a,delay:i},h))}),[Array.isArray(n)?n.toString():n,s,o,u,l,a,h,i]);(0,r.useEffect)((function(){f.current||!A.entry||u||l||v({inView:!!c})}));var g=[m,A.inView,A.entry];return g.ref=g[0],g.inView=g[1],g.entry=g[2],g}A.displayName="InView",A.defaultProps={threshold:0,triggerOnce:!1,initialInView:!1}},4976:function(e,t){"use strict";t.ConcurrentRoot=1,t.ContinuousEventPriority=4,t.DefaultEventPriority=16,t.DiscreteEventPriority=1},3721:function(e,t,n){e.exports=function(e){var t={},r=n(2791),i=n(3100),a=Object.assign;function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,u=Symbol.for("react.element"),l=Symbol.for("react.portal"),c=Symbol.for("react.fragment"),h=Symbol.for("react.strict_mode"),d=Symbol.for("react.profiler"),f=Symbol.for("react.provider"),p=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),m=Symbol.for("react.suspense_list"),g=Symbol.for("react.memo"),y=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var b=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var x=Symbol.iterator;function _(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=x&&e[x]||e["@@iterator"])?e:null}function w(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case c:return"Fragment";case l:return"Portal";case d:return"Profiler";case h:return"StrictMode";case v:return"Suspense";case m:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case p:return(e.displayName||"Context")+".Consumer";case f:return(e._context.displayName||"Context")+".Provider";case A:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case g:return null!==(t=e.displayName||null)?t:w(e.type)||"Memo";case y:t=e._payload,e=e._init;try{return w(e(t))}catch(n){}}return null}function S(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return w(t);case 8:return t===h?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function M(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function k(e){if(M(e)!==e)throw Error(o(188))}function T(e){var t=e.alternate;if(!t){if(null===(t=M(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return k(i),e;if(a===r)return k(i),t;a=a.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=a;else{for(var s=!1,u=i.child;u;){if(u===n){s=!0,n=i,r=a;break}if(u===r){s=!0,r=i,n=a;break}u=u.sibling}if(!s){for(u=a.child;u;){if(u===n){s=!0,n=a,r=i;break}if(u===r){s=!0,r=a,n=i;break}u=u.sibling}if(!s)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}function E(e){return null!==(e=T(e))?C(e):null}function C(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=C(e);if(null!==t)return t;e=e.sibling}return null}function R(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){if(4!==e.tag){var t=R(e);if(null!==t)return t}e=e.sibling}return null}var B,P=Array.isArray,N=e.getPublicInstance,I=e.getRootHostContext,D=e.getChildHostContext,L=e.prepareForCommit,O=e.resetAfterCommit,F=e.createInstance,U=e.appendInitialChild,z=e.finalizeInitialChildren,G=e.prepareUpdate,q=e.shouldSetTextContent,H=e.createTextInstance,V=e.scheduleTimeout,j=e.cancelTimeout,W=e.noTimeout,X=e.isPrimaryRenderer,Y=e.supportsMutation,Q=e.supportsPersistence,J=e.supportsHydration,K=e.getInstanceFromNode,Z=e.preparePortalMount,$=e.getCurrentEventPriority,ee=e.detachDeletedInstance,te=e.supportsMicrotasks,ne=e.scheduleMicrotask,re=e.supportsTestSelectors,ie=e.findFiberRoot,ae=e.getBoundingRect,oe=e.getTextContent,se=e.isHiddenSubtree,ue=e.matchAccessibilityRole,le=e.setFocusIfFocusable,ce=e.setupIntersectionObserver,he=e.appendChild,de=e.appendChildToContainer,fe=e.commitTextUpdate,pe=e.commitMount,Ae=e.commitUpdate,ve=e.insertBefore,me=e.insertInContainerBefore,ge=e.removeChild,ye=e.removeChildFromContainer,be=e.resetTextContent,xe=e.hideInstance,_e=e.hideTextInstance,we=e.unhideInstance,Se=e.unhideTextInstance,Me=e.clearContainer,ke=e.cloneInstance,Te=e.createContainerChildSet,Ee=e.appendChildToContainerChildSet,Ce=e.finalizeContainerChildren,Re=e.replaceContainerChildren,Be=e.cloneHiddenInstance,Pe=e.cloneHiddenTextInstance,Ne=e.canHydrateInstance,Ie=e.canHydrateTextInstance,De=e.canHydrateSuspenseInstance,Le=e.isSuspenseInstancePending,Oe=e.isSuspenseInstanceFallback,Fe=e.registerSuspenseInstanceRetry,Ue=e.getNextHydratableSibling,ze=e.getFirstHydratableChild,Ge=e.getFirstHydratableChildWithinContainer,qe=e.getFirstHydratableChildWithinSuspenseInstance,He=e.hydrateInstance,Ve=e.hydrateTextInstance,je=e.hydrateSuspenseInstance,We=e.getNextHydratableInstanceAfterSuspenseInstance,Xe=e.commitHydratedContainer,Ye=e.commitHydratedSuspenseInstance,Qe=e.clearSuspenseBoundary,Je=e.clearSuspenseBoundaryFromContainer,Ke=e.shouldDeleteUnhydratedTailInstances,Ze=e.didNotMatchHydratedContainerTextInstance,$e=e.didNotMatchHydratedTextInstance;function et(e){if(void 0===B)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);B=t&&t[1]||""}return"\n"+B+e}var tt=!1;function nt(e,t){if(!e||tt)return"";tt=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var r=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){r=l}e.call(t.prototype)}else{try{throw Error()}catch(l){r=l}e()}}catch(l){if(l&&r&&"string"===typeof l.stack){for(var i=l.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,s=a.length-1;1<=o&&0<=s&&i[o]!==a[s];)s--;for(;1<=o&&0<=s;o--,s--)if(i[o]!==a[s]){if(1!==o||1!==s)do{if(o--,0>--s||i[o]!==a[s]){var u="\n"+i[o].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=o&&0<=s);break}}}finally{tt=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?et(e):""}var rt=Object.prototype.hasOwnProperty,it=[],at=-1;function ot(e){return{current:e}}function st(e){0>at||(e.current=it[at],it[at]=null,at--)}function ut(e,t){at++,it[at]=e.current,e.current=t}var lt={},ct=ot(lt),ht=ot(!1),dt=lt;function ft(e,t){var n=e.type.contextTypes;if(!n)return lt;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function pt(e){return null!==(e=e.childContextTypes)&&void 0!==e}function At(){st(ht),st(ct)}function vt(e,t,n){if(ct.current!==lt)throw Error(o(168));ut(ct,t),ut(ht,n)}function mt(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(o(108,S(e)||"Unknown",i));return a({},n,r)}function gt(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||lt,dt=ct.current,ut(ct,e),ut(ht,ht.current),!0}function yt(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=mt(e,t,dt),r.__reactInternalMemoizedMergedChildContext=e,st(ht),st(ct),ut(ct,e)):st(ht),ut(ht,n)}var bt=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(xt(e)/_t|0)|0},xt=Math.log,_t=Math.LN2;var wt=64,St=4194304;function Mt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function kt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var s=o&~i;0!==s?r=Mt(s):0!==(a&=o)&&(r=Mt(a))}else 0!==(o=n&~i)?r=Mt(o):0!==a&&(r=Mt(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-bt(t)),r|=e[n],t&=~i;return r}function Tt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function Et(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function Ct(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Rt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-bt(t)]=n}function Bt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-bt(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var Pt=0;function Nt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var It=i.unstable_scheduleCallback,Dt=i.unstable_cancelCallback,Lt=i.unstable_shouldYield,Ot=i.unstable_requestPaint,Ft=i.unstable_now,Ut=i.unstable_ImmediatePriority,zt=i.unstable_UserBlockingPriority,Gt=i.unstable_NormalPriority,qt=i.unstable_IdlePriority,Ht=null,Vt=null;var jt="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},Wt=null,Xt=!1,Yt=!1;function Qt(e){null===Wt?Wt=[e]:Wt.push(e)}function Jt(){if(!Yt&&null!==Wt){Yt=!0;var e=0,t=Pt;try{var n=Wt;for(Pt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Wt=null,Xt=!1}catch(i){throw null!==Wt&&(Wt=Wt.slice(e+1)),It(Ut,Jt),i}finally{Pt=t,Yt=!1}}return null}var Kt=s.ReactCurrentBatchConfig;function Zt(e,t){if(jt(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!rt.call(t,i)||!jt(e[i],t[i]))return!1}return!0}function $t(e){switch(e.tag){case 5:return et(e.type);case 16:return et("Lazy");case 13:return et("Suspense");case 19:return et("SuspenseList");case 0:case 2:case 15:return e=nt(e.type,!1);case 11:return e=nt(e.type.render,!1);case 1:return e=nt(e.type,!0);default:return""}}function en(e,t){if(e&&e.defaultProps){for(var n in t=a({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var tn=ot(null),nn=null,rn=null,an=null;function on(){an=rn=nn=null}function sn(e,t,n){X?(ut(tn,t._currentValue),t._currentValue=n):(ut(tn,t._currentValue2),t._currentValue2=n)}function un(e){var t=tn.current;st(tn),X?e._currentValue=t:e._currentValue2=t}function ln(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function cn(e,t){nn=e,an=rn=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(Li=!0),e.firstContext=null)}function hn(e){var t=X?e._currentValue:e._currentValue2;if(an!==e)if(e={context:e,memoizedValue:t,next:null},null===rn){if(null===nn)throw Error(o(308));rn=e,nn.dependencies={lanes:0,firstContext:e}}else rn=rn.next=e;return t}var dn=null,fn=!1;function pn(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function An(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function vn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function mn(e,t){var n=e.updateQueue;null!==n&&(n=n.shared,null!==Ya&&0!==(1&e.mode)&&0===(2&Xa)?(null===(e=n.interleaved)?(t.next=t,null===dn?dn=[n]:dn.push(n)):(t.next=e.next,e.next=t),n.interleaved=t):(null===(e=n.pending)?t.next=t:(t.next=e.next,e.next=t),n.pending=t))}function gn(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Bt(e,n)}}function yn(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function bn(e,t,n,r){var i=e.updateQueue;fn=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,u=i.shared.pending;if(null!==u){i.shared.pending=null;var l=u,c=l.next;l.next=null,null===s?o=c:s.next=c,s=l;var h=e.alternate;null!==h&&((u=(h=h.updateQueue).lastBaseUpdate)!==s&&(null===u?h.firstBaseUpdate=c:u.next=c,h.lastBaseUpdate=l))}if(null!==o){var d=i.baseState;for(s=0,h=c=l=null,u=o;;){var f=u.lane,p=u.eventTime;if((r&f)===f){null!==h&&(h=h.next={eventTime:p,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var A=e,v=u;switch(f=t,p=n,v.tag){case 1:if("function"===typeof(A=v.payload)){d=A.call(p,d,f);break e}d=A;break e;case 3:A.flags=-65537&A.flags|128;case 0:if(null===(f="function"===typeof(A=v.payload)?A.call(p,d,f):A)||void 0===f)break e;d=a({},d,f);break e;case 2:fn=!0}}null!==u.callback&&0!==u.lane&&(e.flags|=64,null===(f=i.effects)?i.effects=[u]:f.push(u))}else p={eventTime:p,lane:f,tag:u.tag,payload:u.payload,callback:u.callback,next:null},null===h?(c=h=p,l=d):h=h.next=p,s|=f;if(null===(u=u.next)){if(null===(u=i.shared.pending))break;u=(f=u).next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}if(null===h&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=h,null!==(t=i.shared.interleaved)){i=t;do{s|=i.lane,i=i.next}while(i!==t)}else null===o&&(i.shared.lanes=0);to|=s,e.lanes=s,e.memoizedState=d}}function xn(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(o(191,i));i.call(r)}}}var _n=(new r.Component).refs;function wn(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:a({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Sn={isMounted:function(e){return!!(e=e._reactInternals)&&M(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=xo(),i=_o(e),a=vn(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),mn(e,a),null!==(t=wo(e,i,r))&&gn(t,e,i)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=xo(),i=_o(e),a=vn(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),mn(e,a),null!==(t=wo(e,i,r))&&gn(t,e,i)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=xo(),r=_o(e),i=vn(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),mn(e,i),null!==(t=wo(e,r,n))&&gn(t,e,r)}};function Mn(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!Zt(n,r)||!Zt(i,a))}function kn(e,t,n){var r=!1,i=lt,a=t.contextType;return"object"===typeof a&&null!==a?a=hn(a):(i=pt(t)?dt:ct.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?ft(e,i):lt),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Sn,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function Tn(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Sn.enqueueReplaceState(t,t.state,null)}function En(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=_n,pn(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=hn(a):(a=pt(t)?dt:ct.current,i.context=ft(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(wn(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Sn.enqueueReplaceState(i,i.state,null),bn(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}var Cn=[],Rn=0,Bn=null,Pn=0,Nn=[],In=0,Dn=null,Ln=1,On="";function Fn(e,t){Cn[Rn++]=Pn,Cn[Rn++]=Bn,Bn=e,Pn=t}function Un(e,t,n){Nn[In++]=Ln,Nn[In++]=On,Nn[In++]=Dn,Dn=e;var r=Ln;e=On;var i=32-bt(r)-1;r&=~(1<<i),n+=1;var a=32-bt(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Ln=1<<32-bt(t)+i|n<<i|r,On=a+e}else Ln=1<<a|n<<i|r,On=e}function zn(e){null!==e.return&&(Fn(e,1),Un(e,1,0))}function Gn(e){for(;e===Bn;)Bn=Cn[--Rn],Cn[Rn]=null,Pn=Cn[--Rn],Cn[Rn]=null;for(;e===Dn;)Dn=Nn[--In],Nn[In]=null,On=Nn[--In],Nn[In]=null,Ln=Nn[--In],Nn[In]=null}var qn=null,Hn=null,Vn=!1,jn=!1,Wn=null;function Xn(e,t){var n=Zo(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function Yn(e,t){switch(e.tag){case 5:return null!==(t=Ne(t,e.type,e.pendingProps))&&(e.stateNode=t,qn=e,Hn=ze(t),!0);case 6:return null!==(t=Ie(t,e.pendingProps))&&(e.stateNode=t,qn=e,Hn=null,!0);case 13:if(null!==(t=De(t))){var n=null!==Dn?{id:Ln,overflow:On}:null;return e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Zo(18,null,null,0)).stateNode=t,n.return=e,e.child=n,qn=e,Hn=null,!0}return!1;default:return!1}}function Qn(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function Jn(e){if(Vn){var t=Hn;if(t){var n=t;if(!Yn(e,t)){if(Qn(e))throw Error(o(418));t=Ue(n);var r=qn;t&&Yn(e,t)?Xn(r,n):(e.flags=-4097&e.flags|2,Vn=!1,qn=e)}}else{if(Qn(e))throw Error(o(418));e.flags=-4097&e.flags|2,Vn=!1,qn=e}}}function Kn(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;qn=e}function Zn(e){if(!J||e!==qn)return!1;if(!Vn)return Kn(e),Vn=!0,!1;if(3!==e.tag&&(5!==e.tag||Ke(e.type)&&!q(e.type,e.memoizedProps))){var t=Hn;if(t){if(Qn(e)){for(e=Hn;e;)e=Ue(e);throw Error(o(418))}for(;t;)Xn(e,t),t=Ue(t)}}if(Kn(e),13===e.tag){if(!J)throw Error(o(316));if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));Hn=We(e)}else Hn=qn?Ue(e.stateNode):null;return!0}function $n(){J&&(Hn=qn=null,jn=Vn=!1)}function er(e){null===Wn?Wn=[e]:Wn.push(e)}function tr(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var i=r,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=i.refs;t===_n&&(t=i.refs={}),null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function nr(e,t){throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function rr(e){return(0,e._init)(e._payload)}function ir(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=es(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function h(e,t,n,r){return null===t||6!==t.tag?((t=is(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n,r){var a=n.type;return a===c?p(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===y&&rr(a)===t.type)?((r=i(t,n.props)).ref=tr(e,t,n),r.return=e,r):((r=ts(n.type,n.key,n.props,null,e.mode,r)).ref=tr(e,t,n),r.return=e,r)}function f(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=as(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function p(e,t,n,r,a){return null===t||7!==t.tag?((t=ns(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function A(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=is(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case u:return(n=ts(t.type,t.key,t.props,null,e.mode,n)).ref=tr(e,null,t),n.return=e,n;case l:return(t=as(t,e.mode,n)).return=e,t;case y:return A(e,(0,t._init)(t._payload),n)}if(P(t)||_(t))return(t=ns(t,e.mode,n,null)).return=e,t;nr(e,t)}return null}function v(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:h(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case u:return n.key===i?d(e,t,n,r):null;case l:return n.key===i?f(e,t,n,r):null;case y:return v(e,t,(i=n._init)(n._payload),r)}if(P(n)||_(n))return null!==i?null:p(e,t,n,r,null);nr(e,n)}return null}function m(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return h(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case u:return d(t,e=e.get(null===r.key?n:r.key)||null,r,i);case l:return f(t,e=e.get(null===r.key?n:r.key)||null,r,i);case y:return m(e,t,n,(0,r._init)(r._payload),i)}if(P(r)||_(r))return p(t,e=e.get(n)||null,r,i,null);nr(t,r)}return null}function g(i,o,s,u){for(var l=null,c=null,h=o,d=o=0,f=null;null!==h&&d<s.length;d++){h.index>d?(f=h,h=null):f=h.sibling;var p=v(i,h,s[d],u);if(null===p){null===h&&(h=f);break}e&&h&&null===p.alternate&&t(i,h),o=a(p,o,d),null===c?l=p:c.sibling=p,c=p,h=f}if(d===s.length)return n(i,h),Vn&&Fn(i,d),l;if(null===h){for(;d<s.length;d++)null!==(h=A(i,s[d],u))&&(o=a(h,o,d),null===c?l=h:c.sibling=h,c=h);return Vn&&Fn(i,d),l}for(h=r(i,h);d<s.length;d++)null!==(f=m(h,i,d,s[d],u))&&(e&&null!==f.alternate&&h.delete(null===f.key?d:f.key),o=a(f,o,d),null===c?l=f:c.sibling=f,c=f);return e&&h.forEach((function(e){return t(i,e)})),Vn&&Fn(i,d),l}function b(i,s,u,l){var c=_(u);if("function"!==typeof c)throw Error(o(150));if(null==(u=c.call(u)))throw Error(o(151));for(var h=c=null,d=s,f=s=0,p=null,g=u.next();null!==d&&!g.done;f++,g=u.next()){d.index>f?(p=d,d=null):p=d.sibling;var y=v(i,d,g.value,l);if(null===y){null===d&&(d=p);break}e&&d&&null===y.alternate&&t(i,d),s=a(y,s,f),null===h?c=y:h.sibling=y,h=y,d=p}if(g.done)return n(i,d),Vn&&Fn(i,f),c;if(null===d){for(;!g.done;f++,g=u.next())null!==(g=A(i,g.value,l))&&(s=a(g,s,f),null===h?c=g:h.sibling=g,h=g);return Vn&&Fn(i,f),c}for(d=r(i,d);!g.done;f++,g=u.next())null!==(g=m(d,i,f,g.value,l))&&(e&&null!==g.alternate&&d.delete(null===g.key?f:g.key),s=a(g,s,f),null===h?c=g:h.sibling=g,h=g);return e&&d.forEach((function(e){return t(i,e)})),Vn&&Fn(i,f),c}return function e(r,a,o,h){if("object"===typeof o&&null!==o&&o.type===c&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case u:e:{for(var d=o.key,f=a;null!==f;){if(f.key===d){if((d=o.type)===c){if(7===f.tag){n(r,f.sibling),(a=i(f,o.props.children)).return=r,r=a;break e}}else if(f.elementType===d||"object"===typeof d&&null!==d&&d.$$typeof===y&&rr(d)===f.type){n(r,f.sibling),(a=i(f,o.props)).ref=tr(r,f,o),a.return=r,r=a;break e}n(r,f);break}t(r,f),f=f.sibling}o.type===c?((a=ns(o.props.children,r.mode,h,o.key)).return=r,r=a):((h=ts(o.type,o.key,o.props,null,r.mode,h)).ref=tr(r,a,o),h.return=r,r=h)}return s(r);case l:e:{for(f=o.key;null!==a;){if(a.key===f){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=as(o,r.mode,h)).return=r,r=a}return s(r);case y:return e(r,a,(f=o._init)(o._payload),h)}if(P(o))return g(r,a,o,h);if(_(o))return b(r,a,o,h);nr(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=is(o,r.mode,h)).return=r,r=a),s(r)):n(r,a)}}var ar=ir(!0),or=ir(!1),sr={},ur=ot(sr),lr=ot(sr),cr=ot(sr);function hr(e){if(e===sr)throw Error(o(174));return e}function dr(e,t){ut(cr,t),ut(lr,e),ut(ur,sr),e=I(t),st(ur),ut(ur,e)}function fr(){st(ur),st(lr),st(cr)}function pr(e){var t=hr(cr.current),n=hr(ur.current);n!==(t=D(n,e.type,t))&&(ut(lr,e),ut(ur,t))}function Ar(e){lr.current===e&&(st(ur),st(lr))}var vr=ot(0);function mr(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||Le(n)||Oe(n)))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var gr=[];function yr(){for(var e=0;e<gr.length;e++){var t=gr[e];X?t._workInProgressVersionPrimary=null:t._workInProgressVersionSecondary=null}gr.length=0}var br=s.ReactCurrentDispatcher,xr=s.ReactCurrentBatchConfig,_r=0,wr=null,Sr=null,Mr=null,kr=!1,Tr=!1,Er=0,Cr=0;function Rr(){throw Error(o(321))}function Br(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!jt(e[n],t[n]))return!1;return!0}function Pr(e,t,n,r,i,a){if(_r=a,wr=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,br.current=null===e||null===e.memoizedState?pi:Ai,e=n(r,i),Tr){a=0;do{if(Tr=!1,Er=0,25<=a)throw Error(o(301));a+=1,Mr=Sr=null,t.updateQueue=null,br.current=vi,e=n(r,i)}while(Tr)}if(br.current=fi,t=null!==Sr&&null!==Sr.next,_r=0,Mr=Sr=wr=null,kr=!1,t)throw Error(o(300));return e}function Nr(){var e=0!==Er;return Er=0,e}function Ir(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Mr?wr.memoizedState=Mr=e:Mr=Mr.next=e,Mr}function Dr(){if(null===Sr){var e=wr.alternate;e=null!==e?e.memoizedState:null}else e=Sr.next;var t=null===Mr?wr.memoizedState:Mr.next;if(null!==t)Mr=t,Sr=e;else{if(null===e)throw Error(o(310));e={memoizedState:(Sr=e).memoizedState,baseState:Sr.baseState,baseQueue:Sr.baseQueue,queue:Sr.queue,next:null},null===Mr?wr.memoizedState=Mr=e:Mr=Mr.next=e}return Mr}function Lr(e,t){return"function"===typeof t?t(e):t}function Or(e){var t=Dr(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=Sr,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var s=i.next;i.next=a.next,a.next=s}r.baseQueue=i=a,n.pending=null}if(null!==i){a=i.next,r=r.baseState;var u=s=null,l=null,c=a;do{var h=c.lane;if((_r&h)===h)null!==l&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var d={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===l?(u=l=d,s=r):l=l.next=d,wr.lanes|=h,to|=h}c=c.next}while(null!==c&&c!==a);null===l?s=r:l.next=u,jt(r,t.memoizedState)||(Li=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=l,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{a=i.lane,wr.lanes|=a,to|=a,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Fr(e){var t=Dr(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{a=e(a,s.action),s=s.next}while(s!==i);jt(a,t.memoizedState)||(Li=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function Ur(){}function zr(e,t){var n=wr,r=Dr(),i=t(),a=!jt(r.memoizedState,i);if(a&&(r.memoizedState=i,Li=!0),r=r.queue,Kr(Hr.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||null!==Mr&&1&Mr.memoizedState.tag){if(n.flags|=2048,Wr(9,qr.bind(null,n,r,i,t),void 0,null),null===Ya)throw Error(o(349));0!==(30&_r)||Gr(n,t,i)}return i}function Gr(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=wr.updateQueue)?(t={lastEffect:null,stores:null},wr.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function qr(e,t,n,r){t.value=n,t.getSnapshot=r,Vr(t)&&wo(e,1,-1)}function Hr(e,t,n){return n((function(){Vr(t)&&wo(e,1,-1)}))}function Vr(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!jt(e,n)}catch(r){return!0}}function jr(e){var t=Ir();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Lr,lastRenderedState:e},t.queue=e,e=e.dispatch=ui.bind(null,wr,e),[t.memoizedState,e]}function Wr(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=wr.updateQueue)?(t={lastEffect:null,stores:null},wr.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Xr(){return Dr().memoizedState}function Yr(e,t,n,r){var i=Ir();wr.flags|=e,i.memoizedState=Wr(1|t,n,void 0,void 0===r?null:r)}function Qr(e,t,n,r){var i=Dr();r=void 0===r?null:r;var a=void 0;if(null!==Sr){var o=Sr.memoizedState;if(a=o.destroy,null!==r&&Br(r,o.deps))return void(i.memoizedState=Wr(t,n,a,r))}wr.flags|=e,i.memoizedState=Wr(1|t,n,a,r)}function Jr(e,t){return Yr(8390656,8,e,t)}function Kr(e,t){return Qr(2048,8,e,t)}function Zr(e,t){return Qr(4,2,e,t)}function $r(e,t){return Qr(4,4,e,t)}function ei(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function ti(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Qr(4,4,ei.bind(null,t,e),n)}function ni(){}function ri(e,t){var n=Dr();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Br(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function ii(e,t){var n=Dr();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Br(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function ai(e,t){var n=Pt;Pt=0!==n&&4>n?n:4,e(!0);var r=xr.transition;xr.transition={};try{e(!1),t()}finally{Pt=n,xr.transition=r}}function oi(){return Dr().memoizedState}function si(e,t,n){var r=_o(e);n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},li(e)?ci(t,n):(hi(e,t,n),null!==(e=wo(e,r,n=xo()))&&di(e,t,r))}function ui(e,t,n){var r=_o(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(li(e))ci(t,i);else{hi(e,t,i);var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,s=a(o,n);if(i.hasEagerState=!0,i.eagerState=s,jt(s,o))return}catch(u){}null!==(e=wo(e,r,n=xo()))&&di(e,t,r)}}function li(e){var t=e.alternate;return e===wr||null!==t&&t===wr}function ci(e,t){Tr=kr=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function hi(e,t,n){null!==Ya&&0!==(1&e.mode)&&0===(2&Xa)?(null===(e=t.interleaved)?(n.next=n,null===dn?dn=[t]:dn.push(t)):(n.next=e.next,e.next=n),t.interleaved=n):(null===(e=t.pending)?n.next=n:(n.next=e.next,e.next=n),t.pending=n)}function di(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Bt(e,n)}}var fi={readContext:hn,useCallback:Rr,useContext:Rr,useEffect:Rr,useImperativeHandle:Rr,useInsertionEffect:Rr,useLayoutEffect:Rr,useMemo:Rr,useReducer:Rr,useRef:Rr,useState:Rr,useDebugValue:Rr,useDeferredValue:Rr,useTransition:Rr,useMutableSource:Rr,useSyncExternalStore:Rr,useId:Rr,unstable_isNewReconciler:!1},pi={readContext:hn,useCallback:function(e,t){return Ir().memoizedState=[e,void 0===t?null:t],e},useContext:hn,useEffect:Jr,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Yr(4194308,4,ei.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Yr(4194308,4,e,t)},useInsertionEffect:function(e,t){return Yr(4,2,e,t)},useMemo:function(e,t){var n=Ir();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Ir();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=si.bind(null,wr,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Ir().memoizedState=e},useState:jr,useDebugValue:ni,useDeferredValue:function(e){var t=jr(e),n=t[0],r=t[1];return Jr((function(){var t=xr.transition;xr.transition={};try{r(e)}finally{xr.transition=t}}),[e]),n},useTransition:function(){var e=jr(!1),t=e[0];return e=ai.bind(null,e[1]),Ir().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=wr,i=Ir();if(Vn){if(void 0===n)throw Error(o(407));n=n()}else{if(n=t(),null===Ya)throw Error(o(349));0!==(30&_r)||Gr(r,t,n)}i.memoizedState=n;var a={value:n,getSnapshot:t};return i.queue=a,Jr(Hr.bind(null,r,a,e),[e]),r.flags|=2048,Wr(9,qr.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=Ir(),t=Ya.identifierPrefix;if(Vn){var n=On;t=":"+t+"R"+(n=(Ln&~(1<<32-bt(Ln)-1)).toString(32)+n),0<(n=Er++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=Cr++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Ai={readContext:hn,useCallback:ri,useContext:hn,useEffect:Kr,useImperativeHandle:ti,useInsertionEffect:Zr,useLayoutEffect:$r,useMemo:ii,useReducer:Or,useRef:Xr,useState:function(){return Or(Lr)},useDebugValue:ni,useDeferredValue:function(e){var t=Or(Lr),n=t[0],r=t[1];return Kr((function(){var t=xr.transition;xr.transition={};try{r(e)}finally{xr.transition=t}}),[e]),n},useTransition:function(){return[Or(Lr)[0],Dr().memoizedState]},useMutableSource:Ur,useSyncExternalStore:zr,useId:oi,unstable_isNewReconciler:!1},vi={readContext:hn,useCallback:ri,useContext:hn,useEffect:Kr,useImperativeHandle:ti,useInsertionEffect:Zr,useLayoutEffect:$r,useMemo:ii,useReducer:Fr,useRef:Xr,useState:function(){return Fr(Lr)},useDebugValue:ni,useDeferredValue:function(e){var t=Fr(Lr),n=t[0],r=t[1];return Kr((function(){var t=xr.transition;xr.transition={};try{r(e)}finally{xr.transition=t}}),[e]),n},useTransition:function(){return[Fr(Lr)[0],Dr().memoizedState]},useMutableSource:Ur,useSyncExternalStore:zr,useId:oi,unstable_isNewReconciler:!1};function mi(e,t){try{var n="",r=t;do{n+=$t(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i}}function gi(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var yi,bi,xi,_i,wi="function"===typeof WeakMap?WeakMap:Map;function Si(e,t,n){(n=vn(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){co||(co=!0,ho=r),gi(0,t)},n}function Mi(e,t,n){(n=vn(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){gi(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){gi(0,t),"function"!==typeof r&&(null===fo?fo=new Set([this]):fo.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ki(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new wi;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Wo.bind(null,e,t,n),t.then(e,e))}function Ti(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function Ei(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=vn(-1,1)).tag=2,mn(n,t))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}function Ci(e){e.flags|=4}function Ri(e,t){if(null!==e&&e.child===t.child)return!0;if(0!==(16&t.flags))return!1;for(e=t.child;null!==e;){if(0!==(12854&e.flags)||0!==(12854&e.subtreeFlags))return!1;e=e.sibling}return!0}if(Y)yi=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)U(e,n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},bi=function(){},xi=function(e,t,n,r,i){if((e=e.memoizedProps)!==r){var a=t.stateNode,o=hr(ur.current);n=G(a,n,e,r,i,o),(t.updateQueue=n)&&Ci(t)}},_i=function(e,t,n,r){n!==r&&Ci(t)};else if(Q){yi=function(e,t,n,r){for(var i=t.child;null!==i;){if(5===i.tag){var a=i.stateNode;n&&r&&(a=Be(a,i.type,i.memoizedProps,i)),U(e,a)}else if(6===i.tag)a=i.stateNode,n&&r&&(a=Pe(a,i.memoizedProps,i)),U(e,a);else if(4!==i.tag)if(22===i.tag&&null!==i.memoizedState)null!==(a=i.child)&&(a.return=i),yi(e,i,!0,!0);else if(null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};var Bi=function e(t,n,r,i){for(var a=n.child;null!==a;){if(5===a.tag){var o=a.stateNode;r&&i&&(o=Be(o,a.type,a.memoizedProps,a)),Ee(t,o)}else if(6===a.tag)o=a.stateNode,r&&i&&(o=Pe(o,a.memoizedProps,a)),Ee(t,o);else if(4!==a.tag)if(22===a.tag&&null!==a.memoizedState)null!==(o=a.child)&&(o.return=a),e(t,a,!0,!0);else if(null!==a.child){a.child.return=a,a=a.child;continue}if(a===n)break;for(;null===a.sibling;){if(null===a.return||a.return===n)return;a=a.return}a.sibling.return=a.return,a=a.sibling}};bi=function(e,t){var n=t.stateNode;if(!Ri(e,t)){e=n.containerInfo;var r=Te(e);Bi(r,t,!1,!1),n.pendingChildren=r,Ci(t),Ce(e,r)}},xi=function(e,t,n,r,i){var a=e.stateNode,o=e.memoizedProps;if((e=Ri(e,t))&&o===r)t.stateNode=a;else{var s=t.stateNode,u=hr(ur.current),l=null;o!==r&&(l=G(s,n,o,r,i,u)),e&&null===l?t.stateNode=a:(a=ke(a,l,n,o,r,t,e,s),z(a,n,r,i,u)&&Ci(t),t.stateNode=a,e?Ci(t):yi(a,t,!1,!1))}},_i=function(e,t,n,r){n!==r?(e=hr(cr.current),n=hr(ur.current),t.stateNode=H(r,e,n,t),Ci(t)):t.stateNode=e.stateNode}}else bi=function(){},xi=function(){},_i=function(){};function Pi(e,t){if(!Vn)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ni(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Ii(e,t,n){var r=t.pendingProps;switch(Gn(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ni(t),null;case 1:case 17:return pt(t.type)&&At(),Ni(t),null;case 3:return r=t.stateNode,fr(),st(ht),st(ct),yr(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Zn(t)?Ci(t):null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==Wn&&(Eo(Wn),Wn=null))),bi(e,t),Ni(t),null;case 5:Ar(t),n=hr(cr.current);var i=t.type;if(null!==e&&null!=t.stateNode)xi(e,t,i,r,n),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(o(166));return Ni(t),null}if(e=hr(ur.current),Zn(t)){if(!J)throw Error(o(175));e=He(t.stateNode,t.type,t.memoizedProps,n,e,t,!jn),t.updateQueue=e,null!==e&&Ci(t)}else{var a=F(i,r,n,e,t);yi(a,t,!1,!1),t.stateNode=a,z(a,i,r,n,e)&&Ci(t)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ni(t),null;case 6:if(e&&null!=t.stateNode)_i(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));if(e=hr(cr.current),n=hr(ur.current),Zn(t)){if(!J)throw Error(o(176));if(e=t.stateNode,r=t.memoizedProps,(n=Ve(e,r,t,!jn))&&null!==(i=qn))switch(a=0!==(1&i.mode),i.tag){case 3:Ze(i.stateNode.containerInfo,e,r,a);break;case 5:$e(i.type,i.memoizedProps,i.stateNode,e,r,a)}n&&Ci(t)}else t.stateNode=H(r,e,n,t)}return Ni(t),null;case 13:if(st(vr),r=t.memoizedState,Vn&&null!==Hn&&0!==(1&t.mode)&&0===(128&t.flags)){for(e=Hn;e;)e=Ue(e);return $n(),t.flags|=98560,t}if(null!==r&&null!==r.dehydrated){if(r=Zn(t),null===e){if(!r)throw Error(o(318));if(!J)throw Error(o(344));if(!(e=null!==(e=t.memoizedState)?e.dehydrated:null))throw Error(o(317));je(e,t)}else $n(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;return Ni(t),null}return null!==Wn&&(Eo(Wn),Wn=null),0!==(128&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?Zn(t):n=null!==e.memoizedState,r&&!n&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&vr.current)?0===$a&&($a=3):Lo())),null!==t.updateQueue&&(t.flags|=4),Ni(t),null);case 4:return fr(),bi(e,t),null===e&&Z(t.stateNode.containerInfo),Ni(t),null;case 10:return un(t.type._context),Ni(t),null;case 19:if(st(vr),null===(i=t.memoizedState))return Ni(t),null;if(r=0!==(128&t.flags),null===(a=i.rendering))if(r)Pi(i,!1);else{if(0!==$a||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(a=mr(e))){for(t.flags|=128,Pi(i,!1),null!==(e=a.updateQueue)&&(t.updateQueue=e,t.flags|=4),t.subtreeFlags=0,e=n,r=t.child;null!==r;)i=e,(n=r).flags&=14680066,null===(a=n.alternate)?(n.childLanes=0,n.lanes=i,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=a.childLanes,n.lanes=a.lanes,n.child=a.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=a.memoizedProps,n.memoizedState=a.memoizedState,n.updateQueue=a.updateQueue,n.type=a.type,i=a.dependencies,n.dependencies=null===i?null:{lanes:i.lanes,firstContext:i.firstContext}),r=r.sibling;return ut(vr,1&vr.current|2),t.child}e=e.sibling}null!==i.tail&&Ft()>so&&(t.flags|=128,r=!0,Pi(i,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=mr(a))){if(t.flags|=128,r=!0,null!==(e=e.updateQueue)&&(t.updateQueue=e,t.flags|=4),Pi(i,!0),null===i.tail&&"hidden"===i.tailMode&&!a.alternate&&!Vn)return Ni(t),null}else 2*Ft()-i.renderingStartTime>so&&1073741824!==n&&(t.flags|=128,r=!0,Pi(i,!1),t.lanes=4194304);i.isBackwards?(a.sibling=t.child,t.child=a):(null!==(e=i.last)?e.sibling=a:t.child=a,i.last=a)}return null!==i.tail?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Ft(),t.sibling=null,e=vr.current,ut(vr,r?1&e|2:1&e),t):(Ni(t),null);case 22:case 23:return Po(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ka)&&(Ni(t),Y&&6&t.subtreeFlags&&(t.flags|=8192)):Ni(t),null;case 24:case 25:return null}throw Error(o(156,t.tag))}var Di=s.ReactCurrentOwner,Li=!1;function Oi(e,t,n,r){t.child=null===e?or(t,null,n,r):ar(t,e.child,n,r)}function Fi(e,t,n,r,i){n=n.render;var a=t.ref;return cn(t,i),r=Pr(e,t,n,r,a,i),n=Nr(),null===e||Li?(Vn&&n&&zn(t),t.flags|=1,Oi(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,ia(e,t,i))}function Ui(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||$o(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=ts(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,zi(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:Zt)(o,r)&&e.ref===t.ref)return ia(e,t,i)}return t.flags|=1,(e=es(a,r)).ref=t.ref,e.return=t,t.child=e}function zi(e,t,n,r,i){if(null!==e&&Zt(e.memoizedProps,r)&&e.ref===t.ref){if(Li=!1,0===(e.lanes&i))return t.lanes=e.lanes,ia(e,t,i);0!==(131072&e.flags)&&(Li=!0)}return Hi(e,t,n,r,i)}function Gi(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null},ut(Za,Ka),Ka|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null},t.updateQueue=null,ut(Za,Ka),Ka|=e,null;t.memoizedState={baseLanes:0,cachePool:null},r=null!==a?a.baseLanes:n,ut(Za,Ka),Ka|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,ut(Za,Ka),Ka|=r;return Oi(e,t,i,n),t.child}function qi(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Hi(e,t,n,r,i){var a=pt(n)?dt:ct.current;return a=ft(t,a),cn(t,i),n=Pr(e,t,n,r,a,i),r=Nr(),null===e||Li?(Vn&&r&&zn(t),t.flags|=1,Oi(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,ia(e,t,i))}function Vi(e,t,n,r,i){if(pt(n)){var a=!0;gt(t)}else a=!1;if(cn(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),kn(t,n,r),En(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var u=o.context,l=n.contextType;"object"===typeof l&&null!==l?l=hn(l):l=ft(t,l=pt(n)?dt:ct.current);var c=n.getDerivedStateFromProps,h="function"===typeof c||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==r||u!==l)&&Tn(t,o,r,l),fn=!1;var d=t.memoizedState;o.state=d,bn(t,r,o,i),u=t.memoizedState,s!==r||d!==u||ht.current||fn?("function"===typeof c&&(wn(t,n,c,r),u=t.memoizedState),(s=fn||Mn(t,n,s,r,d,u,l))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=l,r=s):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,An(e,t),s=t.memoizedProps,l=t.type===t.elementType?s:en(t.type,s),o.props=l,h=t.pendingProps,d=o.context,"object"===typeof(u=n.contextType)&&null!==u?u=hn(u):u=ft(t,u=pt(n)?dt:ct.current);var f=n.getDerivedStateFromProps;(c="function"===typeof f||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==h||d!==u)&&Tn(t,o,r,u),fn=!1,d=t.memoizedState,o.state=d,bn(t,r,o,i);var p=t.memoizedState;s!==h||d!==p||ht.current||fn?("function"===typeof f&&(wn(t,n,f,r),p=t.memoizedState),(l=fn||Mn(t,n,l,r,d,p,u)||!1)?(c||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,u),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,u)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=u,r=l):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return ji(e,t,n,r,a,i)}function ji(e,t,n,r,i,a){qi(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&yt(t,n,!1),ia(e,t,a);r=t.stateNode,Di.current=t;var s=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=ar(t,e.child,null,a),t.child=ar(t,null,s,a)):Oi(e,t,s,a),t.memoizedState=r.state,i&&yt(t,n,!0),t.child}function Wi(e){var t=e.stateNode;t.pendingContext?vt(0,t.pendingContext,t.pendingContext!==t.context):t.context&&vt(0,t.context,!1),dr(e,t.containerInfo)}function Xi(e,t,n,r,i){return $n(),er(i),t.flags|=256,Oi(e,t,n,r),t.child}var Yi={dehydrated:null,treeContext:null,retryLane:0};function Qi(e){return{baseLanes:e,cachePool:null}}function Ji(e,t,n){var r,i=t.pendingProps,a=vr.current,s=!1,u=0!==(128&t.flags);if((r=u)||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),ut(vr,1&a),null===e)return Jn(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:Oe(e)?t.lanes=8:t.lanes=1073741824,null):(a=i.children,e=i.fallback,s?(i=t.mode,s=t.child,a={mode:"hidden",children:a},0===(1&i)&&null!==s?(s.childLanes=0,s.pendingProps=a):s=rs(a,i,0,null),e=ns(e,i,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Qi(n),t.memoizedState=Yi,e):Ki(t,a));if(null!==(a=e.memoizedState)){if(null!==(r=a.dehydrated)){if(u)return 256&t.flags?(t.flags&=-257,ea(e,t,n,Error(o(422)))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(s=i.fallback,a=t.mode,i=rs({mode:"visible",children:i.children},a,0,null),(s=ns(s,a,n,null)).flags|=2,i.return=t,s.return=t,i.sibling=s,t.child=i,0!==(1&t.mode)&&ar(t,e.child,null,n),t.child.memoizedState=Qi(n),t.memoizedState=Yi,s);if(0===(1&t.mode))t=ea(e,t,n,null);else if(Oe(r))t=ea(e,t,n,Error(o(419)));else if(i=0!==(n&e.childLanes),Li||i){if(null!==(i=Ya)){switch(n&-n){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}0!==(i=0!==(s&(i.suspendedLanes|n))?0:s)&&i!==a.retryLane&&(a.retryLane=i,wo(e,i,-1))}Lo(),t=ea(e,t,n,Error(o(421)))}else Le(r)?(t.flags|=128,t.child=e.child,t=Yo.bind(null,e),Fe(r,t),t=null):(n=a.treeContext,J&&(Hn=qe(r),qn=t,Vn=!0,Wn=null,jn=!1,null!==n&&(Nn[In++]=Ln,Nn[In++]=On,Nn[In++]=Dn,Ln=n.id,On=n.overflow,Dn=t)),(t=Ki(t,t.pendingProps.children)).flags|=4096);return t}return s?(i=$i(e,t,i.children,i.fallback,n),s=t.child,a=e.child.memoizedState,s.memoizedState=null===a?Qi(n):{baseLanes:a.baseLanes|n,cachePool:null},s.childLanes=e.childLanes&~n,t.memoizedState=Yi,i):(n=Zi(e,t,i.children,n),t.memoizedState=null,n)}return s?(i=$i(e,t,i.children,i.fallback,n),s=t.child,a=e.child.memoizedState,s.memoizedState=null===a?Qi(n):{baseLanes:a.baseLanes|n,cachePool:null},s.childLanes=e.childLanes&~n,t.memoizedState=Yi,i):(n=Zi(e,t,i.children,n),t.memoizedState=null,n)}function Ki(e,t){return(t=rs({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Zi(e,t,n,r){var i=e.child;return e=i.sibling,n=es(i,{mode:"visible",children:n}),0===(1&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n}function $i(e,t,n,r,i){var a=t.mode,o=(e=e.child).sibling,s={mode:"hidden",children:n};return 0===(1&a)&&t.child!==e?((n=t.child).childLanes=0,n.pendingProps=s,t.deletions=null):(n=es(e,s)).subtreeFlags=14680064&e.subtreeFlags,null!==o?r=es(o,r):(r=ns(r,a,i,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function ea(e,t,n,r){return null!==r&&er(r),ar(t,e.child,null,n),(e=Ki(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function ta(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),ln(e.return,t,n)}function na(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function ra(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(Oi(e,t,r.children,n),0!==(2&(r=vr.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&ta(e,n,t);else if(19===e.tag)ta(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ut(vr,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===mr(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),na(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===mr(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}na(t,!0,n,null,a);break;case"together":na(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ia(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),to|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=es(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=es(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function aa(e,t){switch(Gn(t),t.tag){case 1:return pt(t.type)&&At(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return fr(),st(ht),st(ct),yr(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Ar(t),null;case 13:if(st(vr),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));$n()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return st(vr),null;case 4:return fr(),null;case 10:return un(t.type._context),null;case 22:case 23:return Po(),null;default:return null}}var oa=!1,sa=!1,ua="function"===typeof WeakSet?WeakSet:Set,la=null;function ca(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){jo(e,t,r)}else n.current=null}function ha(e,t,n){try{n()}catch(r){jo(e,t,r)}}var da=!1;function fa(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&ha(t,n,a)}i=i.next}while(i!==r)}}function pa(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Aa(e){var t=e.ref;if(null!==t){var n=e.stateNode;if(5===e.tag)e=N(n);else e=n;"function"===typeof t?t(e):t.current=e}}function va(e,t,n){if(Vt&&"function"===typeof Vt.onCommitFiberUnmount)try{Vt.onCommitFiberUnmount(Ht,t)}catch(o){}switch(t.tag){case 0:case 11:case 14:case 15:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var r=e=e.next;do{var i=r,a=i.destroy;i=i.tag,void 0!==a&&(0!==(2&i)||0!==(4&i))&&ha(t,n,a),r=r.next}while(r!==e)}break;case 1:if(ca(t,n),"function"===typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(o){jo(t,n,o)}break;case 5:ca(t,n);break;case 4:Y?Sa(e,t,n):Q&&Q&&(t=t.stateNode.containerInfo,n=Te(t),Re(t,n))}}function ma(e,t,n){for(var r=t;;)if(va(e,r,n),null===r.child||Y&&4===r.tag){if(r===t)break;for(;null===r.sibling;){if(null===r.return||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}else r.child.return=r,r=r.child}function ga(e){var t=e.alternate;null!==t&&(e.alternate=null,ga(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&ee(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ya(e){return 5===e.tag||3===e.tag||4===e.tag}function ba(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ya(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function xa(e){if(Y){e:{for(var t=e.return;null!==t;){if(ya(t))break e;t=t.return}throw Error(o(160))}var n=t;switch(n.tag){case 5:t=n.stateNode,32&n.flags&&(be(t),n.flags&=-33),wa(e,n=ba(e),t);break;case 3:case 4:t=n.stateNode.containerInfo,_a(e,n=ba(e),t);break;default:throw Error(o(161))}}}function _a(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?me(n,e,t):de(n,e);else if(4!==r&&null!==(e=e.child))for(_a(e,t,n),e=e.sibling;null!==e;)_a(e,t,n),e=e.sibling}function wa(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?ve(n,e,t):he(n,e);else if(4!==r&&null!==(e=e.child))for(wa(e,t,n),e=e.sibling;null!==e;)wa(e,t,n),e=e.sibling}function Sa(e,t,n){for(var r,i,a=t,s=!1;;){if(!s){s=a.return;e:for(;;){if(null===s)throw Error(o(160));switch(r=s.stateNode,s.tag){case 5:i=!1;break e;case 3:case 4:r=r.containerInfo,i=!0;break e}s=s.return}s=!0}if(5===a.tag||6===a.tag)ma(e,a,n),i?ye(r,a.stateNode):ge(r,a.stateNode);else if(18===a.tag)i?Je(r,a.stateNode):Qe(r,a.stateNode);else if(4===a.tag){if(null!==a.child){r=a.stateNode.containerInfo,i=!0,a.child.return=a,a=a.child;continue}}else if(va(e,a,n),null!==a.child){a.child.return=a,a=a.child;continue}if(a===t)break;for(;null===a.sibling;){if(null===a.return||a.return===t)return;4===(a=a.return).tag&&(s=!1)}a.sibling.return=a.return,a=a.sibling}}function Ma(e,t){if(Y){switch(t.tag){case 0:case 11:case 14:case 15:return fa(3,t,t.return),pa(3,t),void fa(5,t,t.return);case 1:case 12:case 17:return;case 5:var n=t.stateNode;if(null!=n){var r=t.memoizedProps;e=null!==e?e.memoizedProps:r;var i=t.type,a=t.updateQueue;t.updateQueue=null,null!==a&&Ae(n,a,i,e,r,t)}return;case 6:if(null===t.stateNode)throw Error(o(162));return n=t.memoizedProps,void fe(t.stateNode,null!==e?e.memoizedProps:n,n);case 3:return void(J&&null!==e&&e.memoizedState.isDehydrated&&Xe(t.stateNode.containerInfo));case 13:case 19:return void ka(t)}throw Error(o(163))}switch(t.tag){case 0:case 11:case 14:case 15:return fa(3,t,t.return),pa(3,t),void fa(5,t,t.return);case 12:case 22:case 23:return;case 13:case 19:return void ka(t);case 3:J&&null!==e&&e.memoizedState.isDehydrated&&Xe(t.stateNode.containerInfo)}e:if(Q){switch(t.tag){case 1:case 5:case 6:break e;case 3:case 4:t=t.stateNode,Re(t.containerInfo,t.pendingChildren);break e}throw Error(o(163))}}function ka(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new ua),t.forEach((function(t){var r=Qo.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function Ta(e,t,n){la=e,Ea(e,t,n)}function Ea(e,t,n){for(var r=0!==(1&e.mode);null!==la;){var i=la,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||oa;if(!o){var s=i.alternate,u=null!==s&&null!==s.memoizedState||sa;s=oa;var l=sa;if(oa=o,(sa=u)&&!l)for(la=i;null!==la;)u=(o=la).child,22===o.tag&&null!==o.memoizedState?Ba(i):null!==u?(u.return=o,la=u):Ba(i);for(;null!==a;)la=a,Ea(a,t,n),a=a.sibling;la=i,oa=s,sa=l}Ca(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,la=a):Ca(e)}}function Ca(e){for(;null!==la;){var t=la;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:sa||pa(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!sa)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:en(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&xn(t,a,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:n=N(t.child.stateNode);break;case 1:n=t.child.stateNode}xn(t,s,n)}break;case 5:var u=t.stateNode;null===n&&4&t.flags&&pe(u,t.type,t.memoizedProps,t);break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:break;case 13:if(J&&null===t.memoizedState){var l=t.alternate;if(null!==l){var c=l.memoizedState;if(null!==c){var h=c.dehydrated;null!==h&&Ye(h)}}}break;default:throw Error(o(163))}sa||512&t.flags&&Aa(t)}catch(d){jo(t,t.return,d)}}if(t===e){la=null;break}if(null!==(n=t.sibling)){n.return=t.return,la=n;break}la=t.return}}function Ra(e){for(;null!==la;){var t=la;if(t===e){la=null;break}var n=t.sibling;if(null!==n){n.return=t.return,la=n;break}la=t.return}}function Ba(e){for(;null!==la;){var t=la;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{pa(4,t)}catch(u){jo(t,n,u)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(u){jo(t,i,u)}}var a=t.return;try{Aa(t)}catch(u){jo(t,a,u)}break;case 5:var o=t.return;try{Aa(t)}catch(u){jo(t,o,u)}}}catch(u){jo(t,t.return,u)}if(t===e){la=null;break}var s=t.sibling;if(null!==s){s.return=t.return,la=s;break}la=t.return}}var Pa=0,Na=1,Ia=2,Da=3,La=4;if("function"===typeof Symbol&&Symbol.for){var Oa=Symbol.for;Pa=Oa("selector.component"),Na=Oa("selector.has_pseudo_class"),Ia=Oa("selector.role"),Da=Oa("selector.test_id"),La=Oa("selector.text")}function Fa(e){var t=K(e);if(null!=t){if("string"!==typeof t.memoizedProps["data-testname"])throw Error(o(364));return t}if(null===(e=ie(e)))throw Error(o(362));return e.stateNode.current}function Ua(e,t){switch(t.$$typeof){case Pa:if(e.type===t.value)return!0;break;case Na:e:{t=t.value,e=[e,0];for(var n=0;n<e.length;){var r=e[n++],i=e[n++],a=t[i];if(5!==r.tag||!se(r)){for(;null!=a&&Ua(r,a);)a=t[++i];if(i===t.length){t=!0;break e}for(r=r.child;null!==r;)e.push(r,i),r=r.sibling}}t=!1}return t;case Ia:if(5===e.tag&&ue(e.stateNode,t.value))return!0;break;case La:if((5===e.tag||6===e.tag)&&(null!==(e=oe(e))&&0<=e.indexOf(t.value)))return!0;break;case Da:if(5===e.tag&&("string"===typeof(e=e.memoizedProps["data-testname"])&&e.toLowerCase()===t.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function za(e){switch(e.$$typeof){case Pa:return"<"+(w(e.value)||"Unknown")+">";case Na:return":has("+(za(e)||"")+")";case Ia:return'[role="'+e.value+'"]';case La:return'"'+e.value+'"';case Da:return'[data-testname="'+e.value+'"]';default:throw Error(o(365))}}function Ga(e,t){var n=[];e=[e,0];for(var r=0;r<e.length;){var i=e[r++],a=e[r++],o=t[a];if(5!==i.tag||!se(i)){for(;null!=o&&Ua(i,o);)o=t[++a];if(a===t.length)n.push(i);else for(i=i.child;null!==i;)e.push(i,a),i=i.sibling}}return n}function qa(e,t){if(!re)throw Error(o(363));e=Ga(e=Fa(e),t),t=[],e=Array.from(e);for(var n=0;n<e.length;){var r=e[n++];if(5===r.tag)se(r)||t.push(r.stateNode);else for(r=r.child;null!==r;)e.push(r),r=r.sibling}return t}var Ha=Math.ceil,Va=s.ReactCurrentDispatcher,ja=s.ReactCurrentOwner,Wa=s.ReactCurrentBatchConfig,Xa=0,Ya=null,Qa=null,Ja=0,Ka=0,Za=ot(0),$a=0,eo=null,to=0,no=0,ro=0,io=null,ao=null,oo=0,so=1/0;function uo(){so=Ft()+500}var lo,co=!1,ho=null,fo=null,po=!1,Ao=null,vo=0,mo=0,go=null,yo=-1,bo=0;function xo(){return 0!==(6&Xa)?Ft():-1!==yo?yo:yo=Ft()}function _o(e){return 0===(1&e.mode)?1:0!==(2&Xa)&&0!==Ja?Ja&-Ja:null!==Kt.transition?(0===bo&&(e=wt,0===(4194240&(wt<<=1))&&(wt=64),bo=e),bo):0!==(e=Pt)?e:$()}function wo(e,t,n){if(50<mo)throw mo=0,go=null,Error(o(185));var r=So(e,t);return null===r?null:(Rt(r,t,n),0!==(2&Xa)&&r===Ya||(r===Ya&&(0===(2&Xa)&&(no|=t),4===$a&&Co(r,Ja)),Mo(r,n),1===t&&0===Xa&&0===(1&e.mode)&&(uo(),Xt&&Jt())),r)}function So(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function Mo(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-bt(a),s=1<<o,u=i[o];-1===u?0!==(s&n)&&0===(s&r)||(i[o]=Tt(s,t)):u<=t&&(e.expiredLanes|=s),a&=~s}}(e,t);var r=kt(e,e===Ya?Ja:0);if(0===r)null!==n&&Dt(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Dt(n),1===t)0===e.tag?function(e){Xt=!0,Qt(e)}(Ro.bind(null,e)):Qt(Ro.bind(null,e)),te?ne((function(){0===Xa&&Jt()})):It(Ut,Jt),n=null;else{switch(Nt(r)){case 1:n=Ut;break;case 4:n=zt;break;case 16:default:n=Gt;break;case 536870912:n=qt}n=Jo(n,ko.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ko(e,t){if(yo=-1,bo=0,0!==(6&Xa))throw Error(o(327));var n=e.callbackNode;if(Ho()&&e.callbackNode!==n)return null;var r=kt(e,e===Ya?Ja:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=Oo(e,r);else{t=r;var i=Xa;Xa|=2;var a=Do();for(Ya===e&&Ja===t||(uo(),No(e,t));;)try{Uo();break}catch(u){Io(e,u)}on(),Va.current=a,Xa=i,null!==Qa?t=0:(Ya=null,Ja=0,t=$a)}if(0!==t){if(2===t&&(0!==(i=Et(e))&&(r=i,t=To(e,i))),1===t)throw n=eo,No(e,0),Co(e,r),Mo(e,Ft()),n;if(6===t)Co(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!jt(a(),i))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=Oo(e,r))&&(0!==(a=Et(e))&&(r=a,t=To(e,a))),1===t))throw n=eo,No(e,0),Co(e,r),Mo(e,Ft()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(o(345));case 2:case 5:qo(e,ao);break;case 3:if(Co(e,r),(130023424&r)===r&&10<(t=oo+500-Ft())){if(0!==kt(e,0))break;if(((i=e.suspendedLanes)&r)!==r){xo(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=V(qo.bind(null,e,ao),t);break}qo(e,ao);break;case 4:if(Co(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var s=31-bt(r);a=1<<s,(s=t[s])>i&&(i=s),r&=~a}if(r=i,10<(r=(120>(r=Ft()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Ha(r/1960))-r)){e.timeoutHandle=V(qo.bind(null,e,ao),r);break}qo(e,ao);break;default:throw Error(o(329))}}}return Mo(e,Ft()),e.callbackNode===n?ko.bind(null,e):null}function To(e,t){var n=io;return e.current.memoizedState.isDehydrated&&(No(e,t).flags|=256),2!==(e=Oo(e,t))&&(t=ao,ao=n,null!==t&&Eo(t)),e}function Eo(e){null===ao?ao=e:ao.push.apply(ao,e)}function Co(e,t){for(t&=~ro,t&=~no,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-bt(t),r=1<<n;e[n]=-1,t&=~r}}function Ro(e){if(0!==(6&Xa))throw Error(o(327));Ho();var t=kt(e,0);if(0===(1&t))return Mo(e,Ft()),null;var n=Oo(e,t);if(0!==e.tag&&2===n){var r=Et(e);0!==r&&(t=r,n=To(e,r))}if(1===n)throw n=eo,No(e,0),Co(e,t),Mo(e,Ft()),n;if(6===n)throw Error(o(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,qo(e,ao),Mo(e,Ft()),null}function Bo(e){null!==Ao&&0===Ao.tag&&0===(6&Xa)&&Ho();var t=Xa;Xa|=1;var n=Wa.transition,r=Pt;try{if(Wa.transition=null,Pt=1,e)return e()}finally{Pt=r,Wa.transition=n,0===(6&(Xa=t))&&Jt()}}function Po(){Ka=Za.current,st(Za)}function No(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==W&&(e.timeoutHandle=W,j(n)),null!==Qa)for(n=Qa.return;null!==n;){var r=n;switch(Gn(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&At();break;case 3:fr(),st(ht),st(ct),yr();break;case 5:Ar(r);break;case 4:fr();break;case 13:case 19:st(vr);break;case 10:un(r.type._context);break;case 22:case 23:Po()}n=n.return}if(Ya=e,Qa=e=es(e.current,null),Ja=Ka=t,$a=0,eo=null,ro=no=to=0,ao=io=null,null!==dn){for(t=0;t<dn.length;t++)if(null!==(r=(n=dn[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}dn=null}return e}function Io(e,t){for(;;){var n=Qa;try{if(on(),br.current=fi,kr){for(var r=wr.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}kr=!1}if(_r=0,Mr=Sr=wr=null,Tr=!1,Er=0,ja.current=null,null===n||null===n.return){$a=1,eo=t,Qa=null;break}e:{var a=e,s=n.return,u=n,l=t;if(t=Ja,u.flags|=32768,null!==l&&"object"===typeof l&&"function"===typeof l.then){var c=l,h=u,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=Ti(s);if(null!==p){p.flags&=-257,Ei(p,s,u,0,t),1&p.mode&&ki(a,c,t),l=c;var A=(t=p).updateQueue;if(null===A){var v=new Set;v.add(l),t.updateQueue=v}else A.add(l);break e}if(0===(1&t)){ki(a,c,t),Lo();break e}l=Error(o(426))}else if(Vn&&1&u.mode){var m=Ti(s);if(null!==m){0===(65536&m.flags)&&(m.flags|=256),Ei(m,s,u,0,t),er(l);break e}}a=l,4!==$a&&($a=2),null===io?io=[a]:io.push(a),l=mi(l,u),u=s;do{switch(u.tag){case 3:u.flags|=65536,t&=-t,u.lanes|=t,yn(u,Si(0,l,t));break e;case 1:a=l;var g=u.type,y=u.stateNode;if(0===(128&u.flags)&&("function"===typeof g.getDerivedStateFromError||null!==y&&"function"===typeof y.componentDidCatch&&(null===fo||!fo.has(y)))){u.flags|=65536,t&=-t,u.lanes|=t,yn(u,Mi(u,a,t));break e}}u=u.return}while(null!==u)}Go(n)}catch(b){t=b,Qa===n&&null!==n&&(Qa=n=n.return);continue}break}}function Do(){var e=Va.current;return Va.current=fi,null===e?fi:e}function Lo(){0!==$a&&3!==$a&&2!==$a||($a=4),null===Ya||0===(268435455&to)&&0===(268435455&no)||Co(Ya,Ja)}function Oo(e,t){var n=Xa;Xa|=2;var r=Do();for(Ya===e&&Ja===t||No(e,t);;)try{Fo();break}catch(i){Io(e,i)}if(on(),Xa=n,Va.current=r,null!==Qa)throw Error(o(261));return Ya=null,Ja=0,$a}function Fo(){for(;null!==Qa;)zo(Qa)}function Uo(){for(;null!==Qa&&!Lt();)zo(Qa)}function zo(e){var t=lo(e.alternate,e,Ka);e.memoizedProps=e.pendingProps,null===t?Go(e):Qa=t,ja.current=null}function Go(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Ii(n,t,Ka)))return void(Qa=n)}else{if(null!==(n=aa(n,t)))return n.flags&=32767,void(Qa=n);if(null===e)return $a=6,void(Qa=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Qa=t);Qa=t=e}while(null!==t);0===$a&&($a=5)}function qo(e,t){var n=Pt,r=Wa.transition;try{Wa.transition=null,Pt=1,function(e,t,n){do{Ho()}while(null!==Ao);if(0!==(6&Xa))throw Error(o(327));var r=e.finishedWork,i=e.finishedLanes;if(null===r)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0;var a=r.lanes|r.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-bt(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,a),e===Ya&&(Qa=Ya=null,Ja=0),0===(2064&r.subtreeFlags)&&0===(2064&r.flags)||po||(po=!0,Jo(Gt,(function(){return Ho(),null}))),a=0!==(15990&r.flags),0!==(15990&r.subtreeFlags)||a){a=Wa.transition,Wa.transition=null;var s=Pt;Pt=1;var u=Xa;Xa|=4,ja.current=null,function(e,t){for(L(e.containerInfo),la=t;null!==la;)if(t=(e=la).child,0!==(1028&e.subtreeFlags)&&null!==t)t.return=e,la=t;else for(;null!==la;){e=la;try{var n=e.alternate;if(0!==(1024&e.flags))switch(e.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==n){var r=n.memoizedProps,i=n.memoizedState,a=e.stateNode,s=a.getSnapshotBeforeUpdate(e.elementType===e.type?r:en(e.type,r),i);a.__reactInternalSnapshotBeforeUpdate=s}break;case 3:Y&&Me(e.stateNode.containerInfo);break;default:throw Error(o(163))}}catch(u){jo(e,e.return,u)}if(null!==(t=e.sibling)){t.return=e.return,la=t;break}la=e.return}n=da,da=!1}(e,r),function(e,t){for(la=t;null!==la;){var n=(t=la).deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var a=e;Y?Sa(a,i,t):ma(a,i,t);var o=i.alternate;null!==o&&(o.return=null),i.return=null}catch(x){jo(i,t,x)}}if(n=t.child,0!==(12854&t.subtreeFlags)&&null!==n)n.return=t,la=n;else for(;null!==la;){t=la;try{var s=t.flags;if(32&s&&Y&&be(t.stateNode),512&s){var u=t.alternate;if(null!==u){var l=u.ref;null!==l&&("function"===typeof l?l(null):l.current=null)}}if(8192&s)switch(t.tag){case 13:if(null!==t.memoizedState){var c=t.alternate;null!==c&&null!==c.memoizedState||(oo=Ft())}break;case 22:var h=null!==t.memoizedState,d=t.alternate,f=null!==d&&null!==d.memoizedState;if(n=t,Y)e:if(r=n,i=h,a=null,Y)for(var p=r;;){if(5===p.tag){if(null===a){a=p;var A=p.stateNode;i?xe(A):we(p.stateNode,p.memoizedProps)}}else if(6===p.tag){if(null===a){var v=p.stateNode;i?_e(v):Se(v,p.memoizedProps)}}else if((22!==p.tag&&23!==p.tag||null===p.memoizedState||p===r)&&null!==p.child){p.child.return=p,p=p.child;continue}if(p===r)break;for(;null===p.sibling;){if(null===p.return||p.return===r)break e;a===p&&(a=null),p=p.return}a===p&&(a=null),p.sibling.return=p.return,p=p.sibling}if(h&&!f&&0!==(1&n.mode)){la=n;for(var m=n.child;null!==m;){for(n=la=m;null!==la;){var g=(r=la).child;switch(r.tag){case 0:case 11:case 14:case 15:fa(4,r,r.return);break;case 1:ca(r,r.return);var y=r.stateNode;if("function"===typeof y.componentWillUnmount){var b=r.return;try{y.props=r.memoizedProps,y.state=r.memoizedState,y.componentWillUnmount()}catch(x){jo(r,b,x)}}break;case 5:ca(r,r.return);break;case 22:if(null!==r.memoizedState){Ra(n);continue}}null!==g?(g.return=r,la=g):Ra(n)}m=m.sibling}}}switch(4102&s){case 2:xa(t),t.flags&=-3;break;case 6:xa(t),t.flags&=-3,Ma(t.alternate,t);break;case 4096:t.flags&=-4097;break;case 4100:t.flags&=-4097,Ma(t.alternate,t);break;case 4:Ma(t.alternate,t)}}catch(x){jo(t,t.return,x)}if(null!==(n=t.sibling)){n.return=t.return,la=n;break}la=t.return}}}(e,r),O(e.containerInfo),e.current=r,Ta(r,e,i),Ot(),Xa=u,Pt=s,Wa.transition=a}else e.current=r;if(po&&(po=!1,Ao=e,vo=i),a=e.pendingLanes,0===a&&(fo=null),function(e){if(Vt&&"function"===typeof Vt.onCommitFiberRoot)try{Vt.onCommitFiberRoot(Ht,e,void 0,128===(128&e.current.flags))}catch(t){}}(r.stateNode),Mo(e,Ft()),null!==t)for(n=e.onRecoverableError,r=0;r<t.length;r++)n(t[r]);if(co)throw co=!1,e=ho,ho=null,e;0!==(1&vo)&&0!==e.tag&&Ho(),a=e.pendingLanes,0!==(1&a)?e===go?mo++:(mo=0,go=e):mo=0,Jt()}(e,t,n)}finally{Wa.transition=r,Pt=n}return null}function Ho(){if(null!==Ao){var e=Nt(vo),t=Wa.transition,n=Pt;try{if(Wa.transition=null,Pt=16>e?16:e,null===Ao)var r=!1;else{if(e=Ao,Ao=null,vo=0,0!==(6&Xa))throw Error(o(331));var i=Xa;for(Xa|=4,la=e.current;null!==la;){var a=la,s=a.child;if(0!==(16&la.flags)){var u=a.deletions;if(null!==u){for(var l=0;l<u.length;l++){var c=u[l];for(la=c;null!==la;){var h=la;switch(h.tag){case 0:case 11:case 15:fa(8,h,a)}var d=h.child;if(null!==d)d.return=h,la=d;else for(;null!==la;){var f=(h=la).sibling,p=h.return;if(ga(h),h===c){la=null;break}if(null!==f){f.return=p,la=f;break}la=p}}}var A=a.alternate;if(null!==A){var v=A.child;if(null!==v){A.child=null;do{var m=v.sibling;v.sibling=null,v=m}while(null!==v)}}la=a}}if(0!==(2064&a.subtreeFlags)&&null!==s)s.return=a,la=s;else e:for(;null!==la;){if(0!==(2048&(a=la).flags))switch(a.tag){case 0:case 11:case 15:fa(9,a,a.return)}var g=a.sibling;if(null!==g){g.return=a.return,la=g;break e}la=a.return}}var y=e.current;for(la=y;null!==la;){var b=(s=la).child;if(0!==(2064&s.subtreeFlags)&&null!==b)b.return=s,la=b;else e:for(s=y;null!==la;){if(0!==(2048&(u=la).flags))try{switch(u.tag){case 0:case 11:case 15:pa(9,u)}}catch(_){jo(u,u.return,_)}if(u===s){la=null;break e}var x=u.sibling;if(null!==x){x.return=u.return,la=x;break e}la=u.return}}if(Xa=i,Jt(),Vt&&"function"===typeof Vt.onPostCommitFiberRoot)try{Vt.onPostCommitFiberRoot(Ht,e)}catch(_){}r=!0}return r}finally{Pt=n,Wa.transition=t}}return!1}function Vo(e,t,n){mn(e,t=Si(0,t=mi(n,t),1)),t=xo(),null!==(e=So(e,1))&&(Rt(e,1,t),Mo(e,t))}function jo(e,t,n){if(3===e.tag)Vo(e,e,n);else for(;null!==t;){if(3===t.tag){Vo(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===fo||!fo.has(r))){mn(t,e=Mi(t,e=mi(n,e),1)),e=xo(),null!==(t=So(t,1))&&(Rt(t,1,e),Mo(t,e));break}}t=t.return}}function Wo(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=xo(),e.pingedLanes|=e.suspendedLanes&n,Ya===e&&(Ja&n)===n&&(4===$a||3===$a&&(130023424&Ja)===Ja&&500>Ft()-oo?No(e,0):ro|=n),Mo(e,t)}function Xo(e,t){0===t&&(0===(1&e.mode)?t=1:(t=St,0===(130023424&(St<<=1))&&(St=4194304)));var n=xo();null!==(e=So(e,t))&&(Rt(e,t,n),Mo(e,n))}function Yo(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Xo(e,n)}function Qo(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(o(314))}null!==r&&r.delete(t),Xo(e,n)}function Jo(e,t){return It(e,t)}function Ko(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Zo(e,t,n,r){return new Ko(e,t,n,r)}function $o(e){return!(!(e=e.prototype)||!e.isReactComponent)}function es(e,t){var n=e.alternate;return null===n?((n=Zo(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function ts(e,t,n,r,i,a){var s=2;if(r=e,"function"===typeof e)$o(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case c:return ns(n.children,i,a,t);case h:s=8,i|=8;break;case d:return(e=Zo(12,n,t,2|i)).elementType=d,e.lanes=a,e;case v:return(e=Zo(13,n,t,i)).elementType=v,e.lanes=a,e;case m:return(e=Zo(19,n,t,i)).elementType=m,e.lanes=a,e;case b:return rs(n,i,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case f:s=10;break e;case p:s=9;break e;case A:s=11;break e;case g:s=14;break e;case y:s=16,r=null;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Zo(s,n,t,i)).elementType=e,t.type=r,t.lanes=a,t}function ns(e,t,n,r){return(e=Zo(7,e,r,t)).lanes=n,e}function rs(e,t,n,r){return(e=Zo(22,e,r,t)).elementType=b,e.lanes=n,e.stateNode={},e}function is(e,t,n){return(e=Zo(6,e,null,t)).lanes=n,e}function as(e,t,n){return(t=Zo(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function os(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=W,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ct(0),this.expirationTimes=Ct(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ct(0),this.identifierPrefix=r,this.onRecoverableError=i,J&&(this.mutableSourceEagerHydrationData=null)}function ss(e,t,n,r,i,a,o,s,u){return e=new os(e,t,n,s,u),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Zo(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null},pn(a),e}function us(e){if(!e)return lt;e:{if(M(e=e._reactInternals)!==e||1!==e.tag)throw Error(o(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(pt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(o(171))}if(1===e.tag){var n=e.type;if(pt(n))return mt(e,n,t)}return t}function ls(e){var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return null===(e=E(t))?null:e.stateNode}function cs(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function hs(e,t){cs(e,t),(e=e.alternate)&&cs(e,t)}function ds(e){return null===(e=E(e))?null:e.stateNode}function fs(){return null}return lo=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||ht.current)Li=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return Li=!1,function(e,t,n){switch(t.tag){case 3:Wi(t),$n();break;case 5:pr(t);break;case 1:pt(t.type)&&gt(t);break;case 4:dr(t,t.stateNode.containerInfo);break;case 10:sn(0,t.type._context,t.memoizedProps.value);break;case 13:var r=t.memoizedState;if(null!==r)return null!==r.dehydrated?(ut(vr,1&vr.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Ji(e,t,n):(ut(vr,1&vr.current),null!==(e=ia(e,t,n))?e.sibling:null);ut(vr,1&vr.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return ra(e,t,n);t.flags|=128}var i=t.memoizedState;if(null!==i&&(i.rendering=null,i.tail=null,i.lastEffect=null),ut(vr,vr.current),r)break;return null;case 22:case 23:return t.lanes=0,Gi(e,t,n)}return ia(e,t,n)}(e,t,n);Li=0!==(131072&e.flags)}else Li=!1,Vn&&0!==(1048576&t.flags)&&Un(t,Pn,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps;var i=ft(t,ct.current);cn(t,n),i=Pr(null,t,r,e,i,n);var a=Nr();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,pt(r)?(a=!0,gt(t)):a=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,pn(t),i.updater=Sn,t.stateNode=i,i._reactInternals=t,En(t,r,e,n),t=ji(null,t,r,!0,a,n)):(t.tag=0,Vn&&a&&zn(t),Oi(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return $o(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===A)return 11;if(e===g)return 14}return 2}(r),e=en(r,e),i){case 0:t=Hi(null,t,r,e,n);break e;case 1:t=Vi(null,t,r,e,n);break e;case 11:t=Fi(null,t,r,e,n);break e;case 14:t=Ui(null,t,r,en(r.type,e),n);break e}throw Error(o(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Hi(e,t,r,i=t.elementType===r?i:en(r,i),n);case 1:return r=t.type,i=t.pendingProps,Vi(e,t,r,i=t.elementType===r?i:en(r,i),n);case 3:e:{if(Wi(t),null===e)throw Error(o(387));r=t.pendingProps,i=(a=t.memoizedState).element,An(e,t),bn(t,r,null,n);var s=t.memoizedState;if(r=s.element,J&&a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:s.cache,transitions:s.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Xi(e,t,r,n,i=Error(o(423)));break e}if(r!==i){t=Xi(e,t,r,n,i=Error(o(424)));break e}for(J&&(Hn=Ge(t.stateNode.containerInfo),qn=t,Vn=!0,Wn=null,jn=!1),n=or(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if($n(),r===i){t=ia(e,t,n);break e}Oi(e,t,r,n)}t=t.child}return t;case 5:return pr(t),null===e&&Jn(t),r=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,s=i.children,q(r,i)?s=null:null!==a&&q(r,a)&&(t.flags|=32),qi(e,t),Oi(e,t,s,n),t.child;case 6:return null===e&&Jn(t),null;case 13:return Ji(e,t,n);case 4:return dr(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=ar(t,null,r,n):Oi(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Fi(e,t,r,i=t.elementType===r?i:en(r,i),n);case 7:return Oi(e,t,t.pendingProps,n),t.child;case 8:case 12:return Oi(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,a=t.memoizedProps,sn(0,r,s=i.value),null!==a)if(jt(a.value,s)){if(a.children===i.children&&!ht.current){t=ia(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var u=a.dependencies;if(null!==u){s=a.child;for(var l=u.firstContext;null!==l;){if(l.context===r){if(1===a.tag){(l=vn(-1,n&-n)).tag=2;var c=a.updateQueue;if(null!==c){var h=(c=c.shared).pending;null===h?l.next=l:(l.next=h.next,h.next=l),c.pending=l}}a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),ln(a.return,n,t),u.lanes|=n;break}l=l.next}}else if(10===a.tag)s=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(s=a.return))throw Error(o(341));s.lanes|=n,null!==(u=s.alternate)&&(u.lanes|=n),ln(s,n,t),s=a.sibling}else s=a.child;if(null!==s)s.return=a;else for(s=a;null!==s;){if(s===t){s=null;break}if(null!==(a=s.sibling)){a.return=s.return,s=a;break}s=s.return}a=s}Oi(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,cn(t,n),r=r(i=hn(i)),t.flags|=1,Oi(e,t,r,n),t.child;case 14:return i=en(r=t.type,t.pendingProps),Ui(e,t,r,i=en(r.type,i),n);case 15:return zi(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:en(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,pt(r)?(e=!0,gt(t)):e=!1,cn(t,n),kn(t,r,i),En(t,r,i,n),ji(null,t,r,!0,e,n);case 19:return ra(e,t,n);case 22:return Gi(e,t,n)}throw Error(o(156,t.tag))},t.attemptContinuousHydration=function(e){13===e.tag&&(wo(e,134217728,xo()),hs(e,134217728))},t.attemptHydrationAtCurrentPriority=function(e){if(13===e.tag){var t=xo(),n=_o(e);wo(e,n,t),hs(e,n)}},t.attemptSynchronousHydration=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Mt(t.pendingLanes);0!==n&&(Bt(t,1|n),Mo(t,Ft()),0===(6&Xa)&&(uo(),Jt()))}break;case 13:var r=xo();Bo((function(){return wo(e,1,r)})),hs(e,1)}},t.batchedUpdates=function(e,t){var n=Xa;Xa|=1;try{return e(t)}finally{0===(Xa=n)&&(uo(),Xt&&Jt())}},t.createComponentSelector=function(e){return{$$typeof:Pa,value:e}},t.createContainer=function(e,t,n,r,i,a,o){return ss(e,t,!1,null,0,r,0,a,o)},t.createHasPseudoClassSelector=function(e){return{$$typeof:Na,value:e}},t.createHydrationContainer=function(e,t,n,r,i,a,o,s,u){return(e=ss(n,r,!0,e,0,a,0,s,u)).context=us(null),n=e.current,(a=vn(r=xo(),i=_o(n))).callback=void 0!==t&&null!==t?t:null,mn(n,a),e.current.lanes=i,Rt(e,i,r),Mo(e,r),e},t.createPortal=function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:l,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}},t.createRoleSelector=function(e){return{$$typeof:Ia,value:e}},t.createTestNameSelector=function(e){return{$$typeof:Da,value:e}},t.createTextSelector=function(e){return{$$typeof:La,value:e}},t.deferredUpdates=function(e){var t=Pt,n=Wa.transition;try{return Wa.transition=null,Pt=16,e()}finally{Pt=t,Wa.transition=n}},t.discreteUpdates=function(e,t,n,r,i){var a=Pt,o=Wa.transition;try{return Wa.transition=null,Pt=1,e(t,n,r,i)}finally{Pt=a,Wa.transition=o,0===Xa&&uo()}},t.findAllNodes=qa,t.findBoundingRects=function(e,t){if(!re)throw Error(o(363));t=qa(e,t),e=[];for(var n=0;n<t.length;n++)e.push(ae(t[n]));for(t=e.length-1;0<t;t--)for(var r=(n=e[t]).x,i=r+n.width,a=n.y,s=a+n.height,u=t-1;0<=u;u--)if(t!==u){var l=e[u],c=l.x,h=c+l.width,d=l.y,f=d+l.height;if(r>=c&&a>=d&&i<=h&&s<=f){e.splice(t,1);break}if(!(r!==c||n.width!==l.width||f<a||d>s)){d>a&&(l.height+=d-a,l.y=a),f<s&&(l.height=s-d),e.splice(t,1);break}if(!(a!==d||n.height!==l.height||h<r||c>i)){c>r&&(l.width+=c-r,l.x=r),h<i&&(l.width=i-c),e.splice(t,1);break}}return e},t.findHostInstance=ls,t.findHostInstanceWithNoPortals=function(e){return null===(e=null!==(e=T(e))?R(e):null)?null:e.stateNode},t.findHostInstanceWithWarning=function(e){return ls(e)},t.flushControlled=function(e){var t=Xa;Xa|=1;var n=Wa.transition,r=Pt;try{Wa.transition=null,Pt=1,e()}finally{Pt=r,Wa.transition=n,0===(Xa=t)&&(uo(),Jt())}},t.flushPassiveEffects=Ho,t.flushSync=Bo,t.focusWithin=function(e,t){if(!re)throw Error(o(363));for(t=Ga(e=Fa(e),t),t=Array.from(t),e=0;e<t.length;){var n=t[e++];if(!se(n)){if(5===n.tag&&le(n.stateNode))return!0;for(n=n.child;null!==n;)t.push(n),n=n.sibling}}return!1},t.getCurrentUpdatePriority=function(){return Pt},t.getFindAllNodesFailureDescription=function(e,t){if(!re)throw Error(o(363));var n=0,r=[];e=[Fa(e),0];for(var i=0;i<e.length;){var a=e[i++],s=e[i++],u=t[s];if((5!==a.tag||!se(a))&&(Ua(a,u)&&(r.push(za(u)),++s>n&&(n=s)),s<t.length))for(a=a.child;null!==a;)e.push(a,s),a=a.sibling}if(n<t.length){for(e=[];n<t.length;n++)e.push(za(t[n]));return"findAllNodes was able to match part of the selector:\n  "+r.join(" > ")+"\n\nNo matching component was found for:\n  "+e.join(" > ")}return null},t.getPublicRootInstance=function(e){return(e=e.current).child?5===e.child.tag?N(e.child.stateNode):e.child.stateNode:null},t.injectIntoDevTools=function(e){if(e={bundleType:e.bundleType,version:e.version,rendererPackageName:e.rendererPackageName,rendererConfig:e.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:s.ReactCurrentDispatcher,findHostInstanceByFiber:ds,findFiberByHostInstance:e.findFiberByHostInstance||fs,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},"undefined"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)e=!1;else{var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)e=!0;else{try{Ht=t.inject(e),Vt=t}catch(n){}e=!!t.checkDCE}}return e},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(e,t,n,r){if(!re)throw Error(o(363));e=qa(e,t);var i=ce(e,n,r).disconnect;return{disconnect:function(){i()}}},t.registerMutableSourceForHydration=function(e,t){var n=t._getVersion;n=n(t._source),null==e.mutableSourceEagerHydrationData?e.mutableSourceEagerHydrationData=[t,n]:e.mutableSourceEagerHydrationData.push(t,n)},t.runWithPriority=function(e,t){var n=Pt;try{return Pt=e,t()}finally{Pt=n}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(e,t,n,r){var i=t.current,a=xo(),o=_o(i);return n=us(n),null===t.context?t.context=n:t.pendingContext=n,(t=vn(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),mn(i,t),null!==(e=wo(i,o,a))&&gn(e,i,o),o},t}},4585:function(e,t,n){"use strict";e.exports=n(4976)},258:function(e,t,n){"use strict";e.exports=n(3721)},5783:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var s=2*(r+1)-1,u=e[s],l=s+1,c=e[l];if(0>a(u,n))l<i&&0>a(c,u)?(e[r]=c,e[l]=n,r=l):(e[r]=u,e[s]=n,r=s);else{if(!(l<i&&0>a(c,n)))break e;e[r]=c,e[l]=n,r=l}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,u=s.now();t.unstable_now=function(){return s.now()-u}}var l=[],c=[],h=1,d=null,f=3,p=!1,A=!1,v=!1,m="function"===typeof setTimeout?setTimeout:null,g="function"===typeof clearTimeout?clearTimeout:null,y="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(c);null!==t;){if(null===t.callback)i(c);else{if(!(t.startTime<=e))break;i(c),t.sortIndex=t.expirationTime,n(l,t)}t=r(c)}}function x(e){if(v=!1,b(e),!A)if(null!==r(l))A=!0,N(_);else{var t=r(c);null!==t&&I(x,t.startTime-e)}}function _(e,n){A=!1,v&&(v=!1,g(k),k=-1),p=!0;var a=f;try{for(b(n),d=r(l);null!==d&&(!(d.expirationTime>n)||e&&!C());){var o=d.callback;if("function"===typeof o){d.callback=null,f=d.priorityLevel;var s=o(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?d.callback=s:d===r(l)&&i(l),b(n)}else i(l);d=r(l)}if(null!==d)var u=!0;else{var h=r(c);null!==h&&I(x,h.startTime-n),u=!1}return u}finally{d=null,f=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var w,S=!1,M=null,k=-1,T=5,E=-1;function C(){return!(t.unstable_now()-E<T)}function R(){if(null!==M){var e=t.unstable_now();E=e;var n=!0;try{n=M(!0,e)}finally{n?w():(S=!1,M=null)}}else S=!1}if("function"===typeof y)w=function(){y(R)};else if("undefined"!==typeof MessageChannel){var B=new MessageChannel,P=B.port2;B.port1.onmessage=R,w=function(){P.postMessage(null)}}else w=function(){m(R,0)};function N(e){M=e,S||(S=!0,w())}function I(e,n){k=m((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){A||p||(A=!0,N(_))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:a,expirationTime:s=a+s,sortIndex:-1},a>o?(e.sortIndex=a,n(c,e),null===r(l)&&e===r(c)&&(v?(g(k),k=-1):v=!0,I(x,a-o))):(e.sortIndex=s,n(l,e),A||p||(A=!0,N(_))),e},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},3100:function(e,t,n){"use strict";e.exports=n(5783)},2592:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=o(n(2791)),a=o(n(7585));function o(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var l=function(e){function t(){return s(this,t),u(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"render",value:function(){return i.default.createElement("button",this.props,this.props.children)}}]),t}(i.default.Component);t.default=(0,a.default)(l)},5532:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=u(n(2791)),o=u(n(671)),s=u(n(2007));function u(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var h=function(e){function t(){return l(this,t),c(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"render",value:function(){var e=this,t=r({},this.props);return delete t.name,t.parentBindings&&delete t.parentBindings,a.default.createElement("div",r({},t,{ref:function(t){e.props.parentBindings.domNode=t}}),this.props.children)}}]),t}(a.default.Component);h.propTypes={name:s.default.string,id:s.default.string},t.default=(0,o.default)(h)},4582:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(2791)),i=a(n(7585));function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var u=function(e){function t(){var e,n,i;o(this,t);for(var a=arguments.length,u=Array(a),l=0;l<a;l++)u[l]=arguments[l];return n=i=s(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),i.render=function(){return r.default.createElement("a",i.props,i.props.children)},s(i,n)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(r.default.Component);t.default=(0,i.default)(u)},5667:function(e,t,n){"use strict";t.rU=void 0;var r=f(n(4582)),i=f(n(2592)),a=f(n(5532)),o=f(n(2338)),s=f(n(979)),u=f(n(3688)),l=f(n(4102)),c=f(n(7585)),h=f(n(671)),d=f(n(719));function f(e){return e&&e.__esModule?e:{default:e}}t.rU=r.default,i.default,a.default,o.default,s.default,u.default,l.default,c.default,h.default,d.default,r.default,i.default,a.default,o.default,s.default,u.default,l.default,c.default,h.default,d.default},719:function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function s(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u=n(2791),l=(n(4164),n(5183),n(3688)),c=n(2338),h=n(2007),d=n(5203),f={to:h.string.isRequired,containerId:h.string,container:h.object,activeClass:h.string,spy:h.bool,smooth:h.oneOfType([h.bool,h.string]),offset:h.number,delay:h.number,isDynamic:h.bool,onClick:h.func,duration:h.oneOfType([h.number,h.func]),absolute:h.bool,onSetActive:h.func,onSetInactive:h.func,ignoreCancelEvents:h.bool,hashSpy:h.bool,spyThrottle:h.number},p={Scroll:function(e,t){console.warn("Helpers.Scroll is deprecated since v1.7.0");var n=t||c,h=function(t){function c(e){a(this,c);var t=o(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,e));return p.call(t),t.state={active:!1},t}return s(c,t),i(c,[{key:"getScrollSpyContainer",value:function(){var e=this.props.containerId,t=this.props.container;return e?document.getElementById(e):t&&t.nodeType?t:document}},{key:"componentDidMount",value:function(){if(this.props.spy||this.props.hashSpy){var e=this.getScrollSpyContainer();l.isMounted(e)||l.mount(e,this.props.spyThrottle),this.props.hashSpy&&(d.isMounted()||d.mount(n),d.mapContainer(this.props.to,e)),this.props.spy&&l.addStateHandler(this.stateHandler),l.addSpyHandler(this.spyHandler,e),this.setState({container:e})}}},{key:"componentWillUnmount",value:function(){l.unmount(this.stateHandler,this.spyHandler)}},{key:"render",value:function(){var t="";t=this.state&&this.state.active?((this.props.className||"")+" "+(this.props.activeClass||"active")).trim():this.props.className;var n=r({},this.props);for(var i in f)n.hasOwnProperty(i)&&delete n[i];return n.className=t,n.onClick=this.handleClick,u.createElement(e,n)}}]),c}(u.Component),p=function(){var e=this;this.scrollTo=function(t,i){n.scrollTo(t,r({},e.state,i))},this.handleClick=function(t){e.props.onClick&&e.props.onClick(t),t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),e.scrollTo(e.props.to,e.props)},this.stateHandler=function(){n.getActiveLink()!==e.props.to&&(null!==e.state&&e.state.active&&e.props.onSetInactive&&e.props.onSetInactive(),e.setState({active:!1}))},this.spyHandler=function(t){var r=e.getScrollSpyContainer();if(!d.isMounted()||d.isInitialized()){var i=e.props.to,a=null,o=0,s=0,u=0;if(r.getBoundingClientRect)u=r.getBoundingClientRect().top;if(!a||e.props.isDynamic){if(!(a=n.get(i)))return;var c=a.getBoundingClientRect();s=(o=c.top-u+t)+c.height}var h=t-e.props.offset,f=h>=Math.floor(o)&&h<Math.floor(s),p=h<Math.floor(o)||h>=Math.floor(s),A=n.getActiveLink();return p?(i===A&&n.setActiveLink(void 0),e.props.hashSpy&&d.getHash()===i&&d.changeHash(),e.props.spy&&e.state.active&&(e.setState({active:!1}),e.props.onSetInactive&&e.props.onSetInactive()),l.updateStates()):f&&A!==i?(n.setActiveLink(i),e.props.hashSpy&&d.changeHash(i),e.props.spy&&(e.setState({active:!0}),e.props.onSetActive&&e.props.onSetActive(i)),l.updateStates()):void 0}}};return h.propTypes=f,h.defaultProps={offset:0},h},Element:function(e){console.warn("Helpers.Element is deprecated since v1.7.0");var t=function(t){function n(e){a(this,n);var t=o(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.childBindings={domNode:null},t}return s(n,t),i(n,[{key:"componentDidMount",value:function(){if("undefined"===typeof window)return!1;this.registerElems(this.props.name)}},{key:"componentDidUpdate",value:function(e){this.props.name!==e.name&&this.registerElems(this.props.name)}},{key:"componentWillUnmount",value:function(){if("undefined"===typeof window)return!1;c.unregister(this.props.name)}},{key:"registerElems",value:function(e){c.register(e,this.childBindings.domNode)}},{key:"render",value:function(){return u.createElement(e,r({},this.props,{parentBindings:this.childBindings}))}}]),n}(u.Component);return t.propTypes={name:h.string,id:h.string},t}};e.exports=p},4102:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=(s(n(5183)),s(n(3987))),a=s(n(8616)),o=s(n(979));function s(e){return e&&e.__esModule?e:{default:e}}var u=function(e){return i.default[e.smooth]||i.default.defaultEasing},l=function(){if("undefined"!==typeof window)return window.requestAnimationFrame||window.webkitRequestAnimationFrame}()||function(e,t,n){window.setTimeout(e,n||1e3/60,(new Date).getTime())},c=function(e){var t=e.data.containerElement;if(t&&t!==document&&t!==document.body)return t.scrollLeft;var n=void 0!==window.pageXOffset,r="CSS1Compat"===(document.compatMode||"");return n?window.pageXOffset:r?document.documentElement.scrollLeft:document.body.scrollLeft},h=function(e){var t=e.data.containerElement;if(t&&t!==document&&t!==document.body)return t.scrollTop;var n=void 0!==window.pageXOffset,r="CSS1Compat"===(document.compatMode||"");return n?window.pageYOffset:r?document.documentElement.scrollTop:document.body.scrollTop},d=function e(t,n,r){var i=n.data;if(n.ignoreCancelEvents||!i.cancel)if(i.delta=Math.round(i.targetPosition-i.startPosition),null===i.start&&(i.start=r),i.progress=r-i.start,i.percent=i.progress>=i.duration?1:t(i.progress/i.duration),i.currentPosition=i.startPosition+Math.ceil(i.delta*i.percent),i.containerElement&&i.containerElement!==document&&i.containerElement!==document.body?n.horizontal?i.containerElement.scrollLeft=i.currentPosition:i.containerElement.scrollTop=i.currentPosition:n.horizontal?window.scrollTo(i.currentPosition,0):window.scrollTo(0,i.currentPosition),i.percent<1){var a=e.bind(null,t,n);l.call(window,a)}else o.default.registered.end&&o.default.registered.end(i.to,i.target,i.currentPosition);else o.default.registered.end&&o.default.registered.end(i.to,i.target,i.currentPositionY)},f=function(e){e.data.containerElement=e?e.containerId?document.getElementById(e.containerId):e.container&&e.container.nodeType?e.container:document:null},p=function(e,t,n,r){t.data=t.data||{currentPosition:0,startPosition:0,targetPosition:0,progress:0,duration:0,cancel:!1,target:null,containerElement:null,to:null,start:null,delta:null,percent:null,delayTimeout:null},window.clearTimeout(t.data.delayTimeout);if(a.default.subscribe((function(){t.data.cancel=!0})),f(t),t.data.start=null,t.data.cancel=!1,t.data.startPosition=t.horizontal?c(t):h(t),t.data.targetPosition=t.absolute?e:e+t.data.startPosition,t.data.startPosition!==t.data.targetPosition){var i;t.data.delta=Math.round(t.data.targetPosition-t.data.startPosition),t.data.duration=("function"===typeof(i=t.duration)?i:function(){return i})(t.data.delta),t.data.duration=isNaN(parseFloat(t.data.duration))?1e3:parseFloat(t.data.duration),t.data.to=n,t.data.target=r;var s=u(t),p=d.bind(null,s,t);t&&t.delay>0?t.data.delayTimeout=window.setTimeout((function(){o.default.registered.begin&&o.default.registered.begin(t.data.to,t.data.target),l.call(window,p)}),t.delay):(o.default.registered.begin&&o.default.registered.begin(t.data.to,t.data.target),l.call(window,p))}else o.default.registered.end&&o.default.registered.end(t.data.to,t.data.target,t.data.currentPosition)},A=function(e){return(e=r({},e)).data=e.data||{currentPosition:0,startPosition:0,targetPosition:0,progress:0,duration:0,cancel:!1,target:null,containerElement:null,to:null,start:null,delta:null,percent:null,delayTimeout:null},e.absolute=!0,e};t.default={animateTopScroll:p,getAnimationType:u,scrollToTop:function(e){p(0,A(e))},scrollToBottom:function(e){e=A(e),f(e),p(e.horizontal?function(e){var t=e.data.containerElement;if(t&&t!==document&&t!==document.body)return t.scrollWidth-t.offsetWidth;var n=document.body,r=document.documentElement;return Math.max(n.scrollWidth,n.offsetWidth,r.clientWidth,r.scrollWidth,r.offsetWidth)}(e):function(e){var t=e.data.containerElement;if(t&&t!==document&&t!==document.body)return t.scrollHeight-t.offsetHeight;var n=document.body,r=document.documentElement;return Math.max(n.scrollHeight,n.offsetHeight,r.clientHeight,r.scrollHeight,r.offsetHeight)}(e),e)},scrollTo:function(e,t){p(e,A(t))},scrollMore:function(e,t){t=A(t),f(t);var n=t.horizontal?c(t):h(t);p(e+n,t)}}},8616:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(4360),i=["mousedown","mousewheel","touchmove","keydown"];t.default={subscribe:function(e){return"undefined"!==typeof document&&i.forEach((function(t){return(0,r.addPassiveEventListener)(document,t,e)}))}}},4360:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.addPassiveEventListener=function(e,t,r){var i=r.name;i||(i=t,console.warn("Listener must be a named function.")),n.has(t)||n.set(t,new Set);var a=n.get(t);if(!a.has(i)){var o=function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("test",null,t)}catch(n){}return e}();e.addEventListener(t,r,!!o&&{passive:!0}),a.add(i)}},t.removePassiveEventListener=function(e,t,r){e.removeEventListener(t,r),n.get(t).delete(r.name||t)};var n=new Map},671:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=u(n(2791)),o=(u(n(4164)),u(n(2338))),s=u(n(2007));function u(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){var t=function(t){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.childBindings={domNode:null},t}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,t),i(n,[{key:"componentDidMount",value:function(){if("undefined"===typeof window)return!1;this.registerElems(this.props.name)}},{key:"componentDidUpdate",value:function(e){this.props.name!==e.name&&this.registerElems(this.props.name)}},{key:"componentWillUnmount",value:function(){if("undefined"===typeof window)return!1;o.default.unregister(this.props.name)}},{key:"registerElems",value:function(e){o.default.register(e,this.childBindings.domNode)}},{key:"render",value:function(){return a.default.createElement(e,r({},this.props,{parentBindings:this.childBindings}))}}]),n}(a.default.Component);return t.propTypes={name:s.default.string,id:s.default.string},t}},979:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={registered:{},scrollEvent:{register:function(e,t){n.registered[e]=t},remove:function(e){n.registered[e]=null}}};t.default=n},5203:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});n(4360);var r,i=n(5183),a=(r=i)&&r.__esModule?r:{default:r};var o={mountFlag:!1,initialized:!1,scroller:null,containers:{},mount:function(e){this.scroller=e,this.handleHashChange=this.handleHashChange.bind(this),window.addEventListener("hashchange",this.handleHashChange),this.initStateFromHash(),this.mountFlag=!0},mapContainer:function(e,t){this.containers[e]=t},isMounted:function(){return this.mountFlag},isInitialized:function(){return this.initialized},initStateFromHash:function(){var e=this,t=this.getHash();t?window.setTimeout((function(){e.scrollTo(t,!0),e.initialized=!0}),10):this.initialized=!0},scrollTo:function(e,t){var n=this.scroller;if(n.get(e)&&(t||e!==n.getActiveLink())){var r=this.containers[e]||document;n.scrollTo(e,{container:r})}},getHash:function(){return a.default.getHash()},changeHash:function(e,t){this.isInitialized()&&a.default.getHash()!==e&&a.default.updateHash(e,t)},handleHashChange:function(){this.scrollTo(this.getHash())},unmount:function(){this.scroller=null,this.containers=null,window.removeEventListener("hashchange",this.handleHashChange)}};t.default=o},7585:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=c(n(2791)),o=c(n(3688)),s=c(n(2338)),u=c(n(2007)),l=c(n(5203));function c(e){return e&&e.__esModule?e:{default:e}}var h={to:u.default.string.isRequired,containerId:u.default.string,container:u.default.object,activeClass:u.default.string,activeStyle:u.default.object,spy:u.default.bool,horizontal:u.default.bool,smooth:u.default.oneOfType([u.default.bool,u.default.string]),offset:u.default.number,delay:u.default.number,isDynamic:u.default.bool,onClick:u.default.func,duration:u.default.oneOfType([u.default.number,u.default.func]),absolute:u.default.bool,onSetActive:u.default.func,onSetInactive:u.default.func,ignoreCancelEvents:u.default.bool,hashSpy:u.default.bool,saveHashHistory:u.default.bool,spyThrottle:u.default.number};t.default=function(e,t){var n=t||s.default,u=function(t){function s(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,e));return c.call(t),t.state={active:!1},t}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(s,t),i(s,[{key:"getScrollSpyContainer",value:function(){var e=this.props.containerId,t=this.props.container;return e&&!t?document.getElementById(e):t&&t.nodeType?t:document}},{key:"componentDidMount",value:function(){if(this.props.spy||this.props.hashSpy){var e=this.getScrollSpyContainer();o.default.isMounted(e)||o.default.mount(e,this.props.spyThrottle),this.props.hashSpy&&(l.default.isMounted()||l.default.mount(n),l.default.mapContainer(this.props.to,e)),o.default.addSpyHandler(this.spyHandler,e),this.setState({container:e})}}},{key:"componentWillUnmount",value:function(){o.default.unmount(this.stateHandler,this.spyHandler)}},{key:"render",value:function(){var t="";t=this.state&&this.state.active?((this.props.className||"")+" "+(this.props.activeClass||"active")).trim():this.props.className;var n={};n=this.state&&this.state.active?r({},this.props.style,this.props.activeStyle):r({},this.props.style);var i=r({},this.props);for(var o in h)i.hasOwnProperty(o)&&delete i[o];return i.className=t,i.style=n,i.onClick=this.handleClick,a.default.createElement(e,i)}}]),s}(a.default.PureComponent),c=function(){var e=this;this.scrollTo=function(t,i){n.scrollTo(t,r({},e.state,i))},this.handleClick=function(t){e.props.onClick&&e.props.onClick(t),t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),e.scrollTo(e.props.to,e.props)},this.spyHandler=function(t,r){var i=e.getScrollSpyContainer();if(!l.default.isMounted()||l.default.isInitialized()){var a=e.props.horizontal,o=e.props.to,s=null,u=void 0,c=void 0;if(a){var h=0,d=0,f=0;if(i.getBoundingClientRect)f=i.getBoundingClientRect().left;if(!s||e.props.isDynamic){if(!(s=n.get(o)))return;var p=s.getBoundingClientRect();d=(h=p.left-f+t)+p.width}var A=t-e.props.offset;u=A>=Math.floor(h)&&A<Math.floor(d),c=A<Math.floor(h)||A>=Math.floor(d)}else{var v=0,m=0,g=0;if(i.getBoundingClientRect)g=i.getBoundingClientRect().top;if(!s||e.props.isDynamic){if(!(s=n.get(o)))return;var y=s.getBoundingClientRect();m=(v=y.top-g+r)+y.height}var b=r-e.props.offset;u=b>=Math.floor(v)&&b<Math.floor(m),c=b<Math.floor(v)||b>=Math.floor(m)}var x=n.getActiveLink();if(c){if(o===x&&n.setActiveLink(void 0),e.props.hashSpy&&l.default.getHash()===o){var _=e.props.saveHashHistory,w=void 0!==_&&_;l.default.changeHash("",w)}e.props.spy&&e.state.active&&(e.setState({active:!1}),e.props.onSetInactive&&e.props.onSetInactive(o,s))}if(u&&(x!==o||!1===e.state.active)){n.setActiveLink(o);var S=e.props.saveHashHistory,M=void 0!==S&&S;e.props.hashSpy&&l.default.changeHash(o,M),e.props.spy&&(e.setState({active:!0}),e.props.onSetActive&&e.props.onSetActive(o,s))}}}};return u.propTypes=h,u.defaultProps={offset:0},u}},3688:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(3881),a=(r=i)&&r.__esModule?r:{default:r},o=n(4360);var s={spyCallbacks:[],spySetState:[],scrollSpyContainers:[],mount:function(e,t){if(e){var n=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:66;return(0,a.default)(e,t)}((function(t){s.scrollHandler(e)}),t);s.scrollSpyContainers.push(e),(0,o.addPassiveEventListener)(e,"scroll",n)}},isMounted:function(e){return-1!==s.scrollSpyContainers.indexOf(e)},currentPositionX:function(e){if(e===document){var t=void 0!==window.pageYOffset,n="CSS1Compat"===(document.compatMode||"");return t?window.pageXOffset:n?document.documentElement.scrollLeft:document.body.scrollLeft}return e.scrollLeft},currentPositionY:function(e){if(e===document){var t=void 0!==window.pageXOffset,n="CSS1Compat"===(document.compatMode||"");return t?window.pageYOffset:n?document.documentElement.scrollTop:document.body.scrollTop}return e.scrollTop},scrollHandler:function(e){(s.scrollSpyContainers[s.scrollSpyContainers.indexOf(e)].spyCallbacks||[]).forEach((function(t){return t(s.currentPositionX(e),s.currentPositionY(e))}))},addStateHandler:function(e){s.spySetState.push(e)},addSpyHandler:function(e,t){var n=s.scrollSpyContainers[s.scrollSpyContainers.indexOf(t)];n.spyCallbacks||(n.spyCallbacks=[]),n.spyCallbacks.push(e),e(s.currentPositionX(t),s.currentPositionY(t))},updateStates:function(){s.spySetState.forEach((function(e){return e()}))},unmount:function(e,t){s.scrollSpyContainers.forEach((function(e){return e.spyCallbacks&&e.spyCallbacks.length&&e.spyCallbacks.indexOf(t)>-1&&e.spyCallbacks.splice(e.spyCallbacks.indexOf(t),1)})),s.spySetState&&s.spySetState.length&&s.spySetState.indexOf(e)>-1&&s.spySetState.splice(s.spySetState.indexOf(e),1),document.removeEventListener("scroll",s.scrollHandler)},update:function(){return s.scrollSpyContainers.forEach((function(e){return s.scrollHandler(e)}))}};t.default=s},2338:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=s(n(5183)),a=s(n(4102)),o=s(n(979));function s(e){return e&&e.__esModule?e:{default:e}}var u={},l=void 0;t.default={unmount:function(){u={}},register:function(e,t){u[e]=t},unregister:function(e){delete u[e]},get:function(e){return u[e]||document.getElementById(e)||document.getElementsByName(e)[0]||document.getElementsByClassName(e)[0]},setActiveLink:function(e){return l=e},getActiveLink:function(){return l},scrollTo:function(e,t){var n=this.get(e);if(n){var s=(t=r({},t,{absolute:!1})).containerId,u=t.container,l=void 0;l=s?document.getElementById(s):u&&u.nodeType?u:document,t.absolute=!0;var c=t.horizontal,h=i.default.scrollOffset(l,n,c)+(t.offset||0);if(!t.smooth)return o.default.registered.begin&&o.default.registered.begin(e,n),l===document?t.horizontal?window.scrollTo(h,0):window.scrollTo(0,h):l.scrollTop=h,void(o.default.registered.end&&o.default.registered.end(e,n));a.default.animateTopScroll(h,t,e,n)}else console.warn("target Element not found")}}},3987:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={defaultEasing:function(e){return e<.5?Math.pow(2*e,2)/2:1-Math.pow(2*(1-e),2)/2},linear:function(e){return e},easeInQuad:function(e){return e*e},easeOutQuad:function(e){return e*(2-e)},easeInOutQuad:function(e){return e<.5?2*e*e:(4-2*e)*e-1},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return--e*e*e+1},easeInOutCubic:function(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return 1- --e*e*e*e},easeInOutQuart:function(e){return e<.5?8*e*e*e*e:1-8*--e*e*e*e},easeInQuint:function(e){return e*e*e*e*e},easeOutQuint:function(e){return 1+--e*e*e*e*e},easeInOutQuint:function(e){return e<.5?16*e*e*e*e*e:1+16*--e*e*e*e*e}}},5183:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e,t){for(var n=e.offsetTop,r=e.offsetParent;r&&!t(r);)n+=r.offsetTop,r=r.offsetParent;return{offsetTop:n,offsetParent:r}};t.default={updateHash:function(e,t){var n=0===e.indexOf("#")?e.substring(1):e,r=n?"#"+n:"",i=window&&window.location,a=r?i.pathname+i.search+r:i.pathname+i.search;t?history.pushState(history.state,"",a):history.replaceState(history.state,"",a)},getHash:function(){return window.location.hash.replace(/^#/,"")},filterElementInContainer:function(e){return function(t){return e.contains?e!=t&&e.contains(t):!!(16&e.compareDocumentPosition(t))}},scrollOffset:function(e,t,r){if(r)return e===document?t.getBoundingClientRect().left+(window.scrollX||window.pageXOffset):"static"!==getComputedStyle(e).position?t.offsetLeft:t.offsetLeft-e.offsetLeft;if(e===document)return t.getBoundingClientRect().top+(window.scrollY||window.pageYOffset);if("static"!==getComputedStyle(e).position){if(t.offsetParent!==e){var i=n(t,(function(t){return t===e||t===document})),a=i.offsetTop;if(i.offsetParent!==e)throw new Error("Seems containerElement is not an ancestor of the Element");return a}return t.offsetTop}if(t.offsetParent===e.offsetParent)return t.offsetTop-e.offsetTop;var o=function(e){return e===document};return n(t,o).offsetTop-n(e,o).offsetTop}}},503:function(e,t,n){"use strict";t.Z=void 0;var r=o(n(2791)),i=o(n(2007)),a=o(n(1418));function o(e){return e&&e.__esModule?e:{default:e}}var s=function(e){var t=e.animate,n=void 0===t||t,i=e.className,o=void 0===i?"":i,s=e.layout,u=void 0===s?"2-columns":s,l=e.lineColor,c=void 0===l?"#FFF":l,h=e.children;return"object"===typeof window&&document.documentElement.style.setProperty("--line-color",c),r.default.createElement("div",{className:(0,a.default)(o,"vertical-timeline",{"vertical-timeline--animate":n,"vertical-timeline--two-columns":"2-columns"===u,"vertical-timeline--one-column-left":"1-column"===u||"1-column-left"===u,"vertical-timeline--one-column-right":"1-column-right"===u})},h)};s.propTypes={children:i.default.oneOfType([i.default.arrayOf(i.default.node),i.default.node]).isRequired,className:i.default.string,animate:i.default.bool,layout:i.default.oneOf(["1-column-left","1-column","2-columns","1-column-right"]),lineColor:i.default.string};var u=s;t.Z=u},5953:function(e,t,n){"use strict";t.Z=void 0;var r=s(n(2791)),i=s(n(2007)),a=s(n(1418)),o=n(8105);function s(e){return e&&e.__esModule?e:{default:e}}var u=function(e){var t=e.children,n=void 0===t?"":t,i=e.className,s=void 0===i?"":i,u=e.contentArrowStyle,l=void 0===u?null:u,c=e.contentStyle,h=void 0===c?null:c,d=e.date,f=void 0===d?"":d,p=e.dateClassName,A=void 0===p?"":p,v=e.icon,m=void 0===v?null:v,g=e.iconClassName,y=void 0===g?"":g,b=e.iconOnClick,x=void 0===b?null:b,_=e.onTimelineElementClick,w=void 0===_?null:_,S=e.iconStyle,M=void 0===S?null:S,k=e.id,T=void 0===k?"":k,E=e.position,C=void 0===E?"":E,R=e.style,B=void 0===R?null:R,P=e.textClassName,N=void 0===P?"":P,I=e.intersectionObserverProps,D=void 0===I?{rootMargin:"0px 0px -40px 0px",triggerOnce:!0}:I,L=e.visible,O=void 0!==L&&L;return r.default.createElement(o.InView,D,(function(e){var t=e.inView,i=e.ref;return r.default.createElement("div",{ref:i,id:T,className:(0,a.default)(s,"vertical-timeline-element",{"vertical-timeline-element--left":"left"===C,"vertical-timeline-element--right":"right"===C,"vertical-timeline-element--no-children":""===n}),style:B},r.default.createElement(r.default.Fragment,null,r.default.createElement("span",{style:M,onClick:x,className:(0,a.default)(y,"vertical-timeline-element-icon",{"bounce-in":t||O,"is-hidden":!(t||O)})},m),r.default.createElement("div",{style:h,onClick:w,className:(0,a.default)(N,"vertical-timeline-element-content",{"bounce-in":t||O,"is-hidden":!(t||O)})},r.default.createElement("div",{style:l,className:"vertical-timeline-element-content-arrow"}),n,r.default.createElement("span",{className:(0,a.default)(A,"vertical-timeline-element-date")},f))))}))};u.propTypes={children:i.default.oneOfType([i.default.arrayOf(i.default.node),i.default.node]),className:i.default.string,contentArrowStyle:i.default.shape({}),contentStyle:i.default.shape({}),date:i.default.node,dateClassName:i.default.string,icon:i.default.element,iconClassName:i.default.string,iconStyle:i.default.shape({}),iconOnClick:i.default.func,onTimelineElementClick:i.default.func,id:i.default.string,position:i.default.string,style:i.default.shape({}),textClassName:i.default.string,visible:i.default.bool,intersectionObserverProps:i.default.shape({root:i.default.object,rootMargin:i.default.string,threshold:i.default.number,triggerOnce:i.default.bool})};var l=u;t.Z=l},7562:function(e,t,n){"use strict";e.exports={VerticalTimeline:n(503).Z,VerticalTimelineElement:n(5953).Z}},6374:function(e,t,n){"use strict";var r=n(2791),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,n){var r,a={},l=null,c=null;for(r in void 0!==n&&(l=""+n),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(c=t.ref),t)o.call(t,r)&&!u.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:l,ref:c,props:a,_owner:s.current}}t.Fragment=a,t.jsx=l,t.jsxs=l},9117:function(e,t){"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),u=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,v={};function m(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||p}function g(){}function y(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||p}m.prototype.isReactComponent={},m.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},m.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=m.prototype;var b=y.prototype=new g;b.constructor=y,A(b,m.prototype),b.isPureReactComponent=!0;var x=Array.isArray,_=Object.prototype.hasOwnProperty,w={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function M(e,t,r){var i,a={},o=null,s=null;if(null!=t)for(i in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)_.call(t,i)&&!S.hasOwnProperty(i)&&(a[i]=t[i]);var u=arguments.length-2;if(1===u)a.children=r;else if(1<u){for(var l=Array(u),c=0;c<u;c++)l[c]=arguments[c+2];a.children=l}if(e&&e.defaultProps)for(i in u=e.defaultProps)void 0===a[i]&&(a[i]=u[i]);return{$$typeof:n,type:e,key:o,ref:s,props:a,_owner:w.current}}function k(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function E(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function C(e,t,i,a,o){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var u=!1;if(null===e)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case r:u=!0}}if(u)return o=o(u=e),e=""===a?"."+E(u,0):a,x(o)?(i="",null!=e&&(i=e.replace(T,"$&/")+"/"),C(o,t,i,"",(function(e){return e}))):null!=o&&(k(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||u&&u.key===o.key?"":(""+o.key).replace(T,"$&/")+"/")+e)),t.push(o)),1;if(u=0,a=""===a?".":a+":",x(e))for(var l=0;l<e.length;l++){var c=a+E(s=e[l],l);u+=C(s,t,i,c,o)}else if(c=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof c)for(e=c.call(e),l=0;!(s=e.next()).done;)u+=C(s=s.value,t,i,c=a+E(s,l++),o);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return u}function R(e,t,n){if(null==e)return e;var r=[],i=0;return C(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function B(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var P={current:null},N={transition:null},I={ReactCurrentDispatcher:P,ReactCurrentBatchConfig:N,ReactCurrentOwner:w};t.Children={map:R,forEach:function(e,t,n){R(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return R(e,(function(){t++})),t},toArray:function(e){return R(e,(function(e){return e}))||[]},only:function(e){if(!k(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=m,t.Fragment=i,t.Profiler=o,t.PureComponent=y,t.StrictMode=a,t.Suspense=c,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=I,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=A({},e.props),a=e.key,o=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,s=w.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(l in t)_.call(t,l)&&!S.hasOwnProperty(l)&&(i[l]=void 0===t[l]&&void 0!==u?u[l]:t[l])}var l=arguments.length-2;if(1===l)i.children=r;else if(1<l){u=Array(l);for(var c=0;c<l;c++)u[c]=arguments[c+2];i.children=u}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:s}},t.createContext=function(e){return(e={$$typeof:u,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=M,t.createFactory=function(e){var t=M.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:l,render:e}},t.isValidElement=k,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:B}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=N.transition;N.transition={};try{e()}finally{N.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return P.current.useCallback(e,t)},t.useContext=function(e){return P.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return P.current.useDeferredValue(e)},t.useEffect=function(e,t){return P.current.useEffect(e,t)},t.useId=function(){return P.current.useId()},t.useImperativeHandle=function(e,t,n){return P.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return P.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return P.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return P.current.useMemo(e,t)},t.useReducer=function(e,t,n){return P.current.useReducer(e,t,n)},t.useRef=function(e){return P.current.useRef(e)},t.useState=function(e){return P.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return P.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return P.current.useTransition()},t.version="18.2.0"},2791:function(e,t,n){"use strict";e.exports=n(9117)},184:function(e,t,n){"use strict";e.exports=n(6374)},6813:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var s=2*(r+1)-1,u=e[s],l=s+1,c=e[l];if(0>a(u,n))l<i&&0>a(c,u)?(e[r]=c,e[l]=n,r=l):(e[r]=u,e[s]=n,r=s);else{if(!(l<i&&0>a(c,n)))break e;e[r]=c,e[l]=n,r=l}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,u=s.now();t.unstable_now=function(){return s.now()-u}}var l=[],c=[],h=1,d=null,f=3,p=!1,A=!1,v=!1,m="function"===typeof setTimeout?setTimeout:null,g="function"===typeof clearTimeout?clearTimeout:null,y="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(c);null!==t;){if(null===t.callback)i(c);else{if(!(t.startTime<=e))break;i(c),t.sortIndex=t.expirationTime,n(l,t)}t=r(c)}}function x(e){if(v=!1,b(e),!A)if(null!==r(l))A=!0,N(_);else{var t=r(c);null!==t&&I(x,t.startTime-e)}}function _(e,n){A=!1,v&&(v=!1,g(k),k=-1),p=!0;var a=f;try{for(b(n),d=r(l);null!==d&&(!(d.expirationTime>n)||e&&!C());){var o=d.callback;if("function"===typeof o){d.callback=null,f=d.priorityLevel;var s=o(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?d.callback=s:d===r(l)&&i(l),b(n)}else i(l);d=r(l)}if(null!==d)var u=!0;else{var h=r(c);null!==h&&I(x,h.startTime-n),u=!1}return u}finally{d=null,f=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var w,S=!1,M=null,k=-1,T=5,E=-1;function C(){return!(t.unstable_now()-E<T)}function R(){if(null!==M){var e=t.unstable_now();E=e;var n=!0;try{n=M(!0,e)}finally{n?w():(S=!1,M=null)}}else S=!1}if("function"===typeof y)w=function(){y(R)};else if("undefined"!==typeof MessageChannel){var B=new MessageChannel,P=B.port2;B.port1.onmessage=R,w=function(){P.postMessage(null)}}else w=function(){m(R,0)};function N(e){M=e,S||(S=!0,w())}function I(e,n){k=m((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){A||p||(A=!0,N(_))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:a,expirationTime:s=a+s,sortIndex:-1},a>o?(e.sortIndex=a,n(c,e),null===r(l)&&e===r(c)&&(v?(g(k),k=-1):v=!0,I(x,a-o))):(e.sortIndex=s,n(l,e),A||p||(A=!0,N(_))),e},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},5296:function(e,t,n){"use strict";e.exports=n(6813)},7623:function(e,t,n){var r=n(8682),i=n(3601),a=new r,o=n(7557);e.exports=function(e){e=e||{};var t,n,s=[],u={initAsync:function(e,r){c(e);var i=h(e);function a(t,n){i.insert(n,e,0)}function s(){n=e,t=i,"function"===typeof r&&r(u)}o(e,a,s,{step:3})},init:function(e){c(e),n=e,t=h(e);for(var r=0;r<e.length;r+=3)t.insert(r,n,0)},bounds:function(){return t?t.bounds:a},intersectRay:function(e,r,i,a){if(!t)return s;void 0===i&&(i=0);void 0===a&&(a=Number.POSITIVE_INFINITY);i*=i,a*=a;var o=[];return t.query(o,n,u,l),o.sort(c);function u(t){var n,i=t.half,o=(t.x-i-e.x)/r.x,s=(t.x+i-e.x)/r.x,u=(t.y+i-e.y)/r.y,l=(t.y-i-e.y)/r.y,c=(t.z-i-e.z)/r.z,h=(t.z+i-e.z)/r.z,d=Math.min(Math.min(Math.max(o,s),Math.max(u,l)),Math.max(c,h));return!(d<0)&&((n=Math.max(Math.max(Math.min(o,s),Math.min(u,l)),Math.min(c,h)))<=d&&n<=a)}function l(t,n,r){var o=(t-e.x)*(t-e.x)+(n-e.y)*(n-e.y)+(r-e.z)*(r-e.z);return i<=o&&o<=a}function c(t,n){var r=e[t],i=e[t+1],a=e[t+2],o=(r-e.x)*(r-e.x)+(i-e.y)*(i-e.y)+(a-e.z)*(a-e.z),s=e[n],u=e[n+1],l=e[n+2];return o-((s-e.x)*(s-e.x)+(u-e.y)*(u-e.y)+(l-e.z)*(l-e.z))}},intersectSphere:function(e,r,i,a){if(!t)return s;var o=[],u=a*a;return t.query(o,n,c,h),o;function c(t){var n=u,a=t.half;return e<t.x-a?n-=l(e-(t.x-a)):e>t.x+a&&(n-=l(e-(t.x+a))),r<t.y-a?n-=l(r-(t.y-a)):r>t.y+a&&(n-=l(r-(t.y+a))),i<t.z-a?n-=l(i-(t.z-a)):i>t.z+a&&(n-=l(i-(t.z+a))),n>0}function h(t,n,a){return l(t-e)+l(n-r)+l(a-i)<u}},getRoot:function(){return t}};return u;function l(e){return e*e}function c(e){if(!e)throw new Error("Points array is required for quadtree to work");if("number"!==typeof e.length)throw new Error("Points should be array-like object");if(e.length%3!==0)throw new Error("Points array should consist of series of x,y,z coordinates and be multiple of 3")}function h(e){if(0===e.length){var t=new r;return new i(t)}for(var n=Number.POSITIVE_INFINITY,a=Number.POSITIVE_INFINITY,o=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY,u=Number.NEGATIVE_INFINITY,l=Number.NEGATIVE_INFINITY,c=0;c<e.length;c+=3){var h=e[c],d=e[c+1],f=e[c+2];h<n&&(n=h),h>s&&(s=h),d<a&&(a=d),d>u&&(u=d),f<o&&(o=f),f>l&&(l=f)}var p=Math.max(Math.max(s-n,u-a),l-o),A=(p+=2)/2,v=new r((n-=1)+A,(a-=1)+A,(o-=1)+A,A);return new i(v)}}},8682:function(e){function t(e,t,n,r){this.x="number"===typeof e?e:0,this.y="number"===typeof t?t:0,this.z="number"===typeof n?n:0,this.half="number"===typeof r?r:0}e.exports=t,t.prototype.contains=function(e,t,n){var r=this.half;return this.x-r<=e&&e<this.x+r&&this.y-r<=t&&t<this.y+r&&this.z-r<=n&&n<this.z+r}},3601:function(e,t,n){var r=n(8682);function i(e){this.bounds=e,this.q0=null,this.q1=null,this.q2=null,this.q3=null,this.q4=null,this.q5=null,this.q6=null,this.q7=null,this.items=null}e.exports=i,i.prototype.subdivide=function(){var e=this.bounds,t=e.half/2;this.q0=new i(new r(e.x-t,e.y-t,e.z-t,t)),this.q1=new i(new r(e.x+t,e.y-t,e.z-t,t)),this.q2=new i(new r(e.x-t,e.y+t,e.z-t,t)),this.q3=new i(new r(e.x+t,e.y+t,e.z-t,t)),this.q4=new i(new r(e.x-t,e.y-t,e.z+t,t)),this.q5=new i(new r(e.x+t,e.y-t,e.z+t,t)),this.q6=new i(new r(e.x-t,e.y+t,e.z+t,t)),this.q7=new i(new r(e.x+t,e.y+t,e.z+t,t))},i.prototype.insert=function(e,t,n){if(null===this.q0){if(null===this.items?this.items=[e]:this.items.push(e),this.items.length>=4&&n<16){this.subdivide();for(var r=0;r<this.items.length;++r)this.insert(this.items[r],t,n+1);this.items=null}}else{var i=t[e],a=t[e+1],o=t[e+2],s=this.bounds,u=0;i>s.x&&(u+=1),a>s.y&&(u+=2),o>s.z&&(u+=4);var l=function(e,t){if(0===t)return e.q0;if(1===t)return e.q1;if(2===t)return e.q2;if(3===t)return e.q3;if(4===t)return e.q4;if(5===t)return e.q5;if(6===t)return e.q6;if(7===t)return e.q7}(this,u);l.insert(e,t,n+1)}},i.prototype.query=function(e,t,n,r){if(n(this.bounds)){var i=this.items,a="function"===typeof r;if(i)for(var o=0;o<i.length;++o){var s=i[o];a?r(t[s],t[s+1],t[s+2])&&e.push(s):e.push(s)}this.q0&&(this.q0.query(e,t,n,r),this.q1.query(e,t,n,r),this.q2.query(e,t,n,r),this.q3.query(e,t,n,r),this.q4.query(e,t,n,r),this.q5.query(e,t,n,r),this.q6.query(e,t,n,r),this.q7.query(e,t,n,r))}}},1418:function(e,t){var n;!function(){"use strict";var r={}.hasOwnProperty;function i(){for(var e="",t=0;t<arguments.length;t++){var n=arguments[t];n&&(e=o(e,a(n)))}return e}function a(e){if("string"===typeof e||"number"===typeof e)return e;if("object"!==typeof e)return"";if(Array.isArray(e))return i.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var n in e)r.call(e,n)&&e[n]&&(t=o(t,n));return t}function o(e,t){return t?e?e+" "+t:e+t:e}e.exports?(i.default=i,e.exports=i):void 0===(n=function(){return i}.apply(t,[]))||(e.exports=n)}()}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r].call(a.exports,a,a.exports,n),a.exports}n.m=e,n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,r){return n.f[r](e,t),t}),[]))},n.u=function(e){return"static/js/"+e+".28cb0dcd.chunk.js"},n.miniCssF=function(e){},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="my-app:";n.l=function(r,i,a,o){if(e[r])e[r].push(i);else{var s,u;if(void 0!==a)for(var l=document.getElementsByTagName("script"),c=0;c<l.length;c++){var h=l[c];if(h.getAttribute("src")==r||h.getAttribute("data-webpack")==t+a){s=h;break}}s||(u=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,n.nc&&s.setAttribute("nonce",n.nc),s.setAttribute("data-webpack",t+a),s.src=r),e[r]=[i];var d=function(t,n){s.onerror=s.onload=null,clearTimeout(f);var i=e[r];if(delete e[r],s.parentNode&&s.parentNode.removeChild(s),i&&i.forEach((function(e){return e(n)})),t)return t(n)},f=setTimeout(d.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=d.bind(null,s.onerror),s.onload=d.bind(null,s.onload),u&&document.head.appendChild(s)}}}(),n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/",function(){var e={179:0};n.f.j=function(t,r){var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var a=new Promise((function(n,r){i=e[t]=[n,r]}));r.push(i[2]=a);var o=n.p+n.u(t),s=new Error;n.l(o,(function(r){if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var a=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;s.message="Loading chunk "+t+" failed.\n("+a+": "+o+")",s.name="ChunkLoadError",s.type=a,s.request=o,i[1](s)}}),"chunk-"+t,t)}};var t=function(t,r){var i,a,o=r[0],s=r[1],u=r[2],l=0;if(o.some((function(t){return 0!==e[t]}))){for(i in s)n.o(s,i)&&(n.m[i]=s[i]);if(u)u(n)}for(t&&t(r);l<o.length;l++)a=o[l],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0},r=self.webpackChunkmy_app=self.webpackChunkmy_app||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}(),function(){"use strict";var e={};n.r(e),n.d(e,{ACESFilmicToneMapping:function(){return lt},AddEquation:function(){return Ee},AddOperation:function(){return it},AdditiveAnimationBlendMode:function(){return Yn},AdditiveBlending:function(){return Se},AgXToneMapping:function(){return ht},AlphaFormat:function(){return Wt},AlwaysCompare:function(){return Pr},AlwaysDepth:function(){return Qe},AlwaysStencilFunc:function(){return Sr},AmbientLight:function(){return Ep},AnimationAction:function(){return mA},AnimationClip:function(){return Kf},AnimationLoader:function(){return sp},AnimationMixer:function(){return yA},AnimationObjectGroup:function(){return vA},AnimationUtils:function(){return Ff},ArcCurve:function(){return ed},ArrayCamera:function(){return tc},ArrowHelper:function(){return dv},AttachedBindMode:function(){return ft},Audio:function(){return eA},AudioAnalyser:function(){return oA},AudioContext:function(){return Gp},AudioListener:function(){return $p},AudioLoader:function(){return qp},AxesHelper:function(){return fv},BackSide:function(){return be},BasicDepthPacking:function(){return Zn},BasicShadowMap:function(){return Ae},BatchedMesh:function(){return Sh},Bone:function(){return Xc},BooleanKeyframeTrack:function(){return Vf},Box2:function(){return NA},Box3:function(){return Hi},Box3Helper:function(){return lv},BoxGeometry:function(){return Zo},BoxHelper:function(){return uv},BufferAttribute:function(){return xo},BufferGeometry:function(){return Fo},BufferGeometryLoader:function(){return Dp},ByteType:function(){return Dt},Cache:function(){return $f},Camera:function(){return is},CameraHelper:function(){return rv},CanvasTexture:function(){return Kh},CapsuleGeometry:function(){return xd},CatmullRomCurve3:function(){return od},CineonToneMapping:function(){return ut},CircleGeometry:function(){return _d},ClampToEdgeWrapping:function(){return _t},Clock:function(){return Xp},Color:function(){return uo},ColorKeyframeTrack:function(){return jf},ColorManagement:function(){return mi},CompressedArrayTexture:function(){return Qh},CompressedCubeTexture:function(){return Jh},CompressedTexture:function(){return Yh},CompressedTextureLoader:function(){return up},ConeGeometry:function(){return Sd},ConstantAlphaFactor:function(){return We},ConstantColorFactor:function(){return Ve},Controls:function(){return Av},CubeCamera:function(){return cs},CubeReflectionMapping:function(){return vt},CubeRefractionMapping:function(){return mt},CubeTexture:function(){return hs},CubeTextureLoader:function(){return cp},CubeUVReflectionMapping:function(){return bt},CubicBezierCurve:function(){return cd},CubicBezierCurve3:function(){return hd},CubicInterpolant:function(){return zf},CullFaceBack:function(){return de},CullFaceFront:function(){return fe},CullFaceFrontBack:function(){return pe},CullFaceNone:function(){return he},Curve:function(){return Zh},CurvePath:function(){return gd},CustomBlending:function(){return Te},CustomToneMapping:function(){return ct},CylinderGeometry:function(){return wd},Cylindrical:function(){return RA},Data3DTexture:function(){return Oi},DataArrayTexture:function(){return Di},DataTexture:function(){return Yc},DataTextureLoader:function(){return hp},DataUtils:function(){return go},DecrementStencilOp:function(){return fr},DecrementWrapStencilOp:function(){return Ar},DefaultLoadingManager:function(){return tp},DepthFormat:function(){return Kt},DepthStencilFormat:function(){return Zt},DepthTexture:function(){return au},DetachedBindMode:function(){return pt},DirectionalLight:function(){return Tp},DirectionalLightHelper:function(){return ev},DiscreteInterpolant:function(){return qf},DodecahedronGeometry:function(){return kd},DoubleSide:function(){return xe},DstAlphaFactor:function(){return Ue},DstColorFactor:function(){return Ge},DynamicCopyUsage:function(){return zr},DynamicDrawUsage:function(){return Ir},DynamicReadUsage:function(){return Or},EdgesGeometry:function(){return Bd},EllipseCurve:function(){return $h},EqualCompare:function(){return Tr},EqualDepth:function(){return Ze},EqualStencilFunc:function(){return yr},EquirectangularReflectionMapping:function(){return gt},EquirectangularRefractionMapping:function(){return yt},Euler:function(){return ka},EventDispatcher:function(){return Wr},ExtrudeGeometry:function(){return lf},FileLoader:function(){return op},Float16BufferAttribute:function(){return Co},Float32BufferAttribute:function(){return Ro},FloatType:function(){return zt},Fog:function(){return pc},FogExp2:function(){return fc},FramebufferTexture:function(){return Xh},FrontSide:function(){return ye},Frustum:function(){return ys},GLBufferAttribute:function(){return SA},GLSL1:function(){return qr},GLSL3:function(){return Hr},GreaterCompare:function(){return Cr},GreaterDepth:function(){return et},GreaterEqualCompare:function(){return Br},GreaterEqualDepth:function(){return $e},GreaterEqualStencilFunc:function(){return wr},GreaterStencilFunc:function(){return xr},GridHelper:function(){return QA},Group:function(){return nc},HalfFloatType:function(){return Gt},HemisphereLight:function(){return pp},HemisphereLightHelper:function(){return YA},IcosahedronGeometry:function(){return hf},ImageBitmapLoader:function(){return zp},ImageLoader:function(){return lp},ImageUtils:function(){return ki},IncrementStencilOp:function(){return dr},IncrementWrapStencilOp:function(){return pr},InstancedBufferAttribute:function(){return Zc},InstancedBufferGeometry:function(){return Ip},InstancedInterleavedBuffer:function(){return wA},InstancedMesh:function(){return oh},Int16BufferAttribute:function(){return Mo},Int32BufferAttribute:function(){return To},Int8BufferAttribute:function(){return _o},IntType:function(){return Ft},InterleavedBuffer:function(){return vc},InterleavedBufferAttribute:function(){return gc},Interpolant:function(){return Uf},InterpolateDiscrete:function(){return Gn},InterpolateLinear:function(){return qn},InterpolateSmooth:function(){return Hn},InvertStencilOp:function(){return vr},KeepStencilOp:function(){return cr},KeyframeTrack:function(){return Hf},LOD:function(){return Lc},LatheGeometry:function(){return bd},Layers:function(){return Ta},LessCompare:function(){return kr},LessDepth:function(){return Je},LessEqualCompare:function(){return Er},LessEqualDepth:function(){return Ke},LessEqualStencilFunc:function(){return br},LessStencilFunc:function(){return gr},Light:function(){return fp},LightProbe:function(){return Bp},Line:function(){return Nh},Line3:function(){return LA},LineBasicMaterial:function(){return Mh},LineCurve:function(){return dd},LineCurve3:function(){return fd},LineDashedMaterial:function(){return Pf},LineLoop:function(){return Fh},LineSegments:function(){return Oh},LinearFilter:function(){return Ct},LinearInterpolant:function(){return Gf},LinearMipMapLinearFilter:function(){return Nt},LinearMipMapNearestFilter:function(){return Bt},LinearMipmapLinearFilter:function(){return Pt},LinearMipmapNearestFilter:function(){return Rt},LinearSRGBColorSpace:function(){return or},LinearToneMapping:function(){return ot},LinearTransfer:function(){return sr},Loader:function(){return np},LoaderUtils:function(){return Np},LoadingManager:function(){return ep},LoopOnce:function(){return Fn},LoopPingPong:function(){return zn},LoopRepeat:function(){return Un},LuminanceAlphaFormat:function(){return Jt},LuminanceFormat:function(){return Qt},MOUSE:function(){return le},Material:function(){return ho},MaterialLoader:function(){return Pp},MathUtils:function(){return ri},Matrix2:function(){return BA},Matrix3:function(){return ai},Matrix4:function(){return va},MaxEquation:function(){return Pe},Mesh:function(){return Jo},MeshBasicMaterial:function(){return fo},MeshDepthMaterial:function(){return Wl},MeshDistanceMaterial:function(){return Xl},MeshLambertMaterial:function(){return Rf},MeshMatcapMaterial:function(){return Bf},MeshNormalMaterial:function(){return Cf},MeshPhongMaterial:function(){return Tf},MeshPhysicalMaterial:function(){return kf},MeshStandardMaterial:function(){return Mf},MeshToonMaterial:function(){return Ef},MinEquation:function(){return Be},MirroredRepeatWrapping:function(){return wt},MixOperation:function(){return rt},MultiplyBlending:function(){return ke},MultiplyOperation:function(){return nt},NearestFilter:function(){return St},NearestMipMapLinearFilter:function(){return Et},NearestMipMapNearestFilter:function(){return kt},NearestMipmapLinearFilter:function(){return Tt},NearestMipmapNearestFilter:function(){return Mt},NeutralToneMapping:function(){return dt},NeverCompare:function(){return Mr},NeverDepth:function(){return Ye},NeverStencilFunc:function(){return mr},NoBlending:function(){return _e},NoColorSpace:function(){return ir},NoToneMapping:function(){return at},NormalAnimationBlendMode:function(){return Xn},NormalBlending:function(){return we},NotEqualCompare:function(){return Rr},NotEqualDepth:function(){return tt},NotEqualStencilFunc:function(){return _r},NumberKeyframeTrack:function(){return Wf},Object3D:function(){return Ha},ObjectLoader:function(){return Lp},ObjectSpaceNormalMap:function(){return rr},OctahedronGeometry:function(){return df},OneFactor:function(){return Ie},OneMinusConstantAlphaFactor:function(){return Xe},OneMinusConstantColorFactor:function(){return je},OneMinusDstAlphaFactor:function(){return ze},OneMinusDstColorFactor:function(){return qe},OneMinusSrcAlphaFactor:function(){return Fe},OneMinusSrcColorFactor:function(){return Le},OrthographicCamera:function(){return Ds},PCFShadowMap:function(){return ve},PCFSoftShadowMap:function(){return me},PMREMGenerator:function(){return Xs},Path:function(){return yd},PerspectiveCamera:function(){return us},Plane:function(){return vs},PlaneGeometry:function(){return _s},PlaneHelper:function(){return cv},PointLight:function(){return Mp},PointLightHelper:function(){return VA},Points:function(){return Vh},PointsMaterial:function(){return Uh},PolarGridHelper:function(){return JA},PolyhedronGeometry:function(){return Md},PositionalAudio:function(){return aA},PropertyBinding:function(){return AA},PropertyMixer:function(){return sA},QuadraticBezierCurve:function(){return pd},QuadraticBezierCurve3:function(){return Ad},Quaternion:function(){return Ui},QuaternionKeyframeTrack:function(){return Yf},QuaternionLinearInterpolant:function(){return Xf},RED_GREEN_RGTC2_Format:function(){return Ln},RED_RGTC1_Format:function(){return In},REVISION:function(){return ue},RGBADepthPacking:function(){return $n},RGBAFormat:function(){return Yt},RGBAIntegerFormat:function(){return an},RGBA_ASTC_10x10_Format:function(){return En},RGBA_ASTC_10x5_Format:function(){return Mn},RGBA_ASTC_10x6_Format:function(){return kn},RGBA_ASTC_10x8_Format:function(){return Tn},RGBA_ASTC_12x10_Format:function(){return Cn},RGBA_ASTC_12x12_Format:function(){return Rn},RGBA_ASTC_4x4_Format:function(){return mn},RGBA_ASTC_5x4_Format:function(){return gn},RGBA_ASTC_5x5_Format:function(){return yn},RGBA_ASTC_6x5_Format:function(){return bn},RGBA_ASTC_6x6_Format:function(){return xn},RGBA_ASTC_8x5_Format:function(){return _n},RGBA_ASTC_8x6_Format:function(){return wn},RGBA_ASTC_8x8_Format:function(){return Sn},RGBA_BPTC_Format:function(){return Bn},RGBA_ETC2_EAC_Format:function(){return vn},RGBA_PVRTC_2BPPV1_Format:function(){return fn},RGBA_PVRTC_4BPPV1_Format:function(){return dn},RGBA_S3TC_DXT1_Format:function(){return sn},RGBA_S3TC_DXT3_Format:function(){return un},RGBA_S3TC_DXT5_Format:function(){return ln},RGBDepthPacking:function(){return er},RGBFormat:function(){return Xt},RGBIntegerFormat:function(){return rn},RGB_BPTC_SIGNED_Format:function(){return Pn},RGB_BPTC_UNSIGNED_Format:function(){return Nn},RGB_ETC1_Format:function(){return pn},RGB_ETC2_Format:function(){return An},RGB_PVRTC_2BPPV1_Format:function(){return hn},RGB_PVRTC_4BPPV1_Format:function(){return cn},RGB_S3TC_DXT1_Format:function(){return on},RGDepthPacking:function(){return tr},RGFormat:function(){return tn},RGIntegerFormat:function(){return nn},RawShaderMaterial:function(){return Sf},Ray:function(){return Aa},Raycaster:function(){return kA},RectAreaLight:function(){return Cp},RedFormat:function(){return $t},RedIntegerFormat:function(){return en},ReinhardToneMapping:function(){return st},RenderTarget:function(){return Ni},RepeatWrapping:function(){return xt},ReplaceStencilOp:function(){return hr},ReverseSubtractEquation:function(){return Re},RingGeometry:function(){return ff},SIGNED_RED_GREEN_RGTC2_Format:function(){return On},SIGNED_RED_RGTC1_Format:function(){return Dn},SRGBColorSpace:function(){return ar},SRGBTransfer:function(){return ur},Scene:function(){return Ac},ShaderChunk:function(){return ws},ShaderLib:function(){return Ms},ShaderMaterial:function(){return rs},ShadowMaterial:function(){return wf},Shape:function(){return Pd},ShapeGeometry:function(){return pf},ShapePath:function(){return pv},ShapeUtils:function(){return of},ShortType:function(){return Lt},Skeleton:function(){return Kc},SkeletonHelper:function(){return qA},SkinnedMesh:function(){return Wc},Source:function(){return Ei},Sphere:function(){return sa},SphereGeometry:function(){return Af},Spherical:function(){return CA},SphericalHarmonics3:function(){return Rp},SplineCurve:function(){return vd},SpotLight:function(){return bp},SpotLightHelper:function(){return FA},Sprite:function(){return Pc},SpriteMaterial:function(){return yc},SrcAlphaFactor:function(){return Oe},SrcAlphaSaturateFactor:function(){return He},SrcColorFactor:function(){return De},StaticCopyUsage:function(){return Ur},StaticDrawUsage:function(){return Nr},StaticReadUsage:function(){return Lr},StereoCamera:function(){return Wp},StreamCopyUsage:function(){return Gr},StreamDrawUsage:function(){return Dr},StreamReadUsage:function(){return Fr},StringKeyframeTrack:function(){return Qf},SubtractEquation:function(){return Ce},SubtractiveBlending:function(){return Me},TOUCH:function(){return ce},TangentSpaceNormalMap:function(){return nr},TetrahedronGeometry:function(){return vf},Texture:function(){return Bi},TextureLoader:function(){return dp},TextureUtils:function(){return Zl},TorusGeometry:function(){return mf},TorusKnotGeometry:function(){return gf},Triangle:function(){return ro},TriangleFanDrawMode:function(){return Kn},TriangleStripDrawMode:function(){return Jn},TrianglesDrawMode:function(){return Qn},TubeGeometry:function(){return yf},UVMapping:function(){return At},Uint16BufferAttribute:function(){return ko},Uint32BufferAttribute:function(){return Eo},Uint8BufferAttribute:function(){return wo},Uint8ClampedBufferAttribute:function(){return So},Uniform:function(){return bA},UniformsGroup:function(){return _A},UniformsLib:function(){return Ss},UniformsUtils:function(){return ns},UnsignedByteType:function(){return It},UnsignedInt248Type:function(){return Vt},UnsignedInt5999Type:function(){return jt},UnsignedIntType:function(){return Ut},UnsignedShort4444Type:function(){return qt},UnsignedShort5551Type:function(){return Ht},UnsignedShortType:function(){return Ot},VSMShadowMap:function(){return ge},Vector2:function(){return ii},Vector3:function(){return zi},Vector4:function(){return Pi},VectorKeyframeTrack:function(){return Jf},VideoTexture:function(){return Wh},WebGL3DRenderTarget:function(){return Fi},WebGLArrayRenderTarget:function(){return Li},WebGLCoordinateSystem:function(){return Vr},WebGLCubeRenderTarget:function(){return ds},WebGLMultipleRenderTargets:function(){return vv},WebGLRenderTarget:function(){return Ii},WebGLRenderer:function(){return dc},WebGLUtils:function(){return ec},WebGPUCoordinateSystem:function(){return jr},WireframeGeometry:function(){return bf},WrapAroundEnding:function(){return Wn},ZeroCurvatureEnding:function(){return Vn},ZeroFactor:function(){return Ne},ZeroSlopeEnding:function(){return jn},ZeroStencilOp:function(){return lr},createCanvasElement:function(){return hi}});var t={};n.r(t),n.d(t,{computeMikkTSpaceTangents:function(){return fS},computeMorphedAttributes:function(){return wS},deepCloneAttribute:function(){return vS},deinterleaveAttribute:function(){return gS},deinterleaveGeometry:function(){return yS},estimateBytesUsed:function(){return bS},interleaveAttributes:function(){return mS},mergeAttributes:function(){return AS},mergeGeometries:function(){return pS},mergeGroups:function(){return SS},mergeVertices:function(){return xS},toCreasedNormals:function(){return MS},toTrianglesDrawMode:function(){return _S}});var r=n(2791),i=n(1250);function a(e){if(Array.isArray(e))return e}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t){if(e){if("string"==typeof e)return o(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}function u(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(e,t){return a(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,s=[],u=!0,l=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(e){l=!0,i=e}finally{try{if(!u&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(l)throw i}}return s}}(e,t)||s(e,t)||u()}var c=n.p+"static/media/Cyber.J-Logo.13b77a31d81f5659f63e.png",h=n(5667);function d(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=d(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}var f=function(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=d(e))&&(r&&(r+=" "),r+=t);return r},p=n(184),A=function(){var e=l((0,r.useState)(!1),2),t=e[0],n=e[1],i=l((0,r.useState)(!1),2),a=i[0],o=i[1],s=function(e){var n=e.title;return(0,p.jsx)(h.rU,{to:n,onClick:function(){return o(!1)},smooth:!0,spy:!0,className:f("base-bold text-[#969696] uppercase max-sm:hidden transition-colors duration-500 cursor-pointer hover:text-[#787878] max-lg:my-4 max-lg:h-5",t||a?"base-bold text-white uppercase transition-colors duration-500 cursor-pointer hover:text-c4 max-lg:my-4 max-lg:h-5":""),children:n})};return(0,r.useEffect)((function(){var e=function(){n(window.scrollY>32)};return window.addEventListener("scroll",e),function(){window.removeEventListener("scroll",e)}}),[]),(0,p.jsx)(p.Fragment,{children:(0,p.jsxs)("header",{className:f("w-full h-[55px] bg-transparent fixed z-[500] flex items-center justify-evenly backdrop-blur-[2px] transition-all duration-500",t&&"bg-[#1e1e1e] h-[28px]"),children:[(0,p.jsxs)("div",{className:"w-[35%] flex flex-row justify-evenly items-center",children:[(0,p.jsx)(s,{title:"projects"}),(0,p.jsx)("div",{className:"h-2 w-2 bg-[#969696] rounded-full max-sm:hidden"}),(0,p.jsx)(s,{title:"features"})]}),(0,p.jsx)(h.rU,{to:"hero_section",offset:-100,spy:!0,smooth:!0,className:f("absolute transition-transform duration-500 cursor-pointer opacity-0",t&&"opacity-100"),children:(0,p.jsx)("img",{src:c,alt:"logo",className:"h-[50px] w-[75px] mt-2"})}),(0,p.jsxs)("div",{className:"w-[35%] flex flex-row justify-evenly items-center",children:[(0,p.jsx)(s,{title:"email"}),(0,p.jsx)("div",{className:"h-2 w-2 bg-[#969696] rounded-full max-sm:hidden"}),(0,p.jsx)(s,{title:"about"})]})]})})};n.p;function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function m(e){var t=function(e,t){if("object"!=v(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=v(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==v(t)?t:t+""}function g(e,t,n){return(t=m(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){g(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var x=function(e){var t=(0,r.useRef)(),n=[];return(0,r.useEffect)((function(){var e=t.current,r=e.getContext("2d");e.width=e.offsetWidth,e.height=e.offsetHeight;for(var i=0;i<50;i++)n.push({x:Math.floor(Math.random()*e.width),y:Math.floor(Math.random()*e.height),size:2,color:"#555555",direction:{x:2*Math.random()-1,y:2*Math.random()-1}});var a={x:0,y:0},o=function(t){var n=e.getBoundingClientRect();a.x=t.clientX-n.left,a.y=t.clientY-n.top};return e.addEventListener("mousemove",o),function t(){var i,o;r.clearRect(0,0,e.width,e.height),n.forEach((function(t){t.x+=t.direction.x,t.y+=t.direction.y,(t.x<=0||t.x>=e.width)&&(t.direction.x*=-1),(t.y<=0||t.y>=e.height)&&(t.direction.y*=-1)})),n.forEach((function(e){r.fillStyle=e.color,r.beginPath(),r.arc(e.x,e.y,e.size,0,2*Math.PI),r.fill()})),i=a.x,o=a.y,i>=0&&i<=e.width&&o>=0&&o<=e.height&&n.forEach((function(e){Math.sqrt(Math.pow(i-e.x,2)+Math.pow(o-e.y,2))<100&&(r.beginPath(),r.moveTo(i,o),r.lineTo(e.x,e.y),r.strokeStyle="#555555",r.lineWidth=1,r.stroke())})),requestAnimationFrame(t)}(),function(){e.removeEventListener("mousemove",o)}}),[t,n]),(0,p.jsx)("canvas",b({ref:t},e))};var _=function(){return(0,p.jsxs)("div",{id:"hero_section",className:"h-[60vh] max-sm:h-[300px] w-full flex flex-col justify-start items-center bg-[#323232] relative",children:[(0,p.jsx)("img",{src:c,className:"h-[150px] w-[250px] mt-[50px] z-10 pointer-events-none border-red-400 rounded-full",alt:"profile picture"}),(0,p.jsxs)("h1",{className:"md:text-[20px] text-[15px] font-heading font-semibold z-10 pointer-events-none text-[#898989] text-center",children:[(0,p.jsx)("span",{className:"bg-gradient-to-r from-[#3d74ff] to-[#3dd8ff] text-transparent bg-clip-text",children:"Hi"})," ","\ud83d\udc4b"," im Jose ",(0,p.jsx)("br",{})," Wellcome to my ",(0,p.jsx)("span",{className:"bg-gradient-to-r from-[#3d74ff] to-[#3dd8ff] text-transparent bg-clip-text",children:"Portfolio"})]}),(0,p.jsxs)("p",{className:"md:text-[15px] text-[12px] text-[#757575] font-body font-semibold text-center",children:["Front End Web Developer in React ",(0,p.jsx)("br",{}),"Explore the projects bellow and let's build something amazing together! "]}),(0,p.jsx)(x,{className:"absolute top-0 left-0 h-full w-full"})]})},w=n(7562),S=n.p+"static/media/React.2f2532db663fd5ec5f95.png",M=n.p+"static/media/Tailwindcss.3549d9e451d7abb96934.png";var k=n.p+"static/media/github.901a4ad7bf47a7b52626960e9351381a.svg",T=n.p+"static/media/Vite.cf2bd784aefc4de003c6.png",E=n.p+"static/media/ThreeJS.7c862b1bad8407d307b0.png",C=n.p+"static/media/Node.290f630040630c5948b6.png",R=n.p+"static/media/Next.ab8293c95faf26dc5e3e.png";var B=n.p+"static/media/motion.dc867b9f86a828de2cc3fe71f431e7aa.svg",P=n.p+"static/media/Redux.5de70b7bc0d2556a0958.png";n.p;var N=n.p+"static/media/supabase.c328a6dbe87dc1d380e05fa35eea3f5a.svg",I=n.p+"static/media/gsap.c9563dfc35d43642602e.png",D=[{name:"Headphones Landing Page",description:(0,p.jsxs)(p.Fragment,{children:["modern landing page for a headphones company featuring sleek design elements and smooth animations using ",(0,p.jsx)("span",{className:"bg-gradient-to-r from-[#3d74ff] to-[#3dd8ff] text-transparent bg-clip-text",children:"Tailwind CSS"}),", ",(0,p.jsx)("span",{className:"bg-gradient-to-r from-[#3d74ff] to-[#3dd8ff] text-transparent bg-clip-text",children:"Anime.js"})," and ",(0,p.jsx)("span",{className:"bg-gradient-to-r from-[#3d74ff] to-[#3dd8ff] text-transparent bg-clip-text",children:"Framer Motion"}),". 'add to cart' functionality using ",(0,p.jsx)("span",{className:"bg-gradient-to-r from-[#3d74ff] to-[#3dd8ff] text-transparent bg-clip-text",children:"Redux"})," to handle complex states and ",(0,p.jsx)("span",{children:"Supabase"})," for the management of the database"]}),techStack:[S,M,"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAasAAADSCAYAAAD0S+/QAAAAAXNSR0IArs4c6QAAAARzQklUCAgICHwIZIgAABxJSURBVHic7d1ZkBz1fQfw77+vmenZC60k0LUL0q4UHRiJqwADQTZXHFwGgUMIiR2/OBiSmKokleTFqfKT8+b4AWK7XHbZBvvJNjZJgUhhsM3lVIQQFhgWCSMQYrWSVnvM2d3/fx76mJndOXZnZ1Z/2O+nSjWanemZ7p7u/vb//+tDjI5sUSAiItKYca5HgIiIqBWGFRERaY9hRURE2mNYERGR9hhWRESkPYYVERFpj2FFRETaY1gREZH2GFZERKQ9hhUREWmPYUVERNpjWBERkfYYVkREpD2GFRERaY9hRURE2mNYERGR9hhWRESkPYYVERFpj2FFRETaY1gREZH2GFZERKQ9hhUREWmPYUVERNpjWBERkfYYVkREpD2GFRERaY9hRURE2mNYERGR9hhWRESkPYYVERFpj2FFRETaY1gREZH2GFZERKQ9hhUREWmPYUVERNpjWBERkfYYVkREpD2GFRERaY9hRURE2mNYERGR9hhWRESkPYYVERFpj2FFRETaY1gREZH2GFZERKQ9hhUREWmPYUVERNpjWBERkfYYVkREpD2GFRERaY9hRURE2mNYERGR9hhWRESkPYYVERFpj2FFRETaY1gREZH2GFZERKQ9hhUREWmPYUVERNpjWBERkfYYVkREpD2GFRERaY9hRURE2mNYERGR9hhWRESkPYYVERFpj2FFRETaY1gREZH2GFZERKQ9hhUREWmPYUVERNpjWBERkfYYVkREpD2GFRERaY9hRURE2mNYERGR9hhWRESkPYYVERFpj2FFRETaY1gREZH2GFZERKQ9hhUREWmPYUVERNpjWBERkfascz0CH1ZCCCilkM/nkc/nz/XoLFgqlUImk4Ft21BKLXg4IQQ8z0M+n0epVIIQootjuTBKKQgh4LouMpnMgsapWCyiUCjMe2/8ewKAlBKGYSCTySCVSjX9PCEEgiBAoVBAsVhc1DxdaZRSyXxNp9MwjIXvK8e/V6lUQi6Xg+/7NX/XgVIKjuPAdV3Ytn2uR+cjR4yObOHa1YYgCGAYBvbs2YPdu3fDNA1IKZMNqE6Pnuchl8vh5MkJvP766zh27BgAIJvNLmiDUS6XMZvLwbYsrF+/HqOjo1izZg16slmkM2nYtgNgeaZHSgXPKyOfyyOXz+O9997D2NgYTp48Cdu24bouLMuaFxrx80wmg/7+/uQz631P/P6ZmRnk8/mG8ygIAszMzAAAVg8OYnR0FBs2bkRPNgs368JxUss2X3R+LJfLyM3mkM/n8f6JExgbG8P4+DhMy0K2we9VTQgB3/cxOzuLVCqFkZERjI6OYnDVKmRcF5ZlnrPpS3bicnmcPnMGb77xBt46cgSe56G3t3dRgUzNsWXVJt/3YRgGrrvuWtxzz19AGAaUVED1jp6CFs9lIOEHAUrFIo4ffw+/fPpp/OSnP8GJEx8gm83CNM150xevkDMzMxBC4JqrrsInPrEXl15+BdavX490Kg3TNGFaFgwhwu9djukBEEiJIAjg+z4K+RzeemsML774Ip566n9w5MgRZDIZZDKZeRvAQqGA2267DXfs24e+3h4EQVAz2vGjYdoIAh/f/va38dRTT8H3fVhW7aoSt6h37NiOG2+8CVdffRWGhobR09ML0zRhWVa4odLg9z/Xz4NAIgh8+L6PYrGIt48cwW//97d48sn9eP33v4cb/V71xGFwZnISO7dvx7333ourrr4aq1evge3YsCyr0ro6B9MnhEiWx3KphNOnJvDcc8/hkUcfxdGjR9HT0zNv2aH2cC4uQbxnle3pgW1ZkEFQ2fOCgkCTPbNz8LphGtiwYT22btuGkdFRPPTQQxgbG0NPT8+8PUClFGZnZ7F69Wp89q678Ke33YbNm7fAdTMwDAEppRbTZxhrMTw8jMsuvwI33LAXjzzyQzz99C9RKBRqAituRZ2/dg127tiB884bgKpqCVczLBu+52H16sGwtTznd8/lchBC4M4778Q999yDXbsuxsBAHwwhEARS299fh9eFITA8NIQ9l12GvXv34vvf/wH279+PYrGIdDo9bx3zfR/T09O48ZOfxH333YfLLrscPT1ZKCmT31Wn6duwYT0u2rIF23dsx9e+9u84dOgQA6tDOAfbFG/ggiBA4PuwTBNB4J/jsWpOygDCMLBqYAC33XYbpqen8fDDD+HUqdNwXbfmvbOzsxgYGMD999+PffvuxEB/HwBAKQnfk+di9OuSUgBC4LyBflxzzTW48MIL4WZc/PwXv0CxWKypOSmlIBUgpYKM9vbrsQwTge+HLa9oQxQrlcsQhoG/uvde/OXnPofNF10E0zCglIIf7axQYyL6vfp7e3HFFVdi09Awstke/PSnP0G5XIbjOJX3CoGZmRns3LkT9913H6697lqYwkDge9rOZ6UU3HQa1157HR58sISvfvWrOHHiBEzTnLdTRIvDsGqTlOEedFLcN8IuMR1qBEIIeOUSZBDMG28lJXzlIeO6+PSnP41XXjmIx//rv+F5XlIUjrs4P3vXXfjMZ27H4OAqeOUyMK+NEa6ctpOCEa2MXZ+uUglSBjXfD6UglYJhmhgevhB/c999OPHBB3jppZcQBEFNN6chBAwj3GAKwwCUAoSoeRQiej3auFRvYvK5HG695RZ89s/uxpbNm8PvlkGyPNTMF9uGYVphF7Emy8VyP5ZLxaQVVO/32rhxE7785b/HiRPv4/nnn0cQBEkNy/d9mKaJO26/HXsuvRSmYcD3vLrro1IKTioNYRjLM13FIpSa3zKPl03TsrF3714899xz+NGjj8LzPKRSKW1D9sOAYdUmI1op3n33XRx8+WWYloWgTjgsN8/3MNDXj3XrLmi4ciilIH0Pa9euxe7de/DMM89ieno6CatcLoft27fj+j/+Y6xZsxqB76FRUBmmidzsLI6/fxy5fB6mMb/+1Ql+4GPN6tVYu2YtTHN+0VoIASUlZOBj27ZtuGHvDXjttdcwOztbUw+x7LCWZFo2TGXVFquSmoRAKuXANMPCfTwPC4UC1qxejU996k+wffv2sNsv2jjN60o0DJTLZRx//x1MT0+vuL1q3/cxOLgK6y5YB9M05i2H8e/ll4vYtGkTbr75Zrz88svI5/PJzkU+n8fQ0BAuv+JK9Pf1RcthfaZpYmZmGseOvYuyV4YhunNgg+/7yLouNg1tguM4aPSrysBHJuPi6quvxuOPP46pqSkG1RIxrNpk2zaEEPj5z3+Bp5/+ZfL3c70nWygUcMUVl+NLX7ofO3fuiFpE8wVBANOysW7dOgwMDODs2bPJ3wFg27atGBoaDoNN1u/2My0LpmXj2Sf34zvf+Q7Gx8eTgnfHp6tYwKV79uCBB/4Ou3btgO/V7woKAh9OKo1dO3fhgvPPx5vT08lnpFIpvPDCiyjki0hn0pXPR1SDqHru+x5eeeWVmlpeqVTCzp07MTK6FbZtJd1R9YLIsh387vBBfP3rX8ebb76ZHHBxrpeP5XrMF/LYsX0H/ukf/wE7d+6E7/sNfq8AliNwyccuwYaNG/HmG29UWtGehw0bNmBwcBD1dpZql0UbBw48j//4xjdwcnw86Xbr9HTl8nkMDw3h377yFXzsYxfDa7AcKhUebLVp40asWrUKZ8+ebbis0MIwrNoUL3QzMzOYnJzUZiGcnplBX18fpqamIYQBwzAaho1SQH9/P1zXrRl/27axdu356OnJNtxzBADTtOB7Hl47fBiHDx9GoVCoqTl0Ui6XA6TC+AcncPHFO2EYRsOWrAIwODiIvv7+JGyEELBtGwcPHsSBAweiIxjjo8hU5f8Iu0oVwtZR3IIGwg3r6sFBZLM9UErO6/qLCSFgGCbGxsZw6NAhjI+PNzza7aMqXyigkC/gnXeOYdsfbYdh1K/pxvNvcHAVVg0MQIjw4B3TNCGlRF9fH2wnbPE3apkIIWCYJo6/dxxvvvEGpqamWp4f1/Z05fMoFYs4eXIcgdwVdvE26lGJ1q/4VIl4uqg9DKslMk0z6S7SYY/WsW2USiUUi8WW53gIAaTT6XkHIZimiZ6ebNiN2HR4gVKphMnJSQRBgFQq1bWWlef7yBcKmJ6ehpS14TJvvCDqHg4df55SCn4UNM2+N947j58HUiKdTsNxnPA0hSbzBVCYmppCqVSCbdtJS/xcLx/L+VgoFHDmzGn4fgDbbryRFgiPqM3WOSo1G51gK4PGB/UYhgEohMtGEMBxnK7NbyklyuUyJifPwvN9WM3WMQFk3AzcTAayQdDSwjGsOiTeQ4wXbCllwxZNN/m+j0KhAM8rQcmgaYtPKcB2wg1p3EUVq2yoG3+XUmFrw4tqCfGGPf5/Jx+NaEMRyPiIu2ZtvkrQYM4Gp7orbiHfG05ndPi7lMmBJE1nTPgJCAKZDNut+aLro2ma8DwPvu9DKgnRZFOjoGBZJsyqVixQuSJEXH9q1LKKu9yKpWISCt2crnK5jGKxEAZos5aSQhicjpMsf9Q+hlUHSSkxMzODcrkMy7ajFU0s61nsSil45TJKxVLz7TnC7a1pmEnXRM0KpeLnzYcP/3V/RVTR+EX/QdMRg6h6f+V91S2rhYzvvPlSM52thlfRaK7MDVSyg4DKsSuNCCD5XdWc38uyLRimAdXkE0S0fpXK5a4f5GQYBsqeh3I5qlU1XUHCLvWU47RYXmkhGFYdIITA7OwsyuUyhoaGsHv3bmwdHcWqwVXh5X9MC/F2FkAUBN157nseHMfBxRfvgu/VL2pXDVa50kLVtISPUSmnyXSHGyKRBFs3JRs8gfDw8qbjpaK3VboLlVIolkq46cYbcf3118HNuJBKxgPUzE/TMBEEAX722M/w0ku/BRDOp9rvbd2yUsswX3Qn4vnQ5D01v+ucllXYnWeEy1nDD4i66Kpast0Sfk9Q2eFpMWHhVUxW9jLQKQyrDsjlcnAzGdy5bx8+c/sdGBkdRdZ14aScpEi/bLUCGa/wsuVepkCl627uSh73tLXaIw43NMvUskr+I6BU4y5WkbSskGzIlFIIfB/btm7FLbfcir6+/nD66szH+KCUVw4dwgsvvFjZgEYthXjD2mqMuY0CEB9l2axlFC9odVpWAgJGi+GT4URluG6RUsKyrLCb2Wi9gnieh8D3K90Q1DaG1RLFQfXFL34Rf37PPVi7dm1SX6nd64oWbENUns997MTrVtSSkK0DpPrleYGVbOibDI/5gdAtlZYSKknaZMwqb6uMl1IKUsmoi9aOjk6bP38t24FXLleCK+kaVbVdkS3GeKX3/CRdp9GliRq+D6pqeRPzh1fNh0f8etSS7WatOD7wJpWKamktWlZBECCQMtrRWuELxBIxrJZARhewvOnmm3DHvn1Yt24dfM9DgIXVRM41MaeYsOiaFWoDoZu1ucXVrKrfX7unHvgBlIyuOtGo5WlF55vFxfrKB7BmtQjx/G9ds2rcskJV4DX5oug8ue7P7yAIkE6nkc5kwppmi5ZVuVxGqVQKn/IK7EvCsGqTEAL5fB7r1q3DDTd8AsNDQ1Ff9vy9ungFsm0HphXd52buGtzh575fDrsfmkgaKHM3EECy4resWdXZI+6GuFi/sJpVdUusdk+9Mp4tWmYi3uOvDnDWrBavcpBFI61aVlhIy0oITJ49i9lcDrlcLjqcPWpRo3bHZSnPpZRYu3Yt+np7YVkWpGyyjqmw52V2drblukStMazaJKVEqVzG8PAwRka2AEJANrgwqoiOCHz3vXfxu8OHUSqWKgddVNbHjjx6vo90Oo0dO7Zj44YNTY98q2y3a7vKwkdUajQN1Otq65ZkZV9Ezap6A6iqNjyVD2r8CWGPY6VlEP55cTUrbp0AxFcnb7Nmlfx+LVqy0vdx2Z49mJ2eRiAlTLM71wjM5wvYtGkjtmzZAgFZc93DOhOGM2cmMTk5WZkeahvDqk1KKdiWhY0bNmBg4Lzkb/WYpgnLtvDMM8/gW9/6Nk6dOtW1LgGlFAb6+/Gv//LPGB4ehpQBAr/BlR7qdAFWDiZA65pV0nBZhpYVFl+zqrsBjP++iJZVMqMWWbNq2VP4EbdcNasgCC8kfPOtt+La668HAAhhoKqN3bFHGUg4KQe9PVl4DS6qCyDpEn9rbAwTExPJgUzUPoZVm6SUcBwHvb29SKfDO8I2YpgWvLKPyTOTODUxEd51t0tn2BeKxeh2JUF036nG07DkmlXNdrzLLSsspmbV5Dyr8GUspmVV9QGsWS3CwmtWWFrNCuH62JvNojebTfKlcn5c55/H9U6l6u+omZaNmakpPPvssyiVyzVXdqH2MKzaFC+kmUwGlmWjVZ9PsVTCbG4WwjCSS/Z0g5QSjm3DNK2oJ6rZHi1a1KxatT8qGxrdz7MCarsSm9ZAWLPqoKWdZxX9p8XvFc7n6lvHLJe54xvePduBZVv4wQ9/iF/9+tcQQHLbE2ofw2oJDMNAKp0KL7TZognieR4K+ULU4unuUUGiqsnUvFZQGb+VcJ5VPDhE8/nSqZrVis8pAHEXcds1K6Dl8EAYFE4qDcMw6/bgJfstDXr4OvY6gDOnTuGRRx/Fd7/7XeRyubp3QKbFY1i1KT5U27FtmK3OUlcKQRCgVCoty5WXKx1VLWoFjboAgYXVrFA/ELqhnZpVvYM/lrNmtdJ3pJftPCuEy+/09FTlqi2dLVU1fDQMA57vITebw6nTp3H48GH8+le/wgsvvohisYh0Os3WdYcwrJZM1LRk6r8luiYdlvf8q5Z7tEutWaE2ED4M51ktrObEmlUndOI8K9/3Ea05DYc3TBOWZeORR3+Exx57DADm1ITjlk/nn8c7ooViEVNTUzh16hTK5TKECO+fxqDqHIZVm+IFN76yNNCkqR/1ZcdF1q63rqKWR6s90qSB0rBmxfOsWLNaqqWdZ+X7HmQgmy7HAmFgnTjxAf7vwAEEvt+1+1k1HIdovTYMA5ZlhdeSpI7iHF2iILqoZaualWmaSKfTyb2vuilu6bU8v0VU/sPzrGo/oRM1q5Z5tiIs7TwrL+rWa1mzkgpZ10U6lYJnGMt+/7B4fKsfqbMYVm0S8UEThQLKZa9lzSqVSqG3JzzrvVgsdnXPq7JhXnzNiudZRcN3oGbVsqfwI64TNatioQDP98KLQcv6V1WPl4ve3h6kHAdBEPCOvB9BDKs2GYYBz/NwcmICuVwOq1ad1/C9UoZ30e3r74fv+zh9+nRyc8DF7MFV3yCx0fvi/vJisdj9mlXNdrzLLSsspmbF86x00InzrGZzs/D9AM12LpQKa8E9vT2QUDhz5gwMoztXsGjWsorHZe7f+/v7k/rVSl4eloph1aY4rN5//zjOnDmN4eEhyAYLY+D7gAVcfdVVePDBL2Nqahq2baN2FW502FH167FGrysEfgDXdbFr18LuZ9W8ZtWq/VHZ0PA8q/ljzJoVUAn+xuZ22cYMw8DExCkU8nmYpgEZ1F+/lFIIfA+7L7kEf/vAA5iZmQnPM1z0+tX+67U7duHrphnuXO7fvx9HjhxNbhdE7WFYLYHjOHj33fdw4sT7uPzySyGlAd/z626gAt/H1m3bMHzhRdFN/0TVUUUdfJQKhmnAtswF3c8q/A/Ps5r7CZ2oWa34nAIQdxG3U7PKZDJ4++23cfToW9i6bWt4X6s5gRYLfB8Xbd6Ce9etT36arqxfi3g0DAElFY4efRtjb44BAMNqCRhWS5DJZHByfBy/+c1vcOlll+OC89fCMBrfrdQQgOum6++gdfhRqdZ3Ta1Xs6r8Aa1rVqgfCN3QTs1K1etaikd8GWpWK73HZ6k1q3Q6jcnJSTy1/yns2XMZNm3a0LBuFX9S1s0sy/q1kEfbSaFULEJKCakUGFNLw7BaAtu2USqV8MQTT2JkZAR3330Pent74fseAn/+RS6VUlAtWjvLack1K9QGAs+zqh0D1qwqLdPmc7t+y8owDLiuiyeeeAJbRkbw+c9/HqtWDcLzSgj8+T0YSkrtjmkJfB+yacDSQjGslkAphUwmg9OnT+Phh/8T4x+M4+6778ZFmzcjlXGr3ojaHXlNngthINvjwrbtmpVJSomenh6kUmnYjhNe+7DB8OH7UlBA5Y663RDtdbvZLCzLhhCAZdt1py8cr2x4/cU5Nats9HfbScGynYbDZ1wXVjRfqmtWqVQKpmk2HR4IN7SmaYbzpYt3rtVZvByFd2ZOQaHx/O7t74Nt25BV81sphXQ6jVwuh29+85uYmJjAF77w19i8eQtsNzW/RRPT5LkQBjLZHh6Z2CEMqyWK9/5OnjyJ733ve3j+hRdw5ZVXYseO7Vi9Zg3cTAaO4yA+QVeh6mihc/zctmwcO3YM09PTSatICAHLsvCHd/6Agy8fQDqdhoy6FOsNny8UMDExAUMIGF0s0sTjN/bWGA6+fAAC4caw3vTZlo3x8XFMTU3BrDoqzDRNHD9+HL979RBc1208vG3D9wKcmjgFISq3dnAcB5OTk3jj96/jzJnT0Z58/flrmhaOHz8OKLUiTxAN54GJo2+/jVdfeQWWbUFJVXd+ObaDXD6Hs2fPJr9XNdd1USgU8OMf/xivvnoIH//4tRjZMoLB1YPIZrOwLSvpatRp/XJsB2XPw9TUVHJ0IrVPjI5sYfu0A8Kz7X0EQRC2AFwX6XQ6OTlRR0IIBEGA2dlZ+HO6VTKZNNLpTNNaVPz+XC6HYrFY87dOiwvrruu2PAw4nq5cLgfP85JxilvCmcwCpksp5PJ5lEql5LuDIEAmk4brZmtOI6jHEAK5fB6FQqHymSuMUgrZbBbpVGpeF1+1+OoP8e/ViOd5yYWg3UwG6UwmuSqMjuJlbGZmJpkuXcf1w4Bh1WHxjeDiS6806wJqdVDCcrwOYF6gChFeky2ejlafb9t2zXkt3eR5XjJOrQKn0XTFVx1pNb7xdFUPHwRB8hu3Gt6yrBW9Ry2ESH6vevNp7vybO7/rvb96ufwwrF/LvX58lDGslkG9DaMuz1ttSONhFvJ5y2Wh81PX4Veabs6vxSyf5+o5l4XOYFgREZH2eOg/ERFpj2FFRETaY1gREZH2GFZERKQ9hhUREWmPYUVERNpjWBERkfYYVkREpD2GFRERaY9hRURE2mNYERGR9hhWRESkPYYVERFpj2FFRETaY1gREZH2GFZERKQ9hhUREWmPYUVERNpjWBERkfYYVkREpD2GFRERaY9hRURE2mNYERGR9hhWRESkPYYVERFpj2FFRETaY1gREZH2GFZERKQ9hhUREWmPYUVERNpjWBERkfYYVkREpD2GFRERaY9hRURE2mNYERGR9hhWRESkPYYVERFpj2FFRETaY1gREZH2GFZERKQ9hhUREWmPYUVERNpjWBERkfYYVkREpD2GFRERaY9hRURE2mNYERGR9hhWRESkPYYVERFpj2FFRETaY1gREZH2GFZERKQ9hhUREWmPYUVERNpjWBERkfYYVkREpD2GFRERaY9hRURE2mNYERGR9hhWRESkPYYVERFpj2FFRETaY1gREZH2GFZERKQ9hhUREWmPYUVERNpjWBERkfYYVkREpD2GFRERaY9hRURE2mNYERGR9hhWRESkPYYVERFpj2FFRETaY1gREZH2GFZERKQ9hhUREWmPYUVERNpjWBERkfYYVkREpD2GFRERaY9hRURE2mNYERGR9hhWRESkPYYVERFpj2FFRETaY1gREZH2/h83zJ8E6aFybQAAAABJRU5ErkJgggAAoQsYAAAAUGhvdG9FZGl0b3JfUmVfRWRpdF9EYXRheyJvcmlnaW5hbFBhdGgiOiJcL2RhdGFcL3NlY1wvcGhvdG9lZGl0b3JcL3NlY29uZGFyeVwvOWMzMy02YmJkXC9zdG9yYWdlXC85QzMzLTZCQkRcL2Rlc2Nhcmd1acOxYXNcL0FuaW1lLnBuZyIsImNsaXBJbmZvVmFsdWUiOiJ7XCJtQ2VudGVyWFwiOjAuNTAwMjA4MTk5MDI0MjAwNCxcIm1DZW50ZXJZXCI6MC40ODk4MTYzMDgwMjE1NDU0LFwibVdpZHRoXCI6MC41Nzc0NDEzOTQzMjkwNzEsXCJtSGVpZ2h0XCI6MC41MDUzMzE1NzU4NzA1MTM5LFwibVJvdGF0aW9uXCI6MCxcIm1Sb3RhdGVcIjowLFwibUhGbGlwXCI6MCxcIm1WRmxpcFwiOjAsXCJtUm90YXRpb25FZmZlY3RcIjowLFwibVJvdGF0ZUVmZmVjdFwiOjAsXCJtSEZsaXBFZmZlY3RcIjowLFwibVZGbGlwRWZmZWN0XCI6MH0iLCJ0b25lVmFsdWUiOiJ7XCJicmlnaHRuZXNzXCI6MTAwLFwiZXhwb3N1cmVcIjoxMDAsXCJjb250cmFzdFwiOjEwMCxcInNhdHVyYXRpb25cIjoxMDAsXCJodWVcIjoxMDAsXCJ3Yk1vZGVcIjotMSxcIndiVGVtcGVyYXR1cmVcIjoxMDAsXCJ0aW50XCI6MTAwLFwic2hhZG93XCI6MTAwLFwiaGlnaGxpZ2h0XCI6MTAwLFwibGlnaHRiYWxhbmNlXCI6MTAwLFwic2hhcnBuZXNzXCI6MTAwfSIsImVmZmVjdFZhbHVlIjoie1wiZmlsdGVySW5kaWNhdGlvblwiOjQwOTcsXCJmaWx0ZXJUeXBlXCI6MCxcImFscGhhVmFsdWVcIjoxMDB9IiwiaXNCbGVuZGluZyI6dHJ1ZSwiaXNOb3RSZUVkaXQiOmZhbHNlLCJzZXBWZXJzaW9uIjoiMTMwMTAwIiwicmVTaXplIjo0LCJyb3RhdGlvbiI6MSwiYWRqdXN0bWVudFZhbHVlIjoie1wibUNyb3BTdGF0ZVwiOjEzMTA3Nn0iLCJpc0FwcGx5U2hhcGVDb3JyZWN0aW9uIjpmYWxzZX0AAKELFgAAAE9yaWdpbmFsX1BhdGhfSGFzaF9LZXk5ZGM5ZmMxMjViMWNhZTU2ZWQ0Y2VkNGRhZjEwOTA0ODUyMDZkYzBjOTM1M2NlZTA0Y2Y0YjcyMjlhOTA0Y2VjLzI1MDVTRUZIawAAAAIAAAAAAKEL1gMAAHMDAAAAAKELYwAAAGMAAAAkAAAAU0VGVA==",B,P,N],projectUrl:"https://headphones-ecommerce.onrender.com/",repoUrl:"https://github.com/Cyberj1998/Headphones"},{name:"3D Interactive Website",description:(0,p.jsxs)(p.Fragment,{children:["This React project showcases a stunning ",(0,p.jsx)("span",{className:"bg-gradient-to-r from-[#3d74ff] to-[#3dd8ff] text-transparent bg-clip-text",children:"3D model"})," of a floating island using ",(0,p.jsx)("span",{className:"bg-gradient-to-r from-[#3d74ff] to-[#3dd8ff] text-transparent bg-clip-text",children:"Three.js"})," and ",(0,p.jsx)("span",{className:"bg-gradient-to-r from-[#3d74ff] to-[#3dd8ff] text-transparent bg-clip-text",children:"React-Three-Fiber"}),". The user can interact with the 3D model by rotating it using drag-and-drop gestures"]}),techStack:[T,S,E,M],projectUrl:"https://threedworld.onrender.com",repoUrl:"https://github.com/Cyberj1998/3DWorld"},{name:"Anime Infinite Scroll",description:(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("span",{className:"bg-gradient-to-r from-[#3d74ff] to-[#3dd8ff] text-transparent bg-clip-text",children:"Next.js"})," project to showcase the ",(0,p.jsx)("span",{className:"bg-gradient-to-r from-[#3d74ff] to-[#3dd8ff] text-transparent bg-clip-text",children:"server-side"})," actions, we also use the ",(0,p.jsx)("span",{className:"bg-gradient-to-r from-[#3d74ff] to-[#3dd8ff] text-transparent bg-clip-text",children:"Framer Motion"})," library to create nice and smooth scroll animations"]}),techStack:[R,M,B],projectUrl:"https://animescroll.onrender.com",repoUrl:"https://github.com/Cyberj1998/AnimeScroll"},{name:"Node.js API/Landing Page",description:(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("span",{className:"bg-gradient-to-r from-[#3d74ff] to-[#3dd8ff] text-transparent bg-clip-text",children:"Node.js"})," API that everyone can use to build amazing projects. Alongside that, I built this attractive landing page with ",(0,p.jsx)("span",{className:"bg-gradient-to-r from-[#3d74ff] to-[#3dd8ff] text-transparent bg-clip-text",children:"Three.js"})," and Redux to showcase what you can do with this ",(0,p.jsx)("span",{className:"bg-gradient-to-r from-[#3d74ff] to-[#3dd8ff] text-transparent bg-clip-text",children:"API"})]}),techStack:[T,S,M,B,E,C,P],projectUrl:"https://gamingchairslandingpage.onrender.com",repoUrl:"https://github.com/Cyberj1998/GamingChairsLandingPage"},{name:"T-Shirt Customization",description:(0,p.jsxs)(p.Fragment,{children:["Modern T-shirt customization page with ",(0,p.jsx)("span",{className:"bg-gradient-to-r from-[#3d74ff] to-[#3dd8ff] text-transparent bg-clip-text",children:"3D interactive model"})," thanks to the power of ",(0,p.jsx)("span",{className:"bg-gradient-to-r from-[#3d74ff] to-[#3dd8ff] text-transparent bg-clip-text",children:"Three.js"}),", and modern style using ",(0,p.jsx)("span",{className:"bg-gradient-to-r from-[#3d74ff] to-[#3dd8ff] text-transparent bg-clip-text",children:"Tailwind CSS"})," and ",(0,p.jsx)("span",{className:"bg-gradient-to-r from-[#3d74ff] to-[#3dd8ff] text-transparent bg-clip-text",children:"Framer Motion"}),"."]}),techStack:[T,S,M,E,B],projectUrl:"https://t-shirt-customizer-e4c4.onrender.com",repoUrl:"https://github.com/Cyberj1998/T-Shirt-Customizer"},{name:"E-Commerce with Redux & Emailjs",description:(0,p.jsxs)(p.Fragment,{children:["Full E-Commerce website with ",(0,p.jsx)("span",{className:"bg-gradient-to-r from-[#3d74ff] to-[#3dd8ff] text-transparent bg-clip-text",children:"node.js"})," server to store and load the products, add to cart functions with ",(0,p.jsx)("span",{className:"bg-gradient-to-r from-[#3d74ff] to-[#3dd8ff] text-transparent bg-clip-text",children:"Redux"})," 3d models with ",(0,p.jsx)("span",{className:"bg-gradient-to-r from-[#3d74ff] to-[#3dd8ff] text-transparent bg-clip-text",children:"ThreeJs"})," and modern animations using ",(0,p.jsx)("span",{className:"bg-gradient-to-r from-[#3d74ff] to-[#3dd8ff] text-transparent bg-clip-text",children:"Framer Motion."})," Plus ",(0,p.jsx)("span",{className:"bg-gradient-to-r from-[#3d74ff] to-[#3dd8ff] text-transparent bg-clip-text",children:"Supabase"})," for the control and management of the database"]}),techStack:[T,S,M,B,E,C,P,N],projectUrl:"https://primeburgers.onrender.com",repoUrl:"https://github.com/Cyberj1998/primeburgers"},{name:"Sleek Design Landing Page",description:(0,p.jsxs)(p.Fragment,{children:["Sleek and modern design of a landing page dedicated to ",(0,p.jsx)("span",{className:"bg-gradient-to-r from-[#3d74ff] to-[#3dd8ff] text-transparent bg-clip-text",children:"E-scooters"}),", modern responsive design using ",(0,p.jsx)("span",{className:"bg-gradient-to-r from-[#3d74ff] to-[#3dd8ff] text-transparent bg-clip-text",children:"Tailwind CSS"})," and ",(0,p.jsx)("span",{className:"bg-gradient-to-r from-[#3d74ff] to-[#3dd8ff] text-transparent bg-clip-text",children:"Three.js"})," to add 3D models to our website. Finally, some smooth animations using the power of ",(0,p.jsx)("span",{className:"bg-gradient-to-r from-[#3d74ff] to-[#3dd8ff] text-transparent bg-clip-text",children:"Framer Motion"})," to catch the eye of the user even more."]}),techStack:[T,S,M,B,E],projectUrl:"https://e-scooter.onrender.com",repoUrl:"https://github.com/Cyberj1998/e-scooter"},{name:"A Modern Gaming Experience",description:(0,p.jsxs)(p.Fragment,{children:["This modern website features a sleek, futuristic design that transforms the gaming experience. With captivating videos that draw users in and ",(0,p.jsx)("span",{className:"bg-gradient-to-r from-[#3d74ff] to-[#3dd8ff] text-transparent bg-clip-text",children:"GSAP"})," animations that flow smoothly, every interaction feels seamless. Built with ",(0,p.jsx)("span",{className:"bg-gradient-to-r from-[#3d74ff] to-[#3dd8ff] text-transparent bg-clip-text",children:"Tailwind CSS"}),", the site ensures a responsive and aesthetically pleasing layout"]}),techStack:[T,S,M,I],projectUrl:"https://gaming-website-ih46.onrender.com",repoUrl:"https://github.com/Cyberj1998/gaming_website"},{name:"Eye Catching Landing Page",description:(0,p.jsxs)(p.Fragment,{children:["Fizzi is a landing page for a fictional soda brand that is anything but ordinary. It features an eye-catching design that uses the power of ",(0,p.jsx)("span",{className:"bg-gradient-to-r from-[#3d74ff] to-[#3dd8ff] text-transparent bg-clip-text",children:"Three.js"})," and ",(0,p.jsx)("span",{className:"bg-gradient-to-r from-[#3d74ff] to-[#3dd8ff] text-transparent bg-clip-text",children:"GSAP"})," combined to create amazing animations with 3D models to catch the user's attention. It also utilizes ",(0,p.jsx)("span",{className:"bg-gradient-to-r from-[#3d74ff] to-[#3dd8ff] text-transparent bg-clip-text",children:"Tailwind CSS"})," for further styling"]}),techStack:[T,S,M,I],projectUrl:"https://fizzi.onrender.com",repoUrl:"https://github.com/Cyberj1998/fizzi"},{name:"Modern Design Next App",description:(0,p.jsxs)(p.Fragment,{children:["Very modern design ",(0,p.jsx)("span",{className:"bg-gradient-to-r from-[#3d74ff] to-[#3dd8ff] text-transparent bg-clip-text",children:"Next.js"})," website showcasing an AI company, using the power of ",(0,p.jsx)("span",{className:"bg-gradient-to-r from-[#3d74ff] to-[#3dd8ff] text-transparent bg-clip-text",children:"Next.js"})," and ",(0,p.jsx)("span",{className:"bg-gradient-to-r from-[#3d74ff] to-[#3dd8ff] text-transparent bg-clip-text",children:"Tailwind CSS"})," to create a stunning design and"]}),techStack:[R,M],projectUrl:"https://brainwave-538z.onrender.com/",repoUrl:"https://github.com/Cyberj1998/Brainwave"}],L=function(e){return(0,p.jsxs)("div",{children:[(0,p.jsx)("h3",{className:"font-heading font-semibold text-[20px] bg-gradient-to-r from-[#3d74ff] to-[#3dd8ff] text-transparent bg-clip-text",children:e.data.name}),(0,p.jsx)("p",{className:"text-[#757575] font-body",children:e.data.description}),(0,p.jsx)("div",{className:"border border-grey-500 h-fit flex flex-wrap justify-left items-center rounded-[5px]",children:e.data.techStack.map((function(e,t){return(0,p.jsx)("img",{src:e,className:"w-[40px] h-[40px] m-[5px]",alt:"react"},t)}))}),(0,p.jsxs)("div",{className:"flex flex-row",children:[(0,p.jsx)("button",{className:"bg-[#e8e8e8] p-[5px] rounded-[5px] mt-[5px] font-sans font-semibold cursor-pointer hover:bg-[#c1c1c1]",onClick:function(){return t=e.data.projectUrl,void(window.location.href="".concat(t));var t},children:"Go to Project"}),(0,p.jsxs)("button",{className:"bg-[#e8e8e8] p-[5px] rounded-[5px] mt-[5px] font-sans font-semibold cursor-pointer hover:bg-[#c1c1c1] ml-5 flex",onClick:function(){return t=e.data.repoUrl,void(window.location.href="".concat(t));var t},children:["See Source Code ",(0,p.jsx)("img",{src:k,className:"h-[20px]",alt:"logo"})]})]})]})};var O,F,U=function(){return(0,p.jsx)("div",{id:"projects",className:"h-fit bg-[#212121] p-[10px]",children:(0,p.jsxs)(w.VerticalTimeline,{children:[D.map((function(e,t){return(0,p.jsx)(w.VerticalTimelineElement,{children:(0,p.jsx)(L,{data:e},t)})})),(0,p.jsx)(w.VerticalTimelineElement,{children:(0,p.jsxs)("div",{children:[(0,p.jsx)("h3",{className:"font-sans font-semibold text-[20px] bg-gradient-to-r from-[#3d74ff] to-[#3dd8ff] text-transparent bg-clip-text",children:"Be Patient"}),(0,p.jsxs)("p",{className:"text-[#757575]",children:["More ",(0,p.jsx)("span",{className:"bg-gradient-to-r from-[#3d74ff] to-[#3dd8ff] text-transparent bg-clip-text",children:"Awesome"})," Projects Coming ",(0,p.jsx)("span",{className:"bg-gradient-to-r from-[#3d74ff] to-[#3dd8ff] text-transparent bg-clip-text",children:"Soon"}),"...."]})]})})]})})};function z(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.includes(n)||{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function G(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function q(e){return function(e){if(Array.isArray(e))return o(e)}(e)||G(e)||s(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function H(e){return a(e)||G(e)||s(e)||u()}function V(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,m(r.key),r)}}function W(e,t,n){return t&&j(e.prototype,t),n&&j(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function X(e,t){return X=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},X(e,t)}function Y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&X(e,t)}function Q(e){return Q=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Q(e)}function J(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(J=function(){return!!e})()}function K(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Z(e,t){if(t&&("object"==v(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return K(e)}function $(e){var t=J();return function(){var n,r=Q(e);if(t){var i=Q(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Z(this,n)}}function ee(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=s(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function te(e,t,n){if(J())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,t);var i=new(e.bind.apply(e,r));return n&&X(i,n.prototype),i}function ne(e){var t="function"==typeof Map?new Map:void 0;return ne=function(e){if(null===e||!function(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return"function"==typeof e}}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return te(e,arguments,Q(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),X(n,e)},ne(e)}function re(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}function ie(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){re(a,r,i,o,s,"next",e)}function s(e){re(a,r,i,o,s,"throw",e)}o(void 0)}))}}function ae(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=Q(e)););return e}function oe(){return oe="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=ae(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},oe.apply(null,arguments)}function se(){se=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var a=t&&t.prototype instanceof m?t:m,o=Object.create(a.prototype),s=new R(r||[]);return i(o,"_invoke",{value:k(e,n,s)}),o}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=c;var d="suspendedStart",f="executing",p="completed",A={};function m(){}function g(){}function y(){}var b={};l(b,o,(function(){return this}));var x=Object.getPrototypeOf,_=x&&x(x(B([])));_&&_!==n&&r.call(_,o)&&(b=_);var w=y.prototype=m.prototype=Object.create(b);function S(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function M(e,t){function n(i,a,o,s){var u=h(e[i],e,a);if("throw"!==u.type){var l=u.arg,c=l.value;return c&&"object"==v(c)&&r.call(c,"__await")?t.resolve(c.__await).then((function(e){n("next",e,o,s)}),(function(e){n("throw",e,o,s)})):t.resolve(c).then((function(e){l.value=e,o(l)}),(function(e){return n("throw",e,o,s)}))}s(u.arg)}var a;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return a=a?a.then(i,i):i()}})}function k(t,n,r){var i=d;return function(a,o){if(i===f)throw Error("Generator is already running");if(i===p){if("throw"===a)throw o;return{value:e,done:!0}}for(r.method=a,r.arg=o;;){var s=r.delegate;if(s){var u=T(s,r);if(u){if(u===A)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===d)throw i=p,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=f;var l=h(t,n,r);if("normal"===l.type){if(i=r.done?p:"suspendedYield",l.arg===A)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(i=p,r.method="throw",r.arg=l.arg)}}}function T(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,T(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),A;var a=h(i,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,A;var o=a.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,A):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,A)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function R(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function B(t){if(t||""===t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(v(t)+" is not iterable")}return g.prototype=y,i(w,"constructor",{value:y,configurable:!0}),i(y,"constructor",{value:g,configurable:!0}),g.displayName=l(y,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,u,"GeneratorFunction")),e.prototype=Object.create(w),e},t.awrap=function(e){return{__await:e}},S(M.prototype),l(M.prototype,s,(function(){return this})),t.AsyncIterator=M,t.async=function(e,n,r,i,a){void 0===a&&(a=Promise);var o=new M(c(e,n,r,i),a);return t.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},S(w),l(w,u,"Generator"),l(w,o,(function(){return this})),l(w,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=B,R.prototype={constructor:R,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(C),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var u=r.call(o,"catchLoc"),l=r.call(o,"finallyLoc");if(u&&l){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,A):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),A},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),A}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;C(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:B(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),A}},t}var ue="170",le={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},ce={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},he=0,de=1,fe=2,pe=3,Ae=0,ve=1,me=2,ge=3,ye=0,be=1,xe=2,_e=0,we=1,Se=2,Me=3,ke=4,Te=5,Ee=100,Ce=101,Re=102,Be=103,Pe=104,Ne=200,Ie=201,De=202,Le=203,Oe=204,Fe=205,Ue=206,ze=207,Ge=208,qe=209,He=210,Ve=211,je=212,We=213,Xe=214,Ye=0,Qe=1,Je=2,Ke=3,Ze=4,$e=5,et=6,tt=7,nt=0,rt=1,it=2,at=0,ot=1,st=2,ut=3,lt=4,ct=5,ht=6,dt=7,ft="attached",pt="detached",At=300,vt=301,mt=302,gt=303,yt=304,bt=306,xt=1e3,_t=1001,wt=1002,St=1003,Mt=1004,kt=1004,Tt=1005,Et=1005,Ct=1006,Rt=1007,Bt=1007,Pt=1008,Nt=1008,It=1009,Dt=1010,Lt=1011,Ot=1012,Ft=1013,Ut=1014,zt=1015,Gt=1016,qt=1017,Ht=1018,Vt=1020,jt=35902,Wt=1021,Xt=1022,Yt=1023,Qt=1024,Jt=1025,Kt=1026,Zt=1027,$t=1028,en=1029,tn=1030,nn=1031,rn=1032,an=1033,on=33776,sn=33777,un=33778,ln=33779,cn=35840,hn=35841,dn=35842,fn=35843,pn=36196,An=37492,vn=37496,mn=37808,gn=37809,yn=37810,bn=37811,xn=37812,_n=37813,wn=37814,Sn=37815,Mn=37816,kn=37817,Tn=37818,En=37819,Cn=37820,Rn=37821,Bn=36492,Pn=36494,Nn=36495,In=36283,Dn=36284,Ln=36285,On=36286,Fn=2200,Un=2201,zn=2202,Gn=2300,qn=2301,Hn=2302,Vn=2400,jn=2401,Wn=2402,Xn=2500,Yn=2501,Qn=0,Jn=1,Kn=2,Zn=3200,$n=3201,er=3202,tr=3203,nr=0,rr=1,ir="",ar="srgb",or="srgb-linear",sr="linear",ur="srgb",lr=0,cr=7680,hr=7681,dr=7682,fr=7683,pr=34055,Ar=34056,vr=5386,mr=512,gr=513,yr=514,br=515,xr=516,_r=517,wr=518,Sr=519,Mr=512,kr=513,Tr=514,Er=515,Cr=516,Rr=517,Br=518,Pr=519,Nr=35044,Ir=35048,Dr=35040,Lr=35045,Or=35049,Fr=35041,Ur=35046,zr=35050,Gr=35042,qr="100",Hr="300 es",Vr=2e3,jr=2001,Wr=function(){function e(){V(this,e)}return W(e,[{key:"addEventListener",value:function(e,t){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}},{key:"hasEventListener",value:function(e,t){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)}},{key:"removeEventListener",value:function(e,t){if(void 0!==this._listeners){var n=this._listeners[e];if(void 0!==n){var r=n.indexOf(t);-1!==r&&n.splice(r,1)}}}},{key:"dispatchEvent",value:function(e){if(void 0!==this._listeners){var t=this._listeners[e.type];if(void 0!==t){e.target=this;for(var n=t.slice(0),r=0,i=n.length;r<i;r++)n[r].call(this,e);e.target=null}}}}]),e}(),Xr=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],Yr=1234567,Qr=Math.PI/180,Jr=180/Math.PI;function Kr(){var e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(Xr[255&e]+Xr[e>>8&255]+Xr[e>>16&255]+Xr[e>>24&255]+"-"+Xr[255&t]+Xr[t>>8&255]+"-"+Xr[t>>16&15|64]+Xr[t>>24&255]+"-"+Xr[63&n|128]+Xr[n>>8&255]+"-"+Xr[n>>16&255]+Xr[n>>24&255]+Xr[255&r]+Xr[r>>8&255]+Xr[r>>16&255]+Xr[r>>24&255]).toLowerCase()}function Zr(e,t,n){return Math.max(t,Math.min(n,e))}function $r(e,t){return(e%t+t)%t}function ei(e,t,n){return(1-n)*e+n*t}function ti(e,t){switch(t.constructor){case Float32Array:return e;case Uint32Array:return e/4294967295;case Uint16Array:return e/65535;case Uint8Array:return e/255;case Int32Array:return Math.max(e/2147483647,-1);case Int16Array:return Math.max(e/32767,-1);case Int8Array:return Math.max(e/127,-1);default:throw new Error("Invalid component type.")}}function ni(e,t){switch(t.constructor){case Float32Array:return e;case Uint32Array:return Math.round(4294967295*e);case Uint16Array:return Math.round(65535*e);case Uint8Array:return Math.round(255*e);case Int32Array:return Math.round(2147483647*e);case Int16Array:return Math.round(32767*e);case Int8Array:return Math.round(127*e);default:throw new Error("Invalid component type.")}}var ri={DEG2RAD:Qr,RAD2DEG:Jr,generateUUID:Kr,clamp:Zr,euclideanModulo:$r,mapLinear:function(e,t,n,r,i){return r+(e-t)*(i-r)/(n-t)},inverseLerp:function(e,t,n){return e!==t?(n-e)/(t-e):0},lerp:ei,damp:function(e,t,n,r){return ei(e,t,1-Math.exp(-n*r))},pingpong:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return t-Math.abs($r(e,2*t)-t)},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*(3-2*e)},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},seededRandom:function(e){void 0!==e&&(Yr=e);var t=Yr+=1831565813;return t=Math.imul(t^t>>>15,1|t),(((t^=t+Math.imul(t^t>>>7,61|t))^t>>>14)>>>0)/4294967296},degToRad:function(e){return e*Qr},radToDeg:function(e){return e*Jr},isPowerOfTwo:function(e){return 0===(e&e-1)&&0!==e},ceilPowerOfTwo:function(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},floorPowerOfTwo:function(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))},setQuaternionFromProperEuler:function(e,t,n,r,i){var a=Math.cos,o=Math.sin,s=a(n/2),u=o(n/2),l=a((t+r)/2),c=o((t+r)/2),h=a((t-r)/2),d=o((t-r)/2),f=a((r-t)/2),p=o((r-t)/2);switch(i){case"XYX":e.set(s*c,u*h,u*d,s*l);break;case"YZY":e.set(u*d,s*c,u*h,s*l);break;case"ZXZ":e.set(u*h,u*d,s*c,s*l);break;case"XZX":e.set(s*c,u*p,u*f,s*l);break;case"YXY":e.set(u*f,s*c,u*p,s*l);break;case"ZYZ":e.set(u*p,u*f,s*c,s*l);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}},normalize:ni,denormalize:ti},ii=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;V(this,t),t.prototype.isVector2=!0,this.x=e,this.y=n}return W(t,[{key:"width",get:function(){return this.x},set:function(e){this.x=e}},{key:"height",get:function(){return this.y},set:function(e){this.y=e}},{key:"set",value:function(e,t){return this.x=e,this.y=t,this}},{key:"setScalar",value:function(e){return this.x=e,this.y=e,this}},{key:"setX",value:function(e){return this.x=e,this}},{key:"setY",value:function(e){return this.y=e,this}},{key:"setComponent",value:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}},{key:"getComponent",value:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y)}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this}},{key:"add",value:function(e){return this.x+=e.x,this.y+=e.y,this}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this}},{key:"addVectors",value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}},{key:"addScaledVector",value:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}},{key:"sub",value:function(e){return this.x-=e.x,this.y-=e.y,this}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this}},{key:"subVectors",value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}},{key:"multiply",value:function(e){return this.x*=e.x,this.y*=e.y,this}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this}},{key:"divide",value:function(e){return this.x/=e.x,this.y/=e.y,this}},{key:"divideScalar",value:function(e){return this.multiplyScalar(1/e)}},{key:"applyMatrix3",value:function(e){var t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this}},{key:"min",value:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}},{key:"max",value:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}},{key:"clamp",value:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}},{key:"clampScalar",value:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}},{key:"clampLength",value:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},{key:"roundToZero",value:function(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y}},{key:"cross",value:function(e){return this.x*e.y-this.y*e.x}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"angle",value:function(){var e=Math.atan2(-this.y,-this.x)+Math.PI;return e}},{key:"angleTo",value:function(e){var t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;var n=this.dot(e)/t;return Math.acos(Zr(n,-1,1))}},{key:"distanceTo",value:function(e){return Math.sqrt(this.distanceToSquared(e))}},{key:"distanceToSquared",value:function(e){var t=this.x-e.x,n=this.y-e.y;return t*t+n*n}},{key:"manhattanDistanceTo",value:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}},{key:"setLength",value:function(e){return this.normalize().multiplyScalar(e)}},{key:"lerp",value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}},{key:"lerpVectors",value:function(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e}},{key:"fromBufferAttribute",value:function(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}},{key:"rotateAround",value:function(e,t){var n=Math.cos(t),r=Math.sin(t),i=this.x-e.x,a=this.y-e.y;return this.x=i*n-a*r+e.x,this.y=i*r+a*n+e.y,this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this}},{key:Symbol.iterator,value:se().mark((function e(){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.x;case 2:return e.next=4,this.y;case 4:case"end":return e.stop()}}),e,this)}))}]),t}(),ai=function(){function e(t,n,r,i,a,o,s,u,l){V(this,e),e.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],void 0!==t&&this.set(t,n,r,i,a,o,s,u,l)}return W(e,[{key:"set",value:function(e,t,n,r,i,a,o,s,u){var l=this.elements;return l[0]=e,l[1]=r,l[2]=o,l[3]=t,l[4]=i,l[5]=s,l[6]=n,l[7]=a,l[8]=u,this}},{key:"identity",value:function(){return this.set(1,0,0,0,1,0,0,0,1),this}},{key:"copy",value:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}},{key:"extractBasis",value:function(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}},{key:"setFromMatrix4",value:function(e){var t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}},{key:"multiply",value:function(e){return this.multiplyMatrices(this,e)}},{key:"premultiply",value:function(e){return this.multiplyMatrices(e,this)}},{key:"multiplyMatrices",value:function(e,t){var n=e.elements,r=t.elements,i=this.elements,a=n[0],o=n[3],s=n[6],u=n[1],l=n[4],c=n[7],h=n[2],d=n[5],f=n[8],p=r[0],A=r[3],v=r[6],m=r[1],g=r[4],y=r[7],b=r[2],x=r[5],_=r[8];return i[0]=a*p+o*m+s*b,i[3]=a*A+o*g+s*x,i[6]=a*v+o*y+s*_,i[1]=u*p+l*m+c*b,i[4]=u*A+l*g+c*x,i[7]=u*v+l*y+c*_,i[2]=h*p+d*m+f*b,i[5]=h*A+d*g+f*x,i[8]=h*v+d*y+f*_,this}},{key:"multiplyScalar",value:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}},{key:"determinant",value:function(){var e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],s=e[6],u=e[7],l=e[8];return t*a*l-t*o*u-n*i*l+n*o*s+r*i*u-r*a*s}},{key:"invert",value:function(){var e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],s=e[6],u=e[7],l=e[8],c=l*a-o*u,h=o*s-l*i,d=u*i-a*s,f=t*c+n*h+r*d;if(0===f)return this.set(0,0,0,0,0,0,0,0,0);var p=1/f;return e[0]=c*p,e[1]=(r*u-l*n)*p,e[2]=(o*n-r*a)*p,e[3]=h*p,e[4]=(l*t-r*s)*p,e[5]=(r*i-o*t)*p,e[6]=d*p,e[7]=(n*s-u*t)*p,e[8]=(a*t-n*i)*p,this}},{key:"transpose",value:function(){var e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}},{key:"getNormalMatrix",value:function(e){return this.setFromMatrix4(e).invert().transpose()}},{key:"transposeIntoArray",value:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}},{key:"setUvTransform",value:function(e,t,n,r,i,a,o){var s=Math.cos(i),u=Math.sin(i);return this.set(n*s,n*u,-n*(s*a+u*o)+a+e,-r*u,r*s,-r*(-u*a+s*o)+o+t,0,0,1),this}},{key:"scale",value:function(e,t){return this.premultiply(oi.makeScale(e,t)),this}},{key:"rotate",value:function(e){return this.premultiply(oi.makeRotation(-e)),this}},{key:"translate",value:function(e,t){return this.premultiply(oi.makeTranslation(e,t)),this}},{key:"makeTranslation",value:function(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}},{key:"makeRotation",value:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}},{key:"makeScale",value:function(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}},{key:"equals",value:function(e){for(var t=this.elements,n=e.elements,r=0;r<9;r++)if(t[r]!==n[r])return!1;return!0}},{key:"fromArray",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<9;n++)this.elements[n]=e[n+t];return this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}},{key:"clone",value:function(){return(new this.constructor).fromArray(this.elements)}}]),e}(),oi=new ai;function si(e){for(var t=e.length-1;t>=0;--t)if(e[t]>=65535)return!0;return!1}var ui={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:Uint8ClampedArray,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function li(e,t){return new ui[e](t)}function ci(e){return document.createElementNS("http://www.w3.org/1999/xhtml",e)}function hi(){var e=ci("canvas");return e.style.display="block",e}var di={};function fi(e){e in di||(di[e]=!0,console.warn(e))}function pi(e,t,n){return new Promise((function(r,i){setTimeout((function a(){switch(e.clientWaitSync(t,e.SYNC_FLUSH_COMMANDS_BIT,0)){case e.WAIT_FAILED:i();break;case e.TIMEOUT_EXPIRED:setTimeout(a,n);break;default:r()}}),n)}))}function Ai(e){var t=e.elements;t[2]=.5*t[2]+.5*t[3],t[6]=.5*t[6]+.5*t[7],t[10]=.5*t[10]+.5*t[11],t[14]=.5*t[14]+.5*t[15]}function vi(e){var t=e.elements;-1===t[11]?(t[10]=-t[10]-1,t[14]=-t[14]):(t[10]=-t[10],t[14]=1-t[14])}var mi={enabled:!0,workingColorSpace:or,spaces:{},convert:function(e,t,n){return!1!==this.enabled&&t!==n&&t&&n?(this.spaces[t].transfer===ur&&(e.r=gi(e.r),e.g=gi(e.g),e.b=gi(e.b)),this.spaces[t].primaries!==this.spaces[n].primaries&&(e.applyMatrix3(this.spaces[t].toXYZ),e.applyMatrix3(this.spaces[n].fromXYZ)),this.spaces[n].transfer===ur&&(e.r=yi(e.r),e.g=yi(e.g),e.b=yi(e.b)),e):e},fromWorkingColorSpace:function(e,t){return this.convert(e,this.workingColorSpace,t)},toWorkingColorSpace:function(e,t){return this.convert(e,t,this.workingColorSpace)},getPrimaries:function(e){return this.spaces[e].primaries},getTransfer:function(e){return e===ir?sr:this.spaces[e].transfer},getLuminanceCoefficients:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.workingColorSpace;return e.fromArray(this.spaces[t].luminanceCoefficients)},define:function(e){Object.assign(this.spaces,e)},_getMatrix:function(e,t,n){return e.copy(this.spaces[t].toXYZ).multiply(this.spaces[n].fromXYZ)},_getDrawingBufferColorSpace:function(e){return this.spaces[e].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.workingColorSpace;return this.spaces[e].workingColorSpaceConfig.unpackColorSpace}};function gi(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function yi(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}var bi,xi=[.64,.33,.3,.6,.15,.06],_i=[.2126,.7152,.0722],wi=[.3127,.329],Si=(new ai).set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),Mi=(new ai).set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);mi.define((g(O={},or,{primaries:xi,whitePoint:wi,transfer:sr,toXYZ:Si,fromXYZ:Mi,luminanceCoefficients:_i,workingColorSpaceConfig:{unpackColorSpace:ar},outputColorSpaceConfig:{drawingBufferColorSpace:ar}}),g(O,ar,{primaries:xi,whitePoint:wi,transfer:ur,toXYZ:Si,fromXYZ:Mi,luminanceCoefficients:_i,outputColorSpaceConfig:{drawingBufferColorSpace:ar}}),O));var ki=function(){function e(){V(this,e)}return W(e,null,[{key:"getDataURL",value:function(e){if(/^data:/i.test(e.src))return e.src;if("undefined"===typeof HTMLCanvasElement)return e.src;var t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===bi&&(bi=ci("canvas")),bi.width=e.width,bi.height=e.height;var n=bi.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=bi}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}},{key:"sRGBToLinear",value:function(e){if("undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap){var t=ci("canvas");t.width=e.width,t.height=e.height;var n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);for(var r=n.getImageData(0,0,e.width,e.height),i=r.data,a=0;a<i.length;a++)i[a]=255*gi(i[a]/255);return n.putImageData(r,0,0),t}if(e.data){for(var o=e.data.slice(0),s=0;s<o.length;s++)o instanceof Uint8Array||o instanceof Uint8ClampedArray?o[s]=Math.floor(255*gi(o[s]/255)):o[s]=gi(o[s]);return{data:o,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}]),e}(),Ti=0,Ei=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;V(this,e),this.isSource=!0,Object.defineProperty(this,"id",{value:Ti++}),this.uuid=Kr(),this.data=t,this.dataReady=!0,this.version=0}return W(e,[{key:"needsUpdate",set:function(e){!0===e&&this.version++}},{key:"toJSON",value:function(e){var t=void 0===e||"string"===typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];var n={uuid:this.uuid,url:""},r=this.data;if(null!==r){var i;if(Array.isArray(r)){i=[];for(var a=0,o=r.length;a<o;a++)r[a].isDataTexture?i.push(Ci(r[a].image)):i.push(Ci(r[a]))}else i=Ci(r);n.url=i}return t||(e.images[this.uuid]=n),n}}]),e}();function Ci(e){return"undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap?ki.getDataURL(e):e.data?{data:Array.from(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}var Ri=0,Bi=function(e){Y(n,e);var t=$(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.DEFAULT_IMAGE,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.DEFAULT_MAPPING,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:_t,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:_t,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Ct,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Pt,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Yt,c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:It,h=arguments.length>8&&void 0!==arguments[8]?arguments[8]:n.DEFAULT_ANISOTROPY,d=arguments.length>9&&void 0!==arguments[9]?arguments[9]:ir;return V(this,n),(e=t.call(this)).isTexture=!0,Object.defineProperty(K(e),"id",{value:Ri++}),e.uuid=Kr(),e.name="",e.source=new Ei(r),e.mipmaps=[],e.mapping=i,e.channel=0,e.wrapS=a,e.wrapT=o,e.magFilter=s,e.minFilter=u,e.anisotropy=h,e.format=l,e.internalFormat=null,e.type=c,e.offset=new ii(0,0),e.repeat=new ii(1,1),e.center=new ii(0,0),e.rotation=0,e.matrixAutoUpdate=!0,e.matrix=new ai,e.generateMipmaps=!0,e.premultiplyAlpha=!1,e.flipY=!0,e.unpackAlignment=4,e.colorSpace=d,e.userData={},e.version=0,e.onUpdate=null,e.isRenderTargetTexture=!1,e.pmremVersion=0,e}return W(n,[{key:"image",get:function(){return this.source.data},set:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.source.data=e}},{key:"updateMatrix",value:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}},{key:"toJSON",value:function(e){var t=void 0===e||"string"===typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];var n={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}},{key:"transformUv",value:function(e){if(this.mapping!==At)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case xt:e.x=e.x-Math.floor(e.x);break;case _t:e.x=e.x<0?0:1;break;case wt:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case xt:e.y=e.y-Math.floor(e.y);break;case _t:e.y=e.y<0?0:1;break;case wt:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}},{key:"needsUpdate",set:function(e){!0===e&&(this.version++,this.source.needsUpdate=!0)}},{key:"needsPMREMUpdate",set:function(e){!0===e&&this.pmremVersion++}}]),n}(Wr);Bi.DEFAULT_IMAGE=null,Bi.DEFAULT_MAPPING=At,Bi.DEFAULT_ANISOTROPY=1;var Pi=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;V(this,t),t.prototype.isVector4=!0,this.x=e,this.y=n,this.z=r,this.w=i}return W(t,[{key:"width",get:function(){return this.z},set:function(e){this.z=e}},{key:"height",get:function(){return this.w},set:function(e){this.w=e}},{key:"set",value:function(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this}},{key:"setScalar",value:function(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}},{key:"setX",value:function(e){return this.x=e,this}},{key:"setY",value:function(e){return this.y=e,this}},{key:"setZ",value:function(e){return this.z=e,this}},{key:"setW",value:function(e){return this.w=e,this}},{key:"setComponent",value:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}},{key:"getComponent",value:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z,this.w)}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}},{key:"add",value:function(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}},{key:"addVectors",value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}},{key:"addScaledVector",value:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}},{key:"sub",value:function(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}},{key:"subVectors",value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}},{key:"multiply",value:function(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}},{key:"applyMatrix4",value:function(e){var t=this.x,n=this.y,r=this.z,i=this.w,a=e.elements;return this.x=a[0]*t+a[4]*n+a[8]*r+a[12]*i,this.y=a[1]*t+a[5]*n+a[9]*r+a[13]*i,this.z=a[2]*t+a[6]*n+a[10]*r+a[14]*i,this.w=a[3]*t+a[7]*n+a[11]*r+a[15]*i,this}},{key:"divide",value:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}},{key:"divideScalar",value:function(e){return this.multiplyScalar(1/e)}},{key:"setAxisAngleFromQuaternion",value:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}},{key:"setAxisAngleFromRotationMatrix",value:function(e){var t,n,r,i,a=.01,o=.1,s=e.elements,u=s[0],l=s[4],c=s[8],h=s[1],d=s[5],f=s[9],p=s[2],A=s[6],v=s[10];if(Math.abs(l-h)<a&&Math.abs(c-p)<a&&Math.abs(f-A)<a){if(Math.abs(l+h)<o&&Math.abs(c+p)<o&&Math.abs(f+A)<o&&Math.abs(u+d+v-3)<o)return this.set(1,0,0,0),this;t=Math.PI;var m=(u+1)/2,g=(d+1)/2,y=(v+1)/2,b=(l+h)/4,x=(c+p)/4,_=(f+A)/4;return m>g&&m>y?m<a?(n=0,r=.707106781,i=.707106781):(r=b/(n=Math.sqrt(m)),i=x/n):g>y?g<a?(n=.707106781,r=0,i=.707106781):(n=b/(r=Math.sqrt(g)),i=_/r):y<a?(n=.707106781,r=.707106781,i=0):(n=x/(i=Math.sqrt(y)),r=_/i),this.set(n,r,i,t),this}var w=Math.sqrt((A-f)*(A-f)+(c-p)*(c-p)+(h-l)*(h-l));return Math.abs(w)<.001&&(w=1),this.x=(A-f)/w,this.y=(c-p)/w,this.z=(h-l)/w,this.w=Math.acos((u+d+v-1)/2),this}},{key:"setFromMatrixPosition",value:function(e){var t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}},{key:"min",value:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}},{key:"max",value:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}},{key:"clamp",value:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}},{key:"clampScalar",value:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}},{key:"clampLength",value:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}},{key:"roundToZero",value:function(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"setLength",value:function(e){return this.normalize().multiplyScalar(e)}},{key:"lerp",value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}},{key:"lerpVectors",value:function(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}},{key:"fromBufferAttribute",value:function(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}},{key:Symbol.iterator,value:se().mark((function e(){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.x;case 2:return e.next=4,this.y;case 4:return e.next=6,this.z;case 6:return e.next=8,this.w;case 8:case"end":return e.stop()}}),e,this)}))}]),t}(),Ni=function(e){Y(n,e);var t=$(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};V(this,n),(e=t.call(this)).isRenderTarget=!0,e.width=r,e.height=i,e.depth=1,e.scissor=new Pi(0,0,r,i),e.scissorTest=!1,e.viewport=new Pi(0,0,r,i);var o={width:r,height:i,depth:1};a=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Ct,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},a);var s=new Bi(o,a.mapping,a.wrapS,a.wrapT,a.magFilter,a.minFilter,a.format,a.type,a.anisotropy,a.colorSpace);s.flipY=!1,s.generateMipmaps=a.generateMipmaps,s.internalFormat=a.internalFormat,e.textures=[];for(var u=a.count,l=0;l<u;l++)e.textures[l]=s.clone(),e.textures[l].isRenderTargetTexture=!0;return e.depthBuffer=a.depthBuffer,e.stencilBuffer=a.stencilBuffer,e.resolveDepthBuffer=a.resolveDepthBuffer,e.resolveStencilBuffer=a.resolveStencilBuffer,e.depthTexture=a.depthTexture,e.samples=a.samples,e}return W(n,[{key:"texture",get:function(){return this.textures[0]},set:function(e){this.textures[0]=e}},{key:"setSize",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(var r=0,i=this.textures.length;r<i;r++)this.textures[r].image.width=e,this.textures[r].image.height=t,this.textures[r].image.depth=n;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(var t=0,n=e.textures.length;t<n;t++)this.textures[t]=e.textures[t].clone(),this.textures[t].isRenderTargetTexture=!0;var r=Object.assign({},e.texture.image);return this.texture.source=new Ei(r),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}}]),n}(Wr),Ii=function(e){Y(n,e);var t=$(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return V(this,n),(e=t.call(this,r,i,a)).isWebGLRenderTarget=!0,e}return W(n)}(Ni),Di=function(e){Y(n,e);var t=$(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return V(this,n),(e=t.call(this,null)).isDataArrayTexture=!0,e.image={data:r,width:i,height:a,depth:o},e.magFilter=St,e.minFilter=St,e.wrapR=_t,e.generateMipmaps=!1,e.flipY=!1,e.unpackAlignment=1,e.layerUpdates=new Set,e}return W(n,[{key:"addLayerUpdate",value:function(e){this.layerUpdates.add(e)}},{key:"clearLayerUpdates",value:function(){this.layerUpdates.clear()}}]),n}(Bi),Li=function(e){Y(n,e);var t=$(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return V(this,n),(e=t.call(this,r,i,o)).isWebGLArrayRenderTarget=!0,e.depth=a,e.texture=new Di(null,r,i,a),e.texture.isRenderTargetTexture=!0,e}return W(n)}(Ii),Oi=function(e){Y(n,e);var t=$(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return V(this,n),(e=t.call(this,null)).isData3DTexture=!0,e.image={data:r,width:i,height:a,depth:o},e.magFilter=St,e.minFilter=St,e.wrapR=_t,e.generateMipmaps=!1,e.flipY=!1,e.unpackAlignment=1,e}return W(n)}(Bi),Fi=function(e){Y(n,e);var t=$(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return V(this,n),(e=t.call(this,r,i,o)).isWebGL3DRenderTarget=!0,e.depth=a,e.texture=new Oi(null,r,i,a),e.texture.isRenderTargetTexture=!0,e}return W(n)}(Ii),Ui=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;V(this,t),this.isQuaternion=!0,this._x=e,this._y=n,this._z=r,this._w=i}return W(t,[{key:"x",get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},{key:"y",get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},{key:"z",get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},{key:"w",get:function(){return this._w},set:function(e){this._w=e,this._onChangeCallback()}},{key:"set",value:function(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this}},{key:"clone",value:function(){return new this.constructor(this._x,this._y,this._z,this._w)}},{key:"copy",value:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}},{key:"setFromEuler",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=e._x,r=e._y,i=e._z,a=e._order,o=Math.cos,s=Math.sin,u=o(n/2),l=o(r/2),c=o(i/2),h=s(n/2),d=s(r/2),f=s(i/2);switch(a){case"XYZ":this._x=h*l*c+u*d*f,this._y=u*d*c-h*l*f,this._z=u*l*f+h*d*c,this._w=u*l*c-h*d*f;break;case"YXZ":this._x=h*l*c+u*d*f,this._y=u*d*c-h*l*f,this._z=u*l*f-h*d*c,this._w=u*l*c+h*d*f;break;case"ZXY":this._x=h*l*c-u*d*f,this._y=u*d*c+h*l*f,this._z=u*l*f+h*d*c,this._w=u*l*c-h*d*f;break;case"ZYX":this._x=h*l*c-u*d*f,this._y=u*d*c+h*l*f,this._z=u*l*f-h*d*c,this._w=u*l*c+h*d*f;break;case"YZX":this._x=h*l*c+u*d*f,this._y=u*d*c+h*l*f,this._z=u*l*f-h*d*c,this._w=u*l*c-h*d*f;break;case"XZY":this._x=h*l*c-u*d*f,this._y=u*d*c-h*l*f,this._z=u*l*f+h*d*c,this._w=u*l*c+h*d*f;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return!0===t&&this._onChangeCallback(),this}},{key:"setFromAxisAngle",value:function(e,t){var n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}},{key:"setFromRotationMatrix",value:function(e){var t=e.elements,n=t[0],r=t[4],i=t[8],a=t[1],o=t[5],s=t[9],u=t[2],l=t[6],c=t[10],h=n+o+c;if(h>0){var d=.5/Math.sqrt(h+1);this._w=.25/d,this._x=(l-s)*d,this._y=(i-u)*d,this._z=(a-r)*d}else if(n>o&&n>c){var f=2*Math.sqrt(1+n-o-c);this._w=(l-s)/f,this._x=.25*f,this._y=(r+a)/f,this._z=(i+u)/f}else if(o>c){var p=2*Math.sqrt(1+o-n-c);this._w=(i-u)/p,this._x=(r+a)/p,this._y=.25*p,this._z=(s+l)/p}else{var A=2*Math.sqrt(1+c-n-o);this._w=(a-r)/A,this._x=(i+u)/A,this._y=(s+l)/A,this._z=.25*A}return this._onChangeCallback(),this}},{key:"setFromUnitVectors",value:function(e,t){var n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}},{key:"angleTo",value:function(e){return 2*Math.acos(Math.abs(Zr(this.dot(e),-1,1)))}},{key:"rotateTowards",value:function(e,t){var n=this.angleTo(e);if(0===n)return this;var r=Math.min(1,t/n);return this.slerp(e,r),this}},{key:"identity",value:function(){return this.set(0,0,0,1)}},{key:"invert",value:function(){return this.conjugate()}},{key:"conjugate",value:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}},{key:"dot",value:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}},{key:"lengthSq",value:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}},{key:"length",value:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}},{key:"normalize",value:function(){var e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}},{key:"multiply",value:function(e){return this.multiplyQuaternions(this,e)}},{key:"premultiply",value:function(e){return this.multiplyQuaternions(e,this)}},{key:"multiplyQuaternions",value:function(e,t){var n=e._x,r=e._y,i=e._z,a=e._w,o=t._x,s=t._y,u=t._z,l=t._w;return this._x=n*l+a*o+r*u-i*s,this._y=r*l+a*s+i*o-n*u,this._z=i*l+a*u+n*s-r*o,this._w=a*l-n*o-r*s-i*u,this._onChangeCallback(),this}},{key:"slerp",value:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var n=this._x,r=this._y,i=this._z,a=this._w,o=a*e._w+n*e._x+r*e._y+i*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=a,this._x=n,this._y=r,this._z=i,this;var s=1-o*o;if(s<=Number.EPSILON){var u=1-t;return this._w=u*a+t*this._w,this._x=u*n+t*this._x,this._y=u*r+t*this._y,this._z=u*i+t*this._z,this.normalize(),this}var l=Math.sqrt(s),c=Math.atan2(l,o),h=Math.sin((1-t)*c)/l,d=Math.sin(t*c)/l;return this._w=a*h+this._w*d,this._x=n*h+this._x*d,this._y=r*h+this._y*d,this._z=i*h+this._z*d,this._onChangeCallback(),this}},{key:"slerpQuaternions",value:function(e,t,n){return this.copy(e).slerp(t,n)}},{key:"random",value:function(){var e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),n=Math.random(),r=Math.sqrt(1-n),i=Math.sqrt(n);return this.set(r*Math.sin(e),r*Math.cos(e),i*Math.sin(t),i*Math.cos(t))}},{key:"equals",value:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}},{key:"fromBufferAttribute",value:function(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}},{key:"toJSON",value:function(){return this.toArray()}},{key:"_onChange",value:function(e){return this._onChangeCallback=e,this}},{key:"_onChangeCallback",value:function(){}},{key:Symbol.iterator,value:se().mark((function e(){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._x;case 2:return e.next=4,this._y;case 4:return e.next=6,this._z;case 6:return e.next=8,this._w;case 8:case"end":return e.stop()}}),e,this)}))}],[{key:"slerpFlat",value:function(e,t,n,r,i,a,o){var s=n[r+0],u=n[r+1],l=n[r+2],c=n[r+3],h=i[a+0],d=i[a+1],f=i[a+2],p=i[a+3];if(0===o)return e[t+0]=s,e[t+1]=u,e[t+2]=l,void(e[t+3]=c);if(1===o)return e[t+0]=h,e[t+1]=d,e[t+2]=f,void(e[t+3]=p);if(c!==p||s!==h||u!==d||l!==f){var A=1-o,v=s*h+u*d+l*f+c*p,m=v>=0?1:-1,g=1-v*v;if(g>Number.EPSILON){var y=Math.sqrt(g),b=Math.atan2(y,v*m);A=Math.sin(A*b)/y,o=Math.sin(o*b)/y}var x=o*m;if(s=s*A+h*x,u=u*A+d*x,l=l*A+f*x,c=c*A+p*x,A===1-o){var _=1/Math.sqrt(s*s+u*u+l*l+c*c);s*=_,u*=_,l*=_,c*=_}}e[t]=s,e[t+1]=u,e[t+2]=l,e[t+3]=c}},{key:"multiplyQuaternionsFlat",value:function(e,t,n,r,i,a){var o=n[r],s=n[r+1],u=n[r+2],l=n[r+3],c=i[a],h=i[a+1],d=i[a+2],f=i[a+3];return e[t]=o*f+l*c+s*d-u*h,e[t+1]=s*f+l*h+u*c-o*d,e[t+2]=u*f+l*d+o*h-s*c,e[t+3]=l*f-o*c-s*h-u*d,e}}]),t}(),zi=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;V(this,t),t.prototype.isVector3=!0,this.x=e,this.y=n,this.z=r}return W(t,[{key:"set",value:function(e,t,n){return void 0===n&&(n=this.z),this.x=e,this.y=t,this.z=n,this}},{key:"setScalar",value:function(e){return this.x=e,this.y=e,this.z=e,this}},{key:"setX",value:function(e){return this.x=e,this}},{key:"setY",value:function(e){return this.y=e,this}},{key:"setZ",value:function(e){return this.z=e,this}},{key:"setComponent",value:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}},{key:"getComponent",value:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z)}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}},{key:"add",value:function(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this.z+=e,this}},{key:"addVectors",value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}},{key:"addScaledVector",value:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}},{key:"sub",value:function(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this.z-=e,this}},{key:"subVectors",value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}},{key:"multiply",value:function(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this.z*=e,this}},{key:"multiplyVectors",value:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}},{key:"applyEuler",value:function(e){return this.applyQuaternion(qi.setFromEuler(e))}},{key:"applyAxisAngle",value:function(e,t){return this.applyQuaternion(qi.setFromAxisAngle(e,t))}},{key:"applyMatrix3",value:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6]*r,this.y=i[1]*t+i[4]*n+i[7]*r,this.z=i[2]*t+i[5]*n+i[8]*r,this}},{key:"applyNormalMatrix",value:function(e){return this.applyMatrix3(e).normalize()}},{key:"applyMatrix4",value:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements,a=1/(i[3]*t+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*t+i[4]*n+i[8]*r+i[12])*a,this.y=(i[1]*t+i[5]*n+i[9]*r+i[13])*a,this.z=(i[2]*t+i[6]*n+i[10]*r+i[14])*a,this}},{key:"applyQuaternion",value:function(e){var t=this.x,n=this.y,r=this.z,i=e.x,a=e.y,o=e.z,s=e.w,u=2*(a*r-o*n),l=2*(o*t-i*r),c=2*(i*n-a*t);return this.x=t+s*u+a*c-o*l,this.y=n+s*l+o*u-i*c,this.z=r+s*c+i*l-a*u,this}},{key:"project",value:function(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}},{key:"unproject",value:function(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}},{key:"transformDirection",value:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[4]*n+i[8]*r,this.y=i[1]*t+i[5]*n+i[9]*r,this.z=i[2]*t+i[6]*n+i[10]*r,this.normalize()}},{key:"divide",value:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}},{key:"divideScalar",value:function(e){return this.multiplyScalar(1/e)}},{key:"min",value:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}},{key:"max",value:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}},{key:"clamp",value:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}},{key:"clampScalar",value:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}},{key:"clampLength",value:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}},{key:"roundToZero",value:function(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y+this.z*e.z}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"setLength",value:function(e){return this.normalize().multiplyScalar(e)}},{key:"lerp",value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}},{key:"lerpVectors",value:function(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}},{key:"cross",value:function(e){return this.crossVectors(this,e)}},{key:"crossVectors",value:function(e,t){var n=e.x,r=e.y,i=e.z,a=t.x,o=t.y,s=t.z;return this.x=r*s-i*o,this.y=i*a-n*s,this.z=n*o-r*a,this}},{key:"projectOnVector",value:function(e){var t=e.lengthSq();if(0===t)return this.set(0,0,0);var n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}},{key:"projectOnPlane",value:function(e){return Gi.copy(this).projectOnVector(e),this.sub(Gi)}},{key:"reflect",value:function(e){return this.sub(Gi.copy(e).multiplyScalar(2*this.dot(e)))}},{key:"angleTo",value:function(e){var t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;var n=this.dot(e)/t;return Math.acos(Zr(n,-1,1))}},{key:"distanceTo",value:function(e){return Math.sqrt(this.distanceToSquared(e))}},{key:"distanceToSquared",value:function(e){var t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r}},{key:"manhattanDistanceTo",value:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}},{key:"setFromSpherical",value:function(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}},{key:"setFromSphericalCoords",value:function(e,t,n){var r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this}},{key:"setFromCylindrical",value:function(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}},{key:"setFromCylindricalCoords",value:function(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}},{key:"setFromMatrixPosition",value:function(e){var t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}},{key:"setFromMatrixScale",value:function(e){var t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this}},{key:"setFromMatrixColumn",value:function(e,t){return this.fromArray(e.elements,4*t)}},{key:"setFromMatrix3Column",value:function(e,t){return this.fromArray(e.elements,3*t)}},{key:"setFromEuler",value:function(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}},{key:"setFromColor",value:function(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}},{key:"fromBufferAttribute",value:function(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}},{key:"randomDirection",value:function(){var e=Math.random()*Math.PI*2,t=2*Math.random()-1,n=Math.sqrt(1-t*t);return this.x=n*Math.cos(e),this.y=t,this.z=n*Math.sin(e),this}},{key:Symbol.iterator,value:se().mark((function e(){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.x;case 2:return e.next=4,this.y;case 4:return e.next=6,this.z;case 6:case"end":return e.stop()}}),e,this)}))}]),t}(),Gi=new zi,qi=new Ui,Hi=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new zi(1/0,1/0,1/0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new zi(-1/0,-1/0,-1/0);V(this,e),this.isBox3=!0,this.min=t,this.max=n}return W(e,[{key:"set",value:function(e,t){return this.min.copy(e),this.max.copy(t),this}},{key:"setFromArray",value:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t+=3)this.expandByPoint(ji.fromArray(e,t));return this}},{key:"setFromBufferAttribute",value:function(e){this.makeEmpty();for(var t=0,n=e.count;t<n;t++)this.expandByPoint(ji.fromBufferAttribute(e,t));return this}},{key:"setFromPoints",value:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}},{key:"setFromCenterAndSize",value:function(e,t){var n=ji.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}},{key:"setFromObject",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.makeEmpty(),this.expandByObject(e,t)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.min.copy(e.min),this.max.copy(e.max),this}},{key:"makeEmpty",value:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}},{key:"isEmpty",value:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}},{key:"getCenter",value:function(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}},{key:"getSize",value:function(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}},{key:"expandByPoint",value:function(e){return this.min.min(e),this.max.max(e),this}},{key:"expandByVector",value:function(e){return this.min.sub(e),this.max.add(e),this}},{key:"expandByScalar",value:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this}},{key:"expandByObject",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.updateWorldMatrix(!1,!1);var n=e.geometry;if(void 0!==n){var r=n.getAttribute("position");if(!0===t&&void 0!==r&&!0!==e.isInstancedMesh)for(var i=0,a=r.count;i<a;i++)!0===e.isMesh?e.getVertexPosition(i,ji):ji.fromBufferAttribute(r,i),ji.applyMatrix4(e.matrixWorld),this.expandByPoint(ji);else void 0!==e.boundingBox?(null===e.boundingBox&&e.computeBoundingBox(),Wi.copy(e.boundingBox)):(null===n.boundingBox&&n.computeBoundingBox(),Wi.copy(n.boundingBox)),Wi.applyMatrix4(e.matrixWorld),this.union(Wi)}for(var o=e.children,s=0,u=o.length;s<u;s++)this.expandByObject(o[s],t);return this}},{key:"containsPoint",value:function(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}},{key:"containsBox",value:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}},{key:"getParameter",value:function(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}},{key:"intersectsBox",value:function(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}},{key:"intersectsSphere",value:function(e){return this.clampPoint(e.center,ji),ji.distanceToSquared(e.center)<=e.radius*e.radius}},{key:"intersectsPlane",value:function(e){var t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}},{key:"intersectsTriangle",value:function(e){if(this.isEmpty())return!1;this.getCenter($i),ea.subVectors(this.max,$i),Xi.subVectors(e.a,$i),Yi.subVectors(e.b,$i),Qi.subVectors(e.c,$i),Ji.subVectors(Yi,Xi),Ki.subVectors(Qi,Yi),Zi.subVectors(Xi,Qi);var t=[0,-Ji.z,Ji.y,0,-Ki.z,Ki.y,0,-Zi.z,Zi.y,Ji.z,0,-Ji.x,Ki.z,0,-Ki.x,Zi.z,0,-Zi.x,-Ji.y,Ji.x,0,-Ki.y,Ki.x,0,-Zi.y,Zi.x,0];return!!ra(t,Xi,Yi,Qi,ea)&&(!!ra(t=[1,0,0,0,1,0,0,0,1],Xi,Yi,Qi,ea)&&(ta.crossVectors(Ji,Ki),ra(t=[ta.x,ta.y,ta.z],Xi,Yi,Qi,ea)))}},{key:"clampPoint",value:function(e,t){return t.copy(e).clamp(this.min,this.max)}},{key:"distanceToPoint",value:function(e){return this.clampPoint(e,ji).distanceTo(e)}},{key:"getBoundingSphere",value:function(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=.5*this.getSize(ji).length()),e}},{key:"intersect",value:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}},{key:"union",value:function(e){return this.min.min(e.min),this.max.max(e.max),this}},{key:"applyMatrix4",value:function(e){return this.isEmpty()||(Vi[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Vi[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Vi[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Vi[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Vi[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Vi[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Vi[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Vi[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Vi)),this}},{key:"translate",value:function(e){return this.min.add(e),this.max.add(e),this}},{key:"equals",value:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}]),e}(),Vi=[new zi,new zi,new zi,new zi,new zi,new zi,new zi,new zi],ji=new zi,Wi=new Hi,Xi=new zi,Yi=new zi,Qi=new zi,Ji=new zi,Ki=new zi,Zi=new zi,$i=new zi,ea=new zi,ta=new zi,na=new zi;function ra(e,t,n,r,i){for(var a=0,o=e.length-3;a<=o;a+=3){na.fromArray(e,a);var s=i.x*Math.abs(na.x)+i.y*Math.abs(na.y)+i.z*Math.abs(na.z),u=t.dot(na),l=n.dot(na),c=r.dot(na);if(Math.max(-Math.max(u,l,c),Math.min(u,l,c))>s)return!1}return!0}var ia=new Hi,aa=new zi,oa=new zi,sa=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new zi,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;V(this,e),this.isSphere=!0,this.center=t,this.radius=n}return W(e,[{key:"set",value:function(e,t){return this.center.copy(e),this.radius=t,this}},{key:"setFromPoints",value:function(e,t){var n=this.center;void 0!==t?n.copy(t):ia.setFromPoints(e).getCenter(n);for(var r=0,i=0,a=e.length;i<a;i++)r=Math.max(r,n.distanceToSquared(e[i]));return this.radius=Math.sqrt(r),this}},{key:"copy",value:function(e){return this.center.copy(e.center),this.radius=e.radius,this}},{key:"isEmpty",value:function(){return this.radius<0}},{key:"makeEmpty",value:function(){return this.center.set(0,0,0),this.radius=-1,this}},{key:"containsPoint",value:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}},{key:"distanceToPoint",value:function(e){return e.distanceTo(this.center)-this.radius}},{key:"intersectsSphere",value:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}},{key:"intersectsBox",value:function(e){return e.intersectsSphere(this)}},{key:"intersectsPlane",value:function(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}},{key:"clampPoint",value:function(e,t){var n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}},{key:"getBoundingBox",value:function(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}},{key:"applyMatrix4",value:function(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}},{key:"translate",value:function(e){return this.center.add(e),this}},{key:"expandByPoint",value:function(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;aa.subVectors(e,this.center);var t=aa.lengthSq();if(t>this.radius*this.radius){var n=Math.sqrt(t),r=.5*(n-this.radius);this.center.addScaledVector(aa,r/n),this.radius+=r}return this}},{key:"union",value:function(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(!0===this.center.equals(e.center)?this.radius=Math.max(this.radius,e.radius):(oa.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(aa.copy(e.center).add(oa)),this.expandByPoint(aa.copy(e.center).sub(oa))),this)}},{key:"equals",value:function(e){return e.center.equals(this.center)&&e.radius===this.radius}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}(),ua=new zi,la=new zi,ca=new zi,ha=new zi,da=new zi,fa=new zi,pa=new zi,Aa=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new zi,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new zi(0,0,-1);V(this,e),this.origin=t,this.direction=n}return W(e,[{key:"set",value:function(e,t){return this.origin.copy(e),this.direction.copy(t),this}},{key:"copy",value:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}},{key:"at",value:function(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}},{key:"lookAt",value:function(e){return this.direction.copy(e).sub(this.origin).normalize(),this}},{key:"recast",value:function(e){return this.origin.copy(this.at(e,ua)),this}},{key:"closestPointToPoint",value:function(e,t){t.subVectors(e,this.origin);var n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,n)}},{key:"distanceToPoint",value:function(e){return Math.sqrt(this.distanceSqToPoint(e))}},{key:"distanceSqToPoint",value:function(e){var t=ua.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(ua.copy(this.origin).addScaledVector(this.direction,t),ua.distanceToSquared(e))}},{key:"distanceSqToSegment",value:function(e,t,n,r){la.copy(e).add(t).multiplyScalar(.5),ca.copy(t).sub(e).normalize(),ha.copy(this.origin).sub(la);var i,a,o,s,u=.5*e.distanceTo(t),l=-this.direction.dot(ca),c=ha.dot(this.direction),h=-ha.dot(ca),d=ha.lengthSq(),f=Math.abs(1-l*l);if(f>0)if(a=l*c-h,s=u*f,(i=l*h-c)>=0)if(a>=-s)if(a<=s){var p=1/f;o=(i*=p)*(i+l*(a*=p)+2*c)+a*(l*i+a+2*h)+d}else a=u,o=-(i=Math.max(0,-(l*a+c)))*i+a*(a+2*h)+d;else a=-u,o=-(i=Math.max(0,-(l*a+c)))*i+a*(a+2*h)+d;else a<=-s?o=-(i=Math.max(0,-(-l*u+c)))*i+(a=i>0?-u:Math.min(Math.max(-u,-h),u))*(a+2*h)+d:a<=s?(i=0,o=(a=Math.min(Math.max(-u,-h),u))*(a+2*h)+d):o=-(i=Math.max(0,-(l*u+c)))*i+(a=i>0?u:Math.min(Math.max(-u,-h),u))*(a+2*h)+d;else a=l>0?-u:u,o=-(i=Math.max(0,-(l*a+c)))*i+a*(a+2*h)+d;return n&&n.copy(this.origin).addScaledVector(this.direction,i),r&&r.copy(la).addScaledVector(ca,a),o}},{key:"intersectSphere",value:function(e,t){ua.subVectors(e.center,this.origin);var n=ua.dot(this.direction),r=ua.dot(ua)-n*n,i=e.radius*e.radius;if(r>i)return null;var a=Math.sqrt(i-r),o=n-a,s=n+a;return s<0?null:o<0?this.at(s,t):this.at(o,t)}},{key:"intersectsSphere",value:function(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}},{key:"distanceToPlane",value:function(e){var t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;var n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}},{key:"intersectPlane",value:function(e,t){var n=this.distanceToPlane(e);return null===n?null:this.at(n,t)}},{key:"intersectsPlane",value:function(e){var t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0}},{key:"intersectBox",value:function(e,t){var n,r,i,a,o,s,u=1/this.direction.x,l=1/this.direction.y,c=1/this.direction.z,h=this.origin;return u>=0?(n=(e.min.x-h.x)*u,r=(e.max.x-h.x)*u):(n=(e.max.x-h.x)*u,r=(e.min.x-h.x)*u),l>=0?(i=(e.min.y-h.y)*l,a=(e.max.y-h.y)*l):(i=(e.max.y-h.y)*l,a=(e.min.y-h.y)*l),n>a||i>r?null:((i>n||isNaN(n))&&(n=i),(a<r||isNaN(r))&&(r=a),c>=0?(o=(e.min.z-h.z)*c,s=(e.max.z-h.z)*c):(o=(e.max.z-h.z)*c,s=(e.min.z-h.z)*c),n>s||o>r?null:((o>n||n!==n)&&(n=o),(s<r||r!==r)&&(r=s),r<0?null:this.at(n>=0?n:r,t)))}},{key:"intersectsBox",value:function(e){return null!==this.intersectBox(e,ua)}},{key:"intersectTriangle",value:function(e,t,n,r,i){da.subVectors(t,e),fa.subVectors(n,e),pa.crossVectors(da,fa);var a,o=this.direction.dot(pa);if(o>0){if(r)return null;a=1}else{if(!(o<0))return null;a=-1,o=-o}ha.subVectors(this.origin,e);var s=a*this.direction.dot(fa.crossVectors(ha,fa));if(s<0)return null;var u=a*this.direction.dot(da.cross(ha));if(u<0)return null;if(s+u>o)return null;var l=-a*ha.dot(pa);return l<0?null:this.at(l/o,i)}},{key:"applyMatrix4",value:function(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}},{key:"equals",value:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}(),va=function(){function e(t,n,r,i,a,o,s,u,l,c,h,d,f,p,A,v){V(this,e),e.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],void 0!==t&&this.set(t,n,r,i,a,o,s,u,l,c,h,d,f,p,A,v)}return W(e,[{key:"set",value:function(e,t,n,r,i,a,o,s,u,l,c,h,d,f,p,A){var v=this.elements;return v[0]=e,v[4]=t,v[8]=n,v[12]=r,v[1]=i,v[5]=a,v[9]=o,v[13]=s,v[2]=u,v[6]=l,v[10]=c,v[14]=h,v[3]=d,v[7]=f,v[11]=p,v[15]=A,this}},{key:"identity",value:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}},{key:"clone",value:function(){return(new e).fromArray(this.elements)}},{key:"copy",value:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}},{key:"copyPosition",value:function(e){var t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}},{key:"setFromMatrix3",value:function(e){var t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}},{key:"extractBasis",value:function(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}},{key:"makeBasis",value:function(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}},{key:"extractRotation",value:function(e){var t=this.elements,n=e.elements,r=1/ma.setFromMatrixColumn(e,0).length(),i=1/ma.setFromMatrixColumn(e,1).length(),a=1/ma.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*i,t[5]=n[5]*i,t[6]=n[6]*i,t[7]=0,t[8]=n[8]*a,t[9]=n[9]*a,t[10]=n[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}},{key:"makeRotationFromEuler",value:function(e){var t=this.elements,n=e.x,r=e.y,i=e.z,a=Math.cos(n),o=Math.sin(n),s=Math.cos(r),u=Math.sin(r),l=Math.cos(i),c=Math.sin(i);if("XYZ"===e.order){var h=a*l,d=a*c,f=o*l,p=o*c;t[0]=s*l,t[4]=-s*c,t[8]=u,t[1]=d+f*u,t[5]=h-p*u,t[9]=-o*s,t[2]=p-h*u,t[6]=f+d*u,t[10]=a*s}else if("YXZ"===e.order){var A=s*l,v=s*c,m=u*l,g=u*c;t[0]=A+g*o,t[4]=m*o-v,t[8]=a*u,t[1]=a*c,t[5]=a*l,t[9]=-o,t[2]=v*o-m,t[6]=g+A*o,t[10]=a*s}else if("ZXY"===e.order){var y=s*l,b=s*c,x=u*l,_=u*c;t[0]=y-_*o,t[4]=-a*c,t[8]=x+b*o,t[1]=b+x*o,t[5]=a*l,t[9]=_-y*o,t[2]=-a*u,t[6]=o,t[10]=a*s}else if("ZYX"===e.order){var w=a*l,S=a*c,M=o*l,k=o*c;t[0]=s*l,t[4]=M*u-S,t[8]=w*u+k,t[1]=s*c,t[5]=k*u+w,t[9]=S*u-M,t[2]=-u,t[6]=o*s,t[10]=a*s}else if("YZX"===e.order){var T=a*s,E=a*u,C=o*s,R=o*u;t[0]=s*l,t[4]=R-T*c,t[8]=C*c+E,t[1]=c,t[5]=a*l,t[9]=-o*l,t[2]=-u*l,t[6]=E*c+C,t[10]=T-R*c}else if("XZY"===e.order){var B=a*s,P=a*u,N=o*s,I=o*u;t[0]=s*l,t[4]=-c,t[8]=u*l,t[1]=B*c+I,t[5]=a*l,t[9]=P*c-N,t[2]=N*c-P,t[6]=o*l,t[10]=I*c+B}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}},{key:"makeRotationFromQuaternion",value:function(e){return this.compose(ya,e,ba)}},{key:"lookAt",value:function(e,t,n){var r=this.elements;return wa.subVectors(e,t),0===wa.lengthSq()&&(wa.z=1),wa.normalize(),xa.crossVectors(n,wa),0===xa.lengthSq()&&(1===Math.abs(n.z)?wa.x+=1e-4:wa.z+=1e-4,wa.normalize(),xa.crossVectors(n,wa)),xa.normalize(),_a.crossVectors(wa,xa),r[0]=xa.x,r[4]=_a.x,r[8]=wa.x,r[1]=xa.y,r[5]=_a.y,r[9]=wa.y,r[2]=xa.z,r[6]=_a.z,r[10]=wa.z,this}},{key:"multiply",value:function(e){return this.multiplyMatrices(this,e)}},{key:"premultiply",value:function(e){return this.multiplyMatrices(e,this)}},{key:"multiplyMatrices",value:function(e,t){var n=e.elements,r=t.elements,i=this.elements,a=n[0],o=n[4],s=n[8],u=n[12],l=n[1],c=n[5],h=n[9],d=n[13],f=n[2],p=n[6],A=n[10],v=n[14],m=n[3],g=n[7],y=n[11],b=n[15],x=r[0],_=r[4],w=r[8],S=r[12],M=r[1],k=r[5],T=r[9],E=r[13],C=r[2],R=r[6],B=r[10],P=r[14],N=r[3],I=r[7],D=r[11],L=r[15];return i[0]=a*x+o*M+s*C+u*N,i[4]=a*_+o*k+s*R+u*I,i[8]=a*w+o*T+s*B+u*D,i[12]=a*S+o*E+s*P+u*L,i[1]=l*x+c*M+h*C+d*N,i[5]=l*_+c*k+h*R+d*I,i[9]=l*w+c*T+h*B+d*D,i[13]=l*S+c*E+h*P+d*L,i[2]=f*x+p*M+A*C+v*N,i[6]=f*_+p*k+A*R+v*I,i[10]=f*w+p*T+A*B+v*D,i[14]=f*S+p*E+A*P+v*L,i[3]=m*x+g*M+y*C+b*N,i[7]=m*_+g*k+y*R+b*I,i[11]=m*w+g*T+y*B+b*D,i[15]=m*S+g*E+y*P+b*L,this}},{key:"multiplyScalar",value:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}},{key:"determinant",value:function(){var e=this.elements,t=e[0],n=e[4],r=e[8],i=e[12],a=e[1],o=e[5],s=e[9],u=e[13],l=e[2],c=e[6],h=e[10],d=e[14];return e[3]*(+i*s*c-r*u*c-i*o*h+n*u*h+r*o*d-n*s*d)+e[7]*(+t*s*d-t*u*h+i*a*h-r*a*d+r*u*l-i*s*l)+e[11]*(+t*u*c-t*o*d-i*a*c+n*a*d+i*o*l-n*u*l)+e[15]*(-r*o*l-t*s*c+t*o*h+r*a*c-n*a*h+n*s*l)}},{key:"transpose",value:function(){var e,t=this.elements;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}},{key:"setPosition",value:function(e,t,n){var r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this}},{key:"invert",value:function(){var e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],s=e[6],u=e[7],l=e[8],c=e[9],h=e[10],d=e[11],f=e[12],p=e[13],A=e[14],v=e[15],m=c*A*u-p*h*u+p*s*d-o*A*d-c*s*v+o*h*v,g=f*h*u-l*A*u-f*s*d+a*A*d+l*s*v-a*h*v,y=l*p*u-f*c*u+f*o*d-a*p*d-l*o*v+a*c*v,b=f*c*s-l*p*s-f*o*h+a*p*h+l*o*A-a*c*A,x=t*m+n*g+r*y+i*b;if(0===x)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);var _=1/x;return e[0]=m*_,e[1]=(p*h*i-c*A*i-p*r*d+n*A*d+c*r*v-n*h*v)*_,e[2]=(o*A*i-p*s*i+p*r*u-n*A*u-o*r*v+n*s*v)*_,e[3]=(c*s*i-o*h*i-c*r*u+n*h*u+o*r*d-n*s*d)*_,e[4]=g*_,e[5]=(l*A*i-f*h*i+f*r*d-t*A*d-l*r*v+t*h*v)*_,e[6]=(f*s*i-a*A*i-f*r*u+t*A*u+a*r*v-t*s*v)*_,e[7]=(a*h*i-l*s*i+l*r*u-t*h*u-a*r*d+t*s*d)*_,e[8]=y*_,e[9]=(f*c*i-l*p*i-f*n*d+t*p*d+l*n*v-t*c*v)*_,e[10]=(a*p*i-f*o*i+f*n*u-t*p*u-a*n*v+t*o*v)*_,e[11]=(l*o*i-a*c*i-l*n*u+t*c*u+a*n*d-t*o*d)*_,e[12]=b*_,e[13]=(l*p*r-f*c*r+f*n*h-t*p*h-l*n*A+t*c*A)*_,e[14]=(f*o*r-a*p*r-f*n*s+t*p*s+a*n*A-t*o*A)*_,e[15]=(a*c*r-l*o*r+l*n*s-t*c*s-a*n*h+t*o*h)*_,this}},{key:"scale",value:function(e){var t=this.elements,n=e.x,r=e.y,i=e.z;return t[0]*=n,t[4]*=r,t[8]*=i,t[1]*=n,t[5]*=r,t[9]*=i,t[2]*=n,t[6]*=r,t[10]*=i,t[3]*=n,t[7]*=r,t[11]*=i,this}},{key:"getMaxScaleOnAxis",value:function(){var e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))}},{key:"makeTranslation",value:function(e,t,n){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}},{key:"makeRotationX",value:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}},{key:"makeRotationY",value:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}},{key:"makeRotationZ",value:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}},{key:"makeRotationAxis",value:function(e,t){var n=Math.cos(t),r=Math.sin(t),i=1-n,a=e.x,o=e.y,s=e.z,u=i*a,l=i*o;return this.set(u*a+n,u*o-r*s,u*s+r*o,0,u*o+r*s,l*o+n,l*s-r*a,0,u*s-r*o,l*s+r*a,i*s*s+n,0,0,0,0,1),this}},{key:"makeScale",value:function(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}},{key:"makeShear",value:function(e,t,n,r,i,a){return this.set(1,n,i,0,e,1,a,0,t,r,1,0,0,0,0,1),this}},{key:"compose",value:function(e,t,n){var r=this.elements,i=t._x,a=t._y,o=t._z,s=t._w,u=i+i,l=a+a,c=o+o,h=i*u,d=i*l,f=i*c,p=a*l,A=a*c,v=o*c,m=s*u,g=s*l,y=s*c,b=n.x,x=n.y,_=n.z;return r[0]=(1-(p+v))*b,r[1]=(d+y)*b,r[2]=(f-g)*b,r[3]=0,r[4]=(d-y)*x,r[5]=(1-(h+v))*x,r[6]=(A+m)*x,r[7]=0,r[8]=(f+g)*_,r[9]=(A-m)*_,r[10]=(1-(h+p))*_,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}},{key:"decompose",value:function(e,t,n){var r=this.elements,i=ma.set(r[0],r[1],r[2]).length(),a=ma.set(r[4],r[5],r[6]).length(),o=ma.set(r[8],r[9],r[10]).length();this.determinant()<0&&(i=-i),e.x=r[12],e.y=r[13],e.z=r[14],ga.copy(this);var s=1/i,u=1/a,l=1/o;return ga.elements[0]*=s,ga.elements[1]*=s,ga.elements[2]*=s,ga.elements[4]*=u,ga.elements[5]*=u,ga.elements[6]*=u,ga.elements[8]*=l,ga.elements[9]*=l,ga.elements[10]*=l,t.setFromRotationMatrix(ga),n.x=i,n.y=a,n.z=o,this}},{key:"makePerspective",value:function(e,t,n,r,i,a){var o,s,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Vr,l=this.elements,c=2*i/(t-e),h=2*i/(n-r),d=(t+e)/(t-e),f=(n+r)/(n-r);if(u===Vr)o=-(a+i)/(a-i),s=-2*a*i/(a-i);else{if(u!==jr)throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+u);o=-a/(a-i),s=-a*i/(a-i)}return l[0]=c,l[4]=0,l[8]=d,l[12]=0,l[1]=0,l[5]=h,l[9]=f,l[13]=0,l[2]=0,l[6]=0,l[10]=o,l[14]=s,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}},{key:"makeOrthographic",value:function(e,t,n,r,i,a){var o,s,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Vr,l=this.elements,c=1/(t-e),h=1/(n-r),d=1/(a-i),f=(t+e)*c,p=(n+r)*h;if(u===Vr)o=(a+i)*d,s=-2*d;else{if(u!==jr)throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+u);o=i*d,s=-1*d}return l[0]=2*c,l[4]=0,l[8]=0,l[12]=-f,l[1]=0,l[5]=2*h,l[9]=0,l[13]=-p,l[2]=0,l[6]=0,l[10]=s,l[14]=-o,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}},{key:"equals",value:function(e){for(var t=this.elements,n=e.elements,r=0;r<16;r++)if(t[r]!==n[r])return!1;return!0}},{key:"fromArray",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<16;n++)this.elements[n]=e[n+t];return this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}]),e}(),ma=new zi,ga=new va,ya=new zi(0,0,0),ba=new zi(1,1,1),xa=new zi,_a=new zi,wa=new zi,Sa=new va,Ma=new Ui,ka=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.DEFAULT_ORDER;V(this,t),this.isEuler=!0,this._x=e,this._y=n,this._z=r,this._order=i}return W(t,[{key:"x",get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},{key:"y",get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},{key:"z",get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},{key:"order",get:function(){return this._order},set:function(e){this._order=e,this._onChangeCallback()}},{key:"set",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this._order;return this._x=e,this._y=t,this._z=n,this._order=r,this._onChangeCallback(),this}},{key:"clone",value:function(){return new this.constructor(this._x,this._y,this._z,this._order)}},{key:"copy",value:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}},{key:"setFromRotationMatrix",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=e.elements,i=r[0],a=r[4],o=r[8],s=r[1],u=r[5],l=r[9],c=r[2],h=r[6],d=r[10];switch(t){case"XYZ":this._y=Math.asin(Zr(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-l,d),this._z=Math.atan2(-a,i)):(this._x=Math.atan2(h,u),this._z=0);break;case"YXZ":this._x=Math.asin(-Zr(l,-1,1)),Math.abs(l)<.9999999?(this._y=Math.atan2(o,d),this._z=Math.atan2(s,u)):(this._y=Math.atan2(-c,i),this._z=0);break;case"ZXY":this._x=Math.asin(Zr(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-c,d),this._z=Math.atan2(-a,u)):(this._y=0,this._z=Math.atan2(s,i));break;case"ZYX":this._y=Math.asin(-Zr(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(h,d),this._z=Math.atan2(s,i)):(this._x=0,this._z=Math.atan2(-a,u));break;case"YZX":this._z=Math.asin(Zr(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-l,u),this._y=Math.atan2(-c,i)):(this._x=0,this._y=Math.atan2(o,d));break;case"XZY":this._z=Math.asin(-Zr(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(h,u),this._y=Math.atan2(o,i)):(this._x=Math.atan2(-l,d),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!0===n&&this._onChangeCallback(),this}},{key:"setFromQuaternion",value:function(e,t,n){return Sa.makeRotationFromQuaternion(e),this.setFromRotationMatrix(Sa,t,n)}},{key:"setFromVector3",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order;return this.set(e.x,e.y,e.z,t)}},{key:"reorder",value:function(e){return Ma.setFromEuler(this),this.setFromQuaternion(Ma,e)}},{key:"equals",value:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}},{key:"fromArray",value:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}},{key:"_onChange",value:function(e){return this._onChangeCallback=e,this}},{key:"_onChangeCallback",value:function(){}},{key:Symbol.iterator,value:se().mark((function e(){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._x;case 2:return e.next=4,this._y;case 4:return e.next=6,this._z;case 6:return e.next=8,this._order;case 8:case"end":return e.stop()}}),e,this)}))}]),t}();ka.DEFAULT_ORDER="XYZ";var Ta=function(){function e(){V(this,e),this.mask=1}return W(e,[{key:"set",value:function(e){this.mask=(1<<e|0)>>>0}},{key:"enable",value:function(e){this.mask|=1<<e|0}},{key:"enableAll",value:function(){this.mask=-1}},{key:"toggle",value:function(e){this.mask^=1<<e|0}},{key:"disable",value:function(e){this.mask&=~(1<<e|0)}},{key:"disableAll",value:function(){this.mask=0}},{key:"test",value:function(e){return 0!==(this.mask&e.mask)}},{key:"isEnabled",value:function(e){return 0!==(this.mask&(1<<e|0))}}]),e}(),Ea=0,Ca=new zi,Ra=new Ui,Ba=new va,Pa=new zi,Na=new zi,Ia=new zi,Da=new Ui,La=new zi(1,0,0),Oa=new zi(0,1,0),Fa=new zi(0,0,1),Ua={type:"added"},za={type:"removed"},Ga={type:"childadded",child:null},qa={type:"childremoved",child:null},Ha=function(e){Y(n,e);var t=$(n);function n(){var e;V(this,n),(e=t.call(this)).isObject3D=!0,Object.defineProperty(K(e),"id",{value:Ea++}),e.uuid=Kr(),e.name="",e.type="Object3D",e.parent=null,e.children=[],e.up=n.DEFAULT_UP.clone();var r=new zi,i=new ka,a=new Ui,o=new zi(1,1,1);return i._onChange((function(){a.setFromEuler(i,!1)})),a._onChange((function(){i.setFromQuaternion(a,void 0,!1)})),Object.defineProperties(K(e),{position:{configurable:!0,enumerable:!0,value:r},rotation:{configurable:!0,enumerable:!0,value:i},quaternion:{configurable:!0,enumerable:!0,value:a},scale:{configurable:!0,enumerable:!0,value:o},modelViewMatrix:{value:new va},normalMatrix:{value:new ai}}),e.matrix=new va,e.matrixWorld=new va,e.matrixAutoUpdate=n.DEFAULT_MATRIX_AUTO_UPDATE,e.matrixWorldAutoUpdate=n.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,e.matrixWorldNeedsUpdate=!1,e.layers=new Ta,e.visible=!0,e.castShadow=!1,e.receiveShadow=!1,e.frustumCulled=!0,e.renderOrder=0,e.animations=[],e.userData={},e}return W(n,[{key:"onBeforeShadow",value:function(){}},{key:"onAfterShadow",value:function(){}},{key:"onBeforeRender",value:function(){}},{key:"onAfterRender",value:function(){}},{key:"applyMatrix4",value:function(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}},{key:"applyQuaternion",value:function(e){return this.quaternion.premultiply(e),this}},{key:"setRotationFromAxisAngle",value:function(e,t){this.quaternion.setFromAxisAngle(e,t)}},{key:"setRotationFromEuler",value:function(e){this.quaternion.setFromEuler(e,!0)}},{key:"setRotationFromMatrix",value:function(e){this.quaternion.setFromRotationMatrix(e)}},{key:"setRotationFromQuaternion",value:function(e){this.quaternion.copy(e)}},{key:"rotateOnAxis",value:function(e,t){return Ra.setFromAxisAngle(e,t),this.quaternion.multiply(Ra),this}},{key:"rotateOnWorldAxis",value:function(e,t){return Ra.setFromAxisAngle(e,t),this.quaternion.premultiply(Ra),this}},{key:"rotateX",value:function(e){return this.rotateOnAxis(La,e)}},{key:"rotateY",value:function(e){return this.rotateOnAxis(Oa,e)}},{key:"rotateZ",value:function(e){return this.rotateOnAxis(Fa,e)}},{key:"translateOnAxis",value:function(e,t){return Ca.copy(e).applyQuaternion(this.quaternion),this.position.add(Ca.multiplyScalar(t)),this}},{key:"translateX",value:function(e){return this.translateOnAxis(La,e)}},{key:"translateY",value:function(e){return this.translateOnAxis(Oa,e)}},{key:"translateZ",value:function(e){return this.translateOnAxis(Fa,e)}},{key:"localToWorld",value:function(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}},{key:"worldToLocal",value:function(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Ba.copy(this.matrixWorld).invert())}},{key:"lookAt",value:function(e,t,n){e.isVector3?Pa.copy(e):Pa.set(e,t,n);var r=this.parent;this.updateWorldMatrix(!0,!1),Na.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Ba.lookAt(Na,Pa,this.up):Ba.lookAt(Pa,Na,this.up),this.quaternion.setFromRotationMatrix(Ba),r&&(Ba.extractRotation(r.matrixWorld),Ra.setFromRotationMatrix(Ba),this.quaternion.premultiply(Ra.invert()))}},{key:"add",value:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(Ua),Ga.child=e,this.dispatchEvent(Ga),Ga.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}},{key:"remove",value:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}var n=this.children.indexOf(e);return-1!==n&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(za),qa.child=e,this.dispatchEvent(qa),qa.child=null),this}},{key:"removeFromParent",value:function(){var e=this.parent;return null!==e&&e.remove(this),this}},{key:"clear",value:function(){return this.remove.apply(this,q(this.children))}},{key:"attach",value:function(e){return this.updateWorldMatrix(!0,!1),Ba.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),Ba.multiply(e.parent.matrixWorld)),e.applyMatrix4(Ba),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(Ua),Ga.child=e,this.dispatchEvent(Ga),Ga.child=null,this}},{key:"getObjectById",value:function(e){return this.getObjectByProperty("id",e)}},{key:"getObjectByName",value:function(e){return this.getObjectByProperty("name",e)}},{key:"getObjectByProperty",value:function(e,t){if(this[e]===t)return this;for(var n=0,r=this.children.length;n<r;n++){var i=this.children[n].getObjectByProperty(e,t);if(void 0!==i)return i}}},{key:"getObjectsByProperty",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];this[e]===t&&n.push(this);for(var r=this.children,i=0,a=r.length;i<a;i++)r[i].getObjectsByProperty(e,t,n);return n}},{key:"getWorldPosition",value:function(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}},{key:"getWorldQuaternion",value:function(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Na,e,Ia),e}},{key:"getWorldScale",value:function(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Na,Da,e),e}},{key:"getWorldDirection",value:function(e){this.updateWorldMatrix(!0,!1);var t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}},{key:"raycast",value:function(){}},{key:"traverse",value:function(e){e(this);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].traverse(e)}},{key:"traverseVisible",value:function(e){if(!1!==this.visible){e(this);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}}},{key:"traverseAncestors",value:function(e){var t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))}},{key:"updateMatrix",value:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}},{key:"updateMatrixWorld",value:function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(!0===this.matrixWorldAutoUpdate&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);for(var t=this.children,n=0,r=t.length;n<r;n++){t[n].updateMatrixWorld(e)}}},{key:"updateWorldMatrix",value:function(e,t){var n=this.parent;if(!0===e&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),!0===this.matrixWorldAutoUpdate&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),!0===t)for(var r=this.children,i=0,a=r.length;i<a;i++){r[i].updateWorldMatrix(!1,!0)}}},{key:"toJSON",value:function(e){var t=void 0===e||"string"===typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});var r={};function i(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(r.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(r.type="BatchedMesh",r.perObjectFrustumCulled=this.perObjectFrustumCulled,r.sortObjects=this.sortObjects,r.drawRanges=this._drawRanges,r.reservedRanges=this._reservedRanges,r.visibility=this._visibility,r.active=this._active,r.bounds=this._bounds.map((function(e){return{boxInitialized:e.boxInitialized,boxMin:e.box.min.toArray(),boxMax:e.box.max.toArray(),sphereInitialized:e.sphereInitialized,sphereRadius:e.sphere.radius,sphereCenter:e.sphere.center.toArray()}})),r.maxInstanceCount=this._maxInstanceCount,r.maxVertexCount=this._maxVertexCount,r.maxIndexCount=this._maxIndexCount,r.geometryInitialized=this._geometryInitialized,r.geometryCount=this._geometryCount,r.matricesTexture=this._matricesTexture.toJSON(e),null!==this._colorsTexture&&(r.colorsTexture=this._colorsTexture.toJSON(e)),null!==this.boundingSphere&&(r.boundingSphere={center:r.boundingSphere.center.toArray(),radius:r.boundingSphere.radius}),null!==this.boundingBox&&(r.boundingBox={min:r.boundingBox.min.toArray(),max:r.boundingBox.max.toArray()})),this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=i(e.geometries,this.geometry);var a=this.geometry.parameters;if(void 0!==a&&void 0!==a.shapes){var o=a.shapes;if(Array.isArray(o))for(var s=0,u=o.length;s<u;s++){var l=o[s];i(e.shapes,l)}else i(e.shapes,o)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(i(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){for(var c=[],h=0,d=this.material.length;h<d;h++)c.push(i(e.materials,this.material[h]));r.material=c}else r.material=i(e.materials,this.material);if(this.children.length>0){r.children=[];for(var f=0;f<this.children.length;f++)r.children.push(this.children[f].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(var p=0;p<this.animations.length;p++){var A=this.animations[p];r.animations.push(i(e.animations,A))}}if(t){var v=S(e.geometries),m=S(e.materials),g=S(e.textures),y=S(e.images),b=S(e.shapes),x=S(e.skeletons),_=S(e.animations),w=S(e.nodes);v.length>0&&(n.geometries=v),m.length>0&&(n.materials=m),g.length>0&&(n.textures=g),y.length>0&&(n.images=y),b.length>0&&(n.shapes=b),x.length>0&&(n.skeletons=x),_.length>0&&(n.animations=_),w.length>0&&(n.nodes=w)}return n.object=r,n;function S(e){var t=[];for(var n in e){var r=e[n];delete r.metadata,t.push(r)}return t}}},{key:"clone",value:function(e){return(new this.constructor).copy(this,e)}},{key:"copy",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(var n=0;n<e.children.length;n++){var r=e.children[n];this.add(r.clone())}return this}}]),n}(Wr);Ha.DEFAULT_UP=new zi(0,1,0),Ha.DEFAULT_MATRIX_AUTO_UPDATE=!0,Ha.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;var Va=new zi,ja=new zi,Wa=new zi,Xa=new zi,Ya=new zi,Qa=new zi,Ja=new zi,Ka=new zi,Za=new zi,$a=new zi,eo=new Pi,to=new Pi,no=new Pi,ro=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new zi,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new zi,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new zi;V(this,e),this.a=t,this.b=n,this.c=r}return W(e,[{key:"set",value:function(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}},{key:"setFromPointsAndIndices",value:function(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this}},{key:"setFromAttributeAndIndices",value:function(e,t,n,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,r),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}},{key:"getArea",value:function(){return Va.subVectors(this.c,this.b),ja.subVectors(this.a,this.b),.5*Va.cross(ja).length()}},{key:"getMidpoint",value:function(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}},{key:"getNormal",value:function(t){return e.getNormal(this.a,this.b,this.c,t)}},{key:"getPlane",value:function(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}},{key:"getBarycoord",value:function(t,n){return e.getBarycoord(t,this.a,this.b,this.c,n)}},{key:"getInterpolation",value:function(t,n,r,i,a){return e.getInterpolation(t,this.a,this.b,this.c,n,r,i,a)}},{key:"containsPoint",value:function(t){return e.containsPoint(t,this.a,this.b,this.c)}},{key:"isFrontFacing",value:function(t){return e.isFrontFacing(this.a,this.b,this.c,t)}},{key:"intersectsBox",value:function(e){return e.intersectsTriangle(this)}},{key:"closestPointToPoint",value:function(e,t){var n,r,i=this.a,a=this.b,o=this.c;Ya.subVectors(a,i),Qa.subVectors(o,i),Ka.subVectors(e,i);var s=Ya.dot(Ka),u=Qa.dot(Ka);if(s<=0&&u<=0)return t.copy(i);Za.subVectors(e,a);var l=Ya.dot(Za),c=Qa.dot(Za);if(l>=0&&c<=l)return t.copy(a);var h=s*c-l*u;if(h<=0&&s>=0&&l<=0)return n=s/(s-l),t.copy(i).addScaledVector(Ya,n);$a.subVectors(e,o);var d=Ya.dot($a),f=Qa.dot($a);if(f>=0&&d<=f)return t.copy(o);var p=d*u-s*f;if(p<=0&&u>=0&&f<=0)return r=u/(u-f),t.copy(i).addScaledVector(Qa,r);var A=l*f-d*c;if(A<=0&&c-l>=0&&d-f>=0)return Ja.subVectors(o,a),r=(c-l)/(c-l+(d-f)),t.copy(a).addScaledVector(Ja,r);var v=1/(A+p+h);return n=p*v,r=h*v,t.copy(i).addScaledVector(Ya,n).addScaledVector(Qa,r)}},{key:"equals",value:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}],[{key:"getNormal",value:function(e,t,n,r){r.subVectors(n,t),Va.subVectors(e,t),r.cross(Va);var i=r.lengthSq();return i>0?r.multiplyScalar(1/Math.sqrt(i)):r.set(0,0,0)}},{key:"getBarycoord",value:function(e,t,n,r,i){Va.subVectors(r,t),ja.subVectors(n,t),Wa.subVectors(e,t);var a=Va.dot(Va),o=Va.dot(ja),s=Va.dot(Wa),u=ja.dot(ja),l=ja.dot(Wa),c=a*u-o*o;if(0===c)return i.set(0,0,0),null;var h=1/c,d=(u*s-o*l)*h,f=(a*l-o*s)*h;return i.set(1-d-f,f,d)}},{key:"containsPoint",value:function(e,t,n,r){return null!==this.getBarycoord(e,t,n,r,Xa)&&(Xa.x>=0&&Xa.y>=0&&Xa.x+Xa.y<=1)}},{key:"getInterpolation",value:function(e,t,n,r,i,a,o,s){return null===this.getBarycoord(e,t,n,r,Xa)?(s.x=0,s.y=0,"z"in s&&(s.z=0),"w"in s&&(s.w=0),null):(s.setScalar(0),s.addScaledVector(i,Xa.x),s.addScaledVector(a,Xa.y),s.addScaledVector(o,Xa.z),s)}},{key:"getInterpolatedAttribute",value:function(e,t,n,r,i,a){return eo.setScalar(0),to.setScalar(0),no.setScalar(0),eo.fromBufferAttribute(e,t),to.fromBufferAttribute(e,n),no.fromBufferAttribute(e,r),a.setScalar(0),a.addScaledVector(eo,i.x),a.addScaledVector(to,i.y),a.addScaledVector(no,i.z),a}},{key:"isFrontFacing",value:function(e,t,n,r){return Va.subVectors(n,t),ja.subVectors(e,t),Va.cross(ja).dot(r)<0}}]),e}(),io={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},ao={h:0,s:0,l:0},oo={h:0,s:0,l:0};function so(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}var uo=function(e){function t(e,n,r){return V(this,t),this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,n,r)}return W(t,[{key:"set",value:function(e,t,n){if(void 0===t&&void 0===n){var r=e;r&&r.isColor?this.copy(r):"number"===typeof r?this.setHex(r):"string"===typeof r&&this.setStyle(r)}else this.setRGB(e,t,n);return this}},{key:"setScalar",value:function(e){return this.r=e,this.g=e,this.b=e,this}},{key:"setHex",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ar;return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,mi.toWorkingColorSpace(this,t),this}},{key:"setRGB",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:mi.workingColorSpace;return this.r=e,this.g=t,this.b=n,mi.toWorkingColorSpace(this,r),this}},{key:"setHSL",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:mi.workingColorSpace;if(e=$r(e,1),t=Zr(t,0,1),n=Zr(n,0,1),0===t)this.r=this.g=this.b=n;else{var i=n<=.5?n*(1+t):n+t-n*t,a=2*n-i;this.r=so(a,i,e+1/3),this.g=so(a,i,e),this.b=so(a,i,e-1/3)}return mi.toWorkingColorSpace(this,r),this}},{key:"setStyle",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ar;function r(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}if(t=/^(\w+)\(([^\)]*)\)/.exec(e)){var i,a=t[1],o=t[2];switch(a){case"rgb":case"rgba":if(i=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return r(i[4]),this.setRGB(Math.min(255,parseInt(i[1],10))/255,Math.min(255,parseInt(i[2],10))/255,Math.min(255,parseInt(i[3],10))/255,n);if(i=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return r(i[4]),this.setRGB(Math.min(100,parseInt(i[1],10))/100,Math.min(100,parseInt(i[2],10))/100,Math.min(100,parseInt(i[3],10))/100,n);break;case"hsl":case"hsla":if(i=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return r(i[4]),this.setHSL(parseFloat(i[1])/360,parseFloat(i[2])/100,parseFloat(i[3])/100,n);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(t=/^\#([A-Fa-f\d]+)$/.exec(e)){var s=t[1],u=s.length;if(3===u)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,n);if(6===u)return this.setHex(parseInt(s,16),n);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,n);return this}},{key:"setColorName",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ar,n=io[e.toLowerCase()];return void 0!==n?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}},{key:"clone",value:function(){return new this.constructor(this.r,this.g,this.b)}},{key:"copy",value:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}},{key:"copySRGBToLinear",value:function(e){return this.r=gi(e.r),this.g=gi(e.g),this.b=gi(e.b),this}},{key:"copyLinearToSRGB",value:function(e){return this.r=yi(e.r),this.g=yi(e.g),this.b=yi(e.b),this}},{key:"convertSRGBToLinear",value:function(){return this.copySRGBToLinear(this),this}},{key:"convertLinearToSRGB",value:function(){return this.copyLinearToSRGB(this),this}},{key:"getHex",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ar;return mi.fromWorkingColorSpace(lo.copy(this),e),65536*Math.round(Zr(255*lo.r,0,255))+256*Math.round(Zr(255*lo.g,0,255))+Math.round(Zr(255*lo.b,0,255))}},{key:"getHexString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ar;return("000000"+this.getHex(e).toString(16)).slice(-6)}},{key:"getHSL",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:mi.workingColorSpace;mi.fromWorkingColorSpace(lo.copy(this),t);var n,r,i=lo.r,a=lo.g,o=lo.b,s=Math.max(i,a,o),u=Math.min(i,a,o),l=(u+s)/2;if(u===s)n=0,r=0;else{var c=s-u;switch(r=l<=.5?c/(s+u):c/(2-s-u),s){case i:n=(a-o)/c+(a<o?6:0);break;case a:n=(o-i)/c+2;break;case o:n=(i-a)/c+4}n/=6}return e.h=n,e.s=r,e.l=l,e}},{key:"getRGB",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:mi.workingColorSpace;return mi.fromWorkingColorSpace(lo.copy(this),t),e.r=lo.r,e.g=lo.g,e.b=lo.b,e}},{key:"getStyle",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ar;mi.fromWorkingColorSpace(lo.copy(this),e);var t=lo.r,n=lo.g,r=lo.b;return e!==ar?"color(".concat(e," ").concat(t.toFixed(3)," ").concat(n.toFixed(3)," ").concat(r.toFixed(3),")"):"rgb(".concat(Math.round(255*t),",").concat(Math.round(255*n),",").concat(Math.round(255*r),")")}},{key:"offsetHSL",value:function(e,t,n){return this.getHSL(ao),this.setHSL(ao.h+e,ao.s+t,ao.l+n)}},{key:"add",value:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}},{key:"addColors",value:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}},{key:"addScalar",value:function(e){return this.r+=e,this.g+=e,this.b+=e,this}},{key:"sub",value:function(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}},{key:"multiply",value:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}},{key:"multiplyScalar",value:function(e){return this.r*=e,this.g*=e,this.b*=e,this}},{key:"lerp",value:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}},{key:"lerpColors",value:function(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}},{key:"lerpHSL",value:function(e,t){this.getHSL(ao),e.getHSL(oo);var n=ei(ao.h,oo.h,t),r=ei(ao.s,oo.s,t),i=ei(ao.l,oo.l,t);return this.setHSL(n,r,i),this}},{key:"setFromVector3",value:function(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}},{key:"applyMatrix3",value:function(e){var t=this.r,n=this.g,r=this.b,i=e.elements;return this.r=i[0]*t+i[3]*n+i[6]*r,this.g=i[1]*t+i[4]*n+i[7]*r,this.b=i[2]*t+i[5]*n+i[8]*r,this}},{key:"equals",value:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}},{key:"fromBufferAttribute",value:function(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}},{key:"toJSON",value:function(){return this.getHex()}},{key:Symbol.iterator,value:se().mark((function e(){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.r;case 2:return e.next=4,this.g;case 4:return e.next=6,this.b;case 6:case"end":return e.stop()}}),e,this)}))}]),t}(),lo=new uo;uo.NAMES=io;var co=0,ho=function(e){Y(n,e);var t=$(n);function n(){var e;return V(this,n),(e=t.call(this)).isMaterial=!0,Object.defineProperty(K(e),"id",{value:co++}),e.uuid=Kr(),e.name="",e.blending=we,e.side=ye,e.vertexColors=!1,e.opacity=1,e.transparent=!1,e.alphaHash=!1,e.blendSrc=Oe,e.blendDst=Fe,e.blendEquation=Ee,e.blendSrcAlpha=null,e.blendDstAlpha=null,e.blendEquationAlpha=null,e.blendColor=new uo(0,0,0),e.blendAlpha=0,e.depthFunc=Ke,e.depthTest=!0,e.depthWrite=!0,e.stencilWriteMask=255,e.stencilFunc=Sr,e.stencilRef=0,e.stencilFuncMask=255,e.stencilFail=cr,e.stencilZFail=cr,e.stencilZPass=cr,e.stencilWrite=!1,e.clippingPlanes=null,e.clipIntersection=!1,e.clipShadows=!1,e.shadowSide=null,e.colorWrite=!0,e.precision=null,e.polygonOffset=!1,e.polygonOffsetFactor=0,e.polygonOffsetUnits=0,e.dithering=!1,e.alphaToCoverage=!1,e.premultipliedAlpha=!1,e.forceSinglePass=!1,e.visible=!0,e.toneMapped=!0,e.userData={},e.version=0,e._alphaTest=0,e}return W(n,[{key:"type",get:function(){return this.constructor.type},set:function(e){}},{key:"alphaTest",get:function(){return this._alphaTest},set:function(e){this._alphaTest>0!==e>0&&this.version++,this._alphaTest=e}},{key:"onBeforeRender",value:function(){}},{key:"onBeforeCompile",value:function(){}},{key:"customProgramCacheKey",value:function(){return this.onBeforeCompile.toString()}},{key:"setValues",value:function(e){if(void 0!==e)for(var t in e){var n=e[t];if(void 0!==n){var r=this[t];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]=n:console.warn("THREE.Material: '".concat(t,"' is not a property of THREE.").concat(this.type,"."))}else console.warn("THREE.Material: parameter '".concat(t,"' has value of undefined."))}}},{key:"toJSON",value:function(e){var t=void 0===e||"string"===typeof e;t&&(e={textures:{},images:{}});var n={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};function r(e){var t=[];for(var n in e){var r=e[n];delete r.metadata,t.push(r)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),void 0!==this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.dispersion&&(n.dispersion=this.dispersion),void 0!==this.iridescence&&(n.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(n.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),void 0!==this.anisotropy&&(n.anisotropy=this.anisotropy),void 0!==this.anisotropyRotation&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapRotation&&(n.envMapRotation=this.envMapRotation.toArray()),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==we&&(n.blending=this.blending),this.side!==ye&&(n.side=this.side),!0===this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=!0),this.blendSrc!==Oe&&(n.blendSrc=this.blendSrc),this.blendDst!==Fe&&(n.blendDst=this.blendDst),this.blendEquation!==Ee&&(n.blendEquation=this.blendEquation),null!==this.blendSrcAlpha&&(n.blendSrcAlpha=this.blendSrcAlpha),null!==this.blendDstAlpha&&(n.blendDstAlpha=this.blendDstAlpha),null!==this.blendEquationAlpha&&(n.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(n.blendColor=this.blendColor.getHex()),0!==this.blendAlpha&&(n.blendAlpha=this.blendAlpha),this.depthFunc!==Ke&&(n.depthFunc=this.depthFunc),!1===this.depthTest&&(n.depthTest=this.depthTest),!1===this.depthWrite&&(n.depthWrite=this.depthWrite),!1===this.colorWrite&&(n.colorWrite=this.colorWrite),255!==this.stencilWriteMask&&(n.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==Sr&&(n.stencilFunc=this.stencilFunc),0!==this.stencilRef&&(n.stencilRef=this.stencilRef),255!==this.stencilFuncMask&&(n.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==cr&&(n.stencilFail=this.stencilFail),this.stencilZFail!==cr&&(n.stencilZFail=this.stencilZFail),this.stencilZPass!==cr&&(n.stencilZPass=this.stencilZPass),!0===this.stencilWrite&&(n.stencilWrite=this.stencilWrite),void 0!==this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaHash&&(n.alphaHash=!0),!0===this.alphaToCoverage&&(n.alphaToCoverage=!0),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=!0),!0===this.forceSinglePass&&(n.forceSinglePass=!0),!0===this.wireframe&&(n.wireframe=!0),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=!0),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),!1===this.fog&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData),t){var i=r(e.textures),a=r(e.images);i.length>0&&(n.textures=i),a.length>0&&(n.images=a)}return n}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;var t=e.clippingPlanes,n=null;if(null!==t){var r=t.length;n=new Array(r);for(var i=0;i!==r;++i)n[i]=t[i].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}},{key:"needsUpdate",set:function(e){!0===e&&this.version++}},{key:"onBuild",value:function(){console.warn("Material: onBuild() has been removed.")}}],[{key:"type",get:function(){return"Material"}}]),n}(Wr),fo=function(e){Y(n,e);var t=$(n);function n(e){var r;return V(this,n),(r=t.call(this)).isMeshBasicMaterial=!0,r.color=new uo(16777215),r.map=null,r.lightMap=null,r.lightMapIntensity=1,r.aoMap=null,r.aoMapIntensity=1,r.specularMap=null,r.alphaMap=null,r.envMap=null,r.envMapRotation=new ka,r.combine=nt,r.reflectivity=1,r.refractionRatio=.98,r.wireframe=!1,r.wireframeLinewidth=1,r.wireframeLinecap="round",r.wireframeLinejoin="round",r.fog=!0,r.setValues(e),r}return W(n,[{key:"copy",value:function(e){return oe(Q(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}],[{key:"type",get:function(){return"MeshBasicMaterial"}}]),n}(ho),po=Ao();function Ao(){for(var e=new ArrayBuffer(4),t=new Float32Array(e),n=new Uint32Array(e),r=new Uint32Array(512),i=new Uint32Array(512),a=0;a<256;++a){var o=a-127;o<-27?(r[a]=0,r[256|a]=32768,i[a]=24,i[256|a]=24):o<-14?(r[a]=1024>>-o-14,r[256|a]=1024>>-o-14|32768,i[a]=-o-1,i[256|a]=-o-1):o<=15?(r[a]=o+15<<10,r[256|a]=o+15<<10|32768,i[a]=13,i[256|a]=13):o<128?(r[a]=31744,r[256|a]=64512,i[a]=24,i[256|a]=24):(r[a]=31744,r[256|a]=64512,i[a]=13,i[256|a]=13)}for(var s=new Uint32Array(2048),u=new Uint32Array(64),l=new Uint32Array(64),c=1;c<1024;++c){for(var h=c<<13,d=0;0===(8388608&h);)h<<=1,d-=8388608;h&=-8388609,d+=947912704,s[c]=h|d}for(var f=1024;f<2048;++f)s[f]=939524096+(f-1024<<13);for(var p=1;p<31;++p)u[p]=p<<23;u[31]=1199570944,u[32]=2147483648;for(var A=33;A<63;++A)u[A]=2147483648+(A-32<<23);u[63]=3347054592;for(var v=1;v<64;++v)32!==v&&(l[v]=1024);return{floatView:t,uint32View:n,baseTable:r,shiftTable:i,mantissaTable:s,exponentTable:u,offsetTable:l}}function vo(e){Math.abs(e)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),e=Zr(e,-65504,65504),po.floatView[0]=e;var t=po.uint32View[0],n=t>>23&511;return po.baseTable[n]+((8388607&t)>>po.shiftTable[n])}function mo(e){var t=e>>10;return po.uint32View[0]=po.mantissaTable[po.offsetTable[t]+(1023&e)]+po.exponentTable[t],po.floatView[0]}var go={toHalfFloat:vo,fromHalfFloat:mo},yo=new zi,bo=new ii,xo=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(V(this,e),Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=t,this.itemSize=n,this.count=void 0!==t?t.length/n:0,this.normalized=r,this.usage=Nr,this.updateRanges=[],this.gpuType=zt,this.version=0}return W(e,[{key:"onUploadCallback",value:function(){}},{key:"needsUpdate",set:function(e){!0===e&&this.version++}},{key:"setUsage",value:function(e){return this.usage=e,this}},{key:"addUpdateRange",value:function(e,t){this.updateRanges.push({start:e,count:t})}},{key:"clearUpdateRanges",value:function(){this.updateRanges.length=0}},{key:"copy",value:function(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}},{key:"copyAt",value:function(e,t,n){e*=this.itemSize,n*=t.itemSize;for(var r=0,i=this.itemSize;r<i;r++)this.array[e+r]=t.array[n+r];return this}},{key:"copyArray",value:function(e){return this.array.set(e),this}},{key:"applyMatrix3",value:function(e){if(2===this.itemSize)for(var t=0,n=this.count;t<n;t++)bo.fromBufferAttribute(this,t),bo.applyMatrix3(e),this.setXY(t,bo.x,bo.y);else if(3===this.itemSize)for(var r=0,i=this.count;r<i;r++)yo.fromBufferAttribute(this,r),yo.applyMatrix3(e),this.setXYZ(r,yo.x,yo.y,yo.z);return this}},{key:"applyMatrix4",value:function(e){for(var t=0,n=this.count;t<n;t++)yo.fromBufferAttribute(this,t),yo.applyMatrix4(e),this.setXYZ(t,yo.x,yo.y,yo.z);return this}},{key:"applyNormalMatrix",value:function(e){for(var t=0,n=this.count;t<n;t++)yo.fromBufferAttribute(this,t),yo.applyNormalMatrix(e),this.setXYZ(t,yo.x,yo.y,yo.z);return this}},{key:"transformDirection",value:function(e){for(var t=0,n=this.count;t<n;t++)yo.fromBufferAttribute(this,t),yo.transformDirection(e),this.setXYZ(t,yo.x,yo.y,yo.z);return this}},{key:"set",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(e,t),this}},{key:"getComponent",value:function(e,t){var n=this.array[e*this.itemSize+t];return this.normalized&&(n=ti(n,this.array)),n}},{key:"setComponent",value:function(e,t,n){return this.normalized&&(n=ni(n,this.array)),this.array[e*this.itemSize+t]=n,this}},{key:"getX",value:function(e){var t=this.array[e*this.itemSize];return this.normalized&&(t=ti(t,this.array)),t}},{key:"setX",value:function(e,t){return this.normalized&&(t=ni(t,this.array)),this.array[e*this.itemSize]=t,this}},{key:"getY",value:function(e){var t=this.array[e*this.itemSize+1];return this.normalized&&(t=ti(t,this.array)),t}},{key:"setY",value:function(e,t){return this.normalized&&(t=ni(t,this.array)),this.array[e*this.itemSize+1]=t,this}},{key:"getZ",value:function(e){var t=this.array[e*this.itemSize+2];return this.normalized&&(t=ti(t,this.array)),t}},{key:"setZ",value:function(e,t){return this.normalized&&(t=ni(t,this.array)),this.array[e*this.itemSize+2]=t,this}},{key:"getW",value:function(e){var t=this.array[e*this.itemSize+3];return this.normalized&&(t=ti(t,this.array)),t}},{key:"setW",value:function(e,t){return this.normalized&&(t=ni(t,this.array)),this.array[e*this.itemSize+3]=t,this}},{key:"setXY",value:function(e,t,n){return e*=this.itemSize,this.normalized&&(t=ni(t,this.array),n=ni(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}},{key:"setXYZ",value:function(e,t,n,r){return e*=this.itemSize,this.normalized&&(t=ni(t,this.array),n=ni(n,this.array),r=ni(r,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this}},{key:"setXYZW",value:function(e,t,n,r,i){return e*=this.itemSize,this.normalized&&(t=ni(t,this.array),n=ni(n,this.array),r=ni(r,this.array),i=ni(i,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=i,this}},{key:"onUpload",value:function(e){return this.onUploadCallback=e,this}},{key:"clone",value:function(){return new this.constructor(this.array,this.itemSize).copy(this)}},{key:"toJSON",value:function(){var e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),this.usage!==Nr&&(e.usage=this.usage),e}}]),e}(),_o=function(e){Y(n,e);var t=$(n);function n(e,r,i){return V(this,n),t.call(this,new Int8Array(e),r,i)}return W(n)}(xo),wo=function(e){Y(n,e);var t=$(n);function n(e,r,i){return V(this,n),t.call(this,new Uint8Array(e),r,i)}return W(n)}(xo),So=function(e){Y(n,e);var t=$(n);function n(e,r,i){return V(this,n),t.call(this,new Uint8ClampedArray(e),r,i)}return W(n)}(xo),Mo=function(e){Y(n,e);var t=$(n);function n(e,r,i){return V(this,n),t.call(this,new Int16Array(e),r,i)}return W(n)}(xo),ko=function(e){Y(n,e);var t=$(n);function n(e,r,i){return V(this,n),t.call(this,new Uint16Array(e),r,i)}return W(n)}(xo),To=function(e){Y(n,e);var t=$(n);function n(e,r,i){return V(this,n),t.call(this,new Int32Array(e),r,i)}return W(n)}(xo),Eo=function(e){Y(n,e);var t=$(n);function n(e,r,i){return V(this,n),t.call(this,new Uint32Array(e),r,i)}return W(n)}(xo),Co=function(e){Y(n,e);var t=$(n);function n(e,r,i){var a;return V(this,n),(a=t.call(this,new Uint16Array(e),r,i)).isFloat16BufferAttribute=!0,a}return W(n,[{key:"getX",value:function(e){var t=mo(this.array[e*this.itemSize]);return this.normalized&&(t=ti(t,this.array)),t}},{key:"setX",value:function(e,t){return this.normalized&&(t=ni(t,this.array)),this.array[e*this.itemSize]=vo(t),this}},{key:"getY",value:function(e){var t=mo(this.array[e*this.itemSize+1]);return this.normalized&&(t=ti(t,this.array)),t}},{key:"setY",value:function(e,t){return this.normalized&&(t=ni(t,this.array)),this.array[e*this.itemSize+1]=vo(t),this}},{key:"getZ",value:function(e){var t=mo(this.array[e*this.itemSize+2]);return this.normalized&&(t=ti(t,this.array)),t}},{key:"setZ",value:function(e,t){return this.normalized&&(t=ni(t,this.array)),this.array[e*this.itemSize+2]=vo(t),this}},{key:"getW",value:function(e){var t=mo(this.array[e*this.itemSize+3]);return this.normalized&&(t=ti(t,this.array)),t}},{key:"setW",value:function(e,t){return this.normalized&&(t=ni(t,this.array)),this.array[e*this.itemSize+3]=vo(t),this}},{key:"setXY",value:function(e,t,n){return e*=this.itemSize,this.normalized&&(t=ni(t,this.array),n=ni(n,this.array)),this.array[e+0]=vo(t),this.array[e+1]=vo(n),this}},{key:"setXYZ",value:function(e,t,n,r){return e*=this.itemSize,this.normalized&&(t=ni(t,this.array),n=ni(n,this.array),r=ni(r,this.array)),this.array[e+0]=vo(t),this.array[e+1]=vo(n),this.array[e+2]=vo(r),this}},{key:"setXYZW",value:function(e,t,n,r,i){return e*=this.itemSize,this.normalized&&(t=ni(t,this.array),n=ni(n,this.array),r=ni(r,this.array),i=ni(i,this.array)),this.array[e+0]=vo(t),this.array[e+1]=vo(n),this.array[e+2]=vo(r),this.array[e+3]=vo(i),this}}]),n}(xo),Ro=function(e){Y(n,e);var t=$(n);function n(e,r,i){return V(this,n),t.call(this,new Float32Array(e),r,i)}return W(n)}(xo),Bo=0,Po=new va,No=new Ha,Io=new zi,Do=new Hi,Lo=new Hi,Oo=new zi,Fo=function(e){Y(n,e);var t=$(n);function n(){var e;return V(this,n),(e=t.call(this)).isBufferGeometry=!0,Object.defineProperty(K(e),"id",{value:Bo++}),e.uuid=Kr(),e.name="",e.type="BufferGeometry",e.index=null,e.indirect=null,e.attributes={},e.morphAttributes={},e.morphTargetsRelative=!1,e.groups=[],e.boundingBox=null,e.boundingSphere=null,e.drawRange={start:0,count:1/0},e.userData={},e}return W(n,[{key:"getIndex",value:function(){return this.index}},{key:"setIndex",value:function(e){return Array.isArray(e)?this.index=new(si(e)?Eo:ko)(e,1):this.index=e,this}},{key:"setIndirect",value:function(e){return this.indirect=e,this}},{key:"getIndirect",value:function(){return this.indirect}},{key:"getAttribute",value:function(e){return this.attributes[e]}},{key:"setAttribute",value:function(e,t){return this.attributes[e]=t,this}},{key:"deleteAttribute",value:function(e){return delete this.attributes[e],this}},{key:"hasAttribute",value:function(e){return void 0!==this.attributes[e]}},{key:"addGroup",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.groups.push({start:e,count:t,materialIndex:n})}},{key:"clearGroups",value:function(){this.groups=[]}},{key:"setDrawRange",value:function(e,t){this.drawRange.start=e,this.drawRange.count=t}},{key:"applyMatrix4",value:function(e){var t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);var n=this.attributes.normal;if(void 0!==n){var r=(new ai).getNormalMatrix(e);n.applyNormalMatrix(r),n.needsUpdate=!0}var i=this.attributes.tangent;return void 0!==i&&(i.transformDirection(e),i.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}},{key:"applyQuaternion",value:function(e){return Po.makeRotationFromQuaternion(e),this.applyMatrix4(Po),this}},{key:"rotateX",value:function(e){return Po.makeRotationX(e),this.applyMatrix4(Po),this}},{key:"rotateY",value:function(e){return Po.makeRotationY(e),this.applyMatrix4(Po),this}},{key:"rotateZ",value:function(e){return Po.makeRotationZ(e),this.applyMatrix4(Po),this}},{key:"translate",value:function(e,t,n){return Po.makeTranslation(e,t,n),this.applyMatrix4(Po),this}},{key:"scale",value:function(e,t,n){return Po.makeScale(e,t,n),this.applyMatrix4(Po),this}},{key:"lookAt",value:function(e){return No.lookAt(e),No.updateMatrix(),this.applyMatrix4(No.matrix),this}},{key:"center",value:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(Io).negate(),this.translate(Io.x,Io.y,Io.z),this}},{key:"setFromPoints",value:function(e){var t=this.getAttribute("position");if(void 0===t){for(var n=[],r=0,i=e.length;r<i;r++){var a=e[r];n.push(a.x,a.y,a.z||0)}this.setAttribute("position",new Ro(n,3))}else{for(var o=0,s=t.count;o<s;o++){var u=e[o];t.setXYZ(o,u.x,u.y,u.z||0)}e.length>t.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}},{key:"computeBoundingBox",value:function(){null===this.boundingBox&&(this.boundingBox=new Hi);var e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),void this.boundingBox.set(new zi(-1/0,-1/0,-1/0),new zi(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(var n=0,r=t.length;n<r;n++){var i=t[n];Do.setFromBufferAttribute(i),this.morphTargetsRelative?(Oo.addVectors(this.boundingBox.min,Do.min),this.boundingBox.expandByPoint(Oo),Oo.addVectors(this.boundingBox.max,Do.max),this.boundingBox.expandByPoint(Oo)):(this.boundingBox.expandByPoint(Do.min),this.boundingBox.expandByPoint(Do.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}},{key:"computeBoundingSphere",value:function(){null===this.boundingSphere&&(this.boundingSphere=new sa);var e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),void this.boundingSphere.set(new zi,1/0);if(e){var n=this.boundingSphere.center;if(Do.setFromBufferAttribute(e),t)for(var r=0,i=t.length;r<i;r++){var a=t[r];Lo.setFromBufferAttribute(a),this.morphTargetsRelative?(Oo.addVectors(Do.min,Lo.min),Do.expandByPoint(Oo),Oo.addVectors(Do.max,Lo.max),Do.expandByPoint(Oo)):(Do.expandByPoint(Lo.min),Do.expandByPoint(Lo.max))}Do.getCenter(n);for(var o=0,s=0,u=e.count;s<u;s++)Oo.fromBufferAttribute(e,s),o=Math.max(o,n.distanceToSquared(Oo));if(t)for(var l=0,c=t.length;l<c;l++)for(var h=t[l],d=this.morphTargetsRelative,f=0,p=h.count;f<p;f++)Oo.fromBufferAttribute(h,f),d&&(Io.fromBufferAttribute(e,f),Oo.add(Io)),o=Math.max(o,n.distanceToSquared(Oo));this.boundingSphere.radius=Math.sqrt(o),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}},{key:"computeTangents",value:function(){var e=this.index,t=this.attributes;if(null!==e&&void 0!==t.position&&void 0!==t.normal&&void 0!==t.uv){var n=t.position,r=t.normal,i=t.uv;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new xo(new Float32Array(4*n.count),4));for(var a=this.getAttribute("tangent"),o=[],s=[],u=0;u<n.count;u++)o[u]=new zi,s[u]=new zi;var l=new zi,c=new zi,h=new zi,d=new ii,f=new ii,p=new ii,A=new zi,v=new zi,m=this.groups;0===m.length&&(m=[{start:0,count:e.count}]);for(var g=0,y=m.length;g<y;++g)for(var b=m[g],x=b.start,_=x,w=x+b.count;_<w;_+=3)I(e.getX(_+0),e.getX(_+1),e.getX(_+2));for(var S=new zi,M=new zi,k=new zi,T=new zi,E=0,C=m.length;E<C;++E)for(var R=m[E],B=R.start,P=B,N=B+R.count;P<N;P+=3)D(e.getX(P+0)),D(e.getX(P+1)),D(e.getX(P+2))}else console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");function I(e,t,r){l.fromBufferAttribute(n,e),c.fromBufferAttribute(n,t),h.fromBufferAttribute(n,r),d.fromBufferAttribute(i,e),f.fromBufferAttribute(i,t),p.fromBufferAttribute(i,r),c.sub(l),h.sub(l),f.sub(d),p.sub(d);var a=1/(f.x*p.y-p.x*f.y);isFinite(a)&&(A.copy(c).multiplyScalar(p.y).addScaledVector(h,-f.y).multiplyScalar(a),v.copy(h).multiplyScalar(f.x).addScaledVector(c,-p.x).multiplyScalar(a),o[e].add(A),o[t].add(A),o[r].add(A),s[e].add(v),s[t].add(v),s[r].add(v))}function D(e){k.fromBufferAttribute(r,e),T.copy(k);var t=o[e];S.copy(t),S.sub(k.multiplyScalar(k.dot(t))).normalize(),M.crossVectors(T,t);var n=M.dot(s[e])<0?-1:1;a.setXYZW(e,S.x,S.y,S.z,n)}}},{key:"computeVertexNormals",value:function(){var e=this.index,t=this.getAttribute("position");if(void 0!==t){var n=this.getAttribute("normal");if(void 0===n)n=new xo(new Float32Array(3*t.count),3),this.setAttribute("normal",n);else for(var r=0,i=n.count;r<i;r++)n.setXYZ(r,0,0,0);var a=new zi,o=new zi,s=new zi,u=new zi,l=new zi,c=new zi,h=new zi,d=new zi;if(e)for(var f=0,p=e.count;f<p;f+=3){var A=e.getX(f+0),v=e.getX(f+1),m=e.getX(f+2);a.fromBufferAttribute(t,A),o.fromBufferAttribute(t,v),s.fromBufferAttribute(t,m),h.subVectors(s,o),d.subVectors(a,o),h.cross(d),u.fromBufferAttribute(n,A),l.fromBufferAttribute(n,v),c.fromBufferAttribute(n,m),u.add(h),l.add(h),c.add(h),n.setXYZ(A,u.x,u.y,u.z),n.setXYZ(v,l.x,l.y,l.z),n.setXYZ(m,c.x,c.y,c.z)}else for(var g=0,y=t.count;g<y;g+=3)a.fromBufferAttribute(t,g+0),o.fromBufferAttribute(t,g+1),s.fromBufferAttribute(t,g+2),h.subVectors(s,o),d.subVectors(a,o),h.cross(d),n.setXYZ(g+0,h.x,h.y,h.z),n.setXYZ(g+1,h.x,h.y,h.z),n.setXYZ(g+2,h.x,h.y,h.z);this.normalizeNormals(),n.needsUpdate=!0}}},{key:"normalizeNormals",value:function(){for(var e=this.attributes.normal,t=0,n=e.count;t<n;t++)Oo.fromBufferAttribute(e,t),Oo.normalize(),e.setXYZ(t,Oo.x,Oo.y,Oo.z)}},{key:"toNonIndexed",value:function(){function e(e,t){for(var n=e.array,r=e.itemSize,i=e.normalized,a=new n.constructor(t.length*r),o=0,s=0,u=0,l=t.length;u<l;u++){o=e.isInterleavedBufferAttribute?t[u]*e.data.stride+e.offset:t[u]*r;for(var c=0;c<r;c++)a[s++]=n[o++]}return new xo(a,r,i)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;var t=new n,r=this.index.array,i=this.attributes;for(var a in i){var o=e(i[a],r);t.setAttribute(a,o)}var s=this.morphAttributes;for(var u in s){for(var l=[],c=s[u],h=0,d=c.length;h<d;h++){var f=e(c[h],r);l.push(f)}t.morphAttributes[u]=l}t.morphTargetsRelative=this.morphTargetsRelative;for(var p=this.groups,A=0,v=p.length;A<v;A++){var m=p[A];t.addGroup(m.start,m.count,m.materialIndex)}return t}},{key:"toJSON",value:function(){var e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){var t=this.parameters;for(var n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};var r=this.index;null!==r&&(e.data.index={type:r.array.constructor.name,array:Array.prototype.slice.call(r.array)});var i=this.attributes;for(var a in i){var o=i[a];e.data.attributes[a]=o.toJSON(e.data)}var s={},u=!1;for(var l in this.morphAttributes){for(var c=this.morphAttributes[l],h=[],d=0,f=c.length;d<f;d++){var p=c[d];h.push(p.toJSON(e.data))}h.length>0&&(s[l]=h,u=!0)}u&&(e.data.morphAttributes=s,e.data.morphTargetsRelative=this.morphTargetsRelative);var A=this.groups;A.length>0&&(e.data.groups=JSON.parse(JSON.stringify(A)));var v=this.boundingSphere;return null!==v&&(e.data.boundingSphere={center:v.center.toArray(),radius:v.radius}),e}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;var t={};this.name=e.name;var n=e.index;null!==n&&this.setIndex(n.clone(t));var r=e.attributes;for(var i in r){var a=r[i];this.setAttribute(i,a.clone(t))}var o=e.morphAttributes;for(var s in o){for(var u=[],l=o[s],c=0,h=l.length;c<h;c++)u.push(l[c].clone(t));this.morphAttributes[s]=u}this.morphTargetsRelative=e.morphTargetsRelative;for(var d=e.groups,f=0,p=d.length;f<p;f++){var A=d[f];this.addGroup(A.start,A.count,A.materialIndex)}var v=e.boundingBox;null!==v&&(this.boundingBox=v.clone());var m=e.boundingSphere;return null!==m&&(this.boundingSphere=m.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}}]),n}(Wr),Uo=new va,zo=new Aa,Go=new sa,qo=new zi,Ho=new zi,Vo=new zi,jo=new zi,Wo=new zi,Xo=new zi,Yo=new zi,Qo=new zi,Jo=function(e){Y(n,e);var t=$(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Fo,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new fo;return V(this,n),(e=t.call(this)).isMesh=!0,e.type="Mesh",e.geometry=r,e.material=i,e.updateMorphTargets(),e}return W(n,[{key:"copy",value:function(e,t){return oe(Q(n.prototype),"copy",this).call(this,e,t),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}},{key:"updateMorphTargets",value:function(){var e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){var n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var r=0,i=n.length;r<i;r++){var a=n[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=r}}}}},{key:"getVertexPosition",value:function(e,t){var n=this.geometry,r=n.attributes.position,i=n.morphAttributes.position,a=n.morphTargetsRelative;t.fromBufferAttribute(r,e);var o=this.morphTargetInfluences;if(i&&o){Xo.set(0,0,0);for(var s=0,u=i.length;s<u;s++){var l=o[s],c=i[s];0!==l&&(Wo.fromBufferAttribute(c,e),a?Xo.addScaledVector(Wo,l):Xo.addScaledVector(Wo.sub(t),l))}t.add(Xo)}return t}},{key:"raycast",value:function(e,t){var n=this.geometry,r=this.material,i=this.matrixWorld;if(void 0!==r){if(null===n.boundingSphere&&n.computeBoundingSphere(),Go.copy(n.boundingSphere),Go.applyMatrix4(i),zo.copy(e.ray).recast(e.near),!1===Go.containsPoint(zo.origin)){if(null===zo.intersectSphere(Go,qo))return;if(zo.origin.distanceToSquared(qo)>Math.pow(e.far-e.near,2))return}Uo.copy(i).invert(),zo.copy(e.ray).applyMatrix4(Uo),null!==n.boundingBox&&!1===zo.intersectsBox(n.boundingBox)||this._computeIntersections(e,t,zo)}}},{key:"_computeIntersections",value:function(e,t,n){var r,i=this.geometry,a=this.material,o=i.index,s=i.attributes.position,u=i.attributes.uv,l=i.attributes.uv1,c=i.attributes.normal,h=i.groups,d=i.drawRange;if(null!==o)if(Array.isArray(a))for(var f=0,p=h.length;f<p;f++)for(var A=h[f],v=a[A.materialIndex],m=Math.max(A.start,d.start),g=Math.min(o.count,Math.min(A.start+A.count,d.start+d.count));m<g;m+=3){(r=Ko(this,v,e,n,u,l,c,o.getX(m),o.getX(m+1),o.getX(m+2)))&&(r.faceIndex=Math.floor(m/3),r.face.materialIndex=A.materialIndex,t.push(r))}else for(var y=Math.max(0,d.start),b=Math.min(o.count,d.start+d.count);y<b;y+=3){(r=Ko(this,a,e,n,u,l,c,o.getX(y),o.getX(y+1),o.getX(y+2)))&&(r.faceIndex=Math.floor(y/3),t.push(r))}else if(void 0!==s)if(Array.isArray(a))for(var x=0,_=h.length;x<_;x++)for(var w=h[x],S=a[w.materialIndex],M=Math.max(w.start,d.start),k=Math.min(s.count,Math.min(w.start+w.count,d.start+d.count));M<k;M+=3){(r=Ko(this,S,e,n,u,l,c,M,M+1,M+2))&&(r.faceIndex=Math.floor(M/3),r.face.materialIndex=w.materialIndex,t.push(r))}else for(var T=Math.max(0,d.start),E=Math.min(s.count,d.start+d.count);T<E;T+=3){(r=Ko(this,a,e,n,u,l,c,T,T+1,T+2))&&(r.faceIndex=Math.floor(T/3),t.push(r))}}}]),n}(Ha);function Ko(e,t,n,r,i,a,o,s,u,l){e.getVertexPosition(s,Ho),e.getVertexPosition(u,Vo),e.getVertexPosition(l,jo);var c=function(e,t,n,r,i,a,o,s){if(null===(t.side===be?r.intersectTriangle(o,a,i,!0,s):r.intersectTriangle(i,a,o,t.side===ye,s)))return null;Qo.copy(s),Qo.applyMatrix4(e.matrixWorld);var u=n.ray.origin.distanceTo(Qo);return u<n.near||u>n.far?null:{distance:u,point:Qo.clone(),object:e}}(e,t,n,r,Ho,Vo,jo,Yo);if(c){var h=new zi;ro.getBarycoord(Yo,Ho,Vo,jo,h),i&&(c.uv=ro.getInterpolatedAttribute(i,s,u,l,h,new ii)),a&&(c.uv1=ro.getInterpolatedAttribute(a,s,u,l,h,new ii)),o&&(c.normal=ro.getInterpolatedAttribute(o,s,u,l,h,new zi),c.normal.dot(r.direction)>0&&c.normal.multiplyScalar(-1));var d={a:s,b:u,c:l,normal:new zi,materialIndex:0};ro.getNormal(Ho,Vo,jo,d.normal),c.face=d,c.barycoord=h}return c}var Zo=function(e){Y(n,e);var t=$(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;V(this,n),(e=t.call(this)).type="BoxGeometry",e.parameters={width:r,height:i,depth:a,widthSegments:o,heightSegments:s,depthSegments:u};var l=K(e);o=Math.floor(o),s=Math.floor(s),u=Math.floor(u);var c=[],h=[],d=[],f=[],p=0,A=0;function v(e,t,n,r,i,a,o,s,u,v,m){for(var g=a/u,y=o/v,b=a/2,x=o/2,_=s/2,w=u+1,S=v+1,M=0,k=0,T=new zi,E=0;E<S;E++)for(var C=E*y-x,R=0;R<w;R++){var B=R*g-b;T[e]=B*r,T[t]=C*i,T[n]=_,h.push(T.x,T.y,T.z),T[e]=0,T[t]=0,T[n]=s>0?1:-1,d.push(T.x,T.y,T.z),f.push(R/u),f.push(1-E/v),M+=1}for(var P=0;P<v;P++)for(var N=0;N<u;N++){var I=p+N+w*P,D=p+N+w*(P+1),L=p+(N+1)+w*(P+1),O=p+(N+1)+w*P;c.push(I,D,O),c.push(D,L,O),k+=6}l.addGroup(A,k,m),A+=k,p+=M}return v("z","y","x",-1,-1,a,i,r,u,s,0),v("z","y","x",1,-1,a,i,-r,u,s,1),v("x","z","y",1,1,r,a,i,o,u,2),v("x","z","y",1,-1,r,a,-i,o,u,3),v("x","y","z",1,-1,r,i,a,o,s,4),v("x","y","z",-1,-1,r,i,-a,o,s,5),e.setIndex(c),e.setAttribute("position",new Ro(h,3)),e.setAttribute("normal",new Ro(d,3)),e.setAttribute("uv",new Ro(f,2)),e}return W(n,[{key:"copy",value:function(e){return oe(Q(n.prototype),"copy",this).call(this,e),this.parameters=Object.assign({},e.parameters),this}}],[{key:"fromJSON",value:function(e){return new n(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}]),n}(Fo);function $o(e){var t={};for(var n in e)for(var r in t[n]={},e[n]){var i=e[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),t[n][r]=null):t[n][r]=i.clone():Array.isArray(i)?t[n][r]=i.slice():t[n][r]=i}return t}function es(e){for(var t={},n=0;n<e.length;n++){var r=$o(e[n]);for(var i in r)t[i]=r[i]}return t}function ts(e){var t=e.getRenderTarget();return null===t?e.outputColorSpace:!0===t.isXRRenderTarget?t.texture.colorSpace:mi.workingColorSpace}var ns={clone:$o,merge:es},rs=function(e){Y(n,e);var t=$(n);function n(e){var r;return V(this,n),(r=t.call(this)).isShaderMaterial=!0,r.defines={},r.uniforms={},r.uniformsGroups=[],r.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",r.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",r.linewidth=1,r.wireframe=!1,r.wireframeLinewidth=1,r.fog=!1,r.lights=!1,r.clipping=!1,r.forceSinglePass=!0,r.extensions={clipCullDistance:!1,multiDraw:!1},r.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},r.index0AttributeName=void 0,r.uniformsNeedUpdate=!1,r.glslVersion=null,void 0!==e&&r.setValues(e),r}return W(n,[{key:"copy",value:function(e){return oe(Q(n.prototype),"copy",this).call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=$o(e.uniforms),this.uniformsGroups=function(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n].clone());return t}(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}},{key:"toJSON",value:function(e){var t=oe(Q(n.prototype),"toJSON",this).call(this,e);for(var r in t.glslVersion=this.glslVersion,t.uniforms={},this.uniforms){var i=this.uniforms[r].value;i&&i.isTexture?t.uniforms[r]={type:"t",value:i.toJSON(e).uuid}:i&&i.isColor?t.uniforms[r]={type:"c",value:i.getHex()}:i&&i.isVector2?t.uniforms[r]={type:"v2",value:i.toArray()}:i&&i.isVector3?t.uniforms[r]={type:"v3",value:i.toArray()}:i&&i.isVector4?t.uniforms[r]={type:"v4",value:i.toArray()}:i&&i.isMatrix3?t.uniforms[r]={type:"m3",value:i.toArray()}:i&&i.isMatrix4?t.uniforms[r]={type:"m4",value:i.toArray()}:t.uniforms[r]={value:i}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;var a={};for(var o in this.extensions)!0===this.extensions[o]&&(a[o]=!0);return Object.keys(a).length>0&&(t.extensions=a),t}}],[{key:"type",get:function(){return"ShaderMaterial"}}]),n}(ho),is=function(e){Y(n,e);var t=$(n);function n(){var e;return V(this,n),(e=t.call(this)).isCamera=!0,e.type="Camera",e.matrixWorldInverse=new va,e.projectionMatrix=new va,e.projectionMatrixInverse=new va,e.coordinateSystem=Vr,e}return W(n,[{key:"copy",value:function(e,t){return oe(Q(n.prototype),"copy",this).call(this,e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}},{key:"getWorldDirection",value:function(e){return oe(Q(n.prototype),"getWorldDirection",this).call(this,e).negate()}},{key:"updateMatrixWorld",value:function(e){oe(Q(n.prototype),"updateMatrixWorld",this).call(this,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}},{key:"updateWorldMatrix",value:function(e,t){oe(Q(n.prototype),"updateWorldMatrix",this).call(this,e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),n}(Ha),as=new zi,os=new ii,ss=new ii,us=function(e){Y(n,e);var t=$(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2e3;return V(this,n),(e=t.call(this)).isPerspectiveCamera=!0,e.type="PerspectiveCamera",e.fov=r,e.zoom=1,e.near=a,e.far=o,e.focus=10,e.aspect=i,e.view=null,e.filmGauge=35,e.filmOffset=0,e.updateProjectionMatrix(),e}return W(n,[{key:"copy",value:function(e,t){return oe(Q(n.prototype),"copy",this).call(this,e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}},{key:"setFocalLength",value:function(e){var t=.5*this.getFilmHeight()/e;this.fov=2*Jr*Math.atan(t),this.updateProjectionMatrix()}},{key:"getFocalLength",value:function(){var e=Math.tan(.5*Qr*this.fov);return.5*this.getFilmHeight()/e}},{key:"getEffectiveFOV",value:function(){return 2*Jr*Math.atan(Math.tan(.5*Qr*this.fov)/this.zoom)}},{key:"getFilmWidth",value:function(){return this.filmGauge*Math.min(this.aspect,1)}},{key:"getFilmHeight",value:function(){return this.filmGauge/Math.max(this.aspect,1)}},{key:"getViewBounds",value:function(e,t,n){as.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(as.x,as.y).multiplyScalar(-e/as.z),as.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(as.x,as.y).multiplyScalar(-e/as.z)}},{key:"getViewSize",value:function(e,t){return this.getViewBounds(e,os,ss),t.subVectors(ss,os)}},{key:"setViewOffset",value:function(e,t,n,r,i,a){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=a,this.updateProjectionMatrix()}},{key:"clearViewOffset",value:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}},{key:"updateProjectionMatrix",value:function(){var e=this.near,t=e*Math.tan(.5*Qr*this.fov)/this.zoom,n=2*t,r=this.aspect*n,i=-.5*r,a=this.view;if(null!==this.view&&this.view.enabled){var o=a.fullWidth,s=a.fullHeight;i+=a.offsetX*r/o,t-=a.offsetY*n/s,r*=a.width/o,n*=a.height/s}var u=this.filmOffset;0!==u&&(i+=e*u/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,t,t-n,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}},{key:"toJSON",value:function(e){var t=oe(Q(n.prototype),"toJSON",this).call(this,e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}]),n}(is),ls=-90,cs=function(e){Y(n,e);var t=$(n);function n(e,r,i){var a;V(this,n),(a=t.call(this)).type="CubeCamera",a.renderTarget=i,a.coordinateSystem=null,a.activeMipmapLevel=0;var o=new us(ls,1,e,r);o.layers=a.layers,a.add(o);var s=new us(ls,1,e,r);s.layers=a.layers,a.add(s);var u=new us(ls,1,e,r);u.layers=a.layers,a.add(u);var l=new us(ls,1,e,r);l.layers=a.layers,a.add(l);var c=new us(ls,1,e,r);c.layers=a.layers,a.add(c);var h=new us(ls,1,e,r);return h.layers=a.layers,a.add(h),a}return W(n,[{key:"updateCoordinateSystem",value:function(){var e,t=this.coordinateSystem,n=this.children.concat(),r=l(n,6),i=r[0],a=r[1],o=r[2],s=r[3],u=r[4],c=r[5],h=ee(n);try{for(h.s();!(e=h.n()).done;){var d=e.value;this.remove(d)}}catch(v){h.e(v)}finally{h.f()}if(t===Vr)i.up.set(0,1,0),i.lookAt(1,0,0),a.up.set(0,1,0),a.lookAt(-1,0,0),o.up.set(0,0,-1),o.lookAt(0,1,0),s.up.set(0,0,1),s.lookAt(0,-1,0),u.up.set(0,1,0),u.lookAt(0,0,1),c.up.set(0,1,0),c.lookAt(0,0,-1);else{if(t!==jr)throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+t);i.up.set(0,-1,0),i.lookAt(-1,0,0),a.up.set(0,-1,0),a.lookAt(1,0,0),o.up.set(0,0,1),o.lookAt(0,1,0),s.up.set(0,0,-1),s.lookAt(0,-1,0),u.up.set(0,-1,0),u.lookAt(0,0,1),c.up.set(0,-1,0),c.lookAt(0,0,-1)}var f,p=ee(n);try{for(p.s();!(f=p.n()).done;){var A=f.value;this.add(A),A.updateMatrixWorld()}}catch(v){p.e(v)}finally{p.f()}}},{key:"update",value:function(e,t){null===this.parent&&this.updateMatrixWorld();var n=this.renderTarget,r=this.activeMipmapLevel;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());var i=l(this.children,6),a=i[0],o=i[1],s=i[2],u=i[3],c=i[4],h=i[5],d=e.getRenderTarget(),f=e.getActiveCubeFace(),p=e.getActiveMipmapLevel(),A=e.xr.enabled;e.xr.enabled=!1;var v=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0,r),e.render(t,a),e.setRenderTarget(n,1,r),e.render(t,o),e.setRenderTarget(n,2,r),e.render(t,s),e.setRenderTarget(n,3,r),e.render(t,u),e.setRenderTarget(n,4,r),e.render(t,c),n.texture.generateMipmaps=v,e.setRenderTarget(n,5,r),e.render(t,h),e.setRenderTarget(d,f,p),e.xr.enabled=A,n.texture.needsPMREMUpdate=!0}}]),n}(Ha),hs=function(e){Y(n,e);var t=$(n);function n(e,r,i,a,o,s,u,l,c,h){var d;return V(this,n),e=void 0!==e?e:[],r=void 0!==r?r:vt,(d=t.call(this,e,r,i,a,o,s,u,l,c,h)).isCubeTexture=!0,d.flipY=!1,d}return W(n,[{key:"images",get:function(){return this.image},set:function(e){this.image=e}}]),n}(Bi),ds=function(e){Y(n,e);var t=$(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};V(this,n),(e=t.call(this,r,r,i)).isWebGLCubeRenderTarget=!0;var a={width:r,height:r,depth:1},o=[a,a,a,a,a,a];return e.texture=new hs(o,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace),e.texture.isRenderTargetTexture=!0,e.texture.generateMipmaps=void 0!==i.generateMipmaps&&i.generateMipmaps,e.texture.minFilter=void 0!==i.minFilter?i.minFilter:Ct,e}return W(n,[{key:"fromEquirectangularTexture",value:function(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;var n={tEquirect:{value:null}},r="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",i="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",a=new Zo(5,5,5),o=new rs({name:"CubemapFromEquirect",uniforms:$o(n),vertexShader:r,fragmentShader:i,side:be,blending:_e});o.uniforms.tEquirect.value=t;var s=new Jo(a,o),u=t.minFilter;return t.minFilter===Pt&&(t.minFilter=Ct),new cs(1,10,this).update(e,s),t.minFilter=u,s.geometry.dispose(),s.material.dispose(),this}},{key:"clear",value:function(e,t,n,r){for(var i=e.getRenderTarget(),a=0;a<6;a++)e.setRenderTarget(this,a),e.clear(t,n,r);e.setRenderTarget(i)}}]),n}(Ii),fs=new zi,ps=new zi,As=new ai,vs=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new zi(1,0,0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;V(this,e),this.isPlane=!0,this.normal=t,this.constant=n}return W(e,[{key:"set",value:function(e,t){return this.normal.copy(e),this.constant=t,this}},{key:"setComponents",value:function(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this}},{key:"setFromNormalAndCoplanarPoint",value:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}},{key:"setFromCoplanarPoints",value:function(e,t,n){var r=fs.subVectors(n,t).cross(ps.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}},{key:"copy",value:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this}},{key:"normalize",value:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}},{key:"negate",value:function(){return this.constant*=-1,this.normal.negate(),this}},{key:"distanceToPoint",value:function(e){return this.normal.dot(e)+this.constant}},{key:"distanceToSphere",value:function(e){return this.distanceToPoint(e.center)-e.radius}},{key:"projectPoint",value:function(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}},{key:"intersectLine",value:function(e,t){var n=e.delta(fs),r=this.normal.dot(n);if(0===r)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;var i=-(e.start.dot(this.normal)+this.constant)/r;return i<0||i>1?null:t.copy(e.start).addScaledVector(n,i)}},{key:"intersectsLine",value:function(e){var t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}},{key:"intersectsBox",value:function(e){return e.intersectsPlane(this)}},{key:"intersectsSphere",value:function(e){return e.intersectsPlane(this)}},{key:"coplanarPoint",value:function(e){return e.copy(this.normal).multiplyScalar(-this.constant)}},{key:"applyMatrix4",value:function(e,t){var n=t||As.getNormalMatrix(e),r=this.coplanarPoint(fs).applyMatrix4(e),i=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(i),this}},{key:"translate",value:function(e){return this.constant-=e.dot(this.normal),this}},{key:"equals",value:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}(),ms=new sa,gs=new zi,ys=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new vs,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new vs,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new vs,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new vs,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new vs,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:new vs;V(this,e),this.planes=[t,n,r,i,a,o]}return W(e,[{key:"set",value:function(e,t,n,r,i,a){var o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(n),o[3].copy(r),o[4].copy(i),o[5].copy(a),this}},{key:"copy",value:function(e){for(var t=this.planes,n=0;n<6;n++)t[n].copy(e.planes[n]);return this}},{key:"setFromProjectionMatrix",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Vr,n=this.planes,r=e.elements,i=r[0],a=r[1],o=r[2],s=r[3],u=r[4],l=r[5],c=r[6],h=r[7],d=r[8],f=r[9],p=r[10],A=r[11],v=r[12],m=r[13],g=r[14],y=r[15];if(n[0].setComponents(s-i,h-u,A-d,y-v).normalize(),n[1].setComponents(s+i,h+u,A+d,y+v).normalize(),n[2].setComponents(s+a,h+l,A+f,y+m).normalize(),n[3].setComponents(s-a,h-l,A-f,y-m).normalize(),n[4].setComponents(s-o,h-c,A-p,y-g).normalize(),t===Vr)n[5].setComponents(s+o,h+c,A+p,y+g).normalize();else{if(t!==jr)throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);n[5].setComponents(o,c,p,g).normalize()}return this}},{key:"intersectsObject",value:function(e){if(void 0!==e.boundingSphere)null===e.boundingSphere&&e.computeBoundingSphere(),ms.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{var t=e.geometry;null===t.boundingSphere&&t.computeBoundingSphere(),ms.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(ms)}},{key:"intersectsSprite",value:function(e){return ms.center.set(0,0,0),ms.radius=.7071067811865476,ms.applyMatrix4(e.matrixWorld),this.intersectsSphere(ms)}},{key:"intersectsSphere",value:function(e){for(var t=this.planes,n=e.center,r=-e.radius,i=0;i<6;i++){if(t[i].distanceToPoint(n)<r)return!1}return!0}},{key:"intersectsBox",value:function(e){for(var t=this.planes,n=0;n<6;n++){var r=t[n];if(gs.x=r.normal.x>0?e.max.x:e.min.x,gs.y=r.normal.y>0?e.max.y:e.min.y,gs.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(gs)<0)return!1}return!0}},{key:"containsPoint",value:function(e){for(var t=this.planes,n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}();function bs(){var e=null,t=!1,n=null,r=null;function i(t,a){n(t,a),r=e.requestAnimationFrame(i)}return{start:function(){!0!==t&&null!==n&&(r=e.requestAnimationFrame(i),t=!0)},stop:function(){e.cancelAnimationFrame(r),t=!1},setAnimationLoop:function(e){n=e},setContext:function(t){e=t}}}function xs(e){var t=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),t.get(e)},remove:function(n){n.isInterleavedBufferAttribute&&(n=n.data);var r=t.get(n);r&&(e.deleteBuffer(r.buffer),t.delete(n))},update:function(n,r){if(n.isInterleavedBufferAttribute&&(n=n.data),n.isGLBufferAttribute){var i=t.get(n);(!i||i.version<n.version)&&t.set(n,{buffer:n.buffer,type:n.type,bytesPerElement:n.elementSize,version:n.version})}else{var a=t.get(n);if(void 0===a)t.set(n,function(t,n){var r,i=t.array,a=t.usage,o=i.byteLength,s=e.createBuffer();if(e.bindBuffer(n,s),e.bufferData(n,i,a),t.onUploadCallback(),i instanceof Float32Array)r=e.FLOAT;else if(i instanceof Uint16Array)r=t.isFloat16BufferAttribute?e.HALF_FLOAT:e.UNSIGNED_SHORT;else if(i instanceof Int16Array)r=e.SHORT;else if(i instanceof Uint32Array)r=e.UNSIGNED_INT;else if(i instanceof Int32Array)r=e.INT;else if(i instanceof Int8Array)r=e.BYTE;else if(i instanceof Uint8Array)r=e.UNSIGNED_BYTE;else{if(!(i instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+i);r=e.UNSIGNED_BYTE}return{buffer:s,type:r,bytesPerElement:i.BYTES_PER_ELEMENT,version:t.version,size:o}}(n,r));else if(a.version<n.version){if(a.size!==n.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");!function(t,n,r){var i=n.array,a=n.updateRanges;if(e.bindBuffer(r,t),0===a.length)e.bufferSubData(r,0,i);else{a.sort((function(e,t){return e.start-t.start}));for(var o=0,s=1;s<a.length;s++){var u=a[o],l=a[s];l.start<=u.start+u.count+1?u.count=Math.max(u.count,l.start+l.count-u.start):a[++o]=l}a.length=o+1;for(var c=0,h=a.length;c<h;c++){var d=a[c];e.bufferSubData(r,d.start*i.BYTES_PER_ELEMENT,i,d.start,d.count)}n.clearUpdateRanges()}n.onUploadCallback()}(a.buffer,n,r),a.version=n.version}}}}}var _s=function(e){Y(n,e);var t=$(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;V(this,n),(e=t.call(this)).type="PlaneGeometry",e.parameters={width:r,height:i,widthSegments:a,heightSegments:o};for(var s=r/2,u=i/2,l=Math.floor(a),c=Math.floor(o),h=l+1,d=c+1,f=r/l,p=i/c,A=[],v=[],m=[],g=[],y=0;y<d;y++)for(var b=y*p-u,x=0;x<h;x++){var _=x*f-s;v.push(_,-b,0),m.push(0,0,1),g.push(x/l),g.push(1-y/c)}for(var w=0;w<c;w++)for(var S=0;S<l;S++){var M=S+h*w,k=S+h*(w+1),T=S+1+h*(w+1),E=S+1+h*w;A.push(M,k,E),A.push(k,T,E)}return e.setIndex(A),e.setAttribute("position",new Ro(v,3)),e.setAttribute("normal",new Ro(m,3)),e.setAttribute("uv",new Ro(g,2)),e}return W(n,[{key:"copy",value:function(e){return oe(Q(n.prototype),"copy",this).call(this,e),this.parameters=Object.assign({},e.parameters),this}}],[{key:"fromJSON",value:function(e){return new n(e.width,e.height,e.widthSegments,e.heightSegments)}}]),n}(Fo),ws={alphahash_fragment:"#ifdef USE_ALPHAHASH\n\tif ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;\n#endif",alphahash_pars_fragment:"#ifdef USE_ALPHAHASH\n\tconst float ALPHA_HASH_SCALE = 0.05;\n\tfloat hash2D( vec2 value ) {\n\t\treturn fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );\n\t}\n\tfloat hash3D( vec3 value ) {\n\t\treturn hash2D( vec2( hash2D( value.xy ), value.z ) );\n\t}\n\tfloat getAlphaHashThreshold( vec3 position ) {\n\t\tfloat maxDeriv = max(\n\t\t\tlength( dFdx( position.xyz ) ),\n\t\t\tlength( dFdy( position.xyz ) )\n\t\t);\n\t\tfloat pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );\n\t\tvec2 pixScales = vec2(\n\t\t\texp2( floor( log2( pixScale ) ) ),\n\t\t\texp2( ceil( log2( pixScale ) ) )\n\t\t);\n\t\tvec2 alpha = vec2(\n\t\t\thash3D( floor( pixScales.x * position.xyz ) ),\n\t\t\thash3D( floor( pixScales.y * position.xyz ) )\n\t\t);\n\t\tfloat lerpFactor = fract( log2( pixScale ) );\n\t\tfloat x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;\n\t\tfloat a = min( lerpFactor, 1.0 - lerpFactor );\n\t\tvec3 cases = vec3(\n\t\t\tx * x / ( 2.0 * a * ( 1.0 - a ) ),\n\t\t\t( x - 0.5 * a ) / ( 1.0 - a ),\n\t\t\t1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )\n\t\t);\n\t\tfloat threshold = ( x < ( 1.0 - a ) )\n\t\t\t? ( ( x < a ) ? cases.x : cases.y )\n\t\t\t: cases.z;\n\t\treturn clamp( threshold , 1.0e-6, 1.0 );\n\t}\n#endif",alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\t#ifdef ALPHA_TO_COVERAGE\n\tdiffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );\n\tif ( diffuseColor.a == 0.0 ) discard;\n\t#else\n\tif ( diffuseColor.a < alphaTest ) discard;\n\t#endif\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_CLEARCOAT ) \n\t\tclearcoatSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_SHEEN ) \n\t\tsheenSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometryNormal, geometryViewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",batching_pars_vertex:"#ifdef USE_BATCHING\n\t#if ! defined( GL_ANGLE_multi_draw )\n\t#define gl_DrawID _gl_DrawID\n\tuniform int _gl_DrawID;\n\t#endif\n\tuniform highp sampler2D batchingTexture;\n\tuniform highp usampler2D batchingIdTexture;\n\tmat4 getBatchingMatrix( const in float i ) {\n\t\tint size = textureSize( batchingTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n\tfloat getIndirectIndex( const in int i ) {\n\t\tint size = textureSize( batchingIdTexture, 0 ).x;\n\t\tint x = i % size;\n\t\tint y = i / size;\n\t\treturn float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );\n\t}\n#endif\n#ifdef USE_BATCHING_COLOR\n\tuniform sampler2D batchingColorTexture;\n\tvec3 getBatchingColor( const in float i ) {\n\t\tint size = textureSize( batchingColorTexture, 0 ).x;\n\t\tint j = int( i );\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\treturn texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;\n\t}\n#endif",batching_vertex:"#ifdef USE_BATCHING\n\tmat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );\n#endif",begin_vertex:"vec3 transformed = vec3( position );\n#ifdef USE_ALPHAHASH\n\tvPosition = vec3( position );\n#endif",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"float G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n} // validated",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\treturn vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vBumpMapUv );\n\t\tvec2 dSTdy = dFdy( vBumpMapUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );\n\t\tvec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#ifdef ALPHA_TO_COVERAGE\n\t\tfloat distanceToPlane, distanceGradient;\n\t\tfloat clipOpacity = 1.0;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tdistanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n\t\t\tdistanceGradient = fwidth( distanceToPlane ) / 2.0;\n\t\t\tclipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n\t\t\tif ( clipOpacity == 0.0 ) discard;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\t\tfloat unionClipOpacity = 1.0;\n\t\t\t#pragma unroll_loop_start\n\t\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\t\tplane = clippingPlanes[ i ];\n\t\t\t\tdistanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n\t\t\t\tdistanceGradient = fwidth( distanceToPlane ) / 2.0;\n\t\t\t\tunionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n\t\t\t}\n\t\t\t#pragma unroll_loop_end\n\t\t\tclipOpacity *= 1.0 - unionClipOpacity;\n\t\t#endif\n\t\tdiffuseColor.a *= clipOpacity;\n\t\tif ( diffuseColor.a == 0.0 ) discard;\n\t#else\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\t\tbool clipped = true;\n\t\t\t#pragma unroll_loop_start\n\t\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\t\tplane = clippingPlanes[ i ];\n\t\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t\t}\n\t\t\t#pragma unroll_loop_end\n\t\t\tif ( clipped ) discard;\n\t\t#endif\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif\n#ifdef USE_BATCHING_COLOR\n\tvec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );\n\tvColor.xyz *= batchingColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\n#ifdef USE_ALPHAHASH\n\tvarying vec3 vPosition;\n#endif\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n} // validated",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = objectTangent;\n#endif\n#ifdef USE_BATCHING\n\tmat3 bm = mat3( batchingMatrix );\n\ttransformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );\n\ttransformedNormal = bm * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = bm * transformedTangent;\n\t#endif\n#endif\n#ifdef USE_INSTANCING\n\tmat3 im = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );\n\ttransformedNormal = im * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = im * transformedTangent;\n\t#endif\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\ttransformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE\n\t\temissiveColor = sRGBTransferEOTF( emissiveColor );\n\t#endif\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",colorspace_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",colorspace_pars_fragment:"vec4 LinearTransferOETF( in vec4 value ) {\n\treturn value;\n}\nvec4 sRGBTransferEOTF( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 sRGBTransferOETF( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform mat3 envMapRotation;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#ifdef USE_ENVMAP\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\t#ifdef USE_ANISOTROPY\n\t\tvec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {\n\t\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\t\tvec3 bentNormal = cross( bitangent, viewDir );\n\t\t\t\tbentNormal = normalize( cross( bentNormal, bitangent ) );\n\t\t\t\tbentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );\n\t\t\t\treturn getIBLRadiance( viewDir, bentNormal, roughness );\n\t\t\t#else\n\t\t\t\treturn vec3( 0.0 );\n\t\t\t#endif\n\t\t}\n\t#endif\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\n#if defined( USE_LIGHT_PROBES )\n\tuniform vec3 lightProbe[ 9 ];\n#endif\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif ( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef USE_SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULAR_COLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\n\t\t#endif\n\t\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_DISPERSION\n\tmaterial.dispersion = dispersion;\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\t#ifdef USE_ANISOTROPYMAP\n\t\tmat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );\n\t\tvec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;\n\t\tvec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;\n\t#else\n\t\tvec2 anisotropyV = anisotropyVector;\n\t#endif\n\tmaterial.anisotropy = length( anisotropyV );\n\tif( material.anisotropy == 0.0 ) {\n\t\tanisotropyV = vec2( 1.0, 0.0 );\n\t} else {\n\t\tanisotropyV /= material.anisotropy;\n\t\tmaterial.anisotropy = saturate( material.anisotropy );\n\t}\n\tmaterial.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );\n\tmaterial.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;\n\tmaterial.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\tfloat dispersion;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat anisotropy;\n\t\tfloat alphaT;\n\t\tvec3 anisotropyT;\n\t\tvec3 anisotropyB;\n\t#endif\n};\nvec3 clearcoatSpecularDirect = vec3( 0.0 );\nvec3 clearcoatSpecularIndirect = vec3( 0.0 );\nvec3 sheenSpecularDirect = vec3( 0.0 );\nvec3 sheenSpecularIndirect = vec3(0.0 );\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\n#ifdef USE_ANISOTROPY\n\tfloat V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {\n\t\tfloat gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );\n\t\tfloat gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );\n\t\tfloat v = 0.5 / ( gv + gl );\n\t\treturn saturate(v);\n\t}\n\tfloat D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {\n\t\tfloat a2 = alphaT * alphaB;\n\t\thighp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );\n\t\thighp float v2 = dot( v, v );\n\t\tfloat w2 = a2 / v2;\n\t\treturn RECIPROCAL_PI * a2 * pow2 ( w2 );\n\t}\n#endif\n#ifdef USE_CLEARCOAT\n\tvec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\n\t\tvec3 f0 = material.clearcoatF0;\n\t\tfloat f90 = material.clearcoatF90;\n\t\tfloat roughness = material.clearcoatRoughness;\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n\tvec3 f0 = material.specularColor;\n\tfloat f90 = material.specularF90;\n\tfloat roughness = material.roughness;\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t#ifdef USE_IRIDESCENCE\n\t\tF = mix( F, material.iridescenceFresnel, material.iridescence );\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat dotTL = dot( material.anisotropyT, lightDir );\n\t\tfloat dotTV = dot( material.anisotropyT, viewDir );\n\t\tfloat dotTH = dot( material.anisotropyT, halfDir );\n\t\tfloat dotBL = dot( material.anisotropyB, lightDir );\n\t\tfloat dotBV = dot( material.anisotropyB, viewDir );\n\t\tfloat dotBH = dot( material.anisotropyB, halfDir );\n\t\tfloat V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );\n\t\tfloat D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );\n\t#else\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t#endif\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometryNormal;\n\t\tvec3 viewDir = geometryViewDir;\n\t\tvec3 position = geometryPosition;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nvec3 geometryPosition = - vViewPosition;\nvec3 geometryNormal = normal;\nvec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\nvec3 geometryClearcoatNormal = vec3( 0.0 );\n#ifdef USE_CLEARCOAT\n\tgeometryClearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometryViewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometryPosition, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometryPosition, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if defined( USE_LIGHT_PROBES )\n\t\tirradiance += getLightProbeIrradiance( lightProbe, geometryNormal );\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometryNormal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\t#ifdef USE_ANISOTROPY\n\t\tradiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );\n\t#else\n\t\tradiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF )\n\tgl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\tvFragDepth = 1.0 + gl_Position.w;\n\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t#if defined( USE_POINTS_UV )\n\t\tvec2 uv = vUv;\n\t#else\n\t\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_POINTS_UV )\n\tvarying vec2 vUv;\n#else\n\t#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t\tuniform mat3 uvTransform;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphinstance_vertex:"#ifdef USE_INSTANCING_MORPH\n\tfloat morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\tfloat morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tmorphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;\n\t}\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t}\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_INSTANCING_MORPH\n\t\tuniform float morphTargetBaseInfluence;\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t#endif\n\tuniform sampler2DArray morphTargetsTexture;\n\tuniform ivec2 morphTargetsTextureSize;\n\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t}\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t}\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal *= faceDirection;\n\t#endif\n#endif\n#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn = getTangentFrame( - vViewPosition, normal,\n\t\t#if defined( USE_NORMALMAP )\n\t\t\tvNormalMapUv\n\t\t#elif defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tvClearcoatNormalMapUv\n\t\t#else\n\t\t\tvUv\n\t\t#endif\n\t\t);\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn[0] *= faceDirection;\n\t\ttbn[1] *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn2[0] *= faceDirection;\n\t\ttbn2[1] *= faceDirection;\n\t#endif\n#endif\nvec3 nonPerturbedNormal = normal;",normal_fragment_maps:"#ifdef USE_NORMALMAP_OBJECTSPACE\n\tnormal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\n\tvec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\tnormal = normalize( tbn * mapN );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef USE_NORMALMAP_OBJECTSPACE\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )\n\tmat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( uv.st );\n\t\tvec2 st1 = dFdy( uv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\n\t\treturn mat3( T * scale, B * scale, N );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = nonPerturbedNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\tclearcoatNormal = normalize( tbn2 * clearcoatMapN );\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",opaque_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;\nconst float Inv255 = 1. / 255.;\nconst vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );\nconst vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );\nconst vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );\nconst vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );\nvec4 packDepthToRGBA( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec4( 0., 0., 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec4( 1., 1., 1., 1. );\n\tfloat vuf;\n\tfloat af = modf( v * PackFactors.a, vuf );\n\tfloat bf = modf( vuf * ShiftRight8, vuf );\n\tfloat gf = modf( vuf * ShiftRight8, vuf );\n\treturn vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );\n}\nvec3 packDepthToRGB( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec3( 0., 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec3( 1., 1., 1. );\n\tfloat vuf;\n\tfloat bf = modf( v * PackFactors.b, vuf );\n\tfloat gf = modf( vuf * ShiftRight8, vuf );\n\treturn vec3( vuf * Inv255, gf * PackUpscale, bf );\n}\nvec2 packDepthToRG( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec2( 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec2( 1., 1. );\n\tfloat vuf;\n\tfloat gf = modf( v * 256., vuf );\n\treturn vec2( vuf * Inv255, gf );\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors4 );\n}\nfloat unpackRGBToDepth( const in vec3 v ) {\n\treturn dot( v, UnpackFactors3 );\n}\nfloat unpackRGToDepth( const in vec2 v ) {\n\treturn v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;\n}\nvec4 pack2HalfToRGBA( const in vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( const in vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn depth * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * depth - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_BATCHING\n\tmvPosition = batchingMatrix * mvPosition;\n#endif\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n\tuniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn mix( 1.0, shadow, shadowIntensity );\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tfloat shadow = 1.0;\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\t\n\t\tfloat lightToPositionLength = length( lightToPosition );\n\t\tif ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {\n\t\t\tfloat dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\t\tdp += shadowBias;\n\t\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\t\tshadow = (\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t\t) * ( 1.0 / 9.0 );\n\t\t\t#else\n\t\t\t\tshadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t\t#endif\n\t\t}\n\t\treturn mix( 1.0, shadow, shadowIntensity );\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tuniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tint size = textureSize( boneTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn saturate( toneMappingExposure * color );\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 CineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nconst mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(\n\tvec3( 1.6605, - 0.1246, - 0.0182 ),\n\tvec3( - 0.5876, 1.1329, - 0.1006 ),\n\tvec3( - 0.0728, - 0.0083, 1.1187 )\n);\nconst mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(\n\tvec3( 0.6274, 0.0691, 0.0164 ),\n\tvec3( 0.3293, 0.9195, 0.0880 ),\n\tvec3( 0.0433, 0.0113, 0.8956 )\n);\nvec3 agxDefaultContrastApprox( vec3 x ) {\n\tvec3 x2 = x * x;\n\tvec3 x4 = x2 * x2;\n\treturn + 15.5 * x4 * x2\n\t\t- 40.14 * x4 * x\n\t\t+ 31.96 * x4\n\t\t- 6.868 * x2 * x\n\t\t+ 0.4298 * x2\n\t\t+ 0.1191 * x\n\t\t- 0.00232;\n}\nvec3 AgXToneMapping( vec3 color ) {\n\tconst mat3 AgXInsetMatrix = mat3(\n\t\tvec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),\n\t\tvec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),\n\t\tvec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )\n\t);\n\tconst mat3 AgXOutsetMatrix = mat3(\n\t\tvec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),\n\t\tvec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),\n\t\tvec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )\n\t);\n\tconst float AgxMinEv = - 12.47393;\tconst float AgxMaxEv = 4.026069;\n\tcolor *= toneMappingExposure;\n\tcolor = LINEAR_SRGB_TO_LINEAR_REC2020 * color;\n\tcolor = AgXInsetMatrix * color;\n\tcolor = max( color, 1e-10 );\tcolor = log2( color );\n\tcolor = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );\n\tcolor = clamp( color, 0.0, 1.0 );\n\tcolor = agxDefaultContrastApprox( color );\n\tcolor = AgXOutsetMatrix * color;\n\tcolor = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );\n\tcolor = LINEAR_REC2020_TO_LINEAR_SRGB * color;\n\tcolor = clamp( color, 0.0, 1.0 );\n\treturn color;\n}\nvec3 NeutralToneMapping( vec3 color ) {\n\tconst float StartCompression = 0.8 - 0.04;\n\tconst float Desaturation = 0.15;\n\tcolor *= toneMappingExposure;\n\tfloat x = min( color.r, min( color.g, color.b ) );\n\tfloat offset = x < 0.08 ? x - 6.25 * x * x : 0.04;\n\tcolor -= offset;\n\tfloat peak = max( color.r, max( color.g, color.b ) );\n\tif ( peak < StartCompression ) return color;\n\tfloat d = 1. - StartCompression;\n\tfloat newPeak = 1. - d * d / ( peak + d - StartCompression );\n\tcolor *= newPeak / peak;\n\tfloat g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );\n\treturn mix( color, vec3( newPeak ), g );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmitted = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tfloat w0( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n\t}\n\tfloat w1( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n\t}\n\tfloat w2( float a ){\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n\t}\n\tfloat w3( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * a * a );\n\t}\n\tfloat g0( float a ) {\n\t\treturn w0( a ) + w1( a );\n\t}\n\tfloat g1( float a ) {\n\t\treturn w2( a ) + w3( a );\n\t}\n\tfloat h0( float a ) {\n\t\treturn - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n\t}\n\tfloat h1( float a ) {\n\t\treturn 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n\t}\n\tvec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {\n\t\tuv = uv * texelSize.zw + 0.5;\n\t\tvec2 iuv = floor( uv );\n\t\tvec2 fuv = fract( uv );\n\t\tfloat g0x = g0( fuv.x );\n\t\tfloat g1x = g1( fuv.x );\n\t\tfloat h0x = h0( fuv.x );\n\t\tfloat h1x = h1( fuv.x );\n\t\tfloat h0y = h0( fuv.y );\n\t\tfloat h1y = h1( fuv.y );\n\t\tvec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\treturn g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n\t\t\tg1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n\t}\n\tvec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n\t\tvec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n\t\tvec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n\t\tvec2 fLodSizeInv = 1.0 / fLodSize;\n\t\tvec2 cLodSizeInv = 1.0 / cLodSize;\n\t\tvec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );\n\t\tvec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );\n\t\treturn mix( fSample, cSample, fract( lod ) );\n\t}\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\treturn textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n\t}\n\tvec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn vec3( 1.0 );\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec4 transmittedLight;\n\t\tvec3 transmittance;\n\t\t#ifdef USE_DISPERSION\n\t\t\tfloat halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;\n\t\t\tvec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );\n\t\t\tfor ( int i = 0; i < 3; i ++ ) {\n\t\t\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );\n\t\t\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\t\n\t\t\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\t\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\t\t\trefractionCoords += 1.0;\n\t\t\t\trefractionCoords /= 2.0;\n\t\t\n\t\t\t\tvec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );\n\t\t\t\ttransmittedLight[ i ] = transmissionSample[ i ];\n\t\t\t\ttransmittedLight.a += transmissionSample.a;\n\t\t\t\ttransmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];\n\t\t\t}\n\t\t\ttransmittedLight.a /= 3.0;\n\t\t\n\t\t#else\n\t\t\n\t\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\t\trefractionCoords += 1.0;\n\t\t\trefractionCoords /= 2.0;\n\t\t\ttransmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\t\ttransmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\t\n\t\t#endif\n\t\tvec3 attenuatedColor = transmittance * transmittedLight.rgb;\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\tfloat transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );\n\t}\n#endif",uv_pars_fragment:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_pars_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tuniform mat3 mapTransform;\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform mat3 alphaMapTransform;\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tuniform mat3 lightMapTransform;\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tuniform mat3 aoMapTransform;\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tuniform mat3 bumpMapTransform;\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tuniform mat3 normalMapTransform;\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tuniform mat3 displacementMapTransform;\n\tvarying vec2 vDisplacementMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tuniform mat3 emissiveMapTransform;\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tuniform mat3 metalnessMapTransform;\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tuniform mat3 roughnessMapTransform;\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tuniform mat3 anisotropyMapTransform;\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tuniform mat3 clearcoatMapTransform;\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform mat3 clearcoatNormalMapTransform;\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform mat3 clearcoatRoughnessMapTransform;\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tuniform mat3 sheenColorMapTransform;\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tuniform mat3 sheenRoughnessMapTransform;\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tuniform mat3 iridescenceMapTransform;\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform mat3 iridescenceThicknessMapTransform;\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tuniform mat3 specularMapTransform;\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tuniform mat3 specularColorMapTransform;\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tuniform mat3 specularIntensityMapTransform;\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvUv = vec3( uv, 1 ).xy;\n#endif\n#ifdef USE_MAP\n\tvMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ALPHAMAP\n\tvAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_LIGHTMAP\n\tvLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_AOMAP\n\tvAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_BUMPMAP\n\tvBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_NORMALMAP\n\tvNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tvDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_METALNESSMAP\n\tvMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULARMAP\n\tvSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tvTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_THICKNESSMAP\n\tvThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_BATCHING\n\t\tworldPosition = batchingMatrix * worldPosition;\n\t#endif\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\ttexColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nuniform mat3 backgroundRotation;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",depth_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#include <morphinstance_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <clipping_planes_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#elif DEPTH_PACKING == 3202\n\t\tgl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );\n\t#elif DEPTH_PACKING == 3203\n\t\tgl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#include <morphinstance_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <clipping_planes_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define USE_SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef USE_SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULAR_COLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_DISPERSION\n\tuniform float dispersion;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\tuniform vec2 anisotropyVector;\n\t#ifdef USE_ANISOTROPYMAP\n\t\tuniform sampler2D anisotropyMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;\n\t#endif\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef USE_POINTS_UV\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\nvoid main() {\n\t#ifdef USE_POINTS_UV\n\t\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\t#endif\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix[ 3 ];\n\tvec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}"},Ss={common:{diffuse:{value:new uo(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new ai},alphaMap:{value:null},alphaMapTransform:{value:new ai},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new ai}},envmap:{envMap:{value:null},envMapRotation:{value:new ai},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new ai}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new ai}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new ai},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new ai},normalScale:{value:new ii(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new ai},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new ai}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new ai}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new ai}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new uo(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new uo(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new ai},alphaTest:{value:0},uvTransform:{value:new ai}},sprite:{diffuse:{value:new uo(16777215)},opacity:{value:1},center:{value:new ii(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new ai},alphaMap:{value:null},alphaMapTransform:{value:new ai},alphaTest:{value:0}}},Ms={basic:{uniforms:es([Ss.common,Ss.specularmap,Ss.envmap,Ss.aomap,Ss.lightmap,Ss.fog]),vertexShader:ws.meshbasic_vert,fragmentShader:ws.meshbasic_frag},lambert:{uniforms:es([Ss.common,Ss.specularmap,Ss.envmap,Ss.aomap,Ss.lightmap,Ss.emissivemap,Ss.bumpmap,Ss.normalmap,Ss.displacementmap,Ss.fog,Ss.lights,{emissive:{value:new uo(0)}}]),vertexShader:ws.meshlambert_vert,fragmentShader:ws.meshlambert_frag},phong:{uniforms:es([Ss.common,Ss.specularmap,Ss.envmap,Ss.aomap,Ss.lightmap,Ss.emissivemap,Ss.bumpmap,Ss.normalmap,Ss.displacementmap,Ss.fog,Ss.lights,{emissive:{value:new uo(0)},specular:{value:new uo(1118481)},shininess:{value:30}}]),vertexShader:ws.meshphong_vert,fragmentShader:ws.meshphong_frag},standard:{uniforms:es([Ss.common,Ss.envmap,Ss.aomap,Ss.lightmap,Ss.emissivemap,Ss.bumpmap,Ss.normalmap,Ss.displacementmap,Ss.roughnessmap,Ss.metalnessmap,Ss.fog,Ss.lights,{emissive:{value:new uo(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:ws.meshphysical_vert,fragmentShader:ws.meshphysical_frag},toon:{uniforms:es([Ss.common,Ss.aomap,Ss.lightmap,Ss.emissivemap,Ss.bumpmap,Ss.normalmap,Ss.displacementmap,Ss.gradientmap,Ss.fog,Ss.lights,{emissive:{value:new uo(0)}}]),vertexShader:ws.meshtoon_vert,fragmentShader:ws.meshtoon_frag},matcap:{uniforms:es([Ss.common,Ss.bumpmap,Ss.normalmap,Ss.displacementmap,Ss.fog,{matcap:{value:null}}]),vertexShader:ws.meshmatcap_vert,fragmentShader:ws.meshmatcap_frag},points:{uniforms:es([Ss.points,Ss.fog]),vertexShader:ws.points_vert,fragmentShader:ws.points_frag},dashed:{uniforms:es([Ss.common,Ss.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ws.linedashed_vert,fragmentShader:ws.linedashed_frag},depth:{uniforms:es([Ss.common,Ss.displacementmap]),vertexShader:ws.depth_vert,fragmentShader:ws.depth_frag},normal:{uniforms:es([Ss.common,Ss.bumpmap,Ss.normalmap,Ss.displacementmap,{opacity:{value:1}}]),vertexShader:ws.meshnormal_vert,fragmentShader:ws.meshnormal_frag},sprite:{uniforms:es([Ss.sprite,Ss.fog]),vertexShader:ws.sprite_vert,fragmentShader:ws.sprite_frag},background:{uniforms:{uvTransform:{value:new ai},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:ws.background_vert,fragmentShader:ws.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new ai}},vertexShader:ws.backgroundCube_vert,fragmentShader:ws.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:ws.cube_vert,fragmentShader:ws.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ws.equirect_vert,fragmentShader:ws.equirect_frag},distanceRGBA:{uniforms:es([Ss.common,Ss.displacementmap,{referencePosition:{value:new zi},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ws.distanceRGBA_vert,fragmentShader:ws.distanceRGBA_frag},shadow:{uniforms:es([Ss.lights,Ss.fog,{color:{value:new uo(0)},opacity:{value:1}}]),vertexShader:ws.shadow_vert,fragmentShader:ws.shadow_frag}};Ms.physical={uniforms:es([Ms.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new ai},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new ai},clearcoatNormalScale:{value:new ii(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new ai},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new ai},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new ai},sheen:{value:0},sheenColor:{value:new uo(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new ai},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new ai},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new ai},transmissionSamplerSize:{value:new ii},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new ai},attenuationDistance:{value:0},attenuationColor:{value:new uo(0)},specularColor:{value:new uo(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new ai},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new ai},anisotropyVector:{value:new ii},anisotropyMap:{value:null},anisotropyMapTransform:{value:new ai}}]),vertexShader:ws.meshphysical_vert,fragmentShader:ws.meshphysical_frag};var ks={r:0,b:0,g:0},Ts=new ka,Es=new va;function Cs(e,t,n,r,i,a,o){var s,u,l=new uo(0),c=!0===a?0:1,h=null,d=0,f=null;function p(e){var r=!0===e.isScene?e.background:null;r&&r.isTexture&&(r=(e.backgroundBlurriness>0?n:t).get(r));return r}function A(t,n){t.getRGB(ks,ts(e)),r.buffers.color.setClear(ks.r,ks.g,ks.b,n,o)}return{getClearColor:function(){return l},setClearColor:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;l.set(e),A(l,c=t)},getClearAlpha:function(){return c},setClearAlpha:function(e){A(l,c=e)},render:function(t){var n=!1,i=p(t);null===i?A(l,c):i&&i.isColor&&(A(i,1),n=!0);var a=e.xr.getEnvironmentBlendMode();"additive"===a?r.buffers.color.setClear(0,0,0,1,o):"alpha-blend"===a&&r.buffers.color.setClear(0,0,0,0,o),(e.autoClear||n)&&(r.buffers.depth.setTest(!0),r.buffers.depth.setMask(!0),r.buffers.color.setMask(!0),e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil))},addToRenderList:function(t,n){var r=p(n);r&&(r.isCubeTexture||r.mapping===bt)?(void 0===u&&((u=new Jo(new Zo(1,1,1),new rs({name:"BackgroundCubeMaterial",uniforms:$o(Ms.backgroundCube.uniforms),vertexShader:Ms.backgroundCube.vertexShader,fragmentShader:Ms.backgroundCube.fragmentShader,side:be,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(u)),Ts.copy(n.backgroundRotation),Ts.x*=-1,Ts.y*=-1,Ts.z*=-1,r.isCubeTexture&&!1===r.isRenderTargetTexture&&(Ts.y*=-1,Ts.z*=-1),u.material.uniforms.envMap.value=r,u.material.uniforms.flipEnvMap.value=r.isCubeTexture&&!1===r.isRenderTargetTexture?-1:1,u.material.uniforms.backgroundBlurriness.value=n.backgroundBlurriness,u.material.uniforms.backgroundIntensity.value=n.backgroundIntensity,u.material.uniforms.backgroundRotation.value.setFromMatrix4(Es.makeRotationFromEuler(Ts)),u.material.toneMapped=mi.getTransfer(r.colorSpace)!==ur,h===r&&d===r.version&&f===e.toneMapping||(u.material.needsUpdate=!0,h=r,d=r.version,f=e.toneMapping),u.layers.enableAll(),t.unshift(u,u.geometry,u.material,0,0,null)):r&&r.isTexture&&(void 0===s&&((s=new Jo(new _s(2,2),new rs({name:"BackgroundMaterial",uniforms:$o(Ms.background.uniforms),vertexShader:Ms.background.vertexShader,fragmentShader:Ms.background.fragmentShader,side:ye,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),Object.defineProperty(s.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(s)),s.material.uniforms.t2D.value=r,s.material.uniforms.backgroundIntensity.value=n.backgroundIntensity,s.material.toneMapped=mi.getTransfer(r.colorSpace)!==ur,!0===r.matrixAutoUpdate&&r.updateMatrix(),s.material.uniforms.uvTransform.value.copy(r.matrix),h===r&&d===r.version&&f===e.toneMapping||(s.material.needsUpdate=!0,h=r,d=r.version,f=e.toneMapping),s.layers.enableAll(),t.unshift(s,s.geometry,s.material,0,0,null))}}}function Rs(e,t){var n=e.getParameter(e.MAX_VERTEX_ATTRIBS),r={},i=l(null),a=i,o=!1;function s(t){return e.bindVertexArray(t)}function u(t){return e.deleteVertexArray(t)}function l(e){for(var t=[],r=[],i=[],a=0;a<n;a++)t[a]=0,r[a]=0,i[a]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:t,enabledAttributes:r,attributeDivisors:i,object:e,attributes:{},index:null}}function c(){for(var e=a.newAttributes,t=0,n=e.length;t<n;t++)e[t]=0}function h(e){d(e,0)}function d(t,n){var r=a.newAttributes,i=a.enabledAttributes,o=a.attributeDivisors;r[t]=1,0===i[t]&&(e.enableVertexAttribArray(t),i[t]=1),o[t]!==n&&(e.vertexAttribDivisor(t,n),o[t]=n)}function f(){for(var t=a.newAttributes,n=a.enabledAttributes,r=0,i=n.length;r<i;r++)n[r]!==t[r]&&(e.disableVertexAttribArray(r),n[r]=0)}function p(t,n,r,i,a,o,s){!0===s?e.vertexAttribIPointer(t,n,r,a,o):e.vertexAttribPointer(t,n,r,i,a,o)}function A(){v(),o=!0,a!==i&&s((a=i).object)}function v(){i.geometry=null,i.program=null,i.wireframe=!1}return{setup:function(n,i,u,A,v){var m,g=function(t,n,i){var a=!0===i.wireframe,o=r[t.id];void 0===o&&(o={},r[t.id]=o);var s=o[n.id];void 0===s&&(s={},o[n.id]=s);var u=s[a];void 0===u&&(u=l(e.createVertexArray()),s[a]=u);return u}(A,u,i);a!==g&&s((a=g).object),m=function(e,t,n,r){var i=a.attributes,o=t.attributes,s=0,u=n.getAttributes();for(var l in u){if(u[l].location>=0){var c=i[l],h=o[l];if(void 0===h&&("instanceMatrix"===l&&e.instanceMatrix&&(h=e.instanceMatrix),"instanceColor"===l&&e.instanceColor&&(h=e.instanceColor)),void 0===c)return!0;if(c.attribute!==h)return!0;if(h&&c.data!==h.data)return!0;s++}}return a.attributesNum!==s||a.index!==r}(n,A,u,v),m&&function(e,t,n,r){var i={},o=t.attributes,s=0,u=n.getAttributes();for(var l in u){if(u[l].location>=0){var c=o[l];void 0===c&&("instanceMatrix"===l&&e.instanceMatrix&&(c=e.instanceMatrix),"instanceColor"===l&&e.instanceColor&&(c=e.instanceColor));var h={};h.attribute=c,c&&c.data&&(h.data=c.data),i[l]=h,s++}}a.attributes=i,a.attributesNum=s,a.index=r}(n,A,u,v),null!==v&&t.update(v,e.ELEMENT_ARRAY_BUFFER),(m||o)&&(o=!1,function(n,r,i,a){c();var o=a.attributes,s=i.getAttributes(),u=r.defaultAttributeValues;for(var l in s){var A=s[l];if(A.location>=0){var v=o[l];if(void 0===v&&("instanceMatrix"===l&&n.instanceMatrix&&(v=n.instanceMatrix),"instanceColor"===l&&n.instanceColor&&(v=n.instanceColor)),void 0!==v){var m=v.normalized,g=v.itemSize,y=t.get(v);if(void 0===y)continue;var b=y.buffer,x=y.type,_=y.bytesPerElement,w=x===e.INT||x===e.UNSIGNED_INT||v.gpuType===Ft;if(v.isInterleavedBufferAttribute){var S=v.data,M=S.stride,k=v.offset;if(S.isInstancedInterleavedBuffer){for(var T=0;T<A.locationSize;T++)d(A.location+T,S.meshPerAttribute);!0!==n.isInstancedMesh&&void 0===a._maxInstanceCount&&(a._maxInstanceCount=S.meshPerAttribute*S.count)}else for(var E=0;E<A.locationSize;E++)h(A.location+E);e.bindBuffer(e.ARRAY_BUFFER,b);for(var C=0;C<A.locationSize;C++)p(A.location+C,g/A.locationSize,x,m,M*_,(k+g/A.locationSize*C)*_,w)}else{if(v.isInstancedBufferAttribute){for(var R=0;R<A.locationSize;R++)d(A.location+R,v.meshPerAttribute);!0!==n.isInstancedMesh&&void 0===a._maxInstanceCount&&(a._maxInstanceCount=v.meshPerAttribute*v.count)}else for(var B=0;B<A.locationSize;B++)h(A.location+B);e.bindBuffer(e.ARRAY_BUFFER,b);for(var P=0;P<A.locationSize;P++)p(A.location+P,g/A.locationSize,x,m,g*_,g/A.locationSize*P*_,w)}}else if(void 0!==u){var N=u[l];if(void 0!==N)switch(N.length){case 2:e.vertexAttrib2fv(A.location,N);break;case 3:e.vertexAttrib3fv(A.location,N);break;case 4:e.vertexAttrib4fv(A.location,N);break;default:e.vertexAttrib1fv(A.location,N)}}}}f()}(n,i,u,A),null!==v&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t.get(v).buffer))},reset:A,resetDefaultState:v,dispose:function(){for(var e in A(),r){var t=r[e];for(var n in t){var i=t[n];for(var a in i)u(i[a].object),delete i[a];delete t[n]}delete r[e]}},releaseStatesOfGeometry:function(e){if(void 0!==r[e.id]){var t=r[e.id];for(var n in t){var i=t[n];for(var a in i)u(i[a].object),delete i[a];delete t[n]}delete r[e.id]}},releaseStatesOfProgram:function(e){for(var t in r){var n=r[t];if(void 0!==n[e.id]){var i=n[e.id];for(var a in i)u(i[a].object),delete i[a];delete n[e.id]}}},initAttributes:c,enableAttribute:h,disableUnusedAttributes:f}}function Bs(e,t,n){var r;function i(t,i,a){0!==a&&(e.drawArraysInstanced(r,t,i,a),n.update(i,r,a))}this.setMode=function(e){r=e},this.render=function(t,i){e.drawArrays(r,t,i),n.update(i,r,1)},this.renderInstances=i,this.renderMultiDraw=function(e,i,a){if(0!==a){t.get("WEBGL_multi_draw").multiDrawArraysWEBGL(r,e,0,i,0,a);for(var o=0,s=0;s<a;s++)o+=i[s];n.update(o,r,1)}},this.renderMultiDrawInstances=function(e,a,o,s){if(0!==o){var u=t.get("WEBGL_multi_draw");if(null===u)for(var l=0;l<e.length;l++)i(e[l],a[l],s[l]);else{u.multiDrawArraysInstancedWEBGL(r,e,0,a,0,s,0,o);for(var c=0,h=0;h<o;h++)c+=a[h]*s[h];n.update(c,r,1)}}}}function Ps(e,t,n,r){var i;function a(t){if("highp"===t){if(e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}var o=void 0!==n.precision?n.precision:"highp",s=a(o);s!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",s,"instead."),o=s);var u=!0===n.logarithmicDepthBuffer,l=!0===n.reverseDepthBuffer&&t.has("EXT_clip_control"),c=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),h=e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS);return{isWebGL2:!0,getMaxAnisotropy:function(){if(void 0!==i)return i;if(!0===t.has("EXT_texture_filter_anisotropic")){var n=t.get("EXT_texture_filter_anisotropic");i=e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i},getMaxPrecision:a,textureFormatReadable:function(t){return t===Yt||r.convert(t)===e.getParameter(e.IMPLEMENTATION_COLOR_READ_FORMAT)},textureTypeReadable:function(n){var i=n===Gt&&(t.has("EXT_color_buffer_half_float")||t.has("EXT_color_buffer_float"));return!(n!==It&&r.convert(n)!==e.getParameter(e.IMPLEMENTATION_COLOR_READ_TYPE)&&n!==zt&&!i)},precision:o,logarithmicDepthBuffer:u,reverseDepthBuffer:l,maxTextures:c,maxVertexTextures:h,maxTextureSize:e.getParameter(e.MAX_TEXTURE_SIZE),maxCubemapSize:e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE),maxAttributes:e.getParameter(e.MAX_VERTEX_ATTRIBS),maxVertexUniforms:e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS),maxVaryings:e.getParameter(e.MAX_VARYING_VECTORS),maxFragmentUniforms:e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS),vertexTextures:h>0,maxSamples:e.getParameter(e.MAX_SAMPLES)}}function Ns(e){var t=this,n=null,r=0,i=!1,a=!1,o=new vs,s=new ai,u={value:null,needsUpdate:!1};function l(e,n,r,i){var a=null!==e?e.length:0,l=null;if(0!==a){if(l=u.value,!0!==i||null===l){var c=r+4*a,h=n.matrixWorldInverse;s.getNormalMatrix(h),(null===l||l.length<c)&&(l=new Float32Array(c));for(var d=0,f=r;d!==a;++d,f+=4)o.copy(e[d]).applyMatrix4(h,s),o.normal.toArray(l,f),l[f+3]=o.constant}u.value=l,u.needsUpdate=!0}return t.numPlanes=a,t.numIntersection=0,l}this.uniform=u,this.numPlanes=0,this.numIntersection=0,this.init=function(e,t){var n=0!==e.length||t||0!==r||i;return i=t,r=e.length,n},this.beginShadows=function(){a=!0,l(null)},this.endShadows=function(){a=!1},this.setGlobalState=function(e,t){n=l(e,t,0)},this.setState=function(o,s,c){var h=o.clippingPlanes,d=o.clipIntersection,f=o.clipShadows,p=e.get(o);if(!i||null===h||0===h.length||a&&!f)a?l(null):function(){u.value!==n&&(u.value=n,u.needsUpdate=r>0);t.numPlanes=r,t.numIntersection=0}();else{var A=a?0:r,v=4*A,m=p.clippingState||null;u.value=m,m=l(h,s,v,c);for(var g=0;g!==v;++g)m[g]=n[g];p.clippingState=m,this.numIntersection=d?this.numPlanes:0,this.numPlanes+=A}}}function Is(e){var t=new WeakMap;function n(e,t){return t===gt?e.mapping=vt:t===yt&&(e.mapping=mt),e}function r(e){var n=e.target;n.removeEventListener("dispose",r);var i=t.get(n);void 0!==i&&(t.delete(n),i.dispose())}return{get:function(i){if(i&&i.isTexture){var a=i.mapping;if(a===gt||a===yt){if(t.has(i))return n(t.get(i).texture,i.mapping);var o=i.image;if(o&&o.height>0){var s=new ds(o.height);return s.fromEquirectangularTexture(e,i),t.set(i,s),i.addEventListener("dispose",r),n(s.texture,i.mapping)}return null}}return i},dispose:function(){t=new WeakMap}}}var Ds=function(e){Y(n,e);var t=$(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.1,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2e3;return V(this,n),(e=t.call(this)).isOrthographicCamera=!0,e.type="OrthographicCamera",e.zoom=1,e.view=null,e.left=r,e.right=i,e.top=a,e.bottom=o,e.near=s,e.far=u,e.updateProjectionMatrix(),e}return W(n,[{key:"copy",value:function(e,t){return oe(Q(n.prototype),"copy",this).call(this,e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}},{key:"setViewOffset",value:function(e,t,n,r,i,a){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=a,this.updateProjectionMatrix()}},{key:"clearViewOffset",value:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}},{key:"updateProjectionMatrix",value:function(){var e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2,i=n-e,a=n+e,o=r+t,s=r-t;if(null!==this.view&&this.view.enabled){var u=(this.right-this.left)/this.view.fullWidth/this.zoom,l=(this.top-this.bottom)/this.view.fullHeight/this.zoom;a=(i+=u*this.view.offsetX)+u*this.view.width,s=(o-=l*this.view.offsetY)-l*this.view.height}this.projectionMatrix.makeOrthographic(i,a,o,s,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}},{key:"toJSON",value:function(e){var t=oe(Q(n.prototype),"toJSON",this).call(this,e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}]),n}(is),Ls=[.125,.215,.35,.446,.526,.582],Os=20,Fs=new Ds,Us=new uo,zs=null,Gs=0,qs=0,Hs=!1,Vs=(1+Math.sqrt(5))/2,js=1/Vs,Ws=[new zi(-Vs,js,0),new zi(Vs,js,0),new zi(-js,0,Vs),new zi(js,0,Vs),new zi(0,Vs,-js),new zi(0,Vs,js),new zi(-1,1,-1),new zi(1,1,-1),new zi(-1,1,1),new zi(1,1,1)],Xs=function(){function e(t){V(this,e),this._renderer=t,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}return W(e,[{key:"fromScene",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100;zs=this._renderer.getRenderTarget(),Gs=this._renderer.getActiveCubeFace(),qs=this._renderer.getActiveMipmapLevel(),Hs=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);var i=this._allocateTargets();return i.depthBuffer=!0,this._sceneToCubeUV(e,n,r,i),t>0&&this._blur(i,0,0,t),this._applyPMREM(i),this._cleanup(i),i}},{key:"fromEquirectangular",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._fromTexture(e,t)}},{key:"fromCubemap",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._fromTexture(e,t)}},{key:"compileCubemapShader",value:function(){null===this._cubemapMaterial&&(this._cubemapMaterial=Ks(),this._compileMaterial(this._cubemapMaterial))}},{key:"compileEquirectangularShader",value:function(){null===this._equirectMaterial&&(this._equirectMaterial=Js(),this._compileMaterial(this._equirectMaterial))}},{key:"dispose",value:function(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}},{key:"_setSize",value:function(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}},{key:"_dispose",value:function(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(var e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}},{key:"_cleanup",value:function(e){this._renderer.setRenderTarget(zs,Gs,qs),this._renderer.xr.enabled=Hs,e.scissorTest=!1,Qs(e,0,0,e.width,e.height)}},{key:"_fromTexture",value:function(e,t){e.mapping===vt||e.mapping===mt?this._setSize(0===e.image.length?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),zs=this._renderer.getRenderTarget(),Gs=this._renderer.getActiveCubeFace(),qs=this._renderer.getActiveMipmapLevel(),Hs=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;var n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}},{key:"_allocateTargets",value:function(){var e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:Ct,minFilter:Ct,generateMipmaps:!1,type:Gt,format:Yt,colorSpace:or,depthBuffer:!1},r=Ys(e,t,n);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=Ys(e,t,n);var i=this._lodMax,a=function(e){for(var t=[],n=[],r=[],i=e,a=e-4+1+Ls.length,o=0;o<a;o++){var s=Math.pow(2,i);n.push(s);var u=1/s;o>e-4?u=Ls[o-e+4-1]:0===o&&(u=0),r.push(u);for(var l=1/(s-2),c=-l,h=1+l,d=[c,c,h,c,h,h,c,c,h,h,c,h],f=6,p=6,A=3,v=2,m=1,g=new Float32Array(A*p*f),y=new Float32Array(v*p*f),b=new Float32Array(m*p*f),x=0;x<f;x++){var _=x%3*2/3-1,w=x>2?0:-1,S=[_,w,0,_+2/3,w,0,_+2/3,w+1,0,_,w,0,_+2/3,w+1,0,_,w+1,0];g.set(S,A*p*x),y.set(d,v*p*x);var M=[x,x,x,x,x,x];b.set(M,m*p*x)}var k=new Fo;k.setAttribute("position",new xo(g,A)),k.setAttribute("uv",new xo(y,v)),k.setAttribute("faceIndex",new xo(b,m)),t.push(k),i>4&&i--}return{lodPlanes:t,sizeLods:n,sigmas:r}}(i);this._sizeLods=a.sizeLods,this._lodPlanes=a.lodPlanes,this._sigmas=a.sigmas,this._blurMaterial=function(e,t,n){var r=new Float32Array(Os),i=new zi(0,1,0),a=new rs({name:"SphericalGaussianBlur",defines:{n:Os,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:"".concat(e,".0")},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:_e,depthTest:!1,depthWrite:!1});return a}(i,e,t)}return r}},{key:"_compileMaterial",value:function(e){var t=new Jo(this._lodPlanes[0],e);this._renderer.compile(t,Fs)}},{key:"_sceneToCubeUV",value:function(e,t,n,r){var i=new us(90,1,t,n),a=[1,-1,1,1,1,1],o=[1,1,1,-1,-1,-1],s=this._renderer,u=s.autoClear,l=s.toneMapping;s.getClearColor(Us),s.toneMapping=at,s.autoClear=!1;var c=new fo({name:"PMREM.Background",side:be,depthWrite:!1,depthTest:!1}),h=new Jo(new Zo,c),d=!1,f=e.background;f?f.isColor&&(c.color.copy(f),e.background=null,d=!0):(c.color.copy(Us),d=!0);for(var p=0;p<6;p++){var A=p%3;0===A?(i.up.set(0,a[p],0),i.lookAt(o[p],0,0)):1===A?(i.up.set(0,0,a[p]),i.lookAt(0,o[p],0)):(i.up.set(0,a[p],0),i.lookAt(0,0,o[p]));var v=this._cubeSize;Qs(r,A*v,p>2?v:0,v,v),s.setRenderTarget(r),d&&s.render(h,i),s.render(e,i)}h.geometry.dispose(),h.material.dispose(),s.toneMapping=l,s.autoClear=u,e.background=f}},{key:"_textureToCubeUV",value:function(e,t){var n=this._renderer,r=e.mapping===vt||e.mapping===mt;r?(null===this._cubemapMaterial&&(this._cubemapMaterial=Ks()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=Js());var i=r?this._cubemapMaterial:this._equirectMaterial,a=new Jo(this._lodPlanes[0],i);i.uniforms.envMap.value=e;var o=this._cubeSize;Qs(t,0,0,3*o,2*o),n.setRenderTarget(t),n.render(a,Fs)}},{key:"_applyPMREM",value:function(e){var t=this._renderer,n=t.autoClear;t.autoClear=!1;for(var r=this._lodPlanes.length,i=1;i<r;i++){var a=Math.sqrt(this._sigmas[i]*this._sigmas[i]-this._sigmas[i-1]*this._sigmas[i-1]),o=Ws[(r-i-1)%Ws.length];this._blur(e,i-1,i,a,o)}t.autoClear=n}},{key:"_blur",value:function(e,t,n,r,i){var a=this._pingPongRenderTarget;this._halfBlur(e,a,t,n,r,"latitudinal",i),this._halfBlur(a,e,n,n,r,"longitudinal",i)}},{key:"_halfBlur",value:function(e,t,n,r,i,a,o){var s=this._renderer,u=this._blurMaterial;"latitudinal"!==a&&"longitudinal"!==a&&console.error("blur direction must be either latitudinal or longitudinal!");var l=new Jo(this._lodPlanes[r],u),c=u.uniforms,h=this._sizeLods[n]-1,d=isFinite(i)?Math.PI/(2*h):2*Math.PI/39,f=i/d,p=isFinite(i)?1+Math.floor(3*f):Os;p>Os&&console.warn("sigmaRadians, ".concat(i,", is too large and will clip, as it requested ").concat(p," samples when the maximum is set to ").concat(Os));for(var A=[],v=0,m=0;m<Os;++m){var g=m/f,y=Math.exp(-g*g/2);A.push(y),0===m?v+=y:m<p&&(v+=2*y)}for(var b=0;b<A.length;b++)A[b]=A[b]/v;c.envMap.value=e.texture,c.samples.value=p,c.weights.value=A,c.latitudinal.value="latitudinal"===a,o&&(c.poleAxis.value=o);var x=this._lodMax;c.dTheta.value=d,c.mipInt.value=x-n;var _=this._sizeLods[r];Qs(t,3*_*(r>x-4?r-x+4:0),4*(this._cubeSize-_),3*_,2*_),s.setRenderTarget(t),s.render(l,Fs)}}]),e}();function Ys(e,t,n){var r=new Ii(e,t,n);return r.texture.mapping=bt,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function Qs(e,t,n,r,i){e.viewport.set(t,n,r,i),e.scissor.set(t,n,r,i)}function Js(){return new rs({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:_e,depthTest:!1,depthWrite:!1})}function Ks(){return new rs({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:_e,depthTest:!1,depthWrite:!1})}function Zs(e){var t=new WeakMap,n=null;function r(e){var n=e.target;n.removeEventListener("dispose",r);var i=t.get(n);void 0!==i&&(t.delete(n),i.dispose())}return{get:function(i){if(i&&i.isTexture){var a=i.mapping,o=a===gt||a===yt,s=a===vt||a===mt;if(o||s){var u=t.get(i),l=void 0!==u?u.texture.pmremVersion:0;if(i.isRenderTargetTexture&&i.pmremVersion!==l)return null===n&&(n=new Xs(e)),(u=o?n.fromEquirectangular(i,u):n.fromCubemap(i,u)).texture.pmremVersion=i.pmremVersion,t.set(i,u),u.texture;if(void 0!==u)return u.texture;var c=i.image;return o&&c&&c.height>0||s&&c&&function(e){for(var t=0,n=6,r=0;r<n;r++)void 0!==e[r]&&t++;return t===n}(c)?(null===n&&(n=new Xs(e)),(u=o?n.fromEquirectangular(i):n.fromCubemap(i)).texture.pmremVersion=i.pmremVersion,t.set(i,u),i.addEventListener("dispose",r),u.texture):null}}return i},dispose:function(){t=new WeakMap,null!==n&&(n.dispose(),n=null)}}}function $s(e){var t={};function n(n){if(void 0!==t[n])return t[n];var r;switch(n){case"WEBGL_depth_texture":r=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=e.getExtension(n)}return t[n]=r,r}return{has:function(e){return null!==n(e)},init:function(){n("EXT_color_buffer_float"),n("WEBGL_clip_cull_distance"),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture"),n("WEBGL_render_shared_exponent")},get:function(e){var t=n(e);return null===t&&fi("THREE.WebGLRenderer: "+e+" extension not supported."),t}}}function eu(e,t,n,r){var i={},a=new WeakMap;function o(e){var s=e.target;for(var u in null!==s.index&&t.remove(s.index),s.attributes)t.remove(s.attributes[u]);for(var l in s.morphAttributes)for(var c=s.morphAttributes[l],h=0,d=c.length;h<d;h++)t.remove(c[h]);s.removeEventListener("dispose",o),delete i[s.id];var f=a.get(s);f&&(t.remove(f),a.delete(s)),r.releaseStatesOfGeometry(s),!0===s.isInstancedBufferGeometry&&delete s._maxInstanceCount,n.memory.geometries--}function s(e){var n=[],r=e.index,i=e.attributes.position,o=0;if(null!==r){var s=r.array;o=r.version;for(var u=0,l=s.length;u<l;u+=3){var c=s[u+0],h=s[u+1],d=s[u+2];n.push(c,h,h,d,d,c)}}else{if(void 0===i)return;var f=i.array;o=i.version;for(var p=0,A=f.length/3-1;p<A;p+=3){var v=p+0,m=p+1,g=p+2;n.push(v,m,m,g,g,v)}}var y=new(si(n)?Eo:ko)(n,1);y.version=o;var b=a.get(e);b&&t.remove(b),a.set(e,y)}return{get:function(e,t){return!0===i[t.id]||(t.addEventListener("dispose",o),i[t.id]=!0,n.memory.geometries++),t},update:function(n){var r=n.attributes;for(var i in r)t.update(r[i],e.ARRAY_BUFFER);var a=n.morphAttributes;for(var o in a)for(var s=a[o],u=0,l=s.length;u<l;u++)t.update(s[u],e.ARRAY_BUFFER)},getWireframeAttribute:function(e){var t=a.get(e);if(t){var n=e.index;null!==n&&t.version<n.version&&s(e)}else s(e);return a.get(e)}}}function tu(e,t,n){var r,i,a;function o(t,o,s){0!==s&&(e.drawElementsInstanced(r,o,i,t*a,s),n.update(o,r,s))}this.setMode=function(e){r=e},this.setIndex=function(e){i=e.type,a=e.bytesPerElement},this.render=function(t,o){e.drawElements(r,o,i,t*a),n.update(o,r,1)},this.renderInstances=o,this.renderMultiDraw=function(e,a,o){if(0!==o){t.get("WEBGL_multi_draw").multiDrawElementsWEBGL(r,a,0,i,e,0,o);for(var s=0,u=0;u<o;u++)s+=a[u];n.update(s,r,1)}},this.renderMultiDrawInstances=function(e,s,u,l){if(0!==u){var c=t.get("WEBGL_multi_draw");if(null===c)for(var h=0;h<e.length;h++)o(e[h]/a,s[h],l[h]);else{c.multiDrawElementsInstancedWEBGL(r,s,0,i,e,0,l,0,u);for(var d=0,f=0;f<u;f++)d+=s[f]*l[f];n.update(d,r,1)}}}}function nu(e){var t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(n,r,i){switch(t.calls++,r){case e.TRIANGLES:t.triangles+=i*(n/3);break;case e.LINES:t.lines+=i*(n/2);break;case e.LINE_STRIP:t.lines+=i*(n-1);break;case e.LINE_LOOP:t.lines+=i*n;break;case e.POINTS:t.points+=i*n;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",r)}}}}function ru(e,t,n){var r=new WeakMap,i=new Pi;return{update:function(a,o,s){var u=a.morphTargetInfluences,l=o.morphAttributes.position||o.morphAttributes.normal||o.morphAttributes.color,c=void 0!==l?l.length:0,h=r.get(o);if(void 0===h||h.count!==c){void 0!==h&&h.texture.dispose();var d=void 0!==o.morphAttributes.position,f=void 0!==o.morphAttributes.normal,p=void 0!==o.morphAttributes.color,A=o.morphAttributes.position||[],v=o.morphAttributes.normal||[],m=o.morphAttributes.color||[],g=0;!0===d&&(g=1),!0===f&&(g=2),!0===p&&(g=3);var y=o.attributes.position.count*g,b=1;y>t.maxTextureSize&&(b=Math.ceil(y/t.maxTextureSize),y=t.maxTextureSize);var x=new Float32Array(y*b*4*c),_=new Di(x,y,b,c);_.type=zt,_.needsUpdate=!0;for(var w=4*g,S=0;S<c;S++)for(var M=A[S],k=v[S],T=m[S],E=y*b*4*S,C=0;C<M.count;C++){var R=C*w;!0===d&&(i.fromBufferAttribute(M,C),x[E+R+0]=i.x,x[E+R+1]=i.y,x[E+R+2]=i.z,x[E+R+3]=0),!0===f&&(i.fromBufferAttribute(k,C),x[E+R+4]=i.x,x[E+R+5]=i.y,x[E+R+6]=i.z,x[E+R+7]=0),!0===p&&(i.fromBufferAttribute(T,C),x[E+R+8]=i.x,x[E+R+9]=i.y,x[E+R+10]=i.z,x[E+R+11]=4===T.itemSize?i.w:1)}h={count:c,texture:_,size:new ii(y,b)},r.set(o,h),o.addEventListener("dispose",(function e(){_.dispose(),r.delete(o),o.removeEventListener("dispose",e)}))}if(!0===a.isInstancedMesh&&null!==a.morphTexture)s.getUniforms().setValue(e,"morphTexture",a.morphTexture,n);else{for(var B=0,P=0;P<u.length;P++)B+=u[P];var N=o.morphTargetsRelative?1:1-B;s.getUniforms().setValue(e,"morphTargetBaseInfluence",N),s.getUniforms().setValue(e,"morphTargetInfluences",u)}s.getUniforms().setValue(e,"morphTargetsTexture",h.texture,n),s.getUniforms().setValue(e,"morphTargetsTextureSize",h.size)}}}function iu(e,t,n,r){var i=new WeakMap;function a(e){var t=e.target;t.removeEventListener("dispose",a),n.remove(t.instanceMatrix),null!==t.instanceColor&&n.remove(t.instanceColor)}return{update:function(o){var s=r.render.frame,u=o.geometry,l=t.get(o,u);if(i.get(l)!==s&&(t.update(l),i.set(l,s)),o.isInstancedMesh&&(!1===o.hasEventListener("dispose",a)&&o.addEventListener("dispose",a),i.get(o)!==s&&(n.update(o.instanceMatrix,e.ARRAY_BUFFER),null!==o.instanceColor&&n.update(o.instanceColor,e.ARRAY_BUFFER),i.set(o,s))),o.isSkinnedMesh){var c=o.skeleton;i.get(c)!==s&&(c.update(),i.set(c,s))}return l},dispose:function(){i=new WeakMap}}}var au=function(e){Y(n,e);var t=$(n);function n(e,r,i,a,o,s,u,l,c){var h,d=arguments.length>9&&void 0!==arguments[9]?arguments[9]:Kt;if(V(this,n),d!==Kt&&d!==Zt)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");return void 0===i&&d===Kt&&(i=Ut),void 0===i&&d===Zt&&(i=Vt),(h=t.call(this,null,a,o,s,u,l,d,i,c)).isDepthTexture=!0,h.image={width:e,height:r},h.magFilter=void 0!==u?u:St,h.minFilter=void 0!==l?l:St,h.flipY=!1,h.generateMipmaps=!1,h.compareFunction=null,h}return W(n,[{key:"copy",value:function(e){return oe(Q(n.prototype),"copy",this).call(this,e),this.compareFunction=e.compareFunction,this}},{key:"toJSON",value:function(e){var t=oe(Q(n.prototype),"toJSON",this).call(this,e);return null!==this.compareFunction&&(t.compareFunction=this.compareFunction),t}}]),n}(Bi),ou=new Bi,su=new au(1,1),uu=new Di,lu=new Oi,cu=new hs,hu=[],du=[],fu=new Float32Array(16),pu=new Float32Array(9),Au=new Float32Array(4);function vu(e,t,n){var r=e[0];if(r<=0||r>0)return e;var i=t*n,a=hu[i];if(void 0===a&&(a=new Float32Array(i),hu[i]=a),0!==t){r.toArray(a,0);for(var o=1,s=0;o!==t;++o)s+=n,e[o].toArray(a,s)}return a}function mu(e,t){if(e.length!==t.length)return!1;for(var n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}function gu(e,t){for(var n=0,r=t.length;n<r;n++)e[n]=t[n]}function yu(e,t){var n=du[t];void 0===n&&(n=new Int32Array(t),du[t]=n);for(var r=0;r!==t;++r)n[r]=e.allocateTextureUnit();return n}function bu(e,t){var n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function xu(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(mu(n,t))return;e.uniform2fv(this.addr,t),gu(n,t)}}function _u(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)n[0]===t.r&&n[1]===t.g&&n[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(mu(n,t))return;e.uniform3fv(this.addr,t),gu(n,t)}}function wu(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(mu(n,t))return;e.uniform4fv(this.addr,t),gu(n,t)}}function Su(e,t){var n=this.cache,r=t.elements;if(void 0===r){if(mu(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),gu(n,t)}else{if(mu(n,r))return;Au.set(r),e.uniformMatrix2fv(this.addr,!1,Au),gu(n,r)}}function Mu(e,t){var n=this.cache,r=t.elements;if(void 0===r){if(mu(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),gu(n,t)}else{if(mu(n,r))return;pu.set(r),e.uniformMatrix3fv(this.addr,!1,pu),gu(n,r)}}function ku(e,t){var n=this.cache,r=t.elements;if(void 0===r){if(mu(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),gu(n,t)}else{if(mu(n,r))return;fu.set(r),e.uniformMatrix4fv(this.addr,!1,fu),gu(n,r)}}function Tu(e,t){var n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function Eu(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2i(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(mu(n,t))return;e.uniform2iv(this.addr,t),gu(n,t)}}function Cu(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3i(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(mu(n,t))return;e.uniform3iv(this.addr,t),gu(n,t)}}function Ru(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4i(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(mu(n,t))return;e.uniform4iv(this.addr,t),gu(n,t)}}function Bu(e,t){var n=this.cache;n[0]!==t&&(e.uniform1ui(this.addr,t),n[0]=t)}function Pu(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2ui(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(mu(n,t))return;e.uniform2uiv(this.addr,t),gu(n,t)}}function Nu(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3ui(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(mu(n,t))return;e.uniform3uiv(this.addr,t),gu(n,t)}}function Iu(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4ui(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(mu(n,t))return;e.uniform4uiv(this.addr,t),gu(n,t)}}function Du(e,t,n){var r,i=this.cache,a=n.allocateTextureUnit();i[0]!==a&&(e.uniform1i(this.addr,a),i[0]=a),this.type===e.SAMPLER_2D_SHADOW?(su.compareFunction=Er,r=su):r=ou,n.setTexture2D(t||r,a)}function Lu(e,t,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(t||lu,i)}function Ou(e,t,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTextureCube(t||cu,i)}function Fu(e,t,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(t||uu,i)}function Uu(e,t){e.uniform1fv(this.addr,t)}function zu(e,t){var n=vu(t,this.size,2);e.uniform2fv(this.addr,n)}function Gu(e,t){var n=vu(t,this.size,3);e.uniform3fv(this.addr,n)}function qu(e,t){var n=vu(t,this.size,4);e.uniform4fv(this.addr,n)}function Hu(e,t){var n=vu(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,n)}function Vu(e,t){var n=vu(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,n)}function ju(e,t){var n=vu(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,n)}function Wu(e,t){e.uniform1iv(this.addr,t)}function Xu(e,t){e.uniform2iv(this.addr,t)}function Yu(e,t){e.uniform3iv(this.addr,t)}function Qu(e,t){e.uniform4iv(this.addr,t)}function Ju(e,t){e.uniform1uiv(this.addr,t)}function Ku(e,t){e.uniform2uiv(this.addr,t)}function Zu(e,t){e.uniform3uiv(this.addr,t)}function $u(e,t){e.uniform4uiv(this.addr,t)}function el(e,t,n){var r=this.cache,i=t.length,a=yu(n,i);mu(r,a)||(e.uniform1iv(this.addr,a),gu(r,a));for(var o=0;o!==i;++o)n.setTexture2D(t[o]||ou,a[o])}function tl(e,t,n){var r=this.cache,i=t.length,a=yu(n,i);mu(r,a)||(e.uniform1iv(this.addr,a),gu(r,a));for(var o=0;o!==i;++o)n.setTexture3D(t[o]||lu,a[o])}function nl(e,t,n){var r=this.cache,i=t.length,a=yu(n,i);mu(r,a)||(e.uniform1iv(this.addr,a),gu(r,a));for(var o=0;o!==i;++o)n.setTextureCube(t[o]||cu,a[o])}function rl(e,t,n){var r=this.cache,i=t.length,a=yu(n,i);mu(r,a)||(e.uniform1iv(this.addr,a),gu(r,a));for(var o=0;o!==i;++o)n.setTexture2DArray(t[o]||uu,a[o])}var il=W((function e(t,n,r){V(this,e),this.id=t,this.addr=r,this.cache=[],this.type=n.type,this.setValue=function(e){switch(e){case 5126:return bu;case 35664:return xu;case 35665:return _u;case 35666:return wu;case 35674:return Su;case 35675:return Mu;case 35676:return ku;case 5124:case 35670:return Tu;case 35667:case 35671:return Eu;case 35668:case 35672:return Cu;case 35669:case 35673:return Ru;case 5125:return Bu;case 36294:return Pu;case 36295:return Nu;case 36296:return Iu;case 35678:case 36198:case 36298:case 36306:case 35682:return Du;case 35679:case 36299:case 36307:return Lu;case 35680:case 36300:case 36308:case 36293:return Ou;case 36289:case 36303:case 36311:case 36292:return Fu}}(n.type)})),al=W((function e(t,n,r){V(this,e),this.id=t,this.addr=r,this.cache=[],this.type=n.type,this.size=n.size,this.setValue=function(e){switch(e){case 5126:return Uu;case 35664:return zu;case 35665:return Gu;case 35666:return qu;case 35674:return Hu;case 35675:return Vu;case 35676:return ju;case 5124:case 35670:return Wu;case 35667:case 35671:return Xu;case 35668:case 35672:return Yu;case 35669:case 35673:return Qu;case 5125:return Ju;case 36294:return Ku;case 36295:return Zu;case 36296:return $u;case 35678:case 36198:case 36298:case 36306:case 35682:return el;case 35679:case 36299:case 36307:return tl;case 35680:case 36300:case 36308:case 36293:return nl;case 36289:case 36303:case 36311:case 36292:return rl}}(n.type)})),ol=function(){function e(t){V(this,e),this.id=t,this.seq=[],this.map={}}return W(e,[{key:"setValue",value:function(e,t,n){for(var r=this.seq,i=0,a=r.length;i!==a;++i){var o=r[i];o.setValue(e,t[o.id],n)}}}]),e}(),sl=/(\w+)(\])?(\[|\.)?/g;function ul(e,t){e.seq.push(t),e.map[t.id]=t}function ll(e,t,n){var r=e.name,i=r.length;for(sl.lastIndex=0;;){var a=sl.exec(r),o=sl.lastIndex,s=a[1],u="]"===a[2],l=a[3];if(u&&(s|=0),void 0===l||"["===l&&o+2===i){ul(n,void 0===l?new il(s,e,t):new al(s,e,t));break}var c=n.map[s];void 0===c&&ul(n,c=new ol(s)),n=c}}var cl=function(){function e(t,n){V(this,e),this.seq=[],this.map={};for(var r=t.getProgramParameter(n,t.ACTIVE_UNIFORMS),i=0;i<r;++i){var a=t.getActiveUniform(n,i);ll(a,t.getUniformLocation(n,a.name),this)}}return W(e,[{key:"setValue",value:function(e,t,n,r){var i=this.map[t];void 0!==i&&i.setValue(e,n,r)}},{key:"setOptional",value:function(e,t,n){var r=t[n];void 0!==r&&this.setValue(e,n,r)}}],[{key:"upload",value:function(e,t,n,r){for(var i=0,a=t.length;i!==a;++i){var o=t[i],s=n[o.id];!1!==s.needsUpdate&&o.setValue(e,s.value,r)}}},{key:"seqWithValue",value:function(e,t){for(var n=[],r=0,i=e.length;r!==i;++r){var a=e[r];a.id in t&&n.push(a)}return n}}]),e}();function hl(e,t,n){var r=e.createShader(t);return e.shaderSource(r,n),e.compileShader(r),r}var dl=0;var fl=new ai;function pl(e,t,n){var r=e.getShaderParameter(t,e.COMPILE_STATUS),i=e.getShaderInfoLog(t).trim();if(r&&""===i)return"";var a=/ERROR: 0:(\d+)/.exec(i);if(a){var o=parseInt(a[1]);return n.toUpperCase()+"\n\n"+i+"\n\n"+function(e,t){for(var n=e.split("\n"),r=[],i=Math.max(t-6,0),a=Math.min(t+6,n.length),o=i;o<a;o++){var s=o+1;r.push("".concat(s===t?">":" "," ").concat(s,": ").concat(n[o]))}return r.join("\n")}(e.getShaderSource(t),o)}return i}function Al(e,t){var n=function(e){mi._getMatrix(fl,mi.workingColorSpace,e);var t="mat3( ".concat(fl.elements.map((function(e){return e.toFixed(4)}))," )");switch(mi.getTransfer(e)){case sr:return[t,"LinearTransferOETF"];case ur:return[t,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",e),[t,"LinearTransferOETF"]}}(t);return["vec4 ".concat(e,"( vec4 value ) {"),"\treturn ".concat(n[1],"( vec4( value.rgb * ").concat(n[0],", value.a ) );"),"}"].join("\n")}function vl(e,t){var n;switch(t){case ot:n="Linear";break;case st:n="Reinhard";break;case ut:n="Cineon";break;case lt:n="ACESFilmic";break;case ht:n="AgX";break;case dt:n="Neutral";break;case ct:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),n="Linear"}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}var ml=new zi;function gl(){mi.getLuminanceCoefficients(ml);var e=ml.x.toFixed(4),t=ml.y.toFixed(4),n=ml.z.toFixed(4);return["float luminance( const in vec3 rgb ) {","\tconst vec3 weights = vec3( ".concat(e,", ").concat(t,", ").concat(n," );"),"\treturn dot( weights, rgb );","}"].join("\n")}function yl(e){return""!==e}function bl(e,t){var n=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function xl(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}var _l=/^[ \t]*#include +<([\w\d./]+)>/gm;function wl(e){return e.replace(_l,Ml)}var Sl=new Map;function Ml(e,t){var n=ws[t];if(void 0===n){var r=Sl.get(t);if(void 0===r)throw new Error("Can not resolve #include <"+t+">");n=ws[r],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',t,r)}return wl(n)}var kl=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Tl(e){return e.replace(kl,El)}function El(e,t,n,r){for(var i="",a=parseInt(t);a<parseInt(n);a++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+a+" ]").replace(/UNROLLED_LOOP_INDEX/g,a);return i}function Cl(e){var t="precision ".concat(e.precision," float;\n\tprecision ").concat(e.precision," int;\n\tprecision ").concat(e.precision," sampler2D;\n\tprecision ").concat(e.precision," samplerCube;\n\tprecision ").concat(e.precision," sampler3D;\n\tprecision ").concat(e.precision," sampler2DArray;\n\tprecision ").concat(e.precision," sampler2DShadow;\n\tprecision ").concat(e.precision," samplerCubeShadow;\n\tprecision ").concat(e.precision," sampler2DArrayShadow;\n\tprecision ").concat(e.precision," isampler2D;\n\tprecision ").concat(e.precision," isampler3D;\n\tprecision ").concat(e.precision," isamplerCube;\n\tprecision ").concat(e.precision," isampler2DArray;\n\tprecision ").concat(e.precision," usampler2D;\n\tprecision ").concat(e.precision," usampler3D;\n\tprecision ").concat(e.precision," usamplerCube;\n\tprecision ").concat(e.precision," usampler2DArray;\n\t");return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function Rl(e,t,n,r){var i,a,o=e.getContext(),s=n.defines,u=n.vertexShader,l=n.fragmentShader,c=function(e){var t="SHADOWMAP_TYPE_BASIC";return e.shadowMapType===ve?t="SHADOWMAP_TYPE_PCF":e.shadowMapType===me?t="SHADOWMAP_TYPE_PCF_SOFT":e.shadowMapType===ge&&(t="SHADOWMAP_TYPE_VSM"),t}(n),h=function(e){var t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case vt:case mt:t="ENVMAP_TYPE_CUBE";break;case bt:t="ENVMAP_TYPE_CUBE_UV"}return t}(n),d=function(e){var t="ENVMAP_MODE_REFLECTION";e.envMap&&e.envMapMode===mt&&(t="ENVMAP_MODE_REFRACTION");return t}(n),f=function(e){var t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case nt:t="ENVMAP_BLENDING_MULTIPLY";break;case rt:t="ENVMAP_BLENDING_MIX";break;case it:t="ENVMAP_BLENDING_ADD"}return t}(n),p=function(e){var t=e.envMapCubeUVHeight;if(null===t)return null;var n=Math.log2(t)-2,r=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,n),112)),texelHeight:r,maxMip:n}}(n),A=function(e){return[e.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",e.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(yl).join("\n")}(n),v=function(e){var t=[];for(var n in e){var r=e[n];!1!==r&&t.push("#define "+n+" "+r)}return t.join("\n")}(s),m=o.createProgram(),g=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?((i=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,v].filter(yl).join("\n")).length>0&&(i+="\n"),(a=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,v].filter(yl).join("\n")).length>0&&(a+="\n")):(i=[Cl(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,v,n.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",n.batching?"#define USE_BATCHING":"",n.batchingColor?"#define USE_BATCHING_COLOR":"",n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.instancingMorph?"#define USE_INSTANCING_MORPH":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+d:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+n.anisotropyMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents&&!1===n.flatShading?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.morphColors?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+c:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","\tuniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","\tattribute vec2 uv1;","#endif","#ifdef USE_UV2","\tattribute vec2 uv2;","#endif","#ifdef USE_UV3","\tattribute vec2 uv3;","#endif","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(yl).join("\n"),a=[Cl(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,v,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+h:"",n.envMap?"#define "+d:"",n.envMap?"#define "+f:"",p?"#define CUBEUV_TEXEL_WIDTH "+p.texelWidth:"",p?"#define CUBEUV_TEXEL_HEIGHT "+p.texelHeight:"",p?"#define CUBEUV_MAX_MIP "+p.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.dispersion?"#define USE_DISPERSION":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents&&!1===n.flatShading?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor||n.batchingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+c:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==at?"#define TONE_MAPPING":"",n.toneMapping!==at?ws.tonemapping_pars_fragment:"",n.toneMapping!==at?vl("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",ws.colorspace_pars_fragment,Al("linearToOutputTexel",n.outputColorSpace),gl(),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(yl).join("\n")),u=xl(u=bl(u=wl(u),n),n),l=xl(l=bl(l=wl(l),n),n),u=Tl(u),l=Tl(l),!0!==n.isRawShaderMaterial&&(g="#version 300 es\n",i=[A,"#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+i,a=["#define varying in",n.glslVersion===Hr?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===Hr?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+a);var y,b,x=g+i+u,_=g+a+l,w=hl(o,o.VERTEX_SHADER,x),S=hl(o,o.FRAGMENT_SHADER,_);function M(t){if(e.debug.checkShaderErrors){var n=o.getProgramInfoLog(m).trim(),r=o.getShaderInfoLog(w).trim(),s=o.getShaderInfoLog(S).trim(),u=!0,l=!0;if(!1===o.getProgramParameter(m,o.LINK_STATUS))if(u=!1,"function"===typeof e.debug.onShaderError)e.debug.onShaderError(o,m,w,S);else{var c=pl(o,w,"vertex"),h=pl(o,S,"fragment");console.error("THREE.WebGLProgram: Shader Error "+o.getError()+" - VALIDATE_STATUS "+o.getProgramParameter(m,o.VALIDATE_STATUS)+"\n\nMaterial Name: "+t.name+"\nMaterial Type: "+t.type+"\n\nProgram Info Log: "+n+"\n"+c+"\n"+h)}else""!==n?console.warn("THREE.WebGLProgram: Program Info Log:",n):""!==r&&""!==s||(l=!1);l&&(t.diagnostics={runnable:u,programLog:n,vertexShader:{log:r,prefix:i},fragmentShader:{log:s,prefix:a}})}o.deleteShader(w),o.deleteShader(S),y=new cl(o,m),b=function(e,t){for(var n={},r=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),i=0;i<r;i++){var a=e.getActiveAttrib(t,i),o=a.name,s=1;a.type===e.FLOAT_MAT2&&(s=2),a.type===e.FLOAT_MAT3&&(s=3),a.type===e.FLOAT_MAT4&&(s=4),n[o]={type:a.type,location:e.getAttribLocation(t,o),locationSize:s}}return n}(o,m)}o.attachShader(m,w),o.attachShader(m,S),void 0!==n.index0AttributeName?o.bindAttribLocation(m,0,n.index0AttributeName):!0===n.morphTargets&&o.bindAttribLocation(m,0,"position"),o.linkProgram(m),this.getUniforms=function(){return void 0===y&&M(this),y},this.getAttributes=function(){return void 0===b&&M(this),b};var k=!1===n.rendererExtensionParallelShaderCompile;return this.isReady=function(){return!1===k&&(k=o.getProgramParameter(m,37297)),k},this.destroy=function(){r.releaseStatesOfProgram(this),o.deleteProgram(m),this.program=void 0},this.type=n.shaderType,this.name=n.shaderName,this.id=dl++,this.cacheKey=t,this.usedTimes=1,this.program=m,this.vertexShader=w,this.fragmentShader=S,this}var Bl=0,Pl=function(){function e(){V(this,e),this.shaderCache=new Map,this.materialCache=new Map}return W(e,[{key:"update",value:function(e){var t=e.vertexShader,n=e.fragmentShader,r=this._getShaderStage(t),i=this._getShaderStage(n),a=this._getShaderCacheForMaterial(e);return!1===a.has(r)&&(a.add(r),r.usedTimes++),!1===a.has(i)&&(a.add(i),i.usedTimes++),this}},{key:"remove",value:function(e){var t,n=ee(this.materialCache.get(e));try{for(n.s();!(t=n.n()).done;){var r=t.value;r.usedTimes--,0===r.usedTimes&&this.shaderCache.delete(r.code)}}catch(i){n.e(i)}finally{n.f()}return this.materialCache.delete(e),this}},{key:"getVertexShaderID",value:function(e){return this._getShaderStage(e.vertexShader).id}},{key:"getFragmentShaderID",value:function(e){return this._getShaderStage(e.fragmentShader).id}},{key:"dispose",value:function(){this.shaderCache.clear(),this.materialCache.clear()}},{key:"_getShaderCacheForMaterial",value:function(e){var t=this.materialCache,n=t.get(e);return void 0===n&&(n=new Set,t.set(e,n)),n}},{key:"_getShaderStage",value:function(e){var t=this.shaderCache,n=t.get(e);return void 0===n&&(n=new Nl(e),t.set(e,n)),n}}]),e}(),Nl=W((function e(t){V(this,e),this.id=Bl++,this.code=t,this.usedTimes=0}));function Il(e,t,n,r,i,a,o){var s=new Ta,u=new Pl,l=new Set,c=[],h=i.logarithmicDepthBuffer,d=i.vertexTextures,f=i.precision,p={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function A(e){return l.add(e),0===e?"uv":"uv".concat(e)}return{getParameters:function(a,s,c,v,m){var g=v.fog,y=m.geometry,b=a.isMeshStandardMaterial?v.environment:null,x=(a.isMeshStandardMaterial?n:t).get(a.envMap||b),_=x&&x.mapping===bt?x.image.height:null,w=p[a.type];null!==a.precision&&(f=i.getMaxPrecision(a.precision))!==a.precision&&console.warn("THREE.WebGLProgram.getParameters:",a.precision,"not supported, using",f,"instead.");var S,M,k,T,E=y.morphAttributes.position||y.morphAttributes.normal||y.morphAttributes.color,C=void 0!==E?E.length:0,R=0;if(void 0!==y.morphAttributes.position&&(R=1),void 0!==y.morphAttributes.normal&&(R=2),void 0!==y.morphAttributes.color&&(R=3),w){var B=Ms[w];S=B.vertexShader,M=B.fragmentShader}else S=a.vertexShader,M=a.fragmentShader,u.update(a),k=u.getVertexShaderID(a),T=u.getFragmentShaderID(a);var P=e.getRenderTarget(),N=e.state.buffers.depth.getReversed(),I=!0===m.isInstancedMesh,D=!0===m.isBatchedMesh,L=!!a.map,O=!!a.matcap,F=!!x,U=!!a.aoMap,z=!!a.lightMap,G=!!a.bumpMap,q=!!a.normalMap,H=!!a.displacementMap,V=!!a.emissiveMap,j=!!a.metalnessMap,W=!!a.roughnessMap,X=a.anisotropy>0,Y=a.clearcoat>0,Q=a.dispersion>0,J=a.iridescence>0,K=a.sheen>0,Z=a.transmission>0,$=X&&!!a.anisotropyMap,ee=Y&&!!a.clearcoatMap,te=Y&&!!a.clearcoatNormalMap,ne=Y&&!!a.clearcoatRoughnessMap,re=J&&!!a.iridescenceMap,ie=J&&!!a.iridescenceThicknessMap,ae=K&&!!a.sheenColorMap,oe=K&&!!a.sheenRoughnessMap,se=!!a.specularMap,ue=!!a.specularColorMap,le=!!a.specularIntensityMap,ce=Z&&!!a.transmissionMap,he=Z&&!!a.thicknessMap,de=!!a.gradientMap,fe=!!a.alphaMap,pe=a.alphaTest>0,Ae=!!a.alphaHash,ve=!!a.extensions,me=at;a.toneMapped&&(null!==P&&!0!==P.isXRRenderTarget||(me=e.toneMapping));var ge={shaderID:w,shaderType:a.type,shaderName:a.name,vertexShader:S,fragmentShader:M,defines:a.defines,customVertexShaderID:k,customFragmentShaderID:T,isRawShaderMaterial:!0===a.isRawShaderMaterial,glslVersion:a.glslVersion,precision:f,batching:D,batchingColor:D&&null!==m._colorsTexture,instancing:I,instancingColor:I&&null!==m.instanceColor,instancingMorph:I&&null!==m.morphTexture,supportsVertexTextures:d,outputColorSpace:null===P?e.outputColorSpace:!0===P.isXRRenderTarget?P.texture.colorSpace:or,alphaToCoverage:!!a.alphaToCoverage,map:L,matcap:O,envMap:F,envMapMode:F&&x.mapping,envMapCubeUVHeight:_,aoMap:U,lightMap:z,bumpMap:G,normalMap:q,displacementMap:d&&H,emissiveMap:V,normalMapObjectSpace:q&&a.normalMapType===rr,normalMapTangentSpace:q&&a.normalMapType===nr,metalnessMap:j,roughnessMap:W,anisotropy:X,anisotropyMap:$,clearcoat:Y,clearcoatMap:ee,clearcoatNormalMap:te,clearcoatRoughnessMap:ne,dispersion:Q,iridescence:J,iridescenceMap:re,iridescenceThicknessMap:ie,sheen:K,sheenColorMap:ae,sheenRoughnessMap:oe,specularMap:se,specularColorMap:ue,specularIntensityMap:le,transmission:Z,transmissionMap:ce,thicknessMap:he,gradientMap:de,opaque:!1===a.transparent&&a.blending===we&&!1===a.alphaToCoverage,alphaMap:fe,alphaTest:pe,alphaHash:Ae,combine:a.combine,mapUv:L&&A(a.map.channel),aoMapUv:U&&A(a.aoMap.channel),lightMapUv:z&&A(a.lightMap.channel),bumpMapUv:G&&A(a.bumpMap.channel),normalMapUv:q&&A(a.normalMap.channel),displacementMapUv:H&&A(a.displacementMap.channel),emissiveMapUv:V&&A(a.emissiveMap.channel),metalnessMapUv:j&&A(a.metalnessMap.channel),roughnessMapUv:W&&A(a.roughnessMap.channel),anisotropyMapUv:$&&A(a.anisotropyMap.channel),clearcoatMapUv:ee&&A(a.clearcoatMap.channel),clearcoatNormalMapUv:te&&A(a.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:ne&&A(a.clearcoatRoughnessMap.channel),iridescenceMapUv:re&&A(a.iridescenceMap.channel),iridescenceThicknessMapUv:ie&&A(a.iridescenceThicknessMap.channel),sheenColorMapUv:ae&&A(a.sheenColorMap.channel),sheenRoughnessMapUv:oe&&A(a.sheenRoughnessMap.channel),specularMapUv:se&&A(a.specularMap.channel),specularColorMapUv:ue&&A(a.specularColorMap.channel),specularIntensityMapUv:le&&A(a.specularIntensityMap.channel),transmissionMapUv:ce&&A(a.transmissionMap.channel),thicknessMapUv:he&&A(a.thicknessMap.channel),alphaMapUv:fe&&A(a.alphaMap.channel),vertexTangents:!!y.attributes.tangent&&(q||X),vertexColors:a.vertexColors,vertexAlphas:!0===a.vertexColors&&!!y.attributes.color&&4===y.attributes.color.itemSize,pointsUvs:!0===m.isPoints&&!!y.attributes.uv&&(L||fe),fog:!!g,useFog:!0===a.fog,fogExp2:!!g&&g.isFogExp2,flatShading:!0===a.flatShading,sizeAttenuation:!0===a.sizeAttenuation,logarithmicDepthBuffer:h,reverseDepthBuffer:N,skinning:!0===m.isSkinnedMesh,morphTargets:void 0!==y.morphAttributes.position,morphNormals:void 0!==y.morphAttributes.normal,morphColors:void 0!==y.morphAttributes.color,morphTargetsCount:C,morphTextureStride:R,numDirLights:s.directional.length,numPointLights:s.point.length,numSpotLights:s.spot.length,numSpotLightMaps:s.spotLightMap.length,numRectAreaLights:s.rectArea.length,numHemiLights:s.hemi.length,numDirLightShadows:s.directionalShadowMap.length,numPointLightShadows:s.pointShadowMap.length,numSpotLightShadows:s.spotShadowMap.length,numSpotLightShadowsWithMaps:s.numSpotLightShadowsWithMaps,numLightProbes:s.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:a.dithering,shadowMapEnabled:e.shadowMap.enabled&&c.length>0,shadowMapType:e.shadowMap.type,toneMapping:me,decodeVideoTexture:L&&!0===a.map.isVideoTexture&&mi.getTransfer(a.map.colorSpace)===ur,decodeVideoTextureEmissive:V&&!0===a.emissiveMap.isVideoTexture&&mi.getTransfer(a.emissiveMap.colorSpace)===ur,premultipliedAlpha:a.premultipliedAlpha,doubleSided:a.side===xe,flipSided:a.side===be,useDepthPacking:a.depthPacking>=0,depthPacking:a.depthPacking||0,index0AttributeName:a.index0AttributeName,extensionClipCullDistance:ve&&!0===a.extensions.clipCullDistance&&r.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(ve&&!0===a.extensions.multiDraw||D)&&r.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:r.has("KHR_parallel_shader_compile"),customProgramCacheKey:a.customProgramCacheKey()};return ge.vertexUv1s=l.has(1),ge.vertexUv2s=l.has(2),ge.vertexUv3s=l.has(3),l.clear(),ge},getProgramCacheKey:function(t){var n=[];if(t.shaderID?n.push(t.shaderID):(n.push(t.customVertexShaderID),n.push(t.customFragmentShaderID)),void 0!==t.defines)for(var r in t.defines)n.push(r),n.push(t.defines[r]);return!1===t.isRawShaderMaterial&&(!function(e,t){e.push(t.precision),e.push(t.outputColorSpace),e.push(t.envMapMode),e.push(t.envMapCubeUVHeight),e.push(t.mapUv),e.push(t.alphaMapUv),e.push(t.lightMapUv),e.push(t.aoMapUv),e.push(t.bumpMapUv),e.push(t.normalMapUv),e.push(t.displacementMapUv),e.push(t.emissiveMapUv),e.push(t.metalnessMapUv),e.push(t.roughnessMapUv),e.push(t.anisotropyMapUv),e.push(t.clearcoatMapUv),e.push(t.clearcoatNormalMapUv),e.push(t.clearcoatRoughnessMapUv),e.push(t.iridescenceMapUv),e.push(t.iridescenceThicknessMapUv),e.push(t.sheenColorMapUv),e.push(t.sheenRoughnessMapUv),e.push(t.specularMapUv),e.push(t.specularColorMapUv),e.push(t.specularIntensityMapUv),e.push(t.transmissionMapUv),e.push(t.thicknessMapUv),e.push(t.combine),e.push(t.fogExp2),e.push(t.sizeAttenuation),e.push(t.morphTargetsCount),e.push(t.morphAttributeCount),e.push(t.numDirLights),e.push(t.numPointLights),e.push(t.numSpotLights),e.push(t.numSpotLightMaps),e.push(t.numHemiLights),e.push(t.numRectAreaLights),e.push(t.numDirLightShadows),e.push(t.numPointLightShadows),e.push(t.numSpotLightShadows),e.push(t.numSpotLightShadowsWithMaps),e.push(t.numLightProbes),e.push(t.shadowMapType),e.push(t.toneMapping),e.push(t.numClippingPlanes),e.push(t.numClipIntersection),e.push(t.depthPacking)}(n,t),function(e,t){s.disableAll(),t.supportsVertexTextures&&s.enable(0);t.instancing&&s.enable(1);t.instancingColor&&s.enable(2);t.instancingMorph&&s.enable(3);t.matcap&&s.enable(4);t.envMap&&s.enable(5);t.normalMapObjectSpace&&s.enable(6);t.normalMapTangentSpace&&s.enable(7);t.clearcoat&&s.enable(8);t.iridescence&&s.enable(9);t.alphaTest&&s.enable(10);t.vertexColors&&s.enable(11);t.vertexAlphas&&s.enable(12);t.vertexUv1s&&s.enable(13);t.vertexUv2s&&s.enable(14);t.vertexUv3s&&s.enable(15);t.vertexTangents&&s.enable(16);t.anisotropy&&s.enable(17);t.alphaHash&&s.enable(18);t.batching&&s.enable(19);t.dispersion&&s.enable(20);t.batchingColor&&s.enable(21);e.push(s.mask),s.disableAll(),t.fog&&s.enable(0);t.useFog&&s.enable(1);t.flatShading&&s.enable(2);t.logarithmicDepthBuffer&&s.enable(3);t.reverseDepthBuffer&&s.enable(4);t.skinning&&s.enable(5);t.morphTargets&&s.enable(6);t.morphNormals&&s.enable(7);t.morphColors&&s.enable(8);t.premultipliedAlpha&&s.enable(9);t.shadowMapEnabled&&s.enable(10);t.doubleSided&&s.enable(11);t.flipSided&&s.enable(12);t.useDepthPacking&&s.enable(13);t.dithering&&s.enable(14);t.transmission&&s.enable(15);t.sheen&&s.enable(16);t.opaque&&s.enable(17);t.pointsUvs&&s.enable(18);t.decodeVideoTexture&&s.enable(19);t.decodeVideoTextureEmissive&&s.enable(20);t.alphaToCoverage&&s.enable(21);e.push(s.mask)}(n,t),n.push(e.outputColorSpace)),n.push(t.customProgramCacheKey),n.join()},getUniforms:function(e){var t,n=p[e.type];if(n){var r=Ms[n];t=ns.clone(r.uniforms)}else t=e.uniforms;return t},acquireProgram:function(t,n){for(var r,i=0,o=c.length;i<o;i++){var s=c[i];if(s.cacheKey===n){++(r=s).usedTimes;break}}return void 0===r&&(r=new Rl(e,n,t,a),c.push(r)),r},releaseProgram:function(e){if(0===--e.usedTimes){var t=c.indexOf(e);c[t]=c[c.length-1],c.pop(),e.destroy()}},releaseShaderCache:function(e){u.remove(e)},programs:c,dispose:function(){u.dispose()}}}function Dl(){var e=new WeakMap;return{has:function(t){return e.has(t)},get:function(t){var n=e.get(t);return void 0===n&&(n={},e.set(t,n)),n},remove:function(t){e.delete(t)},update:function(t,n,r){e.get(t)[n]=r},dispose:function(){e=new WeakMap}}}function Ll(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function Ol(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function Fl(){var e=[],t=0,n=[],r=[],i=[];function a(n,r,i,a,o,s){var u=e[t];return void 0===u?(u={id:n.id,object:n,geometry:r,material:i,groupOrder:a,renderOrder:n.renderOrder,z:o,group:s},e[t]=u):(u.id=n.id,u.object=n,u.geometry=r,u.material=i,u.groupOrder=a,u.renderOrder=n.renderOrder,u.z=o,u.group=s),t++,u}return{opaque:n,transmissive:r,transparent:i,init:function(){t=0,n.length=0,r.length=0,i.length=0},push:function(e,t,o,s,u,l){var c=a(e,t,o,s,u,l);o.transmission>0?r.push(c):!0===o.transparent?i.push(c):n.push(c)},unshift:function(e,t,o,s,u,l){var c=a(e,t,o,s,u,l);o.transmission>0?r.unshift(c):!0===o.transparent?i.unshift(c):n.unshift(c)},finish:function(){for(var n=t,r=e.length;n<r;n++){var i=e[n];if(null===i.id)break;i.id=null,i.object=null,i.geometry=null,i.material=null,i.group=null}},sort:function(e,t){n.length>1&&n.sort(e||Ll),r.length>1&&r.sort(t||Ol),i.length>1&&i.sort(t||Ol)}}}function Ul(){var e=new WeakMap;return{get:function(t,n){var r,i=e.get(t);return void 0===i?(r=new Fl,e.set(t,[r])):n>=i.length?(r=new Fl,i.push(r)):r=i[n],r},dispose:function(){e=new WeakMap}}}function zl(){var e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];var n;switch(t.type){case"DirectionalLight":n={direction:new zi,color:new uo};break;case"SpotLight":n={position:new zi,direction:new zi,color:new uo,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new zi,color:new uo,distance:0,decay:0};break;case"HemisphereLight":n={direction:new zi,skyColor:new uo,groundColor:new uo};break;case"RectAreaLight":n={color:new uo,position:new zi,halfWidth:new zi,halfHeight:new zi}}return e[t.id]=n,n}}}var Gl=0;function ql(e,t){return(t.castShadow?2:0)-(e.castShadow?2:0)+(t.map?1:0)-(e.map?1:0)}function Hl(e){for(var t=new zl,n=function(){var e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];var n;switch(t.type){case"DirectionalLight":case"SpotLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ii};break;case"PointLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ii,shadowCameraNear:1,shadowCameraFar:1e3}}return e[t.id]=n,n}}}(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0},i=0;i<9;i++)r.probe.push(new zi);var a=new zi,o=new va,s=new va;return{setup:function(i){for(var a=0,o=0,s=0,u=0;u<9;u++)r.probe[u].set(0,0,0);var l=0,c=0,h=0,d=0,f=0,p=0,A=0,v=0,m=0,g=0,y=0;i.sort(ql);for(var b=0,x=i.length;b<x;b++){var _=i[b],w=_.color,S=_.intensity,M=_.distance,k=_.shadow&&_.shadow.map?_.shadow.map.texture:null;if(_.isAmbientLight)a+=w.r*S,o+=w.g*S,s+=w.b*S;else if(_.isLightProbe){for(var T=0;T<9;T++)r.probe[T].addScaledVector(_.sh.coefficients[T],S);y++}else if(_.isDirectionalLight){var E=t.get(_);if(E.color.copy(_.color).multiplyScalar(_.intensity),_.castShadow){var C=_.shadow,R=n.get(_);R.shadowIntensity=C.intensity,R.shadowBias=C.bias,R.shadowNormalBias=C.normalBias,R.shadowRadius=C.radius,R.shadowMapSize=C.mapSize,r.directionalShadow[l]=R,r.directionalShadowMap[l]=k,r.directionalShadowMatrix[l]=_.shadow.matrix,p++}r.directional[l]=E,l++}else if(_.isSpotLight){var B=t.get(_);B.position.setFromMatrixPosition(_.matrixWorld),B.color.copy(w).multiplyScalar(S),B.distance=M,B.coneCos=Math.cos(_.angle),B.penumbraCos=Math.cos(_.angle*(1-_.penumbra)),B.decay=_.decay,r.spot[h]=B;var P=_.shadow;if(_.map&&(r.spotLightMap[m]=_.map,m++,P.updateMatrices(_),_.castShadow&&g++),r.spotLightMatrix[h]=P.matrix,_.castShadow){var N=n.get(_);N.shadowIntensity=P.intensity,N.shadowBias=P.bias,N.shadowNormalBias=P.normalBias,N.shadowRadius=P.radius,N.shadowMapSize=P.mapSize,r.spotShadow[h]=N,r.spotShadowMap[h]=k,v++}h++}else if(_.isRectAreaLight){var I=t.get(_);I.color.copy(w).multiplyScalar(S),I.halfWidth.set(.5*_.width,0,0),I.halfHeight.set(0,.5*_.height,0),r.rectArea[d]=I,d++}else if(_.isPointLight){var D=t.get(_);if(D.color.copy(_.color).multiplyScalar(_.intensity),D.distance=_.distance,D.decay=_.decay,_.castShadow){var L=_.shadow,O=n.get(_);O.shadowIntensity=L.intensity,O.shadowBias=L.bias,O.shadowNormalBias=L.normalBias,O.shadowRadius=L.radius,O.shadowMapSize=L.mapSize,O.shadowCameraNear=L.camera.near,O.shadowCameraFar=L.camera.far,r.pointShadow[c]=O,r.pointShadowMap[c]=k,r.pointShadowMatrix[c]=_.shadow.matrix,A++}r.point[c]=D,c++}else if(_.isHemisphereLight){var F=t.get(_);F.skyColor.copy(_.color).multiplyScalar(S),F.groundColor.copy(_.groundColor).multiplyScalar(S),r.hemi[f]=F,f++}}d>0&&(!0===e.has("OES_texture_float_linear")?(r.rectAreaLTC1=Ss.LTC_FLOAT_1,r.rectAreaLTC2=Ss.LTC_FLOAT_2):(r.rectAreaLTC1=Ss.LTC_HALF_1,r.rectAreaLTC2=Ss.LTC_HALF_2)),r.ambient[0]=a,r.ambient[1]=o,r.ambient[2]=s;var U=r.hash;U.directionalLength===l&&U.pointLength===c&&U.spotLength===h&&U.rectAreaLength===d&&U.hemiLength===f&&U.numDirectionalShadows===p&&U.numPointShadows===A&&U.numSpotShadows===v&&U.numSpotMaps===m&&U.numLightProbes===y||(r.directional.length=l,r.spot.length=h,r.rectArea.length=d,r.point.length=c,r.hemi.length=f,r.directionalShadow.length=p,r.directionalShadowMap.length=p,r.pointShadow.length=A,r.pointShadowMap.length=A,r.spotShadow.length=v,r.spotShadowMap.length=v,r.directionalShadowMatrix.length=p,r.pointShadowMatrix.length=A,r.spotLightMatrix.length=v+m-g,r.spotLightMap.length=m,r.numSpotLightShadowsWithMaps=g,r.numLightProbes=y,U.directionalLength=l,U.pointLength=c,U.spotLength=h,U.rectAreaLength=d,U.hemiLength=f,U.numDirectionalShadows=p,U.numPointShadows=A,U.numSpotShadows=v,U.numSpotMaps=m,U.numLightProbes=y,r.version=Gl++)},setupView:function(e,t){for(var n=0,i=0,u=0,l=0,c=0,h=t.matrixWorldInverse,d=0,f=e.length;d<f;d++){var p=e[d];if(p.isDirectionalLight){var A=r.directional[n];A.direction.setFromMatrixPosition(p.matrixWorld),a.setFromMatrixPosition(p.target.matrixWorld),A.direction.sub(a),A.direction.transformDirection(h),n++}else if(p.isSpotLight){var v=r.spot[u];v.position.setFromMatrixPosition(p.matrixWorld),v.position.applyMatrix4(h),v.direction.setFromMatrixPosition(p.matrixWorld),a.setFromMatrixPosition(p.target.matrixWorld),v.direction.sub(a),v.direction.transformDirection(h),u++}else if(p.isRectAreaLight){var m=r.rectArea[l];m.position.setFromMatrixPosition(p.matrixWorld),m.position.applyMatrix4(h),s.identity(),o.copy(p.matrixWorld),o.premultiply(h),s.extractRotation(o),m.halfWidth.set(.5*p.width,0,0),m.halfHeight.set(0,.5*p.height,0),m.halfWidth.applyMatrix4(s),m.halfHeight.applyMatrix4(s),l++}else if(p.isPointLight){var g=r.point[i];g.position.setFromMatrixPosition(p.matrixWorld),g.position.applyMatrix4(h),i++}else if(p.isHemisphereLight){var y=r.hemi[c];y.direction.setFromMatrixPosition(p.matrixWorld),y.direction.transformDirection(h),c++}}},state:r}}function Vl(e){var t=new Hl(e),n=[],r=[];var i={lightsArray:n,shadowsArray:r,camera:null,lights:t,transmissionRenderTarget:{}};return{init:function(e){i.camera=e,n.length=0,r.length=0},state:i,setupLights:function(){t.setup(n)},setupLightsView:function(e){t.setupView(n,e)},pushLight:function(e){n.push(e)},pushShadow:function(e){r.push(e)}}}function jl(e){var t=new WeakMap;return{get:function(n){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=t.get(n);return void 0===a?(r=new Vl(e),t.set(n,[r])):i>=a.length?(r=new Vl(e),a.push(r)):r=a[i],r},dispose:function(){t=new WeakMap}}}var Wl=function(e){Y(n,e);var t=$(n);function n(e){var r;return V(this,n),(r=t.call(this)).isMeshDepthMaterial=!0,r.depthPacking=Zn,r.map=null,r.alphaMap=null,r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.wireframe=!1,r.wireframeLinewidth=1,r.setValues(e),r}return W(n,[{key:"copy",value:function(e){return oe(Q(n.prototype),"copy",this).call(this,e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}],[{key:"type",get:function(){return"MeshDepthMaterial"}}]),n}(ho),Xl=function(e){Y(n,e);var t=$(n);function n(e){var r;return V(this,n),(r=t.call(this)).isMeshDistanceMaterial=!0,r.map=null,r.alphaMap=null,r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.setValues(e),r}return W(n,[{key:"copy",value:function(e){return oe(Q(n.prototype),"copy",this).call(this,e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}],[{key:"type",get:function(){return"MeshDistanceMaterial"}}]),n}(ho);function Yl(e,t,n){var r,i=new ys,a=new ii,o=new ii,s=new Pi,u=new Wl({depthPacking:$n}),l=new Xl,c={},h=n.maxTextureSize,d=(g(r={},ye,be),g(r,be,ye),g(r,xe,xe),r),f=new rs({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new ii},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),p=f.clone();p.defines.HORIZONTAL_PASS=1;var A=new Fo;A.setAttribute("position",new xo(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));var v=new Jo(A,f),m=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=ve;var y=this.type;function b(n,r){var i=t.update(v);f.defines.VSM_SAMPLES!==n.blurSamples&&(f.defines.VSM_SAMPLES=n.blurSamples,p.defines.VSM_SAMPLES=n.blurSamples,f.needsUpdate=!0,p.needsUpdate=!0),null===n.mapPass&&(n.mapPass=new Ii(a.x,a.y)),f.uniforms.shadow_pass.value=n.map.texture,f.uniforms.resolution.value=n.mapSize,f.uniforms.radius.value=n.radius,e.setRenderTarget(n.mapPass),e.clear(),e.renderBufferDirect(r,null,i,f,v,null),p.uniforms.shadow_pass.value=n.mapPass.texture,p.uniforms.resolution.value=n.mapSize,p.uniforms.radius.value=n.radius,e.setRenderTarget(n.map),e.clear(),e.renderBufferDirect(r,null,i,p,v,null)}function x(t,n,r,i){var a=null,o=!0===r.isPointLight?t.customDistanceMaterial:t.customDepthMaterial;if(void 0!==o)a=o;else if(a=!0===r.isPointLight?l:u,e.localClippingEnabled&&!0===n.clipShadows&&Array.isArray(n.clippingPlanes)&&0!==n.clippingPlanes.length||n.displacementMap&&0!==n.displacementScale||n.alphaMap&&n.alphaTest>0||n.map&&n.alphaTest>0){var s=a.uuid,h=n.uuid,f=c[s];void 0===f&&(f={},c[s]=f);var p=f[h];void 0===p&&(p=a.clone(),f[h]=p,n.addEventListener("dispose",w)),a=p}(a.visible=n.visible,a.wireframe=n.wireframe,a.side=i===ge?null!==n.shadowSide?n.shadowSide:n.side:null!==n.shadowSide?n.shadowSide:d[n.side],a.alphaMap=n.alphaMap,a.alphaTest=n.alphaTest,a.map=n.map,a.clipShadows=n.clipShadows,a.clippingPlanes=n.clippingPlanes,a.clipIntersection=n.clipIntersection,a.displacementMap=n.displacementMap,a.displacementScale=n.displacementScale,a.displacementBias=n.displacementBias,a.wireframeLinewidth=n.wireframeLinewidth,a.linewidth=n.linewidth,!0===r.isPointLight&&!0===a.isMeshDistanceMaterial)&&(e.properties.get(a).light=r);return a}function _(n,r,a,o,s){if(!1!==n.visible){if(n.layers.test(r.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&s===ge)&&(!n.frustumCulled||i.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(a.matrixWorldInverse,n.matrixWorld);var u=t.update(n),l=n.material;if(Array.isArray(l))for(var c=u.groups,h=0,d=c.length;h<d;h++){var f=c[h],p=l[f.materialIndex];if(p&&p.visible){var A=x(n,p,o,s);n.onBeforeShadow(e,n,r,a,u,A,f),e.renderBufferDirect(a,null,u,A,n,f),n.onAfterShadow(e,n,r,a,u,A,f)}}else if(l.visible){var v=x(n,l,o,s);n.onBeforeShadow(e,n,r,a,u,v,null),e.renderBufferDirect(a,null,u,v,n,null),n.onAfterShadow(e,n,r,a,u,v,null)}}for(var m=n.children,g=0,y=m.length;g<y;g++)_(m[g],r,a,o,s)}}function w(e){var t=e.target;for(var n in t.removeEventListener("dispose",w),c){var r=c[n],i=e.target.uuid;if(i in r)r[i].dispose(),delete r[i]}}this.render=function(t,n,r){if(!1!==m.enabled&&(!1!==m.autoUpdate||!1!==m.needsUpdate)&&0!==t.length){var u=e.getRenderTarget(),l=e.getActiveCubeFace(),c=e.getActiveMipmapLevel(),d=e.state;d.setBlending(_e),d.buffers.color.setClear(1,1,1,1),d.buffers.depth.setTest(!0),d.setScissorTest(!1);for(var f=y!==ge&&this.type===ge,p=y===ge&&this.type!==ge,A=0,v=t.length;A<v;A++){var g=t[A],x=g.shadow;if(void 0!==x){if(!1!==x.autoUpdate||!1!==x.needsUpdate){a.copy(x.mapSize);var w=x.getFrameExtents();if(a.multiply(w),o.copy(x.mapSize),(a.x>h||a.y>h)&&(a.x>h&&(o.x=Math.floor(h/w.x),a.x=o.x*w.x,x.mapSize.x=o.x),a.y>h&&(o.y=Math.floor(h/w.y),a.y=o.y*w.y,x.mapSize.y=o.y)),null===x.map||!0===f||!0===p){var S=this.type!==ge?{minFilter:St,magFilter:St}:{};null!==x.map&&x.map.dispose(),x.map=new Ii(a.x,a.y,S),x.map.texture.name=g.name+".shadowMap",x.camera.updateProjectionMatrix()}e.setRenderTarget(x.map),e.clear();for(var M=x.getViewportCount(),k=0;k<M;k++){var T=x.getViewport(k);s.set(o.x*T.x,o.y*T.y,o.x*T.z,o.y*T.w),d.viewport(s),x.updateMatrices(g,k),i=x.getFrustum(),_(n,r,x.camera,g,this.type)}!0!==x.isPointLightShadow&&this.type===ge&&b(x,r),x.needsUpdate=!1}}else console.warn("THREE.WebGLShadowMap:",g,"has no shadow.")}y=this.type,m.needsUpdate=!1,e.setRenderTarget(u,l,c)}}}var Ql=(g(F={},Ye,Qe),g(F,Je,et),g(F,Ze,tt),g(F,Ke,$e),g(F,Qe,Ye),g(F,et,Je),g(F,tt,Ze),g(F,$e,Ke),F);function Jl(e,t){var n,r;var i=new function(){var t=!1,n=new Pi,r=null,i=new Pi(0,0,0,0);return{setMask:function(n){r===n||t||(e.colorMask(n,n,n,n),r=n)},setLocked:function(e){t=e},setClear:function(t,r,a,o,s){!0===s&&(t*=o,r*=o,a*=o),n.set(t,r,a,o),!1===i.equals(n)&&(e.clearColor(t,r,a,o),i.copy(n))},reset:function(){t=!1,r=null,i.set(-1,0,0,0)}}},a=new function(){var n=!1,r=!1,i=null,a=null,o=null;return{setReversed:function(e){if(r!==e){var n=t.get("EXT_clip_control");r?n.clipControlEXT(n.LOWER_LEFT_EXT,n.ZERO_TO_ONE_EXT):n.clipControlEXT(n.LOWER_LEFT_EXT,n.NEGATIVE_ONE_TO_ONE_EXT);var i=o;o=null,this.setClear(i)}r=e},getReversed:function(){return r},setTest:function(t){t?H(e.DEPTH_TEST):V(e.DEPTH_TEST)},setMask:function(t){i===t||n||(e.depthMask(t),i=t)},setFunc:function(t){if(r&&(t=Ql[t]),a!==t){switch(t){case Ye:e.depthFunc(e.NEVER);break;case Qe:e.depthFunc(e.ALWAYS);break;case Je:e.depthFunc(e.LESS);break;case Ke:e.depthFunc(e.LEQUAL);break;case Ze:e.depthFunc(e.EQUAL);break;case $e:e.depthFunc(e.GEQUAL);break;case et:e.depthFunc(e.GREATER);break;case tt:e.depthFunc(e.NOTEQUAL);break;default:e.depthFunc(e.LEQUAL)}a=t}},setLocked:function(e){n=e},setClear:function(t){o!==t&&(r&&(t=1-t),e.clearDepth(t),o=t)},reset:function(){n=!1,i=null,a=null,o=null,r=!1}}},o=new function(){var t=!1,n=null,r=null,i=null,a=null,o=null,s=null,u=null,l=null;return{setTest:function(n){t||(n?H(e.STENCIL_TEST):V(e.STENCIL_TEST))},setMask:function(r){n===r||t||(e.stencilMask(r),n=r)},setFunc:function(t,n,o){r===t&&i===n&&a===o||(e.stencilFunc(t,n,o),r=t,i=n,a=o)},setOp:function(t,n,r){o===t&&s===n&&u===r||(e.stencilOp(t,n,r),o=t,s=n,u=r)},setLocked:function(e){t=e},setClear:function(t){l!==t&&(e.clearStencil(t),l=t)},reset:function(){t=!1,n=null,r=null,i=null,a=null,o=null,s=null,u=null,l=null}}},s=new WeakMap,u=new WeakMap,l={},c={},h=new WeakMap,d=[],f=null,p=!1,A=null,v=null,m=null,y=null,b=null,x=null,_=null,w=new uo(0,0,0),S=0,M=!1,k=null,T=null,E=null,C=null,R=null,B=e.getParameter(e.MAX_COMBINED_TEXTURE_IMAGE_UNITS),P=!1,N=0,I=e.getParameter(e.VERSION);-1!==I.indexOf("WebGL")?(N=parseFloat(/^WebGL (\d)/.exec(I)[1]),P=N>=1):-1!==I.indexOf("OpenGL ES")&&(N=parseFloat(/^OpenGL ES (\d)/.exec(I)[1]),P=N>=2);var D=null,L={},O=e.getParameter(e.SCISSOR_BOX),F=e.getParameter(e.VIEWPORT),U=(new Pi).fromArray(O),z=(new Pi).fromArray(F);function G(t,n,r,i){var a=new Uint8Array(4),o=e.createTexture();e.bindTexture(t,o),e.texParameteri(t,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(t,e.TEXTURE_MAG_FILTER,e.NEAREST);for(var s=0;s<r;s++)t===e.TEXTURE_3D||t===e.TEXTURE_2D_ARRAY?e.texImage3D(n,0,e.RGBA,1,1,i,0,e.RGBA,e.UNSIGNED_BYTE,a):e.texImage2D(n+s,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,a);return o}var q={};function H(t){!0!==l[t]&&(e.enable(t),l[t]=!0)}function V(t){!1!==l[t]&&(e.disable(t),l[t]=!1)}q[e.TEXTURE_2D]=G(e.TEXTURE_2D,e.TEXTURE_2D,1),q[e.TEXTURE_CUBE_MAP]=G(e.TEXTURE_CUBE_MAP,e.TEXTURE_CUBE_MAP_POSITIVE_X,6),q[e.TEXTURE_2D_ARRAY]=G(e.TEXTURE_2D_ARRAY,e.TEXTURE_2D_ARRAY,1,1),q[e.TEXTURE_3D]=G(e.TEXTURE_3D,e.TEXTURE_3D,1,1),i.setClear(0,0,0,1),a.setClear(1),o.setClear(0),H(e.DEPTH_TEST),a.setFunc(Ke),Y(!1),Q(de),H(e.CULL_FACE),X(_e);var j=(g(n={},Ee,e.FUNC_ADD),g(n,Ce,e.FUNC_SUBTRACT),g(n,Re,e.FUNC_REVERSE_SUBTRACT),n);j[Be]=e.MIN,j[Pe]=e.MAX;var W=(g(r={},Ne,e.ZERO),g(r,Ie,e.ONE),g(r,De,e.SRC_COLOR),g(r,Oe,e.SRC_ALPHA),g(r,He,e.SRC_ALPHA_SATURATE),g(r,Ge,e.DST_COLOR),g(r,Ue,e.DST_ALPHA),g(r,Le,e.ONE_MINUS_SRC_COLOR),g(r,Fe,e.ONE_MINUS_SRC_ALPHA),g(r,qe,e.ONE_MINUS_DST_COLOR),g(r,ze,e.ONE_MINUS_DST_ALPHA),g(r,Ve,e.CONSTANT_COLOR),g(r,je,e.ONE_MINUS_CONSTANT_COLOR),g(r,We,e.CONSTANT_ALPHA),g(r,Xe,e.ONE_MINUS_CONSTANT_ALPHA),r);function X(t,n,r,i,a,o,s,u,l,c){if(t!==_e){if(!1===p&&(H(e.BLEND),p=!0),t===Te)a=a||n,o=o||r,s=s||i,n===v&&a===b||(e.blendEquationSeparate(j[n],j[a]),v=n,b=a),r===m&&i===y&&o===x&&s===_||(e.blendFuncSeparate(W[r],W[i],W[o],W[s]),m=r,y=i,x=o,_=s),!1!==u.equals(w)&&l===S||(e.blendColor(u.r,u.g,u.b,l),w.copy(u),S=l),A=t,M=!1;else if(t!==A||c!==M){if(v===Ee&&b===Ee||(e.blendEquation(e.FUNC_ADD),v=Ee,b=Ee),c)switch(t){case we:e.blendFuncSeparate(e.ONE,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case Se:e.blendFunc(e.ONE,e.ONE);break;case Me:e.blendFuncSeparate(e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ZERO,e.ONE);break;case ke:e.blendFuncSeparate(e.ZERO,e.SRC_COLOR,e.ZERO,e.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}else switch(t){case we:e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case Se:e.blendFunc(e.SRC_ALPHA,e.ONE);break;case Me:e.blendFuncSeparate(e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ZERO,e.ONE);break;case ke:e.blendFunc(e.ZERO,e.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}m=null,y=null,x=null,_=null,w.set(0,0,0),S=0,A=t,M=c}}else!0===p&&(V(e.BLEND),p=!1)}function Y(t){k!==t&&(t?e.frontFace(e.CW):e.frontFace(e.CCW),k=t)}function Q(t){t!==he?(H(e.CULL_FACE),t!==T&&(t===de?e.cullFace(e.BACK):t===fe?e.cullFace(e.FRONT):e.cullFace(e.FRONT_AND_BACK))):V(e.CULL_FACE),T=t}function J(t,n,r){t?(H(e.POLYGON_OFFSET_FILL),C===n&&R===r||(e.polygonOffset(n,r),C=n,R=r)):V(e.POLYGON_OFFSET_FILL)}return{buffers:{color:i,depth:a,stencil:o},enable:H,disable:V,bindFramebuffer:function(t,n){return c[t]!==n&&(e.bindFramebuffer(t,n),c[t]=n,t===e.DRAW_FRAMEBUFFER&&(c[e.FRAMEBUFFER]=n),t===e.FRAMEBUFFER&&(c[e.DRAW_FRAMEBUFFER]=n),!0)},drawBuffers:function(t,n){var r=d,i=!1;if(t){void 0===(r=h.get(n))&&(r=[],h.set(n,r));var a=t.textures;if(r.length!==a.length||r[0]!==e.COLOR_ATTACHMENT0){for(var o=0,s=a.length;o<s;o++)r[o]=e.COLOR_ATTACHMENT0+o;r.length=a.length,i=!0}}else r[0]!==e.BACK&&(r[0]=e.BACK,i=!0);i&&e.drawBuffers(r)},useProgram:function(t){return f!==t&&(e.useProgram(t),f=t,!0)},setBlending:X,setMaterial:function(t,n){t.side===xe?V(e.CULL_FACE):H(e.CULL_FACE);var r=t.side===be;n&&(r=!r),Y(r),t.blending===we&&!1===t.transparent?X(_e):X(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.blendColor,t.blendAlpha,t.premultipliedAlpha),a.setFunc(t.depthFunc),a.setTest(t.depthTest),a.setMask(t.depthWrite),i.setMask(t.colorWrite);var s=t.stencilWrite;o.setTest(s),s&&(o.setMask(t.stencilWriteMask),o.setFunc(t.stencilFunc,t.stencilRef,t.stencilFuncMask),o.setOp(t.stencilFail,t.stencilZFail,t.stencilZPass)),J(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits),!0===t.alphaToCoverage?H(e.SAMPLE_ALPHA_TO_COVERAGE):V(e.SAMPLE_ALPHA_TO_COVERAGE)},setFlipSided:Y,setCullFace:Q,setLineWidth:function(t){t!==E&&(P&&e.lineWidth(t),E=t)},setPolygonOffset:J,setScissorTest:function(t){t?H(e.SCISSOR_TEST):V(e.SCISSOR_TEST)},activeTexture:function(t){void 0===t&&(t=e.TEXTURE0+B-1),D!==t&&(e.activeTexture(t),D=t)},bindTexture:function(t,n,r){void 0===r&&(r=null===D?e.TEXTURE0+B-1:D);var i=L[r];void 0===i&&(i={type:void 0,texture:void 0},L[r]=i),i.type===t&&i.texture===n||(D!==r&&(e.activeTexture(r),D=r),e.bindTexture(t,n||q[t]),i.type=t,i.texture=n)},unbindTexture:function(){var t=L[D];void 0!==t&&void 0!==t.type&&(e.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(tg){console.error("THREE.WebGLState:",tg)}},compressedTexImage3D:function(){try{e.compressedTexImage3D.apply(e,arguments)}catch(tg){console.error("THREE.WebGLState:",tg)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(tg){console.error("THREE.WebGLState:",tg)}},texImage3D:function(){try{e.texImage3D.apply(e,arguments)}catch(tg){console.error("THREE.WebGLState:",tg)}},updateUBOMapping:function(t,n){var r=u.get(n);void 0===r&&(r=new WeakMap,u.set(n,r));var i=r.get(t);void 0===i&&(i=e.getUniformBlockIndex(n,t.name),r.set(t,i))},uniformBlockBinding:function(t,n){var r=u.get(n).get(t);s.get(n)!==r&&(e.uniformBlockBinding(n,r,t.__bindingPointIndex),s.set(n,r))},texStorage2D:function(){try{e.texStorage2D.apply(e,arguments)}catch(tg){console.error("THREE.WebGLState:",tg)}},texStorage3D:function(){try{e.texStorage3D.apply(e,arguments)}catch(tg){console.error("THREE.WebGLState:",tg)}},texSubImage2D:function(){try{e.texSubImage2D.apply(e,arguments)}catch(tg){console.error("THREE.WebGLState:",tg)}},texSubImage3D:function(){try{e.texSubImage3D.apply(e,arguments)}catch(tg){console.error("THREE.WebGLState:",tg)}},compressedTexSubImage2D:function(){try{e.compressedTexSubImage2D.apply(e,arguments)}catch(tg){console.error("THREE.WebGLState:",tg)}},compressedTexSubImage3D:function(){try{e.compressedTexSubImage3D.apply(e,arguments)}catch(tg){console.error("THREE.WebGLState:",tg)}},scissor:function(t){!1===U.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),U.copy(t))},viewport:function(t){!1===z.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),z.copy(t))},reset:function(){e.disable(e.BLEND),e.disable(e.CULL_FACE),e.disable(e.DEPTH_TEST),e.disable(e.POLYGON_OFFSET_FILL),e.disable(e.SCISSOR_TEST),e.disable(e.STENCIL_TEST),e.disable(e.SAMPLE_ALPHA_TO_COVERAGE),e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ONE,e.ZERO),e.blendFuncSeparate(e.ONE,e.ZERO,e.ONE,e.ZERO),e.blendColor(0,0,0,0),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(e.LESS),a.setReversed(!1),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(e.ALWAYS,0,4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP),e.clearStencil(0),e.cullFace(e.BACK),e.frontFace(e.CCW),e.polygonOffset(0,0),e.activeTexture(e.TEXTURE0),e.bindFramebuffer(e.FRAMEBUFFER,null),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),e.bindFramebuffer(e.READ_FRAMEBUFFER,null),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),l={},D=null,L={},c={},h=new WeakMap,d=[],f=null,p=!1,A=null,v=null,m=null,y=null,b=null,x=null,_=null,w=new uo(0,0,0),S=0,M=!1,k=null,T=null,E=null,C=null,R=null,U.set(0,0,e.canvas.width,e.canvas.height),z.set(0,0,e.canvas.width,e.canvas.height),i.reset(),a.reset(),o.reset()}}}function Kl(e,t,n,r){var i=function(e){switch(e){case It:case Dt:return{byteLength:1,components:1};case Ot:case Lt:case Gt:return{byteLength:2,components:1};case qt:case Ht:return{byteLength:2,components:4};case Ut:case Ft:case zt:return{byteLength:4,components:1};case jt:return{byteLength:4,components:3}}throw new Error("Unknown texture type ".concat(e,"."))}(r);switch(n){case Wt:case Qt:return e*t;case Jt:return e*t*2;case $t:case en:return e*t/i.components*i.byteLength;case tn:case nn:return e*t*2/i.components*i.byteLength;case Xt:return e*t*3/i.components*i.byteLength;case Yt:case an:return e*t*4/i.components*i.byteLength;case on:case sn:return Math.floor((e+3)/4)*Math.floor((t+3)/4)*8;case un:case ln:return Math.floor((e+3)/4)*Math.floor((t+3)/4)*16;case hn:case fn:return Math.max(e,16)*Math.max(t,8)/4;case cn:case dn:return Math.max(e,8)*Math.max(t,8)/2;case pn:case An:return Math.floor((e+3)/4)*Math.floor((t+3)/4)*8;case vn:case mn:return Math.floor((e+3)/4)*Math.floor((t+3)/4)*16;case gn:return Math.floor((e+4)/5)*Math.floor((t+3)/4)*16;case yn:return Math.floor((e+4)/5)*Math.floor((t+4)/5)*16;case bn:return Math.floor((e+5)/6)*Math.floor((t+4)/5)*16;case xn:return Math.floor((e+5)/6)*Math.floor((t+5)/6)*16;case _n:return Math.floor((e+7)/8)*Math.floor((t+4)/5)*16;case wn:return Math.floor((e+7)/8)*Math.floor((t+5)/6)*16;case Sn:return Math.floor((e+7)/8)*Math.floor((t+7)/8)*16;case Mn:return Math.floor((e+9)/10)*Math.floor((t+4)/5)*16;case kn:return Math.floor((e+9)/10)*Math.floor((t+5)/6)*16;case Tn:return Math.floor((e+9)/10)*Math.floor((t+7)/8)*16;case En:return Math.floor((e+9)/10)*Math.floor((t+9)/10)*16;case Cn:return Math.floor((e+11)/12)*Math.floor((t+9)/10)*16;case Rn:return Math.floor((e+11)/12)*Math.floor((t+11)/12)*16;case Bn:case Pn:case Nn:return Math.ceil(e/4)*Math.ceil(t/4)*16;case In:case Dn:return Math.ceil(e/4)*Math.ceil(t/4)*8;case Ln:case On:return Math.ceil(e/4)*Math.ceil(t/4)*16}throw new Error("Unable to determine texture byte length for ".concat(n," format."))}var Zl={contain:function(e,t){var n=e.image&&e.image.width?e.image.width/e.image.height:1;return n>t?(e.repeat.x=1,e.repeat.y=n/t,e.offset.x=0,e.offset.y=(1-e.repeat.y)/2):(e.repeat.x=t/n,e.repeat.y=1,e.offset.x=(1-e.repeat.x)/2,e.offset.y=0),e},cover:function(e,t){var n=e.image&&e.image.width?e.image.width/e.image.height:1;return n>t?(e.repeat.x=t/n,e.repeat.y=1,e.offset.x=(1-e.repeat.x)/2,e.offset.y=0):(e.repeat.x=1,e.repeat.y=n/t,e.offset.x=0,e.offset.y=(1-e.repeat.y)/2),e},fill:function(e){return e.repeat.x=1,e.repeat.y=1,e.offset.x=0,e.offset.y=0,e},getByteLength:Kl};function $l(e,t,n,r,i,a,o){var s,u,l,c,h=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,d="undefined"!==typeof navigator&&/OculusBrowser/g.test(navigator.userAgent),f=new ii,p=new WeakMap,A=new WeakMap,v=!1;try{v="undefined"!==typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(W){}function m(e,t){return v?new OffscreenCanvas(e,t):ci("canvas")}function y(e,t,n){var r=1,i=j(e);if((i.width>n||i.height>n)&&(r=n/Math.max(i.width,i.height)),r<1){if("undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap||"undefined"!==typeof VideoFrame&&e instanceof VideoFrame){var a=Math.floor(r*i.width),o=Math.floor(r*i.height);void 0===c&&(c=m(a,o));var s=t?m(a,o):c;return s.width=a,s.height=o,s.getContext("2d").drawImage(e,0,0,a,o),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+i.width+"x"+i.height+") to ("+a+"x"+o+")."),s}return"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+i.width+"x"+i.height+")."),e}return e}function b(e){return e.generateMipmaps}function x(t){e.generateMipmap(t)}function _(t){return t.isWebGLCubeRenderTarget?e.TEXTURE_CUBE_MAP:t.isWebGL3DRenderTarget?e.TEXTURE_3D:t.isWebGLArrayRenderTarget||t.isCompressedArrayTexture?e.TEXTURE_2D_ARRAY:e.TEXTURE_2D}function w(n,r,i,a){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(null!==n){if(void 0!==e[n])return e[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}var s=r;if(r===e.RED&&(i===e.FLOAT&&(s=e.R32F),i===e.HALF_FLOAT&&(s=e.R16F),i===e.UNSIGNED_BYTE&&(s=e.R8)),r===e.RED_INTEGER&&(i===e.UNSIGNED_BYTE&&(s=e.R8UI),i===e.UNSIGNED_SHORT&&(s=e.R16UI),i===e.UNSIGNED_INT&&(s=e.R32UI),i===e.BYTE&&(s=e.R8I),i===e.SHORT&&(s=e.R16I),i===e.INT&&(s=e.R32I)),r===e.RG&&(i===e.FLOAT&&(s=e.RG32F),i===e.HALF_FLOAT&&(s=e.RG16F),i===e.UNSIGNED_BYTE&&(s=e.RG8)),r===e.RG_INTEGER&&(i===e.UNSIGNED_BYTE&&(s=e.RG8UI),i===e.UNSIGNED_SHORT&&(s=e.RG16UI),i===e.UNSIGNED_INT&&(s=e.RG32UI),i===e.BYTE&&(s=e.RG8I),i===e.SHORT&&(s=e.RG16I),i===e.INT&&(s=e.RG32I)),r===e.RGB_INTEGER&&(i===e.UNSIGNED_BYTE&&(s=e.RGB8UI),i===e.UNSIGNED_SHORT&&(s=e.RGB16UI),i===e.UNSIGNED_INT&&(s=e.RGB32UI),i===e.BYTE&&(s=e.RGB8I),i===e.SHORT&&(s=e.RGB16I),i===e.INT&&(s=e.RGB32I)),r===e.RGBA_INTEGER&&(i===e.UNSIGNED_BYTE&&(s=e.RGBA8UI),i===e.UNSIGNED_SHORT&&(s=e.RGBA16UI),i===e.UNSIGNED_INT&&(s=e.RGBA32UI),i===e.BYTE&&(s=e.RGBA8I),i===e.SHORT&&(s=e.RGBA16I),i===e.INT&&(s=e.RGBA32I)),r===e.RGB&&i===e.UNSIGNED_INT_5_9_9_9_REV&&(s=e.RGB9_E5),r===e.RGBA){var u=o?sr:mi.getTransfer(a);i===e.FLOAT&&(s=e.RGBA32F),i===e.HALF_FLOAT&&(s=e.RGBA16F),i===e.UNSIGNED_BYTE&&(s=u===ur?e.SRGB8_ALPHA8:e.RGBA8),i===e.UNSIGNED_SHORT_4_4_4_4&&(s=e.RGBA4),i===e.UNSIGNED_SHORT_5_5_5_1&&(s=e.RGB5_A1)}return s!==e.R16F&&s!==e.R32F&&s!==e.RG16F&&s!==e.RG32F&&s!==e.RGBA16F&&s!==e.RGBA32F||t.get("EXT_color_buffer_float"),s}function S(t,n){var r;return t?null===n||n===Ut||n===Vt?r=e.DEPTH24_STENCIL8:n===zt?r=e.DEPTH32F_STENCIL8:n===Ot&&(r=e.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):null===n||n===Ut||n===Vt?r=e.DEPTH_COMPONENT24:n===zt?r=e.DEPTH_COMPONENT32F:n===Ot&&(r=e.DEPTH_COMPONENT16),r}function M(e,t){return!0===b(e)||e.isFramebufferTexture&&e.minFilter!==St&&e.minFilter!==Ct?Math.log2(Math.max(t.width,t.height))+1:void 0!==e.mipmaps&&e.mipmaps.length>0?e.mipmaps.length:e.isCompressedTexture&&Array.isArray(e.image)?t.mipmaps.length:1}function k(e){var t=e.target;t.removeEventListener("dispose",k),function(e){var t=r.get(e);if(void 0===t.__webglInit)return;var n=e.source,i=A.get(n);if(i){var a=i[t.__cacheKey];a.usedTimes--,0===a.usedTimes&&E(e),0===Object.keys(i).length&&A.delete(n)}r.remove(e)}(t),t.isVideoTexture&&p.delete(t)}function T(t){var n=t.target;n.removeEventListener("dispose",T),function(t){var n=r.get(t);t.depthTexture&&(t.depthTexture.dispose(),r.remove(t.depthTexture));if(t.isWebGLCubeRenderTarget)for(var i=0;i<6;i++){if(Array.isArray(n.__webglFramebuffer[i]))for(var a=0;a<n.__webglFramebuffer[i].length;a++)e.deleteFramebuffer(n.__webglFramebuffer[i][a]);else e.deleteFramebuffer(n.__webglFramebuffer[i]);n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer[i])}else{if(Array.isArray(n.__webglFramebuffer))for(var s=0;s<n.__webglFramebuffer.length;s++)e.deleteFramebuffer(n.__webglFramebuffer[s]);else e.deleteFramebuffer(n.__webglFramebuffer);if(n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer),n.__webglMultisampledFramebuffer&&e.deleteFramebuffer(n.__webglMultisampledFramebuffer),n.__webglColorRenderbuffer)for(var u=0;u<n.__webglColorRenderbuffer.length;u++)n.__webglColorRenderbuffer[u]&&e.deleteRenderbuffer(n.__webglColorRenderbuffer[u]);n.__webglDepthRenderbuffer&&e.deleteRenderbuffer(n.__webglDepthRenderbuffer)}for(var l=t.textures,c=0,h=l.length;c<h;c++){var d=r.get(l[c]);d.__webglTexture&&(e.deleteTexture(d.__webglTexture),o.memory.textures--),r.remove(l[c])}r.remove(t)}(n)}function E(t){var n=r.get(t);e.deleteTexture(n.__webglTexture);var i=t.source;delete A.get(i)[n.__cacheKey],o.memory.textures--}var C=0;function R(t,i){var a=r.get(t);if(t.isVideoTexture&&function(e){var t=o.render.frame;p.get(e)!==t&&(p.set(e,t),e.update())}(t),!1===t.isRenderTargetTexture&&t.version>0&&a.__version!==t.version){var s=t.image;if(null===s)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==s.complete)return void L(a,t,i);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.bindTexture(e.TEXTURE_2D,a.__webglTexture,e.TEXTURE0+i)}var B=(g(s={},xt,e.REPEAT),g(s,_t,e.CLAMP_TO_EDGE),g(s,wt,e.MIRRORED_REPEAT),s),P=(g(u={},St,e.NEAREST),g(u,Mt,e.NEAREST_MIPMAP_NEAREST),g(u,Tt,e.NEAREST_MIPMAP_LINEAR),g(u,Ct,e.LINEAR),g(u,Rt,e.LINEAR_MIPMAP_NEAREST),g(u,Pt,e.LINEAR_MIPMAP_LINEAR),u),N=(g(l={},Mr,e.NEVER),g(l,Pr,e.ALWAYS),g(l,kr,e.LESS),g(l,Er,e.LEQUAL),g(l,Tr,e.EQUAL),g(l,Br,e.GEQUAL),g(l,Cr,e.GREATER),g(l,Rr,e.NOTEQUAL),l);function I(n,a){if(a.type!==zt||!1!==t.has("OES_texture_float_linear")||a.magFilter!==Ct&&a.magFilter!==Rt&&a.magFilter!==Tt&&a.magFilter!==Pt&&a.minFilter!==Ct&&a.minFilter!==Rt&&a.minFilter!==Tt&&a.minFilter!==Pt||console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),e.texParameteri(n,e.TEXTURE_WRAP_S,B[a.wrapS]),e.texParameteri(n,e.TEXTURE_WRAP_T,B[a.wrapT]),n!==e.TEXTURE_3D&&n!==e.TEXTURE_2D_ARRAY||e.texParameteri(n,e.TEXTURE_WRAP_R,B[a.wrapR]),e.texParameteri(n,e.TEXTURE_MAG_FILTER,P[a.magFilter]),e.texParameteri(n,e.TEXTURE_MIN_FILTER,P[a.minFilter]),a.compareFunction&&(e.texParameteri(n,e.TEXTURE_COMPARE_MODE,e.COMPARE_REF_TO_TEXTURE),e.texParameteri(n,e.TEXTURE_COMPARE_FUNC,N[a.compareFunction])),!0===t.has("EXT_texture_filter_anisotropic")){if(a.magFilter===St)return;if(a.minFilter!==Tt&&a.minFilter!==Pt)return;if(a.type===zt&&!1===t.has("OES_texture_float_linear"))return;if(a.anisotropy>1||r.get(a).__currentAnisotropy){var o=t.get("EXT_texture_filter_anisotropic");e.texParameterf(n,o.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(a.anisotropy,i.getMaxAnisotropy())),r.get(a).__currentAnisotropy=a.anisotropy}}}function D(t,n){var r=!1;void 0===t.__webglInit&&(t.__webglInit=!0,n.addEventListener("dispose",k));var i=n.source,a=A.get(i);void 0===a&&(a={},A.set(i,a));var s=function(e){var t=[];return t.push(e.wrapS),t.push(e.wrapT),t.push(e.wrapR||0),t.push(e.magFilter),t.push(e.minFilter),t.push(e.anisotropy),t.push(e.internalFormat),t.push(e.format),t.push(e.type),t.push(e.generateMipmaps),t.push(e.premultiplyAlpha),t.push(e.flipY),t.push(e.unpackAlignment),t.push(e.colorSpace),t.join()}(n);if(s!==t.__cacheKey){void 0===a[s]&&(a[s]={texture:e.createTexture(),usedTimes:0},o.memory.textures++,r=!0),a[s].usedTimes++;var u=a[t.__cacheKey];void 0!==u&&(a[t.__cacheKey].usedTimes--,0===u.usedTimes&&E(n)),t.__cacheKey=s,t.__webglTexture=a[s].texture}return r}function L(t,o,s){var u=e.TEXTURE_2D;(o.isDataArrayTexture||o.isCompressedArrayTexture)&&(u=e.TEXTURE_2D_ARRAY),o.isData3DTexture&&(u=e.TEXTURE_3D);var l=D(t,o),c=o.source;n.bindTexture(u,t.__webglTexture,e.TEXTURE0+s);var h=r.get(c);if(c.version!==h.__version||!0===l){n.activeTexture(e.TEXTURE0+s);var d=mi.getPrimaries(mi.workingColorSpace),f=o.colorSpace===ir?null:mi.getPrimaries(o.colorSpace),p=o.colorSpace===ir||d===f?e.NONE:e.BROWSER_DEFAULT_WEBGL;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,o.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,o.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,o.unpackAlignment),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,p);var A=y(o.image,!1,i.maxTextureSize);A=V(o,A);var v,m=a.convert(o.format,o.colorSpace),g=a.convert(o.type),_=w(o.internalFormat,m,g,o.colorSpace,o.isVideoTexture);I(u,o);var k=o.mipmaps,T=!0!==o.isVideoTexture,E=void 0===h.__version||!0===l,C=c.dataReady,R=M(o,A);if(o.isDepthTexture)_=S(o.format===Zt,o.type),E&&(T?n.texStorage2D(e.TEXTURE_2D,1,_,A.width,A.height):n.texImage2D(e.TEXTURE_2D,0,_,A.width,A.height,0,m,g,null));else if(o.isDataTexture)if(k.length>0){T&&E&&n.texStorage2D(e.TEXTURE_2D,R,_,k[0].width,k[0].height);for(var B=0,P=k.length;B<P;B++)v=k[B],T?C&&n.texSubImage2D(e.TEXTURE_2D,B,0,0,v.width,v.height,m,g,v.data):n.texImage2D(e.TEXTURE_2D,B,_,v.width,v.height,0,m,g,v.data);o.generateMipmaps=!1}else T?(E&&n.texStorage2D(e.TEXTURE_2D,R,_,A.width,A.height),C&&n.texSubImage2D(e.TEXTURE_2D,0,0,0,A.width,A.height,m,g,A.data)):n.texImage2D(e.TEXTURE_2D,0,_,A.width,A.height,0,m,g,A.data);else if(o.isCompressedTexture)if(o.isCompressedArrayTexture){T&&E&&n.texStorage3D(e.TEXTURE_2D_ARRAY,R,_,k[0].width,k[0].height,A.depth);for(var N=0,L=k.length;N<L;N++)if(v=k[N],o.format!==Yt)if(null!==m)if(T){if(C)if(o.layerUpdates.size>0){var O,F=Kl(v.width,v.height,o.format,o.type),U=ee(o.layerUpdates);try{for(U.s();!(O=U.n()).done;){var z=O.value,G=v.data.subarray(z*F/v.data.BYTES_PER_ELEMENT,(z+1)*F/v.data.BYTES_PER_ELEMENT);n.compressedTexSubImage3D(e.TEXTURE_2D_ARRAY,N,0,0,z,v.width,v.height,1,m,G)}}catch(W){U.e(W)}finally{U.f()}o.clearLayerUpdates()}else n.compressedTexSubImage3D(e.TEXTURE_2D_ARRAY,N,0,0,0,v.width,v.height,A.depth,m,v.data)}else n.compressedTexImage3D(e.TEXTURE_2D_ARRAY,N,_,v.width,v.height,A.depth,0,v.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else T?C&&n.texSubImage3D(e.TEXTURE_2D_ARRAY,N,0,0,0,v.width,v.height,A.depth,m,g,v.data):n.texImage3D(e.TEXTURE_2D_ARRAY,N,_,v.width,v.height,A.depth,0,m,g,v.data)}else{T&&E&&n.texStorage2D(e.TEXTURE_2D,R,_,k[0].width,k[0].height);for(var q=0,H=k.length;q<H;q++)v=k[q],o.format!==Yt?null!==m?T?C&&n.compressedTexSubImage2D(e.TEXTURE_2D,q,0,0,v.width,v.height,m,v.data):n.compressedTexImage2D(e.TEXTURE_2D,q,_,v.width,v.height,0,v.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):T?C&&n.texSubImage2D(e.TEXTURE_2D,q,0,0,v.width,v.height,m,g,v.data):n.texImage2D(e.TEXTURE_2D,q,_,v.width,v.height,0,m,g,v.data)}else if(o.isDataArrayTexture)if(T){if(E&&n.texStorage3D(e.TEXTURE_2D_ARRAY,R,_,A.width,A.height,A.depth),C)if(o.layerUpdates.size>0){var X,Y=Kl(A.width,A.height,o.format,o.type),Q=ee(o.layerUpdates);try{for(Q.s();!(X=Q.n()).done;){var J=X.value,K=A.data.subarray(J*Y/A.data.BYTES_PER_ELEMENT,(J+1)*Y/A.data.BYTES_PER_ELEMENT);n.texSubImage3D(e.TEXTURE_2D_ARRAY,0,0,0,J,A.width,A.height,1,m,g,K)}}catch(W){Q.e(W)}finally{Q.f()}o.clearLayerUpdates()}else n.texSubImage3D(e.TEXTURE_2D_ARRAY,0,0,0,0,A.width,A.height,A.depth,m,g,A.data)}else n.texImage3D(e.TEXTURE_2D_ARRAY,0,_,A.width,A.height,A.depth,0,m,g,A.data);else if(o.isData3DTexture)T?(E&&n.texStorage3D(e.TEXTURE_3D,R,_,A.width,A.height,A.depth),C&&n.texSubImage3D(e.TEXTURE_3D,0,0,0,0,A.width,A.height,A.depth,m,g,A.data)):n.texImage3D(e.TEXTURE_3D,0,_,A.width,A.height,A.depth,0,m,g,A.data);else if(o.isFramebufferTexture){if(E)if(T)n.texStorage2D(e.TEXTURE_2D,R,_,A.width,A.height);else for(var Z=A.width,$=A.height,te=0;te<R;te++)n.texImage2D(e.TEXTURE_2D,te,_,Z,$,0,m,g,null),Z>>=1,$>>=1}else if(k.length>0){if(T&&E){var ne=j(k[0]);n.texStorage2D(e.TEXTURE_2D,R,_,ne.width,ne.height)}for(var re=0,ie=k.length;re<ie;re++)v=k[re],T?C&&n.texSubImage2D(e.TEXTURE_2D,re,0,0,m,g,v):n.texImage2D(e.TEXTURE_2D,re,_,m,g,v);o.generateMipmaps=!1}else if(T){if(E){var ae=j(A);n.texStorage2D(e.TEXTURE_2D,R,_,ae.width,ae.height)}C&&n.texSubImage2D(e.TEXTURE_2D,0,0,0,m,g,A)}else n.texImage2D(e.TEXTURE_2D,0,_,m,g,A);b(o)&&x(u),h.__version=c.version,o.onUpdate&&o.onUpdate(o)}t.__version=o.version}function O(t,i,o,s,u,l){var c=a.convert(o.format,o.colorSpace),d=a.convert(o.type),f=w(o.internalFormat,c,d,o.colorSpace),p=r.get(i),A=r.get(o);if(A.__renderTarget=i,!p.__hasExternalTextures){var v=Math.max(1,i.width>>l),m=Math.max(1,i.height>>l);u===e.TEXTURE_3D||u===e.TEXTURE_2D_ARRAY?n.texImage3D(u,l,f,v,m,i.depth,0,c,d,null):n.texImage2D(u,l,f,v,m,0,c,d,null)}n.bindFramebuffer(e.FRAMEBUFFER,t),H(i)?h.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,s,u,A.__webglTexture,0,q(i)):(u===e.TEXTURE_2D||u>=e.TEXTURE_CUBE_MAP_POSITIVE_X&&u<=e.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&e.framebufferTexture2D(e.FRAMEBUFFER,s,u,A.__webglTexture,l),n.bindFramebuffer(e.FRAMEBUFFER,null)}function F(t,n,r){if(e.bindRenderbuffer(e.RENDERBUFFER,t),n.depthBuffer){var i=n.depthTexture,o=i&&i.isDepthTexture?i.type:null,s=S(n.stencilBuffer,o),u=n.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,l=q(n);H(n)?h.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,l,s,n.width,n.height):r?e.renderbufferStorageMultisample(e.RENDERBUFFER,l,s,n.width,n.height):e.renderbufferStorage(e.RENDERBUFFER,s,n.width,n.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,u,e.RENDERBUFFER,t)}else for(var c=n.textures,d=0;d<c.length;d++){var f=c[d],p=a.convert(f.format,f.colorSpace),A=a.convert(f.type),v=w(f.internalFormat,p,A,f.colorSpace),m=q(n);r&&!1===H(n)?e.renderbufferStorageMultisample(e.RENDERBUFFER,m,v,n.width,n.height):H(n)?h.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,m,v,n.width,n.height):e.renderbufferStorage(e.RENDERBUFFER,v,n.width,n.height)}e.bindRenderbuffer(e.RENDERBUFFER,null)}function U(t){var i=r.get(t),a=!0===t.isWebGLCubeRenderTarget;if(i.__boundDepthTexture!==t.depthTexture){var o=t.depthTexture;if(i.__depthDisposeCallback&&i.__depthDisposeCallback(),o){var s=function e(){delete i.__boundDepthTexture,delete i.__depthDisposeCallback,o.removeEventListener("dispose",e)};o.addEventListener("dispose",s),i.__depthDisposeCallback=s}i.__boundDepthTexture=o}if(t.depthTexture&&!i.__autoAllocateDepthBuffer){if(a)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,i){if(i&&i.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(e.FRAMEBUFFER,t),!i.depthTexture||!i.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");var a=r.get(i.depthTexture);a.__renderTarget=i,a.__webglTexture&&i.depthTexture.image.width===i.width&&i.depthTexture.image.height===i.height||(i.depthTexture.image.width=i.width,i.depthTexture.image.height=i.height,i.depthTexture.needsUpdate=!0),R(i.depthTexture,0);var o=a.__webglTexture,s=q(i);if(i.depthTexture.format===Kt)H(i)?h.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,o,0,s):e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,o,0);else{if(i.depthTexture.format!==Zt)throw new Error("Unknown depthTexture format");H(i)?h.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,o,0,s):e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,o,0)}}(i.__webglFramebuffer,t)}else if(a){i.__webglDepthbuffer=[];for(var u=0;u<6;u++)if(n.bindFramebuffer(e.FRAMEBUFFER,i.__webglFramebuffer[u]),void 0===i.__webglDepthbuffer[u])i.__webglDepthbuffer[u]=e.createRenderbuffer(),F(i.__webglDepthbuffer[u],t,!1);else{var l=t.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,c=i.__webglDepthbuffer[u];e.bindRenderbuffer(e.RENDERBUFFER,c),e.framebufferRenderbuffer(e.FRAMEBUFFER,l,e.RENDERBUFFER,c)}}else if(n.bindFramebuffer(e.FRAMEBUFFER,i.__webglFramebuffer),void 0===i.__webglDepthbuffer)i.__webglDepthbuffer=e.createRenderbuffer(),F(i.__webglDepthbuffer,t,!1);else{var d=t.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,f=i.__webglDepthbuffer;e.bindRenderbuffer(e.RENDERBUFFER,f),e.framebufferRenderbuffer(e.FRAMEBUFFER,d,e.RENDERBUFFER,f)}n.bindFramebuffer(e.FRAMEBUFFER,null)}var z=[],G=[];function q(e){return Math.min(i.maxSamples,e.samples)}function H(e){var n=r.get(e);return e.samples>0&&!0===t.has("WEBGL_multisampled_render_to_texture")&&!1!==n.__useRenderToTexture}function V(e,t){var n=e.colorSpace,r=e.format,i=e.type;return!0===e.isCompressedTexture||!0===e.isVideoTexture||n!==or&&n!==ir&&(mi.getTransfer(n)===ur?r===Yt&&i===It||console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",n)),t}function j(e){return"undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement?(f.width=e.naturalWidth||e.width,f.height=e.naturalHeight||e.height):"undefined"!==typeof VideoFrame&&e instanceof VideoFrame?(f.width=e.displayWidth,f.height=e.displayHeight):(f.width=e.width,f.height=e.height),f}this.allocateTextureUnit=function(){var e=C;return e>=i.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+i.maxTextures),C+=1,e},this.resetTextureUnits=function(){C=0},this.setTexture2D=R,this.setTexture2DArray=function(t,i){var a=r.get(t);t.version>0&&a.__version!==t.version?L(a,t,i):n.bindTexture(e.TEXTURE_2D_ARRAY,a.__webglTexture,e.TEXTURE0+i)},this.setTexture3D=function(t,i){var a=r.get(t);t.version>0&&a.__version!==t.version?L(a,t,i):n.bindTexture(e.TEXTURE_3D,a.__webglTexture,e.TEXTURE0+i)},this.setTextureCube=function(t,o){var s=r.get(t);t.version>0&&s.__version!==t.version?function(t,o,s){if(6!==o.image.length)return;var u=D(t,o),l=o.source;n.bindTexture(e.TEXTURE_CUBE_MAP,t.__webglTexture,e.TEXTURE0+s);var c=r.get(l);if(l.version!==c.__version||!0===u){n.activeTexture(e.TEXTURE0+s);var h=mi.getPrimaries(mi.workingColorSpace),d=o.colorSpace===ir?null:mi.getPrimaries(o.colorSpace),f=o.colorSpace===ir||h===d?e.NONE:e.BROWSER_DEFAULT_WEBGL;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,o.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,o.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,o.unpackAlignment),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,f);for(var p=o.isCompressedTexture||o.image[0].isCompressedTexture,A=o.image[0]&&o.image[0].isDataTexture,v=[],m=0;m<6;m++)v[m]=p||A?A?o.image[m].image:o.image[m]:y(o.image[m],!0,i.maxCubemapSize),v[m]=V(o,v[m]);var g,_=v[0],S=a.convert(o.format,o.colorSpace),k=a.convert(o.type),T=w(o.internalFormat,S,k,o.colorSpace),E=!0!==o.isVideoTexture,C=void 0===c.__version||!0===u,R=l.dataReady,B=M(o,_);if(I(e.TEXTURE_CUBE_MAP,o),p){E&&C&&n.texStorage2D(e.TEXTURE_CUBE_MAP,B,T,_.width,_.height);for(var P=0;P<6;P++){g=v[P].mipmaps;for(var N=0;N<g.length;N++){var L=g[N];o.format!==Yt?null!==S?E?R&&n.compressedTexSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+P,N,0,0,L.width,L.height,S,L.data):n.compressedTexImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+P,N,T,L.width,L.height,0,L.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):E?R&&n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+P,N,0,0,L.width,L.height,S,k,L.data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+P,N,T,L.width,L.height,0,S,k,L.data)}}}else{if(g=o.mipmaps,E&&C){g.length>0&&B++;var O=j(v[0]);n.texStorage2D(e.TEXTURE_CUBE_MAP,B,T,O.width,O.height)}for(var F=0;F<6;F++)if(A){E?R&&n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+F,0,0,0,v[F].width,v[F].height,S,k,v[F].data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+F,0,T,v[F].width,v[F].height,0,S,k,v[F].data);for(var U=0;U<g.length;U++){var z=g[U].image[F].image;E?R&&n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+F,U+1,0,0,z.width,z.height,S,k,z.data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+F,U+1,T,z.width,z.height,0,S,k,z.data)}}else{E?R&&n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+F,0,0,0,S,k,v[F]):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+F,0,T,S,k,v[F]);for(var G=0;G<g.length;G++){var q=g[G];E?R&&n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+F,G+1,0,0,S,k,q.image[F]):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+F,G+1,T,S,k,q.image[F])}}}b(o)&&x(e.TEXTURE_CUBE_MAP),c.__version=l.version,o.onUpdate&&o.onUpdate(o)}t.__version=o.version}(s,t,o):n.bindTexture(e.TEXTURE_CUBE_MAP,s.__webglTexture,e.TEXTURE0+o)},this.rebindTextures=function(t,n,i){var a=r.get(t);void 0!==n&&O(a.__webglFramebuffer,t,t.texture,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,0),void 0!==i&&U(t)},this.setupRenderTarget=function(t){var i=t.texture,s=r.get(t),u=r.get(i);t.addEventListener("dispose",T);var l=t.textures,c=!0===t.isWebGLCubeRenderTarget,h=l.length>1;if(h||(void 0===u.__webglTexture&&(u.__webglTexture=e.createTexture()),u.__version=i.version,o.memory.textures++),c){s.__webglFramebuffer=[];for(var d=0;d<6;d++)if(i.mipmaps&&i.mipmaps.length>0){s.__webglFramebuffer[d]=[];for(var f=0;f<i.mipmaps.length;f++)s.__webglFramebuffer[d][f]=e.createFramebuffer()}else s.__webglFramebuffer[d]=e.createFramebuffer()}else{if(i.mipmaps&&i.mipmaps.length>0){s.__webglFramebuffer=[];for(var p=0;p<i.mipmaps.length;p++)s.__webglFramebuffer[p]=e.createFramebuffer()}else s.__webglFramebuffer=e.createFramebuffer();if(h)for(var A=0,v=l.length;A<v;A++){var m=r.get(l[A]);void 0===m.__webglTexture&&(m.__webglTexture=e.createTexture(),o.memory.textures++)}if(t.samples>0&&!1===H(t)){s.__webglMultisampledFramebuffer=e.createFramebuffer(),s.__webglColorRenderbuffer=[],n.bindFramebuffer(e.FRAMEBUFFER,s.__webglMultisampledFramebuffer);for(var g=0;g<l.length;g++){var y=l[g];s.__webglColorRenderbuffer[g]=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,s.__webglColorRenderbuffer[g]);var _=a.convert(y.format,y.colorSpace),S=a.convert(y.type),M=w(y.internalFormat,_,S,y.colorSpace,!0===t.isXRRenderTarget),k=q(t);e.renderbufferStorageMultisample(e.RENDERBUFFER,k,M,t.width,t.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+g,e.RENDERBUFFER,s.__webglColorRenderbuffer[g])}e.bindRenderbuffer(e.RENDERBUFFER,null),t.depthBuffer&&(s.__webglDepthRenderbuffer=e.createRenderbuffer(),F(s.__webglDepthRenderbuffer,t,!0)),n.bindFramebuffer(e.FRAMEBUFFER,null)}}if(c){n.bindTexture(e.TEXTURE_CUBE_MAP,u.__webglTexture),I(e.TEXTURE_CUBE_MAP,i);for(var E=0;E<6;E++)if(i.mipmaps&&i.mipmaps.length>0)for(var C=0;C<i.mipmaps.length;C++)O(s.__webglFramebuffer[E][C],t,i,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+E,C);else O(s.__webglFramebuffer[E],t,i,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+E,0);b(i)&&x(e.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(h){for(var R=0,B=l.length;R<B;R++){var P=l[R],N=r.get(P);n.bindTexture(e.TEXTURE_2D,N.__webglTexture),I(e.TEXTURE_2D,P),O(s.__webglFramebuffer,t,P,e.COLOR_ATTACHMENT0+R,e.TEXTURE_2D,0),b(P)&&x(e.TEXTURE_2D)}n.unbindTexture()}else{var D=e.TEXTURE_2D;if((t.isWebGL3DRenderTarget||t.isWebGLArrayRenderTarget)&&(D=t.isWebGL3DRenderTarget?e.TEXTURE_3D:e.TEXTURE_2D_ARRAY),n.bindTexture(D,u.__webglTexture),I(D,i),i.mipmaps&&i.mipmaps.length>0)for(var L=0;L<i.mipmaps.length;L++)O(s.__webglFramebuffer[L],t,i,e.COLOR_ATTACHMENT0,D,L);else O(s.__webglFramebuffer,t,i,e.COLOR_ATTACHMENT0,D,0);b(i)&&x(D),n.unbindTexture()}t.depthBuffer&&U(t)},this.updateRenderTargetMipmap=function(e){for(var t=e.textures,i=0,a=t.length;i<a;i++){var o=t[i];if(b(o)){var s=_(e),u=r.get(o).__webglTexture;n.bindTexture(s,u),x(s),n.unbindTexture()}}},this.updateMultisampleRenderTarget=function(t){if(t.samples>0)if(!1===H(t)){var i=t.textures,a=t.width,o=t.height,s=e.COLOR_BUFFER_BIT,u=t.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,l=r.get(t),c=i.length>1;if(c)for(var h=0;h<i.length;h++)n.bindFramebuffer(e.FRAMEBUFFER,l.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+h,e.RENDERBUFFER,null),n.bindFramebuffer(e.FRAMEBUFFER,l.__webglFramebuffer),e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0+h,e.TEXTURE_2D,null,0);n.bindFramebuffer(e.READ_FRAMEBUFFER,l.__webglMultisampledFramebuffer),n.bindFramebuffer(e.DRAW_FRAMEBUFFER,l.__webglFramebuffer);for(var f=0;f<i.length;f++){if(t.resolveDepthBuffer&&(t.depthBuffer&&(s|=e.DEPTH_BUFFER_BIT),t.stencilBuffer&&t.resolveStencilBuffer&&(s|=e.STENCIL_BUFFER_BIT)),c){e.framebufferRenderbuffer(e.READ_FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.RENDERBUFFER,l.__webglColorRenderbuffer[f]);var p=r.get(i[f]).__webglTexture;e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,p,0)}e.blitFramebuffer(0,0,a,o,0,0,a,o,s,e.NEAREST),!0===d&&(z.length=0,G.length=0,z.push(e.COLOR_ATTACHMENT0+f),t.depthBuffer&&!1===t.resolveDepthBuffer&&(z.push(u),G.push(u),e.invalidateFramebuffer(e.DRAW_FRAMEBUFFER,G)),e.invalidateFramebuffer(e.READ_FRAMEBUFFER,z))}if(n.bindFramebuffer(e.READ_FRAMEBUFFER,null),n.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),c)for(var A=0;A<i.length;A++){n.bindFramebuffer(e.FRAMEBUFFER,l.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+A,e.RENDERBUFFER,l.__webglColorRenderbuffer[A]);var v=r.get(i[A]).__webglTexture;n.bindFramebuffer(e.FRAMEBUFFER,l.__webglFramebuffer),e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0+A,e.TEXTURE_2D,v,0)}n.bindFramebuffer(e.DRAW_FRAMEBUFFER,l.__webglMultisampledFramebuffer)}else if(t.depthBuffer&&!1===t.resolveDepthBuffer&&d){var m=t.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT;e.invalidateFramebuffer(e.DRAW_FRAMEBUFFER,[m])}},this.setupDepthRenderbuffer=U,this.setupFrameBufferTexture=O,this.useMultisampledRTT=H}function ec(e,t){return{convert:function(n){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ir,a=mi.getTransfer(i);if(n===It)return e.UNSIGNED_BYTE;if(n===qt)return e.UNSIGNED_SHORT_4_4_4_4;if(n===Ht)return e.UNSIGNED_SHORT_5_5_5_1;if(n===jt)return e.UNSIGNED_INT_5_9_9_9_REV;if(n===Dt)return e.BYTE;if(n===Lt)return e.SHORT;if(n===Ot)return e.UNSIGNED_SHORT;if(n===Ft)return e.INT;if(n===Ut)return e.UNSIGNED_INT;if(n===zt)return e.FLOAT;if(n===Gt)return e.HALF_FLOAT;if(n===Wt)return e.ALPHA;if(n===Xt)return e.RGB;if(n===Yt)return e.RGBA;if(n===Qt)return e.LUMINANCE;if(n===Jt)return e.LUMINANCE_ALPHA;if(n===Kt)return e.DEPTH_COMPONENT;if(n===Zt)return e.DEPTH_STENCIL;if(n===$t)return e.RED;if(n===en)return e.RED_INTEGER;if(n===tn)return e.RG;if(n===nn)return e.RG_INTEGER;if(n===an)return e.RGBA_INTEGER;if(n===on||n===sn||n===un||n===ln)if(a===ur){if(null===(r=t.get("WEBGL_compressed_texture_s3tc_srgb")))return null;if(n===on)return r.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===sn)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===un)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===ln)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(null===(r=t.get("WEBGL_compressed_texture_s3tc")))return null;if(n===on)return r.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===sn)return r.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===un)return r.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===ln)return r.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(n===cn||n===hn||n===dn||n===fn){if(null===(r=t.get("WEBGL_compressed_texture_pvrtc")))return null;if(n===cn)return r.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===hn)return r.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===dn)return r.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===fn)return r.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(n===pn||n===An||n===vn){if(null===(r=t.get("WEBGL_compressed_texture_etc")))return null;if(n===pn||n===An)return a===ur?r.COMPRESSED_SRGB8_ETC2:r.COMPRESSED_RGB8_ETC2;if(n===vn)return a===ur?r.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:r.COMPRESSED_RGBA8_ETC2_EAC}if(n===mn||n===gn||n===yn||n===bn||n===xn||n===_n||n===wn||n===Sn||n===Mn||n===kn||n===Tn||n===En||n===Cn||n===Rn){if(null===(r=t.get("WEBGL_compressed_texture_astc")))return null;if(n===mn)return a===ur?r.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:r.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===gn)return a===ur?r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:r.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===yn)return a===ur?r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:r.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===bn)return a===ur?r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:r.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===xn)return a===ur?r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:r.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===_n)return a===ur?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:r.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===wn)return a===ur?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:r.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===Sn)return a===ur?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:r.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===Mn)return a===ur?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:r.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===kn)return a===ur?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:r.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===Tn)return a===ur?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:r.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===En)return a===ur?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:r.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===Cn)return a===ur?r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:r.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===Rn)return a===ur?r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:r.COMPRESSED_RGBA_ASTC_12x12_KHR}if(n===Bn||n===Pn||n===Nn){if(null===(r=t.get("EXT_texture_compression_bptc")))return null;if(n===Bn)return a===ur?r.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:r.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(n===Pn)return r.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(n===Nn)return r.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}if(n===In||n===Dn||n===Ln||n===On){if(null===(r=t.get("EXT_texture_compression_rgtc")))return null;if(n===Bn)return r.COMPRESSED_RED_RGTC1_EXT;if(n===Dn)return r.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(n===Ln)return r.COMPRESSED_RED_GREEN_RGTC2_EXT;if(n===On)return r.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return n===Vt?e.UNSIGNED_INT_24_8:void 0!==e[n]?e[n]:null}}}var tc=function(e){Y(n,e);var t=$(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return V(this,n),(e=t.call(this)).isArrayCamera=!0,e.cameras=r,e}return W(n)}(us),nc=function(e){Y(n,e);var t=$(n);function n(){var e;return V(this,n),(e=t.call(this)).isGroup=!0,e.type="Group",e}return W(n)}(Ha),rc={type:"move"},ic=function(){function e(){V(this,e),this._targetRay=null,this._grip=null,this._hand=null}return W(e,[{key:"getHandSpace",value:function(){return null===this._hand&&(this._hand=new nc,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}},{key:"getTargetRaySpace",value:function(){return null===this._targetRay&&(this._targetRay=new nc,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new zi,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new zi),this._targetRay}},{key:"getGripSpace",value:function(){return null===this._grip&&(this._grip=new nc,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new zi,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new zi),this._grip}},{key:"dispatchEvent",value:function(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}},{key:"connect",value:function(e){if(e&&e.hand){var t=this._hand;if(t){var n,r=ee(e.hand.values());try{for(r.s();!(n=r.n()).done;){var i=n.value;this._getHandJoint(t,i)}}catch(a){r.e(a)}finally{r.f()}}}return this.dispatchEvent({type:"connected",data:e}),this}},{key:"disconnect",value:function(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}},{key:"update",value:function(e,t,n){var r=null,i=null,a=null,o=this._targetRay,s=this._grip,u=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState){if(u&&e.hand){a=!0;var l,c=ee(e.hand.values());try{for(c.s();!(l=c.n()).done;){var h=l.value,d=t.getJointPose(h,n),f=this._getHandJoint(u,h);null!==d&&(f.matrix.fromArray(d.transform.matrix),f.matrix.decompose(f.position,f.rotation,f.scale),f.matrixWorldNeedsUpdate=!0,f.jointRadius=d.radius),f.visible=null!==d}}catch(m){c.e(m)}finally{c.f()}var p=u.joints["index-finger-tip"],A=u.joints["thumb-tip"],v=p.position.distanceTo(A.position);u.inputState.pinching&&v>.025?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!u.inputState.pinching&&v<=.015&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==s&&e.gripSpace&&null!==(i=t.getPose(e.gripSpace,n))&&(s.matrix.fromArray(i.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),s.matrixWorldNeedsUpdate=!0,i.linearVelocity?(s.hasLinearVelocity=!0,s.linearVelocity.copy(i.linearVelocity)):s.hasLinearVelocity=!1,i.angularVelocity?(s.hasAngularVelocity=!0,s.angularVelocity.copy(i.angularVelocity)):s.hasAngularVelocity=!1);null!==o&&(null===(r=t.getPose(e.targetRaySpace,n))&&null!==i&&(r=i),null!==r&&(o.matrix.fromArray(r.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),o.matrixWorldNeedsUpdate=!0,r.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(r.linearVelocity)):o.hasLinearVelocity=!1,r.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(r.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(rc)))}return null!==o&&(o.visible=null!==r),null!==s&&(s.visible=null!==i),null!==u&&(u.visible=null!==a),this}},{key:"_getHandJoint",value:function(e,t){if(void 0===e.joints[t.jointName]){var n=new nc;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}}]),e}(),ac=function(){function e(){V(this,e),this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}return W(e,[{key:"init",value:function(e,t,n){if(null===this.texture){var r=new Bi;e.properties.get(r).__webglTexture=t.texture,t.depthNear==n.depthNear&&t.depthFar==n.depthFar||(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=r}}},{key:"getMesh",value:function(e){if(null!==this.texture&&null===this.mesh){var t=e.cameras[0].viewport,n=new rs({vertexShader:"\nvoid main() {\n\n\tgl_Position = vec4( position, 1.0 );\n\n}",fragmentShader:"\nuniform sampler2DArray depthColor;\nuniform float depthWidth;\nuniform float depthHeight;\n\nvoid main() {\n\n\tvec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );\n\n\tif ( coord.x >= 1.0 ) {\n\n\t\tgl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;\n\n\t} else {\n\n\t\tgl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;\n\n\t}\n\n}",uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new Jo(new _s(20,20),n)}return this.mesh}},{key:"reset",value:function(){this.texture=null,this.mesh=null}},{key:"getDepthTexture",value:function(){return this.texture}}]),e}(),oc=function(e){Y(n,e);var t=$(n);function n(e,r){var i;V(this,n);var a=K(i=t.call(this)),o=null,s=1,u=null,l="local-floor",c=1,h=null,d=null,f=null,p=null,A=null,v=null,m=new ac,g=r.getContextAttributes(),y=null,b=null,x=[],_=[],w=new ii,S=null,M=new us;M.viewport=new Pi;var k=new us;k.viewport=new Pi;var T=[M,k],E=new tc,C=null,R=null;function B(e){var t=_.indexOf(e.inputSource);if(-1!==t){var n=x[t];void 0!==n&&(n.update(e.inputSource,e.frame,h||u),n.dispatchEvent({type:e.type,data:e.inputSource}))}}function P(){o.removeEventListener("select",B),o.removeEventListener("selectstart",B),o.removeEventListener("selectend",B),o.removeEventListener("squeeze",B),o.removeEventListener("squeezestart",B),o.removeEventListener("squeezeend",B),o.removeEventListener("end",P),o.removeEventListener("inputsourceschange",N);for(var t=0;t<x.length;t++){var n=_[t];null!==n&&(_[t]=null,x[t].disconnect(n))}C=null,R=null,m.reset(),e.setRenderTarget(y),A=null,p=null,f=null,o=null,b=null,F.stop(),a.isPresenting=!1,e.setPixelRatio(S),e.setSize(w.width,w.height,!1),a.dispatchEvent({type:"sessionend"})}function N(e){for(var t=0;t<e.removed.length;t++){var n=e.removed[t],r=_.indexOf(n);r>=0&&(_[r]=null,x[r].disconnect(n))}for(var i=0;i<e.added.length;i++){var a=e.added[i],o=_.indexOf(a);if(-1===o){for(var s=0;s<x.length;s++){if(s>=_.length){_.push(a),o=s;break}if(null===_[s]){_[s]=a,o=s;break}}if(-1===o)break}var u=x[o];u&&u.connect(a)}}i.cameraAutoUpdate=!0,i.enabled=!1,i.isPresenting=!1,i.getController=function(e){var t=x[e];return void 0===t&&(t=new ic,x[e]=t),t.getTargetRaySpace()},i.getControllerGrip=function(e){var t=x[e];return void 0===t&&(t=new ic,x[e]=t),t.getGripSpace()},i.getHand=function(e){var t=x[e];return void 0===t&&(t=new ic,x[e]=t),t.getHandSpace()},i.setFramebufferScaleFactor=function(e){s=e,!0===a.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},i.setReferenceSpaceType=function(e){l=e,!0===a.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},i.getReferenceSpace=function(){return h||u},i.setReferenceSpace=function(e){h=e},i.getBaseLayer=function(){return null!==p?p:A},i.getBinding=function(){return f},i.getFrame=function(){return v},i.getSession=function(){return o},i.setSession=function(){var t=ie(se().mark((function t(n){var i,d,v,m,x;return se().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null===(o=n)){t.next=27;break}if(y=e.getRenderTarget(),o.addEventListener("select",B),o.addEventListener("selectstart",B),o.addEventListener("selectend",B),o.addEventListener("squeeze",B),o.addEventListener("squeezestart",B),o.addEventListener("squeezeend",B),o.addEventListener("end",P),o.addEventListener("inputsourceschange",N),!0===g.xrCompatible){t.next=14;break}return t.next=14,r.makeXRCompatible();case 14:return S=e.getPixelRatio(),e.getSize(w),void 0===o.renderState.layers?(i={antialias:g.antialias,alpha:!0,depth:g.depth,stencil:g.stencil,framebufferScaleFactor:s},A=new XRWebGLLayer(o,r,i),o.updateRenderState({baseLayer:A}),e.setPixelRatio(1),e.setSize(A.framebufferWidth,A.framebufferHeight,!1),b=new Ii(A.framebufferWidth,A.framebufferHeight,{format:Yt,type:It,colorSpace:e.outputColorSpace,stencilBuffer:g.stencil})):(d=null,v=null,m=null,g.depth&&(m=g.stencil?r.DEPTH24_STENCIL8:r.DEPTH_COMPONENT24,d=g.stencil?Zt:Kt,v=g.stencil?Vt:Ut),x={colorFormat:r.RGBA8,depthFormat:m,scaleFactor:s},f=new XRWebGLBinding(o,r),p=f.createProjectionLayer(x),o.updateRenderState({layers:[p]}),e.setPixelRatio(1),e.setSize(p.textureWidth,p.textureHeight,!1),b=new Ii(p.textureWidth,p.textureHeight,{format:Yt,type:It,depthTexture:new au(p.textureWidth,p.textureHeight,v,void 0,void 0,void 0,void 0,void 0,void 0,d),stencilBuffer:g.stencil,colorSpace:e.outputColorSpace,samples:g.antialias?4:0,resolveDepthBuffer:!1===p.ignoreDepthValues})),b.isXRRenderTarget=!0,this.setFoveation(c),h=null,t.next=22,o.requestReferenceSpace(l);case 22:u=t.sent,F.setContext(o),F.start(),a.isPresenting=!0,a.dispatchEvent({type:"sessionstart"});case 27:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),i.getEnvironmentBlendMode=function(){if(null!==o)return o.environmentBlendMode},i.getDepthTexture=function(){return m.getDepthTexture()};var I=new zi,D=new zi;function L(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.copy(e.matrixWorld).invert()}i.updateCamera=function(e){if(null!==o){var t=e.near,n=e.far;null!==m.texture&&(m.depthNear>0&&(t=m.depthNear),m.depthFar>0&&(n=m.depthFar)),E.near=k.near=M.near=t,E.far=k.far=M.far=n,C===E.near&&R===E.far||(o.updateRenderState({depthNear:E.near,depthFar:E.far}),C=E.near,R=E.far),M.layers.mask=2|e.layers.mask,k.layers.mask=4|e.layers.mask,E.layers.mask=M.layers.mask|k.layers.mask;var r=e.parent,i=E.cameras;L(E,r);for(var a=0;a<i.length;a++)L(i[a],r);2===i.length?function(e,t,n){I.setFromMatrixPosition(t.matrixWorld),D.setFromMatrixPosition(n.matrixWorld);var r=I.distanceTo(D),i=t.projectionMatrix.elements,a=n.projectionMatrix.elements,o=i[14]/(i[10]-1),s=i[14]/(i[10]+1),u=(i[9]+1)/i[5],l=(i[9]-1)/i[5],c=(i[8]-1)/i[0],h=(a[8]+1)/a[0],d=o*c,f=o*h,p=r/(-c+h),A=p*-c;if(t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(A),e.translateZ(p),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.copy(e.matrixWorld).invert(),-1===i[10])e.projectionMatrix.copy(t.projectionMatrix),e.projectionMatrixInverse.copy(t.projectionMatrixInverse);else{var v=o+p,m=s+p,g=d-A,y=f+(r-A),b=u*s/m*v,x=l*s/m*v;e.projectionMatrix.makePerspective(g,y,b,x,v,m),e.projectionMatrixInverse.copy(e.projectionMatrix).invert()}}(E,M,k):E.projectionMatrix.copy(M.projectionMatrix),function(e,t,n){null===n?e.matrix.copy(t.matrixWorld):(e.matrix.copy(n.matrixWorld),e.matrix.invert(),e.matrix.multiply(t.matrixWorld));e.matrix.decompose(e.position,e.quaternion,e.scale),e.updateMatrixWorld(!0),e.projectionMatrix.copy(t.projectionMatrix),e.projectionMatrixInverse.copy(t.projectionMatrixInverse),e.isPerspectiveCamera&&(e.fov=2*Jr*Math.atan(1/e.projectionMatrix.elements[5]),e.zoom=1)}(e,E,r)}},i.getCamera=function(){return E},i.getFoveation=function(){if(null!==p||null!==A)return c},i.setFoveation=function(e){c=e,null!==p&&(p.fixedFoveation=e),null!==A&&void 0!==A.fixedFoveation&&(A.fixedFoveation=e)},i.hasDepthSensing=function(){return null!==m.texture},i.getDepthSensingMesh=function(){return m.getMesh(E)};var O=null;var F=new bs;return F.setAnimationLoop((function(t,n){if(d=n.getViewerPose(h||u),v=n,null!==d){var r=d.views;null!==A&&(e.setRenderTargetFramebuffer(b,A.framebuffer),e.setRenderTarget(b));var i=!1;r.length!==E.cameras.length&&(E.cameras.length=0,i=!0);for(var s=0;s<r.length;s++){var l=r[s],c=null;if(null!==A)c=A.getViewport(l);else{var g=f.getViewSubImage(p,l);c=g.viewport,0===s&&(e.setRenderTargetTextures(b,g.colorTexture,p.ignoreDepthValues?void 0:g.depthStencilTexture),e.setRenderTarget(b))}var y=T[s];void 0===y&&((y=new us).layers.enable(s),y.viewport=new Pi,T[s]=y),y.matrix.fromArray(l.transform.matrix),y.matrix.decompose(y.position,y.quaternion,y.scale),y.projectionMatrix.fromArray(l.projectionMatrix),y.projectionMatrixInverse.copy(y.projectionMatrix).invert(),y.viewport.set(c.x,c.y,c.width,c.height),0===s&&(E.matrix.copy(y.matrix),E.matrix.decompose(E.position,E.quaternion,E.scale)),!0===i&&E.cameras.push(y)}var w=o.enabledFeatures;if(w&&w.includes("depth-sensing")){var S=f.getDepthInformation(r[0]);S&&S.isValid&&S.texture&&m.init(e,S,o.renderState)}}for(var M=0;M<x.length;M++){var k=_[M],C=x[M];null!==k&&void 0!==C&&C.update(k,n,h||u)}O&&O(t,n),n.detectedPlanes&&a.dispatchEvent({type:"planesdetected",data:n}),v=null})),i.setAnimationLoop=function(e){O=e},i.dispose=function(){},i}return W(n)}(Wr),sc=new ka,uc=new va;function lc(e,t){function n(e,t){!0===e.matrixAutoUpdate&&e.updateMatrix(),t.value.copy(e.matrix)}function r(e,r){e.opacity.value=r.opacity,r.color&&e.diffuse.value.copy(r.color),r.emissive&&e.emissive.value.copy(r.emissive).multiplyScalar(r.emissiveIntensity),r.map&&(e.map.value=r.map,n(r.map,e.mapTransform)),r.alphaMap&&(e.alphaMap.value=r.alphaMap,n(r.alphaMap,e.alphaMapTransform)),r.bumpMap&&(e.bumpMap.value=r.bumpMap,n(r.bumpMap,e.bumpMapTransform),e.bumpScale.value=r.bumpScale,r.side===be&&(e.bumpScale.value*=-1)),r.normalMap&&(e.normalMap.value=r.normalMap,n(r.normalMap,e.normalMapTransform),e.normalScale.value.copy(r.normalScale),r.side===be&&e.normalScale.value.negate()),r.displacementMap&&(e.displacementMap.value=r.displacementMap,n(r.displacementMap,e.displacementMapTransform),e.displacementScale.value=r.displacementScale,e.displacementBias.value=r.displacementBias),r.emissiveMap&&(e.emissiveMap.value=r.emissiveMap,n(r.emissiveMap,e.emissiveMapTransform)),r.specularMap&&(e.specularMap.value=r.specularMap,n(r.specularMap,e.specularMapTransform)),r.alphaTest>0&&(e.alphaTest.value=r.alphaTest);var i=t.get(r),a=i.envMap,o=i.envMapRotation;a&&(e.envMap.value=a,sc.copy(o),sc.x*=-1,sc.y*=-1,sc.z*=-1,a.isCubeTexture&&!1===a.isRenderTargetTexture&&(sc.y*=-1,sc.z*=-1),e.envMapRotation.value.setFromMatrix4(uc.makeRotationFromEuler(sc)),e.flipEnvMap.value=a.isCubeTexture&&!1===a.isRenderTargetTexture?-1:1,e.reflectivity.value=r.reflectivity,e.ior.value=r.ior,e.refractionRatio.value=r.refractionRatio),r.lightMap&&(e.lightMap.value=r.lightMap,e.lightMapIntensity.value=r.lightMapIntensity,n(r.lightMap,e.lightMapTransform)),r.aoMap&&(e.aoMap.value=r.aoMap,e.aoMapIntensity.value=r.aoMapIntensity,n(r.aoMap,e.aoMapTransform))}return{refreshFogUniforms:function(t,n){n.color.getRGB(t.fogColor.value,ts(e)),n.isFog?(t.fogNear.value=n.near,t.fogFar.value=n.far):n.isFogExp2&&(t.fogDensity.value=n.density)},refreshMaterialUniforms:function(e,i,a,o,s){i.isMeshBasicMaterial||i.isMeshLambertMaterial?r(e,i):i.isMeshToonMaterial?(r(e,i),function(e,t){t.gradientMap&&(e.gradientMap.value=t.gradientMap)}(e,i)):i.isMeshPhongMaterial?(r(e,i),function(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4)}(e,i)):i.isMeshStandardMaterial?(r(e,i),function(e,t){e.metalness.value=t.metalness,t.metalnessMap&&(e.metalnessMap.value=t.metalnessMap,n(t.metalnessMap,e.metalnessMapTransform));e.roughness.value=t.roughness,t.roughnessMap&&(e.roughnessMap.value=t.roughnessMap,n(t.roughnessMap,e.roughnessMapTransform));t.envMap&&(e.envMapIntensity.value=t.envMapIntensity)}(e,i),i.isMeshPhysicalMaterial&&function(e,t,r){e.ior.value=t.ior,t.sheen>0&&(e.sheenColor.value.copy(t.sheenColor).multiplyScalar(t.sheen),e.sheenRoughness.value=t.sheenRoughness,t.sheenColorMap&&(e.sheenColorMap.value=t.sheenColorMap,n(t.sheenColorMap,e.sheenColorMapTransform)),t.sheenRoughnessMap&&(e.sheenRoughnessMap.value=t.sheenRoughnessMap,n(t.sheenRoughnessMap,e.sheenRoughnessMapTransform)));t.clearcoat>0&&(e.clearcoat.value=t.clearcoat,e.clearcoatRoughness.value=t.clearcoatRoughness,t.clearcoatMap&&(e.clearcoatMap.value=t.clearcoatMap,n(t.clearcoatMap,e.clearcoatMapTransform)),t.clearcoatRoughnessMap&&(e.clearcoatRoughnessMap.value=t.clearcoatRoughnessMap,n(t.clearcoatRoughnessMap,e.clearcoatRoughnessMapTransform)),t.clearcoatNormalMap&&(e.clearcoatNormalMap.value=t.clearcoatNormalMap,n(t.clearcoatNormalMap,e.clearcoatNormalMapTransform),e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale),t.side===be&&e.clearcoatNormalScale.value.negate()));t.dispersion>0&&(e.dispersion.value=t.dispersion);t.iridescence>0&&(e.iridescence.value=t.iridescence,e.iridescenceIOR.value=t.iridescenceIOR,e.iridescenceThicknessMinimum.value=t.iridescenceThicknessRange[0],e.iridescenceThicknessMaximum.value=t.iridescenceThicknessRange[1],t.iridescenceMap&&(e.iridescenceMap.value=t.iridescenceMap,n(t.iridescenceMap,e.iridescenceMapTransform)),t.iridescenceThicknessMap&&(e.iridescenceThicknessMap.value=t.iridescenceThicknessMap,n(t.iridescenceThicknessMap,e.iridescenceThicknessMapTransform)));t.transmission>0&&(e.transmission.value=t.transmission,e.transmissionSamplerMap.value=r.texture,e.transmissionSamplerSize.value.set(r.width,r.height),t.transmissionMap&&(e.transmissionMap.value=t.transmissionMap,n(t.transmissionMap,e.transmissionMapTransform)),e.thickness.value=t.thickness,t.thicknessMap&&(e.thicknessMap.value=t.thicknessMap,n(t.thicknessMap,e.thicknessMapTransform)),e.attenuationDistance.value=t.attenuationDistance,e.attenuationColor.value.copy(t.attenuationColor));t.anisotropy>0&&(e.anisotropyVector.value.set(t.anisotropy*Math.cos(t.anisotropyRotation),t.anisotropy*Math.sin(t.anisotropyRotation)),t.anisotropyMap&&(e.anisotropyMap.value=t.anisotropyMap,n(t.anisotropyMap,e.anisotropyMapTransform)));e.specularIntensity.value=t.specularIntensity,e.specularColor.value.copy(t.specularColor),t.specularColorMap&&(e.specularColorMap.value=t.specularColorMap,n(t.specularColorMap,e.specularColorMapTransform));t.specularIntensityMap&&(e.specularIntensityMap.value=t.specularIntensityMap,n(t.specularIntensityMap,e.specularIntensityMapTransform))}(e,i,s)):i.isMeshMatcapMaterial?(r(e,i),function(e,t){t.matcap&&(e.matcap.value=t.matcap)}(e,i)):i.isMeshDepthMaterial?r(e,i):i.isMeshDistanceMaterial?(r(e,i),function(e,n){var r=t.get(n).light;e.referencePosition.value.setFromMatrixPosition(r.matrixWorld),e.nearDistance.value=r.shadow.camera.near,e.farDistance.value=r.shadow.camera.far}(e,i)):i.isMeshNormalMaterial?r(e,i):i.isLineBasicMaterial?(function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,t.map&&(e.map.value=t.map,n(t.map,e.mapTransform))}(e,i),i.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(e,i)):i.isPointsMaterial?function(e,t,r,i){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*r,e.scale.value=.5*i,t.map&&(e.map.value=t.map,n(t.map,e.uvTransform));t.alphaMap&&(e.alphaMap.value=t.alphaMap,n(t.alphaMap,e.alphaMapTransform));t.alphaTest>0&&(e.alphaTest.value=t.alphaTest)}(e,i,a,o):i.isSpriteMaterial?function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,t.map&&(e.map.value=t.map,n(t.map,e.mapTransform));t.alphaMap&&(e.alphaMap.value=t.alphaMap,n(t.alphaMap,e.alphaMapTransform));t.alphaTest>0&&(e.alphaTest.value=t.alphaTest)}(e,i):i.isShadowMaterial?(e.color.value.copy(i.color),e.opacity.value=i.opacity):i.isShaderMaterial&&(i.uniformsNeedUpdate=!1)}}}function cc(e,t,n,r){var i={},a={},o=[],s=e.getParameter(e.MAX_UNIFORM_BUFFER_BINDINGS);function u(e,t,n,r){var i=e.value,a=t+"_"+n;if(void 0===r[a])return r[a]="number"===typeof i||"boolean"===typeof i?i:i.clone(),!0;var o=r[a];if("number"===typeof i||"boolean"===typeof i){if(o!==i)return r[a]=i,!0}else if(!1===o.equals(i))return o.copy(i),!0;return!1}function l(e){var t={boundary:0,storage:0};return"number"===typeof e||"boolean"===typeof e?(t.boundary=4,t.storage=4):e.isVector2?(t.boundary=8,t.storage=8):e.isVector3||e.isColor?(t.boundary=16,t.storage=12):e.isVector4?(t.boundary=16,t.storage=16):e.isMatrix3?(t.boundary=48,t.storage=48):e.isMatrix4?(t.boundary=64,t.storage=64):e.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",e),t}function c(t){var n=t.target;n.removeEventListener("dispose",c);var r=o.indexOf(n.__bindingPointIndex);o.splice(r,1),e.deleteBuffer(i[n.id]),delete i[n.id],delete a[n.id]}return{bind:function(e,t){var n=t.program;r.uniformBlockBinding(e,n)},update:function(n,h){var d=i[n.id];void 0===d&&(!function(e){for(var t=e.uniforms,n=0,r=16,i=0,a=t.length;i<a;i++)for(var o=Array.isArray(t[i])?t[i]:[t[i]],s=0,u=o.length;s<u;s++)for(var c=o[s],h=Array.isArray(c.value)?c.value:[c.value],d=0,f=h.length;d<f;d++){var p=l(h[d]),A=n%r,v=A%p.boundary,m=A+v;n+=v,0!==m&&r-m<p.storage&&(n+=r-m),c.__data=new Float32Array(p.storage/Float32Array.BYTES_PER_ELEMENT),c.__offset=n,n+=p.storage}var g=n%r;g>0&&(n+=r-g);e.__size=n,e.__cache={}}(n),d=function(t){var n=function(){for(var e=0;e<s;e++)if(-1===o.indexOf(e))return o.push(e),e;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();t.__bindingPointIndex=n;var r=e.createBuffer(),i=t.__size,a=t.usage;return e.bindBuffer(e.UNIFORM_BUFFER,r),e.bufferData(e.UNIFORM_BUFFER,i,a),e.bindBuffer(e.UNIFORM_BUFFER,null),e.bindBufferBase(e.UNIFORM_BUFFER,n,r),r}(n),i[n.id]=d,n.addEventListener("dispose",c));var f=h.program;r.updateUBOMapping(n,f);var p=t.render.frame;a[n.id]!==p&&(!function(t){var n=i[t.id],r=t.uniforms,a=t.__cache;e.bindBuffer(e.UNIFORM_BUFFER,n);for(var o=0,s=r.length;o<s;o++)for(var c=Array.isArray(r[o])?r[o]:[r[o]],h=0,d=c.length;h<d;h++){var f=c[h];if(!0===u(f,o,h,a)){for(var p=f.__offset,A=Array.isArray(f.value)?f.value:[f.value],v=0,m=0;m<A.length;m++){var g=A[m],y=l(g);"number"===typeof g||"boolean"===typeof g?(f.__data[0]=g,e.bufferSubData(e.UNIFORM_BUFFER,p+v,f.__data)):g.isMatrix3?(f.__data[0]=g.elements[0],f.__data[1]=g.elements[1],f.__data[2]=g.elements[2],f.__data[3]=0,f.__data[4]=g.elements[3],f.__data[5]=g.elements[4],f.__data[6]=g.elements[5],f.__data[7]=0,f.__data[8]=g.elements[6],f.__data[9]=g.elements[7],f.__data[10]=g.elements[8],f.__data[11]=0):(g.toArray(f.__data,v),v+=y.storage/Float32Array.BYTES_PER_ELEMENT)}e.bufferSubData(e.UNIFORM_BUFFER,p,f.__data)}}e.bindBuffer(e.UNIFORM_BUFFER,null)}(n),a[n.id]=p)},dispose:function(){for(var t in i)e.deleteBuffer(i[t]);o=[],i={},a={}}}}var hc,dc=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};V(this,e);var n,r=t.canvas,i=void 0===r?hi():r,a=t.context,o=void 0===a?null:a,s=t.depth,u=void 0===s||s,l=t.stencil,c=void 0!==l&&l,h=t.alpha,d=void 0!==h&&h,f=t.antialias,p=void 0!==f&&f,A=t.premultipliedAlpha,v=void 0===A||A,m=t.preserveDrawingBuffer,g=void 0!==m&&m,y=t.powerPreference,b=void 0===y?"default":y,x=t.failIfMajorPerformanceCaveat,_=void 0!==x&&x,w=t.reverseDepthBuffer,S=void 0!==w&&w;if(this.isWebGLRenderer=!0,null!==o){if("undefined"!==typeof WebGLRenderingContext&&o instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");n=o.getContextAttributes().alpha}else n=d;var M=new Uint32Array(4),k=new Int32Array(4),T=null,E=null,C=[],R=[];this.domElement=i,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=ar,this.toneMapping=at,this.toneMappingExposure=1;var B=this,P=!1,N=0,I=0,D=null,L=-1,O=null,F=new Pi,U=new Pi,z=null,G=new uo(0),q=0,H=i.width,j=i.height,W=1,X=null,Y=null,Q=new Pi(0,0,H,j),J=new Pi(0,0,H,j),K=!1,Z=new ys,$=!1,ee=!1,te=new va,ne=new va,re=new zi,ae=new Pi,oe={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0},le=!1;function ce(){return null===D?W:1}var he,de,fe,pe,Ae,ve,me,ge,_e,we,Se,Me,ke,Te,Ee,Ce,Re,Be,Pe,Ne,Ie,De,Le,Oe,Fe=o;function Ue(e,t){return i.getContext(e,t)}try{var ze={alpha:!0,depth:u,stencil:c,antialias:p,premultipliedAlpha:v,preserveDrawingBuffer:g,powerPreference:b,failIfMajorPerformanceCaveat:_};if("setAttribute"in i&&i.setAttribute("data-engine","three.js r".concat(ue)),i.addEventListener("webglcontextlost",Ve,!1),i.addEventListener("webglcontextrestored",je,!1),i.addEventListener("webglcontextcreationerror",We,!1),null===Fe){var Ge="webgl2";if(null===(Fe=Ue(Ge,ze)))throw Ue(Ge)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(tg){throw console.error("THREE.WebGLRenderer: "+tg.message),tg}function qe(){(he=new $s(Fe)).init(),De=new ec(Fe,he),de=new Ps(Fe,he,t,De),fe=new Jl(Fe,he),de.reverseDepthBuffer&&S&&fe.buffers.depth.setReversed(!0),pe=new nu(Fe),Ae=new Dl,ve=new $l(Fe,he,fe,Ae,de,De,pe),me=new Is(B),ge=new Zs(B),_e=new xs(Fe),Le=new Rs(Fe,_e),we=new eu(Fe,_e,pe,Le),Se=new iu(Fe,we,_e,pe),Pe=new ru(Fe,de,ve),Ce=new Ns(Ae),Me=new Il(B,me,ge,he,de,Le,Ce),ke=new lc(B,Ae),Te=new Ul,Ee=new jl(he),Be=new Cs(B,me,ge,fe,Se,n,v),Re=new Yl(B,Se,de),Oe=new cc(Fe,pe,de,fe),Ne=new Bs(Fe,he,pe),Ie=new tu(Fe,he,pe),pe.programs=Me.programs,B.capabilities=de,B.extensions=he,B.properties=Ae,B.renderLists=Te,B.shadowMap=Re,B.state=fe,B.info=pe}qe();var He=new oc(B,Fe);function Ve(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),P=!0}function je(){console.log("THREE.WebGLRenderer: Context Restored."),P=!1;var e=pe.autoReset,t=Re.enabled,n=Re.autoUpdate,r=Re.needsUpdate,i=Re.type;qe(),pe.autoReset=e,Re.enabled=t,Re.autoUpdate=n,Re.needsUpdate=r,Re.type=i}function We(e){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",e.statusMessage)}function Xe(e){var t=e.target;t.removeEventListener("dispose",Xe),Ye(t)}function Ye(e){Qe(e),Ae.remove(e)}function Qe(e){var t=Ae.get(e).programs;void 0!==t&&(t.forEach((function(e){Me.releaseProgram(e)})),e.isShaderMaterial&&Me.releaseShaderCache(e))}function Je(e,t,n){!0===e.transparent&&e.side===xe&&!1===e.forceSinglePass?(e.side=be,e.needsUpdate=!0,ut(e,t,n),e.side=ye,e.needsUpdate=!0,ut(e,t,n),e.side=xe):ut(e,t,n)}this.xr=He,this.getContext=function(){return Fe},this.getContextAttributes=function(){return Fe.getContextAttributes()},this.forceContextLoss=function(){var e=he.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){var e=he.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return W},this.setPixelRatio=function(e){void 0!==e&&(W=e,this.setSize(H,j,!1))},this.getSize=function(e){return e.set(H,j)},this.setSize=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];He.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(H=e,j=t,i.width=Math.floor(e*W),i.height=Math.floor(t*W),!0===n&&(i.style.width=e+"px",i.style.height=t+"px"),this.setViewport(0,0,e,t))},this.getDrawingBufferSize=function(e){return e.set(H*W,j*W).floor()},this.setDrawingBufferSize=function(e,t,n){H=e,j=t,W=n,i.width=Math.floor(e*n),i.height=Math.floor(t*n),this.setViewport(0,0,e,t)},this.getCurrentViewport=function(e){return e.copy(F)},this.getViewport=function(e){return e.copy(Q)},this.setViewport=function(e,t,n,r){e.isVector4?Q.set(e.x,e.y,e.z,e.w):Q.set(e,t,n,r),fe.viewport(F.copy(Q).multiplyScalar(W).round())},this.getScissor=function(e){return e.copy(J)},this.setScissor=function(e,t,n,r){e.isVector4?J.set(e.x,e.y,e.z,e.w):J.set(e,t,n,r),fe.scissor(U.copy(J).multiplyScalar(W).round())},this.getScissorTest=function(){return K},this.setScissorTest=function(e){fe.setScissorTest(K=e)},this.setOpaqueSort=function(e){X=e},this.setTransparentSort=function(e){Y=e},this.getClearColor=function(e){return e.copy(Be.getClearColor())},this.setClearColor=function(){Be.setClearColor.apply(Be,arguments)},this.getClearAlpha=function(){return Be.getClearAlpha()},this.setClearAlpha=function(){Be.setClearAlpha.apply(Be,arguments)},this.clear=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=0;if(e){var i=!1;if(null!==D){var a=D.texture.format;i=a===an||a===nn||a===en}if(i){var o=D.texture.type,s=o===It||o===Ut||o===Ot||o===Vt||o===qt||o===Ht,u=Be.getClearColor(),l=Be.getClearAlpha(),c=u.r,h=u.g,d=u.b;s?(M[0]=c,M[1]=h,M[2]=d,M[3]=l,Fe.clearBufferuiv(Fe.COLOR,0,M)):(k[0]=c,k[1]=h,k[2]=d,k[3]=l,Fe.clearBufferiv(Fe.COLOR,0,k))}else r|=Fe.COLOR_BUFFER_BIT}t&&(r|=Fe.DEPTH_BUFFER_BIT),n&&(r|=Fe.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),Fe.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){i.removeEventListener("webglcontextlost",Ve,!1),i.removeEventListener("webglcontextrestored",je,!1),i.removeEventListener("webglcontextcreationerror",We,!1),Te.dispose(),Ee.dispose(),Ae.dispose(),me.dispose(),ge.dispose(),Se.dispose(),Le.dispose(),Oe.dispose(),Me.dispose(),He.dispose(),He.removeEventListener("sessionstart",$e),He.removeEventListener("sessionend",et),tt.stop()},this.renderBufferDirect=function(e,t,n,r,i,a){null===t&&(t=oe);var o=i.isMesh&&i.matrixWorld.determinant()<0,s=ht(e,t,n,r,i);fe.setMaterial(r,o);var u=n.index,l=1;if(!0===r.wireframe){if(void 0===(u=we.getWireframeAttribute(n)))return;l=2}var c=n.drawRange,h=n.attributes.position,d=c.start*l,f=(c.start+c.count)*l;null!==a&&(d=Math.max(d,a.start*l),f=Math.min(f,(a.start+a.count)*l)),null!==u?(d=Math.max(d,0),f=Math.min(f,u.count)):void 0!==h&&null!==h&&(d=Math.max(d,0),f=Math.min(f,h.count));var p=f-d;if(!(p<0||p===1/0)){var A;Le.setup(i,r,s,n,u);var v=Ne;if(null!==u&&(A=_e.get(u),(v=Ie).setIndex(A)),i.isMesh)!0===r.wireframe?(fe.setLineWidth(r.wireframeLinewidth*ce()),v.setMode(Fe.LINES)):v.setMode(Fe.TRIANGLES);else if(i.isLine){var m=r.linewidth;void 0===m&&(m=1),fe.setLineWidth(m*ce()),i.isLineSegments?v.setMode(Fe.LINES):i.isLineLoop?v.setMode(Fe.LINE_LOOP):v.setMode(Fe.LINE_STRIP)}else i.isPoints?v.setMode(Fe.POINTS):i.isSprite&&v.setMode(Fe.TRIANGLES);if(i.isBatchedMesh)if(null!==i._multiDrawInstances)v.renderMultiDrawInstances(i._multiDrawStarts,i._multiDrawCounts,i._multiDrawCount,i._multiDrawInstances);else if(he.get("WEBGL_multi_draw"))v.renderMultiDraw(i._multiDrawStarts,i._multiDrawCounts,i._multiDrawCount);else for(var g=i._multiDrawStarts,y=i._multiDrawCounts,b=i._multiDrawCount,x=u?_e.get(u).bytesPerElement:1,_=Ae.get(r).currentProgram.getUniforms(),w=0;w<b;w++)_.setValue(Fe,"_gl_DrawID",w),v.render(g[w]/x,y[w]);else if(i.isInstancedMesh)v.renderInstances(d,p,i.count);else if(n.isInstancedBufferGeometry){var S=void 0!==n._maxInstanceCount?n._maxInstanceCount:1/0,M=Math.min(n.instanceCount,S);v.renderInstances(d,p,M)}else v.render(d,p)}},this.compile=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;null===n&&(n=e),(E=Ee.get(n)).init(t),R.push(E),n.traverseVisible((function(e){e.isLight&&e.layers.test(t.layers)&&(E.pushLight(e),e.castShadow&&E.pushShadow(e))})),e!==n&&e.traverseVisible((function(e){e.isLight&&e.layers.test(t.layers)&&(E.pushLight(e),e.castShadow&&E.pushShadow(e))})),E.setupLights();var r=new Set;return e.traverse((function(e){if(e.isMesh||e.isPoints||e.isLine||e.isSprite){var t=e.material;if(t)if(Array.isArray(t))for(var i=0;i<t.length;i++){var a=t[i];Je(a,n,e),r.add(a)}else Je(t,n,e),r.add(t)}})),R.pop(),E=null,r},this.compileAsync=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=this.compile(e,t,n);return new Promise((function(t){function n(){r.forEach((function(e){Ae.get(e).currentProgram.isReady()&&r.delete(e)})),0!==r.size?setTimeout(n,10):t(e)}null!==he.get("KHR_parallel_shader_compile")?n():setTimeout(n,10)}))};var Ke=null;function Ze(e){Ke&&Ke(e)}function $e(){tt.stop()}function et(){tt.start()}var tt=new bs;function nt(e,t,n,r){if(!1!==e.visible){if(e.layers.test(t.layers))if(e.isGroup)n=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)E.pushLight(e),e.castShadow&&E.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||Z.intersectsSprite(e)){r&&ae.setFromMatrixPosition(e.matrixWorld).applyMatrix4(ne);var i=Se.update(e),a=e.material;a.visible&&T.push(e,i,a,n,ae.z,null)}}else if((e.isMesh||e.isLine||e.isPoints)&&(!e.frustumCulled||Z.intersectsObject(e))){var o=Se.update(e),s=e.material;if(r&&(void 0!==e.boundingSphere?(null===e.boundingSphere&&e.computeBoundingSphere(),ae.copy(e.boundingSphere.center)):(null===o.boundingSphere&&o.computeBoundingSphere(),ae.copy(o.boundingSphere.center)),ae.applyMatrix4(e.matrixWorld).applyMatrix4(ne)),Array.isArray(s))for(var u=o.groups,l=0,c=u.length;l<c;l++){var h=u[l],d=s[h.materialIndex];d&&d.visible&&T.push(e,o,d,n,ae.z,h)}else s.visible&&T.push(e,o,s,n,ae.z,null)}for(var f=e.children,p=0,A=f.length;p<A;p++)nt(f[p],t,n,r)}}function rt(e,t,n,r){var i=e.opaque,a=e.transmissive,o=e.transparent;E.setupLightsView(n),!0===$&&Ce.setGlobalState(B.clippingPlanes,n),r&&fe.viewport(F.copy(r)),i.length>0&&ot(i,t,n),a.length>0&&ot(a,t,n),o.length>0&&ot(o,t,n),fe.buffers.depth.setTest(!0),fe.buffers.depth.setMask(!0),fe.buffers.color.setMask(!0),fe.setPolygonOffset(!1)}function it(e,t,n,r){if(null===(!0===n.isScene?n.overrideMaterial:null)){void 0===E.state.transmissionRenderTarget[r.id]&&(E.state.transmissionRenderTarget[r.id]=new Ii(1,1,{generateMipmaps:!0,type:he.has("EXT_color_buffer_half_float")||he.has("EXT_color_buffer_float")?Gt:It,minFilter:Pt,samples:4,stencilBuffer:c,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:mi.workingColorSpace}));var i=E.state.transmissionRenderTarget[r.id],a=r.viewport||F;i.setSize(a.z,a.w);var o=B.getRenderTarget();B.setRenderTarget(i),B.getClearColor(G),(q=B.getClearAlpha())<1&&B.setClearColor(16777215,.5),B.clear(),le&&Be.render(n);var s=B.toneMapping;B.toneMapping=at;var u=r.viewport;if(void 0!==r.viewport&&(r.viewport=void 0),E.setupLightsView(r),!0===$&&Ce.setGlobalState(B.clippingPlanes,r),ot(e,n,r),ve.updateMultisampleRenderTarget(i),ve.updateRenderTargetMipmap(i),!1===he.has("WEBGL_multisampled_render_to_texture")){for(var l=!1,h=0,d=t.length;h<d;h++){var f=t[h],p=f.object,A=f.geometry,v=f.material,m=f.group;if(v.side===xe&&p.layers.test(r.layers)){var g=v.side;v.side=be,v.needsUpdate=!0,st(p,n,r,A,v,m),v.side=g,v.needsUpdate=!0,l=!0}}!0===l&&(ve.updateMultisampleRenderTarget(i),ve.updateRenderTargetMipmap(i))}B.setRenderTarget(o),B.setClearColor(G,q),void 0!==u&&(r.viewport=u),B.toneMapping=s}}function ot(e,t,n){for(var r=!0===t.isScene?t.overrideMaterial:null,i=0,a=e.length;i<a;i++){var o=e[i],s=o.object,u=o.geometry,l=null===r?o.material:r,c=o.group;s.layers.test(n.layers)&&st(s,t,n,u,l,c)}}function st(e,t,n,r,i,a){e.onBeforeRender(B,t,n,r,i,a),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),i.onBeforeRender(B,t,n,r,e,a),!0===i.transparent&&i.side===xe&&!1===i.forceSinglePass?(i.side=be,i.needsUpdate=!0,B.renderBufferDirect(n,t,r,i,e,a),i.side=ye,i.needsUpdate=!0,B.renderBufferDirect(n,t,r,i,e,a),i.side=xe):B.renderBufferDirect(n,t,r,i,e,a),e.onAfterRender(B,t,n,r,i,a)}function ut(e,t,n){!0!==t.isScene&&(t=oe);var r=Ae.get(e),i=E.state.lights,a=E.state.shadowsArray,o=i.state.version,s=Me.getParameters(e,i.state,a,t,n),u=Me.getProgramCacheKey(s),l=r.programs;r.environment=e.isMeshStandardMaterial?t.environment:null,r.fog=t.fog,r.envMap=(e.isMeshStandardMaterial?ge:me).get(e.envMap||r.environment),r.envMapRotation=null!==r.environment&&null===e.envMap?t.environmentRotation:e.envMapRotation,void 0===l&&(e.addEventListener("dispose",Xe),l=new Map,r.programs=l);var c=l.get(u);if(void 0!==c){if(r.currentProgram===c&&r.lightsStateVersion===o)return ct(e,s),c}else s.uniforms=Me.getUniforms(e),e.onBeforeCompile(s,B),c=Me.acquireProgram(s,u),l.set(u,c),r.uniforms=s.uniforms;var h=r.uniforms;return(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(h.clippingPlanes=Ce.uniform),ct(e,s),r.needsLights=ft(e),r.lightsStateVersion=o,r.needsLights&&(h.ambientLightColor.value=i.state.ambient,h.lightProbe.value=i.state.probe,h.directionalLights.value=i.state.directional,h.directionalLightShadows.value=i.state.directionalShadow,h.spotLights.value=i.state.spot,h.spotLightShadows.value=i.state.spotShadow,h.rectAreaLights.value=i.state.rectArea,h.ltc_1.value=i.state.rectAreaLTC1,h.ltc_2.value=i.state.rectAreaLTC2,h.pointLights.value=i.state.point,h.pointLightShadows.value=i.state.pointShadow,h.hemisphereLights.value=i.state.hemi,h.directionalShadowMap.value=i.state.directionalShadowMap,h.directionalShadowMatrix.value=i.state.directionalShadowMatrix,h.spotShadowMap.value=i.state.spotShadowMap,h.spotLightMatrix.value=i.state.spotLightMatrix,h.spotLightMap.value=i.state.spotLightMap,h.pointShadowMap.value=i.state.pointShadowMap,h.pointShadowMatrix.value=i.state.pointShadowMatrix),r.currentProgram=c,r.uniformsList=null,c}function lt(e){if(null===e.uniformsList){var t=e.currentProgram.getUniforms();e.uniformsList=cl.seqWithValue(t.seq,e.uniforms)}return e.uniformsList}function ct(e,t){var n=Ae.get(e);n.outputColorSpace=t.outputColorSpace,n.batching=t.batching,n.batchingColor=t.batchingColor,n.instancing=t.instancing,n.instancingColor=t.instancingColor,n.instancingMorph=t.instancingMorph,n.skinning=t.skinning,n.morphTargets=t.morphTargets,n.morphNormals=t.morphNormals,n.morphColors=t.morphColors,n.morphTargetsCount=t.morphTargetsCount,n.numClippingPlanes=t.numClippingPlanes,n.numIntersection=t.numClipIntersection,n.vertexAlphas=t.vertexAlphas,n.vertexTangents=t.vertexTangents,n.toneMapping=t.toneMapping}function ht(e,t,n,r,i){!0!==t.isScene&&(t=oe),ve.resetTextureUnits();var a=t.fog,o=r.isMeshStandardMaterial?t.environment:null,s=null===D?B.outputColorSpace:!0===D.isXRRenderTarget?D.texture.colorSpace:or,u=(r.isMeshStandardMaterial?ge:me).get(r.envMap||o),l=!0===r.vertexColors&&!!n.attributes.color&&4===n.attributes.color.itemSize,c=!!n.attributes.tangent&&(!!r.normalMap||r.anisotropy>0),h=!!n.morphAttributes.position,d=!!n.morphAttributes.normal,f=!!n.morphAttributes.color,p=at;r.toneMapped&&(null!==D&&!0!==D.isXRRenderTarget||(p=B.toneMapping));var A=n.morphAttributes.position||n.morphAttributes.normal||n.morphAttributes.color,v=void 0!==A?A.length:0,m=Ae.get(r),g=E.state.lights;if(!0===$&&(!0===ee||e!==O)){var y=e===O&&r.id===L;Ce.setState(r,e,y)}var b=!1;r.version===m.__version?m.needsLights&&m.lightsStateVersion!==g.state.version||m.outputColorSpace!==s||i.isBatchedMesh&&!1===m.batching?b=!0:i.isBatchedMesh||!0!==m.batching?i.isBatchedMesh&&!0===m.batchingColor&&null===i.colorTexture||i.isBatchedMesh&&!1===m.batchingColor&&null!==i.colorTexture||i.isInstancedMesh&&!1===m.instancing?b=!0:i.isInstancedMesh||!0!==m.instancing?i.isSkinnedMesh&&!1===m.skinning?b=!0:i.isSkinnedMesh||!0!==m.skinning?i.isInstancedMesh&&!0===m.instancingColor&&null===i.instanceColor||i.isInstancedMesh&&!1===m.instancingColor&&null!==i.instanceColor||i.isInstancedMesh&&!0===m.instancingMorph&&null===i.morphTexture||i.isInstancedMesh&&!1===m.instancingMorph&&null!==i.morphTexture||m.envMap!==u||!0===r.fog&&m.fog!==a?b=!0:void 0===m.numClippingPlanes||m.numClippingPlanes===Ce.numPlanes&&m.numIntersection===Ce.numIntersection?(m.vertexAlphas!==l||m.vertexTangents!==c||m.morphTargets!==h||m.morphNormals!==d||m.morphColors!==f||m.toneMapping!==p||m.morphTargetsCount!==v)&&(b=!0):b=!0:b=!0:b=!0:b=!0:(b=!0,m.__version=r.version);var x=m.currentProgram;!0===b&&(x=ut(r,t,i));var _=!1,w=!1,S=!1,M=x.getUniforms(),k=m.uniforms;if(fe.useProgram(x.program)&&(_=!0,w=!0,S=!0),r.id!==L&&(L=r.id,w=!0),_||O!==e){fe.buffers.depth.getReversed()?(te.copy(e.projectionMatrix),Ai(te),vi(te),M.setValue(Fe,"projectionMatrix",te)):M.setValue(Fe,"projectionMatrix",e.projectionMatrix),M.setValue(Fe,"viewMatrix",e.matrixWorldInverse);var T=M.map.cameraPosition;void 0!==T&&T.setValue(Fe,re.setFromMatrixPosition(e.matrixWorld)),de.logarithmicDepthBuffer&&M.setValue(Fe,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial)&&M.setValue(Fe,"isOrthographic",!0===e.isOrthographicCamera),O!==e&&(O=e,w=!0,S=!0)}if(i.isSkinnedMesh){M.setOptional(Fe,i,"bindMatrix"),M.setOptional(Fe,i,"bindMatrixInverse");var C=i.skeleton;C&&(null===C.boneTexture&&C.computeBoneTexture(),M.setValue(Fe,"boneTexture",C.boneTexture,ve))}i.isBatchedMesh&&(M.setOptional(Fe,i,"batchingTexture"),M.setValue(Fe,"batchingTexture",i._matricesTexture,ve),M.setOptional(Fe,i,"batchingIdTexture"),M.setValue(Fe,"batchingIdTexture",i._indirectTexture,ve),M.setOptional(Fe,i,"batchingColorTexture"),null!==i._colorsTexture&&M.setValue(Fe,"batchingColorTexture",i._colorsTexture,ve));var R=n.morphAttributes;if(void 0===R.position&&void 0===R.normal&&void 0===R.color||Pe.update(i,n,x),(w||m.receiveShadow!==i.receiveShadow)&&(m.receiveShadow=i.receiveShadow,M.setValue(Fe,"receiveShadow",i.receiveShadow)),r.isMeshGouraudMaterial&&null!==r.envMap&&(k.envMap.value=u,k.flipEnvMap.value=u.isCubeTexture&&!1===u.isRenderTargetTexture?-1:1),r.isMeshStandardMaterial&&null===r.envMap&&null!==t.environment&&(k.envMapIntensity.value=t.environmentIntensity),w&&(M.setValue(Fe,"toneMappingExposure",B.toneMappingExposure),m.needsLights&&dt(k,S),a&&!0===r.fog&&ke.refreshFogUniforms(k,a),ke.refreshMaterialUniforms(k,r,W,j,E.state.transmissionRenderTarget[e.id]),cl.upload(Fe,lt(m),k,ve)),r.isShaderMaterial&&!0===r.uniformsNeedUpdate&&(cl.upload(Fe,lt(m),k,ve),r.uniformsNeedUpdate=!1),r.isSpriteMaterial&&M.setValue(Fe,"center",i.center),M.setValue(Fe,"modelViewMatrix",i.modelViewMatrix),M.setValue(Fe,"normalMatrix",i.normalMatrix),M.setValue(Fe,"modelMatrix",i.matrixWorld),r.isShaderMaterial||r.isRawShaderMaterial)for(var P=r.uniformsGroups,N=0,I=P.length;N<I;N++){var F=P[N];Oe.update(F,x),Oe.bind(F,x)}return x}function dt(e,t){e.ambientLightColor.needsUpdate=t,e.lightProbe.needsUpdate=t,e.directionalLights.needsUpdate=t,e.directionalLightShadows.needsUpdate=t,e.pointLights.needsUpdate=t,e.pointLightShadows.needsUpdate=t,e.spotLights.needsUpdate=t,e.spotLightShadows.needsUpdate=t,e.rectAreaLights.needsUpdate=t,e.hemisphereLights.needsUpdate=t}function ft(e){return e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights}tt.setAnimationLoop(Ze),"undefined"!==typeof self&&tt.setContext(self),this.setAnimationLoop=function(e){Ke=e,He.setAnimationLoop(e),null===e?tt.stop():tt.start()},He.addEventListener("sessionstart",$e),He.addEventListener("sessionend",et),this.render=function(e,t){if(void 0===t||!0===t.isCamera){if(!0!==P){if(!0===e.matrixWorldAutoUpdate&&e.updateMatrixWorld(),null===t.parent&&!0===t.matrixWorldAutoUpdate&&t.updateMatrixWorld(),!0===He.enabled&&!0===He.isPresenting&&(!0===He.cameraAutoUpdate&&He.updateCamera(t),t=He.getCamera()),!0===e.isScene&&e.onBeforeRender(B,e,t,D),(E=Ee.get(e,R.length)).init(t),R.push(E),ne.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),Z.setFromProjectionMatrix(ne),ee=this.localClippingEnabled,$=Ce.init(this.clippingPlanes,ee),(T=Te.get(e,C.length)).init(),C.push(T),!0===He.enabled&&!0===He.isPresenting){var n=B.xr.getDepthSensingMesh();null!==n&&nt(n,t,-1/0,B.sortObjects)}nt(e,t,0,B.sortObjects),T.finish(),!0===B.sortObjects&&T.sort(X,Y),(le=!1===He.enabled||!1===He.isPresenting||!1===He.hasDepthSensing())&&Be.addToRenderList(T,e),this.info.render.frame++,!0===$&&Ce.beginShadows();var r=E.state.shadowsArray;Re.render(r,e,t),!0===$&&Ce.endShadows(),!0===this.info.autoReset&&this.info.reset();var i=T.opaque,a=T.transmissive;if(E.setupLights(),t.isArrayCamera){var o=t.cameras;if(a.length>0)for(var s=0,u=o.length;s<u;s++){it(i,a,e,o[s])}le&&Be.render(e);for(var l=0,c=o.length;l<c;l++){var h=o[l];rt(T,e,h,h.viewport)}}else a.length>0&&it(i,a,e,t),le&&Be.render(e),rt(T,e,t);null!==D&&(ve.updateMultisampleRenderTarget(D),ve.updateRenderTargetMipmap(D)),!0===e.isScene&&e.onAfterRender(B,e,t),Le.resetDefaultState(),L=-1,O=null,R.pop(),R.length>0?(E=R[R.length-1],!0===$&&Ce.setGlobalState(B.clippingPlanes,E.state.camera)):E=null,C.pop(),T=C.length>0?C[C.length-1]:null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.getActiveCubeFace=function(){return N},this.getActiveMipmapLevel=function(){return I},this.getRenderTarget=function(){return D},this.setRenderTargetTextures=function(e,t,n){Ae.get(e.texture).__webglTexture=t,Ae.get(e.depthTexture).__webglTexture=n;var r=Ae.get(e);r.__hasExternalTextures=!0,r.__autoAllocateDepthBuffer=void 0===n,r.__autoAllocateDepthBuffer||!0===he.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),r.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(e,t){var n=Ae.get(e);n.__webglFramebuffer=t,n.__useDefaultFramebuffer=void 0===t},this.setRenderTarget=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;D=e,N=t,I=n;var r=!0,i=null,a=!1,o=!1;if(e){var s=Ae.get(e);if(void 0!==s.__useDefaultFramebuffer)fe.bindFramebuffer(Fe.FRAMEBUFFER,null),r=!1;else if(void 0===s.__webglFramebuffer)ve.setupRenderTarget(e);else if(s.__hasExternalTextures)ve.rebindTextures(e,Ae.get(e.texture).__webglTexture,Ae.get(e.depthTexture).__webglTexture);else if(e.depthBuffer){var u=e.depthTexture;if(s.__boundDepthTexture!==u){if(null!==u&&Ae.has(u)&&(e.width!==u.image.width||e.height!==u.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");ve.setupDepthRenderbuffer(e)}}var l=e.texture;(l.isData3DTexture||l.isDataArrayTexture||l.isCompressedArrayTexture)&&(o=!0);var c=Ae.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget?(i=Array.isArray(c[t])?c[t][n]:c[t],a=!0):i=e.samples>0&&!1===ve.useMultisampledRTT(e)?Ae.get(e).__webglMultisampledFramebuffer:Array.isArray(c)?c[n]:c,F.copy(e.viewport),U.copy(e.scissor),z=e.scissorTest}else F.copy(Q).multiplyScalar(W).floor(),U.copy(J).multiplyScalar(W).floor(),z=K;var h=fe.bindFramebuffer(Fe.FRAMEBUFFER,i);if(h&&r&&fe.drawBuffers(e,i),fe.viewport(F),fe.scissor(U),fe.setScissorTest(z),a){var d=Ae.get(e.texture);Fe.framebufferTexture2D(Fe.FRAMEBUFFER,Fe.COLOR_ATTACHMENT0,Fe.TEXTURE_CUBE_MAP_POSITIVE_X+t,d.__webglTexture,n)}else if(o){var f=Ae.get(e.texture),p=t||0;Fe.framebufferTextureLayer(Fe.FRAMEBUFFER,Fe.COLOR_ATTACHMENT0,f.__webglTexture,n||0,p)}L=-1},this.readRenderTargetPixels=function(e,t,n,r,i,a,o){if(e&&e.isWebGLRenderTarget){var s=Ae.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==o&&(s=s[o]),s){fe.bindFramebuffer(Fe.FRAMEBUFFER,s);try{var u=e.texture,l=u.format,c=u.type;if(!de.textureFormatReadable(l))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!de.textureTypeReadable(c))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");t>=0&&t<=e.width-r&&n>=0&&n<=e.height-i&&Fe.readPixels(t,n,r,i,De.convert(l),De.convert(c),a)}finally{var h=null!==D?Ae.get(D).__webglFramebuffer:null;fe.bindFramebuffer(Fe.FRAMEBUFFER,h)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")},this.readRenderTargetPixelsAsync=function(){var e=ie(se().mark((function e(t,n,r,i,a,o,s){var u,l,c,h,d,f,p;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.isWebGLRenderTarget){e.next=2;break}throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");case 2:if(u=Ae.get(t).__webglFramebuffer,t.isWebGLCubeRenderTarget&&void 0!==s&&(u=u[s]),!u){e.next=32;break}if(l=t.texture,c=l.format,h=l.type,de.textureFormatReadable(c)){e.next=10;break}throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");case 10:if(de.textureTypeReadable(h)){e.next=12;break}throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");case 12:if(!(n>=0&&n<=t.width-i&&r>=0&&r<=t.height-a)){e.next=31;break}return fe.bindFramebuffer(Fe.FRAMEBUFFER,u),d=Fe.createBuffer(),Fe.bindBuffer(Fe.PIXEL_PACK_BUFFER,d),Fe.bufferData(Fe.PIXEL_PACK_BUFFER,o.byteLength,Fe.STREAM_READ),Fe.readPixels(n,r,i,a,De.convert(c),De.convert(h),0),f=null!==D?Ae.get(D).__webglFramebuffer:null,fe.bindFramebuffer(Fe.FRAMEBUFFER,f),p=Fe.fenceSync(Fe.SYNC_GPU_COMMANDS_COMPLETE,0),Fe.flush(),e.next=24,pi(Fe,p,4);case 24:return Fe.bindBuffer(Fe.PIXEL_PACK_BUFFER,d),Fe.getBufferSubData(Fe.PIXEL_PACK_BUFFER,0,o),Fe.deleteBuffer(d),Fe.deleteSync(p),e.abrupt("return",o);case 31:throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.");case 32:case"end":return e.stop()}}),e)})));return function(t,n,r,i,a,o,s){return e.apply(this,arguments)}}(),this.copyFramebufferToTexture=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;!0!==e.isTexture&&(fi("WebGLRenderer: copyFramebufferToTexture function signature has changed."),t=arguments[0]||null,e=arguments[1]);var r=Math.pow(2,-n),i=Math.floor(e.image.width*r),a=Math.floor(e.image.height*r),o=null!==t?t.x:0,s=null!==t?t.y:0;ve.setTexture2D(e,0),Fe.copyTexSubImage2D(Fe.TEXTURE_2D,n,0,0,o,s,i,a),fe.unbindTexture()},this.copyTextureToTexture=function(e,t){var n,r,i,a,o,s,u,l,c,h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,f=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;!0!==e.isTexture&&(fi("WebGLRenderer: copyTextureToTexture function signature has changed."),d=arguments[0]||null,e=arguments[1],t=arguments[2],f=arguments[3]||0,h=null);var p=e.isCompressedTexture?e.mipmaps[f]:e.image;null!==h?(n=h.max.x-h.min.x,r=h.max.y-h.min.y,i=h.isBox3?h.max.z-h.min.z:1,a=h.min.x,o=h.min.y,s=h.isBox3?h.min.z:0):(n=p.width,r=p.height,i=p.depth||1,a=0,o=0,s=0),null!==d?(u=d.x,l=d.y,c=d.z):(u=0,l=0,c=0);var A,v=De.convert(t.format),m=De.convert(t.type);t.isData3DTexture?(ve.setTexture3D(t,0),A=Fe.TEXTURE_3D):t.isDataArrayTexture||t.isCompressedArrayTexture?(ve.setTexture2DArray(t,0),A=Fe.TEXTURE_2D_ARRAY):(ve.setTexture2D(t,0),A=Fe.TEXTURE_2D),Fe.pixelStorei(Fe.UNPACK_FLIP_Y_WEBGL,t.flipY),Fe.pixelStorei(Fe.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultiplyAlpha),Fe.pixelStorei(Fe.UNPACK_ALIGNMENT,t.unpackAlignment);var g=Fe.getParameter(Fe.UNPACK_ROW_LENGTH),y=Fe.getParameter(Fe.UNPACK_IMAGE_HEIGHT),b=Fe.getParameter(Fe.UNPACK_SKIP_PIXELS),x=Fe.getParameter(Fe.UNPACK_SKIP_ROWS),_=Fe.getParameter(Fe.UNPACK_SKIP_IMAGES);Fe.pixelStorei(Fe.UNPACK_ROW_LENGTH,p.width),Fe.pixelStorei(Fe.UNPACK_IMAGE_HEIGHT,p.height),Fe.pixelStorei(Fe.UNPACK_SKIP_PIXELS,a),Fe.pixelStorei(Fe.UNPACK_SKIP_ROWS,o),Fe.pixelStorei(Fe.UNPACK_SKIP_IMAGES,s);var w=e.isDataArrayTexture||e.isData3DTexture,S=t.isDataArrayTexture||t.isData3DTexture;if(e.isRenderTargetTexture||e.isDepthTexture){var M=Ae.get(e),k=Ae.get(t),T=Ae.get(M.__renderTarget),E=Ae.get(k.__renderTarget);fe.bindFramebuffer(Fe.READ_FRAMEBUFFER,T.__webglFramebuffer),fe.bindFramebuffer(Fe.DRAW_FRAMEBUFFER,E.__webglFramebuffer);for(var C=0;C<i;C++)w&&Fe.framebufferTextureLayer(Fe.READ_FRAMEBUFFER,Fe.COLOR_ATTACHMENT0,Ae.get(e).__webglTexture,f,s+C),e.isDepthTexture?(S&&Fe.framebufferTextureLayer(Fe.DRAW_FRAMEBUFFER,Fe.COLOR_ATTACHMENT0,Ae.get(t).__webglTexture,f,c+C),Fe.blitFramebuffer(a,o,n,r,u,l,n,r,Fe.DEPTH_BUFFER_BIT,Fe.NEAREST)):S?Fe.copyTexSubImage3D(A,f,u,l,c+C,a,o,n,r):Fe.copyTexSubImage2D(A,f,u,l,c+C,a,o,n,r);fe.bindFramebuffer(Fe.READ_FRAMEBUFFER,null),fe.bindFramebuffer(Fe.DRAW_FRAMEBUFFER,null)}else S?e.isDataTexture||e.isData3DTexture?Fe.texSubImage3D(A,f,u,l,c,n,r,i,v,m,p.data):t.isCompressedArrayTexture?Fe.compressedTexSubImage3D(A,f,u,l,c,n,r,i,v,p.data):Fe.texSubImage3D(A,f,u,l,c,n,r,i,v,m,p):e.isDataTexture?Fe.texSubImage2D(Fe.TEXTURE_2D,f,u,l,n,r,v,m,p.data):e.isCompressedTexture?Fe.compressedTexSubImage2D(Fe.TEXTURE_2D,f,u,l,p.width,p.height,v,p.data):Fe.texSubImage2D(Fe.TEXTURE_2D,f,u,l,n,r,v,m,p);Fe.pixelStorei(Fe.UNPACK_ROW_LENGTH,g),Fe.pixelStorei(Fe.UNPACK_IMAGE_HEIGHT,y),Fe.pixelStorei(Fe.UNPACK_SKIP_PIXELS,b),Fe.pixelStorei(Fe.UNPACK_SKIP_ROWS,x),Fe.pixelStorei(Fe.UNPACK_SKIP_IMAGES,_),0===f&&t.generateMipmaps&&Fe.generateMipmap(A),fe.unbindTexture()},this.copyTextureToTexture3D=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;return!0!==e.isTexture&&(fi("WebGLRenderer: copyTextureToTexture3D function signature has changed."),n=arguments[0]||null,r=arguments[1]||null,e=arguments[2],t=arguments[3],i=arguments[4]||0),fi('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(e,t,n,r,i)},this.initRenderTarget=function(e){void 0===Ae.get(e).__webglFramebuffer&&ve.setupRenderTarget(e)},this.initTexture=function(e){e.isCubeTexture?ve.setTextureCube(e,0):e.isData3DTexture?ve.setTexture3D(e,0):e.isDataArrayTexture||e.isCompressedArrayTexture?ve.setTexture2DArray(e,0):ve.setTexture2D(e,0),fe.unbindTexture()},this.resetState=function(){N=0,I=0,D=null,fe.reset(),Le.reset()},"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}return W(e,[{key:"coordinateSystem",get:function(){return Vr}},{key:"outputColorSpace",get:function(){return this._outputColorSpace},set:function(e){this._outputColorSpace=e;var t=this.getContext();t.drawingBufferColorspace=mi._getDrawingBufferColorSpace(e),t.unpackColorSpace=mi._getUnpackColorSpace()}}]),e}(),fc=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:25e-5;V(this,e),this.isFogExp2=!0,this.name="",this.color=new uo(t),this.density=n}return W(e,[{key:"clone",value:function(){return new e(this.color,this.density)}},{key:"toJSON",value:function(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}]),e}(),pc=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;V(this,e),this.isFog=!0,this.name="",this.color=new uo(t),this.near=n,this.far=r}return W(e,[{key:"clone",value:function(){return new e(this.color,this.near,this.far)}},{key:"toJSON",value:function(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}]),e}(),Ac=function(e){Y(n,e);var t=$(n);function n(){var e;return V(this,n),(e=t.call(this)).isScene=!0,e.type="Scene",e.background=null,e.environment=null,e.fog=null,e.backgroundBlurriness=0,e.backgroundIntensity=1,e.backgroundRotation=new ka,e.environmentIntensity=1,e.environmentRotation=new ka,e.overrideMaterial=null,"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:K(e)})),e}return W(n,[{key:"copy",value:function(e,t){return oe(Q(n.prototype),"copy",this).call(this,e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}},{key:"toJSON",value:function(e){var t=oe(Q(n.prototype),"toJSON",this).call(this,e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),1!==this.environmentIntensity&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}]),n}(Ha),vc=function(){function e(t,n){V(this,e),this.isInterleavedBuffer=!0,this.array=t,this.stride=n,this.count=void 0!==t?t.length/n:0,this.usage=Nr,this.updateRanges=[],this.version=0,this.uuid=Kr()}return W(e,[{key:"onUploadCallback",value:function(){}},{key:"needsUpdate",set:function(e){!0===e&&this.version++}},{key:"setUsage",value:function(e){return this.usage=e,this}},{key:"addUpdateRange",value:function(e,t){this.updateRanges.push({start:e,count:t})}},{key:"clearUpdateRanges",value:function(){this.updateRanges.length=0}},{key:"copy",value:function(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}},{key:"copyAt",value:function(e,t,n){e*=this.stride,n*=t.stride;for(var r=0,i=this.stride;r<i;r++)this.array[e+r]=t.array[n+r];return this}},{key:"set",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(e,t),this}},{key:"clone",value:function(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Kr()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);var t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}},{key:"onUpload",value:function(e){return this.onUploadCallback=e,this}},{key:"toJSON",value:function(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Kr()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}]),e}(),mc=new zi,gc=function(){function e(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];V(this,e),this.isInterleavedBufferAttribute=!0,this.name="",this.data=t,this.itemSize=n,this.offset=r,this.normalized=i}return W(e,[{key:"count",get:function(){return this.data.count}},{key:"array",get:function(){return this.data.array}},{key:"needsUpdate",set:function(e){this.data.needsUpdate=e}},{key:"applyMatrix4",value:function(e){for(var t=0,n=this.data.count;t<n;t++)mc.fromBufferAttribute(this,t),mc.applyMatrix4(e),this.setXYZ(t,mc.x,mc.y,mc.z);return this}},{key:"applyNormalMatrix",value:function(e){for(var t=0,n=this.count;t<n;t++)mc.fromBufferAttribute(this,t),mc.applyNormalMatrix(e),this.setXYZ(t,mc.x,mc.y,mc.z);return this}},{key:"transformDirection",value:function(e){for(var t=0,n=this.count;t<n;t++)mc.fromBufferAttribute(this,t),mc.transformDirection(e),this.setXYZ(t,mc.x,mc.y,mc.z);return this}},{key:"getComponent",value:function(e,t){var n=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(n=ti(n,this.array)),n}},{key:"setComponent",value:function(e,t,n){return this.normalized&&(n=ni(n,this.array)),this.data.array[e*this.data.stride+this.offset+t]=n,this}},{key:"setX",value:function(e,t){return this.normalized&&(t=ni(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}},{key:"setY",value:function(e,t){return this.normalized&&(t=ni(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}},{key:"setZ",value:function(e,t){return this.normalized&&(t=ni(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}},{key:"setW",value:function(e,t){return this.normalized&&(t=ni(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}},{key:"getX",value:function(e){var t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=ti(t,this.array)),t}},{key:"getY",value:function(e){var t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=ti(t,this.array)),t}},{key:"getZ",value:function(e){var t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=ti(t,this.array)),t}},{key:"getW",value:function(e){var t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=ti(t,this.array)),t}},{key:"setXY",value:function(e,t,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=ni(t,this.array),n=ni(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this}},{key:"setXYZ",value:function(e,t,n,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=ni(t,this.array),n=ni(n,this.array),r=ni(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this}},{key:"setXYZW",value:function(e,t,n,r,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=ni(t,this.array),n=ni(n,this.array),r=ni(r,this.array),i=ni(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=i,this}},{key:"clone",value:function(t){if(void 0===t){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");for(var n=[],r=0;r<this.count;r++)for(var i=r*this.data.stride+this.offset,a=0;a<this.itemSize;a++)n.push(this.data.array[i+a]);return new xo(new this.array.constructor(n),this.itemSize,this.normalized)}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new e(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}},{key:"toJSON",value:function(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");for(var t=[],n=0;n<this.count;n++)for(var r=n*this.data.stride+this.offset,i=0;i<this.itemSize;i++)t.push(this.data.array[r+i]);return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}]),e}(),yc=function(e){Y(n,e);var t=$(n);function n(e){var r;return V(this,n),(r=t.call(this)).isSpriteMaterial=!0,r.color=new uo(16777215),r.map=null,r.alphaMap=null,r.rotation=0,r.sizeAttenuation=!0,r.transparent=!0,r.fog=!0,r.setValues(e),r}return W(n,[{key:"copy",value:function(e){return oe(Q(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}],[{key:"type",get:function(){return"SpriteMaterial"}}]),n}(ho),bc=new zi,xc=new zi,_c=new zi,wc=new ii,Sc=new ii,Mc=new va,kc=new zi,Tc=new zi,Ec=new zi,Cc=new ii,Rc=new ii,Bc=new ii,Pc=function(e){Y(n,e);var t=$(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new yc;if(V(this,n),(e=t.call(this)).isSprite=!0,e.type="Sprite",void 0===hc){hc=new Fo;var i=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),a=new vc(i,5);hc.setIndex([0,1,2,0,2,3]),hc.setAttribute("position",new gc(a,3,0,!1)),hc.setAttribute("uv",new gc(a,2,3,!1))}return e.geometry=hc,e.material=r,e.center=new ii(.5,.5),e}return W(n,[{key:"raycast",value:function(e,t){null===e.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),xc.setFromMatrixScale(this.matrixWorld),Mc.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),_c.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&xc.multiplyScalar(-_c.z);var n,r,i=this.material.rotation;0!==i&&(r=Math.cos(i),n=Math.sin(i));var a=this.center;Nc(kc.set(-.5,-.5,0),_c,a,xc,n,r),Nc(Tc.set(.5,-.5,0),_c,a,xc,n,r),Nc(Ec.set(.5,.5,0),_c,a,xc,n,r),Cc.set(0,0),Rc.set(1,0),Bc.set(1,1);var o=e.ray.intersectTriangle(kc,Tc,Ec,!1,bc);if(null!==o||(Nc(Tc.set(-.5,.5,0),_c,a,xc,n,r),Rc.set(0,1),null!==(o=e.ray.intersectTriangle(kc,Ec,Tc,!1,bc)))){var s=e.ray.origin.distanceTo(bc);s<e.near||s>e.far||t.push({distance:s,point:bc.clone(),uv:ro.getInterpolation(bc,kc,Tc,Ec,Cc,Rc,Bc,new ii),face:null,object:this})}}},{key:"copy",value:function(e,t){return oe(Q(n.prototype),"copy",this).call(this,e,t),void 0!==e.center&&this.center.copy(e.center),this.material=e.material,this}}]),n}(Ha);function Nc(e,t,n,r,i,a){wc.subVectors(e,n).addScalar(.5).multiply(r),void 0!==i?(Sc.x=a*wc.x-i*wc.y,Sc.y=i*wc.x+a*wc.y):Sc.copy(wc),e.copy(t),e.x+=Sc.x,e.y+=Sc.y,e.applyMatrix4(Mc)}var Ic=new zi,Dc=new zi,Lc=function(e){Y(n,e);var t=$(n);function n(){var e;return V(this,n),(e=t.call(this))._currentLevel=0,e.type="LOD",Object.defineProperties(K(e),{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),e.autoUpdate=!0,e}return W(n,[{key:"copy",value:function(e){oe(Q(n.prototype),"copy",this).call(this,e,!1);for(var t=e.levels,r=0,i=t.length;r<i;r++){var a=t[r];this.addLevel(a.object.clone(),a.distance,a.hysteresis)}return this.autoUpdate=e.autoUpdate,this}},{key:"addLevel",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;t=Math.abs(t);var r,i=this.levels;for(r=0;r<i.length&&!(t<i[r].distance);r++);return i.splice(r,0,{distance:t,hysteresis:n,object:e}),this.add(e),this}},{key:"removeLevel",value:function(e){for(var t=this.levels,n=0;n<t.length;n++)if(t[n].distance===e){var r=t.splice(n,1);return this.remove(r[0].object),!0}return!1}},{key:"getCurrentLevel",value:function(){return this._currentLevel}},{key:"getObjectForDistance",value:function(e){var t=this.levels;if(t.length>0){var n,r;for(n=1,r=t.length;n<r;n++){var i=t[n].distance;if(t[n].object.visible&&(i-=i*t[n].hysteresis),e<i)break}return t[n-1].object}return null}},{key:"raycast",value:function(e,t){if(this.levels.length>0){Ic.setFromMatrixPosition(this.matrixWorld);var n=e.ray.origin.distanceTo(Ic);this.getObjectForDistance(n).raycast(e,t)}}},{key:"update",value:function(e){var t=this.levels;if(t.length>1){Ic.setFromMatrixPosition(e.matrixWorld),Dc.setFromMatrixPosition(this.matrixWorld);var n,r,i=Ic.distanceTo(Dc)/e.zoom;for(t[0].object.visible=!0,n=1,r=t.length;n<r;n++){var a=t[n].distance;if(t[n].object.visible&&(a-=a*t[n].hysteresis),!(i>=a))break;t[n-1].object.visible=!1,t[n].object.visible=!0}for(this._currentLevel=n-1;n<r;n++)t[n].object.visible=!1}}},{key:"toJSON",value:function(e){var t=oe(Q(n.prototype),"toJSON",this).call(this,e);!1===this.autoUpdate&&(t.object.autoUpdate=!1),t.object.levels=[];for(var r=this.levels,i=0,a=r.length;i<a;i++){var o=r[i];t.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return t}}]),n}(Ha),Oc=new zi,Fc=new Pi,Uc=new Pi,zc=new zi,Gc=new va,qc=new zi,Hc=new sa,Vc=new va,jc=new Aa,Wc=function(e){Y(n,e);var t=$(n);function n(e,r){var i;return V(this,n),(i=t.call(this,e,r)).isSkinnedMesh=!0,i.type="SkinnedMesh",i.bindMode=ft,i.bindMatrix=new va,i.bindMatrixInverse=new va,i.boundingBox=null,i.boundingSphere=null,i}return W(n,[{key:"computeBoundingBox",value:function(){var e=this.geometry;null===this.boundingBox&&(this.boundingBox=new Hi),this.boundingBox.makeEmpty();for(var t=e.getAttribute("position"),n=0;n<t.count;n++)this.getVertexPosition(n,qc),this.boundingBox.expandByPoint(qc)}},{key:"computeBoundingSphere",value:function(){var e=this.geometry;null===this.boundingSphere&&(this.boundingSphere=new sa),this.boundingSphere.makeEmpty();for(var t=e.getAttribute("position"),n=0;n<t.count;n++)this.getVertexPosition(n,qc),this.boundingSphere.expandByPoint(qc)}},{key:"copy",value:function(e,t){return oe(Q(n.prototype),"copy",this).call(this,e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this}},{key:"raycast",value:function(e,t){var n=this.material,r=this.matrixWorld;void 0!==n&&(null===this.boundingSphere&&this.computeBoundingSphere(),Hc.copy(this.boundingSphere),Hc.applyMatrix4(r),!1!==e.ray.intersectsSphere(Hc)&&(Vc.copy(r).invert(),jc.copy(e.ray).applyMatrix4(Vc),null!==this.boundingBox&&!1===jc.intersectsBox(this.boundingBox)||this._computeIntersections(e,t,jc)))}},{key:"getVertexPosition",value:function(e,t){return oe(Q(n.prototype),"getVertexPosition",this).call(this,e,t),this.applyBoneTransform(e,t),t}},{key:"bind",value:function(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}},{key:"pose",value:function(){this.skeleton.pose()}},{key:"normalizeSkinWeights",value:function(){for(var e=new Pi,t=this.geometry.attributes.skinWeight,n=0,r=t.count;n<r;n++){e.fromBufferAttribute(t,n);var i=1/e.manhattanLength();i!==1/0?e.multiplyScalar(i):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}},{key:"updateMatrixWorld",value:function(e){oe(Q(n.prototype),"updateMatrixWorld",this).call(this,e),this.bindMode===ft?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===pt?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}},{key:"applyBoneTransform",value:function(e,t){var n=this.skeleton,r=this.geometry;Fc.fromBufferAttribute(r.attributes.skinIndex,e),Uc.fromBufferAttribute(r.attributes.skinWeight,e),Oc.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(var i=0;i<4;i++){var a=Uc.getComponent(i);if(0!==a){var o=Fc.getComponent(i);Gc.multiplyMatrices(n.bones[o].matrixWorld,n.boneInverses[o]),t.addScaledVector(zc.copy(Oc).applyMatrix4(Gc),a)}}return t.applyMatrix4(this.bindMatrixInverse)}}]),n}(Jo),Xc=function(e){Y(n,e);var t=$(n);function n(){var e;return V(this,n),(e=t.call(this)).isBone=!0,e.type="Bone",e}return W(n)}(Ha),Yc=function(e){Y(n,e);var t=$(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0,u=arguments.length>5?arguments[5]:void 0,l=arguments.length>6?arguments[6]:void 0,c=arguments.length>7?arguments[7]:void 0,h=arguments.length>8&&void 0!==arguments[8]?arguments[8]:St,d=arguments.length>9&&void 0!==arguments[9]?arguments[9]:St,f=arguments.length>10?arguments[10]:void 0,p=arguments.length>11?arguments[11]:void 0;return V(this,n),(e=t.call(this,null,u,l,c,h,d,o,s,f,p)).isDataTexture=!0,e.image={data:r,width:i,height:a},e.generateMipmaps=!1,e.flipY=!1,e.unpackAlignment=1,e}return W(n)}(Bi),Qc=new va,Jc=new va,Kc=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];V(this,e),this.uuid=Kr(),this.bones=t.slice(0),this.boneInverses=n,this.boneMatrices=null,this.boneTexture=null,this.init()}return W(e,[{key:"init",value:function(){var e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(16*e.length),0===t.length)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(var n=0,r=this.bones.length;n<r;n++)this.boneInverses.push(new va)}}},{key:"calculateInverses",value:function(){this.boneInverses.length=0;for(var e=0,t=this.bones.length;e<t;e++){var n=new va;this.bones[e]&&n.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(n)}}},{key:"pose",value:function(){for(var e=0,t=this.bones.length;e<t;e++){var n=this.bones[e];n&&n.matrixWorld.copy(this.boneInverses[e]).invert()}for(var r=0,i=this.bones.length;r<i;r++){var a=this.bones[r];a&&(a.parent&&a.parent.isBone?(a.matrix.copy(a.parent.matrixWorld).invert(),a.matrix.multiply(a.matrixWorld)):a.matrix.copy(a.matrixWorld),a.matrix.decompose(a.position,a.quaternion,a.scale))}}},{key:"update",value:function(){for(var e=this.bones,t=this.boneInverses,n=this.boneMatrices,r=this.boneTexture,i=0,a=e.length;i<a;i++){var o=e[i]?e[i].matrixWorld:Jc;Qc.multiplyMatrices(o,t[i]),Qc.toArray(n,16*i)}null!==r&&(r.needsUpdate=!0)}},{key:"clone",value:function(){return new e(this.bones,this.boneInverses)}},{key:"computeBoneTexture",value:function(){var e=Math.sqrt(4*this.bones.length);e=4*Math.ceil(e/4),e=Math.max(e,4);var t=new Float32Array(e*e*4);t.set(this.boneMatrices);var n=new Yc(t,e,e,Yt,zt);return n.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=n,this}},{key:"getBoneByName",value:function(e){for(var t=0,n=this.bones.length;t<n;t++){var r=this.bones[t];if(r.name===e)return r}}},{key:"dispose",value:function(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}},{key:"fromJSON",value:function(e,t){this.uuid=e.uuid;for(var n=0,r=e.bones.length;n<r;n++){var i=e.bones[n],a=t[i];void 0===a&&(console.warn("THREE.Skeleton: No bone found with UUID:",i),a=new Xc),this.bones.push(a),this.boneInverses.push((new va).fromArray(e.boneInverses[n]))}return this.init(),this}},{key:"toJSON",value:function(){var e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;for(var t=this.bones,n=this.boneInverses,r=0,i=t.length;r<i;r++){var a=t[r];e.bones.push(a.uuid);var o=n[r];e.boneInverses.push(o.toArray())}return e}}]),e}(),Zc=function(e){Y(n,e);var t=$(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return V(this,n),(a=t.call(this,e,r,i)).isInstancedBufferAttribute=!0,a.meshPerAttribute=o,a}return W(n,[{key:"copy",value:function(e){return oe(Q(n.prototype),"copy",this).call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}},{key:"toJSON",value:function(){var e=oe(Q(n.prototype),"toJSON",this).call(this);return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}]),n}(xo),$c=new va,eh=new va,th=[],nh=new Hi,rh=new va,ih=new Jo,ah=new sa,oh=function(e){Y(n,e);var t=$(n);function n(e,r,i){var a;V(this,n),(a=t.call(this,e,r)).isInstancedMesh=!0,a.instanceMatrix=new Zc(new Float32Array(16*i),16),a.instanceColor=null,a.morphTexture=null,a.count=i,a.boundingBox=null,a.boundingSphere=null;for(var o=0;o<i;o++)a.setMatrixAt(o,rh);return a}return W(n,[{key:"computeBoundingBox",value:function(){var e=this.geometry,t=this.count;null===this.boundingBox&&(this.boundingBox=new Hi),null===e.boundingBox&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(var n=0;n<t;n++)this.getMatrixAt(n,$c),nh.copy(e.boundingBox).applyMatrix4($c),this.boundingBox.union(nh)}},{key:"computeBoundingSphere",value:function(){var e=this.geometry,t=this.count;null===this.boundingSphere&&(this.boundingSphere=new sa),null===e.boundingSphere&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(var n=0;n<t;n++)this.getMatrixAt(n,$c),ah.copy(e.boundingSphere).applyMatrix4($c),this.boundingSphere.union(ah)}},{key:"copy",value:function(e,t){return oe(Q(n.prototype),"copy",this).call(this,e,t),this.instanceMatrix.copy(e.instanceMatrix),null!==e.morphTexture&&(this.morphTexture=e.morphTexture.clone()),null!==e.instanceColor&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this}},{key:"getColorAt",value:function(e,t){t.fromArray(this.instanceColor.array,3*e)}},{key:"getMatrixAt",value:function(e,t){t.fromArray(this.instanceMatrix.array,16*e)}},{key:"getMorphAt",value:function(e,t){for(var n=t.morphTargetInfluences,r=this.morphTexture.source.data.data,i=e*(n.length+1)+1,a=0;a<n.length;a++)n[a]=r[i+a]}},{key:"raycast",value:function(e,t){var n=this.matrixWorld,r=this.count;if(ih.geometry=this.geometry,ih.material=this.material,void 0!==ih.material&&(null===this.boundingSphere&&this.computeBoundingSphere(),ah.copy(this.boundingSphere),ah.applyMatrix4(n),!1!==e.ray.intersectsSphere(ah)))for(var i=0;i<r;i++){this.getMatrixAt(i,$c),eh.multiplyMatrices(n,$c),ih.matrixWorld=eh,ih.raycast(e,th);for(var a=0,o=th.length;a<o;a++){var s=th[a];s.instanceId=i,s.object=this,t.push(s)}th.length=0}}},{key:"setColorAt",value:function(e,t){null===this.instanceColor&&(this.instanceColor=new Zc(new Float32Array(3*this.instanceMatrix.count).fill(1),3)),t.toArray(this.instanceColor.array,3*e)}},{key:"setMatrixAt",value:function(e,t){t.toArray(this.instanceMatrix.array,16*e)}},{key:"setMorphAt",value:function(e,t){var n=t.morphTargetInfluences,r=n.length+1;null===this.morphTexture&&(this.morphTexture=new Yc(new Float32Array(r*this.count),r,this.count,$t,zt));for(var i=this.morphTexture.source.data.data,a=0,o=0;o<n.length;o++)a+=n[o];var s=this.geometry.morphTargetsRelative?1:1-a,u=r*e;i[u]=s,i.set(n,u+1)}},{key:"updateMorphTargets",value:function(){}},{key:"dispose",value:function(){return this.dispatchEvent({type:"dispose"}),null!==this.morphTexture&&(this.morphTexture.dispose(),this.morphTexture=null),this}}]),n}(Jo);function sh(e,t){return e-t}function uh(e,t){return e.z-t.z}function lh(e,t){return t.z-e.z}var ch=function(){function e(){V(this,e),this.index=0,this.pool=[],this.list=[]}return W(e,[{key:"push",value:function(e,t,n,r){var i=this.pool,a=this.list;this.index>=i.length&&i.push({start:-1,count:-1,z:-1,index:-1});var o=i[this.index];a.push(o),this.index++,o.start=e,o.count=t,o.z=n,o.index=r}},{key:"reset",value:function(){this.list.length=0,this.index=0}}]),e}(),hh=new va,dh=new uo(1,1,1),fh=new ys,ph=new Hi,Ah=new sa,vh=new zi,mh=new zi,gh=new zi,yh=new ch,bh=new Jo,xh=[];function _h(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=t.itemSize;if(e.isInterleavedBufferAttribute||e.array.constructor!==t.array.constructor)for(var i=e.count,a=0;a<i;a++)for(var o=0;o<r;o++)t.setComponent(a+n,o,e.getComponent(a,o));else t.array.set(e.array,n*r);t.needsUpdate=!0}function wh(e,t){if(e.constructor!==t.constructor)for(var n=Math.min(e.length,t.length),r=0;r<n;r++)t[r]=e[r];else{var i=Math.min(e.length,t.length);t.set(new e.constructor(e.buffer,0,i))}}var Sh=function(e){Y(n,e);var t=$(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2*r,o=arguments.length>3?arguments[3]:void 0;return V(this,n),(i=t.call(this,new Fo,o)).isBatchedMesh=!0,i.perObjectFrustumCulled=!0,i.sortObjects=!0,i.boundingBox=null,i.boundingSphere=null,i.customSort=null,i._instanceInfo=[],i._geometryInfo=[],i._availableInstanceIds=[],i._availableGeometryIds=[],i._nextIndexStart=0,i._nextVertexStart=0,i._geometryCount=0,i._visibilityChanged=!0,i._geometryInitialized=!1,i._maxInstanceCount=e,i._maxVertexCount=r,i._maxIndexCount=a,i._multiDrawCounts=new Int32Array(e),i._multiDrawStarts=new Int32Array(e),i._multiDrawCount=0,i._multiDrawInstances=null,i._matricesTexture=null,i._indirectTexture=null,i._colorsTexture=null,i._initMatricesTexture(),i._initIndirectTexture(),i}return W(n,[{key:"maxInstanceCount",get:function(){return this._maxInstanceCount}},{key:"instanceCount",get:function(){return this._instanceInfo.length-this._availableInstanceIds.length}},{key:"unusedVertexCount",get:function(){return this._maxVertexCount-this._nextVertexStart}},{key:"unusedIndexCount",get:function(){return this._maxIndexCount-this._nextIndexStart}},{key:"_initMatricesTexture",value:function(){var e=Math.sqrt(4*this._maxInstanceCount);e=4*Math.ceil(e/4),e=Math.max(e,4);var t=new Float32Array(e*e*4),n=new Yc(t,e,e,Yt,zt);this._matricesTexture=n}},{key:"_initIndirectTexture",value:function(){var e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);var t=new Uint32Array(e*e),n=new Yc(t,e,e,en,Ut);this._indirectTexture=n}},{key:"_initColorsTexture",value:function(){var e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);var t=new Float32Array(e*e*4).fill(1),n=new Yc(t,e,e,Yt,zt);n.colorSpace=mi.workingColorSpace,this._colorsTexture=n}},{key:"_initializeGeometry",value:function(e){var t=this.geometry,n=this._maxVertexCount,r=this._maxIndexCount;if(!1===this._geometryInitialized){for(var i in e.attributes){var a=e.getAttribute(i),o=a.array,s=a.itemSize,u=a.normalized,l=new o.constructor(n*s),c=new xo(l,s,u);t.setAttribute(i,c)}if(null!==e.getIndex()){var h=n>65535?new Uint32Array(r):new Uint16Array(r);t.setIndex(new xo(h,1))}this._geometryInitialized=!0}}},{key:"_validateGeometry",value:function(e){var t=this.geometry;if(Boolean(e.getIndex())!==Boolean(t.getIndex()))throw new Error('BatchedMesh: All geometries must consistently have "index".');for(var n in t.attributes){if(!e.hasAttribute(n))throw new Error('BatchedMesh: Added geometry missing "'.concat(n,'". All geometries must have consistent attributes.'));var r=e.getAttribute(n),i=t.getAttribute(n);if(r.itemSize!==i.itemSize||r.normalized!==i.normalized)throw new Error("BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}},{key:"setCustomSort",value:function(e){return this.customSort=e,this}},{key:"computeBoundingBox",value:function(){null===this.boundingBox&&(this.boundingBox=new Hi);var e=this.boundingBox,t=this._instanceInfo;e.makeEmpty();for(var n=0,r=t.length;n<r;n++)if(!1!==t[n].active){var i=t[n].geometryIndex;this.getMatrixAt(n,hh),this.getBoundingBoxAt(i,ph).applyMatrix4(hh),e.union(ph)}}},{key:"computeBoundingSphere",value:function(){null===this.boundingSphere&&(this.boundingSphere=new sa);var e=this.boundingSphere,t=this._instanceInfo;e.makeEmpty();for(var n=0,r=t.length;n<r;n++)if(!1!==t[n].active){var i=t[n].geometryIndex;this.getMatrixAt(n,hh),this.getBoundingSphereAt(i,Ah).applyMatrix4(hh),e.union(Ah)}}},{key:"addInstance",value:function(e){if(this._instanceInfo.length>=this.maxInstanceCount&&0===this._availableInstanceIds.length)throw new Error("BatchedMesh: Maximum item count reached.");var t={visible:!0,active:!0,geometryIndex:e},n=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(sh),n=this._availableInstanceIds.shift(),this._instanceInfo[n]=t):(n=this._instanceInfo.length,this._instanceInfo.push(t));var r=this._matricesTexture;hh.identity().toArray(r.image.data,16*n),r.needsUpdate=!0;var i=this._colorsTexture;return i&&(dh.toArray(i.image.data,4*n),i.needsUpdate=!0),this._visibilityChanged=!0,n}},{key:"addGeometry",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;this._initializeGeometry(e),this._validateGeometry(e);var r={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},i=this._geometryInfo;r.vertexStart=this._nextVertexStart,r.reservedVertexCount=-1===t?e.getAttribute("position").count:t;var a,o=e.getIndex(),s=null!==o;if(s&&(r.indexStart=this._nextIndexStart,r.reservedIndexCount=-1===n?o.count:n),-1!==r.indexStart&&r.indexStart+r.reservedIndexCount>this._maxIndexCount||r.vertexStart+r.reservedVertexCount>this._maxVertexCount)throw new Error("BatchedMesh: Reserved space request exceeds the maximum buffer size.");return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(sh),i[a=this._availableGeometryIds.shift()]=r):(a=this._geometryCount,this._geometryCount++,i.push(r)),this.setGeometryAt(a,e),this._nextIndexStart=r.indexStart+r.reservedIndexCount,this._nextVertexStart=r.vertexStart+r.reservedVertexCount,a}},{key:"setGeometryAt",value:function(e,t){if(e>=this._geometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);var n=this.geometry,r=null!==n.getIndex(),i=n.getIndex(),a=t.getIndex(),o=this._geometryInfo[e];if(r&&a.count>o.reservedIndexCount||t.attributes.position.count>o.reservedVertexCount)throw new Error("BatchedMesh: Reserved space not large enough for provided geometry.");var s=o.vertexStart,u=o.reservedVertexCount;for(var l in o.vertexCount=t.getAttribute("position").count,n.attributes){var c=t.getAttribute(l),h=n.getAttribute(l);_h(c,h,s);for(var d=c.itemSize,f=c.count,p=u;f<p;f++)for(var A=s+f,v=0;v<d;v++)h.setComponent(A,v,0);h.needsUpdate=!0,h.addUpdateRange(s*d,u*d)}if(r){var m=o.indexStart,g=o.reservedIndexCount;o.indexCount=t.getIndex().count;for(var y=0;y<a.count;y++)i.setX(m+y,s+a.getX(y));for(var b=a.count,x=g;b<x;b++)i.setX(m+b,s);i.needsUpdate=!0,i.addUpdateRange(m,o.reservedIndexCount)}return o.start=r?o.indexStart:o.vertexStart,o.count=r?o.indexCount:o.vertexCount,o.boundingBox=null,null!==t.boundingBox&&(o.boundingBox=t.boundingBox.clone()),o.boundingSphere=null,null!==t.boundingSphere&&(o.boundingSphere=t.boundingSphere.clone()),this._visibilityChanged=!0,e}},{key:"deleteGeometry",value:function(e){var t=this._geometryInfo;if(e>=t.length||!1===t[e].active)return this;for(var n=this._instanceInfo,r=0,i=n.length;r<i;r++)n[r].geometryIndex===e&&this.deleteInstance(r);return t[e].active=!1,this._availableGeometryIds.push(e),this._visibilityChanged=!0,this}},{key:"deleteInstance",value:function(e){var t=this._instanceInfo;return e>=t.length||!1===t[e].active||(t[e].active=!1,this._availableInstanceIds.push(e),this._visibilityChanged=!0),this}},{key:"optimize",value:function(){for(var e=0,t=0,n=this._geometryInfo,r=n.map((function(e,t){return t})).sort((function(e,t){return n[e].vertexStart-n[t].vertexStart})),i=this.geometry,a=0,o=n.length;a<o;a++){var s=r[a],u=n[s];if(!1!==u.active){if(null!==i.index){if(u.indexStart!==t){for(var l=u.indexStart,c=u.vertexStart,h=u.reservedIndexCount,d=i.index,f=d.array,p=e-c,A=l;A<l+h;A++)f[A]=f[A]+p;d.array.copyWithin(t,l,l+h),d.addUpdateRange(t,h),u.indexStart=t}t+=u.reservedIndexCount}if(u.vertexStart!==e){var v=u.vertexStart,m=u.reservedVertexCount,g=i.attributes;for(var y in g){var b=g[y],x=b.array,_=b.itemSize;x.copyWithin(e*_,v*_,(v+m)*_),b.addUpdateRange(e*_,m*_)}u.vertexStart=e}e+=u.reservedVertexCount,u.start=i.index?u.indexStart:u.vertexStart,this._nextIndexStart=i.index?u.indexStart+u.reservedIndexCount:0,this._nextVertexStart=u.vertexStart+u.reservedVertexCount}}return this}},{key:"getBoundingBoxAt",value:function(e,t){if(e>=this._geometryCount)return null;var n=this.geometry,r=this._geometryInfo[e];if(null===r.boundingBox){for(var i=new Hi,a=n.index,o=n.attributes.position,s=r.start,u=r.start+r.count;s<u;s++){var l=s;a&&(l=a.getX(l)),i.expandByPoint(vh.fromBufferAttribute(o,l))}r.boundingBox=i}return t.copy(r.boundingBox),t}},{key:"getBoundingSphereAt",value:function(e,t){if(e>=this._geometryCount)return null;var n=this.geometry,r=this._geometryInfo[e];if(null===r.boundingSphere){var i=new sa;this.getBoundingBoxAt(e,ph),ph.getCenter(i.center);for(var a=n.index,o=n.attributes.position,s=0,u=r.start,l=r.start+r.count;u<l;u++){var c=u;a&&(c=a.getX(c)),vh.fromBufferAttribute(o,c),s=Math.max(s,i.center.distanceToSquared(vh))}i.radius=Math.sqrt(s),r.boundingSphere=i}return t.copy(r.boundingSphere),t}},{key:"setMatrixAt",value:function(e,t){var n=this._instanceInfo,r=this._matricesTexture,i=this._matricesTexture.image.data;return e>=n.length||!1===n[e].active||(t.toArray(i,16*e),r.needsUpdate=!0),this}},{key:"getMatrixAt",value:function(e,t){var n=this._instanceInfo,r=this._matricesTexture.image.data;return e>=n.length||!1===n[e].active?null:t.fromArray(r,16*e)}},{key:"setColorAt",value:function(e,t){null===this._colorsTexture&&this._initColorsTexture();var n=this._colorsTexture,r=this._colorsTexture.image.data,i=this._instanceInfo;return e>=i.length||!1===i[e].active||(t.toArray(r,4*e),n.needsUpdate=!0),this}},{key:"getColorAt",value:function(e,t){var n=this._colorsTexture.image.data,r=this._instanceInfo;return e>=r.length||!1===r[e].active?null:t.fromArray(n,4*e)}},{key:"setVisibleAt",value:function(e,t){var n=this._instanceInfo;return e>=n.length||!1===n[e].active||n[e].visible===t||(n[e].visible=t,this._visibilityChanged=!0),this}},{key:"getVisibleAt",value:function(e){var t=this._instanceInfo;return!(e>=t.length||!1===t[e].active)&&t[e].visible}},{key:"setGeometryIdAt",value:function(e,t){var n=this._instanceInfo,r=this._geometryInfo;return e>=n.length||!1===n[e].active||t>=r.length||!1===r[t].active?null:(n[e].geometryIndex=t,this)}},{key:"getGeometryIdAt",value:function(e){var t=this._instanceInfo;return e>=t.length||!1===t[e].active?-1:t[e].geometryIndex}},{key:"getGeometryRangeAt",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e<0||e>=this._geometryCount)return null;var n=this._geometryInfo[e];return t.vertexStart=n.vertexStart,t.vertexCount=n.vertexCount,t.reservedVertexCount=n.reservedVertexCount,t.indexStart=n.indexStart,t.indexCount=n.indexCount,t.reservedIndexCount=n.reservedIndexCount,t.start=n.start,t.count=n.count,t}},{key:"setInstanceCount",value:function(e){var t=this._availableInstanceIds,n=this._instanceInfo;for(t.sort(sh);t[t.length-1]===n.length;)n.pop(),t.pop();if(e<n.length)throw new Error("BatchedMesh: Instance ids outside the range ".concat(e," are being used. Cannot shrink instance count."));var r=new Int32Array(e),i=new Int32Array(e);wh(this._multiDrawCounts,r),wh(this._multiDrawStarts,i),this._multiDrawCounts=r,this._multiDrawStarts=i,this._maxInstanceCount=e;var a=this._indirectTexture,o=this._matricesTexture,s=this._colorsTexture;a.dispose(),this._initIndirectTexture(),wh(a.image.data,this._indirectTexture.image.data),o.dispose(),this._initMatricesTexture(),wh(o.image.data,this._matricesTexture.image.data),s&&(s.dispose(),this._initColorsTexture(),wh(s.image.data,this._colorsTexture.image.data))}},{key:"setGeometrySize",value:function(e,t){var n=q(this._geometryInfo).filter((function(e){return e.active})),r=Math.max.apply(Math,q(n.map((function(e){return e.vertexStart+e.reservedVertexCount}))));if(r>e)throw new Error("BatchedMesh: Geometry vertex values are being used outside the range ".concat(t,". Cannot shrink further."));if(this.geometry.index){var i=Math.max.apply(Math,q(n.map((function(e){return e.indexStart+e.reservedIndexCount}))));if(i>t)throw new Error("BatchedMesh: Geometry index values are being used outside the range ".concat(t,". Cannot shrink further."))}var a=this.geometry;a.dispose(),this._maxVertexCount=e,this._maxIndexCount=t,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new Fo,this._initializeGeometry(a));var o=this.geometry;for(var s in a.index&&wh(a.index.array,o.index.array),a.attributes)wh(a.attributes[s].array,o.attributes[s].array)}},{key:"raycast",value:function(e,t){var n=this._instanceInfo,r=this._geometryInfo,i=this.matrixWorld,a=this.geometry;bh.material=this.material,bh.geometry.index=a.index,bh.geometry.attributes=a.attributes,null===bh.geometry.boundingBox&&(bh.geometry.boundingBox=new Hi),null===bh.geometry.boundingSphere&&(bh.geometry.boundingSphere=new sa);for(var o=0,s=n.length;o<s;o++)if(n[o].visible&&n[o].active){var u=n[o].geometryIndex,l=r[u];bh.geometry.setDrawRange(l.start,l.count),this.getMatrixAt(o,bh.matrixWorld).premultiply(i),this.getBoundingBoxAt(u,bh.geometry.boundingBox),this.getBoundingSphereAt(u,bh.geometry.boundingSphere),bh.raycast(e,xh);for(var c=0,h=xh.length;c<h;c++){var d=xh[c];d.object=this,d.batchId=o,t.push(d)}xh.length=0}bh.material=null,bh.geometry.index=null,bh.geometry.attributes={},bh.geometry.setDrawRange(0,1/0)}},{key:"copy",value:function(e){return oe(Q(n.prototype),"copy",this).call(this,e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=null!==e.boundingBox?e.boundingBox.clone():null,this.boundingSphere=null!==e.boundingSphere?e.boundingSphere.clone():null,this._geometryInfo=e._geometryInfo.map((function(e){return b(b({},e),{},{boundingBox:null!==e.boundingBox?e.boundingBox.clone():null,boundingSphere:null!==e.boundingSphere?e.boundingSphere.clone():null})})),this._instanceInfo=e._instanceInfo.map((function(e){return b({},e)})),this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._geometryCount=e._geometryCount,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),null!==this._colorsTexture&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}},{key:"dispose",value:function(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,null!==this._colorsTexture&&(this._colorsTexture.dispose(),this._colorsTexture=null),this}},{key:"onBeforeRender",value:function(e,t,n,r,i){if(this._visibilityChanged||this.perObjectFrustumCulled||this.sortObjects){var a=r.getIndex(),o=null===a?1:a.array.BYTES_PER_ELEMENT,s=this._instanceInfo,u=this._multiDrawStarts,l=this._multiDrawCounts,c=this._geometryInfo,h=this.perObjectFrustumCulled,d=this._indirectTexture,f=d.image.data;h&&(hh.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse).multiply(this.matrixWorld),fh.setFromProjectionMatrix(hh,e.coordinateSystem));var p=0;if(this.sortObjects){hh.copy(this.matrixWorld).invert(),vh.setFromMatrixPosition(n.matrixWorld).applyMatrix4(hh),mh.set(0,0,-1).transformDirection(n.matrixWorld).transformDirection(hh);for(var A=0,v=s.length;A<v;A++)if(s[A].visible&&s[A].active){var m=s[A].geometryIndex;this.getMatrixAt(A,hh),this.getBoundingSphereAt(m,Ah).applyMatrix4(hh);var g=!1;if(h&&(g=!fh.intersectsSphere(Ah)),!g){var y=c[m],b=gh.subVectors(Ah.center,vh).dot(mh);yh.push(y.start,y.count,b,A)}}var x=yh.list,_=this.customSort;null===_?x.sort(i.transparent?lh:uh):_.call(this,x,n);for(var w=0,S=x.length;w<S;w++){var M=x[w];u[p]=M.start*o,l[p]=M.count,f[p]=M.index,p++}yh.reset()}else for(var k=0,T=s.length;k<T;k++)if(s[k].visible&&s[k].active){var E=s[k].geometryIndex,C=!1;if(h&&(this.getMatrixAt(k,hh),this.getBoundingSphereAt(E,Ah).applyMatrix4(hh),C=!fh.intersectsSphere(Ah)),!C){var R=c[E];u[p]=R.start*o,l[p]=R.count,f[p]=k,p++}}d.needsUpdate=!0,this._multiDrawCount=p,this._visibilityChanged=!1}}},{key:"onBeforeShadow",value:function(e,t,n,r,i,a){this.onBeforeRender(e,null,r,i,a)}}]),n}(Jo),Mh=function(e){Y(n,e);var t=$(n);function n(e){var r;return V(this,n),(r=t.call(this)).isLineBasicMaterial=!0,r.color=new uo(16777215),r.map=null,r.linewidth=1,r.linecap="round",r.linejoin="round",r.fog=!0,r.setValues(e),r}return W(n,[{key:"copy",value:function(e){return oe(Q(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}],[{key:"type",get:function(){return"LineBasicMaterial"}}]),n}(ho),kh=new zi,Th=new zi,Eh=new va,Ch=new Aa,Rh=new sa,Bh=new zi,Ph=new zi,Nh=function(e){Y(n,e);var t=$(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Fo,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Mh;return V(this,n),(e=t.call(this)).isLine=!0,e.type="Line",e.geometry=r,e.material=i,e.updateMorphTargets(),e}return W(n,[{key:"copy",value:function(e,t){return oe(Q(n.prototype),"copy",this).call(this,e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}},{key:"computeLineDistances",value:function(){var e=this.geometry;if(null===e.index){for(var t=e.attributes.position,n=[0],r=1,i=t.count;r<i;r++)kh.fromBufferAttribute(t,r-1),Th.fromBufferAttribute(t,r),n[r]=n[r-1],n[r]+=kh.distanceTo(Th);e.setAttribute("lineDistance",new Ro(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}},{key:"raycast",value:function(e,t){var n=this.geometry,r=this.matrixWorld,i=e.params.Line.threshold,a=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),Rh.copy(n.boundingSphere),Rh.applyMatrix4(r),Rh.radius+=i,!1!==e.ray.intersectsSphere(Rh)){Eh.copy(r).invert(),Ch.copy(e.ray).applyMatrix4(Eh);var o=i/((this.scale.x+this.scale.y+this.scale.z)/3),s=o*o,u=this.isLineSegments?2:1,l=n.index,c=n.attributes.position;if(null!==l){for(var h=Math.max(0,a.start),d=Math.min(l.count,a.start+a.count),f=h,p=d-1;f<p;f+=u){var A=l.getX(f),v=l.getX(f+1),m=Ih(this,e,Ch,s,A,v);m&&t.push(m)}if(this.isLineLoop){var g=l.getX(d-1),y=l.getX(h),b=Ih(this,e,Ch,s,g,y);b&&t.push(b)}}else{for(var x=Math.max(0,a.start),_=Math.min(c.count,a.start+a.count),w=x,S=_-1;w<S;w+=u){var M=Ih(this,e,Ch,s,w,w+1);M&&t.push(M)}if(this.isLineLoop){var k=Ih(this,e,Ch,s,_-1,x);k&&t.push(k)}}}}},{key:"updateMorphTargets",value:function(){var e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){var n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var r=0,i=n.length;r<i;r++){var a=n[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=r}}}}}]),n}(Ha);function Ih(e,t,n,r,i,a){var o=e.geometry.attributes.position;if(kh.fromBufferAttribute(o,i),Th.fromBufferAttribute(o,a),!(n.distanceSqToSegment(kh,Th,Bh,Ph)>r)){Bh.applyMatrix4(e.matrixWorld);var s=t.ray.origin.distanceTo(Bh);if(!(s<t.near||s>t.far))return{distance:s,point:Ph.clone().applyMatrix4(e.matrixWorld),index:i,face:null,faceIndex:null,barycoord:null,object:e}}}var Dh=new zi,Lh=new zi,Oh=function(e){Y(n,e);var t=$(n);function n(e,r){var i;return V(this,n),(i=t.call(this,e,r)).isLineSegments=!0,i.type="LineSegments",i}return W(n,[{key:"computeLineDistances",value:function(){var e=this.geometry;if(null===e.index){for(var t=e.attributes.position,n=[],r=0,i=t.count;r<i;r+=2)Dh.fromBufferAttribute(t,r),Lh.fromBufferAttribute(t,r+1),n[r]=0===r?0:n[r-1],n[r+1]=n[r]+Dh.distanceTo(Lh);e.setAttribute("lineDistance",new Ro(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}]),n}(Nh),Fh=function(e){Y(n,e);var t=$(n);function n(e,r){var i;return V(this,n),(i=t.call(this,e,r)).isLineLoop=!0,i.type="LineLoop",i}return W(n)}(Nh),Uh=function(e){Y(n,e);var t=$(n);function n(e){var r;return V(this,n),(r=t.call(this)).isPointsMaterial=!0,r.color=new uo(16777215),r.map=null,r.alphaMap=null,r.size=1,r.sizeAttenuation=!0,r.fog=!0,r.setValues(e),r}return W(n,[{key:"copy",value:function(e){return oe(Q(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}],[{key:"type",get:function(){return"PointsMaterial"}}]),n}(ho),zh=new va,Gh=new Aa,qh=new sa,Hh=new zi,Vh=function(e){Y(n,e);var t=$(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Fo,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Uh;return V(this,n),(e=t.call(this)).isPoints=!0,e.type="Points",e.geometry=r,e.material=i,e.updateMorphTargets(),e}return W(n,[{key:"copy",value:function(e,t){return oe(Q(n.prototype),"copy",this).call(this,e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}},{key:"raycast",value:function(e,t){var n=this.geometry,r=this.matrixWorld,i=e.params.Points.threshold,a=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),qh.copy(n.boundingSphere),qh.applyMatrix4(r),qh.radius+=i,!1!==e.ray.intersectsSphere(qh)){zh.copy(r).invert(),Gh.copy(e.ray).applyMatrix4(zh);var o=i/((this.scale.x+this.scale.y+this.scale.z)/3),s=o*o,u=n.index,l=n.attributes.position;if(null!==u)for(var c=Math.max(0,a.start),h=Math.min(u.count,a.start+a.count);c<h;c++){var d=u.getX(c);Hh.fromBufferAttribute(l,d),jh(Hh,d,s,r,e,t,this)}else for(var f=Math.max(0,a.start),p=Math.min(l.count,a.start+a.count);f<p;f++)Hh.fromBufferAttribute(l,f),jh(Hh,f,s,r,e,t,this)}}},{key:"updateMorphTargets",value:function(){var e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){var n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var r=0,i=n.length;r<i;r++){var a=n[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=r}}}}}]),n}(Ha);function jh(e,t,n,r,i,a,o){var s=Gh.distanceSqToPoint(e);if(s<n){var u=new zi;Gh.closestPointToPoint(e,u),u.applyMatrix4(r);var l=i.ray.origin.distanceTo(u);if(l<i.near||l>i.far)return;a.push({distance:l,distanceToRay:Math.sqrt(s),point:u,index:t,face:null,faceIndex:null,barycoord:null,object:o})}}var Wh=function(e){Y(n,e);var t=$(n);function n(e,r,i,a,o,s,u,l,c){var h;V(this,n),(h=t.call(this,e,r,i,a,o,s,u,l,c)).isVideoTexture=!0,h.minFilter=void 0!==s?s:Ct,h.magFilter=void 0!==o?o:Ct,h.generateMipmaps=!1;var d=K(h);return"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback((function t(){d.needsUpdate=!0,e.requestVideoFrameCallback(t)})),h}return W(n,[{key:"clone",value:function(){return new this.constructor(this.image).copy(this)}},{key:"update",value:function(){var e=this.image;!1==="requestVideoFrameCallback"in e&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}]),n}(Bi),Xh=function(e){Y(n,e);var t=$(n);function n(e,r){var i;return V(this,n),(i=t.call(this,{width:e,height:r})).isFramebufferTexture=!0,i.magFilter=St,i.minFilter=St,i.generateMipmaps=!1,i.needsUpdate=!0,i}return W(n)}(Bi),Yh=function(e){Y(n,e);var t=$(n);function n(e,r,i,a,o,s,u,l,c,h,d,f){var p;return V(this,n),(p=t.call(this,null,s,u,l,c,h,a,o,d,f)).isCompressedTexture=!0,p.image={width:r,height:i},p.mipmaps=e,p.flipY=!1,p.generateMipmaps=!1,p}return W(n)}(Bi),Qh=function(e){Y(n,e);var t=$(n);function n(e,r,i,a,o,s){var u;return V(this,n),(u=t.call(this,e,r,i,o,s)).isCompressedArrayTexture=!0,u.image.depth=a,u.wrapR=_t,u.layerUpdates=new Set,u}return W(n,[{key:"addLayerUpdate",value:function(e){this.layerUpdates.add(e)}},{key:"clearLayerUpdates",value:function(){this.layerUpdates.clear()}}]),n}(Yh),Jh=function(e){Y(n,e);var t=$(n);function n(e,r,i){var a;return V(this,n),(a=t.call(this,void 0,e[0].width,e[0].height,r,i,vt)).isCompressedCubeTexture=!0,a.isCubeTexture=!0,a.image=e,a}return W(n)}(Yh),Kh=function(e){Y(n,e);var t=$(n);function n(e,r,i,a,o,s,u,l,c){var h;return V(this,n),(h=t.call(this,e,r,i,a,o,s,u,l,c)).isCanvasTexture=!0,h.needsUpdate=!0,h}return W(n)}(Bi),Zh=function(){function e(){V(this,e),this.type="Curve",this.arcLengthDivisions=200}return W(e,[{key:"getPoint",value:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}},{key:"getPointAt",value:function(e,t){var n=this.getUtoTmapping(e);return this.getPoint(n,t)}},{key:"getPoints",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}},{key:"getSpacedPoints",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t=[],n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}},{key:"getLength",value:function(){var e=this.getLengths();return e[e.length-1]}},{key:"getLengths",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.arcLengthDivisions;if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var t,n=[],r=this.getPoint(0),i=0;n.push(0);for(var a=1;a<=e;a++)i+=(t=this.getPoint(a/e)).distanceTo(r),n.push(i),r=t;return this.cacheArcLengths=n,n}},{key:"updateArcLengths",value:function(){this.needsUpdate=!0,this.getLengths()}},{key:"getUtoTmapping",value:function(e,t){var n,r=this.getLengths(),i=0,a=r.length;n=t||e*r[a-1];for(var o,s=0,u=a-1;s<=u;)if((o=r[i=Math.floor(s+(u-s)/2)]-n)<0)s=i+1;else{if(!(o>0)){u=i;break}u=i-1}if(r[i=u]===n)return i/(a-1);var l=r[i];return(i+(n-l)/(r[i+1]-l))/(a-1)}},{key:"getTangent",value:function(e,t){var n=1e-4,r=e-n,i=e+n;r<0&&(r=0),i>1&&(i=1);var a=this.getPoint(r),o=this.getPoint(i),s=t||(a.isVector2?new ii:new zi);return s.copy(o).sub(a).normalize(),s}},{key:"getTangentAt",value:function(e,t){var n=this.getUtoTmapping(e);return this.getTangent(n,t)}},{key:"computeFrenetFrames",value:function(e,t){for(var n=new zi,r=[],i=[],a=[],o=new zi,s=new va,u=0;u<=e;u++){var l=u/e;r[u]=this.getTangentAt(l,new zi)}i[0]=new zi,a[0]=new zi;var c=Number.MAX_VALUE,h=Math.abs(r[0].x),d=Math.abs(r[0].y),f=Math.abs(r[0].z);h<=c&&(c=h,n.set(1,0,0)),d<=c&&(c=d,n.set(0,1,0)),f<=c&&n.set(0,0,1),o.crossVectors(r[0],n).normalize(),i[0].crossVectors(r[0],o),a[0].crossVectors(r[0],i[0]);for(var p=1;p<=e;p++){if(i[p]=i[p-1].clone(),a[p]=a[p-1].clone(),o.crossVectors(r[p-1],r[p]),o.length()>Number.EPSILON){o.normalize();var A=Math.acos(Zr(r[p-1].dot(r[p]),-1,1));i[p].applyMatrix4(s.makeRotationAxis(o,A))}a[p].crossVectors(r[p],i[p])}if(!0===t){var v=Math.acos(Zr(i[0].dot(i[e]),-1,1));v/=e,r[0].dot(o.crossVectors(i[0],i[e]))>0&&(v=-v);for(var m=1;m<=e;m++)i[m].applyMatrix4(s.makeRotationAxis(r[m],v*m)),a[m].crossVectors(r[m],i[m])}return{tangents:r,normals:i,binormals:a}}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}},{key:"toJSON",value:function(){var e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}},{key:"fromJSON",value:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}]),e}(),$h=function(e){Y(n,e);var t=$(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2*Math.PI,l=arguments.length>6&&void 0!==arguments[6]&&arguments[6],c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0;return V(this,n),(e=t.call(this)).isEllipseCurve=!0,e.type="EllipseCurve",e.aX=r,e.aY=i,e.xRadius=a,e.yRadius=o,e.aStartAngle=s,e.aEndAngle=u,e.aClockwise=l,e.aRotation=c,e}return W(n,[{key:"getPoint",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ii,n=t,r=2*Math.PI,i=this.aEndAngle-this.aStartAngle,a=Math.abs(i)<Number.EPSILON;i<0;)i+=r;for(;i>r;)i-=r;i<Number.EPSILON&&(i=a?0:r),!0!==this.aClockwise||a||(i===r?i=-r:i-=r);var o=this.aStartAngle+e*i,s=this.aX+this.xRadius*Math.cos(o),u=this.aY+this.yRadius*Math.sin(o);if(0!==this.aRotation){var l=Math.cos(this.aRotation),c=Math.sin(this.aRotation),h=s-this.aX,d=u-this.aY;s=h*l-d*c+this.aX,u=h*c+d*l+this.aY}return n.set(s,u)}},{key:"copy",value:function(e){return oe(Q(n.prototype),"copy",this).call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}},{key:"toJSON",value:function(){var e=oe(Q(n.prototype),"toJSON",this).call(this);return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}},{key:"fromJSON",value:function(e){return oe(Q(n.prototype),"fromJSON",this).call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}]),n}(Zh),ed=function(e){Y(n,e);var t=$(n);function n(e,r,i,a,o,s){var u;return V(this,n),(u=t.call(this,e,r,i,i,a,o,s)).isArcCurve=!0,u.type="ArcCurve",u}return W(n)}($h);function td(){var e=0,t=0,n=0,r=0;function i(i,a,o,s){e=i,t=o,n=-3*i+3*a-2*o-s,r=2*i-2*a+o+s}return{initCatmullRom:function(e,t,n,r,a){i(t,n,a*(n-e),a*(r-t))},initNonuniformCatmullRom:function(e,t,n,r,a,o,s){var u=(t-e)/a-(n-e)/(a+o)+(n-t)/o,l=(n-t)/o-(r-t)/(o+s)+(r-n)/s;i(t,n,u*=o,l*=o)},calc:function(i){var a=i*i;return e+t*i+n*a+r*(a*i)}}}var nd=new zi,rd=new td,id=new td,ad=new td,od=function(e){Y(n,e);var t=$(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"centripetal",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;return V(this,n),(e=t.call(this)).isCatmullRomCurve3=!0,e.type="CatmullRomCurve3",e.points=r,e.closed=i,e.curveType=a,e.tension=o,e}return W(n,[{key:"getPoint",value:function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new zi,i=r,a=this.points,o=a.length,s=(o-(this.closed?0:1))*e,u=Math.floor(s),l=s-u;this.closed?u+=u>0?0:(Math.floor(Math.abs(u)/o)+1)*o:0===l&&u===o-1&&(u=o-2,l=1),this.closed||u>0?t=a[(u-1)%o]:(nd.subVectors(a[0],a[1]).add(a[0]),t=nd);var c=a[u%o],h=a[(u+1)%o];if(this.closed||u+2<o?n=a[(u+2)%o]:(nd.subVectors(a[o-1],a[o-2]).add(a[o-1]),n=nd),"centripetal"===this.curveType||"chordal"===this.curveType){var d="chordal"===this.curveType?.5:.25,f=Math.pow(t.distanceToSquared(c),d),p=Math.pow(c.distanceToSquared(h),d),A=Math.pow(h.distanceToSquared(n),d);p<1e-4&&(p=1),f<1e-4&&(f=p),A<1e-4&&(A=p),rd.initNonuniformCatmullRom(t.x,c.x,h.x,n.x,f,p,A),id.initNonuniformCatmullRom(t.y,c.y,h.y,n.y,f,p,A),ad.initNonuniformCatmullRom(t.z,c.z,h.z,n.z,f,p,A)}else"catmullrom"===this.curveType&&(rd.initCatmullRom(t.x,c.x,h.x,n.x,this.tension),id.initCatmullRom(t.y,c.y,h.y,n.y,this.tension),ad.initCatmullRom(t.z,c.z,h.z,n.z,this.tension));return i.set(rd.calc(l),id.calc(l),ad.calc(l)),i}},{key:"copy",value:function(e){oe(Q(n.prototype),"copy",this).call(this,e),this.points=[];for(var t=0,r=e.points.length;t<r;t++){var i=e.points[t];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}},{key:"toJSON",value:function(){var e=oe(Q(n.prototype),"toJSON",this).call(this);e.points=[];for(var t=0,r=this.points.length;t<r;t++){var i=this.points[t];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}},{key:"fromJSON",value:function(e){oe(Q(n.prototype),"fromJSON",this).call(this,e),this.points=[];for(var t=0,r=e.points.length;t<r;t++){var i=e.points[t];this.points.push((new zi).fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}]),n}(Zh);function sd(e,t,n,r,i){var a=.5*(r-t),o=.5*(i-n),s=e*e;return(2*n-2*r+a+o)*(e*s)+(-3*n+3*r-2*a-o)*s+a*e+n}function ud(e,t,n,r){return function(e,t){var n=1-e;return n*n*t}(e,t)+function(e,t){return 2*(1-e)*e*t}(e,n)+function(e,t){return e*e*t}(e,r)}function ld(e,t,n,r,i){return function(e,t){var n=1-e;return n*n*n*t}(e,t)+function(e,t){var n=1-e;return 3*n*n*e*t}(e,n)+function(e,t){return 3*(1-e)*e*e*t}(e,r)+function(e,t){return e*e*e*t}(e,i)}var cd=function(e){Y(n,e);var t=$(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new ii,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ii,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new ii,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new ii;return V(this,n),(e=t.call(this)).isCubicBezierCurve=!0,e.type="CubicBezierCurve",e.v0=r,e.v1=i,e.v2=a,e.v3=o,e}return W(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ii,n=t,r=this.v0,i=this.v1,a=this.v2,o=this.v3;return n.set(ld(e,r.x,i.x,a.x,o.x),ld(e,r.y,i.y,a.y,o.y)),n}},{key:"copy",value:function(e){return oe(Q(n.prototype),"copy",this).call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}},{key:"toJSON",value:function(){var e=oe(Q(n.prototype),"toJSON",this).call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}},{key:"fromJSON",value:function(e){return oe(Q(n.prototype),"fromJSON",this).call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}]),n}(Zh),hd=function(e){Y(n,e);var t=$(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new zi,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new zi,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new zi,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new zi;return V(this,n),(e=t.call(this)).isCubicBezierCurve3=!0,e.type="CubicBezierCurve3",e.v0=r,e.v1=i,e.v2=a,e.v3=o,e}return W(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new zi,n=t,r=this.v0,i=this.v1,a=this.v2,o=this.v3;return n.set(ld(e,r.x,i.x,a.x,o.x),ld(e,r.y,i.y,a.y,o.y),ld(e,r.z,i.z,a.z,o.z)),n}},{key:"copy",value:function(e){return oe(Q(n.prototype),"copy",this).call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}},{key:"toJSON",value:function(){var e=oe(Q(n.prototype),"toJSON",this).call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}},{key:"fromJSON",value:function(e){return oe(Q(n.prototype),"fromJSON",this).call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}]),n}(Zh),dd=function(e){Y(n,e);var t=$(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new ii,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ii;return V(this,n),(e=t.call(this)).isLineCurve=!0,e.type="LineCurve",e.v1=r,e.v2=i,e}return W(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ii,n=t;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}},{key:"getPointAt",value:function(e,t){return this.getPoint(e,t)}},{key:"getTangent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ii;return t.subVectors(this.v2,this.v1).normalize()}},{key:"getTangentAt",value:function(e,t){return this.getTangent(e,t)}},{key:"copy",value:function(e){return oe(Q(n.prototype),"copy",this).call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}},{key:"toJSON",value:function(){var e=oe(Q(n.prototype),"toJSON",this).call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}},{key:"fromJSON",value:function(e){return oe(Q(n.prototype),"fromJSON",this).call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}]),n}(Zh),fd=function(e){Y(n,e);var t=$(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new zi,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new zi;return V(this,n),(e=t.call(this)).isLineCurve3=!0,e.type="LineCurve3",e.v1=r,e.v2=i,e}return W(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new zi,n=t;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}},{key:"getPointAt",value:function(e,t){return this.getPoint(e,t)}},{key:"getTangent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new zi;return t.subVectors(this.v2,this.v1).normalize()}},{key:"getTangentAt",value:function(e,t){return this.getTangent(e,t)}},{key:"copy",value:function(e){return oe(Q(n.prototype),"copy",this).call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}},{key:"toJSON",value:function(){var e=oe(Q(n.prototype),"toJSON",this).call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}},{key:"fromJSON",value:function(e){return oe(Q(n.prototype),"fromJSON",this).call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}]),n}(Zh),pd=function(e){Y(n,e);var t=$(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new ii,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ii,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new ii;return V(this,n),(e=t.call(this)).isQuadraticBezierCurve=!0,e.type="QuadraticBezierCurve",e.v0=r,e.v1=i,e.v2=a,e}return W(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ii,n=t,r=this.v0,i=this.v1,a=this.v2;return n.set(ud(e,r.x,i.x,a.x),ud(e,r.y,i.y,a.y)),n}},{key:"copy",value:function(e){return oe(Q(n.prototype),"copy",this).call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}},{key:"toJSON",value:function(){var e=oe(Q(n.prototype),"toJSON",this).call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}},{key:"fromJSON",value:function(e){return oe(Q(n.prototype),"fromJSON",this).call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}]),n}(Zh),Ad=function(e){Y(n,e);var t=$(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new zi,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new zi,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new zi;return V(this,n),(e=t.call(this)).isQuadraticBezierCurve3=!0,e.type="QuadraticBezierCurve3",e.v0=r,e.v1=i,e.v2=a,e}return W(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new zi,n=t,r=this.v0,i=this.v1,a=this.v2;return n.set(ud(e,r.x,i.x,a.x),ud(e,r.y,i.y,a.y),ud(e,r.z,i.z,a.z)),n}},{key:"copy",value:function(e){return oe(Q(n.prototype),"copy",this).call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}},{key:"toJSON",value:function(){var e=oe(Q(n.prototype),"toJSON",this).call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}},{key:"fromJSON",value:function(e){return oe(Q(n.prototype),"fromJSON",this).call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}]),n}(Zh),vd=function(e){Y(n,e);var t=$(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return V(this,n),(e=t.call(this)).isSplineCurve=!0,e.type="SplineCurve",e.points=r,e}return W(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ii,n=t,r=this.points,i=(r.length-1)*e,a=Math.floor(i),o=i-a,s=r[0===a?a:a-1],u=r[a],l=r[a>r.length-2?r.length-1:a+1],c=r[a>r.length-3?r.length-1:a+2];return n.set(sd(o,s.x,u.x,l.x,c.x),sd(o,s.y,u.y,l.y,c.y)),n}},{key:"copy",value:function(e){oe(Q(n.prototype),"copy",this).call(this,e),this.points=[];for(var t=0,r=e.points.length;t<r;t++){var i=e.points[t];this.points.push(i.clone())}return this}},{key:"toJSON",value:function(){var e=oe(Q(n.prototype),"toJSON",this).call(this);e.points=[];for(var t=0,r=this.points.length;t<r;t++){var i=this.points[t];e.points.push(i.toArray())}return e}},{key:"fromJSON",value:function(e){oe(Q(n.prototype),"fromJSON",this).call(this,e),this.points=[];for(var t=0,r=e.points.length;t<r;t++){var i=e.points[t];this.points.push((new ii).fromArray(i))}return this}}]),n}(Zh),md=Object.freeze({__proto__:null,ArcCurve:ed,CatmullRomCurve3:od,CubicBezierCurve:cd,CubicBezierCurve3:hd,EllipseCurve:$h,LineCurve:dd,LineCurve3:fd,QuadraticBezierCurve:pd,QuadraticBezierCurve3:Ad,SplineCurve:vd}),gd=function(e){Y(n,e);var t=$(n);function n(){var e;return V(this,n),(e=t.call(this)).type="CurvePath",e.curves=[],e.autoClose=!1,e}return W(n,[{key:"add",value:function(e){this.curves.push(e)}},{key:"closePath",value:function(){var e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){var n=!0===e.isVector2?"LineCurve":"LineCurve3";this.curves.push(new md[n](t,e))}return this}},{key:"getPoint",value:function(e,t){for(var n=e*this.getLength(),r=this.getCurveLengths(),i=0;i<r.length;){if(r[i]>=n){var a=r[i]-n,o=this.curves[i],s=o.getLength(),u=0===s?0:1-a/s;return o.getPointAt(u,t)}i++}return null}},{key:"getLength",value:function(){var e=this.getCurveLengths();return e[e.length-1]}},{key:"updateArcLengths",value:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}},{key:"getCurveLengths",value:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var e=[],t=0,n=0,r=this.curves.length;n<r;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}},{key:"getSpacedPoints",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:40,t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}},{key:"getPoints",value:function(){for(var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:12,n=[],r=0,i=this.curves;r<i.length;r++)for(var a=i[r],o=a.isEllipseCurve?2*t:a.isLineCurve||a.isLineCurve3?1:a.isSplineCurve?t*a.points.length:t,s=a.getPoints(o),u=0;u<s.length;u++){var l=s[u];e&&e.equals(l)||(n.push(l),e=l)}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n}},{key:"copy",value:function(e){oe(Q(n.prototype),"copy",this).call(this,e),this.curves=[];for(var t=0,r=e.curves.length;t<r;t++){var i=e.curves[t];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}},{key:"toJSON",value:function(){var e=oe(Q(n.prototype),"toJSON",this).call(this);e.autoClose=this.autoClose,e.curves=[];for(var t=0,r=this.curves.length;t<r;t++){var i=this.curves[t];e.curves.push(i.toJSON())}return e}},{key:"fromJSON",value:function(e){oe(Q(n.prototype),"fromJSON",this).call(this,e),this.autoClose=e.autoClose,this.curves=[];for(var t=0,r=e.curves.length;t<r;t++){var i=e.curves[t];this.curves.push((new md[i.type]).fromJSON(i))}return this}}]),n}(Zh),yd=function(e){Y(n,e);var t=$(n);function n(e){var r;return V(this,n),(r=t.call(this)).type="Path",r.currentPoint=new ii,e&&r.setFromPoints(e),r}return W(n,[{key:"setFromPoints",value:function(e){this.moveTo(e[0].x,e[0].y);for(var t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}},{key:"moveTo",value:function(e,t){return this.currentPoint.set(e,t),this}},{key:"lineTo",value:function(e,t){var n=new dd(this.currentPoint.clone(),new ii(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}},{key:"quadraticCurveTo",value:function(e,t,n,r){var i=new pd(this.currentPoint.clone(),new ii(e,t),new ii(n,r));return this.curves.push(i),this.currentPoint.set(n,r),this}},{key:"bezierCurveTo",value:function(e,t,n,r,i,a){var o=new cd(this.currentPoint.clone(),new ii(e,t),new ii(n,r),new ii(i,a));return this.curves.push(o),this.currentPoint.set(i,a),this}},{key:"splineThru",value:function(e){var t=[this.currentPoint.clone()].concat(e),n=new vd(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}},{key:"arc",value:function(e,t,n,r,i,a){var o=this.currentPoint.x,s=this.currentPoint.y;return this.absarc(e+o,t+s,n,r,i,a),this}},{key:"absarc",value:function(e,t,n,r,i,a){return this.absellipse(e,t,n,n,r,i,a),this}},{key:"ellipse",value:function(e,t,n,r,i,a,o,s){var u=this.currentPoint.x,l=this.currentPoint.y;return this.absellipse(e+u,t+l,n,r,i,a,o,s),this}},{key:"absellipse",value:function(e,t,n,r,i,a,o,s){var u=new $h(e,t,n,r,i,a,o,s);if(this.curves.length>0){var l=u.getPoint(0);l.equals(this.currentPoint)||this.lineTo(l.x,l.y)}this.curves.push(u);var c=u.getPoint(1);return this.currentPoint.copy(c),this}},{key:"copy",value:function(e){return oe(Q(n.prototype),"copy",this).call(this,e),this.currentPoint.copy(e.currentPoint),this}},{key:"toJSON",value:function(){var e=oe(Q(n.prototype),"toJSON",this).call(this);return e.currentPoint=this.currentPoint.toArray(),e}},{key:"fromJSON",value:function(e){return oe(Q(n.prototype),"fromJSON",this).call(this,e),this.currentPoint.fromArray(e.currentPoint),this}}]),n}(gd),bd=function(e){Y(n,e);var t=$(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[new ii(0,-.5),new ii(.5,0),new ii(0,.5)],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2*Math.PI;V(this,n),(e=t.call(this)).type="LatheGeometry",e.parameters={points:r,segments:i,phiStart:a,phiLength:o},i=Math.floor(i),o=Zr(o,0,2*Math.PI);for(var s=[],u=[],l=[],c=[],h=[],d=1/i,f=new zi,p=new ii,A=new zi,v=new zi,m=new zi,g=0,y=0,b=0;b<=r.length-1;b++)switch(b){case 0:g=r[b+1].x-r[b].x,y=r[b+1].y-r[b].y,A.x=1*y,A.y=-g,A.z=0*y,m.copy(A),A.normalize(),c.push(A.x,A.y,A.z);break;case r.length-1:c.push(m.x,m.y,m.z);break;default:g=r[b+1].x-r[b].x,y=r[b+1].y-r[b].y,A.x=1*y,A.y=-g,A.z=0*y,v.copy(A),A.x+=m.x,A.y+=m.y,A.z+=m.z,A.normalize(),c.push(A.x,A.y,A.z),m.copy(v)}for(var x=0;x<=i;x++)for(var _=a+x*d*o,w=Math.sin(_),S=Math.cos(_),M=0;M<=r.length-1;M++){f.x=r[M].x*w,f.y=r[M].y,f.z=r[M].x*S,u.push(f.x,f.y,f.z),p.x=x/i,p.y=M/(r.length-1),l.push(p.x,p.y);var k=c[3*M+0]*w,T=c[3*M+1],E=c[3*M+0]*S;h.push(k,T,E)}for(var C=0;C<i;C++)for(var R=0;R<r.length-1;R++){var B=R+C*r.length,P=B,N=B+r.length,I=B+r.length+1,D=B+1;s.push(P,N,D),s.push(I,D,N)}return e.setIndex(s),e.setAttribute("position",new Ro(u,3)),e.setAttribute("uv",new Ro(l,2)),e.setAttribute("normal",new Ro(h,3)),e}return W(n,[{key:"copy",value:function(e){return oe(Q(n.prototype),"copy",this).call(this,e),this.parameters=Object.assign({},e.parameters),this}}],[{key:"fromJSON",value:function(e){return new n(e.points,e.segments,e.phiStart,e.phiLength)}}]),n}(Fo),xd=function(e){Y(n,e);var t=$(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8;V(this,n);var s=new yd;return s.absarc(0,-i/2,r,1.5*Math.PI,0),s.absarc(0,i/2,r,0,.5*Math.PI),(e=t.call(this,s.getPoints(a),o)).type="CapsuleGeometry",e.parameters={radius:r,length:i,capSegments:a,radialSegments:o},e}return W(n,null,[{key:"fromJSON",value:function(e){return new n(e.radius,e.length,e.capSegments,e.radialSegments)}}]),n}(bd),_d=function(e){Y(n,e);var t=$(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2*Math.PI;V(this,n),(e=t.call(this)).type="CircleGeometry",e.parameters={radius:r,segments:i,thetaStart:a,thetaLength:o},i=Math.max(3,i);var s=[],u=[],l=[],c=[],h=new zi,d=new ii;u.push(0,0,0),l.push(0,0,1),c.push(.5,.5);for(var f=0,p=3;f<=i;f++,p+=3){var A=a+f/i*o;h.x=r*Math.cos(A),h.y=r*Math.sin(A),u.push(h.x,h.y,h.z),l.push(0,0,1),d.x=(u[p]/r+1)/2,d.y=(u[p+1]/r+1)/2,c.push(d.x,d.y)}for(var v=1;v<=i;v++)s.push(v,v+1,0);return e.setIndex(s),e.setAttribute("position",new Ro(u,3)),e.setAttribute("normal",new Ro(l,3)),e.setAttribute("uv",new Ro(c,2)),e}return W(n,[{key:"copy",value:function(e){return oe(Q(n.prototype),"copy",this).call(this,e),this.parameters=Object.assign({},e.parameters),this}}],[{key:"fromJSON",value:function(e){return new n(e.radius,e.segments,e.thetaStart,e.thetaLength)}}]),n}(Fo),wd=function(e){Y(n,e);var t=$(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:32,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,u=arguments.length>5&&void 0!==arguments[5]&&arguments[5],l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:2*Math.PI;V(this,n),(e=t.call(this)).type="CylinderGeometry",e.parameters={radiusTop:r,radiusBottom:i,height:a,radialSegments:o,heightSegments:s,openEnded:u,thetaStart:l,thetaLength:c};var h=K(e);o=Math.floor(o),s=Math.floor(s);var d=[],f=[],p=[],A=[],v=0,m=[],g=a/2,y=0;function b(){for(var e=new zi,t=new zi,n=0,u=(i-r)/a,b=0;b<=s;b++){for(var x=[],_=b/s,w=_*(i-r)+r,S=0;S<=o;S++){var M=S/o,k=M*c+l,T=Math.sin(k),E=Math.cos(k);t.x=w*T,t.y=-_*a+g,t.z=w*E,f.push(t.x,t.y,t.z),e.set(T,u,E).normalize(),p.push(e.x,e.y,e.z),A.push(M,1-_),x.push(v++)}m.push(x)}for(var C=0;C<o;C++)for(var R=0;R<s;R++){var B=m[R][C],P=m[R+1][C],N=m[R+1][C+1],I=m[R][C+1];(r>0||0!==R)&&(d.push(B,P,I),n+=3),(i>0||R!==s-1)&&(d.push(P,N,I),n+=3)}h.addGroup(y,n,0),y+=n}function x(e){for(var t=v,n=new ii,a=new zi,s=0,u=!0===e?r:i,m=!0===e?1:-1,b=1;b<=o;b++)f.push(0,g*m,0),p.push(0,m,0),A.push(.5,.5),v++;for(var x=v,_=0;_<=o;_++){var w=_/o*c+l,S=Math.cos(w),M=Math.sin(w);a.x=u*M,a.y=g*m,a.z=u*S,f.push(a.x,a.y,a.z),p.push(0,m,0),n.x=.5*S+.5,n.y=.5*M*m+.5,A.push(n.x,n.y),v++}for(var k=0;k<o;k++){var T=t+k,E=x+k;!0===e?d.push(E,E+1,T):d.push(E+1,E,T),s+=3}h.addGroup(y,s,!0===e?1:2),y+=s}return b(),!1===u&&(r>0&&x(!0),i>0&&x(!1)),e.setIndex(d),e.setAttribute("position",new Ro(f,3)),e.setAttribute("normal",new Ro(p,3)),e.setAttribute("uv",new Ro(A,2)),e}return W(n,[{key:"copy",value:function(e){return oe(Q(n.prototype),"copy",this).call(this,e),this.parameters=Object.assign({},e.parameters),this}}],[{key:"fromJSON",value:function(e){return new n(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}]),n}(Fo),Sd=function(e){Y(n,e);var t=$(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:32,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=arguments.length>4&&void 0!==arguments[4]&&arguments[4],u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:2*Math.PI;return V(this,n),(e=t.call(this,0,r,i,a,o,s,u,l)).type="ConeGeometry",e.parameters={radius:r,height:i,radialSegments:a,heightSegments:o,openEnded:s,thetaStart:u,thetaLength:l},e}return W(n,null,[{key:"fromJSON",value:function(e){return new n(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}]),n}(wd),Md=function(e){Y(n,e);var t=$(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;V(this,n),(e=t.call(this)).type="PolyhedronGeometry",e.parameters={vertices:r,indices:i,radius:a,detail:o};var s=[],u=[];function l(e){for(var t=new zi,n=new zi,r=new zi,a=0;a<i.length;a+=3)A(i[a+0],t),A(i[a+1],n),A(i[a+2],r),c(t,n,r,e)}function c(e,t,n,r){for(var i=r+1,a=[],o=0;o<=i;o++){a[o]=[];for(var s=e.clone().lerp(n,o/i),u=t.clone().lerp(n,o/i),l=i-o,c=0;c<=l;c++)a[o][c]=0===c&&o===i?s:s.clone().lerp(u,c/l)}for(var h=0;h<i;h++)for(var d=0;d<2*(i-h)-1;d++){var f=Math.floor(d/2);d%2===0?(p(a[h][f+1]),p(a[h+1][f]),p(a[h][f])):(p(a[h][f+1]),p(a[h+1][f+1]),p(a[h+1][f]))}}function h(e){for(var t=new zi,n=0;n<s.length;n+=3)t.x=s[n+0],t.y=s[n+1],t.z=s[n+2],t.normalize().multiplyScalar(e),s[n+0]=t.x,s[n+1]=t.y,s[n+2]=t.z}function d(){for(var e=new zi,t=0;t<s.length;t+=3){e.x=s[t+0],e.y=s[t+1],e.z=s[t+2];var n=g(e)/2/Math.PI+.5,r=y(e)/Math.PI+.5;u.push(n,1-r)}v(),f()}function f(){for(var e=0;e<u.length;e+=6){var t=u[e+0],n=u[e+2],r=u[e+4],i=Math.max(t,n,r),a=Math.min(t,n,r);i>.9&&a<.1&&(t<.2&&(u[e+0]+=1),n<.2&&(u[e+2]+=1),r<.2&&(u[e+4]+=1))}}function p(e){s.push(e.x,e.y,e.z)}function A(e,t){var n=3*e;t.x=r[n+0],t.y=r[n+1],t.z=r[n+2]}function v(){for(var e=new zi,t=new zi,n=new zi,r=new zi,i=new ii,a=new ii,o=new ii,l=0,c=0;l<s.length;l+=9,c+=6){e.set(s[l+0],s[l+1],s[l+2]),t.set(s[l+3],s[l+4],s[l+5]),n.set(s[l+6],s[l+7],s[l+8]),i.set(u[c+0],u[c+1]),a.set(u[c+2],u[c+3]),o.set(u[c+4],u[c+5]),r.copy(e).add(t).add(n).divideScalar(3);var h=g(r);m(i,c+0,e,h),m(a,c+2,t,h),m(o,c+4,n,h)}}function m(e,t,n,r){r<0&&1===e.x&&(u[t]=e.x-1),0===n.x&&0===n.z&&(u[t]=r/2/Math.PI+.5)}function g(e){return Math.atan2(e.z,-e.x)}function y(e){return Math.atan2(-e.y,Math.sqrt(e.x*e.x+e.z*e.z))}return l(o),h(a),d(),e.setAttribute("position",new Ro(s,3)),e.setAttribute("normal",new Ro(s.slice(),3)),e.setAttribute("uv",new Ro(u,2)),0===o?e.computeVertexNormals():e.normalizeNormals(),e}return W(n,[{key:"copy",value:function(e){return oe(Q(n.prototype),"copy",this).call(this,e),this.parameters=Object.assign({},e.parameters),this}}],[{key:"fromJSON",value:function(e){return new n(e.vertices,e.indices,e.radius,e.details)}}]),n}(Fo),kd=function(e){Y(n,e);var t=$(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;V(this,n);var a=(1+Math.sqrt(5))/2,o=1/a,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-o,-a,0,-o,a,0,o,-a,0,o,a,-o,-a,0,-o,a,0,o,-a,0,o,a,0,-a,0,-o,a,0,-o,-a,0,o,a,0,o],u=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];return(e=t.call(this,s,u,r,i)).type="DodecahedronGeometry",e.parameters={radius:r,detail:i},e}return W(n,null,[{key:"fromJSON",value:function(e){return new n(e.radius,e.detail)}}]),n}(Md),Td=new zi,Ed=new zi,Cd=new zi,Rd=new ro,Bd=function(e){Y(n,e);var t=$(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(V(this,n),(e=t.call(this)).type="EdgesGeometry",e.parameters={geometry:r,thresholdAngle:i},null!==r){for(var a=4,o=Math.pow(10,a),s=Math.cos(Qr*i),u=r.getIndex(),l=r.getAttribute("position"),c=u?u.count:l.count,h=[0,0,0],d=["a","b","c"],f=new Array(3),p={},A=[],v=0;v<c;v+=3){u?(h[0]=u.getX(v),h[1]=u.getX(v+1),h[2]=u.getX(v+2)):(h[0]=v,h[1]=v+1,h[2]=v+2);var m=Rd.a,g=Rd.b,y=Rd.c;if(m.fromBufferAttribute(l,h[0]),g.fromBufferAttribute(l,h[1]),y.fromBufferAttribute(l,h[2]),Rd.getNormal(Cd),f[0]="".concat(Math.round(m.x*o),",").concat(Math.round(m.y*o),",").concat(Math.round(m.z*o)),f[1]="".concat(Math.round(g.x*o),",").concat(Math.round(g.y*o),",").concat(Math.round(g.z*o)),f[2]="".concat(Math.round(y.x*o),",").concat(Math.round(y.y*o),",").concat(Math.round(y.z*o)),f[0]!==f[1]&&f[1]!==f[2]&&f[2]!==f[0])for(var b=0;b<3;b++){var x=(b+1)%3,_=f[b],w=f[x],S=Rd[d[b]],M=Rd[d[x]],k="".concat(_,"_").concat(w),T="".concat(w,"_").concat(_);T in p&&p[T]?(Cd.dot(p[T].normal)<=s&&(A.push(S.x,S.y,S.z),A.push(M.x,M.y,M.z)),p[T]=null):k in p||(p[k]={index0:h[b],index1:h[x],normal:Cd.clone()})}}for(var E in p)if(p[E]){var C=p[E],R=C.index0,B=C.index1;Td.fromBufferAttribute(l,R),Ed.fromBufferAttribute(l,B),A.push(Td.x,Td.y,Td.z),A.push(Ed.x,Ed.y,Ed.z)}e.setAttribute("position",new Ro(A,3))}return e}return W(n,[{key:"copy",value:function(e){return oe(Q(n.prototype),"copy",this).call(this,e),this.parameters=Object.assign({},e.parameters),this}}]),n}(Fo),Pd=function(e){Y(n,e);var t=$(n);function n(e){var r;return V(this,n),(r=t.call(this,e)).uuid=Kr(),r.type="Shape",r.holes=[],r}return W(n,[{key:"getPointsHoles",value:function(e){for(var t=[],n=0,r=this.holes.length;n<r;n++)t[n]=this.holes[n].getPoints(e);return t}},{key:"extractPoints",value:function(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}},{key:"copy",value:function(e){oe(Q(n.prototype),"copy",this).call(this,e),this.holes=[];for(var t=0,r=e.holes.length;t<r;t++){var i=e.holes[t];this.holes.push(i.clone())}return this}},{key:"toJSON",value:function(){var e=oe(Q(n.prototype),"toJSON",this).call(this);e.uuid=this.uuid,e.holes=[];for(var t=0,r=this.holes.length;t<r;t++){var i=this.holes[t];e.holes.push(i.toJSON())}return e}},{key:"fromJSON",value:function(e){oe(Q(n.prototype),"fromJSON",this).call(this,e),this.uuid=e.uuid,this.holes=[];for(var t=0,r=e.holes.length;t<r;t++){var i=e.holes[t];this.holes.push((new yd).fromJSON(i))}return this}}]),n}(yd),Nd=function(e,t){var n,r,i,a,o,s,u,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,c=t&&t.length,h=c?t[0]*l:e.length,d=Id(e,0,h,l,!0),f=[];if(!d||d.next===d.prev)return f;if(c&&(d=Gd(e,t,d,l)),e.length>80*l){n=i=e[0],r=a=e[1];for(var p=l;p<h;p+=l)(o=e[p])<n&&(n=o),(s=e[p+1])<r&&(r=s),o>i&&(i=o),s>a&&(a=s);u=0!==(u=Math.max(i-n,a-r))?32767/u:0}return Ld(d,f,l,n,r,u,0),f};function Id(e,t,n,r,i){var a,o;if(i===function(e,t,n,r){for(var i=0,a=t,o=n-r;a<n;a+=r)i+=(e[o]-e[a])*(e[a+1]+e[o+1]),o=a;return i}(e,t,n,r)>0)for(a=t;a<n;a+=r)o=nf(a,e[a],e[a+1],o);else for(a=n-r;a>=t;a-=r)o=nf(a,e[a],e[a+1],o);return o&&Jd(o,o.next)&&(rf(o),o=o.next),o}function Dd(e,t){if(!e)return e;t||(t=e);var n,r=e;do{if(n=!1,r.steiner||!Jd(r,r.next)&&0!==Qd(r.prev,r,r.next))r=r.next;else{if(rf(r),(r=t=r.prev)===r.next)break;n=!0}}while(n||r!==t);return t}function Ld(e,t,n,r,i,a,o){if(e){!o&&a&&function(e,t,n,r){var i=e;do{0===i.z&&(i.z=jd(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){var t,n,r,i,a,o,s,u,l=1;do{for(n=e,e=null,a=null,o=0;n;){for(o++,r=n,s=0,t=0;t<l&&(s++,r=r.nextZ);t++);for(u=l;s>0||u>0&&r;)0!==s&&(0===u||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,u--),a?a.nextZ=i:e=i,i.prevZ=a,a=i;n=r}a.nextZ=null,l*=2}while(o>1)}(i)}(e,r,i,a);for(var s,u,l=e;e.prev!==e.next;)if(s=e.prev,u=e.next,a?Fd(e,r,i,a):Od(e))t.push(s.i/n|0),t.push(e.i/n|0),t.push(u.i/n|0),rf(e),e=u.next,l=u.next;else if((e=u)===l){o?1===o?Ld(e=Ud(Dd(e),t,n),t,n,r,i,a,2):2===o&&zd(e,t,n,r,i,a):Ld(Dd(e),t,n,r,i,a,1);break}}}function Od(e){var t=e.prev,n=e,r=e.next;if(Qd(t,n,r)>=0)return!1;for(var i=t.x,a=n.x,o=r.x,s=t.y,u=n.y,l=r.y,c=i<a?i<o?i:o:a<o?a:o,h=s<u?s<l?s:l:u<l?u:l,d=i>a?i>o?i:o:a>o?a:o,f=s>u?s>l?s:l:u>l?u:l,p=r.next;p!==t;){if(p.x>=c&&p.x<=d&&p.y>=h&&p.y<=f&&Xd(i,s,a,u,o,l,p.x,p.y)&&Qd(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function Fd(e,t,n,r){var i=e.prev,a=e,o=e.next;if(Qd(i,a,o)>=0)return!1;for(var s=i.x,u=a.x,l=o.x,c=i.y,h=a.y,d=o.y,f=s<u?s<l?s:l:u<l?u:l,p=c<h?c<d?c:d:h<d?h:d,A=s>u?s>l?s:l:u>l?u:l,v=c>h?c>d?c:d:h>d?h:d,m=jd(f,p,t,n,r),g=jd(A,v,t,n,r),y=e.prevZ,b=e.nextZ;y&&y.z>=m&&b&&b.z<=g;){if(y.x>=f&&y.x<=A&&y.y>=p&&y.y<=v&&y!==i&&y!==o&&Xd(s,c,u,h,l,d,y.x,y.y)&&Qd(y.prev,y,y.next)>=0)return!1;if(y=y.prevZ,b.x>=f&&b.x<=A&&b.y>=p&&b.y<=v&&b!==i&&b!==o&&Xd(s,c,u,h,l,d,b.x,b.y)&&Qd(b.prev,b,b.next)>=0)return!1;b=b.nextZ}for(;y&&y.z>=m;){if(y.x>=f&&y.x<=A&&y.y>=p&&y.y<=v&&y!==i&&y!==o&&Xd(s,c,u,h,l,d,y.x,y.y)&&Qd(y.prev,y,y.next)>=0)return!1;y=y.prevZ}for(;b&&b.z<=g;){if(b.x>=f&&b.x<=A&&b.y>=p&&b.y<=v&&b!==i&&b!==o&&Xd(s,c,u,h,l,d,b.x,b.y)&&Qd(b.prev,b,b.next)>=0)return!1;b=b.nextZ}return!0}function Ud(e,t,n){var r=e;do{var i=r.prev,a=r.next.next;!Jd(i,a)&&Kd(i,r,r.next,a)&&ef(i,a)&&ef(a,i)&&(t.push(i.i/n|0),t.push(r.i/n|0),t.push(a.i/n|0),rf(r),rf(r.next),r=e=a),r=r.next}while(r!==e);return Dd(r)}function zd(e,t,n,r,i,a){var o=e;do{for(var s=o.next.next;s!==o.prev;){if(o.i!==s.i&&Yd(o,s)){var u=tf(o,s);return o=Dd(o,o.next),u=Dd(u,u.next),Ld(o,t,n,r,i,a,0),void Ld(u,t,n,r,i,a,0)}s=s.next}o=o.next}while(o!==e)}function Gd(e,t,n,r){var i,a,o,s=[];for(i=0,a=t.length;i<a;i++)(o=Id(e,t[i]*r,i<a-1?t[i+1]*r:e.length,r,!1))===o.next&&(o.steiner=!0),s.push(Wd(o));for(s.sort(qd),i=0;i<s.length;i++)n=Hd(s[i],n);return n}function qd(e,t){return e.x-t.x}function Hd(e,t){var n=function(e,t){var n,r=t,i=-1/0,a=e.x,o=e.y;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=a&&s>i&&(i=s,n=r.x<r.next.x?r:r.next,s===a))return n}r=r.next}while(r!==t);if(!n)return null;var u,l=n,c=n.x,h=n.y,d=1/0;r=n;do{a>=r.x&&r.x>=c&&a!==r.x&&Xd(o<h?a:i,o,c,h,o<h?i:a,o,r.x,r.y)&&(u=Math.abs(o-r.y)/(a-r.x),ef(r,e)&&(u<d||u===d&&(r.x>n.x||r.x===n.x&&Vd(n,r)))&&(n=r,d=u)),r=r.next}while(r!==l);return n}(e,t);if(!n)return t;var r=tf(n,e);return Dd(r,r.next),Dd(n,n.next)}function Vd(e,t){return Qd(e.prev,e,t.prev)<0&&Qd(t.next,e,e.next)<0}function jd(e,t,n,r,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-n)*i|0)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-r)*i|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function Wd(e){var t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function Xd(e,t,n,r,i,a,o,s){return(i-o)*(t-s)>=(e-o)*(a-s)&&(e-o)*(r-s)>=(n-o)*(t-s)&&(n-o)*(a-s)>=(i-o)*(r-s)}function Yd(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&Kd(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(ef(e,t)&&ef(t,e)&&function(e,t){var n=e,r=!1,i=(e.x+t.x)/2,a=(e.y+t.y)/2;do{n.y>a!==n.next.y>a&&n.next.y!==n.y&&i<(n.next.x-n.x)*(a-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}(e,t)&&(Qd(e.prev,e,t.prev)||Qd(e,t.prev,t))||Jd(e,t)&&Qd(e.prev,e,e.next)>0&&Qd(t.prev,t,t.next)>0)}function Qd(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function Jd(e,t){return e.x===t.x&&e.y===t.y}function Kd(e,t,n,r){var i=$d(Qd(e,t,n)),a=$d(Qd(e,t,r)),o=$d(Qd(n,r,e)),s=$d(Qd(n,r,t));return i!==a&&o!==s||(!(0!==i||!Zd(e,n,t))||(!(0!==a||!Zd(e,r,t))||(!(0!==o||!Zd(n,e,r))||!(0!==s||!Zd(n,t,r)))))}function Zd(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function $d(e){return e>0?1:e<0?-1:0}function ef(e,t){return Qd(e.prev,e,e.next)<0?Qd(e,t,e.next)>=0&&Qd(e,e.prev,t)>=0:Qd(e,t,e.prev)<0||Qd(e,e.next,t)<0}function tf(e,t){var n=new af(e.i,e.x,e.y),r=new af(t.i,t.x,t.y),i=e.next,a=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,a.next=r,r.prev=a,r}function nf(e,t,n,r){var i=new af(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function rf(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function af(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}var of=function(){function e(){V(this,e)}return W(e,null,[{key:"area",value:function(e){for(var t=e.length,n=0,r=t-1,i=0;i<t;r=i++)n+=e[r].x*e[i].y-e[i].x*e[r].y;return.5*n}},{key:"isClockWise",value:function(t){return e.area(t)<0}},{key:"triangulateShape",value:function(e,t){var n=[],r=[],i=[];sf(e),uf(n,e);var a=e.length;t.forEach(sf);for(var o=0;o<t.length;o++)r.push(a),a+=t[o].length,uf(n,t[o]);for(var s=Nd(n,r),u=0;u<s.length;u+=3)i.push(s.slice(u,u+3));return i}}]),e}();function sf(e){var t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function uf(e,t){for(var n=0;n<t.length;n++)e.push(t[n].x),e.push(t[n].y)}var lf=function(e){Y(n,e);var t=$(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Pd([new ii(.5,.5),new ii(-.5,.5),new ii(-.5,-.5),new ii(.5,-.5)]),i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};V(this,n),(e=t.call(this)).type="ExtrudeGeometry",e.parameters={shapes:r,options:i},r=Array.isArray(r)?r:[r];for(var a=K(e),o=[],s=[],u=0,l=r.length;u<l;u++){var c=r[u];h(c)}function h(e){var t,n,r,u,l,c=[],h=void 0!==i.curveSegments?i.curveSegments:12,d=void 0!==i.steps?i.steps:1,f=void 0!==i.depth?i.depth:1,p=void 0===i.bevelEnabled||i.bevelEnabled,A=void 0!==i.bevelThickness?i.bevelThickness:.2,v=void 0!==i.bevelSize?i.bevelSize:A-.1,m=void 0!==i.bevelOffset?i.bevelOffset:0,g=void 0!==i.bevelSegments?i.bevelSegments:3,y=i.extrudePath,b=void 0!==i.UVGenerator?i.UVGenerator:cf,x=!1;y&&(t=y.getSpacedPoints(d),x=!0,p=!1,n=y.computeFrenetFrames(d,!1),r=new zi,u=new zi,l=new zi),p||(g=0,A=0,v=0,m=0);var _=e.extractPoints(h),w=_.shape,S=_.holes;if(!of.isClockWise(w)){w=w.reverse();for(var M=0,k=S.length;M<k;M++){var T=S[M];of.isClockWise(T)&&(S[M]=T.reverse())}}for(var E=of.triangulateShape(w,S),C=w,R=0,B=S.length;R<B;R++){var P=S[R];w=w.concat(P)}function N(e,t,n){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),e.clone().addScaledVector(t,n)}var I=w.length,D=E.length;function L(e,t,n){var r,i,a,o=e.x-t.x,s=e.y-t.y,u=n.x-e.x,l=n.y-e.y,c=o*o+s*s,h=o*l-s*u;if(Math.abs(h)>Number.EPSILON){var d=Math.sqrt(c),f=Math.sqrt(u*u+l*l),p=t.x-s/d,A=t.y+o/d,v=((n.x-l/f-p)*l-(n.y+u/f-A)*u)/(o*l-s*u),m=(r=p+o*v-e.x)*r+(i=A+s*v-e.y)*i;if(m<=2)return new ii(r,i);a=Math.sqrt(m/2)}else{var g=!1;o>Number.EPSILON?u>Number.EPSILON&&(g=!0):o<-Number.EPSILON?u<-Number.EPSILON&&(g=!0):Math.sign(s)===Math.sign(l)&&(g=!0),g?(r=-s,i=o,a=Math.sqrt(c)):(r=o,i=s,a=Math.sqrt(c/2))}return new ii(r/a,i/a)}for(var O=[],F=0,U=C.length,z=U-1,G=F+1;F<U;F++,z++,G++)z===U&&(z=0),G===U&&(G=0),O[F]=L(C[F],C[z],C[G]);for(var q,H=[],V=O.concat(),j=0,W=S.length;j<W;j++){var X=S[j];q=[];for(var Y=0,Q=X.length,J=Q-1,K=Y+1;Y<Q;Y++,J++,K++)J===Q&&(J=0),K===Q&&(K=0),q[Y]=L(X[Y],X[J],X[K]);H.push(q),V=V.concat(q)}for(var Z=0;Z<g;Z++){for(var $=Z/g,ee=A*Math.cos($*Math.PI/2),te=v*Math.sin($*Math.PI/2)+m,ne=0,re=C.length;ne<re;ne++){var ie=N(C[ne],O[ne],te);Be(ie.x,ie.y,-ee)}for(var ae=0,oe=S.length;ae<oe;ae++){var se=S[ae];q=H[ae];for(var ue=0,le=se.length;ue<le;ue++){var ce=N(se[ue],q[ue],te);Be(ce.x,ce.y,-ee)}}}for(var he=v+m,de=0;de<I;de++){var fe=p?N(w[de],V[de],he):w[de];x?(u.copy(n.normals[0]).multiplyScalar(fe.x),r.copy(n.binormals[0]).multiplyScalar(fe.y),l.copy(t[0]).add(u).add(r),Be(l.x,l.y,l.z)):Be(fe.x,fe.y,0)}for(var pe=1;pe<=d;pe++)for(var Ae=0;Ae<I;Ae++){var ve=p?N(w[Ae],V[Ae],he):w[Ae];x?(u.copy(n.normals[pe]).multiplyScalar(ve.x),r.copy(n.binormals[pe]).multiplyScalar(ve.y),l.copy(t[pe]).add(u).add(r),Be(l.x,l.y,l.z)):Be(ve.x,ve.y,f/d*pe)}for(var me=g-1;me>=0;me--){for(var ge=me/g,ye=A*Math.cos(ge*Math.PI/2),be=v*Math.sin(ge*Math.PI/2)+m,xe=0,_e=C.length;xe<_e;xe++){var we=N(C[xe],O[xe],be);Be(we.x,we.y,f+ye)}for(var Se=0,Me=S.length;Se<Me;Se++){var ke=S[Se];q=H[Se];for(var Te=0,Ee=ke.length;Te<Ee;Te++){var Ce=N(ke[Te],q[Te],be);x?Be(Ce.x,Ce.y+t[d-1].y,t[d-1].x+ye):Be(Ce.x,Ce.y,f+ye)}}}function Re(e,t){for(var n=e.length;--n>=0;){var r=n,i=n-1;i<0&&(i=e.length-1);for(var a=0,o=d+2*g;a<o;a++){var s=I*a,u=I*(a+1);Ne(t+r+s,t+i+s,t+i+u,t+r+u)}}}function Be(e,t,n){c.push(e),c.push(t),c.push(n)}function Pe(e,t,n){Ie(e),Ie(t),Ie(n);var r=o.length/3,i=b.generateTopUV(a,o,r-3,r-2,r-1);De(i[0]),De(i[1]),De(i[2])}function Ne(e,t,n,r){Ie(e),Ie(t),Ie(r),Ie(t),Ie(n),Ie(r);var i=o.length/3,s=b.generateSideWallUV(a,o,i-6,i-3,i-2,i-1);De(s[0]),De(s[1]),De(s[3]),De(s[1]),De(s[2]),De(s[3])}function Ie(e){o.push(c[3*e+0]),o.push(c[3*e+1]),o.push(c[3*e+2])}function De(e){s.push(e.x),s.push(e.y)}!function(){var e=o.length/3;if(p){for(var t=0,n=I*t,r=0;r<D;r++){var i=E[r];Pe(i[2]+n,i[1]+n,i[0]+n)}n=I*(t=d+2*g);for(var s=0;s<D;s++){var u=E[s];Pe(u[0]+n,u[1]+n,u[2]+n)}}else{for(var l=0;l<D;l++){var c=E[l];Pe(c[2],c[1],c[0])}for(var h=0;h<D;h++){var f=E[h];Pe(f[0]+I*d,f[1]+I*d,f[2]+I*d)}}a.addGroup(e,o.length/3-e,0)}(),function(){var e=o.length/3,t=0;Re(C,t),t+=C.length;for(var n=0,r=S.length;n<r;n++){var i=S[n];Re(i,t),t+=i.length}a.addGroup(e,o.length/3-e,1)}()}return e.setAttribute("position",new Ro(o,3)),e.setAttribute("uv",new Ro(s,2)),e.computeVertexNormals(),e}return W(n,[{key:"copy",value:function(e){return oe(Q(n.prototype),"copy",this).call(this,e),this.parameters=Object.assign({},e.parameters),this}},{key:"toJSON",value:function(){var e=oe(Q(n.prototype),"toJSON",this).call(this);return function(e,t,n){if(n.shapes=[],Array.isArray(e))for(var r=0,i=e.length;r<i;r++){var a=e[r];n.shapes.push(a.uuid)}else n.shapes.push(e.uuid);n.options=Object.assign({},t),void 0!==t.extrudePath&&(n.options.extrudePath=t.extrudePath.toJSON());return n}(this.parameters.shapes,this.parameters.options,e)}}],[{key:"fromJSON",value:function(e,t){for(var r=[],i=0,a=e.shapes.length;i<a;i++){var o=t[e.shapes[i]];r.push(o)}var s=e.options.extrudePath;return void 0!==s&&(e.options.extrudePath=(new md[s.type]).fromJSON(s)),new n(r,e.options)}}]),n}(Fo),cf={generateTopUV:function(e,t,n,r,i){var a=t[3*n],o=t[3*n+1],s=t[3*r],u=t[3*r+1],l=t[3*i],c=t[3*i+1];return[new ii(a,o),new ii(s,u),new ii(l,c)]},generateSideWallUV:function(e,t,n,r,i,a){var o=t[3*n],s=t[3*n+1],u=t[3*n+2],l=t[3*r],c=t[3*r+1],h=t[3*r+2],d=t[3*i],f=t[3*i+1],p=t[3*i+2],A=t[3*a],v=t[3*a+1],m=t[3*a+2];return Math.abs(s-c)<Math.abs(o-l)?[new ii(o,1-u),new ii(l,1-h),new ii(d,1-p),new ii(A,1-m)]:[new ii(s,1-u),new ii(c,1-h),new ii(f,1-p),new ii(v,1-m)]}};var hf=function(e){Y(n,e);var t=$(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;V(this,n);var a=(1+Math.sqrt(5))/2,o=[-1,a,0,1,a,0,-1,-a,0,1,-a,0,0,-1,a,0,1,a,0,-1,-a,0,1,-a,a,0,-1,a,0,1,-a,0,-1,-a,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];return(e=t.call(this,o,s,r,i)).type="IcosahedronGeometry",e.parameters={radius:r,detail:i},e}return W(n,null,[{key:"fromJSON",value:function(e){return new n(e.radius,e.detail)}}]),n}(Md),df=function(e){Y(n,e);var t=$(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;V(this,n);var a=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],o=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];return(e=t.call(this,a,o,r,i)).type="OctahedronGeometry",e.parameters={radius:r,detail:i},e}return W(n,null,[{key:"fromJSON",value:function(e){return new n(e.radius,e.detail)}}]),n}(Md),ff=function(e){Y(n,e);var t=$(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:32,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2*Math.PI;V(this,n),(e=t.call(this)).type="RingGeometry",e.parameters={innerRadius:r,outerRadius:i,thetaSegments:a,phiSegments:o,thetaStart:s,thetaLength:u},a=Math.max(3,a);for(var l=[],c=[],h=[],d=[],f=r,p=(i-r)/(o=Math.max(1,o)),A=new zi,v=new ii,m=0;m<=o;m++){for(var g=0;g<=a;g++){var y=s+g/a*u;A.x=f*Math.cos(y),A.y=f*Math.sin(y),c.push(A.x,A.y,A.z),h.push(0,0,1),v.x=(A.x/i+1)/2,v.y=(A.y/i+1)/2,d.push(v.x,v.y)}f+=p}for(var b=0;b<o;b++)for(var x=b*(a+1),_=0;_<a;_++){var w=_+x,S=w,M=w+a+1,k=w+a+2,T=w+1;l.push(S,M,T),l.push(M,k,T)}return e.setIndex(l),e.setAttribute("position",new Ro(c,3)),e.setAttribute("normal",new Ro(h,3)),e.setAttribute("uv",new Ro(d,2)),e}return W(n,[{key:"copy",value:function(e){return oe(Q(n.prototype),"copy",this).call(this,e),this.parameters=Object.assign({},e.parameters),this}}],[{key:"fromJSON",value:function(e){return new n(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}]),n}(Fo),pf=function(e){Y(n,e);var t=$(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Pd([new ii(0,.5),new ii(-.5,-.5),new ii(.5,-.5)]),i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12;V(this,n),(e=t.call(this)).type="ShapeGeometry",e.parameters={shapes:r,curveSegments:i};var a=[],o=[],s=[],u=[],l=0,c=0;if(!1===Array.isArray(r))d(r);else for(var h=0;h<r.length;h++)d(r[h]),e.addGroup(l,c,h),l+=c,c=0;function d(e){var t=o.length/3,n=e.extractPoints(i),r=n.shape,l=n.holes;!1===of.isClockWise(r)&&(r=r.reverse());for(var h=0,d=l.length;h<d;h++){var f=l[h];!0===of.isClockWise(f)&&(l[h]=f.reverse())}for(var p=of.triangulateShape(r,l),A=0,v=l.length;A<v;A++){var m=l[A];r=r.concat(m)}for(var g=0,y=r.length;g<y;g++){var b=r[g];o.push(b.x,b.y,0),s.push(0,0,1),u.push(b.x,b.y)}for(var x=0,_=p.length;x<_;x++){var w=p[x],S=w[0]+t,M=w[1]+t,k=w[2]+t;a.push(S,M,k),c+=3}}return e.setIndex(a),e.setAttribute("position",new Ro(o,3)),e.setAttribute("normal",new Ro(s,3)),e.setAttribute("uv",new Ro(u,2)),e}return W(n,[{key:"copy",value:function(e){return oe(Q(n.prototype),"copy",this).call(this,e),this.parameters=Object.assign({},e.parameters),this}},{key:"toJSON",value:function(){var e=oe(Q(n.prototype),"toJSON",this).call(this);return function(e,t){if(t.shapes=[],Array.isArray(e))for(var n=0,r=e.length;n<r;n++){var i=e[n];t.shapes.push(i.uuid)}else t.shapes.push(e.uuid);return t}(this.parameters.shapes,e)}}],[{key:"fromJSON",value:function(e,t){for(var r=[],i=0,a=e.shapes.length;i<a;i++){var o=t[e.shapes[i]];r.push(o)}return new n(r,e.curveSegments)}}]),n}(Fo);var Af=function(e){Y(n,e);var t=$(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2*Math.PI,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Math.PI;V(this,n),(e=t.call(this)).type="SphereGeometry",e.parameters={radius:r,widthSegments:i,heightSegments:a,phiStart:o,phiLength:s,thetaStart:u,thetaLength:l},i=Math.max(3,Math.floor(i)),a=Math.max(2,Math.floor(a));for(var c=Math.min(u+l,Math.PI),h=0,d=[],f=new zi,p=new zi,A=[],v=[],m=[],g=[],y=0;y<=a;y++){var b=[],x=y/a,_=0;0===y&&0===u?_=.5/i:y===a&&c===Math.PI&&(_=-.5/i);for(var w=0;w<=i;w++){var S=w/i;f.x=-r*Math.cos(o+S*s)*Math.sin(u+x*l),f.y=r*Math.cos(u+x*l),f.z=r*Math.sin(o+S*s)*Math.sin(u+x*l),v.push(f.x,f.y,f.z),p.copy(f).normalize(),m.push(p.x,p.y,p.z),g.push(S+_,1-x),b.push(h++)}d.push(b)}for(var M=0;M<a;M++)for(var k=0;k<i;k++){var T=d[M][k+1],E=d[M][k],C=d[M+1][k],R=d[M+1][k+1];(0!==M||u>0)&&A.push(T,E,R),(M!==a-1||c<Math.PI)&&A.push(E,C,R)}return e.setIndex(A),e.setAttribute("position",new Ro(v,3)),e.setAttribute("normal",new Ro(m,3)),e.setAttribute("uv",new Ro(g,2)),e}return W(n,[{key:"copy",value:function(e){return oe(Q(n.prototype),"copy",this).call(this,e),this.parameters=Object.assign({},e.parameters),this}}],[{key:"fromJSON",value:function(e){return new n(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}]),n}(Fo),vf=function(e){Y(n,e);var t=$(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;V(this,n);var a=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],o=[2,1,0,0,3,2,1,3,0,2,3,1];return(e=t.call(this,a,o,r,i)).type="TetrahedronGeometry",e.parameters={radius:r,detail:i},e}return W(n,null,[{key:"fromJSON",value:function(e){return new n(e.radius,e.detail)}}]),n}(Md),mf=function(e){Y(n,e);var t=$(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.4,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:12,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:48,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2*Math.PI;V(this,n),(e=t.call(this)).type="TorusGeometry",e.parameters={radius:r,tube:i,radialSegments:a,tubularSegments:o,arc:s},a=Math.floor(a),o=Math.floor(o);for(var u=[],l=[],c=[],h=[],d=new zi,f=new zi,p=new zi,A=0;A<=a;A++)for(var v=0;v<=o;v++){var m=v/o*s,g=A/a*Math.PI*2;f.x=(r+i*Math.cos(g))*Math.cos(m),f.y=(r+i*Math.cos(g))*Math.sin(m),f.z=i*Math.sin(g),l.push(f.x,f.y,f.z),d.x=r*Math.cos(m),d.y=r*Math.sin(m),p.subVectors(f,d).normalize(),c.push(p.x,p.y,p.z),h.push(v/o),h.push(A/a)}for(var y=1;y<=a;y++)for(var b=1;b<=o;b++){var x=(o+1)*y+b-1,_=(o+1)*(y-1)+b-1,w=(o+1)*(y-1)+b,S=(o+1)*y+b;u.push(x,_,S),u.push(_,w,S)}return e.setIndex(u),e.setAttribute("position",new Ro(l,3)),e.setAttribute("normal",new Ro(c,3)),e.setAttribute("uv",new Ro(h,2)),e}return W(n,[{key:"copy",value:function(e){return oe(Q(n.prototype),"copy",this).call(this,e),this.parameters=Object.assign({},e.parameters),this}}],[{key:"fromJSON",value:function(e){return new n(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}]),n}(Fo),gf=function(e){Y(n,e);var t=$(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.4,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:64,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:3;V(this,n),(e=t.call(this)).type="TorusKnotGeometry",e.parameters={radius:r,tube:i,tubularSegments:a,radialSegments:o,p:s,q:u},a=Math.floor(a),o=Math.floor(o);for(var l=[],c=[],h=[],d=[],f=new zi,p=new zi,A=new zi,v=new zi,m=new zi,g=new zi,y=new zi,b=0;b<=a;++b){var x=b/a*s*Math.PI*2;P(x,s,u,r,A),P(x+.01,s,u,r,v),g.subVectors(v,A),y.addVectors(v,A),m.crossVectors(g,y),y.crossVectors(m,g),m.normalize(),y.normalize();for(var _=0;_<=o;++_){var w=_/o*Math.PI*2,S=-i*Math.cos(w),M=i*Math.sin(w);f.x=A.x+(S*y.x+M*m.x),f.y=A.y+(S*y.y+M*m.y),f.z=A.z+(S*y.z+M*m.z),c.push(f.x,f.y,f.z),p.subVectors(f,A).normalize(),h.push(p.x,p.y,p.z),d.push(b/a),d.push(_/o)}}for(var k=1;k<=a;k++)for(var T=1;T<=o;T++){var E=(o+1)*(k-1)+(T-1),C=(o+1)*k+(T-1),R=(o+1)*k+T,B=(o+1)*(k-1)+T;l.push(E,C,B),l.push(C,R,B)}function P(e,t,n,r,i){var a=Math.cos(e),o=Math.sin(e),s=n/t*e,u=Math.cos(s);i.x=r*(2+u)*.5*a,i.y=r*(2+u)*o*.5,i.z=r*Math.sin(s)*.5}return e.setIndex(l),e.setAttribute("position",new Ro(c,3)),e.setAttribute("normal",new Ro(h,3)),e.setAttribute("uv",new Ro(d,2)),e}return W(n,[{key:"copy",value:function(e){return oe(Q(n.prototype),"copy",this).call(this,e),this.parameters=Object.assign({},e.parameters),this}}],[{key:"fromJSON",value:function(e){return new n(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}]),n}(Fo),yf=function(e){Y(n,e);var t=$(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ad(new zi(-1,-1,0),new zi(-1,1,0),new zi(1,1,0)),i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:64,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];V(this,n),(e=t.call(this)).type="TubeGeometry",e.parameters={path:r,tubularSegments:i,radius:a,radialSegments:o,closed:s};var u=r.computeFrenetFrames(i,s);e.tangents=u.tangents,e.normals=u.normals,e.binormals=u.binormals;var l=new zi,c=new zi,h=new ii,d=new zi,f=[],p=[],A=[],v=[];function m(){for(var e=0;e<i;e++)g(e);g(!1===s?i:0),b(),y()}function g(e){d=r.getPointAt(e/i,d);for(var t=u.normals[e],n=u.binormals[e],s=0;s<=o;s++){var h=s/o*Math.PI*2,A=Math.sin(h),v=-Math.cos(h);c.x=v*t.x+A*n.x,c.y=v*t.y+A*n.y,c.z=v*t.z+A*n.z,c.normalize(),p.push(c.x,c.y,c.z),l.x=d.x+a*c.x,l.y=d.y+a*c.y,l.z=d.z+a*c.z,f.push(l.x,l.y,l.z)}}function y(){for(var e=1;e<=i;e++)for(var t=1;t<=o;t++){var n=(o+1)*(e-1)+(t-1),r=(o+1)*e+(t-1),a=(o+1)*e+t,s=(o+1)*(e-1)+t;v.push(n,r,s),v.push(r,a,s)}}function b(){for(var e=0;e<=i;e++)for(var t=0;t<=o;t++)h.x=e/i,h.y=t/o,A.push(h.x,h.y)}return m(),e.setIndex(v),e.setAttribute("position",new Ro(f,3)),e.setAttribute("normal",new Ro(p,3)),e.setAttribute("uv",new Ro(A,2)),e}return W(n,[{key:"copy",value:function(e){return oe(Q(n.prototype),"copy",this).call(this,e),this.parameters=Object.assign({},e.parameters),this}},{key:"toJSON",value:function(){var e=oe(Q(n.prototype),"toJSON",this).call(this);return e.path=this.parameters.path.toJSON(),e}}],[{key:"fromJSON",value:function(e){return new n((new md[e.path.type]).fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}]),n}(Fo),bf=function(e){Y(n,e);var t=$(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(V(this,n),(e=t.call(this)).type="WireframeGeometry",e.parameters={geometry:r},null!==r){var i=[],a=new Set,o=new zi,s=new zi;if(null!==r.index){var u=r.attributes.position,l=r.index,c=r.groups;0===c.length&&(c=[{start:0,count:l.count,materialIndex:0}]);for(var h=0,d=c.length;h<d;++h)for(var f=c[h],p=f.start,A=f.count,v=p,m=p+A;v<m;v+=3)for(var g=0;g<3;g++){var y=l.getX(v+g),b=l.getX(v+(g+1)%3);o.fromBufferAttribute(u,y),s.fromBufferAttribute(u,b),!0===xf(o,s,a)&&(i.push(o.x,o.y,o.z),i.push(s.x,s.y,s.z))}}else for(var x=r.attributes.position,_=0,w=x.count/3;_<w;_++)for(var S=0;S<3;S++){var M=3*_+S,k=3*_+(S+1)%3;o.fromBufferAttribute(x,M),s.fromBufferAttribute(x,k),!0===xf(o,s,a)&&(i.push(o.x,o.y,o.z),i.push(s.x,s.y,s.z))}e.setAttribute("position",new Ro(i,3))}return e}return W(n,[{key:"copy",value:function(e){return oe(Q(n.prototype),"copy",this).call(this,e),this.parameters=Object.assign({},e.parameters),this}}]),n}(Fo);function xf(e,t,n){var r="".concat(e.x,",").concat(e.y,",").concat(e.z,"-").concat(t.x,",").concat(t.y,",").concat(t.z),i="".concat(t.x,",").concat(t.y,",").concat(t.z,"-").concat(e.x,",").concat(e.y,",").concat(e.z);return!0!==n.has(r)&&!0!==n.has(i)&&(n.add(r),n.add(i),!0)}var _f=Object.freeze({__proto__:null,BoxGeometry:Zo,CapsuleGeometry:xd,CircleGeometry:_d,ConeGeometry:Sd,CylinderGeometry:wd,DodecahedronGeometry:kd,EdgesGeometry:Bd,ExtrudeGeometry:lf,IcosahedronGeometry:hf,LatheGeometry:bd,OctahedronGeometry:df,PlaneGeometry:_s,PolyhedronGeometry:Md,RingGeometry:ff,ShapeGeometry:pf,SphereGeometry:Af,TetrahedronGeometry:vf,TorusGeometry:mf,TorusKnotGeometry:gf,TubeGeometry:yf,WireframeGeometry:bf}),wf=function(e){Y(n,e);var t=$(n);function n(e){var r;return V(this,n),(r=t.call(this)).isShadowMaterial=!0,r.color=new uo(0),r.transparent=!0,r.fog=!0,r.setValues(e),r}return W(n,[{key:"copy",value:function(e){return oe(Q(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.fog=e.fog,this}}],[{key:"type",get:function(){return"ShadowMaterial"}}]),n}(ho),Sf=function(e){Y(n,e);var t=$(n);function n(e){var r;return V(this,n),(r=t.call(this,e)).isRawShaderMaterial=!0,r}return W(n,null,[{key:"type",get:function(){return"RawShaderMaterial"}}]),n}(rs),Mf=function(e){Y(n,e);var t=$(n);function n(e){var r;return V(this,n),(r=t.call(this)).isMeshStandardMaterial=!0,r.defines={STANDARD:""},r.color=new uo(16777215),r.roughness=1,r.metalness=0,r.map=null,r.lightMap=null,r.lightMapIntensity=1,r.aoMap=null,r.aoMapIntensity=1,r.emissive=new uo(0),r.emissiveIntensity=1,r.emissiveMap=null,r.bumpMap=null,r.bumpScale=1,r.normalMap=null,r.normalMapType=nr,r.normalScale=new ii(1,1),r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.roughnessMap=null,r.metalnessMap=null,r.alphaMap=null,r.envMap=null,r.envMapRotation=new ka,r.envMapIntensity=1,r.wireframe=!1,r.wireframeLinewidth=1,r.wireframeLinecap="round",r.wireframeLinejoin="round",r.flatShading=!1,r.fog=!0,r.setValues(e),r}return W(n,[{key:"copy",value:function(e){return oe(Q(n.prototype),"copy",this).call(this,e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}],[{key:"type",get:function(){return"MeshStandardMaterial"}}]),n}(ho),kf=function(e){Y(n,e);var t=$(n);function n(e){var r;return V(this,n),(r=t.call(this)).isMeshPhysicalMaterial=!0,r.defines={STANDARD:"",PHYSICAL:""},r.anisotropyRotation=0,r.anisotropyMap=null,r.clearcoatMap=null,r.clearcoatRoughness=0,r.clearcoatRoughnessMap=null,r.clearcoatNormalScale=new ii(1,1),r.clearcoatNormalMap=null,r.ior=1.5,Object.defineProperty(K(r),"reflectivity",{get:function(){return Zr(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(e){this.ior=(1+.4*e)/(1-.4*e)}}),r.iridescenceMap=null,r.iridescenceIOR=1.3,r.iridescenceThicknessRange=[100,400],r.iridescenceThicknessMap=null,r.sheenColor=new uo(0),r.sheenColorMap=null,r.sheenRoughness=1,r.sheenRoughnessMap=null,r.transmissionMap=null,r.thickness=0,r.thicknessMap=null,r.attenuationDistance=1/0,r.attenuationColor=new uo(1,1,1),r.specularIntensity=1,r.specularIntensityMap=null,r.specularColor=new uo(1,1,1),r.specularColorMap=null,r._anisotropy=0,r._clearcoat=0,r._dispersion=0,r._iridescence=0,r._sheen=0,r._transmission=0,r.setValues(e),r}return W(n,[{key:"anisotropy",get:function(){return this._anisotropy},set:function(e){this._anisotropy>0!==e>0&&this.version++,this._anisotropy=e}},{key:"clearcoat",get:function(){return this._clearcoat},set:function(e){this._clearcoat>0!==e>0&&this.version++,this._clearcoat=e}},{key:"iridescence",get:function(){return this._iridescence},set:function(e){this._iridescence>0!==e>0&&this.version++,this._iridescence=e}},{key:"dispersion",get:function(){return this._dispersion},set:function(e){this._dispersion>0!==e>0&&this.version++,this._dispersion=e}},{key:"sheen",get:function(){return this._sheen},set:function(e){this._sheen>0!==e>0&&this.version++,this._sheen=e}},{key:"transmission",get:function(){return this._transmission},set:function(e){this._transmission>0!==e>0&&this.version++,this._transmission=e}},{key:"copy",value:function(e){return oe(Q(n.prototype),"copy",this).call(this,e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=q(e.iridescenceThicknessRange),this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}],[{key:"type",get:function(){return"MeshPhysicalMaterial"}}]),n}(Mf),Tf=function(e){Y(n,e);var t=$(n);function n(e){var r;return V(this,n),(r=t.call(this)).isMeshPhongMaterial=!0,r.color=new uo(16777215),r.specular=new uo(1118481),r.shininess=30,r.map=null,r.lightMap=null,r.lightMapIntensity=1,r.aoMap=null,r.aoMapIntensity=1,r.emissive=new uo(0),r.emissiveIntensity=1,r.emissiveMap=null,r.bumpMap=null,r.bumpScale=1,r.normalMap=null,r.normalMapType=nr,r.normalScale=new ii(1,1),r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.specularMap=null,r.alphaMap=null,r.envMap=null,r.envMapRotation=new ka,r.combine=nt,r.reflectivity=1,r.refractionRatio=.98,r.wireframe=!1,r.wireframeLinewidth=1,r.wireframeLinecap="round",r.wireframeLinejoin="round",r.flatShading=!1,r.fog=!0,r.setValues(e),r}return W(n,[{key:"copy",value:function(e){return oe(Q(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}],[{key:"type",get:function(){return"MeshPhongMaterial"}}]),n}(ho),Ef=function(e){Y(n,e);var t=$(n);function n(e){var r;return V(this,n),(r=t.call(this)).isMeshToonMaterial=!0,r.defines={TOON:""},r.color=new uo(16777215),r.map=null,r.gradientMap=null,r.lightMap=null,r.lightMapIntensity=1,r.aoMap=null,r.aoMapIntensity=1,r.emissive=new uo(0),r.emissiveIntensity=1,r.emissiveMap=null,r.bumpMap=null,r.bumpScale=1,r.normalMap=null,r.normalMapType=nr,r.normalScale=new ii(1,1),r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.alphaMap=null,r.wireframe=!1,r.wireframeLinewidth=1,r.wireframeLinecap="round",r.wireframeLinejoin="round",r.fog=!0,r.setValues(e),r}return W(n,[{key:"copy",value:function(e){return oe(Q(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}],[{key:"type",get:function(){return"MeshToonMaterial"}}]),n}(ho),Cf=function(e){Y(n,e);var t=$(n);function n(e){var r;return V(this,n),(r=t.call(this)).isMeshNormalMaterial=!0,r.bumpMap=null,r.bumpScale=1,r.normalMap=null,r.normalMapType=nr,r.normalScale=new ii(1,1),r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.wireframe=!1,r.wireframeLinewidth=1,r.flatShading=!1,r.setValues(e),r}return W(n,[{key:"copy",value:function(e){return oe(Q(n.prototype),"copy",this).call(this,e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}],[{key:"type",get:function(){return"MeshNormalMaterial"}}]),n}(ho),Rf=function(e){Y(n,e);var t=$(n);function n(e){var r;return V(this,n),(r=t.call(this)).isMeshLambertMaterial=!0,r.color=new uo(16777215),r.map=null,r.lightMap=null,r.lightMapIntensity=1,r.aoMap=null,r.aoMapIntensity=1,r.emissive=new uo(0),r.emissiveIntensity=1,r.emissiveMap=null,r.bumpMap=null,r.bumpScale=1,r.normalMap=null,r.normalMapType=nr,r.normalScale=new ii(1,1),r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.specularMap=null,r.alphaMap=null,r.envMap=null,r.envMapRotation=new ka,r.combine=nt,r.reflectivity=1,r.refractionRatio=.98,r.wireframe=!1,r.wireframeLinewidth=1,r.wireframeLinecap="round",r.wireframeLinejoin="round",r.flatShading=!1,r.fog=!0,r.setValues(e),r}return W(n,[{key:"copy",value:function(e){return oe(Q(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}],[{key:"type",get:function(){return"MeshLambertMaterial"}}]),n}(ho),Bf=function(e){Y(n,e);var t=$(n);function n(e){var r;return V(this,n),(r=t.call(this)).isMeshMatcapMaterial=!0,r.defines={MATCAP:""},r.color=new uo(16777215),r.matcap=null,r.map=null,r.bumpMap=null,r.bumpScale=1,r.normalMap=null,r.normalMapType=nr,r.normalScale=new ii(1,1),r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.alphaMap=null,r.flatShading=!1,r.fog=!0,r.setValues(e),r}return W(n,[{key:"copy",value:function(e){return oe(Q(n.prototype),"copy",this).call(this,e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}],[{key:"type",get:function(){return"MeshMatcapMaterial"}}]),n}(ho),Pf=function(e){Y(n,e);var t=$(n);function n(e){var r;return V(this,n),(r=t.call(this)).isLineDashedMaterial=!0,r.scale=1,r.dashSize=3,r.gapSize=1,r.setValues(e),r}return W(n,[{key:"copy",value:function(e){return oe(Q(n.prototype),"copy",this).call(this,e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}],[{key:"type",get:function(){return"LineDashedMaterial"}}]),n}(Mh);function Nf(e,t,n){return!e||!n&&e.constructor===t?e:"number"===typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)}function If(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Df(e){for(var t=e.length,n=new Array(t),r=0;r!==t;++r)n[r]=r;return n.sort((function(t,n){return e[t]-e[n]})),n}function Lf(e,t,n){for(var r=e.length,i=new e.constructor(r),a=0,o=0;o!==r;++a)for(var s=n[a]*t,u=0;u!==t;++u)i[o++]=e[s+u];return i}function Of(e,t,n,r){for(var i=1,a=e[0];void 0!==a&&void 0===a[r];)a=e[i++];if(void 0!==a){var o=a[r];if(void 0!==o)if(Array.isArray(o))do{void 0!==(o=a[r])&&(t.push(a.time),n.push.apply(n,o)),a=e[i++]}while(void 0!==a);else if(void 0!==o.toArray)do{void 0!==(o=a[r])&&(t.push(a.time),o.toArray(n,n.length)),a=e[i++]}while(void 0!==a);else do{void 0!==(o=a[r])&&(t.push(a.time),n.push(o)),a=e[i++]}while(void 0!==a)}}var Ff={convertArray:Nf,isTypedArray:If,getKeyframeOrder:Df,sortedArray:Lf,flattenJSON:Of,subclip:function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:30,a=e.clone();a.name=t;for(var o=[],s=0;s<a.tracks.length;++s){for(var u=a.tracks[s],l=u.getValueSize(),c=[],h=[],d=0;d<u.times.length;++d){var f=u.times[d]*i;if(!(f<n||f>=r)){c.push(u.times[d]);for(var p=0;p<l;++p)h.push(u.values[d*l+p])}}0!==c.length&&(u.times=Nf(c,u.times.constructor),u.values=Nf(h,u.values.constructor),o.push(u))}a.tracks=o;for(var A=1/0,v=0;v<a.tracks.length;++v)A>a.tracks[v].times[0]&&(A=a.tracks[v].times[0]);for(var m=0;m<a.tracks.length;++m)a.tracks[m].shift(-1*A);return a.resetDuration(),a},makeClipAdditive:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:30;r<=0&&(r=30);for(var i=n.tracks.length,a=t/r,o=function(){var t=n.tracks[s],r=t.ValueTypeName;if("bool"===r||"string"===r)return"continue";var i=e.tracks.find((function(e){return e.name===t.name&&e.ValueTypeName===r}));if(void 0===i)return"continue";var o=0,u=t.getValueSize();t.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(o=u/3);var l=0,c=i.getValueSize();i.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(l=c/3);var h,d=t.times.length-1;if(a<=t.times[0]){var f=o,p=u-o;h=t.values.slice(f,p)}else if(a>=t.times[d]){var A=d*u+o,v=A+u-o;h=t.values.slice(A,v)}else{var m=t.createInterpolant(),g=o,y=u-o;m.evaluate(a),h=m.resultBuffer.slice(g,y)}"quaternion"===r&&(new Ui).fromArray(h).normalize().conjugate().toArray(h);for(var b=i.times.length,x=0;x<b;++x){var _=x*c+l;if("quaternion"===r)Ui.multiplyQuaternionsFlat(i.values,_,h,0,i.values,_);else for(var w=c-2*l,S=0;S<w;++S)i.values[_+S]-=h[S]}},s=0;s<i;++s)o();return e.blendMode=Yn,e}},Uf=function(){function e(t,n,r,i){V(this,e),this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==i?i:new n.constructor(r),this.sampleValues=n,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}return W(e,[{key:"evaluate",value:function(e){var t=this.parameterPositions,n=this._cachedIndex,r=t[n],i=t[n-1];e:{t:{var a;n:{r:if(!(e<r)){for(var o=n+2;;){if(void 0===r){if(e<i)break r;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===o)break;if(i=r,e<(r=t[++n]))break t}a=t.length;break n}if(e>=i)break e;var s=t[1];e<s&&(n=2,i=s);for(var u=n-2;;){if(void 0===i)return this._cachedIndex=0,this.copySampleValue_(0);if(n===u)break;if(r=i,e>=(i=t[--n-1]))break t}a=n,n=0}for(;n<a;){var l=n+a>>>1;e<t[l]?a=l:n=l+1}if(r=t[n],void 0===(i=t[n-1]))return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===r)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,e,r)}},{key:"getSettings_",value:function(){return this.settings||this.DefaultSettings_}},{key:"copySampleValue_",value:function(e){for(var t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r,a=0;a!==r;++a)t[a]=n[i+a];return t}},{key:"interpolate_",value:function(){throw new Error("call to abstract method")}},{key:"intervalChanged_",value:function(){}}]),e}(),zf=function(e){Y(n,e);var t=$(n);function n(e,r,i,a){var o;return V(this,n),(o=t.call(this,e,r,i,a))._weightPrev=-0,o._offsetPrev=-0,o._weightNext=-0,o._offsetNext=-0,o.DefaultSettings_={endingStart:Vn,endingEnd:Vn},o}return W(n,[{key:"intervalChanged_",value:function(e,t,n){var r=this.parameterPositions,i=e-2,a=e+1,o=r[i],s=r[a];if(void 0===o)switch(this.getSettings_().endingStart){case jn:i=e,o=2*t-n;break;case Wn:o=t+r[i=r.length-2]-r[i+1];break;default:i=e,o=n}if(void 0===s)switch(this.getSettings_().endingEnd){case jn:a=e,s=2*n-t;break;case Wn:a=1,s=n+r[1]-r[0];break;default:a=e-1,s=t}var u=.5*(n-t),l=this.valueSize;this._weightPrev=u/(t-o),this._weightNext=u/(s-n),this._offsetPrev=i*l,this._offsetNext=a*l}},{key:"interpolate_",value:function(e,t,n,r){for(var i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=e*o,u=s-o,l=this._offsetPrev,c=this._offsetNext,h=this._weightPrev,d=this._weightNext,f=(n-t)/(r-t),p=f*f,A=p*f,v=-h*A+2*h*p-h*f,m=(1+h)*A+(-1.5-2*h)*p+(-.5+h)*f+1,g=(-1-d)*A+(1.5+d)*p+.5*f,y=d*A-d*p,b=0;b!==o;++b)i[b]=v*a[l+b]+m*a[u+b]+g*a[s+b]+y*a[c+b];return i}}]),n}(Uf),Gf=function(e){Y(n,e);var t=$(n);function n(e,r,i,a){return V(this,n),t.call(this,e,r,i,a)}return W(n,[{key:"interpolate_",value:function(e,t,n,r){for(var i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=e*o,u=s-o,l=(n-t)/(r-t),c=1-l,h=0;h!==o;++h)i[h]=a[u+h]*c+a[s+h]*l;return i}}]),n}(Uf),qf=function(e){Y(n,e);var t=$(n);function n(e,r,i,a){return V(this,n),t.call(this,e,r,i,a)}return W(n,[{key:"interpolate_",value:function(e){return this.copySampleValue_(e-1)}}]),n}(Uf),Hf=function(){function e(t,n,r,i){if(V(this,e),void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===n||0===n.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=Nf(n,this.TimeBufferType),this.values=Nf(r,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}return W(e,[{key:"InterpolantFactoryMethodDiscrete",value:function(e){return new qf(this.times,this.values,this.getValueSize(),e)}},{key:"InterpolantFactoryMethodLinear",value:function(e){return new Gf(this.times,this.values,this.getValueSize(),e)}},{key:"InterpolantFactoryMethodSmooth",value:function(e){return new zf(this.times,this.values,this.getValueSize(),e)}},{key:"setInterpolation",value:function(e){var t;switch(e){case Gn:t=this.InterpolantFactoryMethodDiscrete;break;case qn:t=this.InterpolantFactoryMethodLinear;break;case Hn:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){var n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=t,this}},{key:"getInterpolation",value:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Gn;case this.InterpolantFactoryMethodLinear:return qn;case this.InterpolantFactoryMethodSmooth:return Hn}}},{key:"getValueSize",value:function(){return this.values.length/this.times.length}},{key:"shift",value:function(e){if(0!==e)for(var t=this.times,n=0,r=t.length;n!==r;++n)t[n]+=e;return this}},{key:"scale",value:function(e){if(1!==e)for(var t=this.times,n=0,r=t.length;n!==r;++n)t[n]*=e;return this}},{key:"trim",value:function(e,t){for(var n=this.times,r=n.length,i=0,a=r-1;i!==r&&n[i]<e;)++i;for(;-1!==a&&n[a]>t;)--a;if(++a,0!==i||a!==r){i>=a&&(i=(a=Math.max(a,1))-1);var o=this.getValueSize();this.times=n.slice(i,a),this.values=this.values.slice(i*o,a*o)}return this}},{key:"validate",value:function(){var e=!0,t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);var n=this.times,r=this.values,i=n.length;0===i&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);for(var a=null,o=0;o!==i;o++){var s=n[o];if("number"===typeof s&&isNaN(s)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,o,s),e=!1;break}if(null!==a&&a>s){console.error("THREE.KeyframeTrack: Out of order keys.",this,o,s,a),e=!1;break}a=s}if(void 0!==r&&If(r))for(var u=0,l=r.length;u!==l;++u){var c=r[u];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,u,c),e=!1;break}}return e}},{key:"optimize",value:function(){for(var e=this.times.slice(),t=this.values.slice(),n=this.getValueSize(),r=this.getInterpolation()===Hn,i=e.length-1,a=1,o=1;o<i;++o){var s=!1,u=e[o];if(u!==e[o+1]&&(1!==o||u!==e[0]))if(r)s=!0;else for(var l=o*n,c=l-n,h=l+n,d=0;d!==n;++d){var f=t[l+d];if(f!==t[c+d]||f!==t[h+d]){s=!0;break}}if(s){if(o!==a){e[a]=e[o];for(var p=o*n,A=a*n,v=0;v!==n;++v)t[A+v]=t[p+v]}++a}}if(i>0){e[a]=e[i];for(var m=i*n,g=a*n,y=0;y!==n;++y)t[g+y]=t[m+y];++a}return a!==e.length?(this.times=e.slice(0,a),this.values=t.slice(0,a*n)):(this.times=e,this.values=t),this}},{key:"clone",value:function(){var e=this.times.slice(),t=this.values.slice(),n=new(0,this.constructor)(this.name,e,t);return n.createInterpolant=this.createInterpolant,n}}],[{key:"toJSON",value:function(e){var t,n=e.constructor;if(n.toJSON!==this.toJSON)t=n.toJSON(e);else{t={name:e.name,times:Nf(e.times,Array),values:Nf(e.values,Array)};var r=e.getInterpolation();r!==e.DefaultInterpolation&&(t.interpolation=r)}return t.type=e.ValueTypeName,t}}]),e}();Hf.prototype.TimeBufferType=Float32Array,Hf.prototype.ValueBufferType=Float32Array,Hf.prototype.DefaultInterpolation=qn;var Vf=function(e){Y(n,e);var t=$(n);function n(e,r,i){return V(this,n),t.call(this,e,r,i)}return W(n)}(Hf);Vf.prototype.ValueTypeName="bool",Vf.prototype.ValueBufferType=Array,Vf.prototype.DefaultInterpolation=Gn,Vf.prototype.InterpolantFactoryMethodLinear=void 0,Vf.prototype.InterpolantFactoryMethodSmooth=void 0;var jf=function(e){Y(n,e);var t=$(n);function n(){return V(this,n),t.apply(this,arguments)}return W(n)}(Hf);jf.prototype.ValueTypeName="color";var Wf=function(e){Y(n,e);var t=$(n);function n(){return V(this,n),t.apply(this,arguments)}return W(n)}(Hf);Wf.prototype.ValueTypeName="number";var Xf=function(e){Y(n,e);var t=$(n);function n(e,r,i,a){return V(this,n),t.call(this,e,r,i,a)}return W(n,[{key:"interpolate_",value:function(e,t,n,r){for(var i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=(n-t)/(r-t),u=e*o,l=u+o;u!==l;u+=4)Ui.slerpFlat(i,0,a,u-o,a,u,s);return i}}]),n}(Uf),Yf=function(e){Y(n,e);var t=$(n);function n(){return V(this,n),t.apply(this,arguments)}return W(n,[{key:"InterpolantFactoryMethodLinear",value:function(e){return new Xf(this.times,this.values,this.getValueSize(),e)}}]),n}(Hf);Yf.prototype.ValueTypeName="quaternion",Yf.prototype.InterpolantFactoryMethodSmooth=void 0;var Qf=function(e){Y(n,e);var t=$(n);function n(e,r,i){return V(this,n),t.call(this,e,r,i)}return W(n)}(Hf);Qf.prototype.ValueTypeName="string",Qf.prototype.ValueBufferType=Array,Qf.prototype.DefaultInterpolation=Gn,Qf.prototype.InterpolantFactoryMethodLinear=void 0,Qf.prototype.InterpolantFactoryMethodSmooth=void 0;var Jf=function(e){Y(n,e);var t=$(n);function n(){return V(this,n),t.apply(this,arguments)}return W(n)}(Hf);Jf.prototype.ValueTypeName="vector";var Kf=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Xn;V(this,e),this.name=t,this.tracks=r,this.duration=n,this.blendMode=i,this.uuid=Kr(),this.duration<0&&this.resetDuration()}return W(e,[{key:"resetDuration",value:function(){for(var e=0,t=0,n=this.tracks.length;t!==n;++t){var r=this.tracks[t];e=Math.max(e,r.times[r.times.length-1])}return this.duration=e,this}},{key:"trim",value:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}},{key:"validate",value:function(){for(var e=!0,t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}},{key:"optimize",value:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}},{key:"clone",value:function(){for(var e=[],t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}},{key:"toJSON",value:function(){return this.constructor.toJSON(this)}}],[{key:"parse",value:function(e){for(var t=[],n=e.tracks,r=1/(e.fps||1),i=0,a=n.length;i!==a;++i)t.push(Zf(n[i]).scale(r));var o=new this(e.name,e.duration,t,e.blendMode);return o.uuid=e.uuid,o}},{key:"toJSON",value:function(e){for(var t=[],n=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode},i=0,a=n.length;i!==a;++i)t.push(Hf.toJSON(n[i]));return r}},{key:"CreateFromMorphTargetSequence",value:function(e,t,n,r){for(var i=t.length,a=[],o=0;o<i;o++){var s=[],u=[];s.push((o+i-1)%i,o,(o+1)%i),u.push(0,1,0);var l=Df(s);s=Lf(s,1,l),u=Lf(u,1,l),r||0!==s[0]||(s.push(i),u.push(u[0])),a.push(new Wf(".morphTargetInfluences["+t[o].name+"]",s,u).scale(1/n))}return new this(e,-1,a)}},{key:"findByName",value:function(e,t){var n=e;if(!Array.isArray(e)){var r=e;n=r.geometry&&r.geometry.animations||r.animations}for(var i=0;i<n.length;i++)if(n[i].name===t)return n[i];return null}},{key:"CreateClipsFromMorphTargetSequences",value:function(e,t,n){for(var r={},i=/^([\w-]*?)([\d]+)$/,a=0,o=e.length;a<o;a++){var s=e[a],u=s.name.match(i);if(u&&u.length>1){var l=u[1],c=r[l];c||(r[l]=c=[]),c.push(s)}}var h=[];for(var d in r)h.push(this.CreateFromMorphTargetSequence(d,r[d],t,n));return h}},{key:"parseAnimation",value:function(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var n=function(e,t,n,r,i){if(0!==n.length){var a=[],o=[];Of(n,a,o,r),0!==a.length&&i.push(new e(t,a,o))}},r=[],i=e.name||"default",a=e.fps||30,o=e.blendMode,s=e.length||-1,u=e.hierarchy||[],l=0;l<u.length;l++){var c=u[l].keys;if(c&&0!==c.length)if(c[0].morphTargets){var h={},d=void 0;for(d=0;d<c.length;d++)if(c[d].morphTargets)for(var f=0;f<c[d].morphTargets.length;f++)h[c[d].morphTargets[f]]=-1;for(var p in h){for(var A=[],v=[],m=0;m!==c[d].morphTargets.length;++m){var g=c[d];A.push(g.time),v.push(g.morphTarget===p?1:0)}r.push(new Wf(".morphTargetInfluence["+p+"]",A,v))}s=h.length*a}else{var y=".bones["+t[l].name+"]";n(Jf,y+".position",c,"pos",r),n(Yf,y+".quaternion",c,"rot",r),n(Jf,y+".scale",c,"scl",r)}}return 0===r.length?null:new this(i,s,r,o)}}]),e}();function Zf(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var t=function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Wf;case"vector":case"vector2":case"vector3":case"vector4":return Jf;case"color":return jf;case"quaternion":return Yf;case"bool":case"boolean":return Vf;case"string":return Qf}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}(e.type);if(void 0===e.times){var n=[],r=[];Of(e.keys,n,r,"value"),e.times=n,e.values=r}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}var $f={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}},ep=W((function e(t,n,r){V(this,e);var i=this,a=!1,o=0,s=0,u=void 0,l=[];this.onStart=void 0,this.onLoad=t,this.onProgress=n,this.onError=r,this.itemStart=function(e){s++,!1===a&&void 0!==i.onStart&&i.onStart(e,o,s),a=!0},this.itemEnd=function(e){o++,void 0!==i.onProgress&&i.onProgress(e,o,s),o===s&&(a=!1,void 0!==i.onLoad&&i.onLoad())},this.itemError=function(e){void 0!==i.onError&&i.onError(e)},this.resolveURL=function(e){return u?u(e):e},this.setURLModifier=function(e){return u=e,this},this.addHandler=function(e,t){return l.push(e,t),this},this.removeHandler=function(e){var t=l.indexOf(e);return-1!==t&&l.splice(t,2),this},this.getHandler=function(e){for(var t=0,n=l.length;t<n;t+=2){var r=l[t],i=l[t+1];if(r.global&&(r.lastIndex=0),r.test(e))return i}return null}})),tp=new ep,np=function(){function e(t){V(this,e),this.manager=void 0!==t?t:tp,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}return W(e,[{key:"load",value:function(){}},{key:"loadAsync",value:function(e,t){var n=this;return new Promise((function(r,i){n.load(e,r,t,i)}))}},{key:"parse",value:function(){}},{key:"setCrossOrigin",value:function(e){return this.crossOrigin=e,this}},{key:"setWithCredentials",value:function(e){return this.withCredentials=e,this}},{key:"setPath",value:function(e){return this.path=e,this}},{key:"setResourcePath",value:function(e){return this.resourcePath=e,this}},{key:"setRequestHeader",value:function(e){return this.requestHeader=e,this}}]),e}();np.DEFAULT_MATERIAL_NAME="__DEFAULT";var rp,ip={},ap=function(e){Y(n,e);var t=$(n);function n(e,r){var i;return V(this,n),(i=t.call(this,e)).response=r,i}return W(n)}(ne(Error)),op=function(e){Y(n,e);var t=$(n);function n(e){return V(this,n),t.call(this,e)}return W(n,[{key:"load",value:function(e,t,n,r){var i=this;void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var a=$f.get(e);if(void 0!==a)return this.manager.itemStart(e),setTimeout((function(){t&&t(a),i.manager.itemEnd(e)}),0),a;if(void 0===ip[e]){ip[e]=[],ip[e].push({onLoad:t,onProgress:n,onError:r});var o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),s=this.mimeType,u=this.responseType;fetch(o).then((function(t){if(200===t.status||0===t.status){if(0===t.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),"undefined"===typeof ReadableStream||void 0===t.body||void 0===t.body.getReader)return t;var n=ip[e],r=t.body.getReader(),i=t.headers.get("X-File-Size")||t.headers.get("Content-Length"),a=i?parseInt(i):0,o=0!==a,s=0,u=new ReadableStream({start:function(e){!function t(){r.read().then((function(r){var i=r.done,u=r.value;if(i)e.close();else{s+=u.byteLength;for(var l=new ProgressEvent("progress",{lengthComputable:o,loaded:s,total:a}),c=0,h=n.length;c<h;c++){var d=n[c];d.onProgress&&d.onProgress(l)}e.enqueue(u),t()}}),(function(t){e.error(t)}))}()}});return new Response(u)}throw new ap('fetch for "'.concat(t.url,'" responded with ').concat(t.status,": ").concat(t.statusText),t)})).then((function(e){switch(u){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"document":return e.text().then((function(e){return(new DOMParser).parseFromString(e,s)}));case"json":return e.json();default:if(void 0===s)return e.text();var t=/charset="?([^;"\s]*)"?/i.exec(s),n=t&&t[1]?t[1].toLowerCase():void 0,r=new TextDecoder(n);return e.arrayBuffer().then((function(e){return r.decode(e)}))}})).then((function(t){$f.add(e,t);var n=ip[e];delete ip[e];for(var r=0,i=n.length;r<i;r++){var a=n[r];a.onLoad&&a.onLoad(t)}})).catch((function(t){var n=ip[e];if(void 0===n)throw i.manager.itemError(e),t;delete ip[e];for(var r=0,a=n.length;r<a;r++){var o=n[r];o.onError&&o.onError(t)}i.manager.itemError(e)})).finally((function(){i.manager.itemEnd(e)})),this.manager.itemStart(e)}else ip[e].push({onLoad:t,onProgress:n,onError:r})}},{key:"setResponseType",value:function(e){return this.responseType=e,this}},{key:"setMimeType",value:function(e){return this.mimeType=e,this}}]),n}(np),sp=function(e){Y(n,e);var t=$(n);function n(e){return V(this,n),t.call(this,e)}return W(n,[{key:"load",value:function(e,t,n,r){var i=this,a=new op(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,(function(n){try{t(i.parse(JSON.parse(n)))}catch(a){r?r(a):console.error(a),i.manager.itemError(e)}}),n,r)}},{key:"parse",value:function(e){for(var t=[],n=0;n<e.length;n++){var r=Kf.parse(e[n]);t.push(r)}return t}}]),n}(np),up=function(e){Y(n,e);var t=$(n);function n(e){return V(this,n),t.call(this,e)}return W(n,[{key:"load",value:function(e,t,n,r){var i=this,a=[],o=new Yh,s=new op(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(i.withCredentials);var u=0;function l(l){s.load(e[l],(function(e){var n=i.parse(e,!0);a[l]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},6===(u+=1)&&(1===n.mipmapCount&&(o.minFilter=Ct),o.image=a,o.format=n.format,o.needsUpdate=!0,t&&t(o))}),n,r)}if(Array.isArray(e))for(var c=0,h=e.length;c<h;++c)l(c);else s.load(e,(function(e){var n=i.parse(e,!0);if(n.isCubemap){for(var r=n.mipmaps.length/n.mipmapCount,s=0;s<r;s++){a[s]={mipmaps:[]};for(var u=0;u<n.mipmapCount;u++)a[s].mipmaps.push(n.mipmaps[s*n.mipmapCount+u]),a[s].format=n.format,a[s].width=n.width,a[s].height=n.height}o.image=a}else o.image.width=n.width,o.image.height=n.height,o.mipmaps=n.mipmaps;1===n.mipmapCount&&(o.minFilter=Ct),o.format=n.format,o.needsUpdate=!0,t&&t(o)}),n,r);return o}}]),n}(np),lp=function(e){Y(n,e);var t=$(n);function n(e){return V(this,n),t.call(this,e)}return W(n,[{key:"load",value:function(e,t,n,r){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var i=this,a=$f.get(e);if(void 0!==a)return i.manager.itemStart(e),setTimeout((function(){t&&t(a),i.manager.itemEnd(e)}),0),a;var o=ci("img");function s(){l(),$f.add(e,this),t&&t(this),i.manager.itemEnd(e)}function u(t){l(),r&&r(t),i.manager.itemError(e),i.manager.itemEnd(e)}function l(){o.removeEventListener("load",s,!1),o.removeEventListener("error",u,!1)}return o.addEventListener("load",s,!1),o.addEventListener("error",u,!1),"data:"!==e.slice(0,5)&&void 0!==this.crossOrigin&&(o.crossOrigin=this.crossOrigin),i.manager.itemStart(e),o.src=e,o}}]),n}(np),cp=function(e){Y(n,e);var t=$(n);function n(e){return V(this,n),t.call(this,e)}return W(n,[{key:"load",value:function(e,t,n,r){var i=new hs;i.colorSpace=ar;var a=new lp(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);var o=0;function s(n){a.load(e[n],(function(e){i.images[n]=e,6===++o&&(i.needsUpdate=!0,t&&t(i))}),void 0,r)}for(var u=0;u<e.length;++u)s(u);return i}}]),n}(np),hp=function(e){Y(n,e);var t=$(n);function n(e){return V(this,n),t.call(this,e)}return W(n,[{key:"load",value:function(e,t,n,r){var i=this,a=new Yc,o=new op(this.manager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.setWithCredentials(i.withCredentials),o.load(e,(function(e){var n;try{n=i.parse(e)}catch(tg){if(void 0===r)return void console.error(tg);r(tg)}void 0!==n.image?a.image=n.image:void 0!==n.data&&(a.image.width=n.width,a.image.height=n.height,a.image.data=n.data),a.wrapS=void 0!==n.wrapS?n.wrapS:_t,a.wrapT=void 0!==n.wrapT?n.wrapT:_t,a.magFilter=void 0!==n.magFilter?n.magFilter:Ct,a.minFilter=void 0!==n.minFilter?n.minFilter:Ct,a.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.colorSpace&&(a.colorSpace=n.colorSpace),void 0!==n.flipY&&(a.flipY=n.flipY),void 0!==n.format&&(a.format=n.format),void 0!==n.type&&(a.type=n.type),void 0!==n.mipmaps&&(a.mipmaps=n.mipmaps,a.minFilter=Pt),1===n.mipmapCount&&(a.minFilter=Ct),void 0!==n.generateMipmaps&&(a.generateMipmaps=n.generateMipmaps),a.needsUpdate=!0,t&&t(a,n)}),n,r),a}}]),n}(np),dp=function(e){Y(n,e);var t=$(n);function n(e){return V(this,n),t.call(this,e)}return W(n,[{key:"load",value:function(e,t,n,r){var i=new Bi,a=new lp(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,(function(e){i.image=e,i.needsUpdate=!0,void 0!==t&&t(i)}),n,r),i}}]),n}(np),fp=function(e){Y(n,e);var t=$(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return V(this,n),(r=t.call(this)).isLight=!0,r.type="Light",r.color=new uo(e),r.intensity=i,r}return W(n,[{key:"dispose",value:function(){}},{key:"copy",value:function(e,t){return oe(Q(n.prototype),"copy",this).call(this,e,t),this.color.copy(e.color),this.intensity=e.intensity,this}},{key:"toJSON",value:function(e){var t=oe(Q(n.prototype),"toJSON",this).call(this,e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),void 0!==this.target&&(t.object.target=this.target.uuid),t}}]),n}(Ha),pp=function(e){Y(n,e);var t=$(n);function n(e,r,i){var a;return V(this,n),(a=t.call(this,e,i)).isHemisphereLight=!0,a.type="HemisphereLight",a.position.copy(Ha.DEFAULT_UP),a.updateMatrix(),a.groundColor=new uo(r),a}return W(n,[{key:"copy",value:function(e,t){return oe(Q(n.prototype),"copy",this).call(this,e,t),this.groundColor.copy(e.groundColor),this}}]),n}(fp),Ap=new va,vp=new zi,mp=new zi,gp=function(){function e(t){V(this,e),this.camera=t,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new ii(512,512),this.map=null,this.mapPass=null,this.matrix=new va,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new ys,this._frameExtents=new ii(1,1),this._viewportCount=1,this._viewports=[new Pi(0,0,1,1)]}return W(e,[{key:"getViewportCount",value:function(){return this._viewportCount}},{key:"getFrustum",value:function(){return this._frustum}},{key:"updateMatrices",value:function(e){var t=this.camera,n=this.matrix;vp.setFromMatrixPosition(e.matrixWorld),t.position.copy(vp),mp.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(mp),t.updateMatrixWorld(),Ap.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Ap),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(Ap)}},{key:"getViewport",value:function(e){return this._viewports[e]}},{key:"getFrameExtents",value:function(){return this._frameExtents}},{key:"dispose",value:function(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}},{key:"copy",value:function(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"toJSON",value:function(){var e={};return 1!==this.intensity&&(e.intensity=this.intensity),0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}]),e}(),yp=function(e){Y(n,e);var t=$(n);function n(){var e;return V(this,n),(e=t.call(this,new us(50,1,.5,500))).isSpotLightShadow=!0,e.focus=1,e}return W(n,[{key:"updateMatrices",value:function(e){var t=this.camera,r=2*Jr*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,a=e.distance||t.far;r===t.fov&&i===t.aspect&&a===t.far||(t.fov=r,t.aspect=i,t.far=a,t.updateProjectionMatrix()),oe(Q(n.prototype),"updateMatrices",this).call(this,e)}},{key:"copy",value:function(e){return oe(Q(n.prototype),"copy",this).call(this,e),this.focus=e.focus,this}}]),n}(gp),bp=function(e){Y(n,e);var t=$(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Math.PI/3,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2;return V(this,n),(i=t.call(this,e,r)).isSpotLight=!0,i.type="SpotLight",i.position.copy(Ha.DEFAULT_UP),i.updateMatrix(),i.target=new Ha,i.distance=a,i.angle=o,i.penumbra=s,i.decay=u,i.map=null,i.shadow=new yp,i}return W(n,[{key:"power",get:function(){return this.intensity*Math.PI},set:function(e){this.intensity=e/Math.PI}},{key:"dispose",value:function(){this.shadow.dispose()}},{key:"copy",value:function(e,t){return oe(Q(n.prototype),"copy",this).call(this,e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}]),n}(fp),xp=new va,_p=new zi,wp=new zi,Sp=function(e){Y(n,e);var t=$(n);function n(){var e;return V(this,n),(e=t.call(this,new us(90,1,.5,500))).isPointLightShadow=!0,e._frameExtents=new ii(4,2),e._viewportCount=6,e._viewports=[new Pi(2,1,1,1),new Pi(0,1,1,1),new Pi(3,1,1,1),new Pi(1,1,1,1),new Pi(3,0,1,1),new Pi(1,0,1,1)],e._cubeDirections=[new zi(1,0,0),new zi(-1,0,0),new zi(0,0,1),new zi(0,0,-1),new zi(0,1,0),new zi(0,-1,0)],e._cubeUps=[new zi(0,1,0),new zi(0,1,0),new zi(0,1,0),new zi(0,1,0),new zi(0,0,1),new zi(0,0,-1)],e}return W(n,[{key:"updateMatrices",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.camera,r=this.matrix,i=e.distance||n.far;i!==n.far&&(n.far=i,n.updateProjectionMatrix()),_p.setFromMatrixPosition(e.matrixWorld),n.position.copy(_p),wp.copy(n.position),wp.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(wp),n.updateMatrixWorld(),r.makeTranslation(-_p.x,-_p.y,-_p.z),xp.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(xp)}}]),n}(gp),Mp=function(e){Y(n,e);var t=$(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2;return V(this,n),(i=t.call(this,e,r)).isPointLight=!0,i.type="PointLight",i.distance=a,i.decay=o,i.shadow=new Sp,i}return W(n,[{key:"power",get:function(){return 4*this.intensity*Math.PI},set:function(e){this.intensity=e/(4*Math.PI)}},{key:"dispose",value:function(){this.shadow.dispose()}},{key:"copy",value:function(e,t){return oe(Q(n.prototype),"copy",this).call(this,e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}]),n}(fp),kp=function(e){Y(n,e);var t=$(n);function n(){var e;return V(this,n),(e=t.call(this,new Ds(-5,5,5,-5,.5,500))).isDirectionalLightShadow=!0,e}return W(n)}(gp),Tp=function(e){Y(n,e);var t=$(n);function n(e,r){var i;return V(this,n),(i=t.call(this,e,r)).isDirectionalLight=!0,i.type="DirectionalLight",i.position.copy(Ha.DEFAULT_UP),i.updateMatrix(),i.target=new Ha,i.shadow=new kp,i}return W(n,[{key:"dispose",value:function(){this.shadow.dispose()}},{key:"copy",value:function(e){return oe(Q(n.prototype),"copy",this).call(this,e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}]),n}(fp),Ep=function(e){Y(n,e);var t=$(n);function n(e,r){var i;return V(this,n),(i=t.call(this,e,r)).isAmbientLight=!0,i.type="AmbientLight",i}return W(n)}(fp),Cp=function(e){Y(n,e);var t=$(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10;return V(this,n),(i=t.call(this,e,r)).isRectAreaLight=!0,i.type="RectAreaLight",i.width=a,i.height=o,i}return W(n,[{key:"power",get:function(){return this.intensity*this.width*this.height*Math.PI},set:function(e){this.intensity=e/(this.width*this.height*Math.PI)}},{key:"copy",value:function(e){return oe(Q(n.prototype),"copy",this).call(this,e),this.width=e.width,this.height=e.height,this}},{key:"toJSON",value:function(e){var t=oe(Q(n.prototype),"toJSON",this).call(this,e);return t.object.width=this.width,t.object.height=this.height,t}}]),n}(fp),Rp=function(){function e(){V(this,e),this.isSphericalHarmonics3=!0,this.coefficients=[];for(var t=0;t<9;t++)this.coefficients.push(new zi)}return W(e,[{key:"set",value:function(e){for(var t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}},{key:"zero",value:function(){for(var e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}},{key:"getAt",value:function(e,t){var n=e.x,r=e.y,i=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.282095),t.addScaledVector(a[1],.488603*r),t.addScaledVector(a[2],.488603*i),t.addScaledVector(a[3],.488603*n),t.addScaledVector(a[4],n*r*1.092548),t.addScaledVector(a[5],r*i*1.092548),t.addScaledVector(a[6],.315392*(3*i*i-1)),t.addScaledVector(a[7],n*i*1.092548),t.addScaledVector(a[8],.546274*(n*n-r*r)),t}},{key:"getIrradianceAt",value:function(e,t){var n=e.x,r=e.y,i=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.886227),t.addScaledVector(a[1],1.023328*r),t.addScaledVector(a[2],1.023328*i),t.addScaledVector(a[3],1.023328*n),t.addScaledVector(a[4],.858086*n*r),t.addScaledVector(a[5],.858086*r*i),t.addScaledVector(a[6],.743125*i*i-.247708),t.addScaledVector(a[7],.858086*n*i),t.addScaledVector(a[8],.429043*(n*n-r*r)),t}},{key:"add",value:function(e){for(var t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}},{key:"addScaledSH",value:function(e,t){for(var n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}},{key:"scale",value:function(e){for(var t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}},{key:"lerp",value:function(e,t){for(var n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}},{key:"equals",value:function(e){for(var t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}},{key:"copy",value:function(e){return this.set(e.coefficients)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"fromArray",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.coefficients,r=0;r<9;r++)n[r].fromArray(e,t+3*r);return this}},{key:"toArray",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.coefficients,r=0;r<9;r++)n[r].toArray(e,t+3*r);return e}}],[{key:"getBasisAt",value:function(e,t){var n=e.x,r=e.y,i=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*i,t[3]=.488603*n,t[4]=1.092548*n*r,t[5]=1.092548*r*i,t[6]=.315392*(3*i*i-1),t[7]=1.092548*n*i,t[8]=.546274*(n*n-r*r)}}]),e}(),Bp=function(e){Y(n,e);var t=$(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Rp,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return V(this,n),(e=t.call(this,void 0,i)).isLightProbe=!0,e.sh=r,e}return W(n,[{key:"copy",value:function(e){return oe(Q(n.prototype),"copy",this).call(this,e),this.sh.copy(e.sh),this}},{key:"fromJSON",value:function(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}},{key:"toJSON",value:function(e){var t=oe(Q(n.prototype),"toJSON",this).call(this,e);return t.object.sh=this.sh.toArray(),t}}]),n}(fp),Pp=function(e){Y(n,e);var t=$(n);function n(e){var r;return V(this,n),(r=t.call(this,e)).textures={},r}return W(n,[{key:"load",value:function(e,t,n,r){var i=this,a=new op(i.manager);a.setPath(i.path),a.setRequestHeader(i.requestHeader),a.setWithCredentials(i.withCredentials),a.load(e,(function(n){try{t(i.parse(JSON.parse(n)))}catch(a){r?r(a):console.error(a),i.manager.itemError(e)}}),n,r)}},{key:"parse",value:function(e){var t=this.textures;function n(e){return void 0===t[e]&&console.warn("THREE.MaterialLoader: Undefined texture",e),t[e]}var r=this.createMaterialFromType(e.type);if(void 0!==e.uuid&&(r.uuid=e.uuid),void 0!==e.name&&(r.name=e.name),void 0!==e.color&&void 0!==r.color&&r.color.setHex(e.color),void 0!==e.roughness&&(r.roughness=e.roughness),void 0!==e.metalness&&(r.metalness=e.metalness),void 0!==e.sheen&&(r.sheen=e.sheen),void 0!==e.sheenColor&&(r.sheenColor=(new uo).setHex(e.sheenColor)),void 0!==e.sheenRoughness&&(r.sheenRoughness=e.sheenRoughness),void 0!==e.emissive&&void 0!==r.emissive&&r.emissive.setHex(e.emissive),void 0!==e.specular&&void 0!==r.specular&&r.specular.setHex(e.specular),void 0!==e.specularIntensity&&(r.specularIntensity=e.specularIntensity),void 0!==e.specularColor&&void 0!==r.specularColor&&r.specularColor.setHex(e.specularColor),void 0!==e.shininess&&(r.shininess=e.shininess),void 0!==e.clearcoat&&(r.clearcoat=e.clearcoat),void 0!==e.clearcoatRoughness&&(r.clearcoatRoughness=e.clearcoatRoughness),void 0!==e.dispersion&&(r.dispersion=e.dispersion),void 0!==e.iridescence&&(r.iridescence=e.iridescence),void 0!==e.iridescenceIOR&&(r.iridescenceIOR=e.iridescenceIOR),void 0!==e.iridescenceThicknessRange&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),void 0!==e.transmission&&(r.transmission=e.transmission),void 0!==e.thickness&&(r.thickness=e.thickness),void 0!==e.attenuationDistance&&(r.attenuationDistance=e.attenuationDistance),void 0!==e.attenuationColor&&void 0!==r.attenuationColor&&r.attenuationColor.setHex(e.attenuationColor),void 0!==e.anisotropy&&(r.anisotropy=e.anisotropy),void 0!==e.anisotropyRotation&&(r.anisotropyRotation=e.anisotropyRotation),void 0!==e.fog&&(r.fog=e.fog),void 0!==e.flatShading&&(r.flatShading=e.flatShading),void 0!==e.blending&&(r.blending=e.blending),void 0!==e.combine&&(r.combine=e.combine),void 0!==e.side&&(r.side=e.side),void 0!==e.shadowSide&&(r.shadowSide=e.shadowSide),void 0!==e.opacity&&(r.opacity=e.opacity),void 0!==e.transparent&&(r.transparent=e.transparent),void 0!==e.alphaTest&&(r.alphaTest=e.alphaTest),void 0!==e.alphaHash&&(r.alphaHash=e.alphaHash),void 0!==e.depthFunc&&(r.depthFunc=e.depthFunc),void 0!==e.depthTest&&(r.depthTest=e.depthTest),void 0!==e.depthWrite&&(r.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(r.colorWrite=e.colorWrite),void 0!==e.blendSrc&&(r.blendSrc=e.blendSrc),void 0!==e.blendDst&&(r.blendDst=e.blendDst),void 0!==e.blendEquation&&(r.blendEquation=e.blendEquation),void 0!==e.blendSrcAlpha&&(r.blendSrcAlpha=e.blendSrcAlpha),void 0!==e.blendDstAlpha&&(r.blendDstAlpha=e.blendDstAlpha),void 0!==e.blendEquationAlpha&&(r.blendEquationAlpha=e.blendEquationAlpha),void 0!==e.blendColor&&void 0!==r.blendColor&&r.blendColor.setHex(e.blendColor),void 0!==e.blendAlpha&&(r.blendAlpha=e.blendAlpha),void 0!==e.stencilWriteMask&&(r.stencilWriteMask=e.stencilWriteMask),void 0!==e.stencilFunc&&(r.stencilFunc=e.stencilFunc),void 0!==e.stencilRef&&(r.stencilRef=e.stencilRef),void 0!==e.stencilFuncMask&&(r.stencilFuncMask=e.stencilFuncMask),void 0!==e.stencilFail&&(r.stencilFail=e.stencilFail),void 0!==e.stencilZFail&&(r.stencilZFail=e.stencilZFail),void 0!==e.stencilZPass&&(r.stencilZPass=e.stencilZPass),void 0!==e.stencilWrite&&(r.stencilWrite=e.stencilWrite),void 0!==e.wireframe&&(r.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(r.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(r.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(r.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.rotation&&(r.rotation=e.rotation),void 0!==e.linewidth&&(r.linewidth=e.linewidth),void 0!==e.dashSize&&(r.dashSize=e.dashSize),void 0!==e.gapSize&&(r.gapSize=e.gapSize),void 0!==e.scale&&(r.scale=e.scale),void 0!==e.polygonOffset&&(r.polygonOffset=e.polygonOffset),void 0!==e.polygonOffsetFactor&&(r.polygonOffsetFactor=e.polygonOffsetFactor),void 0!==e.polygonOffsetUnits&&(r.polygonOffsetUnits=e.polygonOffsetUnits),void 0!==e.dithering&&(r.dithering=e.dithering),void 0!==e.alphaToCoverage&&(r.alphaToCoverage=e.alphaToCoverage),void 0!==e.premultipliedAlpha&&(r.premultipliedAlpha=e.premultipliedAlpha),void 0!==e.forceSinglePass&&(r.forceSinglePass=e.forceSinglePass),void 0!==e.visible&&(r.visible=e.visible),void 0!==e.toneMapped&&(r.toneMapped=e.toneMapped),void 0!==e.userData&&(r.userData=e.userData),void 0!==e.vertexColors&&("number"===typeof e.vertexColors?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),void 0!==e.uniforms)for(var i in e.uniforms){var a=e.uniforms[i];switch(r.uniforms[i]={},a.type){case"t":r.uniforms[i].value=n(a.value);break;case"c":r.uniforms[i].value=(new uo).setHex(a.value);break;case"v2":r.uniforms[i].value=(new ii).fromArray(a.value);break;case"v3":r.uniforms[i].value=(new zi).fromArray(a.value);break;case"v4":r.uniforms[i].value=(new Pi).fromArray(a.value);break;case"m3":r.uniforms[i].value=(new ai).fromArray(a.value);break;case"m4":r.uniforms[i].value=(new va).fromArray(a.value);break;default:r.uniforms[i].value=a.value}}if(void 0!==e.defines&&(r.defines=e.defines),void 0!==e.vertexShader&&(r.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(r.fragmentShader=e.fragmentShader),void 0!==e.glslVersion&&(r.glslVersion=e.glslVersion),void 0!==e.extensions)for(var o in e.extensions)r.extensions[o]=e.extensions[o];if(void 0!==e.lights&&(r.lights=e.lights),void 0!==e.clipping&&(r.clipping=e.clipping),void 0!==e.size&&(r.size=e.size),void 0!==e.sizeAttenuation&&(r.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(r.map=n(e.map)),void 0!==e.matcap&&(r.matcap=n(e.matcap)),void 0!==e.alphaMap&&(r.alphaMap=n(e.alphaMap)),void 0!==e.bumpMap&&(r.bumpMap=n(e.bumpMap)),void 0!==e.bumpScale&&(r.bumpScale=e.bumpScale),void 0!==e.normalMap&&(r.normalMap=n(e.normalMap)),void 0!==e.normalMapType&&(r.normalMapType=e.normalMapType),void 0!==e.normalScale){var s=e.normalScale;!1===Array.isArray(s)&&(s=[s,s]),r.normalScale=(new ii).fromArray(s)}return void 0!==e.displacementMap&&(r.displacementMap=n(e.displacementMap)),void 0!==e.displacementScale&&(r.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(r.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(r.roughnessMap=n(e.roughnessMap)),void 0!==e.metalnessMap&&(r.metalnessMap=n(e.metalnessMap)),void 0!==e.emissiveMap&&(r.emissiveMap=n(e.emissiveMap)),void 0!==e.emissiveIntensity&&(r.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(r.specularMap=n(e.specularMap)),void 0!==e.specularIntensityMap&&(r.specularIntensityMap=n(e.specularIntensityMap)),void 0!==e.specularColorMap&&(r.specularColorMap=n(e.specularColorMap)),void 0!==e.envMap&&(r.envMap=n(e.envMap)),void 0!==e.envMapRotation&&r.envMapRotation.fromArray(e.envMapRotation),void 0!==e.envMapIntensity&&(r.envMapIntensity=e.envMapIntensity),void 0!==e.reflectivity&&(r.reflectivity=e.reflectivity),void 0!==e.refractionRatio&&(r.refractionRatio=e.refractionRatio),void 0!==e.lightMap&&(r.lightMap=n(e.lightMap)),void 0!==e.lightMapIntensity&&(r.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(r.aoMap=n(e.aoMap)),void 0!==e.aoMapIntensity&&(r.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(r.gradientMap=n(e.gradientMap)),void 0!==e.clearcoatMap&&(r.clearcoatMap=n(e.clearcoatMap)),void 0!==e.clearcoatRoughnessMap&&(r.clearcoatRoughnessMap=n(e.clearcoatRoughnessMap)),void 0!==e.clearcoatNormalMap&&(r.clearcoatNormalMap=n(e.clearcoatNormalMap)),void 0!==e.clearcoatNormalScale&&(r.clearcoatNormalScale=(new ii).fromArray(e.clearcoatNormalScale)),void 0!==e.iridescenceMap&&(r.iridescenceMap=n(e.iridescenceMap)),void 0!==e.iridescenceThicknessMap&&(r.iridescenceThicknessMap=n(e.iridescenceThicknessMap)),void 0!==e.transmissionMap&&(r.transmissionMap=n(e.transmissionMap)),void 0!==e.thicknessMap&&(r.thicknessMap=n(e.thicknessMap)),void 0!==e.anisotropyMap&&(r.anisotropyMap=n(e.anisotropyMap)),void 0!==e.sheenColorMap&&(r.sheenColorMap=n(e.sheenColorMap)),void 0!==e.sheenRoughnessMap&&(r.sheenRoughnessMap=n(e.sheenRoughnessMap)),r}},{key:"setTextures",value:function(e){return this.textures=e,this}},{key:"createMaterialFromType",value:function(e){return n.createMaterialFromType(e)}}],[{key:"createMaterialFromType",value:function(e){return new{ShadowMaterial:wf,SpriteMaterial:yc,RawShaderMaterial:Sf,ShaderMaterial:rs,PointsMaterial:Uh,MeshPhysicalMaterial:kf,MeshStandardMaterial:Mf,MeshPhongMaterial:Tf,MeshToonMaterial:Ef,MeshNormalMaterial:Cf,MeshLambertMaterial:Rf,MeshDepthMaterial:Wl,MeshDistanceMaterial:Xl,MeshBasicMaterial:fo,MeshMatcapMaterial:Bf,LineDashedMaterial:Pf,LineBasicMaterial:Mh,Material:ho}[e]}}]),n}(np),Np=function(){function e(){V(this,e)}return W(e,null,[{key:"decodeText",value:function(e){if(console.warn("THREE.LoaderUtils: decodeText() has been deprecated with r165 and will be removed with r175. Use TextDecoder instead."),"undefined"!==typeof TextDecoder)return(new TextDecoder).decode(e);for(var t="",n=0,r=e.length;n<r;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch(i){return t}}},{key:"extractUrlBase",value:function(e){var t=e.lastIndexOf("/");return-1===t?"./":e.slice(0,t+1)}},{key:"resolveURL",value:function(e,t){return"string"!==typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}]),e}(),Ip=function(e){Y(n,e);var t=$(n);function n(){var e;return V(this,n),(e=t.call(this)).isInstancedBufferGeometry=!0,e.type="InstancedBufferGeometry",e.instanceCount=1/0,e}return W(n,[{key:"copy",value:function(e){return oe(Q(n.prototype),"copy",this).call(this,e),this.instanceCount=e.instanceCount,this}},{key:"toJSON",value:function(){var e=oe(Q(n.prototype),"toJSON",this).call(this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}]),n}(Fo),Dp=function(e){Y(n,e);var t=$(n);function n(e){return V(this,n),t.call(this,e)}return W(n,[{key:"load",value:function(e,t,n,r){var i=this,a=new op(i.manager);a.setPath(i.path),a.setRequestHeader(i.requestHeader),a.setWithCredentials(i.withCredentials),a.load(e,(function(n){try{t(i.parse(JSON.parse(n)))}catch(a){r?r(a):console.error(a),i.manager.itemError(e)}}),n,r)}},{key:"parse",value:function(e){var t={},n={};function r(e,r){if(void 0!==t[r])return t[r];var i=e.interleavedBuffers[r],a=function(e,t){if(void 0!==n[t])return n[t];var r=e.arrayBuffers,i=r[t],a=new Uint32Array(i).buffer;return n[t]=a,a}(e,i.buffer),o=li(i.type,a),s=new vc(o,i.stride);return s.uuid=i.uuid,t[r]=s,s}var i=e.isInstancedBufferGeometry?new Ip:new Fo,a=e.data.index;if(void 0!==a){var o=li(a.type,a.array);i.setIndex(new xo(o,1))}var s=e.data.attributes;for(var u in s){var l=s[u],c=void 0;if(l.isInterleavedBufferAttribute){var h=r(e.data,l.data);c=new gc(h,l.itemSize,l.offset,l.normalized)}else{var d=li(l.type,l.array);c=new(l.isInstancedBufferAttribute?Zc:xo)(d,l.itemSize,l.normalized)}void 0!==l.name&&(c.name=l.name),void 0!==l.usage&&c.setUsage(l.usage),i.setAttribute(u,c)}var f=e.data.morphAttributes;if(f)for(var p in f){for(var A=f[p],v=[],m=0,g=A.length;m<g;m++){var y=A[m],b=void 0;if(y.isInterleavedBufferAttribute){var x=r(e.data,y.data);b=new gc(x,y.itemSize,y.offset,y.normalized)}else{var _=li(y.type,y.array);b=new xo(_,y.itemSize,y.normalized)}void 0!==y.name&&(b.name=y.name),v.push(b)}i.morphAttributes[p]=v}e.data.morphTargetsRelative&&(i.morphTargetsRelative=!0);var w=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==w)for(var S=0,M=w.length;S!==M;++S){var k=w[S];i.addGroup(k.start,k.count,k.materialIndex)}var T=e.data.boundingSphere;if(void 0!==T){var E=new zi;void 0!==T.center&&E.fromArray(T.center),i.boundingSphere=new sa(E,T.radius)}return e.name&&(i.name=e.name),e.userData&&(i.userData=e.userData),i}}]),n}(np),Lp=function(e){Y(n,e);var t=$(n);function n(e){return V(this,n),t.call(this,e)}return W(n,[{key:"load",value:function(e,t,n,r){var i=this,a=""===this.path?Np.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||a;var o=new op(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,(function(n){var a=null;try{a=JSON.parse(n)}catch(tg){return void 0!==r&&r(tg),void console.error("THREE:ObjectLoader: Can't parse "+e+".",tg.message)}var o=a.metadata;if(void 0===o||void 0===o.type||"geometry"===o.type.toLowerCase())return void 0!==r&&r(new Error("THREE.ObjectLoader: Can't load "+e)),void console.error("THREE.ObjectLoader: Can't load "+e);i.parse(a,t)}),n,r)}},{key:"loadAsync",value:function(){var e=ie(se().mark((function e(t,n){var r,i,a,o,s,u;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this,i=""===this.path?Np.extractUrlBase(t):this.path,this.resourcePath=this.resourcePath||i,(a=new op(this.manager)).setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),e.next=9,a.loadAsync(t,n);case 9:if(o=e.sent,s=JSON.parse(o),void 0!==(u=s.metadata)&&void 0!==u.type&&"geometry"!==u.type.toLowerCase()){e.next=14;break}throw new Error("THREE.ObjectLoader: Can't load "+t);case 14:return e.next=16,r.parseAsync(s);case 16:return e.abrupt("return",e.sent);case 17:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"parse",value:function(e,t){var n=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,r),a=this.parseImages(e.images,(function(){void 0!==t&&t(u)})),o=this.parseTextures(e.textures,a),s=this.parseMaterials(e.materials,o),u=this.parseObject(e.object,i,s,o,n),l=this.parseSkeletons(e.skeletons,u);if(this.bindSkeletons(u,l),this.bindLightTargets(u),void 0!==t){var c=!1;for(var h in a)if(a[h].data instanceof HTMLImageElement){c=!0;break}!1===c&&t(u)}return u}},{key:"parseAsync",value:function(){var e=ie(se().mark((function e(t){var n,r,i,a,o,s,u,l;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.parseAnimations(t.animations),r=this.parseShapes(t.shapes),i=this.parseGeometries(t.geometries,r),e.next=5,this.parseImagesAsync(t.images);case 5:return a=e.sent,o=this.parseTextures(t.textures,a),s=this.parseMaterials(t.materials,o),u=this.parseObject(t.object,i,s,o,n),l=this.parseSkeletons(t.skeletons,u),this.bindSkeletons(u,l),this.bindLightTargets(u),e.abrupt("return",u);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseShapes",value:function(e){var t={};if(void 0!==e)for(var n=0,r=e.length;n<r;n++){var i=(new Pd).fromJSON(e[n]);t[i.uuid]=i}return t}},{key:"parseSkeletons",value:function(e,t){var n={},r={};if(t.traverse((function(e){e.isBone&&(r[e.uuid]=e)})),void 0!==e)for(var i=0,a=e.length;i<a;i++){var o=(new Kc).fromJSON(e[i],r);n[o.uuid]=o}return n}},{key:"parseGeometries",value:function(e,t){var n={};if(void 0!==e)for(var r=new Dp,i=0,a=e.length;i<a;i++){var o=void 0,s=e[i];switch(s.type){case"BufferGeometry":case"InstancedBufferGeometry":o=r.parse(s);break;default:s.type in _f?o=_f[s.type].fromJSON(s,t):console.warn('THREE.ObjectLoader: Unsupported geometry type "'.concat(s.type,'"'))}o.uuid=s.uuid,void 0!==s.name&&(o.name=s.name),void 0!==s.userData&&(o.userData=s.userData),n[s.uuid]=o}return n}},{key:"parseMaterials",value:function(e,t){var n={},r={};if(void 0!==e){var i=new Pp;i.setTextures(t);for(var a=0,o=e.length;a<o;a++){var s=e[a];void 0===n[s.uuid]&&(n[s.uuid]=i.parse(s)),r[s.uuid]=n[s.uuid]}}return r}},{key:"parseAnimations",value:function(e){var t={};if(void 0!==e)for(var n=0;n<e.length;n++){var r=e[n],i=Kf.parse(r);t[i.uuid]=i}return t}},{key:"parseImages",value:function(e,t){var n,r=this,i={};function a(e){if("string"===typeof e){var t=e;return function(e){return r.manager.itemStart(e),n.load(e,(function(){r.manager.itemEnd(e)}),void 0,(function(){r.manager.itemError(e),r.manager.itemEnd(e)}))}(/^(\/\/)|([a-z]+:(\/\/)?)/i.test(t)?t:r.resourcePath+t)}return e.data?{data:li(e.type,e.data),width:e.width,height:e.height}:null}if(void 0!==e&&e.length>0){var o=new ep(t);(n=new lp(o)).setCrossOrigin(this.crossOrigin);for(var s=0,u=e.length;s<u;s++){var l=e[s],c=l.url;if(Array.isArray(c)){for(var h=[],d=0,f=c.length;d<f;d++){var p=a(c[d]);null!==p&&(p instanceof HTMLImageElement?h.push(p):h.push(new Yc(p.data,p.width,p.height)))}i[l.uuid]=new Ei(h)}else{var A=a(l.url);i[l.uuid]=new Ei(A)}}}return i}},{key:"parseImagesAsync",value:function(){var e=ie(se().mark((function e(t){var n,r,i,a,o,s,u,l,c,h,d,f,p,A,v;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=function(){return o=ie(se().mark((function e(t){var r,a;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("string"!==typeof t){e.next=8;break}return a=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(r=t)?r:n.resourcePath+r,e.next=5,i.loadAsync(a);case 5:return e.abrupt("return",e.sent);case 8:if(!t.data){e.next=12;break}return e.abrupt("return",{data:li(t.type,t.data),width:t.width,height:t.height});case 12:return e.abrupt("return",null);case 13:case"end":return e.stop()}}),e)}))),o.apply(this,arguments)},a=function(e){return o.apply(this,arguments)},n=this,r={},!(void 0!==t&&t.length>0)){e.next=33;break}(i=new lp(this.manager)).setCrossOrigin(this.crossOrigin),s=0,u=t.length;case 8:if(!(s<u)){e.next=33;break}if(l=t[s],c=l.url,!Array.isArray(c)){e.next=26;break}h=[],d=0,f=c.length;case 14:if(!(d<f)){e.next=23;break}return p=c[d],e.next=18,a(p);case 18:null!==(A=e.sent)&&(A instanceof HTMLImageElement?h.push(A):h.push(new Yc(A.data,A.width,A.height)));case 20:d++,e.next=14;break;case 23:r[l.uuid]=new Ei(h),e.next=30;break;case 26:return e.next=28,a(l.url);case 28:v=e.sent,r[l.uuid]=new Ei(v);case 30:s++,e.next=8;break;case 33:return e.abrupt("return",r);case 34:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTextures",value:function(e,t){function n(e,t){return"number"===typeof e?e:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e),t[e])}var r={};if(void 0!==e)for(var i=0,a=e.length;i<a;i++){var o=e[i];void 0===o.image&&console.warn('THREE.ObjectLoader: No "image" specified for',o.uuid),void 0===t[o.image]&&console.warn("THREE.ObjectLoader: Undefined image",o.image);var s=t[o.image],u=s.data,l=void 0;Array.isArray(u)?(l=new hs,6===u.length&&(l.needsUpdate=!0)):(l=u&&u.data?new Yc:new Bi,u&&(l.needsUpdate=!0)),l.source=s,l.uuid=o.uuid,void 0!==o.name&&(l.name=o.name),void 0!==o.mapping&&(l.mapping=n(o.mapping,Op)),void 0!==o.channel&&(l.channel=o.channel),void 0!==o.offset&&l.offset.fromArray(o.offset),void 0!==o.repeat&&l.repeat.fromArray(o.repeat),void 0!==o.center&&l.center.fromArray(o.center),void 0!==o.rotation&&(l.rotation=o.rotation),void 0!==o.wrap&&(l.wrapS=n(o.wrap[0],Fp),l.wrapT=n(o.wrap[1],Fp)),void 0!==o.format&&(l.format=o.format),void 0!==o.internalFormat&&(l.internalFormat=o.internalFormat),void 0!==o.type&&(l.type=o.type),void 0!==o.colorSpace&&(l.colorSpace=o.colorSpace),void 0!==o.minFilter&&(l.minFilter=n(o.minFilter,Up)),void 0!==o.magFilter&&(l.magFilter=n(o.magFilter,Up)),void 0!==o.anisotropy&&(l.anisotropy=o.anisotropy),void 0!==o.flipY&&(l.flipY=o.flipY),void 0!==o.generateMipmaps&&(l.generateMipmaps=o.generateMipmaps),void 0!==o.premultiplyAlpha&&(l.premultiplyAlpha=o.premultiplyAlpha),void 0!==o.unpackAlignment&&(l.unpackAlignment=o.unpackAlignment),void 0!==o.compareFunction&&(l.compareFunction=o.compareFunction),void 0!==o.userData&&(l.userData=o.userData),r[o.uuid]=l}return r}},{key:"parseObject",value:function(e,t,n,r,i){var a,o,s;function u(e){return void 0===t[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e),t[e]}function l(e){if(void 0!==e){if(Array.isArray(e)){for(var t=[],r=0,i=e.length;r<i;r++){var a=e[r];void 0===n[a]&&console.warn("THREE.ObjectLoader: Undefined material",a),t.push(n[a])}return t}return void 0===n[e]&&console.warn("THREE.ObjectLoader: Undefined material",e),n[e]}}function c(e){return void 0===r[e]&&console.warn("THREE.ObjectLoader: Undefined texture",e),r[e]}switch(e.type){case"Scene":a=new Ac,void 0!==e.background&&(Number.isInteger(e.background)?a.background=new uo(e.background):a.background=c(e.background)),void 0!==e.environment&&(a.environment=c(e.environment)),void 0!==e.fog&&("Fog"===e.fog.type?a.fog=new pc(e.fog.color,e.fog.near,e.fog.far):"FogExp2"===e.fog.type&&(a.fog=new fc(e.fog.color,e.fog.density)),""!==e.fog.name&&(a.fog.name=e.fog.name)),void 0!==e.backgroundBlurriness&&(a.backgroundBlurriness=e.backgroundBlurriness),void 0!==e.backgroundIntensity&&(a.backgroundIntensity=e.backgroundIntensity),void 0!==e.backgroundRotation&&a.backgroundRotation.fromArray(e.backgroundRotation),void 0!==e.environmentIntensity&&(a.environmentIntensity=e.environmentIntensity),void 0!==e.environmentRotation&&a.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":a=new us(e.fov,e.aspect,e.near,e.far),void 0!==e.focus&&(a.focus=e.focus),void 0!==e.zoom&&(a.zoom=e.zoom),void 0!==e.filmGauge&&(a.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(a.filmOffset=e.filmOffset),void 0!==e.view&&(a.view=Object.assign({},e.view));break;case"OrthographicCamera":a=new Ds(e.left,e.right,e.top,e.bottom,e.near,e.far),void 0!==e.zoom&&(a.zoom=e.zoom),void 0!==e.view&&(a.view=Object.assign({},e.view));break;case"AmbientLight":a=new Ep(e.color,e.intensity);break;case"DirectionalLight":(a=new Tp(e.color,e.intensity)).target=e.target||"";break;case"PointLight":a=new Mp(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":a=new Cp(e.color,e.intensity,e.width,e.height);break;case"SpotLight":(a=new bp(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay)).target=e.target||"";break;case"HemisphereLight":a=new pp(e.color,e.groundColor,e.intensity);break;case"LightProbe":a=(new Bp).fromJSON(e);break;case"SkinnedMesh":o=u(e.geometry),s=l(e.material),a=new Wc(o,s),void 0!==e.bindMode&&(a.bindMode=e.bindMode),void 0!==e.bindMatrix&&a.bindMatrix.fromArray(e.bindMatrix),void 0!==e.skeleton&&(a.skeleton=e.skeleton);break;case"Mesh":o=u(e.geometry),s=l(e.material),a=new Jo(o,s);break;case"InstancedMesh":o=u(e.geometry),s=l(e.material);var h=e.count,d=e.instanceMatrix,f=e.instanceColor;(a=new oh(o,s,h)).instanceMatrix=new Zc(new Float32Array(d.array),16),void 0!==f&&(a.instanceColor=new Zc(new Float32Array(f.array),f.itemSize));break;case"BatchedMesh":o=u(e.geometry),s=l(e.material),(a=new Sh(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,s)).geometry=o,a.perObjectFrustumCulled=e.perObjectFrustumCulled,a.sortObjects=e.sortObjects,a._drawRanges=e.drawRanges,a._reservedRanges=e.reservedRanges,a._visibility=e.visibility,a._active=e.active,a._bounds=e.bounds.map((function(e){var t=new Hi;t.min.fromArray(e.boxMin),t.max.fromArray(e.boxMax);var n=new sa;return n.radius=e.sphereRadius,n.center.fromArray(e.sphereCenter),{boxInitialized:e.boxInitialized,box:t,sphereInitialized:e.sphereInitialized,sphere:n}})),a._maxInstanceCount=e.maxInstanceCount,a._maxVertexCount=e.maxVertexCount,a._maxIndexCount=e.maxIndexCount,a._geometryInitialized=e.geometryInitialized,a._geometryCount=e.geometryCount,a._matricesTexture=c(e.matricesTexture.uuid),void 0!==e.colorsTexture&&(a._colorsTexture=c(e.colorsTexture.uuid));break;case"LOD":a=new Lc;break;case"Line":a=new Nh(u(e.geometry),l(e.material));break;case"LineLoop":a=new Fh(u(e.geometry),l(e.material));break;case"LineSegments":a=new Oh(u(e.geometry),l(e.material));break;case"PointCloud":case"Points":a=new Vh(u(e.geometry),l(e.material));break;case"Sprite":a=new Pc(l(e.material));break;case"Group":a=new nc;break;case"Bone":a=new Xc;break;default:a=new Ha}if(a.uuid=e.uuid,void 0!==e.name&&(a.name=e.name),void 0!==e.matrix?(a.matrix.fromArray(e.matrix),void 0!==e.matrixAutoUpdate&&(a.matrixAutoUpdate=e.matrixAutoUpdate),a.matrixAutoUpdate&&a.matrix.decompose(a.position,a.quaternion,a.scale)):(void 0!==e.position&&a.position.fromArray(e.position),void 0!==e.rotation&&a.rotation.fromArray(e.rotation),void 0!==e.quaternion&&a.quaternion.fromArray(e.quaternion),void 0!==e.scale&&a.scale.fromArray(e.scale)),void 0!==e.up&&a.up.fromArray(e.up),void 0!==e.castShadow&&(a.castShadow=e.castShadow),void 0!==e.receiveShadow&&(a.receiveShadow=e.receiveShadow),e.shadow&&(void 0!==e.shadow.intensity&&(a.shadow.intensity=e.shadow.intensity),void 0!==e.shadow.bias&&(a.shadow.bias=e.shadow.bias),void 0!==e.shadow.normalBias&&(a.shadow.normalBias=e.shadow.normalBias),void 0!==e.shadow.radius&&(a.shadow.radius=e.shadow.radius),void 0!==e.shadow.mapSize&&a.shadow.mapSize.fromArray(e.shadow.mapSize),void 0!==e.shadow.camera&&(a.shadow.camera=this.parseObject(e.shadow.camera))),void 0!==e.visible&&(a.visible=e.visible),void 0!==e.frustumCulled&&(a.frustumCulled=e.frustumCulled),void 0!==e.renderOrder&&(a.renderOrder=e.renderOrder),void 0!==e.userData&&(a.userData=e.userData),void 0!==e.layers&&(a.layers.mask=e.layers),void 0!==e.children)for(var p=e.children,A=0;A<p.length;A++)a.add(this.parseObject(p[A],t,n,r,i));if(void 0!==e.animations)for(var v=e.animations,m=0;m<v.length;m++){var g=v[m];a.animations.push(i[g])}if("LOD"===e.type){void 0!==e.autoUpdate&&(a.autoUpdate=e.autoUpdate);for(var y=e.levels,b=0;b<y.length;b++){var x=y[b],_=a.getObjectByProperty("uuid",x.object);void 0!==_&&a.addLevel(_,x.distance,x.hysteresis)}}return a}},{key:"bindSkeletons",value:function(e,t){0!==Object.keys(t).length&&e.traverse((function(e){if(!0===e.isSkinnedMesh&&void 0!==e.skeleton){var n=t[e.skeleton];void 0===n?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",e.skeleton):e.bind(n,e.bindMatrix)}}))}},{key:"bindLightTargets",value:function(e){e.traverse((function(t){if(t.isDirectionalLight||t.isSpotLight){var n=t.target,r=e.getObjectByProperty("uuid",n);t.target=void 0!==r?r:new Ha}}))}}]),n}(np),Op={UVMapping:At,CubeReflectionMapping:vt,CubeRefractionMapping:mt,EquirectangularReflectionMapping:gt,EquirectangularRefractionMapping:yt,CubeUVReflectionMapping:bt},Fp={RepeatWrapping:xt,ClampToEdgeWrapping:_t,MirroredRepeatWrapping:wt},Up={NearestFilter:St,NearestMipmapNearestFilter:Mt,NearestMipmapLinearFilter:Tt,LinearFilter:Ct,LinearMipmapNearestFilter:Rt,LinearMipmapLinearFilter:Pt},zp=function(e){Y(n,e);var t=$(n);function n(e){var r;return V(this,n),(r=t.call(this,e)).isImageBitmapLoader=!0,"undefined"===typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"===typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),r.options={premultiplyAlpha:"none"},r}return W(n,[{key:"setOptions",value:function(e){return this.options=e,this}},{key:"load",value:function(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var i=this,a=$f.get(e);if(void 0!==a)return i.manager.itemStart(e),a.then?void a.then((function(n){t&&t(n),i.manager.itemEnd(e)})).catch((function(e){r&&r(e)})):(setTimeout((function(){t&&t(a),i.manager.itemEnd(e)}),0),a);var o={};o.credentials="anonymous"===this.crossOrigin?"same-origin":"include",o.headers=this.requestHeader;var s=fetch(e,o).then((function(e){return e.blob()})).then((function(e){return createImageBitmap(e,Object.assign(i.options,{colorSpaceConversion:"none"}))})).then((function(n){return $f.add(e,n),t&&t(n),i.manager.itemEnd(e),n})).catch((function(t){r&&r(t),$f.remove(e),i.manager.itemError(e),i.manager.itemEnd(e)}));$f.add(e,s),i.manager.itemStart(e)}}]),n}(np),Gp=function(){function e(){V(this,e)}return W(e,null,[{key:"getContext",value:function(){return void 0===rp&&(rp=new(window.AudioContext||window.webkitAudioContext)),rp}},{key:"setContext",value:function(e){rp=e}}]),e}(),qp=function(e){Y(n,e);var t=$(n);function n(e){return V(this,n),t.call(this,e)}return W(n,[{key:"load",value:function(e,t,n,r){var i=this,a=new op(this.manager);function o(t){r?r(t):console.error(t),i.manager.itemError(e)}a.setResponseType("arraybuffer"),a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,(function(e){try{var n=e.slice(0);Gp.getContext().decodeAudioData(n,(function(e){t(e)})).catch(o)}catch(r){o(r)}}),n,r)}}]),n}(np),Hp=new va,Vp=new va,jp=new va,Wp=function(){function e(){V(this,e),this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new us,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new us,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}return W(e,[{key:"update",value:function(e){var t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,jp.copy(e.projectionMatrix);var n,r,i=t.eyeSep/2,a=i*t.near/t.focus,o=t.near*Math.tan(Qr*t.fov*.5)/t.zoom;Vp.elements[12]=-i,Hp.elements[12]=i,n=-o*t.aspect+a,r=o*t.aspect+a,jp.elements[0]=2*t.near/(r-n),jp.elements[8]=(r+n)/(r-n),this.cameraL.projectionMatrix.copy(jp),n=-o*t.aspect-a,r=o*t.aspect-a,jp.elements[0]=2*t.near/(r-n),jp.elements[8]=(r+n)/(r-n),this.cameraR.projectionMatrix.copy(jp)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(Vp),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(Hp)}}]),e}(),Xp=function(){function e(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];V(this,e),this.autoStart=t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}return W(e,[{key:"start",value:function(){this.startTime=Yp(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}},{key:"stop",value:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}},{key:"getElapsedTime",value:function(){return this.getDelta(),this.elapsedTime}},{key:"getDelta",value:function(){var e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var t=Yp();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}]),e}();function Yp(){return performance.now()}var Qp=new zi,Jp=new Ui,Kp=new zi,Zp=new zi,$p=function(e){Y(n,e);var t=$(n);function n(){var e;return V(this,n),(e=t.call(this)).type="AudioListener",e.context=Gp.getContext(),e.gain=e.context.createGain(),e.gain.connect(e.context.destination),e.filter=null,e.timeDelta=0,e._clock=new Xp,e}return W(n,[{key:"getInput",value:function(){return this.gain}},{key:"removeFilter",value:function(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}},{key:"getFilter",value:function(){return this.filter}},{key:"setFilter",value:function(e){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}},{key:"getMasterVolume",value:function(){return this.gain.gain.value}},{key:"setMasterVolume",value:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}},{key:"updateMatrixWorld",value:function(e){oe(Q(n.prototype),"updateMatrixWorld",this).call(this,e);var t=this.context.listener,r=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Qp,Jp,Kp),Zp.set(0,0,-1).applyQuaternion(Jp),t.positionX){var i=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(Qp.x,i),t.positionY.linearRampToValueAtTime(Qp.y,i),t.positionZ.linearRampToValueAtTime(Qp.z,i),t.forwardX.linearRampToValueAtTime(Zp.x,i),t.forwardY.linearRampToValueAtTime(Zp.y,i),t.forwardZ.linearRampToValueAtTime(Zp.z,i),t.upX.linearRampToValueAtTime(r.x,i),t.upY.linearRampToValueAtTime(r.y,i),t.upZ.linearRampToValueAtTime(r.z,i)}else t.setPosition(Qp.x,Qp.y,Qp.z),t.setOrientation(Zp.x,Zp.y,Zp.z,r.x,r.y,r.z)}}]),n}(Ha),eA=function(e){Y(n,e);var t=$(n);function n(e){var r;return V(this,n),(r=t.call(this)).type="Audio",r.listener=e,r.context=e.context,r.gain=r.context.createGain(),r.gain.connect(e.getInput()),r.autoplay=!1,r.buffer=null,r.detune=0,r.loop=!1,r.loopStart=0,r.loopEnd=0,r.offset=0,r.duration=void 0,r.playbackRate=1,r.isPlaying=!1,r.hasPlaybackControl=!0,r.source=null,r.sourceType="empty",r._startedAt=0,r._progress=0,r._connected=!1,r.filters=[],r}return W(n,[{key:"getOutput",value:function(){return this.gain}},{key:"setNodeSource",value:function(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}},{key:"setMediaElementSource",value:function(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}},{key:"setMediaStreamSource",value:function(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}},{key:"setBuffer",value:function(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}},{key:"play",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!0!==this.isPlaying){if(!1!==this.hasPlaybackControl){this._startedAt=this.context.currentTime+e;var t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}console.warn("THREE.Audio: this Audio has no playback control.")}else console.warn("THREE.Audio: Audio is already playing.")}},{key:"pause",value:function(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}},{key:"stop",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!1!==this.hasPlaybackControl)return this._progress=0,null!==this.source&&(this.source.stop(this.context.currentTime+e),this.source.onended=null),this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}},{key:"connect",value:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}},{key:"disconnect",value:function(){if(!1!==this._connected){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}},{key:"getFilters",value:function(){return this.filters}},{key:"setFilters",value:function(e){return e||(e=[]),!0===this._connected?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}},{key:"setDetune",value:function(e){return this.detune=e,!0===this.isPlaying&&void 0!==this.source.detune&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}},{key:"getDetune",value:function(){return this.detune}},{key:"getFilter",value:function(){return this.getFilters()[0]}},{key:"setFilter",value:function(e){return this.setFilters(e?[e]:[])}},{key:"setPlaybackRate",value:function(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}},{key:"getPlaybackRate",value:function(){return this.playbackRate}},{key:"onEnded",value:function(){this.isPlaying=!1}},{key:"getLoop",value:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}},{key:"setLoop",value:function(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}},{key:"setLoopStart",value:function(e){return this.loopStart=e,this}},{key:"setLoopEnd",value:function(e){return this.loopEnd=e,this}},{key:"getVolume",value:function(){return this.gain.gain.value}},{key:"setVolume",value:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}]),n}(Ha),tA=new zi,nA=new Ui,rA=new zi,iA=new zi,aA=function(e){Y(n,e);var t=$(n);function n(e){var r;return V(this,n),(r=t.call(this,e)).panner=r.context.createPanner(),r.panner.panningModel="HRTF",r.panner.connect(r.gain),r}return W(n,[{key:"connect",value:function(){oe(Q(n.prototype),"connect",this).call(this),this.panner.connect(this.gain)}},{key:"disconnect",value:function(){oe(Q(n.prototype),"disconnect",this).call(this),this.panner.disconnect(this.gain)}},{key:"getOutput",value:function(){return this.panner}},{key:"getRefDistance",value:function(){return this.panner.refDistance}},{key:"setRefDistance",value:function(e){return this.panner.refDistance=e,this}},{key:"getRolloffFactor",value:function(){return this.panner.rolloffFactor}},{key:"setRolloffFactor",value:function(e){return this.panner.rolloffFactor=e,this}},{key:"getDistanceModel",value:function(){return this.panner.distanceModel}},{key:"setDistanceModel",value:function(e){return this.panner.distanceModel=e,this}},{key:"getMaxDistance",value:function(){return this.panner.maxDistance}},{key:"setMaxDistance",value:function(e){return this.panner.maxDistance=e,this}},{key:"setDirectionalCone",value:function(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this}},{key:"updateMatrixWorld",value:function(e){if(oe(Q(n.prototype),"updateMatrixWorld",this).call(this,e),!0!==this.hasPlaybackControl||!1!==this.isPlaying){this.matrixWorld.decompose(tA,nA,rA),iA.set(0,0,1).applyQuaternion(nA);var t=this.panner;if(t.positionX){var r=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(tA.x,r),t.positionY.linearRampToValueAtTime(tA.y,r),t.positionZ.linearRampToValueAtTime(tA.z,r),t.orientationX.linearRampToValueAtTime(iA.x,r),t.orientationY.linearRampToValueAtTime(iA.y,r),t.orientationZ.linearRampToValueAtTime(iA.z,r)}else t.setPosition(tA.x,tA.y,tA.z),t.setOrientation(iA.x,iA.y,iA.z)}}}]),n}(eA),oA=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2048;V(this,e),this.analyser=t.context.createAnalyser(),this.analyser.fftSize=n,this.data=new Uint8Array(this.analyser.frequencyBinCount),t.getOutput().connect(this.analyser)}return W(e,[{key:"getFrequencyData",value:function(){return this.analyser.getByteFrequencyData(this.data),this.data}},{key:"getAverageFrequency",value:function(){for(var e=0,t=this.getFrequencyData(),n=0;n<t.length;n++)e+=t[n];return e/t.length}}]),e}(),sA=function(){function e(t,n,r){var i,a,o;switch(V(this,e),this.binding=t,this.valueSize=r,n){case"quaternion":i=this._slerp,a=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*r),this._workIndex=5;break;case"string":case"bool":i=this._select,a=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(5*r);break;default:i=this._lerp,a=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*r)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=a,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}return W(e,[{key:"accumulate",value:function(e,t){var n=this.buffer,r=this.valueSize,i=e*r+r,a=this.cumulativeWeight;if(0===a){for(var o=0;o!==r;++o)n[i+o]=n[o];a=t}else{var s=t/(a+=t);this._mixBufferRegion(n,i,0,s,r)}this.cumulativeWeight=a}},{key:"accumulateAdditive",value:function(e){var t=this.buffer,n=this.valueSize,r=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,n),this.cumulativeWeightAdditive+=e}},{key:"apply",value:function(e){var t=this.valueSize,n=this.buffer,r=e*t+t,i=this.cumulativeWeight,a=this.cumulativeWeightAdditive,o=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,i<1){var s=t*this._origIndex;this._mixBufferRegion(n,r,s,1-i,t)}a>0&&this._mixBufferRegionAdditive(n,r,this._addIndex*t,1,t);for(var u=t,l=t+t;u!==l;++u)if(n[u]!==n[u+t]){o.setValue(n,r);break}}},{key:"saveOriginalState",value:function(){var e=this.binding,t=this.buffer,n=this.valueSize,r=n*this._origIndex;e.getValue(t,r);for(var i=n,a=r;i!==a;++i)t[i]=t[r+i%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}},{key:"restoreOriginalState",value:function(){var e=3*this.valueSize;this.binding.setValue(this.buffer,e)}},{key:"_setAdditiveIdentityNumeric",value:function(){for(var e=this._addIndex*this.valueSize,t=e+this.valueSize,n=e;n<t;n++)this.buffer[n]=0}},{key:"_setAdditiveIdentityQuaternion",value:function(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}},{key:"_setAdditiveIdentityOther",value:function(){for(var e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize,n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}},{key:"_select",value:function(e,t,n,r,i){if(r>=.5)for(var a=0;a!==i;++a)e[t+a]=e[n+a]}},{key:"_slerp",value:function(e,t,n,r){Ui.slerpFlat(e,t,e,t,e,n,r)}},{key:"_slerpAdditive",value:function(e,t,n,r,i){var a=this._workIndex*i;Ui.multiplyQuaternionsFlat(e,a,e,t,e,n),Ui.slerpFlat(e,t,e,t,e,a,r)}},{key:"_lerp",value:function(e,t,n,r,i){for(var a=1-r,o=0;o!==i;++o){var s=t+o;e[s]=e[s]*a+e[n+o]*r}}},{key:"_lerpAdditive",value:function(e,t,n,r,i){for(var a=0;a!==i;++a){var o=t+a;e[o]=e[o]+e[n+a]*r}}}]),e}(),uA="\\[\\]\\.:\\/",lA=new RegExp("["+uA+"]","g"),cA="[^"+uA+"]",hA="[^"+uA.replace("\\.","")+"]",dA=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",cA)+/(WCOD+)?/.source.replace("WCOD",hA)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",cA)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",cA)+"$"),fA=["material","materials","bones","map"],pA=function(){function e(t,n,r){V(this,e);var i=r||AA.parseTrackName(n);this._targetGroup=t,this._bindings=t.subscribe_(n,i)}return W(e,[{key:"getValue",value:function(e,t){this.bind();var n=this._targetGroup.nCachedObjects_,r=this._bindings[n];void 0!==r&&r.getValue(e,t)}},{key:"setValue",value:function(e,t){for(var n=this._bindings,r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(e,t)}},{key:"bind",value:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}},{key:"unbind",value:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}]),e}(),AA=function(){function e(t,n,r){V(this,e),this.path=n,this.parsedPath=r||e.parseTrackName(n),this.node=e.findNode(t,this.parsedPath.nodeName),this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}return W(e,[{key:"_getValue_unavailable",value:function(){}},{key:"_setValue_unavailable",value:function(){}},{key:"_getValue_direct",value:function(e,t){e[t]=this.targetObject[this.propertyName]}},{key:"_getValue_array",value:function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)e[t++]=n[r]}},{key:"_getValue_arrayElement",value:function(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}},{key:"_getValue_toArray",value:function(e,t){this.resolvedProperty.toArray(e,t)}},{key:"_setValue_direct",value:function(e,t){this.targetObject[this.propertyName]=e[t]}},{key:"_setValue_direct_setNeedsUpdate",value:function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}},{key:"_setValue_direct_setMatrixWorldNeedsUpdate",value:function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_array",value:function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++]}},{key:"_setValue_array_setNeedsUpdate",value:function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.needsUpdate=!0}},{key:"_setValue_array_setMatrixWorldNeedsUpdate",value:function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_arrayElement",value:function(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}},{key:"_setValue_arrayElement_setNeedsUpdate",value:function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}},{key:"_setValue_arrayElement_setMatrixWorldNeedsUpdate",value:function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_fromArray",value:function(e,t){this.resolvedProperty.fromArray(e,t)}},{key:"_setValue_fromArray_setNeedsUpdate",value:function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}},{key:"_setValue_fromArray_setMatrixWorldNeedsUpdate",value:function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_getValue_unbound",value:function(e,t){this.bind(),this.getValue(e,t)}},{key:"_setValue_unbound",value:function(e,t){this.bind(),this.setValue(e,t)}},{key:"bind",value:function(){var t=this.node,n=this.parsedPath,r=n.objectName,i=n.propertyName,a=n.propertyIndex;if(t||(t=e.findNode(this.rootNode,n.nodeName),this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,t){if(r){var o=n.objectIndex;switch(r){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(var s=0;s<t.length;s++)if(t[s].name===o){o=s;break}break;case"map":if("map"in t){t=t.map;break}if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);t=t.material.map;break;default:if(void 0===t[r])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[r]}if(void 0!==o){if(void 0===t[o])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[o]}}var u=t[i];if(void 0!==u){var l=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?l=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(l=this.Versioning.MatrixWorldNeedsUpdate);var c=this.BindingType.Direct;if(void 0!==a){if("morphTargetInfluences"===i){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[a]&&(a=t.morphTargetDictionary[a])}c=this.BindingType.ArrayElement,this.resolvedProperty=u,this.propertyIndex=a}else void 0!==u.fromArray&&void 0!==u.toArray?(c=this.BindingType.HasFromToArray,this.resolvedProperty=u):Array.isArray(u)?(c=this.BindingType.EntireArray,this.resolvedProperty=u):this.propertyName=i;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][l]}else{var h=n.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+h+"."+i+" but it wasn't found.",t)}}else console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".")}},{key:"unbind",value:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}],[{key:"create",value:function(t,n,r){return t&&t.isAnimationObjectGroup?new e.Composite(t,n,r):new e(t,n,r)}},{key:"sanitizeNodeName",value:function(e){return e.replace(/\s/g,"_").replace(lA,"")}},{key:"parseTrackName",value:function(e){var t=dA.exec(e);if(null===t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);var n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){var i=n.nodeName.substring(r+1);-1!==fA.indexOf(i)&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=i)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}},{key:"findNode",value:function(e,t){if(void 0===t||""===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){var n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){var r=function e(n){for(var r=0;r<n.length;r++){var i=n[r];if(i.name===t||i.uuid===t)return i;var a=e(i.children);if(a)return a}return null}(e.children);if(r)return r}return null}}]),e}();AA.Composite=pA,AA.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},AA.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},AA.prototype.GetterByBindingType=[AA.prototype._getValue_direct,AA.prototype._getValue_array,AA.prototype._getValue_arrayElement,AA.prototype._getValue_toArray],AA.prototype.SetterByBindingTypeAndVersioning=[[AA.prototype._setValue_direct,AA.prototype._setValue_direct_setNeedsUpdate,AA.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[AA.prototype._setValue_array,AA.prototype._setValue_array_setNeedsUpdate,AA.prototype._setValue_array_setMatrixWorldNeedsUpdate],[AA.prototype._setValue_arrayElement,AA.prototype._setValue_arrayElement_setNeedsUpdate,AA.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[AA.prototype._setValue_fromArray,AA.prototype._setValue_fromArray_setNeedsUpdate,AA.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];var vA=function(){function e(){V(this,e),this.isAnimationObjectGroup=!0,this.uuid=Kr(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var t={};this._indicesByUUID=t;for(var n=0,r=arguments.length;n!==r;++n)t[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var i=this;this.stats={objects:{get total(){return i._objects.length},get inUse(){return this.total-i.nCachedObjects_}},get bindingsPerObject(){return i._bindings.length}}}return W(e,[{key:"add",value:function(){for(var e=this._objects,t=this._indicesByUUID,n=this._paths,r=this._parsedPaths,i=this._bindings,a=i.length,o=void 0,s=e.length,u=this.nCachedObjects_,l=0,c=arguments.length;l!==c;++l){var h=arguments[l],d=h.uuid,f=t[d];if(void 0===f){f=s++,t[d]=f,e.push(h);for(var p=0,A=a;p!==A;++p)i[p].push(new AA(h,n[p],r[p]))}else if(f<u){o=e[f];var v=--u,m=e[v];t[m.uuid]=f,e[f]=m,t[d]=v,e[v]=h;for(var g=0,y=a;g!==y;++g){var b=i[g],x=b[v],_=b[f];b[f]=x,void 0===_&&(_=new AA(h,n[g],r[g])),b[v]=_}}else e[f]!==o&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=u}},{key:"remove",value:function(){for(var e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length,i=this.nCachedObjects_,a=0,o=arguments.length;a!==o;++a){var s=arguments[a],u=s.uuid,l=t[u];if(void 0!==l&&l>=i){var c=i++,h=e[c];t[h.uuid]=l,e[l]=h,t[u]=c,e[c]=s;for(var d=0,f=r;d!==f;++d){var p=n[d],A=p[c],v=p[l];p[l]=A,p[c]=v}}}this.nCachedObjects_=i}},{key:"uncache",value:function(){for(var e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length,i=this.nCachedObjects_,a=e.length,o=0,s=arguments.length;o!==s;++o){var u=arguments[o],l=u.uuid,c=t[l];if(void 0!==c)if(delete t[l],c<i){var h=--i,d=e[h],f=--a,p=e[f];t[d.uuid]=c,e[c]=d,t[p.uuid]=h,e[h]=p,e.pop();for(var A=0,v=r;A!==v;++A){var m=n[A],g=m[h],y=m[f];m[c]=g,m[h]=y,m.pop()}}else{var b=--a,x=e[b];b>0&&(t[x.uuid]=c),e[c]=x,e.pop();for(var _=0,w=r;_!==w;++_){var S=n[_];S[c]=S[b],S.pop()}}}this.nCachedObjects_=i}},{key:"subscribe_",value:function(e,t){var n=this._bindingsIndicesByPath,r=n[e],i=this._bindings;if(void 0!==r)return i[r];var a=this._paths,o=this._parsedPaths,s=this._objects,u=s.length,l=this.nCachedObjects_,c=new Array(u);r=i.length,n[e]=r,a.push(e),o.push(t),i.push(c);for(var h=l,d=s.length;h!==d;++h){var f=s[h];c[h]=new AA(f,e,t)}return c}},{key:"unsubscribe_",value:function(e){var t=this._bindingsIndicesByPath,n=t[e];if(void 0!==n){var r=this._paths,i=this._parsedPaths,a=this._bindings,o=a.length-1,s=a[o];t[e[o]]=n,a[n]=s,a.pop(),i[n]=i[o],i.pop(),r[n]=r[o],r.pop()}}}]),e}(),mA=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n.blendMode;V(this,e),this._mixer=t,this._clip=n,this._localRoot=r,this.blendMode=i;for(var a=n.tracks,o=a.length,s=new Array(o),u={endingStart:Vn,endingEnd:Vn},l=0;l!==o;++l){var c=a[l].createInterpolant(null);s[l]=c,c.settings=u}this._interpolantSettings=u,this._interpolants=s,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=Un,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}return W(e,[{key:"play",value:function(){return this._mixer._activateAction(this),this}},{key:"stop",value:function(){return this._mixer._deactivateAction(this),this.reset()}},{key:"reset",value:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}},{key:"isRunning",value:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}},{key:"isScheduled",value:function(){return this._mixer._isActiveAction(this)}},{key:"startAt",value:function(e){return this._startTime=e,this}},{key:"setLoop",value:function(e,t){return this.loop=e,this.repetitions=t,this}},{key:"setEffectiveWeight",value:function(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}},{key:"getEffectiveWeight",value:function(){return this._effectiveWeight}},{key:"fadeIn",value:function(e){return this._scheduleFading(e,0,1)}},{key:"fadeOut",value:function(e){return this._scheduleFading(e,1,0)}},{key:"crossFadeFrom",value:function(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){var r=this._clip.duration,i=e._clip.duration,a=i/r,o=r/i;e.warp(1,a,t),this.warp(o,1,t)}return this}},{key:"crossFadeTo",value:function(e,t,n){return e.crossFadeFrom(this,t,n)}},{key:"stopFading",value:function(){var e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}},{key:"setEffectiveTimeScale",value:function(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}},{key:"getEffectiveTimeScale",value:function(){return this._effectiveTimeScale}},{key:"setDuration",value:function(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}},{key:"syncWith",value:function(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}},{key:"halt",value:function(e){return this.warp(this._effectiveTimeScale,0,e)}},{key:"warp",value:function(e,t,n){var r=this._mixer,i=r.time,a=this.timeScale,o=this._timeScaleInterpolant;null===o&&(o=r._lendControlInterpolant(),this._timeScaleInterpolant=o);var s=o.parameterPositions,u=o.sampleValues;return s[0]=i,s[1]=i+n,u[0]=e/a,u[1]=t/a,this}},{key:"stopWarping",value:function(){var e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}},{key:"getMixer",value:function(){return this._mixer}},{key:"getClip",value:function(){return this._clip}},{key:"getRoot",value:function(){return this._localRoot||this._mixer._root}},{key:"_update",value:function(e,t,n,r){if(this.enabled){var i=this._startTime;if(null!==i){var a=(e-i)*n;a<0||0===n?t=0:(this._startTime=null,t=n*a)}t*=this._updateTimeScale(e);var o=this._updateTime(t),s=this._updateWeight(e);if(s>0){var u=this._interpolants,l=this._propertyBindings;if(this.blendMode===Yn)for(var c=0,h=u.length;c!==h;++c)u[c].evaluate(o),l[c].accumulateAdditive(s);else for(var d=0,f=u.length;d!==f;++d)u[d].evaluate(o),l[d].accumulate(r,s)}}else this._updateWeight(e)}},{key:"_updateWeight",value:function(e){var t=0;if(this.enabled){t=this.weight;var n=this._weightInterpolant;if(null!==n){var r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=t,t}},{key:"_updateTimeScale",value:function(e){var t=0;if(!this.paused){t=this.timeScale;var n=this._timeScaleInterpolant;if(null!==n)t*=n.evaluate(e)[0],e>n.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t)}return this._effectiveTimeScale=t,t}},{key:"_updateTime",value:function(e){var t=this._clip.duration,n=this.loop,r=this.time+e,i=this._loopCount,a=n===zn;if(0===e)return-1===i?r:a&&1===(1&i)?t-r:r;if(n===Fn){-1===i&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else{if(!(r<0)){this.time=r;break e}r=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===i&&(e>=0?(i=0,this._setEndings(!0,0===this.repetitions,a)):this._setEndings(0===this.repetitions,!0,a)),r>=t||r<0){var o=Math.floor(r/t);r-=t*o,i+=Math.abs(o);var s=this.repetitions-i;if(s<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===s){var u=e<0;this._setEndings(u,!u,a)}else this._setEndings(!1,!1,a);this._loopCount=i,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:o})}}else this.time=r;if(a&&1===(1&i))return t-r}return r}},{key:"_setEndings",value:function(e,t,n){var r=this._interpolantSettings;n?(r.endingStart=jn,r.endingEnd=jn):(r.endingStart=e?this.zeroSlopeAtStart?jn:Vn:Wn,r.endingEnd=t?this.zeroSlopeAtEnd?jn:Vn:Wn)}},{key:"_scheduleFading",value:function(e,t,n){var r=this._mixer,i=r.time,a=this._weightInterpolant;null===a&&(a=r._lendControlInterpolant(),this._weightInterpolant=a);var o=a.parameterPositions,s=a.sampleValues;return o[0]=i,s[0]=t,o[1]=i+e,s[1]=n,this}}]),e}(),gA=new Float32Array(1),yA=function(e){Y(n,e);var t=$(n);function n(e){var r;return V(this,n),(r=t.call(this))._root=e,r._initMemoryManager(),r._accuIndex=0,r.time=0,r.timeScale=1,r}return W(n,[{key:"_bindAction",value:function(e,t){var n=e._localRoot||this._root,r=e._clip.tracks,i=r.length,a=e._propertyBindings,o=e._interpolants,s=n.uuid,u=this._bindingsByRootAndName,l=u[s];void 0===l&&(l={},u[s]=l);for(var c=0;c!==i;++c){var h=r[c],d=h.name,f=l[d];if(void 0!==f)++f.referenceCount,a[c]=f;else{if(void 0!==(f=a[c])){null===f._cacheIndex&&(++f.referenceCount,this._addInactiveBinding(f,s,d));continue}var p=t&&t._propertyBindings[c].binding.parsedPath;++(f=new sA(AA.create(n,d,p),h.ValueTypeName,h.getValueSize())).referenceCount,this._addInactiveBinding(f,s,d),a[c]=f}o[c].resultBuffer=f.buffer}}},{key:"_activateAction",value:function(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){var t=(e._localRoot||this._root).uuid,n=e._clip.uuid,r=this._actionsByClip[n];this._bindAction(e,r&&r.knownActions[0]),this._addInactiveAction(e,n,t)}for(var i=e._propertyBindings,a=0,o=i.length;a!==o;++a){var s=i[a];0===s.useCount++&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}},{key:"_deactivateAction",value:function(e){if(this._isActiveAction(e)){for(var t=e._propertyBindings,n=0,r=t.length;n!==r;++n){var i=t[n];0===--i.useCount&&(i.restoreOriginalState(),this._takeBackBinding(i))}this._takeBackAction(e)}}},{key:"_initMemoryManager",value:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}},{key:"_isActiveAction",value:function(e){var t=e._cacheIndex;return null!==t&&t<this._nActiveActions}},{key:"_addInactiveAction",value:function(e,t,n){var r=this._actions,i=this._actionsByClip,a=i[t];if(void 0===a)a={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,i[t]=a;else{var o=a.knownActions;e._byClipCacheIndex=o.length,o.push(e)}e._cacheIndex=r.length,r.push(e),a.actionByRoot[n]=e}},{key:"_removeInactiveAction",value:function(e){var t=this._actions,n=t[t.length-1],r=e._cacheIndex;n._cacheIndex=r,t[r]=n,t.pop(),e._cacheIndex=null;var i=e._clip.uuid,a=this._actionsByClip,o=a[i],s=o.knownActions,u=s[s.length-1],l=e._byClipCacheIndex;u._byClipCacheIndex=l,s[l]=u,s.pop(),e._byClipCacheIndex=null,delete o.actionByRoot[(e._localRoot||this._root).uuid],0===s.length&&delete a[i],this._removeInactiveBindingsForAction(e)}},{key:"_removeInactiveBindingsForAction",value:function(e){for(var t=e._propertyBindings,n=0,r=t.length;n!==r;++n){var i=t[n];0===--i.referenceCount&&this._removeInactiveBinding(i)}}},{key:"_lendAction",value:function(e){var t=this._actions,n=e._cacheIndex,r=this._nActiveActions++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}},{key:"_takeBackAction",value:function(e){var t=this._actions,n=e._cacheIndex,r=--this._nActiveActions,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}},{key:"_addInactiveBinding",value:function(e,t,n){var r=this._bindingsByRootAndName,i=this._bindings,a=r[t];void 0===a&&(a={},r[t]=a),a[n]=e,e._cacheIndex=i.length,i.push(e)}},{key:"_removeInactiveBinding",value:function(e){var t=this._bindings,n=e.binding,r=n.rootNode.uuid,i=n.path,a=this._bindingsByRootAndName,o=a[r],s=t[t.length-1],u=e._cacheIndex;s._cacheIndex=u,t[u]=s,t.pop(),delete o[i],0===Object.keys(o).length&&delete a[r]}},{key:"_lendBinding",value:function(e){var t=this._bindings,n=e._cacheIndex,r=this._nActiveBindings++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}},{key:"_takeBackBinding",value:function(e){var t=this._bindings,n=e._cacheIndex,r=--this._nActiveBindings,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}},{key:"_lendControlInterpolant",value:function(){var e=this._controlInterpolants,t=this._nActiveControlInterpolants++,n=e[t];return void 0===n&&((n=new Gf(new Float32Array(2),new Float32Array(2),1,gA)).__cacheIndex=t,e[t]=n),n}},{key:"_takeBackControlInterpolant",value:function(e){var t=this._controlInterpolants,n=e.__cacheIndex,r=--this._nActiveControlInterpolants,i=t[r];e.__cacheIndex=r,t[r]=e,i.__cacheIndex=n,t[n]=i}},{key:"clipAction",value:function(e,t,n){var r=t||this._root,i=r.uuid,a="string"===typeof e?Kf.findByName(r,e):e,o=null!==a?a.uuid:e,s=this._actionsByClip[o],u=null;if(void 0===n&&(n=null!==a?a.blendMode:Xn),void 0!==s){var l=s.actionByRoot[i];if(void 0!==l&&l.blendMode===n)return l;u=s.knownActions[0],null===a&&(a=u._clip)}if(null===a)return null;var c=new mA(this,a,t,n);return this._bindAction(c,u),this._addInactiveAction(c,o,i),c}},{key:"existingAction",value:function(e,t){var n=t||this._root,r=n.uuid,i="string"===typeof e?Kf.findByName(n,e):e,a=i?i.uuid:e,o=this._actionsByClip[a];return void 0!==o&&o.actionByRoot[r]||null}},{key:"stopAllAction",value:function(){for(var e=this._actions,t=this._nActiveActions-1;t>=0;--t)e[t].stop();return this}},{key:"update",value:function(e){e*=this.timeScale;for(var t=this._actions,n=this._nActiveActions,r=this.time+=e,i=Math.sign(e),a=this._accuIndex^=1,o=0;o!==n;++o){t[o]._update(r,e,i,a)}for(var s=this._bindings,u=this._nActiveBindings,l=0;l!==u;++l)s[l].apply(a);return this}},{key:"setTime",value:function(e){this.time=0;for(var t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}},{key:"getRoot",value:function(){return this._root}},{key:"uncacheClip",value:function(e){var t=this._actions,n=e.uuid,r=this._actionsByClip,i=r[n];if(void 0!==i){for(var a=i.knownActions,o=0,s=a.length;o!==s;++o){var u=a[o];this._deactivateAction(u);var l=u._cacheIndex,c=t[t.length-1];u._cacheIndex=null,u._byClipCacheIndex=null,c._cacheIndex=l,t[l]=c,t.pop(),this._removeInactiveBindingsForAction(u)}delete r[n]}}},{key:"uncacheRoot",value:function(e){var t=e.uuid,n=this._actionsByClip;for(var r in n){var i=n[r].actionByRoot[t];void 0!==i&&(this._deactivateAction(i),this._removeInactiveAction(i))}var a=this._bindingsByRootAndName[t];if(void 0!==a)for(var o in a){var s=a[o];s.restoreOriginalState(),this._removeInactiveBinding(s)}}},{key:"uncacheAction",value:function(e,t){var n=this.existingAction(e,t);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}]),n}(Wr),bA=function(){function e(t){V(this,e),this.value=t}return W(e,[{key:"clone",value:function(){return new e(void 0===this.value.clone?this.value:this.value.clone())}}]),e}(),xA=0,_A=function(e){Y(n,e);var t=$(n);function n(){var e;return V(this,n),(e=t.call(this)).isUniformsGroup=!0,Object.defineProperty(K(e),"id",{value:xA++}),e.name="",e.usage=Nr,e.uniforms=[],e}return W(n,[{key:"add",value:function(e){return this.uniforms.push(e),this}},{key:"remove",value:function(e){var t=this.uniforms.indexOf(e);return-1!==t&&this.uniforms.splice(t,1),this}},{key:"setName",value:function(e){return this.name=e,this}},{key:"setUsage",value:function(e){return this.usage=e,this}},{key:"dispose",value:function(){return this.dispatchEvent({type:"dispose"}),this}},{key:"copy",value:function(e){this.name=e.name,this.usage=e.usage;var t=e.uniforms;this.uniforms.length=0;for(var n=0,r=t.length;n<r;n++)for(var i=Array.isArray(t[n])?t[n]:[t[n]],a=0;a<i.length;a++)this.uniforms.push(i[a].clone());return this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),n}(Wr),wA=function(e){Y(n,e);var t=$(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return V(this,n),(i=t.call(this,e,r)).isInstancedInterleavedBuffer=!0,i.meshPerAttribute=a,i}return W(n,[{key:"copy",value:function(e){return oe(Q(n.prototype),"copy",this).call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}},{key:"clone",value:function(e){var t=oe(Q(n.prototype),"clone",this).call(this,e);return t.meshPerAttribute=this.meshPerAttribute,t}},{key:"toJSON",value:function(e){var t=oe(Q(n.prototype),"toJSON",this).call(this,e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}]),n}(vc),SA=function(){function e(t,n,r,i,a){V(this,e),this.isGLBufferAttribute=!0,this.name="",this.buffer=t,this.type=n,this.itemSize=r,this.elementSize=i,this.count=a,this.version=0}return W(e,[{key:"needsUpdate",set:function(e){!0===e&&this.version++}},{key:"setBuffer",value:function(e){return this.buffer=e,this}},{key:"setType",value:function(e,t){return this.type=e,this.elementSize=t,this}},{key:"setItemSize",value:function(e){return this.itemSize=e,this}},{key:"setCount",value:function(e){return this.count=e,this}}]),e}(),MA=new va,kA=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;V(this,e),this.ray=new Aa(t,n),this.near=r,this.far=i,this.camera=null,this.layers=new Ta,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}return W(e,[{key:"set",value:function(e,t){this.ray.set(e,t)}},{key:"setFromCamera",value:function(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}},{key:"setFromXRController",value:function(e){return MA.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(MA),this}},{key:"intersectObject",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return EA(e,this,n,t),n.sort(TA),n}},{key:"intersectObjects",value:function(e){for(var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=0,i=e.length;r<i;r++)EA(e[r],this,n,t);return n.sort(TA),n}}]),e}();function TA(e,t){return e.distance-t.distance}function EA(e,t,n,r){var i=!0;e.layers.test(t.layers)&&(!1===e.raycast(t,n)&&(i=!1));if(!0===i&&!0===r)for(var a=e.children,o=0,s=a.length;o<s;o++)EA(a[o],t,n,!0)}var CA=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return V(this,e),this.radius=t,this.phi=n,this.theta=r,this}return W(e,[{key:"set",value:function(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}},{key:"copy",value:function(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}},{key:"makeSafe",value:function(){var e=1e-6;return this.phi=Math.max(e,Math.min(Math.PI-e,this.phi)),this}},{key:"setFromVector3",value:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}},{key:"setFromCartesianCoords",value:function(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(Zr(t/this.radius,-1,1))),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}(),RA=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return V(this,e),this.radius=t,this.theta=n,this.y=r,this}return W(e,[{key:"set",value:function(e,t,n){return this.radius=e,this.theta=t,this.y=n,this}},{key:"copy",value:function(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}},{key:"setFromVector3",value:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}},{key:"setFromCartesianCoords",value:function(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}(),BA=function(){function e(t,n,r,i){V(this,e),e.prototype.isMatrix2=!0,this.elements=[1,0,0,1],void 0!==t&&this.set(t,n,r,i)}return W(e,[{key:"identity",value:function(){return this.set(1,0,0,1),this}},{key:"fromArray",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<4;n++)this.elements[n]=e[n+t];return this}},{key:"set",value:function(e,t,n,r){var i=this.elements;return i[0]=e,i[2]=t,i[1]=n,i[3]=r,this}}]),e}(),PA=new ii,NA=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new ii(1/0,1/0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ii(-1/0,-1/0);V(this,e),this.isBox2=!0,this.min=t,this.max=n}return W(e,[{key:"set",value:function(e,t){return this.min.copy(e),this.max.copy(t),this}},{key:"setFromPoints",value:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}},{key:"setFromCenterAndSize",value:function(e,t){var n=PA.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.min.copy(e.min),this.max.copy(e.max),this}},{key:"makeEmpty",value:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}},{key:"isEmpty",value:function(){return this.max.x<this.min.x||this.max.y<this.min.y}},{key:"getCenter",value:function(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}},{key:"getSize",value:function(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}},{key:"expandByPoint",value:function(e){return this.min.min(e),this.max.max(e),this}},{key:"expandByVector",value:function(e){return this.min.sub(e),this.max.add(e),this}},{key:"expandByScalar",value:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this}},{key:"containsPoint",value:function(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}},{key:"containsBox",value:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}},{key:"getParameter",value:function(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}},{key:"intersectsBox",value:function(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}},{key:"clampPoint",value:function(e,t){return t.copy(e).clamp(this.min,this.max)}},{key:"distanceToPoint",value:function(e){return this.clampPoint(e,PA).distanceTo(e)}},{key:"intersect",value:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}},{key:"union",value:function(e){return this.min.min(e.min),this.max.max(e.max),this}},{key:"translate",value:function(e){return this.min.add(e),this.max.add(e),this}},{key:"equals",value:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}]),e}(),IA=new zi,DA=new zi,LA=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new zi,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new zi;V(this,e),this.start=t,this.end=n}return W(e,[{key:"set",value:function(e,t){return this.start.copy(e),this.end.copy(t),this}},{key:"copy",value:function(e){return this.start.copy(e.start),this.end.copy(e.end),this}},{key:"getCenter",value:function(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}},{key:"delta",value:function(e){return e.subVectors(this.end,this.start)}},{key:"distanceSq",value:function(){return this.start.distanceToSquared(this.end)}},{key:"distance",value:function(){return this.start.distanceTo(this.end)}},{key:"at",value:function(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}},{key:"closestPointToPointParameter",value:function(e,t){IA.subVectors(e,this.start),DA.subVectors(this.end,this.start);var n=DA.dot(DA),r=DA.dot(IA)/n;return t&&(r=Zr(r,0,1)),r}},{key:"closestPointToPoint",value:function(e,t,n){var r=this.closestPointToPointParameter(e,t);return this.delta(n).multiplyScalar(r).add(this.start)}},{key:"applyMatrix4",value:function(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}},{key:"equals",value:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}(),OA=new zi,FA=function(e){Y(n,e);var t=$(n);function n(e,r){var i;V(this,n),(i=t.call(this)).light=e,i.matrixAutoUpdate=!1,i.color=r,i.type="SpotLightHelper";for(var a=new Fo,o=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],s=0,u=1;s<32;s++,u++){var l=s/32*Math.PI*2,c=u/32*Math.PI*2;o.push(Math.cos(l),Math.sin(l),1,Math.cos(c),Math.sin(c),1)}a.setAttribute("position",new Ro(o,3));var h=new Mh({fog:!1,toneMapped:!1});return i.cone=new Oh(a,h),i.add(i.cone),i.update(),i}return W(n,[{key:"dispose",value:function(){this.cone.geometry.dispose(),this.cone.material.dispose()}},{key:"update",value:function(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);var e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),OA.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(OA),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}]),n}(Ha),UA=new zi,zA=new va,GA=new va,qA=function(e){Y(n,e);var t=$(n);function n(e){var r;V(this,n);for(var i=HA(e),a=new Fo,o=[],s=[],u=new uo(0,0,1),l=new uo(0,1,0),c=0;c<i.length;c++){var h=i[c];h.parent&&h.parent.isBone&&(o.push(0,0,0),o.push(0,0,0),s.push(u.r,u.g,u.b),s.push(l.r,l.g,l.b))}a.setAttribute("position",new Ro(o,3)),a.setAttribute("color",new Ro(s,3));var d=new Mh({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});return(r=t.call(this,a,d)).isSkeletonHelper=!0,r.type="SkeletonHelper",r.root=e,r.bones=i,r.matrix=e.matrixWorld,r.matrixAutoUpdate=!1,r}return W(n,[{key:"updateMatrixWorld",value:function(e){var t=this.bones,r=this.geometry,i=r.getAttribute("position");GA.copy(this.root.matrixWorld).invert();for(var a=0,o=0;a<t.length;a++){var s=t[a];s.parent&&s.parent.isBone&&(zA.multiplyMatrices(GA,s.matrixWorld),UA.setFromMatrixPosition(zA),i.setXYZ(o,UA.x,UA.y,UA.z),zA.multiplyMatrices(GA,s.parent.matrixWorld),UA.setFromMatrixPosition(zA),i.setXYZ(o+1,UA.x,UA.y,UA.z),o+=2)}r.getAttribute("position").needsUpdate=!0,oe(Q(n.prototype),"updateMatrixWorld",this).call(this,e)}},{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}}]),n}(Oh);function HA(e){var t=[];!0===e.isBone&&t.push(e);for(var n=0;n<e.children.length;n++)t.push.apply(t,HA(e.children[n]));return t}var VA=function(e){Y(n,e);var t=$(n);function n(e,r,i){var a;V(this,n);var o=new Af(r,4,2),s=new fo({wireframe:!0,fog:!1,toneMapped:!1});return(a=t.call(this,o,s)).light=e,a.color=i,a.type="PointLightHelper",a.matrix=a.light.matrixWorld,a.matrixAutoUpdate=!1,a.update(),a}return W(n,[{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}},{key:"update",value:function(){this.light.updateWorldMatrix(!0,!1),void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}]),n}(Jo),jA=new zi,WA=new uo,XA=new uo,YA=function(e){Y(n,e);var t=$(n);function n(e,r,i){var a;V(this,n),(a=t.call(this)).light=e,a.matrix=e.matrixWorld,a.matrixAutoUpdate=!1,a.color=i,a.type="HemisphereLightHelper";var o=new df(r);o.rotateY(.5*Math.PI),a.material=new fo({wireframe:!0,fog:!1,toneMapped:!1}),void 0===a.color&&(a.material.vertexColors=!0);var s=o.getAttribute("position"),u=new Float32Array(3*s.count);return o.setAttribute("color",new xo(u,3)),a.add(new Jo(o,a.material)),a.update(),a}return W(n,[{key:"dispose",value:function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}},{key:"update",value:function(){var e=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{var t=e.geometry.getAttribute("color");WA.copy(this.light.color),XA.copy(this.light.groundColor);for(var n=0,r=t.count;n<r;n++){var i=n<r/2?WA:XA;t.setXYZ(n,i.r,i.g,i.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(jA.setFromMatrixPosition(this.light.matrixWorld).negate())}}]),n}(Ha),QA=function(e){Y(n,e);var t=$(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4473924,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8947848;V(this,n),a=new uo(a),o=new uo(o);for(var s=i/2,u=r/i,l=r/2,c=[],h=[],d=0,f=0,p=-l;d<=i;d++,p+=u){c.push(-l,0,p,l,0,p),c.push(p,0,-l,p,0,l);var A=d===s?a:o;A.toArray(h,f),f+=3,A.toArray(h,f),f+=3,A.toArray(h,f),f+=3,A.toArray(h,f),f+=3}var v=new Fo;v.setAttribute("position",new Ro(c,3)),v.setAttribute("color",new Ro(h,3));var m=new Mh({vertexColors:!0,toneMapped:!1});return(e=t.call(this,v,m)).type="GridHelper",e}return W(n,[{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}}]),n}(Oh),JA=function(e){Y(n,e);var t=$(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:64,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:4473924,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:8947848;V(this,n),s=new uo(s),u=new uo(u);var l=[],c=[];if(i>1)for(var h=0;h<i;h++){var d=h/i*(2*Math.PI),f=Math.sin(d)*r,p=Math.cos(d)*r;l.push(0,0,0),l.push(f,0,p);var A=1&h?s:u;c.push(A.r,A.g,A.b),c.push(A.r,A.g,A.b)}for(var v=0;v<a;v++)for(var m=1&v?s:u,g=r-r/a*v,y=0;y<o;y++){var b=y/o*(2*Math.PI),x=Math.sin(b)*g,_=Math.cos(b)*g;l.push(x,0,_),c.push(m.r,m.g,m.b),b=(y+1)/o*(2*Math.PI),x=Math.sin(b)*g,_=Math.cos(b)*g,l.push(x,0,_),c.push(m.r,m.g,m.b)}var w=new Fo;w.setAttribute("position",new Ro(l,3)),w.setAttribute("color",new Ro(c,3));var S=new Mh({vertexColors:!0,toneMapped:!1});return(e=t.call(this,w,S)).type="PolarGridHelper",e}return W(n,[{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}}]),n}(Oh),KA=new zi,ZA=new zi,$A=new zi,ev=function(e){Y(n,e);var t=$(n);function n(e,r,i){var a;V(this,n),(a=t.call(this)).light=e,a.matrix=e.matrixWorld,a.matrixAutoUpdate=!1,a.color=i,a.type="DirectionalLightHelper",void 0===r&&(r=1);var o=new Fo;o.setAttribute("position",new Ro([-r,r,0,r,r,0,r,-r,0,-r,-r,0,-r,r,0],3));var s=new Mh({fog:!1,toneMapped:!1});return a.lightPlane=new Nh(o,s),a.add(a.lightPlane),(o=new Fo).setAttribute("position",new Ro([0,0,0,0,0,1],3)),a.targetLine=new Nh(o,s),a.add(a.targetLine),a.update(),a}return W(n,[{key:"dispose",value:function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}},{key:"update",value:function(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),KA.setFromMatrixPosition(this.light.matrixWorld),ZA.setFromMatrixPosition(this.light.target.matrixWorld),$A.subVectors(ZA,KA),this.lightPlane.lookAt(ZA),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(ZA),this.targetLine.scale.z=$A.length()}}]),n}(Ha),tv=new zi,nv=new is,rv=function(e){Y(n,e);var t=$(n);function n(e){var r;V(this,n);var i=new Fo,a=new Mh({color:16777215,vertexColors:!0,toneMapped:!1}),o=[],s=[],u={};function l(e,t){c(e),c(t)}function c(e){o.push(0,0,0),s.push(0,0,0),void 0===u[e]&&(u[e]=[]),u[e].push(o.length/3-1)}l("n1","n2"),l("n2","n4"),l("n4","n3"),l("n3","n1"),l("f1","f2"),l("f2","f4"),l("f4","f3"),l("f3","f1"),l("n1","f1"),l("n2","f2"),l("n3","f3"),l("n4","f4"),l("p","n1"),l("p","n2"),l("p","n3"),l("p","n4"),l("u1","u2"),l("u2","u3"),l("u3","u1"),l("c","t"),l("p","c"),l("cn1","cn2"),l("cn3","cn4"),l("cf1","cf2"),l("cf3","cf4"),i.setAttribute("position",new Ro(o,3)),i.setAttribute("color",new Ro(s,3)),(r=t.call(this,i,a)).type="CameraHelper",r.camera=e,r.camera.updateProjectionMatrix&&r.camera.updateProjectionMatrix(),r.matrix=e.matrixWorld,r.matrixAutoUpdate=!1,r.pointMap=u,r.update();var h=new uo(16755200),d=new uo(16711680),f=new uo(43775),p=new uo(16777215),A=new uo(3355443);return r.setColors(h,d,f,p,A),r}return W(n,[{key:"setColors",value:function(e,t,n,r,i){var a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,t.r,t.g,t.b),a.setXYZ(25,t.r,t.g,t.b),a.setXYZ(26,t.r,t.g,t.b),a.setXYZ(27,t.r,t.g,t.b),a.setXYZ(28,t.r,t.g,t.b),a.setXYZ(29,t.r,t.g,t.b),a.setXYZ(30,t.r,t.g,t.b),a.setXYZ(31,t.r,t.g,t.b),a.setXYZ(32,n.r,n.g,n.b),a.setXYZ(33,n.r,n.g,n.b),a.setXYZ(34,n.r,n.g,n.b),a.setXYZ(35,n.r,n.g,n.b),a.setXYZ(36,n.r,n.g,n.b),a.setXYZ(37,n.r,n.g,n.b),a.setXYZ(38,r.r,r.g,r.b),a.setXYZ(39,r.r,r.g,r.b),a.setXYZ(40,i.r,i.g,i.b),a.setXYZ(41,i.r,i.g,i.b),a.setXYZ(42,i.r,i.g,i.b),a.setXYZ(43,i.r,i.g,i.b),a.setXYZ(44,i.r,i.g,i.b),a.setXYZ(45,i.r,i.g,i.b),a.setXYZ(46,i.r,i.g,i.b),a.setXYZ(47,i.r,i.g,i.b),a.setXYZ(48,i.r,i.g,i.b),a.setXYZ(49,i.r,i.g,i.b),a.needsUpdate=!0}},{key:"update",value:function(){var e=this.geometry,t=this.pointMap;nv.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),iv("c",t,e,nv,0,0,-1),iv("t",t,e,nv,0,0,1),iv("n1",t,e,nv,-1,-1,-1),iv("n2",t,e,nv,1,-1,-1),iv("n3",t,e,nv,-1,1,-1),iv("n4",t,e,nv,1,1,-1),iv("f1",t,e,nv,-1,-1,1),iv("f2",t,e,nv,1,-1,1),iv("f3",t,e,nv,-1,1,1),iv("f4",t,e,nv,1,1,1),iv("u1",t,e,nv,.7,1.1,-1),iv("u2",t,e,nv,-.7,1.1,-1),iv("u3",t,e,nv,0,2,-1),iv("cf1",t,e,nv,-1,0,1),iv("cf2",t,e,nv,1,0,1),iv("cf3",t,e,nv,0,-1,1),iv("cf4",t,e,nv,0,1,1),iv("cn1",t,e,nv,-1,0,-1),iv("cn2",t,e,nv,1,0,-1),iv("cn3",t,e,nv,0,-1,-1),iv("cn4",t,e,nv,0,1,-1),e.getAttribute("position").needsUpdate=!0}},{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}}]),n}(Oh);function iv(e,t,n,r,i,a,o){tv.set(i,a,o).unproject(r);var s=t[e];if(void 0!==s)for(var u=n.getAttribute("position"),l=0,c=s.length;l<c;l++)u.setXYZ(s[l],tv.x,tv.y,tv.z)}var av,ov,sv=new Hi,uv=function(e){Y(n,e);var t=$(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16776960;V(this,n);var a=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),o=new Float32Array(24),s=new Fo;return s.setIndex(new xo(a,1)),s.setAttribute("position",new xo(o,3)),(r=t.call(this,s,new Mh({color:i,toneMapped:!1}))).object=e,r.type="BoxHelper",r.matrixAutoUpdate=!1,r.update(),r}return W(n,[{key:"update",value:function(e){if(void 0!==e&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&sv.setFromObject(this.object),!sv.isEmpty()){var t=sv.min,n=sv.max,r=this.geometry.attributes.position,i=r.array;i[0]=n.x,i[1]=n.y,i[2]=n.z,i[3]=t.x,i[4]=n.y,i[5]=n.z,i[6]=t.x,i[7]=t.y,i[8]=n.z,i[9]=n.x,i[10]=t.y,i[11]=n.z,i[12]=n.x,i[13]=n.y,i[14]=t.z,i[15]=t.x,i[16]=n.y,i[17]=t.z,i[18]=t.x,i[19]=t.y,i[20]=t.z,i[21]=n.x,i[22]=t.y,i[23]=t.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}}},{key:"setFromObject",value:function(e){return this.object=e,this.update(),this}},{key:"copy",value:function(e,t){return oe(Q(n.prototype),"copy",this).call(this,e,t),this.object=e.object,this}},{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}}]),n}(Oh),lv=function(e){Y(n,e);var t=$(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16776960;V(this,n);var a=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),o=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new Fo;return s.setIndex(new xo(a,1)),s.setAttribute("position",new Ro(o,3)),(r=t.call(this,s,new Mh({color:i,toneMapped:!1}))).box=e,r.type="Box3Helper",r.geometry.computeBoundingSphere(),r}return W(n,[{key:"updateMatrixWorld",value:function(e){var t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),oe(Q(n.prototype),"updateMatrixWorld",this).call(this,e))}},{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}}]),n}(Oh),cv=function(e){Y(n,e);var t=$(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16776960;V(this,n);var o=a,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],u=new Fo;u.setAttribute("position",new Ro(s,3)),u.computeBoundingSphere(),(r=t.call(this,u,new Mh({color:o,toneMapped:!1}))).type="PlaneHelper",r.plane=e,r.size=i;var l=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],c=new Fo;return c.setAttribute("position",new Ro(l,3)),c.computeBoundingSphere(),r.add(new Jo(c,new fo({color:o,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1}))),r}return W(n,[{key:"updateMatrixWorld",value:function(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),oe(Q(n.prototype),"updateMatrixWorld",this).call(this,e)}},{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}]),n}(Nh),hv=new zi,dv=function(e){Y(n,e);var t=$(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new zi(0,0,1),i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new zi(0,0,0),a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:16776960,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.2*a,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.2*s;return V(this,n),(e=t.call(this)).type="ArrowHelper",void 0===av&&((av=new Fo).setAttribute("position",new Ro([0,0,0,0,1,0],3)),(ov=new wd(0,.5,1,5,1)).translate(0,-.5,0)),e.position.copy(i),e.line=new Nh(av,new Mh({color:o,toneMapped:!1})),e.line.matrixAutoUpdate=!1,e.add(e.line),e.cone=new Jo(ov,new fo({color:o,toneMapped:!1})),e.cone.matrixAutoUpdate=!1,e.add(e.cone),e.setDirection(r),e.setLength(a,s,u),e}return W(n,[{key:"setDirection",value:function(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{hv.set(e.z,0,-e.x).normalize();var t=Math.acos(e.y);this.quaternion.setFromAxisAngle(hv,t)}}},{key:"setLength",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2*e,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.2*t;this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()}},{key:"setColor",value:function(e){this.line.material.color.set(e),this.cone.material.color.set(e)}},{key:"copy",value:function(e){return oe(Q(n.prototype),"copy",this).call(this,e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}},{key:"dispose",value:function(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}]),n}(Ha),fv=function(e){Y(n,e);var t=$(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;V(this,n);var i=[0,0,0,r,0,0,0,0,0,0,r,0,0,0,0,0,0,r],a=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],o=new Fo;o.setAttribute("position",new Ro(i,3)),o.setAttribute("color",new Ro(a,3));var s=new Mh({vertexColors:!0,toneMapped:!1});return(e=t.call(this,o,s)).type="AxesHelper",e}return W(n,[{key:"setColors",value:function(e,t,n){var r=new uo,i=this.geometry.attributes.color.array;return r.set(e),r.toArray(i,0),r.toArray(i,3),r.set(t),r.toArray(i,6),r.toArray(i,9),r.set(n),r.toArray(i,12),r.toArray(i,15),this.geometry.attributes.color.needsUpdate=!0,this}},{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}}]),n}(Oh),pv=function(){function e(){V(this,e),this.type="ShapePath",this.color=new uo,this.subPaths=[],this.currentPath=null}return W(e,[{key:"moveTo",value:function(e,t){return this.currentPath=new yd,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}},{key:"lineTo",value:function(e,t){return this.currentPath.lineTo(e,t),this}},{key:"quadraticCurveTo",value:function(e,t,n,r){return this.currentPath.quadraticCurveTo(e,t,n,r),this}},{key:"bezierCurveTo",value:function(e,t,n,r,i,a){return this.currentPath.bezierCurveTo(e,t,n,r,i,a),this}},{key:"splineThru",value:function(e){return this.currentPath.splineThru(e),this}},{key:"toShapes",value:function(e){function t(e,t){for(var n=t.length,r=!1,i=n-1,a=0;a<n;i=a++){var o=t[i],s=t[a],u=s.x-o.x,l=s.y-o.y;if(Math.abs(l)>Number.EPSILON){if(l<0&&(o=t[a],u=-u,s=t[i],l=-l),e.y<o.y||e.y>s.y)continue;if(e.y===o.y){if(e.x===o.x)return!0}else{var c=l*(e.x-o.x)-u*(e.y-o.y);if(0===c)return!0;if(c<0)continue;r=!r}}else{if(e.y!==o.y)continue;if(s.x<=e.x&&e.x<=o.x||o.x<=e.x&&e.x<=s.x)return!0}}return r}var n,r,i,a=of.isClockWise,o=this.subPaths;if(0===o.length)return[];var s=[];if(1===o.length)return r=o[0],(i=new Pd).curves=r.curves,s.push(i),s;var u=!a(o[0].getPoints());u=e?!u:u;var l,c,h=[],d=[],f=[],p=0;d[p]=void 0,f[p]=[];for(var A=0,v=o.length;A<v;A++)n=a(l=(r=o[A]).getPoints()),(n=e?!n:n)?(!u&&d[p]&&p++,d[p]={s:new Pd,p:l},d[p].s.curves=r.curves,u&&p++,f[p]=[]):f[p].push({h:r,p:l[0]});if(!d[0])return function(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n],a=new Pd;a.curves=i.curves,t.push(a)}return t}(o);if(d.length>1){for(var m=!1,g=0,y=0,b=d.length;y<b;y++)h[y]=[];for(var x=0,_=d.length;x<_;x++)for(var w=f[x],S=0;S<w.length;S++){for(var M=w[S],k=!0,T=0;T<d.length;T++)t(M.p,d[T].p)&&(x!==T&&g++,k?(k=!1,h[T].push(M)):m=!0);k&&h[x].push(M)}g>0&&!1===m&&(f=h)}for(var E=0,C=d.length;E<C;E++){i=d[E].s,s.push(i);for(var R=0,B=(c=f[E]).length;R<B;R++)i.holes.push(c[R].h)}return s}}]),e}(),Av=function(e){Y(n,e);var t=$(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return V(this,n),(r=t.call(this)).object=e,r.domElement=i,r.enabled=!0,r.state=-1,r.keys={},r.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},r.touches={ONE:null,TWO:null},r}return W(n,[{key:"connect",value:function(){}},{key:"disconnect",value:function(){}},{key:"dispose",value:function(){}},{key:"update",value:function(){}}]),n}(Wr),vv=function(e){Y(n,e);var t=$(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return V(this,n),console.warn('THREE.WebGLMultipleRenderTargets has been deprecated and will be removed in r172. Use THREE.WebGLRenderTarget and set the "count" parameter to enable MRT.'),(e=t.call(this,r,i,b(b({},o),{},{count:a}))).isWebGLMultipleRenderTargets=!0,e}return W(n,[{key:"texture",get:function(){return this.textures}}]),n}(Ii);"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:ue}})),"undefined"!==typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=ue);var mv=n(4585);function gv(e){var t,n=new Set,r=function(e,r){var i="function"===typeof e?e(t):e;if(i!==t){var a=t;t=r?i:Object.assign({},t,i),n.forEach((function(e){return e(t,a)}))}},i=function(){return t},a={setState:r,getState:i,subscribe:function(e,r,a){return r||a?function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Object.is;console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");var o=r(t);function s(){var n=r(t);if(!a(o,n)){var i=o;e(o=n,i)}}return n.add(s),function(){return n.delete(s)}}(e,r,a):(n.add(e),function(){return n.delete(e)})},destroy:function(){return n.clear()}};return t=e(r,i,a),a}var yv="undefined"===typeof window||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent)?r.useEffect:r.useLayoutEffect;var bv=function(e){return"object"===typeof e&&"function"===typeof e.then},xv=[];function _v(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e,t){return e===t};if(e===t)return!0;if(!e||!t)return!1;var r=e.length;if(t.length!==r)return!1;for(var i=0;i<r;i++)if(!n(e[i],t[i]))return!1;return!0}function wv(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};null===t&&(t=[e]);for(var i=0,a=xv;i<a.length;i++){var o=a[i];if(_v(t,o.keys,o.equal)){if(n)return;if(Object.prototype.hasOwnProperty.call(o,"error"))throw o.error;if(Object.prototype.hasOwnProperty.call(o,"response"))return r.lifespan&&r.lifespan>0&&(o.timeout&&clearTimeout(o.timeout),o.timeout=setTimeout(o.remove,r.lifespan)),o.response;if(!n)throw o.promise}}var s={keys:t,equal:r.equal,remove:function(){var e=xv.indexOf(s);-1!==e&&xv.splice(e,1)},promise:(bv(e)?e:e.apply(void 0,q(t))).then((function(e){s.response=e,r.lifespan&&r.lifespan>0&&(s.timeout=setTimeout(s.remove,r.lifespan))})).catch((function(e){return s.error=e}))};if(xv.push(s),!n)throw s.promise}var Sv,Mv,kv=n(258),Tv=n.n(kv),Ev=n(4545),Cv=["args","attach"],Rv=["args","children"],Bv=["args","children"],Pv=["children","key","ref"],Nv=["children","key","ref"],Iv=["params"],Dv={};var Lv=function(e){return"colorSpace"in e||"outputColorSpace"in e},Ov=function(){var e;return null!=(e=Dv.ColorManagement)?e:null},Fv=function(e){return e&&e.isOrthographicCamera},Uv="undefined"!==typeof window&&(null!=(Sv=window.document)&&Sv.createElement||"ReactNative"===(null==(Mv=window.navigator)?void 0:Mv.product))?r.useLayoutEffect:r.useEffect;function zv(e){var t=r.useRef(e);return Uv((function(){t.current=e}),[e]),t}function Gv(e){var t=e.set;return Uv((function(){return t(new Promise((function(){return null}))),function(){return t(!1)}}),[t]),null}var qv=function(e){Y(n,e);var t=$(n);function n(){var e;V(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={error:!1},e}return W(n,[{key:"componentDidCatch",value:function(e){this.props.set(e)}},{key:"render",value:function(){return this.state.error?null:this.props.children}}]),n}(r.Component);qv.getDerivedStateFromError=function(){return{error:!0}};var Hv="__default",Vv=new Map;function jv(e){var t,n="undefined"!==typeof window?null!=(t=window.devicePixelRatio)?t:2:1;return Array.isArray(e)?Math.min(Math.max(e[0],n),e[1]):e}var Wv=function(e){var t;return null==(t=e.__r3f)?void 0:t.root.getState()};function Xv(e){for(var t=e.__r3f.root;t.getState().previousRoot;)t=t.getState().previousRoot;return t}var Yv={obj:function(e){return e===Object(e)&&!Yv.arr(e)&&"function"!==typeof e},fun:function(e){return"function"===typeof e},str:function(e){return"string"===typeof e},num:function(e){return"number"===typeof e},boo:function(e){return"boolean"===typeof e},und:function(e){return void 0===e},arr:function(e){return Array.isArray(e)},equ:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.arrays,i=void 0===r?"shallow":r,a=n.objects,o=void 0===a?"reference":a,s=n.strict,u=void 0===s||s;if(typeof e!==typeof t||!!e!==!!t)return!1;if(Yv.str(e)||Yv.num(e)||Yv.boo(e))return e===t;var l=Yv.obj(e);if(l&&"reference"===o)return e===t;var c,h=Yv.arr(e);if(h&&"reference"===i)return e===t;if((h||l)&&e===t)return!0;for(c in e)if(!(c in t))return!1;if(l&&"shallow"===i&&"shallow"===o){for(c in u?t:e)if(!Yv.equ(e[c],t[c],{strict:u,objects:"reference"}))return!1}else for(c in u?t:e)if(e[c]!==t[c])return!1;if(Yv.und(c)){if(h&&0===e.length&&0===t.length)return!0;if(l&&0===Object.keys(e).length&&0===Object.keys(t).length)return!0;if(e!==t)return!1}return!0}};function Qv(e){var t={nodes:{},materials:{}};return e&&e.traverse((function(e){e.name&&(t.nodes[e.name]=e),e.material&&!t.materials[e.material.name]&&(t.materials[e.material.name]=e.material)})),t}function Jv(e,t){return e.__r3f=b({type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null},t),e}function Kv(e,t){var n=e;if(t.includes("-")){var r=t.split("-"),i=r.pop();return n=r.reduce((function(e,t){return e[t]}),e),{target:n,key:i}}return{target:n,key:t}}var Zv=/-\d+$/;function $v(e,t,n){if(Yv.str(n)){if(Zv.test(n)){var r=Kv(e,n.replace(Zv,"")),i=r.target,a=r.key;Array.isArray(i[a])||(i[a]=[])}var o=Kv(e,n),s=o.target,u=o.key;t.__r3f.previousAttach=s[u],s[u]=t}else t.__r3f.previousAttach=n(e,t)}function em(e,t,n){var r,i;if(Yv.str(n)){var a=Kv(e,n),o=a.target,s=a.key,u=t.__r3f.previousAttach;void 0===u?delete o[s]:o[s]=u}else null==(r=t.__r3f)||null==r.previousAttach||r.previousAttach(e,t);null==(i=t.__r3f)||delete i.previousAttach}function tm(e,t){t.children,t.key,t.ref;var n=z(t,Pv),r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=(r.children,r.key,r.ref,z(r,Nv)),a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=e.__r3f,s=Object.entries(n),u=[];if(a)for(var c=Object.keys(i),h=0;h<c.length;h++)n.hasOwnProperty(c[h])||s.unshift([c[h],Hv+"remove"]);s.forEach((function(t){var r,a=l(t,2),o=a[0],s=a[1];if((null==(r=e.__r3f)||!r.primitive||"object"!==o)&&!Yv.equ(s,i[o])){if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(o))return u.push([o,s,!0,[]]);var c=[];for(var h in o.includes("-")&&(c=o.split("-")),u.push([o,s,!1,c]),n){var d=n[h];h.startsWith("".concat(o,"-"))&&u.push([h,d,!1,h.split("-")])}}}));var d=b({},n);return null!=o&&o.memoizedProps&&null!=o&&o.memoizedProps.args&&(d.args=o.memoizedProps.args),null!=o&&o.memoizedProps&&null!=o&&o.memoizedProps.attach&&(d.attach=o.memoizedProps.attach),{memoized:d,changes:u}}var nm="undefined"!==typeof process&&!1;function rm(e,t){var n,r,i=e.__r3f,a=null==i?void 0:i.root,o=null==a||null==a.getState?void 0:a.getState(),s=(r=t)&&r.memoized&&r.changes?t:tm(e,t),u=s.memoized,c=s.changes,h=null==i?void 0:i.eventCount;e.__r3f&&(e.__r3f.memoizedProps=u);for(var d=0;d<c.length;d++){var f=l(c[d],4),p=f[0],A=f[1],v=f[2],m=f[3];if(Lv(e)){var g="srgb",y="srgb-linear";"encoding"===p?(p="colorSpace",A=3001===A?g:y):"outputEncoding"===p&&(p="outputColorSpace",A=3001===A?g:y)}var b=e,x=b[p];if(m.length&&(x=m.reduce((function(e,t){return e[t]}),e),!x||!x.set)){var _=H(m.reverse()),w=_[0];b=_.slice(1).reverse().reduce((function(e,t){return e[t]}),e),p=w}if(A===Hv+"remove")if(b.constructor){var S=Vv.get(b.constructor);S||(S=new b.constructor,Vv.set(b.constructor,S)),A=S[p]}else A=0;if(v&&i)A?i.handlers[p]=A:delete i.handlers[p],i.eventCount=Object.keys(i.handlers).length;else if(x&&x.set&&(x.copy||x instanceof Ta)){var M;if(Array.isArray(A))x.fromArray?x.fromArray(A):(M=x).set.apply(M,q(A));else if(x.copy&&A&&A.constructor&&(nm?x.constructor.name===A.constructor.name:x.constructor===A.constructor))x.copy(A);else if(void 0!==A){var k=x instanceof uo;!k&&x.setScalar?x.setScalar(A):x instanceof Ta&&A instanceof Ta?x.mask=A.mask:x.set(A),!Ov()&&o&&!o.linear&&k&&x.convertSRGBToLinear()}}else if(b[p]=A,b[p]instanceof Bi&&b[p].format===Yt&&b[p].type===It&&o){var T=b[p];Lv(T)&&Lv(o.gl)?T.colorSpace=o.gl.outputColorSpace:T.encoding=o.gl.outputEncoding}im(e)}if(i&&i.parent&&e.raycast&&h!==i.eventCount){var E=Xv(e).getState().internal,C=E.interaction.indexOf(e);C>-1&&E.interaction.splice(C,1),i.eventCount&&E.interaction.push(e)}return!(1===c.length&&"onUpdate"===c[0][0])&&c.length&&null!=(n=e.__r3f)&&n.parent&&am(e),e}function im(e){var t,n,r=null==(t=e.__r3f)||null==(n=t.root)||null==n.getState?void 0:n.getState();r&&0===r.internal.frames&&r.invalidate()}function am(e){null==e.onUpdate||e.onUpdate(e)}function om(e,t){e.manual||(Fv(e)?(e.left=t.width/-2,e.right=t.width/2,e.top=t.height/2,e.bottom=t.height/-2):e.aspect=t.width/t.height,e.updateProjectionMatrix(),e.updateMatrixWorld())}function sm(e){return(e.eventObject||e.object).uuid+"/"+e.index+e.instanceId}function um(e,t,n,r){var i=n.get(t);i&&(n.delete(t),0===n.size&&(e.delete(r),i.target.releasePointerCapture(r)))}function lm(e){function t(e){return e.filter((function(e){return["Move","Over","Enter","Out","Leave"].some((function(t){var n;return null==(n=e.__r3f)?void 0:n.handlers["onPointer"+t]}))}))}function n(t){var n,r=e.getState().internal,i=ee(r.hovered.values());try{var a=function(){var e=n.value;if(!t.length||!t.find((function(t){return t.object===e.object&&t.index===e.index&&t.instanceId===e.instanceId}))){var i=e.eventObject.__r3f,a=null==i?void 0:i.handlers;if(r.hovered.delete(sm(e)),null!=i&&i.eventCount){var o=b(b({},e),{},{intersections:t});null==a.onPointerOut||a.onPointerOut(o),null==a.onPointerLeave||a.onPointerLeave(o)}}};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}}function r(e,t){for(var n=0;n<t.length;n++){var r=t[n].__r3f;null==r||null==r.handlers.onPointerMissed||r.handlers.onPointerMissed(e)}}return{handlePointer:function(i){switch(i){case"onPointerLeave":case"onPointerCancel":return function(){return n([])};case"onLostPointerCapture":return function(t){var r=e.getState().internal;"pointerId"in t&&r.capturedMap.has(t.pointerId)&&requestAnimationFrame((function(){r.capturedMap.has(t.pointerId)&&(r.capturedMap.delete(t.pointerId),n([]))}))}}return function(a){var o=e.getState(),s=o.onPointerMissed,u=o.internal;u.lastEvent.current=a;var l="onPointerMove"===i,c="onClick"===i||"onContextMenu"===i||"onDoubleClick"===i,h=function(t,n){for(var r=e.getState(),i=new Set,a=[],o=n?n(r.internal.interaction):r.internal.interaction,s=0;s<o.length;s++){var u=Wv(o[s]);u&&(u.raycaster.camera=void 0)}r.previousRoot||null==r.events.compute||r.events.compute(t,r);var l=o.flatMap((function(e){var n,r=Wv(e);return r&&r.events.enabled&&null!==r.raycaster.camera?(void 0===r.raycaster.camera&&(null==r.events.compute||r.events.compute(t,r,null==(n=r.previousRoot)?void 0:n.getState()),void 0===r.raycaster.camera&&(r.raycaster.camera=null)),r.raycaster.camera?r.raycaster.intersectObject(e,!0):[]):[]})).sort((function(e,t){var n=Wv(e.object),r=Wv(t.object);return n&&r&&r.events.priority-n.events.priority||e.distance-t.distance})).filter((function(e){var t=sm(e);return!i.has(t)&&(i.add(t),!0)}));r.events.filter&&(l=r.events.filter(l,r));var c,h=ee(l);try{for(h.s();!(c=h.n()).done;)for(var d=c.value,f=d.object;f;){var p;null!=(p=f.__r3f)&&p.eventCount&&a.push(b(b({},d),{},{eventObject:f})),f=f.parent}}catch(g){h.e(g)}finally{h.f()}if("pointerId"in t&&r.internal.capturedMap.has(t.pointerId)){var A,v=ee(r.internal.capturedMap.get(t.pointerId).values());try{for(v.s();!(A=v.n()).done;){var m=A.value;i.has(sm(m.intersection))||a.push(m.intersection)}}catch(g){v.e(g)}finally{v.f()}}return a}(a,l?t:void 0),d=c?function(t){var n=e.getState().internal,r=t.offsetX-n.initialClick[0],i=t.offsetY-n.initialClick[1];return Math.round(Math.sqrt(r*r+i*i))}(a):0;"onPointerDown"===i&&(u.initialClick=[a.offsetX,a.offsetY],u.initialHits=h.map((function(e){return e.eventObject}))),c&&!h.length&&d<=2&&(r(a,u.interaction),s&&s(a)),l&&n(h),function(t,r,i,a){var o=e.getState();if(t.length){var s,u={stopped:!1},l=ee(t);try{var c=function(){var e=s.value,l=Wv(e.object)||o,c=l.raycaster,h=l.pointer,d=l.camera,f=l.internal,p=new zi(h.x,h.y,0).unproject(d),A=function(t){var n,r;return null!=(n=null==(r=f.capturedMap.get(t))?void 0:r.has(e.eventObject))&&n},v=function(t){var n={intersection:e,target:r.target};f.capturedMap.has(t)?f.capturedMap.get(t).set(e.eventObject,n):f.capturedMap.set(t,new Map([[e.eventObject,n]])),r.target.setPointerCapture(t)},m=function(t){var n=f.capturedMap.get(t);n&&um(f.capturedMap,e.eventObject,n,t)},g={};for(var y in r){var x=r[y];"function"!==typeof x&&(g[y]=x)}var _=b(b(b({},e),g),{},{pointer:h,intersections:t,stopped:u.stopped,delta:i,unprojectedPoint:p,ray:c.ray,camera:d,stopPropagation:function(){var i="pointerId"in r&&f.capturedMap.get(r.pointerId);if((!i||i.has(e.eventObject))&&(_.stopped=u.stopped=!0,f.hovered.size&&Array.from(f.hovered.values()).find((function(t){return t.eventObject===e.eventObject})))){var a=t.slice(0,t.indexOf(e));n([].concat(q(a),[e]))}},target:{hasPointerCapture:A,setPointerCapture:v,releasePointerCapture:m},currentTarget:{hasPointerCapture:A,setPointerCapture:v,releasePointerCapture:m},nativeEvent:r});if(a(_),!0===u.stopped)return"break"};for(l.s();!(s=l.n()).done&&"break"!==c(););}catch(h){l.e(h)}finally{l.f()}}}(h,a,d,(function(e){var t=e.eventObject,n=t.__r3f,o=null==n?void 0:n.handlers;if(null!=n&&n.eventCount)if(l){if(o.onPointerOver||o.onPointerEnter||o.onPointerOut||o.onPointerLeave){var s=sm(e),h=u.hovered.get(s);h?h.stopped&&e.stopPropagation():(u.hovered.set(s,e),null==o.onPointerOver||o.onPointerOver(e),null==o.onPointerEnter||o.onPointerEnter(e))}null==o.onPointerMove||o.onPointerMove(e)}else{var d=o[i];d?c&&!u.initialHits.includes(t)||(r(a,u.interaction.filter((function(e){return!u.initialHits.includes(e)}))),d(e)):c&&u.initialHits.includes(t)&&r(a,u.interaction.filter((function(e){return!u.initialHits.includes(e)})))}}))}}}}var cm,hm=function(e){return!(null==e||!e.render)},dm=r.createContext(null);var fm,pm,Am=new Set,vm=new Set,mm=new Set;function gm(e,t){if(e.size){var n,r=ee(e.values());try{for(r.s();!(n=r.n()).done;){(0,n.value.callback)(t)}}catch(i){r.e(i)}finally{r.f()}}}function ym(e,t){switch(e){case"before":return gm(Am,t);case"after":return gm(vm,t);case"tail":return gm(mm,t)}}function bm(e,t,n){var r=t.clock.getDelta();for("never"===t.frameloop&&"number"===typeof e&&(r=e-t.clock.elapsedTime,t.clock.oldTime=t.clock.elapsedTime,t.clock.elapsedTime=e),fm=t.internal.subscribers,cm=0;cm<fm.length;cm++)(pm=fm[cm]).ref.current(pm.store.getState(),r,n);return!t.internal.priority&&t.gl.render&&t.gl.render(t.scene,t.camera),t.internal.frames=Math.max(0,t.internal.frames-1),"always"===t.frameloop?1:t.internal.frames}function xm(){var e=r.useContext(dm);if(!e)throw new Error("R3F: Hooks can only be used within the Canvas component!");return e}function _m(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=xm(),r=n.getState().internal.subscribe,i=zv(e);return Uv((function(){return r(i,t,n)}),[t,r,n]),null}var wm=new WeakMap;function Sm(e,t){return function(n){var r=wm.get(n);r||(r=new n,wm.set(n,r)),e&&e(r);for(var i=arguments.length,a=new Array(i>1?i-1:0),o=1;o<i;o++)a[o-1]=arguments[o];return Promise.all(a.map((function(e){return new Promise((function(n,i){return r.load(e,(function(e){e.scene&&Object.assign(e,Qv(e.scene)),n(e)}),t,(function(t){return i(new Error("Could not load ".concat(e,": ").concat(null==t?void 0:t.message)))}))}))})))}}function Mm(e,t,n,r){var i=Array.isArray(t)?t:[t],a=function(e,t,n){return wv(e,t,!1,n)}(Sm(n,r),[e].concat(q(i)),{equal:Yv.equ});return Array.isArray(t)?a:a[0]}Mm.preload=function(e,t,n){var r=Array.isArray(t)?t:[t];return function(e,t,n){wv(e,t,!0,n)}(Sm(n),[e].concat(q(r)))},Mm.clear=function(e,t){var n=Array.isArray(t)?t:[t];return function(e){if(void 0===e||0===e.length)xv.splice(0,xv.length);else{var t=xv.find((function(t){return _v(e,t.keys,t.equal)}));t&&t.remove()}}([e].concat(q(n)))};var km=new Map,Tm=function(e){var t,n,r,i=!1,a=!1;function o(s){n=requestAnimationFrame(o),i=!0,t=0,ym("before",s),a=!0;var u,l=ee(e.values());try{for(l.s();!(u=l.n()).done;){var c,h=u.value;!(r=h.store.getState()).internal.active||!("always"===r.frameloop||r.internal.frames>0)||null!=(c=r.gl.xr)&&c.isPresenting||(t+=bm(s,r))}}catch(d){l.e(d)}finally{l.f()}if(a=!1,ym("after",s),0===t)return ym("tail",s),i=!1,cancelAnimationFrame(n)}return{loop:o,invalidate:function t(n){var r,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(!n)return e.forEach((function(e){return t(e.store.getState(),s)}));null!=(r=n.gl.xr)&&r.isPresenting||!n.internal.active||"never"===n.frameloop||(n.internal.frames=s>1?Math.min(60,n.internal.frames+s):a?2:1,i||(i=!0,requestAnimationFrame(o)))},advance:function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;if(n&&ym("before",t),r)bm(t,r,i);else{var a,o=ee(e.values());try{for(o.s();!(a=o.n()).done;){var s=a.value;bm(t,s.store.getState())}}catch(u){o.e(u)}finally{o.f()}}n&&ym("after",t)}}}(km),Em=Tm.invalidate,Cm=Tm.advance,Rm=function(e,t){function n(e,t,n){var r,i=t.args,a=void 0===i?[]:i,o=t.attach,s=z(t,Cv),u="".concat(e[0].toUpperCase()).concat(e.slice(1));if("primitive"===e){if(void 0===s.object)throw new Error("R3F: Primitives without 'object' are invalid!");r=Jv(s.object,{type:e,root:n,attach:o,primitive:!0})}else{var l=Dv[u];if(!l)throw new Error("R3F: ".concat(u," is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively"));if(!Array.isArray(a))throw new Error("R3F: The args prop must be an array!");r=Jv(te(l,q(a)),{type:e,root:n,attach:o,memoizedProps:{args:a}})}return void 0===r.__r3f.attach&&(r instanceof Fo?r.__r3f.attach="geometry":r instanceof ho&&(r.__r3f.attach="material")),"inject"!==u&&rm(r,s),r}function r(e,t){var n,r,i=!1;t&&(null!=(n=t.__r3f)&&n.attach?$v(e,t,t.__r3f.attach):t.isObject3D&&e.isObject3D&&(e.add(t),i=!0),i||null==(r=e.__r3f)||r.objects.push(t),t.__r3f||Jv(t,{}),t.__r3f.parent=e,am(t),im(t))}function i(e,t,n){var r=!1;if(t){var i,a;if(null!=(i=t.__r3f)&&i.attach)$v(e,t,t.__r3f.attach);else if(t.isObject3D&&e.isObject3D){t.parent=e,t.dispatchEvent({type:"added"}),e.dispatchEvent({type:"childadded",child:t});var o=e.children.filter((function(e){return e!==t})),s=o.indexOf(n);e.children=[].concat(q(o.slice(0,s)),[t],q(o.slice(s))),r=!0}r||null==(a=e.__r3f)||a.objects.push(t),t.__r3f||Jv(t,{}),t.__r3f.parent=e,am(t),im(t)}}function a(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e&&q(e).forEach((function(e){return o(t,e,n)}))}function o(e,t,n){if(t){var r,i,o;if(t.__r3f&&(t.__r3f.parent=null),null!=(r=e.__r3f)&&r.objects&&(e.__r3f.objects=e.__r3f.objects.filter((function(e){return e!==t}))),null!=(i=t.__r3f)&&i.attach)em(e,t,t.__r3f.attach);else if(t.isObject3D&&e.isObject3D){var s;e.remove(t),null!=(s=t.__r3f)&&s.root&&function(e,t){var n=e.getState(),r=n.internal;r.interaction=r.interaction.filter((function(e){return e!==t})),r.initialHits=r.initialHits.filter((function(e){return e!==t})),r.hovered.forEach((function(e,n){e.eventObject!==t&&e.object!==t||r.hovered.delete(n)})),r.capturedMap.forEach((function(e,n){um(r.capturedMap,t,e,n)}))}(Xv(t),t)}var u,l=null==(o=t.__r3f)?void 0:o.primitive,c=!l&&(void 0===n?null!==t.dispose:n);if(!l)a(null==(u=t.__r3f)?void 0:u.objects,t,c),a(t.children,t,c);if(delete t.__r3f,c&&t.dispose&&"Scene"!==t.type){var h=function(){try{t.dispose()}catch(e){}};"undefined"===typeof IS_REACT_ACT_ENVIRONMENT?(0,Ev.unstable_scheduleCallback)(Ev.unstable_IdlePriority,h):h()}im(e)}}var s=function(){},u=Tv()({createInstance:n,removeChild:o,appendChild:r,appendInitialChild:r,insertBefore:i,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:function(e,t){if(t){var n=e.getState().scene;n.__r3f&&(n.__r3f.root=e,r(n,t))}},removeChildFromContainer:function(e,t){t&&o(e.getState().scene,t)},insertInContainerBefore:function(e,t,n){if(t&&n){var r=e.getState().scene;r.__r3f&&i(r,t,n)}},getRootHostContext:function(){return null},getChildHostContext:function(e){return e},finalizeInitialChildren:function(e){var t,n=null!=(t=null==e?void 0:e.__r3f)?t:{};return Boolean(n.handlers)},prepareUpdate:function(e,t,n,r){var i;if((null!=(i=null==e?void 0:e.__r3f)?i:{}).primitive&&r.object&&r.object!==e)return[!0];var a=r.args,o=void 0===a?[]:a,s=(r.children,z(r,Rv)),u=n.args,l=void 0===u?[]:u,c=(n.children,z(n,Bv));if(!Array.isArray(o))throw new Error("R3F: the args prop must be an array!");if(o.some((function(e,t){return e!==l[t]})))return[!0];var h=tm(e,s,c,!0);return h.changes.length?[!1,h]:null},commitUpdate:function(e,t,i,a,s,u){var c=l(t,2),h=c[0],d=c[1];h?function(e,t,i,a){var s,u=null==(s=e.__r3f)?void 0:s.parent;if(u){var l=n(t,i,e.__r3f.root);if(e.children){var c,h=ee(e.children);try{for(h.s();!(c=h.n()).done;){var d=c.value;d.__r3f&&r(l,d)}}catch(f){h.e(f)}finally{h.f()}e.children=e.children.filter((function(e){return!e.__r3f}))}e.__r3f.objects.forEach((function(e){return r(l,e)})),e.__r3f.objects=[],e.__r3f.autoRemovedBeforeAppend||o(u,e),l.parent&&(l.__r3f.autoRemovedBeforeAppend=!0),r(u,l),l.raycast&&l.__r3f.eventCount&&Xv(l).getState().internal.interaction.push(l),[a,a.alternate].forEach((function(e){null!==e&&(e.stateNode=l,e.ref&&("function"===typeof e.ref?e.ref(l):e.ref.current=l))}))}}(e,i,s,u):rm(e,d)},commitMount:function(e,t,n,r){var i,a=null!=(i=e.__r3f)?i:{};e.raycast&&a.handlers&&a.eventCount&&Xv(e).getState().internal.interaction.push(e)},getPublicInstance:function(e){return e},prepareForCommit:function(){return null},preparePortalMount:function(e){return Jv(e.getState().scene)},resetAfterCommit:function(){},shouldSetTextContent:function(){return!1},clearContainer:function(){return!1},hideInstance:function(e){var t,n=null!=(t=e.__r3f)?t:{},r=n.attach,i=n.parent;r&&i&&em(i,e,r),e.isObject3D&&(e.visible=!1),im(e)},unhideInstance:function(e,t){var n,r=null!=(n=e.__r3f)?n:{},i=r.attach,a=r.parent;i&&a&&$v(a,e,i),(e.isObject3D&&null==t.visible||t.visible)&&(e.visible=!0),im(e)},createTextInstance:s,hideTextInstance:s,unhideTextInstance:s,getCurrentEventPriority:function(){return t?t():mv.DefaultEventPriority},beforeActiveInstanceBlur:function(){},afterActiveInstanceBlur:function(){},detachDeletedInstance:function(){},now:"undefined"!==typeof performance&&Yv.fun(performance.now)?performance.now:Yv.fun(Date.now)?Date.now:function(){return 0},scheduleTimeout:Yv.fun(setTimeout)?setTimeout:void 0,cancelTimeout:Yv.fun(clearTimeout)?clearTimeout:void 0});return{reconciler:u,applyProps:rm}}(0,(function(){var e,t="undefined"!==typeof self&&self||"undefined"!==typeof window&&window;if(!t)return mv.DefaultEventPriority;switch(null==(e=t.event)?void 0:e.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return mv.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return mv.ContinuousEventPriority;default:return mv.DefaultEventPriority}})),Bm=Rm.reconciler,Pm=Rm.applyProps,Nm={objects:"shallow",strict:!1},Im=function(e,t){var n="function"===typeof e?e(t):e;return hm(n)?n:new dc(b({powerPreference:"high-performance",canvas:t,antialias:!0,alpha:!0},e))};function Dm(e,t){var n="undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement;if(t){var r=t.width,i=t.height,a=t.top,o=t.left,s=t.updateStyle;return{width:r,height:i,top:a,left:o,updateStyle:void 0===s?n:s}}if("undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement&&e.parentElement){var u=e.parentElement.getBoundingClientRect();return{width:u.width,height:u.height,top:u.top,left:u.left,updateStyle:n}}return"undefined"!==typeof OffscreenCanvas&&e instanceof OffscreenCanvas?{width:e.width,height:e.height,top:0,left:0,updateStyle:n}:{width:0,height:0,top:0,left:0}}function Lm(e){var t=km.get(e),n=null==t?void 0:t.fiber,i=null==t?void 0:t.store;t&&console.warn("R3F.createRoot should only be called once!");var a,o="function"===typeof reportError?reportError:console.error,s=i||function(e,t){var n=function(e){var t="function"===typeof e?gv(e):e,n=function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.getState,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.is,a=l((0,r.useReducer)((function(e){return e+1}),0),2)[1],o=t.getState(),s=(0,r.useRef)(o),u=(0,r.useRef)(n),c=(0,r.useRef)(i),h=(0,r.useRef)(!1),d=(0,r.useRef)();void 0===d.current&&(d.current=n(o));var f=!1;(s.current!==o||u.current!==n||c.current!==i||h.current)&&(e=n(o),f=!i(d.current,e)),yv((function(){f&&(d.current=e),s.current=o,u.current=n,c.current=i,h.current=!1}));var p=(0,r.useRef)(o);yv((function(){var e=function(){try{var e=t.getState(),n=u.current(e);c.current(d.current,n)||(s.current=e,d.current=n,a())}catch(tg){h.current=!0,a()}},n=t.subscribe(e);return t.getState()!==p.current&&e(),n}),[]);var A=f?e:d.current;return(0,r.useDebugValue)(A),A};return Object.assign(n,t),n[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");var e=[n,t];return{next:function(){var t=e.length<=0;return{value:e.shift(),done:t}}}},n}((function(n,i){var a=new zi,o=new zi,s=new zi;function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i().camera,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i().size,r=n.width,u=n.height,l=n.top,c=n.left,h=r/u;t instanceof zi?s.copy(t):s.set.apply(s,q(t));var d=e.getWorldPosition(a).distanceTo(s);if(Fv(e))return{width:r/e.zoom,height:u/e.zoom,top:l,left:c,factor:1,distance:d,aspect:h};var f=e.fov*Math.PI/180,p=2*Math.tan(f/2)*d,A=p*(r/u);return{width:A,height:p,top:l,left:c,factor:r/A,distance:d,aspect:h}}var l=void 0,c=function(e){return n((function(t){return{performance:b(b({},t.performance),{},{current:e})}}))},h=new ii,d={set:n,get:i,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return e(i(),t)},advance:function(e,n){return t(e,n,i())},legacy:!1,linear:!1,flat:!1,controls:null,clock:new Xp,pointer:h,mouse:h,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:function(){var e=i();l&&clearTimeout(l),e.performance.current!==e.performance.min&&c(e.performance.min),l=setTimeout((function(){return c(i().performance.max)}),e.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:u},setEvents:function(e){return n((function(t){return b(b({},t),{},{events:b(b({},t.events),e)})}))},setSize:function(e,t,r,a,s){var l=i().camera,c={width:e,height:t,top:a||0,left:s||0,updateStyle:r};n((function(e){return{size:c,viewport:b(b({},e.viewport),u(l,o,c))}}))},setDpr:function(e){return n((function(t){var n=jv(e);return{viewport:b(b({},t.viewport),{},{dpr:n,initialDpr:t.viewport.initialDpr||n})}}))},setFrameloop:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"always",t=i().clock;t.stop(),t.elapsedTime=0,"never"!==e&&(t.start(),t.elapsedTime=0),n((function(){return{frameloop:e}}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:r.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:function(e,t,n){var r=i().internal;return r.priority=r.priority+(t>0?1:0),r.subscribers.push({ref:e,priority:t,store:n}),r.subscribers=r.subscribers.sort((function(e,t){return e.priority-t.priority})),function(){var n=i().internal;null!=n&&n.subscribers&&(n.priority=n.priority-(t>0?1:0),n.subscribers=n.subscribers.filter((function(t){return t.ref!==e})))}}}};return d})),i=n.getState(),a=i.size,o=i.viewport.dpr,s=i.camera;return n.subscribe((function(){var e=n.getState(),t=e.camera,r=e.size,i=e.viewport,u=e.gl,l=e.set;if(r.width!==a.width||r.height!==a.height||i.dpr!==o){var c;a=r,o=i.dpr,om(t,r),u.setPixelRatio(i.dpr);var h=null!=(c=r.updateStyle)?c:"undefined"!==typeof HTMLCanvasElement&&u.domElement instanceof HTMLCanvasElement;u.setSize(r.width,r.height,h)}t!==s&&(s=t,l((function(e){return{viewport:b(b({},e.viewport),e.viewport.getCurrentViewport(t))}})))})),n.subscribe((function(t){return e(t)})),n}(Em,Cm),u=n||Bm.createContainer(s,mv.ConcurrentRoot,null,!1,null,"",o,null);t||km.set(e,{fiber:u,store:s});var c,h=!1;return{configure:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.gl,r=t.size,i=t.scene,o=t.events,u=t.onCreated,l=t.shadows,d=void 0!==l&&l,f=t.linear,p=void 0!==f&&f,A=t.flat,v=void 0!==A&&A,m=t.legacy,g=void 0!==m&&m,y=t.orthographic,x=void 0!==y&&y,_=t.frameloop,w=void 0===_?"always":_,S=t.dpr,M=void 0===S?[1,2]:S,k=t.performance,T=t.raycaster,E=t.camera,C=t.onPointerMissed,R=s.getState(),B=R.gl;R.gl||R.set({gl:B=Im(n,e)});var P=R.raycaster;P||R.set({raycaster:P=new kA});var N,I=T||{},D=I.params,L=z(I,Iv);if(Yv.equ(L,P,Nm)||Pm(P,b({},L)),Yv.equ(D,P.params,Nm)||Pm(P,{params:b(b({},P.params),D)}),!R.camera||R.camera===c&&!Yv.equ(c,E,Nm)){c=E;var O=E instanceof is,F=O?E:x?new Ds(0,0,0,0,.1,1e3):new us(75,0,.1,1e3);O||(F.position.z=5,E&&(Pm(F,E),("aspect"in E||"left"in E||"right"in E||"bottom"in E||"top"in E)&&(F.manual=!0,F.updateProjectionMatrix())),R.camera||null!=E&&E.rotation||F.lookAt(0,0,0)),R.set({camera:F}),P.camera=F}R.scene||(i instanceof Ac?N=i:(N=new Ac,i&&Pm(N,i)),R.set({scene:Jv(N)}));if(!R.xr){var U,G=function(e,t){var n=s.getState();"never"!==n.frameloop&&Cm(e,!0,n,t)},q=function(){var e=s.getState();e.gl.xr.enabled=e.gl.xr.isPresenting,e.gl.xr.setAnimationLoop(e.gl.xr.isPresenting?G:null),e.gl.xr.isPresenting||Em(e)},H={connect:function(){var e=s.getState().gl;e.xr.addEventListener("sessionstart",q),e.xr.addEventListener("sessionend",q)},disconnect:function(){var e=s.getState().gl;e.xr.removeEventListener("sessionstart",q),e.xr.removeEventListener("sessionend",q)}};"function"===typeof(null==(U=B.xr)?void 0:U.addEventListener)&&H.connect(),R.set({xr:H})}if(B.shadowMap){var V=B.shadowMap.enabled,j=B.shadowMap.type;if(B.shadowMap.enabled=!!d,Yv.boo(d))B.shadowMap.type=me;else if(Yv.str(d)){var W,X={basic:Ae,percentage:ve,soft:me,variance:ge};B.shadowMap.type=null!=(W=X[d])?W:me}else Yv.obj(d)&&Object.assign(B.shadowMap,d);V===B.shadowMap.enabled&&j===B.shadowMap.type||(B.shadowMap.needsUpdate=!0)}var Y=Ov();if(Y&&("enabled"in Y?Y.enabled=!g:"legacyMode"in Y&&(Y.legacyMode=g)),!h){var Q=3e3,J=3001;Pm(B,{outputEncoding:p?Q:J,toneMapping:v?at:lt})}R.legacy!==g&&R.set((function(){return{legacy:g}})),R.linear!==p&&R.set((function(){return{linear:p}})),R.flat!==v&&R.set((function(){return{flat:v}})),!n||Yv.fun(n)||hm(n)||Yv.equ(n,B,Nm)||Pm(B,n),o&&!R.events.handlers&&R.set({events:o(s)});var K=Dm(e,r);return Yv.equ(K,R.size,Nm)||R.setSize(K.width,K.height,K.updateStyle,K.top,K.left),M&&R.viewport.dpr!==jv(M)&&R.setDpr(M),R.frameloop!==w&&R.setFrameloop(w),R.onPointerMissed||R.set({onPointerMissed:C}),k&&!Yv.equ(k,R.performance,Nm)&&R.set((function(e){return{performance:b(b({},e.performance),k)}})),a=u,h=!0,this},render:function(t){return h||this.configure(),Bm.updateContainer((0,p.jsx)(Om,{store:s,children:t,onCreated:a,rootElement:e}),u,null,(function(){})),s},unmount:function(){Fm(e)}}}function Om(e){var t=e.store,n=e.children,r=e.onCreated,i=e.rootElement;return Uv((function(){var e=t.getState();e.set((function(e){return{internal:b(b({},e.internal),{},{active:!0})}})),r&&r(e),t.getState().events.connected||null==e.events.connect||e.events.connect(i)}),[]),(0,p.jsx)(dm.Provider,{value:t,children:n})}function Fm(e,t){var n=km.get(e),r=null==n?void 0:n.fiber;if(r){var i=null==n?void 0:n.store.getState();i&&(i.internal.active=!1),Bm.updateContainer(null,r,null,(function(){i&&setTimeout((function(){try{var n,r,a,o;null==i.events.disconnect||i.events.disconnect(),null==(n=i.gl)||null==(r=n.renderLists)||null==r.dispose||r.dispose(),null==(a=i.gl)||null==a.forceContextLoss||a.forceContextLoss(),null!=(o=i.gl)&&o.xr&&i.xr.disconnect(),function(e){for(var t in e.dispose&&"Scene"!==e.type&&e.dispose(),e)null==t.dispose||t.dispose(),delete e[t]}(i),km.delete(e),t&&t(e)}catch(s){}}),500)}))}}Bm.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:r.version});r.unstable_act;var Um={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function zm(e){var t=lm(e).handlePointer;return{priority:1,enabled:!0,compute:function(e,t,n){t.pointer.set(e.offsetX/t.size.width*2-1,-e.offsetY/t.size.height*2+1),t.raycaster.setFromCamera(t.pointer,t.camera)},connected:void 0,handlers:Object.keys(Um).reduce((function(e,n){return b(b({},e),{},g({},n,t(n)))}),{}),update:function(){var t,n=e.getState(),r=n.events,i=n.internal;null!=(t=i.lastEvent)&&t.current&&r.handlers&&r.handlers.onPointerMove(i.lastEvent.current)},connect:function(t){var n,r=e.getState(),i=r.set,a=r.events;null==a.disconnect||a.disconnect(),i((function(e){return{events:b(b({},e.events),{},{connected:t})}})),Object.entries(null!=(n=a.handlers)?n:[]).forEach((function(e){var n=l(e,2),r=n[0],i=n[1],a=l(Um[r],2),o=a[0],s=a[1];t.addEventListener(o,i,{passive:s})}))},disconnect:function(){var t,n=e.getState(),r=n.set,i=n.events;i.connected&&(Object.entries(null!=(t=i.handlers)?t:[]).forEach((function(e){var t=l(e,2),n=t[0],r=t[1];if(i&&i.connected instanceof HTMLElement){var a=l(Um[n],1)[0];i.connected.removeEventListener(a,r)}})),r((function(e){return{events:b(b({},e.events),{},{connected:void 0})}})))}}}var Gm,qm,Hm=n(7494),Vm=n.n(Hm),jm=Object.defineProperty,Wm=Object.defineProperties,Xm=Object.getOwnPropertyDescriptors,Ym=Object.getOwnPropertySymbols,Qm=Object.prototype.hasOwnProperty,Jm=Object.prototype.propertyIsEnumerable,Km=function(e,t,n){return t in e?jm(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},Zm=function(e,t){for(var n in t||(t={}))Qm.call(t,n)&&Km(e,n,t[n]);if(Ym){var r,i=ee(Ym(t));try{for(i.s();!(r=i.n()).done;){n=r.value;Jm.call(t,n)&&Km(e,n,t[n])}}catch(a){i.e(a)}finally{i.f()}}return e};"undefined"===typeof window||!(null==(Gm=window.document)?void 0:Gm.createElement)&&"ReactNative"!==(null==(qm=window.navigator)?void 0:qm.product)?r.useEffect:r.useLayoutEffect;function $m(e,t,n){if(e){if(!0===n(e))return e;for(var r=t?e.return:e.child;r;){var i=$m(r,t,n);if(i)return i;r=t?null:r.sibling}}}function eg(e){try{return Object.defineProperties(e,{_currentRenderer:{get:function(){return null},set:function(){}},_currentRenderer2:{get:function(){return null},set:function(){}}})}catch(t){return e}}var tg=console.error;console.error=function(){var e=Array.prototype.slice.call(arguments).join("");if(!(null==e?void 0:e.startsWith("Warning:"))||!e.includes("useContext"))return tg.apply(this,arguments);console.error=tg};var ng=eg(r.createContext(null)),rg=function(e){Y(n,e);var t=$(n);function n(){return V(this,n),t.apply(this,arguments)}return W(n,[{key:"render",value:function(){return r.createElement(ng.Provider,{value:this._reactInternals},this.props.children)}}]),n}(r.Component);function ig(){var e=r.useContext(ng);if(null===e)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");var t=r.useId();return r.useMemo((function(){for(var n=0,r=[e,null==e?void 0:e.alternate];n<r.length;n++){var i=r[n];if(i){var a=$m(i,!1,(function(e){for(var n=e.memoizedState;n;){if(n.memoizedState===t)return!0;n=n.next}}));if(a)return a}}}),[e,t])}function ag(){var e=function(){var e=ig(),t=l(r.useState((function(){return new Map})),1)[0];t.clear();for(var n=e;n;){if(n.type&&"object"===typeof n.type){var i=void 0===n.type._context&&n.type.Provider===n.type?n.type:n.type._context;i&&i!==ng&&!t.has(i)&&t.set(i,r.useContext(eg(i)))}n=n.return}return t}();return r.useMemo((function(){return Array.from(e.keys()).reduce((function(t,n){return function(i){return r.createElement(t,null,r.createElement(n.Provider,(a=Zm({},i),o={value:e.get(n)},Wm(a,Xm(o)))));var a,o}}),(function(e){return r.createElement(rg,Zm({},e))}))}),[e])}var og=["children","fallback","resize","style","gl","events","eventSource","eventPrefix","shadows","linear","flat","legacy","orthographic","frameloop","dpr","performance","raycaster","camera","scene","onPointerMissed","onCreated"];function sg(e){(0,r.useEffect)((function(){var t=e;return window.addEventListener("resize",t),function(){window.removeEventListener("resize",t)}}),[e])}function ug(e,t){(0,r.useEffect)((function(){if(t){var n=e;return window.addEventListener("scroll",n,{capture:!0,passive:!0}),function(){window.removeEventListener("scroll",n,!0)}}}),[e,t])}function lg(e){var t=[];if(!e||e===document.body)return t;var n=window.getComputedStyle(e);return[n.overflow,n.overflowX,n.overflowY].some((function(e){return"auto"===e||"scroll"===e}))&&t.push(e),[].concat(t,q(lg(e.parentElement)))}var cg,hg=["x","y","top","bottom","left","right","width","height"],dg=function(e,t){return hg.every((function(n){return e[n]===t[n]}))},fg=r.forwardRef((function(t,n){var i=t.children,a=t.fallback,o=t.resize,s=t.style,u=t.gl,c=t.events,h=void 0===c?zm:c,d=t.eventSource,f=t.eventPrefix,A=t.shadows,v=t.linear,m=t.flat,g=t.legacy,y=t.orthographic,x=t.frameloop,_=t.dpr,w=t.performance,S=t.raycaster,M=t.camera,k=t.scene,T=t.onPointerMissed,E=t.onCreated,C=z(t,og);r.useMemo((function(){return t=e,void Object.assign(Dv,t);var t}),[]);var R=ag(),B=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{debounce:0,scroll:!1,offsetSize:!1},t=e.debounce,n=e.scroll,i=e.polyfill,a=e.offsetSize,o=i||"undefined"!==typeof window&&window.ResizeObserver,s=l((0,r.useState)({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),2),u=s[0],c=s[1];if(!o)return u.width=1280,u.height=800,[function(){},u,function(){}];var h=(0,r.useRef)({element:null,scrollContainers:null,resizeObserver:null,lastBounds:u,orientationHandler:null}),d=t?"number"===typeof t?t:t.scroll:null,f=t?"number"===typeof t?t:t.resize:null,p=(0,r.useRef)(!1);(0,r.useEffect)((function(){return p.current=!0,function(){p.current=!1}}));var A=(0,r.useMemo)((function(){var e=function(){if(h.current.element){var e=h.current.element.getBoundingClientRect(),t={left:e.left,top:e.top,width:e.width,height:e.height,bottom:e.bottom,right:e.right,x:e.x,y:e.y};h.current.element instanceof HTMLElement&&a&&(t.height=h.current.element.offsetHeight,t.width=h.current.element.offsetWidth),Object.freeze(t),p.current&&!dg(h.current.lastBounds,t)&&c(h.current.lastBounds=t)}};return[e,f?Vm()(e,f):e,d?Vm()(e,d):e]}),[c,a,d,f]),v=l(A,3),m=v[0],g=v[1],y=v[2];function b(){h.current.scrollContainers&&(h.current.scrollContainers.forEach((function(e){return e.removeEventListener("scroll",y,!0)})),h.current.scrollContainers=null),h.current.resizeObserver&&(h.current.resizeObserver.disconnect(),h.current.resizeObserver=null),h.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",h.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",h.current.orientationHandler))}function x(){var e;h.current.element&&(h.current.resizeObserver=new o(g),null==(e=h.current.resizeObserver)||e.observe(h.current.element),n&&h.current.scrollContainers&&h.current.scrollContainers.forEach((function(e){return e.addEventListener("scroll",y,{capture:!0,passive:!0})})),h.current.orientationHandler=function(){y()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",h.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",h.current.orientationHandler))}var _=function(e){e&&e!==h.current.element&&(b(),h.current.element=e,h.current.scrollContainers=lg(e),x())};return ug(y,Boolean(n)),sg(g),(0,r.useEffect)((function(){b(),x()}),[n,y,g]),(0,r.useEffect)((function(){return b}),[]),[_,u,m]}(b({scroll:!0,debounce:{scroll:50,resize:0}},o)),P=l(B,2),N=P[0],I=P[1],D=r.useRef(null),L=r.useRef(null);r.useImperativeHandle(n,(function(){return D.current}));var O=zv(T),F=l(r.useState(!1),2),U=F[0],G=F[1],q=l(r.useState(!1),2),H=q[0],V=q[1];if(U)throw U;if(H)throw H;var j=r.useRef(null);Uv((function(){var e=D.current;I.width>0&&I.height>0&&e&&(j.current||(j.current=Lm(e)),j.current.configure({gl:u,events:h,shadows:A,linear:v,flat:m,legacy:g,orthographic:y,frameloop:x,dpr:_,performance:w,raycaster:S,camera:M,scene:k,size:I,onPointerMissed:function(){return null==O.current?void 0:O.current.apply(O,arguments)},onCreated:function(e){var t;null==e.events.connect||e.events.connect(d?(t=d)&&t.hasOwnProperty("current")?d.current:d:L.current),f&&e.setEvents({compute:function(e,t){var n=e[f+"X"],r=e[f+"Y"];t.pointer.set(n/t.size.width*2-1,-r/t.size.height*2+1),t.raycaster.setFromCamera(t.pointer,t.camera)}}),null==E||E(e)}}),j.current.render((0,p.jsx)(R,{children:(0,p.jsx)(qv,{set:V,children:(0,p.jsx)(r.Suspense,{fallback:(0,p.jsx)(Gv,{set:G}),children:i})})})))})),r.useEffect((function(){var e=D.current;if(e)return function(){return Fm(e)}}),[]);var W=d?"none":"auto";return(0,p.jsx)("div",b(b({ref:L,style:b({position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:W},s)},C),{},{children:(0,p.jsx)("div",{ref:N,style:{width:"100%",height:"100%"},children:(0,p.jsx)("canvas",{ref:D,style:{display:"block"},children:a})})}))})),pg=r.forwardRef((function(e,t){return(0,p.jsx)(rg,{children:(0,p.jsx)(fg,b(b({},e),{},{ref:t}))})})),Ag=new WeakMap,vg=function(e){Y(n,e);var t=$(n);function n(e){var r;return V(this,n),(r=t.call(this,e)).decoderPath="",r.decoderConfig={},r.decoderBinary=null,r.decoderPending=null,r.workerLimit=4,r.workerPool=[],r.workerNextTaskID=1,r.workerSourceURL="",r.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},r.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"},r}return W(n,[{key:"setDecoderPath",value:function(e){return this.decoderPath=e,this}},{key:"setDecoderConfig",value:function(e){return this.decoderConfig=e,this}},{key:"setWorkerLimit",value:function(e){return this.workerLimit=e,this}},{key:"load",value:function(e,t,n,r){var i=this,a=new op(this.manager);a.setPath(this.path),a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,(function(e){var n={attributeIDs:i.defaultAttributeIDs,attributeTypes:i.defaultAttributeTypes,useUniqueIDs:!1};i.decodeGeometry(e,n).then(t).catch(r)}),n,r)}},{key:"decodeDracoFile",value:function(e,t,n,r){var i={attributeIDs:n||this.defaultAttributeIDs,attributeTypes:r||this.defaultAttributeTypes,useUniqueIDs:!!n};this.decodeGeometry(e,i).then(t)}},{key:"decodeGeometry",value:function(e,t){var n=this;for(var r in t.attributeTypes){var i=t.attributeTypes[r];void 0!==i.BYTES_PER_ELEMENT&&(t.attributeTypes[r]=i.name)}var a,o=JSON.stringify(t);if(Ag.has(e)){var s=Ag.get(e);if(s.key===o)return s.promise;if(0===e.byteLength)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}var u=this.workerNextTaskID++,l=e.byteLength,c=this._getWorker(u,l).then((function(n){return a=n,new Promise((function(n,r){a._callbacks[u]={resolve:n,reject:r},a.postMessage({type:"decode",id:u,taskConfig:t,buffer:e},[e])}))})).then((function(e){return n._createGeometry(e.geometry)}));return c.catch((function(){return!0})).then((function(){a&&u&&n._releaseTask(a,u)})),Ag.set(e,{key:o,promise:c}),c}},{key:"_createGeometry",value:function(e){var t=new Fo;e.index&&t.setIndex(new xo(e.index.array,1));for(var n=0;n<e.attributes.length;n++){var r=e.attributes[n],i=r.name,a=r.array,o=r.itemSize;t.setAttribute(i,new xo(a,o))}return t}},{key:"_loadLibrary",value:function(e,t){var n=new op(this.manager);return n.setPath(this.decoderPath),n.setResponseType(t),n.setWithCredentials(this.withCredentials),new Promise((function(t,r){n.load(e,t,void 0,r)}))}},{key:"preload",value:function(){return this._initDecoder(),this}},{key:"_initDecoder",value:function(){var e=this;if(this.decoderPending)return this.decoderPending;var t="object"!==typeof WebAssembly||"js"===this.decoderConfig.type,n=[];return t?n.push(this._loadLibrary("draco_decoder.js","text")):(n.push(this._loadLibrary("draco_wasm_wrapper.js","text")),n.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(n).then((function(n){var r=n[0];t||(e.decoderConfig.wasmBinary=n[1]);var i=mg.toString(),a=["/* draco decoder */",r,"","/* worker */",i.substring(i.indexOf("{")+1,i.lastIndexOf("}"))].join("\n");e.workerSourceURL=URL.createObjectURL(new Blob([a]))})),this.decoderPending}},{key:"_getWorker",value:function(e,t){var n=this;return this._initDecoder().then((function(){if(n.workerPool.length<n.workerLimit){var r=new Worker(n.workerSourceURL);r._callbacks={},r._taskCosts={},r._taskLoad=0,r.postMessage({type:"init",decoderConfig:n.decoderConfig}),r.onmessage=function(e){var t=e.data;switch(t.type){case"decode":r._callbacks[t.id].resolve(t);break;case"error":r._callbacks[t.id].reject(t);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+t.type+'"')}},n.workerPool.push(r)}else n.workerPool.sort((function(e,t){return e._taskLoad>t._taskLoad?-1:1}));var i=n.workerPool[n.workerPool.length-1];return i._taskCosts[e]=t,i._taskLoad+=t,i}))}},{key:"_releaseTask",value:function(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}},{key:"debug",value:function(){console.log("Task load: ",this.workerPool.map((function(e){return e._taskLoad})))}},{key:"dispose",value:function(){for(var e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}]),n}(np);function mg(){var e,t;function n(e,t,n,r,i,a){var o=a.num_components(),s=n.num_points()*o,u=s*i.BYTES_PER_ELEMENT,l=function(e,t){switch(t){case Float32Array:return e.DT_FLOAT32;case Int8Array:return e.DT_INT8;case Int16Array:return e.DT_INT16;case Int32Array:return e.DT_INT32;case Uint8Array:return e.DT_UINT8;case Uint16Array:return e.DT_UINT16;case Uint32Array:return e.DT_UINT32}}(e,i),c=e._malloc(u);t.GetAttributeDataArrayForAllPoints(n,a,l,u,c);var h=new i(e.HEAPF32.buffer,c,s).slice();return e._free(c),{name:r,array:h,itemSize:o}}onmessage=function(r){var i=r.data;switch(i.type){case"init":e=i.decoderConfig,t=new Promise((function(t){e.onModuleLoaded=function(e){t({draco:e})},DracoDecoderModule(e)}));break;case"decode":var a=i.buffer,o=i.taskConfig;t.then((function(e){var t=e.draco,r=new t.Decoder,s=new t.DecoderBuffer;s.Init(new Int8Array(a),a.byteLength);try{var u=function(e,t,r,i){var a,o,s=i.attributeIDs,u=i.attributeTypes,l=t.GetEncodedGeometryType(r);if(l===e.TRIANGULAR_MESH)a=new e.Mesh,o=t.DecodeBufferToMesh(r,a);else{if(l!==e.POINT_CLOUD)throw new Error("THREE.DRACOLoader: Unexpected geometry type.");a=new e.PointCloud,o=t.DecodeBufferToPointCloud(r,a)}if(!o.ok()||0===a.ptr)throw new Error("THREE.DRACOLoader: Decoding failed: "+o.error_msg());var c={index:null,attributes:[]};for(var h in s){var d=self[u[h]],f=void 0,p=void 0;if(i.useUniqueIDs)p=s[h],f=t.GetAttributeByUniqueId(a,p);else{if(-1===(p=t.GetAttributeId(a,e[s[h]])))continue;f=t.GetAttribute(a,p)}c.attributes.push(n(e,t,a,h,d,f))}l===e.TRIANGULAR_MESH&&(c.index=function(e,t,n){var r=n.num_faces(),i=3*r,a=4*i,o=e._malloc(a);t.GetTrianglesUInt32Array(n,a,o);var s=new Uint32Array(e.HEAPF32.buffer,o,i).slice();return e._free(o),{array:s,itemSize:1}}(e,t,a));return e.destroy(a),c}(t,r,s,o),l=u.attributes.map((function(e){return e.array.buffer}));u.index&&l.push(u.index.array.buffer),self.postMessage({type:"decode",id:i.id,geometry:u},l)}catch(tg){console.error(tg),self.postMessage({type:"error",id:i.id,error:tg.message})}finally{t.destroy(s),t.destroy(r)}}))}}}var gg=function(){if(cg)return cg;var e=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),t=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if("object"!==typeof WebAssembly)return{supported:!1};var n,r="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB";WebAssembly.validate(e)&&(r="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB");var i=WebAssembly.instantiate(function(e){for(var n=new Uint8Array(e.length),r=0;r<e.length;++r){var i=e.charCodeAt(r);n[r]=i>96?i-71:i>64?i-65:i>47?i+4:i>46?63:62}for(var a=0,o=0;o<e.length;++o)n[a++]=n[o]<60?t[n[o]]:64*(n[o]-60)+n[++o];return n.buffer.slice(0,a)}(r),{}).then((function(e){(n=e.instance).exports.__wasm_call_ctors()}));function a(e,t,r,i,a,o){var s=n.exports.sbrk,u=r+3&-4,l=s(u*i),c=s(a.length),h=new Uint8Array(n.exports.memory.buffer);h.set(a,c);var d=e(l,r,i,c,a.length);if(0===d&&o&&o(l,u,i),t.set(h.subarray(l,l+r*i)),s(l-s(0)),0!==d)throw new Error("Malformed buffer data: ".concat(d))}var o={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},s={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return cg={ready:i,supported:!0,decodeVertexBuffer:function(e,t,r,i,s){a(n.exports.meshopt_decodeVertexBuffer,e,t,r,i,n.exports[o[s]])},decodeIndexBuffer:function(e,t,r,i){a(n.exports.meshopt_decodeIndexBuffer,e,t,r,i)},decodeIndexSequence:function(e,t,r,i){a(n.exports.meshopt_decodeIndexSequence,e,t,r,i)},decodeGltfBuffer:function(e,t,r,i,u,l){a(n.exports[s[u]],e,t,r,i,n.exports[o[l]])}},cg};function yg(e,t){if(t===Qn)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),e;if(t===Kn||t===Jn){var n=e.getIndex();if(null===n){var r=[],i=e.getAttribute("position");if(void 0===i)return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),e;for(var a=0;a<i.count;a++)r.push(a);e.setIndex(r),n=e.getIndex()}var o=n.count-2,s=[];if(n)if(t===Kn)for(var u=1;u<=o;u++)s.push(n.getX(0)),s.push(n.getX(u)),s.push(n.getX(u+1));else for(var l=0;l<o;l++)l%2===0?(s.push(n.getX(l)),s.push(n.getX(l+1)),s.push(n.getX(l+2))):(s.push(n.getX(l+2)),s.push(n.getX(l+1)),s.push(n.getX(l)));s.length/3!==o&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");var c=e.clone();return c.setIndex(s),c.clearGroups(),c}return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",t),e}var bg=parseInt(ue.replace(/\D+/g,""));function xg(e){if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(e);for(var t="",n=0,r=e.length;n<r;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch(i){return t}}var _g="srgb",wg="srgb-linear",Sg=function(e){Y(n,e);var t=$(n);function n(e){var r;return V(this,n),(r=t.call(this,e)).dracoLoader=null,r.ktx2Loader=null,r.meshoptDecoder=null,r.pluginCallbacks=[],r.register((function(e){return new Rg(e)})),r.register((function(e){return new Bg(e)})),r.register((function(e){return new zg(e)})),r.register((function(e){return new Gg(e)})),r.register((function(e){return new qg(e)})),r.register((function(e){return new Ng(e)})),r.register((function(e){return new Ig(e)})),r.register((function(e){return new Dg(e)})),r.register((function(e){return new Lg(e)})),r.register((function(e){return new Cg(e)})),r.register((function(e){return new Og(e)})),r.register((function(e){return new Pg(e)})),r.register((function(e){return new Ug(e)})),r.register((function(e){return new Fg(e)})),r.register((function(e){return new Tg(e)})),r.register((function(e){return new Hg(e)})),r.register((function(e){return new Vg(e)})),r}return W(n,[{key:"load",value:function(e,t,n,r){var i,a=this;if(""!==this.resourcePath)i=this.resourcePath;else if(""!==this.path){var o=Np.extractUrlBase(e);i=Np.resolveURL(o,this.path)}else i=Np.extractUrlBase(e);this.manager.itemStart(e);var s=function(t){r?r(t):console.error(t),a.manager.itemError(e),a.manager.itemEnd(e)},u=new op(this.manager);u.setPath(this.path),u.setResponseType("arraybuffer"),u.setRequestHeader(this.requestHeader),u.setWithCredentials(this.withCredentials),u.load(e,(function(n){try{a.parse(n,i,(function(n){t(n),a.manager.itemEnd(e)}),s)}catch(r){s(r)}}),n,s)}},{key:"setDRACOLoader",value:function(e){return this.dracoLoader=e,this}},{key:"setDDSLoader",value:function(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}},{key:"setKTX2Loader",value:function(e){return this.ktx2Loader=e,this}},{key:"setMeshoptDecoder",value:function(e){return this.meshoptDecoder=e,this}},{key:"register",value:function(e){return-1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this}},{key:"unregister",value:function(e){return-1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}},{key:"parse",value:function(e,t,n,r){var i,a={},o={};if("string"===typeof e)i=JSON.parse(e);else if(e instanceof ArrayBuffer){if(xg(new Uint8Array(e.slice(0,4)))===jg){try{a[kg.KHR_BINARY_GLTF]=new Yg(e)}catch(tg){return void(r&&r(tg))}i=JSON.parse(a[kg.KHR_BINARY_GLTF].content)}else i=JSON.parse(xg(new Uint8Array(e)))}else i=e;if(void 0===i.asset||i.asset.version[0]<2)r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));else{var s=new by(i,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});s.fileLoader.setRequestHeader(this.requestHeader);for(var u=0;u<this.pluginCallbacks.length;u++){var l=this.pluginCallbacks[u](s);l.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),o[l.name]=l,a[l.name]=!0}if(i.extensionsUsed)for(var c=0;c<i.extensionsUsed.length;++c){var h=i.extensionsUsed[c],d=i.extensionsRequired||[];switch(h){case kg.KHR_MATERIALS_UNLIT:a[h]=new Eg;break;case kg.KHR_DRACO_MESH_COMPRESSION:a[h]=new Qg(i,this.dracoLoader);break;case kg.KHR_TEXTURE_TRANSFORM:a[h]=new Jg;break;case kg.KHR_MESH_QUANTIZATION:a[h]=new Kg;break;default:d.indexOf(h)>=0&&void 0===o[h]&&console.warn('THREE.GLTFLoader: Unknown extension "'+h+'".')}}s.setExtensions(a),s.setPlugins(o),s.parse(n,r)}}},{key:"parseAsync",value:function(e,t){var n=this;return new Promise((function(r,i){n.parse(e,t,r,i)}))}}]),n}(np);function Mg(){var e={};return{get:function(t){return e[t]},add:function(t,n){e[t]=n},remove:function(t){delete e[t]},removeAll:function(){e={}}}}var kg={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"},Tg=function(){function e(t){V(this,e),this.parser=t,this.name=kg.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}return W(e,[{key:"_markDefs",value:function(){for(var e=this.parser,t=this.parser.json.nodes||[],n=0,r=t.length;n<r;n++){var i=t[n];i.extensions&&i.extensions[this.name]&&void 0!==i.extensions[this.name].light&&e._addNodeRef(this.cache,i.extensions[this.name].light)}}},{key:"_loadLight",value:function(e){var t=this.parser,n="light:"+e,r=t.cache.get(n);if(r)return r;var i,a=t.json,o=((a.extensions&&a.extensions[this.name]||{}).lights||[])[e],s=new uo(16777215);void 0!==o.color&&s.setRGB(o.color[0],o.color[1],o.color[2],wg);var u=void 0!==o.range?o.range:0;switch(o.type){case"directional":(i=new Tp(s)).target.position.set(0,0,-1),i.add(i.target);break;case"point":(i=new Mp(s)).distance=u;break;case"spot":(i=new bp(s)).distance=u,o.spot=o.spot||{},o.spot.innerConeAngle=void 0!==o.spot.innerConeAngle?o.spot.innerConeAngle:0,o.spot.outerConeAngle=void 0!==o.spot.outerConeAngle?o.spot.outerConeAngle:Math.PI/4,i.angle=o.spot.outerConeAngle,i.penumbra=1-o.spot.innerConeAngle/o.spot.outerConeAngle,i.target.position.set(0,0,-1),i.add(i.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+o.type)}return i.position.set(0,0,0),i.decay=2,py(i,o),void 0!==o.intensity&&(i.intensity=o.intensity),i.name=t.createUniqueName(o.name||"light_"+e),r=Promise.resolve(i),t.cache.add(n,r),r}},{key:"getDependency",value:function(e,t){if("light"===e)return this._loadLight(t)}},{key:"createNodeAttachment",value:function(e){var t=this,n=this.parser,r=n.json.nodes[e],i=(r.extensions&&r.extensions[this.name]||{}).light;return void 0===i?null:this._loadLight(i).then((function(e){return n._getNodeRef(t.cache,i,e)}))}}]),e}(),Eg=function(){function e(){V(this,e),this.name=kg.KHR_MATERIALS_UNLIT}return W(e,[{key:"getMaterialType",value:function(){return fo}},{key:"extendParams",value:function(e,t,n){var r=[];e.color=new uo(1,1,1),e.opacity=1;var i=t.pbrMetallicRoughness;if(i){if(Array.isArray(i.baseColorFactor)){var a=i.baseColorFactor;e.color.setRGB(a[0],a[1],a[2],wg),e.opacity=a[3]}void 0!==i.baseColorTexture&&r.push(n.assignTexture(e,"map",i.baseColorTexture,_g))}return Promise.all(r)}}]),e}(),Cg=function(){function e(t){V(this,e),this.parser=t,this.name=kg.KHR_MATERIALS_EMISSIVE_STRENGTH}return W(e,[{key:"extendMaterialParams",value:function(e,t){var n=this.parser.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();var r=n.extensions[this.name].emissiveStrength;return void 0!==r&&(t.emissiveIntensity=r),Promise.resolve()}}]),e}(),Rg=function(){function e(t){V(this,e),this.parser=t,this.name=kg.KHR_MATERIALS_CLEARCOAT}return W(e,[{key:"getMaterialType",value:function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?kf:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();var i=[],a=r.extensions[this.name];if(void 0!==a.clearcoatFactor&&(t.clearcoat=a.clearcoatFactor),void 0!==a.clearcoatTexture&&i.push(n.assignTexture(t,"clearcoatMap",a.clearcoatTexture)),void 0!==a.clearcoatRoughnessFactor&&(t.clearcoatRoughness=a.clearcoatRoughnessFactor),void 0!==a.clearcoatRoughnessTexture&&i.push(n.assignTexture(t,"clearcoatRoughnessMap",a.clearcoatRoughnessTexture)),void 0!==a.clearcoatNormalTexture&&(i.push(n.assignTexture(t,"clearcoatNormalMap",a.clearcoatNormalTexture)),void 0!==a.clearcoatNormalTexture.scale)){var o=a.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new ii(o,o)}return Promise.all(i)}}]),e}(),Bg=function(){function e(t){V(this,e),this.parser=t,this.name=kg.KHR_MATERIALS_DISPERSION}return W(e,[{key:"getMaterialType",value:function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?kf:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();var r=n.extensions[this.name];return t.dispersion=void 0!==r.dispersion?r.dispersion:0,Promise.resolve()}}]),e}(),Pg=function(){function e(t){V(this,e),this.parser=t,this.name=kg.KHR_MATERIALS_IRIDESCENCE}return W(e,[{key:"getMaterialType",value:function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?kf:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();var i=[],a=r.extensions[this.name];return void 0!==a.iridescenceFactor&&(t.iridescence=a.iridescenceFactor),void 0!==a.iridescenceTexture&&i.push(n.assignTexture(t,"iridescenceMap",a.iridescenceTexture)),void 0!==a.iridescenceIor&&(t.iridescenceIOR=a.iridescenceIor),void 0===t.iridescenceThicknessRange&&(t.iridescenceThicknessRange=[100,400]),void 0!==a.iridescenceThicknessMinimum&&(t.iridescenceThicknessRange[0]=a.iridescenceThicknessMinimum),void 0!==a.iridescenceThicknessMaximum&&(t.iridescenceThicknessRange[1]=a.iridescenceThicknessMaximum),void 0!==a.iridescenceThicknessTexture&&i.push(n.assignTexture(t,"iridescenceThicknessMap",a.iridescenceThicknessTexture)),Promise.all(i)}}]),e}(),Ng=function(){function e(t){V(this,e),this.parser=t,this.name=kg.KHR_MATERIALS_SHEEN}return W(e,[{key:"getMaterialType",value:function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?kf:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();var i=[];t.sheenColor=new uo(0,0,0),t.sheenRoughness=0,t.sheen=1;var a=r.extensions[this.name];if(void 0!==a.sheenColorFactor){var o=a.sheenColorFactor;t.sheenColor.setRGB(o[0],o[1],o[2],wg)}return void 0!==a.sheenRoughnessFactor&&(t.sheenRoughness=a.sheenRoughnessFactor),void 0!==a.sheenColorTexture&&i.push(n.assignTexture(t,"sheenColorMap",a.sheenColorTexture,_g)),void 0!==a.sheenRoughnessTexture&&i.push(n.assignTexture(t,"sheenRoughnessMap",a.sheenRoughnessTexture)),Promise.all(i)}}]),e}(),Ig=function(){function e(t){V(this,e),this.parser=t,this.name=kg.KHR_MATERIALS_TRANSMISSION}return W(e,[{key:"getMaterialType",value:function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?kf:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();var i=[],a=r.extensions[this.name];return void 0!==a.transmissionFactor&&(t.transmission=a.transmissionFactor),void 0!==a.transmissionTexture&&i.push(n.assignTexture(t,"transmissionMap",a.transmissionTexture)),Promise.all(i)}}]),e}(),Dg=function(){function e(t){V(this,e),this.parser=t,this.name=kg.KHR_MATERIALS_VOLUME}return W(e,[{key:"getMaterialType",value:function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?kf:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();var i=[],a=r.extensions[this.name];t.thickness=void 0!==a.thicknessFactor?a.thicknessFactor:0,void 0!==a.thicknessTexture&&i.push(n.assignTexture(t,"thicknessMap",a.thicknessTexture)),t.attenuationDistance=a.attenuationDistance||1/0;var o=a.attenuationColor||[1,1,1];return t.attenuationColor=(new uo).setRGB(o[0],o[1],o[2],wg),Promise.all(i)}}]),e}(),Lg=function(){function e(t){V(this,e),this.parser=t,this.name=kg.KHR_MATERIALS_IOR}return W(e,[{key:"getMaterialType",value:function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?kf:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();var r=n.extensions[this.name];return t.ior=void 0!==r.ior?r.ior:1.5,Promise.resolve()}}]),e}(),Og=function(){function e(t){V(this,e),this.parser=t,this.name=kg.KHR_MATERIALS_SPECULAR}return W(e,[{key:"getMaterialType",value:function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?kf:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();var i=[],a=r.extensions[this.name];t.specularIntensity=void 0!==a.specularFactor?a.specularFactor:1,void 0!==a.specularTexture&&i.push(n.assignTexture(t,"specularIntensityMap",a.specularTexture));var o=a.specularColorFactor||[1,1,1];return t.specularColor=(new uo).setRGB(o[0],o[1],o[2],wg),void 0!==a.specularColorTexture&&i.push(n.assignTexture(t,"specularColorMap",a.specularColorTexture,_g)),Promise.all(i)}}]),e}(),Fg=function(){function e(t){V(this,e),this.parser=t,this.name=kg.EXT_MATERIALS_BUMP}return W(e,[{key:"getMaterialType",value:function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?kf:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();var i=[],a=r.extensions[this.name];return t.bumpScale=void 0!==a.bumpFactor?a.bumpFactor:1,void 0!==a.bumpTexture&&i.push(n.assignTexture(t,"bumpMap",a.bumpTexture)),Promise.all(i)}}]),e}(),Ug=function(){function e(t){V(this,e),this.parser=t,this.name=kg.KHR_MATERIALS_ANISOTROPY}return W(e,[{key:"getMaterialType",value:function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?kf:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();var i=[],a=r.extensions[this.name];return void 0!==a.anisotropyStrength&&(t.anisotropy=a.anisotropyStrength),void 0!==a.anisotropyRotation&&(t.anisotropyRotation=a.anisotropyRotation),void 0!==a.anisotropyTexture&&i.push(n.assignTexture(t,"anisotropyMap",a.anisotropyTexture)),Promise.all(i)}}]),e}(),zg=function(){function e(t){V(this,e),this.parser=t,this.name=kg.KHR_TEXTURE_BASISU}return W(e,[{key:"loadTexture",value:function(e){var t=this.parser,n=t.json,r=n.textures[e];if(!r.extensions||!r.extensions[this.name])return null;var i=r.extensions[this.name],a=t.options.ktx2Loader;if(!a){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,i.source,a)}}]),e}(),Gg=function(){function e(t){V(this,e),this.parser=t,this.name=kg.EXT_TEXTURE_WEBP,this.isSupported=null}return W(e,[{key:"loadTexture",value:function(e){var t=this.name,n=this.parser,r=n.json,i=r.textures[e];if(!i.extensions||!i.extensions[t])return null;var a=i.extensions[t],o=r.images[a.source],s=n.textureLoader;if(o.uri){var u=n.options.manager.getHandler(o.uri);null!==u&&(s=u)}return this.detectSupport().then((function(i){if(i)return n.loadTextureImage(e,a.source,s);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(e)}))}},{key:"detectSupport",value:function(){return this.isSupported||(this.isSupported=new Promise((function(e){var t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(1===t.height)}}))),this.isSupported}}]),e}(),qg=function(){function e(t){V(this,e),this.parser=t,this.name=kg.EXT_TEXTURE_AVIF,this.isSupported=null}return W(e,[{key:"loadTexture",value:function(e){var t=this.name,n=this.parser,r=n.json,i=r.textures[e];if(!i.extensions||!i.extensions[t])return null;var a=i.extensions[t],o=r.images[a.source],s=n.textureLoader;if(o.uri){var u=n.options.manager.getHandler(o.uri);null!==u&&(s=u)}return this.detectSupport().then((function(i){if(i)return n.loadTextureImage(e,a.source,s);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return n.loadTexture(e)}))}},{key:"detectSupport",value:function(){return this.isSupported||(this.isSupported=new Promise((function(e){var t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(1===t.height)}}))),this.isSupported}}]),e}(),Hg=function(){function e(t){V(this,e),this.name=kg.EXT_MESHOPT_COMPRESSION,this.parser=t}return W(e,[{key:"loadBufferView",value:function(e){var t=this.parser.json,n=t.bufferViews[e];if(n.extensions&&n.extensions[this.name]){var r=n.extensions[this.name],i=this.parser.getDependency("buffer",r.buffer),a=this.parser.options.meshoptDecoder;if(!a||!a.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return i.then((function(e){var t=r.byteOffset||0,n=r.byteLength||0,i=r.count,o=r.byteStride,s=new Uint8Array(e,t,n);return a.decodeGltfBufferAsync?a.decodeGltfBufferAsync(i,o,s,r.mode,r.filter).then((function(e){return e.buffer})):a.ready.then((function(){var e=new ArrayBuffer(i*o);return a.decodeGltfBuffer(new Uint8Array(e),i,o,s,r.mode,r.filter),e}))}))}return null}}]),e}(),Vg=function(){function e(t){V(this,e),this.name=kg.EXT_MESH_GPU_INSTANCING,this.parser=t}return W(e,[{key:"createNodeMesh",value:function(e){var t=this,n=this.parser.json,r=n.nodes[e];if(!r.extensions||!r.extensions[this.name]||void 0===r.mesh)return null;var i,a=ee(n.meshes[r.mesh].primitives);try{for(a.s();!(i=a.n()).done;){var o=i.value;if(o.mode!==ty.TRIANGLES&&o.mode!==ty.TRIANGLE_STRIP&&o.mode!==ty.TRIANGLE_FAN&&void 0!==o.mode)return null}}catch(d){a.e(d)}finally{a.f()}var s=r.extensions[this.name].attributes,u=[],l={},c=function(e){u.push(t.parser.getDependency("accessor",s[e]).then((function(t){return l[e]=t,l[e]})))};for(var h in s)c(h);return u.length<1?null:(u.push(this.parser.createNodeMesh(e)),Promise.all(u).then((function(e){var n,r=e.pop(),i=r.isGroup?r.children:[r],a=e[0].count,o=[],s=ee(i);try{for(s.s();!(n=s.n()).done;){for(var u=n.value,c=new va,h=new zi,f=new Ui,p=new zi(1,1,1),A=new oh(u.geometry,u.material,a),v=0;v<a;v++)l.TRANSLATION&&h.fromBufferAttribute(l.TRANSLATION,v),l.ROTATION&&f.fromBufferAttribute(l.ROTATION,v),l.SCALE&&p.fromBufferAttribute(l.SCALE,v),A.setMatrixAt(v,c.compose(h,f,p));for(var m in l)if("_COLOR_0"===m){var g=l[m];A.instanceColor=new Zc(g.array,g.itemSize,g.normalized)}else"TRANSLATION"!==m&&"ROTATION"!==m&&"SCALE"!==m&&u.geometry.setAttribute(m,l[m]);Ha.prototype.copy.call(A,u),t.parser.assignFinalMaterial(A),o.push(A)}}catch(d){s.e(d)}finally{s.f()}return r.isGroup?(r.clear(),r.add.apply(r,o),r):o[0]})))}}]),e}(),jg="glTF",Wg=1313821514,Xg=5130562,Yg=W((function e(t){V(this,e),this.name=kg.KHR_BINARY_GLTF,this.content=null,this.body=null;var n=new DataView(t,0,12);if(this.header={magic:xg(new Uint8Array(t.slice(0,4))),version:n.getUint32(4,!0),length:n.getUint32(8,!0)},this.header.magic!==jg)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");for(var r=this.header.length-12,i=new DataView(t,12),a=0;a<r;){var o=i.getUint32(a,!0);a+=4;var s=i.getUint32(a,!0);if(a+=4,s===Wg){var u=new Uint8Array(t,12+a,o);this.content=xg(u)}else if(s===Xg){var l=12+a;this.body=t.slice(l,l+o)}a+=o}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")})),Qg=function(){function e(t,n){if(V(this,e),!n)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=kg.KHR_DRACO_MESH_COMPRESSION,this.json=t,this.dracoLoader=n,this.dracoLoader.preload()}return W(e,[{key:"decodePrimitive",value:function(e,t){var n=this.json,r=this.dracoLoader,i=e.extensions[this.name].bufferView,a=e.extensions[this.name].attributes,o={},s={},u={};for(var l in a){var c=oy[l]||l.toLowerCase();o[c]=a[l]}for(var h in e.attributes){var d=oy[h]||h.toLowerCase();if(void 0!==a[h]){var f=n.accessors[e.attributes[h]],p=ny[f.componentType];u[d]=p.name,s[d]=!0===f.normalized}}return t.getDependency("bufferView",i).then((function(e){return new Promise((function(t,n){r.decodeDracoFile(e,(function(e){for(var n in e.attributes){var r=e.attributes[n],i=s[n];void 0!==i&&(r.normalized=i)}t(e)}),o,u,wg,n)}))}))}}]),e}(),Jg=function(){function e(){V(this,e),this.name=kg.KHR_TEXTURE_TRANSFORM}return W(e,[{key:"extendTexture",value:function(e,t){return void 0!==t.texCoord&&t.texCoord!==e.channel||void 0!==t.offset||void 0!==t.rotation||void 0!==t.scale?(e=e.clone(),void 0!==t.texCoord&&(e.channel=t.texCoord),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),e.needsUpdate=!0,e):e}}]),e}(),Kg=W((function e(){V(this,e),this.name=kg.KHR_MESH_QUANTIZATION})),Zg=function(e){Y(n,e);var t=$(n);function n(e,r,i,a){return V(this,n),t.call(this,e,r,i,a)}return W(n,[{key:"copySampleValue_",value:function(e){for(var t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r*3+r,a=0;a!==r;a++)t[a]=n[i+a];return t}},{key:"interpolate_",value:function(e,t,n,r){for(var i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=2*o,u=3*o,l=r-t,c=(n-t)/l,h=c*c,d=h*c,f=e*u,p=f-u,A=-2*d+3*h,v=d-h,m=1-A,g=v-h+c,y=0;y!==o;y++){var b=a[p+y+o],x=a[p+y+s]*l,_=a[f+y+o],w=a[f+y]*l;i[y]=m*b+g*x+A*_+v*w}return i}}]),n}(Uf),$g=new Ui,ey=function(e){Y(n,e);var t=$(n);function n(){return V(this,n),t.apply(this,arguments)}return W(n,[{key:"interpolate_",value:function(e,t,r,i){var a=oe(Q(n.prototype),"interpolate_",this).call(this,e,t,r,i);return $g.fromArray(a).normalize().toArray(a),a}}]),n}(Zg),ty={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},ny={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},ry={9728:St,9729:Ct,9984:Mt,9985:Rt,9986:Tt,9987:Pt},iy={33071:_t,33648:wt,10497:xt},ay={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},oy=b(b({POSITION:"position",NORMAL:"normal",TANGENT:"tangent"},bg>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"}),{},{COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"}),sy={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},uy={CUBICSPLINE:void 0,LINEAR:qn,STEP:Gn},ly="OPAQUE",cy="MASK",hy="BLEND";function dy(e){return void 0===e.DefaultMaterial&&(e.DefaultMaterial=new Mf({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:ye})),e.DefaultMaterial}function fy(e,t,n){for(var r in n.extensions)void 0===e[r]&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[r]=n.extensions[r])}function py(e,t){void 0!==t.extras&&("object"===typeof t.extras?Object.assign(e.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function Ay(e,t){if(e.updateMorphTargets(),void 0!==t.weights)for(var n=0,r=t.weights.length;n<r;n++)e.morphTargetInfluences[n]=t.weights[n];if(t.extras&&Array.isArray(t.extras.targetNames)){var i=t.extras.targetNames;if(e.morphTargetInfluences.length===i.length){e.morphTargetDictionary={};for(var a=0,o=i.length;a<o;a++)e.morphTargetDictionary[i[a]]=a}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function vy(e){var t,n=e.extensions&&e.extensions[kg.KHR_DRACO_MESH_COMPRESSION];if(t=n?"draco:"+n.bufferView+":"+n.indices+":"+my(n.attributes):e.indices+":"+my(e.attributes)+":"+e.mode,void 0!==e.targets)for(var r=0,i=e.targets.length;r<i;r++)t+=":"+my(e.targets[r]);return t}function my(e){for(var t="",n=Object.keys(e).sort(),r=0,i=n.length;r<i;r++)t+=n[r]+":"+e[n[r]]+";";return t}function gy(e){switch(e){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}var yy=new va,by=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};V(this,e),this.json=t,this.extensions={},this.plugins={},this.options=n,this.cache=new Mg,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};var r=!1,i=!1,a=-1;"undefined"!==typeof navigator&&"undefined"!==typeof navigator.userAgent&&(r=!0===/^((?!chrome|android).)*safari/i.test(navigator.userAgent),a=(i=navigator.userAgent.indexOf("Firefox")>-1)?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),"undefined"===typeof createImageBitmap||r||i&&a<98?this.textureLoader=new dp(this.options.manager):this.textureLoader=new zp(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new op(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}return W(e,[{key:"setExtensions",value:function(e){this.extensions=e}},{key:"setPlugins",value:function(e){this.plugins=e}},{key:"parse",value:function(e,t){var n=this,r=this.json,i=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll((function(e){return e._markDefs&&e._markDefs()})),Promise.all(this._invokeAll((function(e){return e.beforeRoot&&e.beforeRoot()}))).then((function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])})).then((function(t){var a={scene:t[0][r.scene||0],scenes:t[0],animations:t[1],cameras:t[2],asset:r.asset,parser:n,userData:{}};return fy(i,a,r),py(a,r),Promise.all(n._invokeAll((function(e){return e.afterRoot&&e.afterRoot(a)}))).then((function(){var t,n=ee(a.scenes);try{for(n.s();!(t=n.n()).done;){t.value.updateMatrixWorld()}}catch(r){n.e(r)}finally{n.f()}e(a)}))})).catch(t)}},{key:"_markDefs",value:function(){for(var e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[],r=0,i=t.length;r<i;r++)for(var a=t[r].joints,o=0,s=a.length;o<s;o++)e[a[o]].isBone=!0;for(var u=0,l=e.length;u<l;u++){var c=e[u];void 0!==c.mesh&&(this._addNodeRef(this.meshCache,c.mesh),void 0!==c.skin&&(n[c.mesh].isSkinnedMesh=!0)),void 0!==c.camera&&this._addNodeRef(this.cameraCache,c.camera)}}},{key:"_addNodeRef",value:function(e,t){void 0!==t&&(void 0===e.refs[t]&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}},{key:"_getNodeRef",value:function(e,t,n){var r=this;if(e.refs[t]<=1)return n;var i=n.clone();return function e(t,n){var i=r.associations.get(t);null!=i&&r.associations.set(n,i);var a,o=ee(t.children.entries());try{for(o.s();!(a=o.n()).done;){var s=l(a.value,2),u=s[0];e(s[1],n.children[u])}}catch(c){o.e(c)}finally{o.f()}}(n,i),i.name+="_instance_"+e.uses[t]++,i}},{key:"_invokeOne",value:function(e){var t=Object.values(this.plugins);t.push(this);for(var n=0;n<t.length;n++){var r=e(t[n]);if(r)return r}return null}},{key:"_invokeAll",value:function(e){var t=Object.values(this.plugins);t.unshift(this);for(var n=[],r=0;r<t.length;r++){var i=e(t[r]);i&&n.push(i)}return n}},{key:"getDependency",value:function(e,t){var n=e+":"+t,r=this.cache.get(n);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this._invokeOne((function(e){return e.loadNode&&e.loadNode(t)}));break;case"mesh":r=this._invokeOne((function(e){return e.loadMesh&&e.loadMesh(t)}));break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne((function(e){return e.loadBufferView&&e.loadBufferView(t)}));break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne((function(e){return e.loadMaterial&&e.loadMaterial(t)}));break;case"texture":r=this._invokeOne((function(e){return e.loadTexture&&e.loadTexture(t)}));break;case"skin":r=this.loadSkin(t);break;case"animation":r=this._invokeOne((function(e){return e.loadAnimation&&e.loadAnimation(t)}));break;case"camera":r=this.loadCamera(t);break;default:if(!(r=this._invokeOne((function(n){return n!=this&&n.getDependency&&n.getDependency(e,t)}))))throw new Error("Unknown type: "+e)}this.cache.add(n,r)}return r}},{key:"getDependencies",value:function(e){var t=this.cache.get(e);if(!t){var n=this,r=this.json[e+("mesh"===e?"es":"s")]||[];t=Promise.all(r.map((function(t,r){return n.getDependency(e,r)}))),this.cache.add(e,t)}return t}},{key:"loadBuffer",value:function(e){var t=this.json.buffers[e],n=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[kg.KHR_BINARY_GLTF].body);var r=this.options;return new Promise((function(e,i){n.load(Np.resolveURL(t.uri,r.path),e,void 0,(function(){i(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))}))}))}},{key:"loadBufferView",value:function(e){var t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then((function(e){var n=t.byteLength||0,r=t.byteOffset||0;return e.slice(r,r+n)}))}},{key:"loadAccessor",value:function(e){var t=this,n=this.json,r=this.json.accessors[e];if(void 0===r.bufferView&&void 0===r.sparse){var i=ay[r.type],a=ny[r.componentType],o=!0===r.normalized,s=new a(r.count*i);return Promise.resolve(new xo(s,i,o))}var u=[];return void 0!==r.bufferView?u.push(this.getDependency("bufferView",r.bufferView)):u.push(null),void 0!==r.sparse&&(u.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),u.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(u).then((function(e){var i,a,o=e[0],s=ay[r.type],u=ny[r.componentType],l=u.BYTES_PER_ELEMENT,c=l*s,h=r.byteOffset||0,d=void 0!==r.bufferView?n.bufferViews[r.bufferView].byteStride:void 0,f=!0===r.normalized;if(d&&d!==c){var p=Math.floor(h/d),A="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+p+":"+r.count,v=t.cache.get(A);v||(i=new u(o,p*d,r.count*d/l),v=new vc(i,d/l),t.cache.add(A,v)),a=new gc(v,s,h%d/l,f)}else i=null===o?new u(r.count*s):new u(o,h,r.count*s),a=new xo(i,s,f);if(void 0!==r.sparse){var m=ay.SCALAR,g=ny[r.sparse.indices.componentType],y=r.sparse.indices.byteOffset||0,b=r.sparse.values.byteOffset||0,x=new g(e[1],y,r.sparse.count*m),_=new u(e[2],b,r.sparse.count*s);null!==o&&(a=new xo(a.array.slice(),a.itemSize,a.normalized));for(var w=0,S=x.length;w<S;w++){var M=x[w];if(a.setX(M,_[w*s]),s>=2&&a.setY(M,_[w*s+1]),s>=3&&a.setZ(M,_[w*s+2]),s>=4&&a.setW(M,_[w*s+3]),s>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return a}))}},{key:"loadTexture",value:function(e){var t=this.json,n=this.options,r=t.textures[e].source,i=t.images[r],a=this.textureLoader;if(i.uri){var o=n.manager.getHandler(i.uri);null!==o&&(a=o)}return this.loadTextureImage(e,r,a)}},{key:"loadTextureImage",value:function(e,t,n){var r=this,i=this.json,a=i.textures[e],o=i.images[t],s=(o.uri||o.bufferView)+":"+a.sampler;if(this.textureCache[s])return this.textureCache[s];var u=this.loadImageSource(t,n).then((function(t){t.flipY=!1,t.name=a.name||o.name||"",""===t.name&&"string"===typeof o.uri&&!1===o.uri.startsWith("data:image/")&&(t.name=o.uri);var n=(i.samplers||{})[a.sampler]||{};return t.magFilter=ry[n.magFilter]||Ct,t.minFilter=ry[n.minFilter]||Pt,t.wrapS=iy[n.wrapS]||xt,t.wrapT=iy[n.wrapT]||xt,r.associations.set(t,{textures:e}),t})).catch((function(){return null}));return this.textureCache[s]=u,u}},{key:"loadImageSource",value:function(e,t){var n=this.json,r=this.options;if(void 0!==this.sourceCache[e])return this.sourceCache[e].then((function(e){return e.clone()}));var i=n.images[e],a=self.URL||self.webkitURL,o=i.uri||"",s=!1;if(void 0!==i.bufferView)o=this.getDependency("bufferView",i.bufferView).then((function(e){s=!0;var t=new Blob([e],{type:i.mimeType});return o=a.createObjectURL(t)}));else if(void 0===i.uri)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");var u=Promise.resolve(o).then((function(e){return new Promise((function(n,i){var a=n;!0===t.isImageBitmapLoader&&(a=function(e){var t=new Bi(e);t.needsUpdate=!0,n(t)}),t.load(Np.resolveURL(e,r.path),a,void 0,i)}))})).then((function(e){var t;return!0===s&&a.revokeObjectURL(o),py(e,i),e.userData.mimeType=i.mimeType||((t=i.uri).search(/\.jpe?g($|\?)/i)>0||0===t.search(/^data\:image\/jpeg/)?"image/jpeg":t.search(/\.webp($|\?)/i)>0||0===t.search(/^data\:image\/webp/)?"image/webp":"image/png"),e})).catch((function(e){throw console.error("THREE.GLTFLoader: Couldn't load texture",o),e}));return this.sourceCache[e]=u,u}},{key:"assignTexture",value:function(e,t,n,r){var i=this;return this.getDependency("texture",n.index).then((function(a){if(!a)return null;if(void 0!==n.texCoord&&n.texCoord>0&&((a=a.clone()).channel=n.texCoord),i.extensions[kg.KHR_TEXTURE_TRANSFORM]){var o=void 0!==n.extensions?n.extensions[kg.KHR_TEXTURE_TRANSFORM]:void 0;if(o){var s=i.associations.get(a);a=i.extensions[kg.KHR_TEXTURE_TRANSFORM].extendTexture(a,o),i.associations.set(a,s)}}return void 0!==r&&("number"===typeof r&&(r=3001===r?_g:wg),"colorSpace"in a?a.colorSpace=r:a.encoding=r===_g?3001:3e3),e[t]=a,a}))}},{key:"assignFinalMaterial",value:function(e){var t=e.geometry,n=e.material,r=void 0===t.attributes.tangent,i=void 0!==t.attributes.color,a=void 0===t.attributes.normal;if(e.isPoints){var o="PointsMaterial:"+n.uuid,s=this.cache.get(o);s||(s=new Uh,ho.prototype.copy.call(s,n),s.color.copy(n.color),s.map=n.map,s.sizeAttenuation=!1,this.cache.add(o,s)),n=s}else if(e.isLine){var u="LineBasicMaterial:"+n.uuid,l=this.cache.get(u);l||(l=new Mh,ho.prototype.copy.call(l,n),l.color.copy(n.color),l.map=n.map,this.cache.add(u,l)),n=l}if(r||i||a){var c="ClonedMaterial:"+n.uuid+":";r&&(c+="derivative-tangents:"),i&&(c+="vertex-colors:"),a&&(c+="flat-shading:");var h=this.cache.get(c);h||(h=n.clone(),i&&(h.vertexColors=!0),a&&(h.flatShading=!0),r&&(h.normalScale&&(h.normalScale.y*=-1),h.clearcoatNormalScale&&(h.clearcoatNormalScale.y*=-1)),this.cache.add(c,h),this.associations.set(h,this.associations.get(n))),n=h}e.material=n}},{key:"getMaterialType",value:function(){return Mf}},{key:"loadMaterial",value:function(e){var t,n=this,r=this.json,i=this.extensions,a=r.materials[e],o={},s=[];if((a.extensions||{})[kg.KHR_MATERIALS_UNLIT]){var u=i[kg.KHR_MATERIALS_UNLIT];t=u.getMaterialType(),s.push(u.extendParams(o,a,n))}else{var l=a.pbrMetallicRoughness||{};if(o.color=new uo(1,1,1),o.opacity=1,Array.isArray(l.baseColorFactor)){var c=l.baseColorFactor;o.color.setRGB(c[0],c[1],c[2],wg),o.opacity=c[3]}void 0!==l.baseColorTexture&&s.push(n.assignTexture(o,"map",l.baseColorTexture,_g)),o.metalness=void 0!==l.metallicFactor?l.metallicFactor:1,o.roughness=void 0!==l.roughnessFactor?l.roughnessFactor:1,void 0!==l.metallicRoughnessTexture&&(s.push(n.assignTexture(o,"metalnessMap",l.metallicRoughnessTexture)),s.push(n.assignTexture(o,"roughnessMap",l.metallicRoughnessTexture))),t=this._invokeOne((function(t){return t.getMaterialType&&t.getMaterialType(e)})),s.push(Promise.all(this._invokeAll((function(t){return t.extendMaterialParams&&t.extendMaterialParams(e,o)}))))}!0===a.doubleSided&&(o.side=xe);var h=a.alphaMode||ly;if(h===hy?(o.transparent=!0,o.depthWrite=!1):(o.transparent=!1,h===cy&&(o.alphaTest=void 0!==a.alphaCutoff?a.alphaCutoff:.5)),void 0!==a.normalTexture&&t!==fo&&(s.push(n.assignTexture(o,"normalMap",a.normalTexture)),o.normalScale=new ii(1,1),void 0!==a.normalTexture.scale)){var d=a.normalTexture.scale;o.normalScale.set(d,d)}if(void 0!==a.occlusionTexture&&t!==fo&&(s.push(n.assignTexture(o,"aoMap",a.occlusionTexture)),void 0!==a.occlusionTexture.strength&&(o.aoMapIntensity=a.occlusionTexture.strength)),void 0!==a.emissiveFactor&&t!==fo){var f=a.emissiveFactor;o.emissive=(new uo).setRGB(f[0],f[1],f[2],wg)}return void 0!==a.emissiveTexture&&t!==fo&&s.push(n.assignTexture(o,"emissiveMap",a.emissiveTexture,_g)),Promise.all(s).then((function(){var r=new t(o);return a.name&&(r.name=a.name),py(r,a),n.associations.set(r,{materials:e}),a.extensions&&fy(i,r,a),r}))}},{key:"createUniqueName",value:function(e){var t=AA.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}},{key:"loadGeometries",value:function(e){var t=this,n=this.extensions,r=this.primitiveCache;function i(e){return n[kg.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(e,t).then((function(n){return xy(n,e,t)}))}for(var a=[],o=0,s=e.length;o<s;o++){var u=e[o],l=vy(u),c=r[l];if(c)a.push(c.promise);else{var h=void 0;h=u.extensions&&u.extensions[kg.KHR_DRACO_MESH_COMPRESSION]?i(u):xy(new Fo,u,t),r[l]={primitive:u,promise:h},a.push(h)}}return Promise.all(a)}},{key:"loadMesh",value:function(e){for(var t=this,n=this.json,r=this.extensions,i=n.meshes[e],a=i.primitives,o=[],s=0,u=a.length;s<u;s++){var l=void 0===a[s].material?dy(this.cache):this.getDependency("material",a[s].material);o.push(l)}return o.push(t.loadGeometries(a)),Promise.all(o).then((function(n){for(var o=n.slice(0,n.length-1),s=n[n.length-1],u=[],l=0,c=s.length;l<c;l++){var h=s[l],d=a[l],f=void 0,p=o[l];if(d.mode===ty.TRIANGLES||d.mode===ty.TRIANGLE_STRIP||d.mode===ty.TRIANGLE_FAN||void 0===d.mode)!0===(f=!0===i.isSkinnedMesh?new Wc(h,p):new Jo(h,p)).isSkinnedMesh&&f.normalizeSkinWeights(),d.mode===ty.TRIANGLE_STRIP?f.geometry=yg(f.geometry,Jn):d.mode===ty.TRIANGLE_FAN&&(f.geometry=yg(f.geometry,Kn));else if(d.mode===ty.LINES)f=new Oh(h,p);else if(d.mode===ty.LINE_STRIP)f=new Nh(h,p);else if(d.mode===ty.LINE_LOOP)f=new Fh(h,p);else{if(d.mode!==ty.POINTS)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+d.mode);f=new Vh(h,p)}Object.keys(f.geometry.morphAttributes).length>0&&Ay(f,i),f.name=t.createUniqueName(i.name||"mesh_"+e),py(f,i),d.extensions&&fy(r,f,d),t.assignFinalMaterial(f),u.push(f)}for(var A=0,v=u.length;A<v;A++)t.associations.set(u[A],{meshes:e,primitives:A});if(1===u.length)return i.extensions&&fy(r,u[0],i),u[0];var m=new nc;i.extensions&&fy(r,m,i),t.associations.set(m,{meshes:e});for(var g=0,y=u.length;g<y;g++)m.add(u[g]);return m}))}},{key:"loadCamera",value:function(e){var t,n=this.json.cameras[e],r=n[n.type];if(r)return"perspective"===n.type?t=new us(ri.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):"orthographic"===n.type&&(t=new Ds(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),n.name&&(t.name=this.createUniqueName(n.name)),py(t,n),Promise.resolve(t);console.warn("THREE.GLTFLoader: Missing camera parameters.")}},{key:"loadSkin",value:function(e){for(var t=this.json.skins[e],n=[],r=0,i=t.joints.length;r<i;r++)n.push(this._loadNodeShallow(t.joints[r]));return void 0!==t.inverseBindMatrices?n.push(this.getDependency("accessor",t.inverseBindMatrices)):n.push(null),Promise.all(n).then((function(e){for(var n=e.pop(),r=e,i=[],a=[],o=0,s=r.length;o<s;o++){var u=r[o];if(u){i.push(u);var l=new va;null!==n&&l.fromArray(n.array,16*o),a.push(l)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[o])}return new Kc(i,a)}))}},{key:"loadAnimation",value:function(e){for(var t=this.json,n=this,r=t.animations[e],i=r.name?r.name:"animation_"+e,a=[],o=[],s=[],u=[],l=[],c=0,h=r.channels.length;c<h;c++){var d=r.channels[c],f=r.samplers[d.sampler],p=d.target,A=p.node,v=void 0!==r.parameters?r.parameters[f.input]:f.input,m=void 0!==r.parameters?r.parameters[f.output]:f.output;void 0!==p.node&&(a.push(this.getDependency("node",A)),o.push(this.getDependency("accessor",v)),s.push(this.getDependency("accessor",m)),u.push(f),l.push(p))}return Promise.all([Promise.all(a),Promise.all(o),Promise.all(s),Promise.all(u),Promise.all(l)]).then((function(e){for(var t=e[0],r=e[1],a=e[2],o=e[3],s=e[4],u=[],l=0,c=t.length;l<c;l++){var h=t[l],d=r[l],f=a[l],p=o[l],A=s[l];if(void 0!==h){h.updateMatrix&&h.updateMatrix();var v=n._createAnimationTracks(h,d,f,p,A);if(v)for(var m=0;m<v.length;m++)u.push(v[m])}}return new Kf(i,void 0,u)}))}},{key:"createNodeMesh",value:function(e){var t=this.json,n=this,r=t.nodes[e];return void 0===r.mesh?null:n.getDependency("mesh",r.mesh).then((function(e){var t=n._getNodeRef(n.meshCache,r.mesh,e);return void 0!==r.weights&&t.traverse((function(e){if(e.isMesh)for(var t=0,n=r.weights.length;t<n;t++)e.morphTargetInfluences[t]=r.weights[t]})),t}))}},{key:"loadNode",value:function(e){for(var t=this,n=this.json.nodes[e],r=t._loadNodeShallow(e),i=[],a=n.children||[],o=0,s=a.length;o<s;o++)i.push(t.getDependency("node",a[o]));var u=void 0===n.skin?Promise.resolve(null):t.getDependency("skin",n.skin);return Promise.all([r,Promise.all(i),u]).then((function(e){var t=e[0],n=e[1],r=e[2];null!==r&&t.traverse((function(e){e.isSkinnedMesh&&e.bind(r,yy)}));for(var i=0,a=n.length;i<a;i++)t.add(n[i]);return t}))}},{key:"_loadNodeShallow",value:function(e){var t=this.json,n=this.extensions,r=this;if(void 0!==this.nodeCache[e])return this.nodeCache[e];var i=t.nodes[e],a=i.name?r.createUniqueName(i.name):"",o=[],s=r._invokeOne((function(t){return t.createNodeMesh&&t.createNodeMesh(e)}));return s&&o.push(s),void 0!==i.camera&&o.push(r.getDependency("camera",i.camera).then((function(e){return r._getNodeRef(r.cameraCache,i.camera,e)}))),r._invokeAll((function(t){return t.createNodeAttachment&&t.createNodeAttachment(e)})).forEach((function(e){o.push(e)})),this.nodeCache[e]=Promise.all(o).then((function(t){var o;if((o=!0===i.isBone?new Xc:t.length>1?new nc:1===t.length?t[0]:new Ha)!==t[0])for(var s=0,u=t.length;s<u;s++)o.add(t[s]);if(i.name&&(o.userData.name=i.name,o.name=a),py(o,i),i.extensions&&fy(n,o,i),void 0!==i.matrix){var l=new va;l.fromArray(i.matrix),o.applyMatrix4(l)}else void 0!==i.translation&&o.position.fromArray(i.translation),void 0!==i.rotation&&o.quaternion.fromArray(i.rotation),void 0!==i.scale&&o.scale.fromArray(i.scale);return r.associations.has(o)||r.associations.set(o,{}),r.associations.get(o).nodes=e,o})),this.nodeCache[e]}},{key:"loadScene",value:function(e){var t=this.extensions,n=this.json.scenes[e],r=this,i=new nc;n.name&&(i.name=r.createUniqueName(n.name)),py(i,n),n.extensions&&fy(t,i,n);for(var a=n.nodes||[],o=[],s=0,u=a.length;s<u;s++)o.push(r.getDependency("node",a[s]));return Promise.all(o).then((function(e){for(var t=0,n=e.length;t<n;t++)i.add(e[t]);return r.associations=function(e){var t,n=new Map,i=ee(r.associations);try{for(i.s();!(t=i.n()).done;){var a=l(t.value,2),o=a[0],s=a[1];(o instanceof ho||o instanceof Bi)&&n.set(o,s)}}catch(u){i.e(u)}finally{i.f()}return e.traverse((function(e){var t=r.associations.get(e);null!=t&&n.set(e,t)})),n}(i),i}))}},{key:"_createAnimationTracks",value:function(e,t,n,r,i){var a,o=[],s=e.name?e.name:e.uuid,u=[];switch(sy[i.path]===sy.weights?e.traverse((function(e){e.morphTargetInfluences&&u.push(e.name?e.name:e.uuid)})):u.push(s),sy[i.path]){case sy.weights:a=Wf;break;case sy.rotation:a=Yf;break;case sy.position:case sy.scale:a=Jf;break;default:if(1===n.itemSize)a=Wf;else a=Jf}for(var l=void 0!==r.interpolation?uy[r.interpolation]:qn,c=this._getArrayFromAccessor(n),h=0,d=u.length;h<d;h++){var f=new a(u[h]+"."+sy[i.path],t.array,c,l);"CUBICSPLINE"===r.interpolation&&this._createCubicSplineTrackInterpolant(f),o.push(f)}return o}},{key:"_getArrayFromAccessor",value:function(e){var t=e.array;if(e.normalized){for(var n=gy(t.constructor),r=new Float32Array(t.length),i=0,a=t.length;i<a;i++)r[i]=t[i]*n;t=r}return t}},{key:"_createCubicSplineTrackInterpolant",value:function(e){e.createInterpolant=function(e){return new(this instanceof Yf?ey:Zg)(this.times,this.values,this.getValueSize()/3,e)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}]),e}();function xy(e,t,n){var r=t.attributes,i=[];function a(t,r){return n.getDependency("accessor",t).then((function(t){e.setAttribute(r,t)}))}for(var o in r){var s=oy[o]||o.toLowerCase();s in e.attributes||i.push(a(r[o],s))}if(void 0!==t.indices&&!e.index){var u=n.getDependency("accessor",t.indices).then((function(t){e.setIndex(t)}));i.push(u)}return py(e,t),function(e,t,n){var r=t.attributes,i=new Hi;if(void 0!==r.POSITION){var a=n.json.accessors[r.POSITION],o=a.min,s=a.max;if(void 0!==o&&void 0!==s){if(i.set(new zi(o[0],o[1],o[2]),new zi(s[0],s[1],s[2])),a.normalized){var u=gy(ny[a.componentType]);i.min.multiplyScalar(u),i.max.multiplyScalar(u)}var l=t.targets;if(void 0!==l){for(var c=new zi,h=new zi,d=0,f=l.length;d<f;d++){var p=l[d];if(void 0!==p.POSITION){var A=n.json.accessors[p.POSITION],v=A.min,m=A.max;if(void 0!==v&&void 0!==m){if(h.setX(Math.max(Math.abs(v[0]),Math.abs(m[0]))),h.setY(Math.max(Math.abs(v[1]),Math.abs(m[1]))),h.setZ(Math.max(Math.abs(v[2]),Math.abs(m[2]))),A.normalized){var g=gy(ny[A.componentType]);h.multiplyScalar(g)}c.max(h)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}i.expandByVector(c)}e.boundingBox=i;var y=new sa;i.getCenter(y.center),y.radius=i.min.distanceTo(i.max)/2,e.boundingSphere=y}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}(e,t,n),Promise.all(i).then((function(){return void 0!==t.targets?function(e,t,n){for(var r=!1,i=!1,a=!1,o=0,s=t.length;o<s;o++){var u=t[o];if(void 0!==u.POSITION&&(r=!0),void 0!==u.NORMAL&&(i=!0),void 0!==u.COLOR_0&&(a=!0),r&&i&&a)break}if(!r&&!i&&!a)return Promise.resolve(e);for(var l=[],c=[],h=[],d=0,f=t.length;d<f;d++){var p=t[d];if(r){var A=void 0!==p.POSITION?n.getDependency("accessor",p.POSITION):e.attributes.position;l.push(A)}if(i){var v=void 0!==p.NORMAL?n.getDependency("accessor",p.NORMAL):e.attributes.normal;c.push(v)}if(a){var m=void 0!==p.COLOR_0?n.getDependency("accessor",p.COLOR_0):e.attributes.color;h.push(m)}}return Promise.all([Promise.all(l),Promise.all(c),Promise.all(h)]).then((function(t){var n=t[0],o=t[1],s=t[2];return r&&(e.morphAttributes.position=n),i&&(e.morphAttributes.normal=o),a&&(e.morphAttributes.color=s),e.morphTargetsRelative=!0,e}))}(e,t.targets,n):e}))}var _y=null,wy="https://www.gstatic.com/draco/versioned/decoders/1.5.5/";function Sy(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0;return function(r){n&&n(r),e&&(_y||(_y=new vg),_y.setDecoderPath("string"===typeof e?e:wy),r.setDRACOLoader(_y)),t&&r.setMeshoptDecoder(gg())}}var My=function(e,t,n,r){return Mm(Sg,e,Sy(t,n,r))};My.preload=function(e,t,n,r){return Mm.preload(Sg,e,Sy(t,n,r))},My.clear=function(e){return Mm.clear(Sg,e)},My.setDecoderPath=function(e){wy=e};var ky=Uint8Array,Ty=Uint16Array,Ey=Uint32Array,Cy=new ky([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Ry=new ky([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),By=new ky([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Py=function(e,t){for(var n=new Ty(31),r=0;r<31;++r)n[r]=t+=1<<e[r-1];var i=new Ey(n[30]);for(r=1;r<30;++r)for(var a=n[r];a<n[r+1];++a)i[a]=a-n[r]<<5|r;return[n,i]},Ny=Py(Cy,2),Iy=Ny[0],Dy=Ny[1];Iy[28]=258,Dy[258]=28;for(var Ly=Py(Ry,0),Oy=Ly[0],Fy=(Ly[1],new Ty(32768)),Uy=0;Uy<32768;++Uy){var zy=(43690&Uy)>>>1|(21845&Uy)<<1;zy=(61680&(zy=(52428&zy)>>>2|(13107&zy)<<2))>>>4|(3855&zy)<<4,Fy[Uy]=((65280&zy)>>>8|(255&zy)<<8)>>>1}var Gy=function(e,t,n){for(var r=e.length,i=0,a=new Ty(t);i<r;++i)++a[e[i]-1];var o,s=new Ty(t);for(i=0;i<t;++i)s[i]=s[i-1]+a[i-1]<<1;if(n){o=new Ty(1<<t);var u=15-t;for(i=0;i<r;++i)if(e[i])for(var l=i<<4|e[i],c=t-e[i],h=s[e[i]-1]++<<c,d=h|(1<<c)-1;h<=d;++h)o[Fy[h]>>>u]=l}else for(o=new Ty(r),i=0;i<r;++i)e[i]&&(o[i]=Fy[s[e[i]-1]++]>>>15-e[i]);return o},qy=new ky(288);for(Uy=0;Uy<144;++Uy)qy[Uy]=8;for(Uy=144;Uy<256;++Uy)qy[Uy]=9;for(Uy=256;Uy<280;++Uy)qy[Uy]=7;for(Uy=280;Uy<288;++Uy)qy[Uy]=8;var Hy=new ky(32);for(Uy=0;Uy<32;++Uy)Hy[Uy]=5;var Vy=Gy(qy,9,1),jy=Gy(Hy,5,1),Wy=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},Xy=function(e,t,n){var r=t/8|0;return(e[r]|e[r+1]<<8)>>(7&t)&n},Yy=function(e,t){var n=t/8|0;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>(7&t)},Qy=function(e){return(e/8|0)+(7&e&&1)},Jy=function(e,t,n){(null==t||t<0)&&(t=0),(null==n||n>e.length)&&(n=e.length);var r=new(e instanceof Ty?Ty:e instanceof Ey?Ey:ky)(n-t);return r.set(e.subarray(t,n)),r},Ky=function(e,t,n){var r=e.length;if(!r||n&&!n.l&&r<5)return t||new ky(0);var i=!t||n,a=!n||n.i;n||(n={}),t||(t=new ky(3*r));var o=function(e){var n=t.length;if(e>n){var r=new ky(Math.max(2*n,e));r.set(t),t=r}},s=n.f||0,u=n.p||0,l=n.b||0,c=n.l,h=n.d,d=n.m,f=n.n,p=8*r;do{if(!c){n.f=s=Xy(e,u,1);var A=Xy(e,u+1,3);if(u+=3,!A){var v=e[(T=Qy(u)+4)-4]|e[T-3]<<8,m=T+v;if(m>r){if(a)throw"unexpected EOF";break}i&&o(l+v),t.set(e.subarray(T,m),l),n.b=l+=v,n.p=u=8*m;continue}if(1==A)c=Vy,h=jy,d=9,f=5;else{if(2!=A)throw"invalid block type";var g=Xy(e,u,31)+257,y=Xy(e,u+10,15)+4,b=g+Xy(e,u+5,31)+1;u+=14;for(var x=new ky(b),_=new ky(19),w=0;w<y;++w)_[By[w]]=Xy(e,u+3*w,7);u+=3*y;var S=Wy(_),M=(1<<S)-1,k=Gy(_,S,1);for(w=0;w<b;){var T,E=k[Xy(e,u,M)];if(u+=15&E,(T=E>>>4)<16)x[w++]=T;else{var C=0,R=0;for(16==T?(R=3+Xy(e,u,3),u+=2,C=x[w-1]):17==T?(R=3+Xy(e,u,7),u+=3):18==T&&(R=11+Xy(e,u,127),u+=7);R--;)x[w++]=C}}var B=x.subarray(0,g),P=x.subarray(g);d=Wy(B),f=Wy(P),c=Gy(B,d,1),h=Gy(P,f,1)}if(u>p){if(a)throw"unexpected EOF";break}}i&&o(l+131072);for(var N=(1<<d)-1,I=(1<<f)-1,D=u;;D=u){var L=(C=c[Yy(e,u)&N])>>>4;if((u+=15&C)>p){if(a)throw"unexpected EOF";break}if(!C)throw"invalid length/literal";if(L<256)t[l++]=L;else{if(256==L){D=u,c=null;break}var O=L-254;if(L>264){var F=Cy[w=L-257];O=Xy(e,u,(1<<F)-1)+Iy[w],u+=F}var U=h[Yy(e,u)&I],z=U>>>4;if(!U)throw"invalid distance";u+=15&U;P=Oy[z];if(z>3){F=Ry[z];P+=Yy(e,u)&(1<<F)-1,u+=F}if(u>p){if(a)throw"unexpected EOF";break}i&&o(l+131072);for(var G=l+O;l<G;l+=4)t[l]=t[l-P],t[l+1]=t[l+1-P],t[l+2]=t[l+2-P],t[l+3]=t[l+3-P];l=G}}n.l=c,n.p=D,n.b=l,c&&(s=1,n.m=d,n.d=h,n.n=f)}while(!s);return l==t.length?t:Jy(t,0,l)},Zy=new ky(0),$y=function(e){if(8!=(15&e[0])||e[0]>>>4>7||(e[0]<<8|e[1])%31)throw"invalid zlib data";if(32&e[1])throw"invalid zlib data: preset dictionaries not supported"};function eb(e,t){return Ky(($y(e),e.subarray(2,-4)),t)}var tb="undefined"!=typeof TextDecoder&&new TextDecoder;try{tb.decode(Zy,{stream:!0}),1}catch(_5){}function nb(e,t,n){var r=n.length-e-1;if(t>=n[r])return r-1;if(t<=n[e])return e;for(var i=e,a=r,o=Math.floor((i+a)/2);t<n[o]||t>=n[o+1];)t<n[o]?a=o:i=o,o=Math.floor((i+a)/2);return o}function rb(e,t,n,r){var i=[],a=[],o=[];i[0]=1;for(var s=1;s<=n;++s){a[s]=t-r[e+1-s],o[s]=r[e+s]-t;for(var u=0,l=0;l<s;++l){var c=o[l+1],h=a[s-l],d=i[l]/(c+h);i[l]=u+c*d,u=h*d}i[s]=u}return i}function ib(e,t){for(var n=1,r=2;r<=e;++r)n*=r;for(var i=1,a=2;a<=t;++a)i*=a;for(var o=2;o<=e-t;++o)i*=o;return n/i}function ab(e,t,n,r,i){var a=function(e,t,n,r,i){for(var a=i<e?i:e,o=[],s=nb(e,r,t),u=function(e,t,n,r,i){for(var a=[],o=0;o<=n;++o)a[o]=0;for(var s=[],u=0;u<=r;++u)s[u]=a.slice(0);for(var l=[],c=0;c<=n;++c)l[c]=a.slice(0);l[0][0]=1;for(var h=a.slice(0),d=a.slice(0),f=1;f<=n;++f){h[f]=t-i[e+1-f],d[f]=i[e+f]-t;for(var p=0,A=0;A<f;++A){var v=d[A+1],m=h[f-A];l[f][A]=v+m;var g=l[A][f-1]/l[f][A];l[A][f]=p+v*g,p=m*g}l[f][f]=p}for(var y=0;y<=n;++y)s[0][y]=l[y][n];for(var b=0;b<=n;++b){for(var x=0,_=1,w=[],S=0;S<=n;++S)w[S]=a.slice(0);w[0][0]=1;for(var M=1;M<=r;++M){var k=0,T=b-M,E=n-M;b>=M&&(w[_][0]=w[x][0]/l[E+1][T],k=w[_][0]*l[T][E]);for(var C=b-1<=E?M-1:n-b,R=T>=-1?1:-T;R<=C;++R)w[_][R]=(w[x][R]-w[x][R-1])/l[E+1][T+R],k+=w[_][R]*l[T+R][E];b<=E&&(w[_][M]=-w[x][M-1]/l[E+1][b],k+=w[_][M]*l[b][E]),s[M][b]=k;var B=x;x=_,_=B}}for(var P=n,N=1;N<=r;++N){for(var I=0;I<=n;++I)s[N][I]*=P;P*=n-N}return s}(s,r,e,a,t),l=[],c=0;c<n.length;++c){var h=n[c].clone(),d=h.w;h.x*=d,h.y*=d,h.z*=d,l[c]=h}for(var f=0;f<=a;++f){for(var p=l[s-e].clone().multiplyScalar(u[f][0]),A=1;A<=e;++A)p.add(l[s-e+A].clone().multiplyScalar(u[f][A]));o[f]=p}for(var v=a+1;v<=i+1;++v)o[v]=new Pi(0,0,0);return o}(e,t,n,r,i);return function(e){for(var t=e.length,n=[],r=[],i=0;i<t;++i){var a=e[i];n[i]=new zi(a.x,a.y,a.z),r[i]=a.w}for(var o=[],s=0;s<t;++s){for(var u=n[s].clone(),l=1;l<=s;++l)u.sub(o[s-l].clone().multiplyScalar(ib(s,l)*r[l]));o[s]=u.divideScalar(r[0])}return o}(a)}var ob,sb,ub,lb=function(e){Y(n,e);var t=$(n);function n(e,r,i,a,o){var s;V(this,n),(s=t.call(this)).degree=e,s.knots=r,s.controlPoints=[],s.startKnot=a||0,s.endKnot=o||s.knots.length-1;for(var u=0;u<i.length;++u){var l=i[u];s.controlPoints[u]=new Pi(l.x,l.y,l.z,l.w)}return s}return W(n,[{key:"getPoint",value:function(e,t){var n=t||new zi,r=this.knots[this.startKnot]+e*(this.knots[this.endKnot]-this.knots[this.startKnot]),i=function(e,t,n,r){for(var i=nb(e,r,t),a=rb(i,r,e,t),o=new Pi(0,0,0,0),s=0;s<=e;++s){var u=n[i-e+s],l=a[s],c=u.w*l;o.x+=u.x*c,o.y+=u.y*c,o.z+=u.z*c,o.w+=u.w*l}return o}(this.degree,this.knots,this.controlPoints,r);return 1!=i.w&&i.divideScalar(i.w),n.set(i.x,i.y,i.z)}},{key:"getTangent",value:function(e,t){var n=t||new zi,r=this.knots[0]+e*(this.knots[this.knots.length-1]-this.knots[0]),i=ab(this.degree,this.knots,this.controlPoints,r,1);return n.copy(i[1]).normalize(),n}}]),n}(Zh),cb=bg>=125?"uv1":"uv2",hb=function(e){Y(n,e);var t=$(n);function n(e){return V(this,n),t.call(this,e)}return W(n,[{key:"load",value:function(e,t,n,r){var i=this,a=""===i.path?Np.extractUrlBase(e):i.path,o=new op(this.manager);o.setPath(i.path),o.setResponseType("arraybuffer"),o.setRequestHeader(i.requestHeader),o.setWithCredentials(i.withCredentials),o.load(e,(function(n){try{t(i.parse(n,a))}catch(_5){r?r(_5):console.error(_5),i.manager.itemError(e)}}),n,r)}},{key:"parse",value:function(e,t){if(function(e){var t="Kaydara FBX Binary  \0";return e.byteLength>=t.length&&t===Eb(e,0,t.length)}(e))ob=(new vb).parse(e);else{var n=Eb(e);if(!function(e){var t=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"],n=0;function r(t){var r=e[t-1];return e=e.slice(n+t),n++,r}for(var i=0;i<t.length;++i){if(r(1)===t[i])return!1}return!0}(n))throw new Error("THREE.FBXLoader: Unknown format.");if(yb(n)<7e3)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+yb(n));ob=(new Ab).parse(n)}var r=new dp(this.manager).setPath(this.resourcePath||t).setCrossOrigin(this.crossOrigin);return new db(r,this.manager).parse(ob)}}]),n}(np),db=function(){function e(t,n){V(this,e),this.textureLoader=t,this.manager=n}return W(e,[{key:"parse",value:function(){sb=this.parseConnections();var e=this.parseImages(),t=this.parseTextures(e),n=this.parseMaterials(t),r=this.parseDeformers(),i=(new fb).parse(r);return this.parseScene(r,i,n),ub}},{key:"parseConnections",value:function(){var e=new Map;"Connections"in ob&&ob.Connections.connections.forEach((function(t){var n=t[0],r=t[1],i=t[2];e.has(n)||e.set(n,{parents:[],children:[]});var a={ID:r,relationship:i};e.get(n).parents.push(a),e.has(r)||e.set(r,{parents:[],children:[]});var o={ID:n,relationship:i};e.get(r).children.push(o)}));return e}},{key:"parseImages",value:function(){var e={},t={};if("Video"in ob.Objects){var n=ob.Objects.Video;for(var r in n){var i=n[r];if(e[parseInt(r)]=i.RelativeFilename||i.Filename,"Content"in i){var a=i.Content instanceof ArrayBuffer&&i.Content.byteLength>0,o="string"===typeof i.Content&&""!==i.Content;if(a||o){var s=this.parseImage(n[r]);t[i.RelativeFilename||i.Filename]=s}}}}for(var u in e){var l=e[u];void 0!==t[l]?e[u]=t[l]:e[u]=e[u].split("\\").pop()}return e}},{key:"parseImage",value:function(e){var t,n=e.Content,r=e.RelativeFilename||e.Filename,i=r.slice(r.lastIndexOf(".")+1).toLowerCase();switch(i){case"bmp":t="image/bmp";break;case"jpg":case"jpeg":t="image/jpeg";break;case"png":t="image/png";break;case"tif":t="image/tiff";break;case"tga":null===this.manager.getHandler(".tga")&&console.warn("FBXLoader: TGA loader not found, skipping ",r),t="image/tga";break;default:return void console.warn('FBXLoader: Image type "'+i+'" is not supported.')}if("string"===typeof n)return"data:"+t+";base64,"+n;var a=new Uint8Array(n);return window.URL.createObjectURL(new Blob([a],{type:t}))}},{key:"parseTextures",value:function(e){var t=new Map;if("Texture"in ob.Objects){var n=ob.Objects.Texture;for(var r in n){var i=this.parseTexture(n[r],e);t.set(parseInt(r),i)}}return t}},{key:"parseTexture",value:function(e,t){var n=this.loadTexture(e,t);n.ID=e.id,n.name=e.attrName;var r=e.WrapModeU,i=e.WrapModeV,a=void 0!==r?r.value:0,o=void 0!==i?i.value:0;if(n.wrapS=0===a?xt:_t,n.wrapT=0===o?xt:_t,"Scaling"in e){var s=e.Scaling.value;n.repeat.x=s[0],n.repeat.y=s[1]}return n}},{key:"loadTexture",value:function(e,t){var n,r,i=this.textureLoader.path,a=sb.get(e.id).children;void 0!==a&&a.length>0&&void 0!==t[a[0].ID]&&(0!==(n=t[a[0].ID]).indexOf("blob:")&&0!==n.indexOf("data:")||this.textureLoader.setPath(void 0));var o=e.FileName.slice(-3).toLowerCase();if("tga"===o){var s=this.manager.getHandler(".tga");null===s?(console.warn("FBXLoader: TGA loader not found, creating placeholder texture for",e.RelativeFilename),r=new Bi):(s.setPath(this.textureLoader.path),r=s.load(n))}else"psd"===o?(console.warn("FBXLoader: PSD textures are not supported, creating placeholder texture for",e.RelativeFilename),r=new Bi):r=this.textureLoader.load(n);return this.textureLoader.setPath(i),r}},{key:"parseMaterials",value:function(e){var t=new Map;if("Material"in ob.Objects){var n=ob.Objects.Material;for(var r in n){var i=this.parseMaterial(n[r],e);null!==i&&t.set(parseInt(r),i)}}return t}},{key:"parseMaterial",value:function(e,t){var n=e.id,r=e.attrName,i=e.ShadingModel;if("object"===typeof i&&(i=i.value),!sb.has(n))return null;var a,o=this.parseParameters(e,t,n);switch(i.toLowerCase()){case"phong":a=new Tf;break;case"lambert":a=new Rf;break;default:console.warn('THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',i),a=new Tf}return a.setValues(o),a.name=r,a}},{key:"parseParameters",value:function(e,t,n){var r={};e.BumpFactor&&(r.bumpScale=e.BumpFactor.value),e.Diffuse?r.color=(new uo).fromArray(e.Diffuse.value):!e.DiffuseColor||"Color"!==e.DiffuseColor.type&&"ColorRGB"!==e.DiffuseColor.type||(r.color=(new uo).fromArray(e.DiffuseColor.value)),e.DisplacementFactor&&(r.displacementScale=e.DisplacementFactor.value),e.Emissive?r.emissive=(new uo).fromArray(e.Emissive.value):!e.EmissiveColor||"Color"!==e.EmissiveColor.type&&"ColorRGB"!==e.EmissiveColor.type||(r.emissive=(new uo).fromArray(e.EmissiveColor.value)),e.EmissiveFactor&&(r.emissiveIntensity=parseFloat(e.EmissiveFactor.value)),e.Opacity&&(r.opacity=parseFloat(e.Opacity.value)),r.opacity<1&&(r.transparent=!0),e.ReflectionFactor&&(r.reflectivity=e.ReflectionFactor.value),e.Shininess&&(r.shininess=e.Shininess.value),e.Specular?r.specular=(new uo).fromArray(e.Specular.value):e.SpecularColor&&"Color"===e.SpecularColor.type&&(r.specular=(new uo).fromArray(e.SpecularColor.value));var i=this;return sb.get(n).children.forEach((function(e){var n=e.relationship;switch(n){case"Bump":r.bumpMap=i.getTexture(t,e.ID);break;case"Maya|TEX_ao_map":r.aoMap=i.getTexture(t,e.ID);break;case"DiffuseColor":case"Maya|TEX_color_map":r.map=i.getTexture(t,e.ID),void 0!==r.map&&("colorSpace"in r.map?r.map.colorSpace="srgb":r.map.encoding=3001);break;case"DisplacementColor":r.displacementMap=i.getTexture(t,e.ID);break;case"EmissiveColor":r.emissiveMap=i.getTexture(t,e.ID),void 0!==r.emissiveMap&&("colorSpace"in r.emissiveMap?r.emissiveMap.colorSpace="srgb":r.emissiveMap.encoding=3001);break;case"NormalMap":case"Maya|TEX_normal_map":r.normalMap=i.getTexture(t,e.ID);break;case"ReflectionColor":r.envMap=i.getTexture(t,e.ID),void 0!==r.envMap&&(r.envMap.mapping=gt,"colorSpace"in r.envMap?r.envMap.colorSpace="srgb":r.envMap.encoding=3001);break;case"SpecularColor":r.specularMap=i.getTexture(t,e.ID),void 0!==r.specularMap&&("colorSpace"in r.specularMap?r.specularMap.colorSpace="srgb":r.specularMap.encoding=3001);break;case"TransparentColor":case"TransparencyFactor":r.alphaMap=i.getTexture(t,e.ID),r.transparent=!0;break;default:console.warn("THREE.FBXLoader: %s map is not supported in three.js, skipping texture.",n)}})),r}},{key:"getTexture",value:function(e,t){return"LayeredTexture"in ob.Objects&&t in ob.Objects.LayeredTexture&&(console.warn("THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."),t=sb.get(t).children[0].ID),e.get(t)}},{key:"parseDeformers",value:function(){var e={},t={};if("Deformer"in ob.Objects){var n=ob.Objects.Deformer;for(var r in n){var i=n[r],a=sb.get(parseInt(r));if("Skin"===i.attrType){var o=this.parseSkeleton(a,n);o.ID=r,a.parents.length>1&&console.warn("THREE.FBXLoader: skeleton attached to more than one geometry is not supported."),o.geometryID=a.parents[0].ID,e[r]=o}else if("BlendShape"===i.attrType){var s={id:r};s.rawTargets=this.parseMorphTargets(a,n),s.id=r,a.parents.length>1&&console.warn("THREE.FBXLoader: morph target attached to more than one geometry is not supported."),t[r]=s}}}return{skeletons:e,morphTargets:t}}},{key:"parseSkeleton",value:function(e,t){var n=[];return e.children.forEach((function(e){var r=t[e.ID];if("Cluster"===r.attrType){var i={ID:e.ID,indices:[],weights:[],transformLink:(new va).fromArray(r.TransformLink.a)};"Indexes"in r&&(i.indices=r.Indexes.a,i.weights=r.Weights.a),n.push(i)}})),{rawBones:n,bones:[]}}},{key:"parseMorphTargets",value:function(e,t){for(var n=[],r=0;r<e.children.length;r++){var i=e.children[r],a=t[i.ID],o={name:a.attrName,initialWeight:a.DeformPercent,id:a.id,fullWeights:a.FullWeights.a};if("BlendShapeChannel"!==a.attrType)return;o.geoID=sb.get(parseInt(i.ID)).children.filter((function(e){return void 0===e.relationship}))[0].ID,n.push(o)}return n}},{key:"parseScene",value:function(e,t,n){ub=new nc;var r=this.parseModels(e.skeletons,t,n),i=ob.Objects.Model,a=this;r.forEach((function(e){var t=i[e.ID];a.setLookAtProperties(e,t),sb.get(e.ID).parents.forEach((function(t){var n=r.get(t.ID);void 0!==n&&n.add(e)})),null===e.parent&&ub.add(e)})),this.bindSkeleton(e.skeletons,t,r),this.createAmbientLight(),ub.traverse((function(e){if(e.userData.transformData){e.parent&&(e.userData.transformData.parentMatrix=e.parent.matrix,e.userData.transformData.parentMatrixWorld=e.parent.matrixWorld);var t=Mb(e.userData.transformData);e.applyMatrix4(t),e.updateWorldMatrix()}}));var o=(new pb).parse();1===ub.children.length&&ub.children[0].isGroup&&(ub.children[0].animations=o,ub=ub.children[0]),ub.animations=o}},{key:"parseModels",value:function(e,t,n){var r=new Map,i=ob.Objects.Model;for(var a in i){var o=parseInt(a),s=i[a],u=sb.get(o),l=this.buildSkeleton(u,e,o,s.attrName);if(!l){switch(s.attrType){case"Camera":l=this.createCamera(u);break;case"Light":l=this.createLight(u);break;case"Mesh":l=this.createMesh(u,t,n);break;case"NurbsCurve":l=this.createCurve(u,t);break;case"LimbNode":case"Root":l=new Xc;break;default:l=new nc}l.name=s.attrName?AA.sanitizeNodeName(s.attrName):"",l.ID=o}this.getTransformData(l,s),r.set(o,l)}return r}},{key:"buildSkeleton",value:function(e,t,n,r){var i=null;return e.parents.forEach((function(e){var a=function(){var a=t[o];a.rawBones.forEach((function(t,o){if(t.ID===e.ID){var s=i;(i=new Xc).matrixWorld.copy(t.transformLink),i.name=r?AA.sanitizeNodeName(r):"",i.ID=n,a.bones[o]=i,null!==s&&i.add(s)}}))};for(var o in t)a()})),i}},{key:"createCamera",value:function(e){var t,n;if(e.children.forEach((function(e){var t=ob.Objects.NodeAttribute[e.ID];void 0!==t&&(n=t)})),void 0===n)t=new Ha;else{var r=0;void 0!==n.CameraProjectionType&&1===n.CameraProjectionType.value&&(r=1);var i=1;void 0!==n.NearPlane&&(i=n.NearPlane.value/1e3);var a=1e3;void 0!==n.FarPlane&&(a=n.FarPlane.value/1e3);var o=window.innerWidth,s=window.innerHeight;void 0!==n.AspectWidth&&void 0!==n.AspectHeight&&(o=n.AspectWidth.value,s=n.AspectHeight.value);var u=o/s,l=45;void 0!==n.FieldOfView&&(l=n.FieldOfView.value);var c=n.FocalLength?n.FocalLength.value:null;switch(r){case 0:t=new us(l,u,i,a),null!==c&&t.setFocalLength(c);break;case 1:t=new Ds(-o/2,o/2,s/2,-s/2,i,a);break;default:console.warn("THREE.FBXLoader: Unknown camera type "+r+"."),t=new Ha}}return t}},{key:"createLight",value:function(e){var t,n;if(e.children.forEach((function(e){var t=ob.Objects.NodeAttribute[e.ID];void 0!==t&&(n=t)})),void 0===n)t=new Ha;else{var r;r=void 0===n.LightType?0:n.LightType.value;var i=16777215;void 0!==n.Color&&(i=(new uo).fromArray(n.Color.value));var a=void 0===n.Intensity?1:n.Intensity.value/100;void 0!==n.CastLightOnObject&&0===n.CastLightOnObject.value&&(a=0);var o=0;void 0!==n.FarAttenuationEnd&&(o=void 0!==n.EnableFarAttenuation&&0===n.EnableFarAttenuation.value?0:n.FarAttenuationEnd.value);switch(r){case 0:t=new Mp(i,a,o,1);break;case 1:t=new Tp(i,a);break;case 2:var s=Math.PI/3;void 0!==n.InnerAngle&&(s=ri.degToRad(n.InnerAngle.value));var u=0;void 0!==n.OuterAngle&&(u=ri.degToRad(n.OuterAngle.value),u=Math.max(u,1)),t=new bp(i,a,o,s,u,1);break;default:console.warn("THREE.FBXLoader: Unknown light type "+n.LightType.value+", defaulting to a PointLight."),t=new Mp(i,a)}void 0!==n.CastShadows&&1===n.CastShadows.value&&(t.castShadow=!0)}return t}},{key:"createMesh",value:function(e,t,n){var r,i=null,a=null,o=[];return e.children.forEach((function(e){t.has(e.ID)&&(i=t.get(e.ID)),n.has(e.ID)&&o.push(n.get(e.ID))})),o.length>1?a=o:o.length>0?a=o[0]:(a=new Tf({color:13421772}),o.push(a)),"color"in i.attributes&&o.forEach((function(e){e.vertexColors=!0})),i.FBX_Deformer?(r=new Wc(i,a)).normalizeSkinWeights():r=new Jo(i,a),r}},{key:"createCurve",value:function(e,t){var n=e.children.reduce((function(e,n){return t.has(n.ID)&&(e=t.get(n.ID)),e}),null),r=new Mh({color:3342591,linewidth:1});return new Nh(n,r)}},{key:"getTransformData",value:function(e,t){var n={};"InheritType"in t&&(n.inheritType=parseInt(t.InheritType.value)),n.eulerOrder="RotationOrder"in t?kb(t.RotationOrder.value):"ZYX","Lcl_Translation"in t&&(n.translation=t.Lcl_Translation.value),"PreRotation"in t&&(n.preRotation=t.PreRotation.value),"Lcl_Rotation"in t&&(n.rotation=t.Lcl_Rotation.value),"PostRotation"in t&&(n.postRotation=t.PostRotation.value),"Lcl_Scaling"in t&&(n.scale=t.Lcl_Scaling.value),"ScalingOffset"in t&&(n.scalingOffset=t.ScalingOffset.value),"ScalingPivot"in t&&(n.scalingPivot=t.ScalingPivot.value),"RotationOffset"in t&&(n.rotationOffset=t.RotationOffset.value),"RotationPivot"in t&&(n.rotationPivot=t.RotationPivot.value),e.userData.transformData=n}},{key:"setLookAtProperties",value:function(e,t){"LookAtProperty"in t&&sb.get(e.ID).children.forEach((function(t){if("LookAtProperty"===t.relationship){var n=ob.Objects.Model[t.ID];if("Lcl_Translation"in n){var r=n.Lcl_Translation.value;void 0!==e.target?(e.target.position.fromArray(r),ub.add(e.target)):e.lookAt((new zi).fromArray(r))}}}))}},{key:"bindSkeleton",value:function(e,t,n){var r=this.parsePoseNodes(),i=function(){var i=e[a];sb.get(parseInt(i.ID)).parents.forEach((function(e){if(t.has(e.ID)){var a=e.ID;sb.get(a).parents.forEach((function(e){n.has(e.ID)&&n.get(e.ID).bind(new Kc(i.bones),r[e.ID])}))}}))};for(var a in e)i()}},{key:"parsePoseNodes",value:function(){var e={};if("Pose"in ob.Objects){var t=ob.Objects.Pose;for(var n in t)if("BindPose"===t[n].attrType&&t[n].NbPoseNodes>0){var r=t[n].PoseNode;Array.isArray(r)?r.forEach((function(t){e[t.Node]=(new va).fromArray(t.Matrix.a)})):e[r.Node]=(new va).fromArray(r.Matrix.a)}}return e}},{key:"createAmbientLight",value:function(){if("GlobalSettings"in ob&&"AmbientColor"in ob.GlobalSettings){var e=ob.GlobalSettings.AmbientColor.value,t=e[0],n=e[1],r=e[2];if(0!==t||0!==n||0!==r){var i=new uo(t,n,r);ub.add(new Ep(i,1))}}}}]),e}(),fb=function(){function e(){V(this,e)}return W(e,[{key:"parse",value:function(e){var t=new Map;if("Geometry"in ob.Objects){var n=ob.Objects.Geometry;for(var r in n){var i=sb.get(parseInt(r)),a=this.parseGeometry(i,n[r],e);t.set(parseInt(r),a)}}return t}},{key:"parseGeometry",value:function(e,t,n){switch(t.attrType){case"Mesh":return this.parseMeshGeometry(e,t,n);case"NurbsCurve":return this.parseNurbsGeometry(t)}}},{key:"parseMeshGeometry",value:function(e,t,n){var r=n.skeletons,i=[],a=e.parents.map((function(e){return ob.Objects.Model[e.ID]}));if(0!==a.length){var o=e.children.reduce((function(e,t){return void 0!==r[t.ID]&&(e=r[t.ID]),e}),null);e.children.forEach((function(e){void 0!==n.morphTargets[e.ID]&&i.push(n.morphTargets[e.ID])}));var s=a[0],u={};"RotationOrder"in s&&(u.eulerOrder=kb(s.RotationOrder.value)),"InheritType"in s&&(u.inheritType=parseInt(s.InheritType.value)),"GeometricTranslation"in s&&(u.translation=s.GeometricTranslation.value),"GeometricRotation"in s&&(u.rotation=s.GeometricRotation.value),"GeometricScaling"in s&&(u.scale=s.GeometricScaling.value);var l=Mb(u);return this.genGeometry(t,o,i,l)}}},{key:"genGeometry",value:function(e,t,n,r){var i=new Fo;e.attrName&&(i.name=e.attrName);var a=this.parseGeoNode(e,t),o=this.genBuffers(a),s=new Ro(o.vertex,3);if(s.applyMatrix4(r),i.setAttribute("position",s),o.colors.length>0&&i.setAttribute("color",new Ro(o.colors,3)),t&&(i.setAttribute("skinIndex",new ko(o.weightsIndices,4)),i.setAttribute("skinWeight",new Ro(o.vertexWeights,4)),i.FBX_Deformer=t),o.normal.length>0){var u=(new ai).getNormalMatrix(r),l=new Ro(o.normal,3);l.applyNormalMatrix(u),i.setAttribute("normal",l)}if(o.uvs.forEach((function(e,t){"uv2"===cb&&t++;var n=0===t?"uv":"uv".concat(t);i.setAttribute(n,new Ro(o.uvs[t],2))})),a.material&&"AllSame"!==a.material.mappingType){var c=o.materialIndex[0],h=0;if(o.materialIndex.forEach((function(e,t){e!==c&&(i.addGroup(h,t-h,c),c=e,h=t)})),i.groups.length>0){var d=i.groups[i.groups.length-1],f=d.start+d.count;f!==o.materialIndex.length&&i.addGroup(f,o.materialIndex.length-f,c)}0===i.groups.length&&i.addGroup(0,o.materialIndex.length,o.materialIndex[0])}return this.addMorphTargets(i,e,n,r),i}},{key:"parseGeoNode",value:function(e,t){var n={};if(n.vertexPositions=void 0!==e.Vertices?e.Vertices.a:[],n.vertexIndices=void 0!==e.PolygonVertexIndex?e.PolygonVertexIndex.a:[],e.LayerElementColor&&(n.color=this.parseVertexColors(e.LayerElementColor[0])),e.LayerElementMaterial&&(n.material=this.parseMaterialIndices(e.LayerElementMaterial[0])),e.LayerElementNormal&&(n.normal=this.parseNormals(e.LayerElementNormal[0])),e.LayerElementUV){n.uv=[];for(var r=0;e.LayerElementUV[r];)e.LayerElementUV[r].UV&&n.uv.push(this.parseUVs(e.LayerElementUV[r])),r++}return n.weightTable={},null!==t&&(n.skeleton=t,t.rawBones.forEach((function(e,t){e.indices.forEach((function(r,i){void 0===n.weightTable[r]&&(n.weightTable[r]=[]),n.weightTable[r].push({id:t,weight:e.weights[i]})}))}))),n}},{key:"genBuffers",value:function(e){var t={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]},n=0,r=0,i=!1,a=[],o=[],s=[],u=[],l=[],c=[],h=this;return e.vertexIndices.forEach((function(d,f){var p,A=!1;d<0&&(d^=-1,A=!0);var v=[],m=[];if(a.push(3*d,3*d+1,3*d+2),e.color){var g=_b(f,n,d,e.color);s.push(g[0],g[1],g[2])}if(e.skeleton){if(void 0!==e.weightTable[d]&&e.weightTable[d].forEach((function(e){m.push(e.weight),v.push(e.id)})),m.length>4){i||(console.warn("THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),i=!0);var y=[0,0,0,0],b=[0,0,0,0];m.forEach((function(e,t){var n=e,r=v[t];b.forEach((function(e,t,i){if(n>e){i[t]=n,n=e;var a=y[t];y[t]=r,r=a}}))})),v=y,m=b}for(;m.length<4;)m.push(0),v.push(0);for(var x=0;x<4;++x)l.push(m[x]),c.push(v[x])}if(e.normal){var _=_b(f,n,d,e.normal);o.push(_[0],_[1],_[2])}e.material&&"AllSame"!==e.material.mappingType&&(p=_b(f,n,d,e.material)[0]),e.uv&&e.uv.forEach((function(e,t){var r=_b(f,n,d,e);void 0===u[t]&&(u[t]=[]),u[t].push(r[0]),u[t].push(r[1])})),r++,A&&(h.genFace(t,e,a,p,o,s,u,l,c,r),n++,r=0,a=[],o=[],s=[],u=[],l=[],c=[])})),t}},{key:"genFace",value:function(e,t,n,r,i,a,o,s,u,l){for(var c=function(l){e.vertex.push(t.vertexPositions[n[0]]),e.vertex.push(t.vertexPositions[n[1]]),e.vertex.push(t.vertexPositions[n[2]]),e.vertex.push(t.vertexPositions[n[3*(l-1)]]),e.vertex.push(t.vertexPositions[n[3*(l-1)+1]]),e.vertex.push(t.vertexPositions[n[3*(l-1)+2]]),e.vertex.push(t.vertexPositions[n[3*l]]),e.vertex.push(t.vertexPositions[n[3*l+1]]),e.vertex.push(t.vertexPositions[n[3*l+2]]),t.skeleton&&(e.vertexWeights.push(s[0]),e.vertexWeights.push(s[1]),e.vertexWeights.push(s[2]),e.vertexWeights.push(s[3]),e.vertexWeights.push(s[4*(l-1)]),e.vertexWeights.push(s[4*(l-1)+1]),e.vertexWeights.push(s[4*(l-1)+2]),e.vertexWeights.push(s[4*(l-1)+3]),e.vertexWeights.push(s[4*l]),e.vertexWeights.push(s[4*l+1]),e.vertexWeights.push(s[4*l+2]),e.vertexWeights.push(s[4*l+3]),e.weightsIndices.push(u[0]),e.weightsIndices.push(u[1]),e.weightsIndices.push(u[2]),e.weightsIndices.push(u[3]),e.weightsIndices.push(u[4*(l-1)]),e.weightsIndices.push(u[4*(l-1)+1]),e.weightsIndices.push(u[4*(l-1)+2]),e.weightsIndices.push(u[4*(l-1)+3]),e.weightsIndices.push(u[4*l]),e.weightsIndices.push(u[4*l+1]),e.weightsIndices.push(u[4*l+2]),e.weightsIndices.push(u[4*l+3])),t.color&&(e.colors.push(a[0]),e.colors.push(a[1]),e.colors.push(a[2]),e.colors.push(a[3*(l-1)]),e.colors.push(a[3*(l-1)+1]),e.colors.push(a[3*(l-1)+2]),e.colors.push(a[3*l]),e.colors.push(a[3*l+1]),e.colors.push(a[3*l+2])),t.material&&"AllSame"!==t.material.mappingType&&(e.materialIndex.push(r),e.materialIndex.push(r),e.materialIndex.push(r)),t.normal&&(e.normal.push(i[0]),e.normal.push(i[1]),e.normal.push(i[2]),e.normal.push(i[3*(l-1)]),e.normal.push(i[3*(l-1)+1]),e.normal.push(i[3*(l-1)+2]),e.normal.push(i[3*l]),e.normal.push(i[3*l+1]),e.normal.push(i[3*l+2])),t.uv&&t.uv.forEach((function(t,n){void 0===e.uvs[n]&&(e.uvs[n]=[]),e.uvs[n].push(o[n][0]),e.uvs[n].push(o[n][1]),e.uvs[n].push(o[n][2*(l-1)]),e.uvs[n].push(o[n][2*(l-1)+1]),e.uvs[n].push(o[n][2*l]),e.uvs[n].push(o[n][2*l+1])}))},h=2;h<l;h++)c(h)}},{key:"addMorphTargets",value:function(e,t,n,r){if(0!==n.length){e.morphTargetsRelative=!0,e.morphAttributes.position=[];var i=this;n.forEach((function(n){n.rawTargets.forEach((function(n){var a=ob.Objects.Geometry[n.geoID];void 0!==a&&i.genMorphGeometry(e,t,a,r,n.name)}))}))}}},{key:"genMorphGeometry",value:function(e,t,n,r,i){for(var a=void 0!==t.PolygonVertexIndex?t.PolygonVertexIndex.a:[],o=void 0!==n.Vertices?n.Vertices.a:[],s=void 0!==n.Indexes?n.Indexes.a:[],u=3*e.attributes.position.count,l=new Float32Array(u),c=0;c<s.length;c++){var h=3*s[c];l[h]=o[3*c],l[h+1]=o[3*c+1],l[h+2]=o[3*c+2]}var d={vertexIndices:a,vertexPositions:l},f=this.genBuffers(d),p=new Ro(f.vertex,3);p.name=i||n.attrName,p.applyMatrix4(r),e.morphAttributes.position.push(p)}},{key:"parseNormals",value:function(e){var t=e.MappingInformationType,n=e.ReferenceInformationType,r=e.Normals.a,i=[];return"IndexToDirect"===n&&("NormalIndex"in e?i=e.NormalIndex.a:"NormalsIndex"in e&&(i=e.NormalsIndex.a)),{dataSize:3,buffer:r,indices:i,mappingType:t,referenceType:n}}},{key:"parseUVs",value:function(e){var t=e.MappingInformationType,n=e.ReferenceInformationType,r=e.UV.a,i=[];return"IndexToDirect"===n&&(i=e.UVIndex.a),{dataSize:2,buffer:r,indices:i,mappingType:t,referenceType:n}}},{key:"parseVertexColors",value:function(e){var t=e.MappingInformationType,n=e.ReferenceInformationType,r=e.Colors.a,i=[];return"IndexToDirect"===n&&(i=e.ColorIndex.a),{dataSize:4,buffer:r,indices:i,mappingType:t,referenceType:n}}},{key:"parseMaterialIndices",value:function(e){var t=e.MappingInformationType,n=e.ReferenceInformationType;if("NoMappingInformation"===t)return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:n};for(var r=e.Materials.a,i=[],a=0;a<r.length;++a)i.push(a);return{dataSize:1,buffer:r,indices:i,mappingType:t,referenceType:n}}},{key:"parseNurbsGeometry",value:function(e){if(void 0===lb)return console.error("THREE.FBXLoader: The loader relies on NURBSCurve for any nurbs present in the model. Nurbs will show up as empty geometry."),new Fo;var t=parseInt(e.Order);if(isNaN(t))return console.error("THREE.FBXLoader: Invalid Order %s given for geometry ID: %s",e.Order,e.id),new Fo;for(var n,r,i=t-1,a=e.KnotVector.a,o=[],s=e.Points.a,u=0,l=s.length;u<l;u+=4)o.push((new Pi).fromArray(s,u));if("Closed"===e.Form)o.push(o[0]);else if("Periodic"===e.Form){n=i,r=a.length-1-n;for(var c=0;c<i;++c)o.push(o[c])}var h=new lb(i,a,o,n,r).getPoints(12*o.length);return(new Fo).setFromPoints(h)}}]),e}(),pb=function(){function e(){V(this,e)}return W(e,[{key:"parse",value:function(){var e=[],t=this.parseClips();if(void 0!==t)for(var n in t){var r=t[n],i=this.addClip(r);e.push(i)}return e}},{key:"parseClips",value:function(){if(void 0!==ob.Objects.AnimationCurve){var e=this.parseAnimationCurveNodes();this.parseAnimationCurves(e);var t=this.parseAnimationLayers(e);return this.parseAnimStacks(t)}}},{key:"parseAnimationCurveNodes",value:function(){var e=ob.Objects.AnimationCurveNode,t=new Map;for(var n in e){var r=e[n];if(null!==r.attrName.match(/S|R|T|DeformPercent/)){var i={id:r.id,attr:r.attrName,curves:{}};t.set(i.id,i)}}return t}},{key:"parseAnimationCurves",value:function(e){var t=ob.Objects.AnimationCurve;for(var n in t){var r={id:t[n].id,times:t[n].KeyTime.a.map(bb),values:t[n].KeyValueFloat.a},i=sb.get(r.id);if(void 0!==i){var a=i.parents[0].ID,o=i.parents[0].relationship;o.match(/X/)?e.get(a).curves.x=r:o.match(/Y/)?e.get(a).curves.y=r:o.match(/Z/)?e.get(a).curves.z=r:o.match(/d|DeformPercent/)&&e.has(a)&&(e.get(a).curves.morph=r)}}}},{key:"parseAnimationLayers",value:function(e){var t=ob.Objects.AnimationLayer,n=new Map,r=function(){var t=[],r=sb.get(parseInt(i));void 0!==r&&(r.children.forEach((function(n,r){if(e.has(n.ID)){var i=e.get(n.ID);if(void 0!==i.curves.x||void 0!==i.curves.y||void 0!==i.curves.z){if(void 0===t[r]){var a=sb.get(n.ID).parents.filter((function(e){return void 0!==e.relationship}))[0].ID;if(void 0!==a){var o=ob.Objects.Model[a.toString()];if(void 0===o)return void console.warn("THREE.FBXLoader: Encountered a unused curve.",n);var s={modelName:o.attrName?AA.sanitizeNodeName(o.attrName):"",ID:o.id,initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1]};ub.traverse((function(e){e.ID===o.id&&(s.transform=e.matrix,e.userData.transformData&&(s.eulerOrder=e.userData.transformData.eulerOrder))})),s.transform||(s.transform=new va),"PreRotation"in o&&(s.preRotation=o.PreRotation.value),"PostRotation"in o&&(s.postRotation=o.PostRotation.value),t[r]=s}}t[r]&&(t[r][i.attr]=i)}else if(void 0!==i.curves.morph){if(void 0===t[r]){var u=sb.get(n.ID).parents.filter((function(e){return void 0!==e.relationship}))[0].ID,l=sb.get(u).parents[0].ID,c=sb.get(l).parents[0].ID,h=sb.get(c).parents[0].ID,d=ob.Objects.Model[h],f={modelName:d.attrName?AA.sanitizeNodeName(d.attrName):"",morphName:ob.Objects.Deformer[u].attrName};t[r]=f}t[r][i.attr]=i}}})),n.set(parseInt(i),t))};for(var i in t)r();return n}},{key:"parseAnimStacks",value:function(e){var t=ob.Objects.AnimationStack,n={};for(var r in t){var i=sb.get(parseInt(r)).children;i.length>1&&console.warn("THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.");var a=e.get(i[0].ID);n[r]={name:t[r].attrName,layer:a}}return n}},{key:"addClip",value:function(e){var t=[],n=this;return e.layer.forEach((function(e){t=t.concat(n.generateTracks(e))})),new Kf(e.name,-1,t)}},{key:"generateTracks",value:function(e){var t=[],n=new zi,r=new Ui,i=new zi;if(e.transform&&e.transform.decompose(n,r,i),n=n.toArray(),r=(new ka).setFromQuaternion(r,e.eulerOrder).toArray(),i=i.toArray(),void 0!==e.T&&Object.keys(e.T.curves).length>0){var a=this.generateVectorTrack(e.modelName,e.T.curves,n,"position");void 0!==a&&t.push(a)}if(void 0!==e.R&&Object.keys(e.R.curves).length>0){var o=this.generateRotationTrack(e.modelName,e.R.curves,r,e.preRotation,e.postRotation,e.eulerOrder);void 0!==o&&t.push(o)}if(void 0!==e.S&&Object.keys(e.S.curves).length>0){var s=this.generateVectorTrack(e.modelName,e.S.curves,i,"scale");void 0!==s&&t.push(s)}if(void 0!==e.DeformPercent){var u=this.generateMorphTrack(e);void 0!==u&&t.push(u)}return t}},{key:"generateVectorTrack",value:function(e,t,n,r){var i=this.getTimesForAllAxes(t),a=this.getKeyframeTrackValues(i,t,n);return new Jf(e+"."+r,i,a)}},{key:"generateRotationTrack",value:function(e,t,n,r,i,a){void 0!==t.x&&(this.interpolateRotations(t.x),t.x.values=t.x.values.map(ri.degToRad)),void 0!==t.y&&(this.interpolateRotations(t.y),t.y.values=t.y.values.map(ri.degToRad)),void 0!==t.z&&(this.interpolateRotations(t.z),t.z.values=t.z.values.map(ri.degToRad));var o=this.getTimesForAllAxes(t),s=this.getKeyframeTrackValues(o,t,n);void 0!==r&&((r=r.map(ri.degToRad)).push(a),r=(new ka).fromArray(r),r=(new Ui).setFromEuler(r)),void 0!==i&&((i=i.map(ri.degToRad)).push(a),i=(new ka).fromArray(i),i=(new Ui).setFromEuler(i).invert());for(var u=new Ui,l=new ka,c=[],h=0;h<s.length;h+=3)l.set(s[h],s[h+1],s[h+2],a),u.setFromEuler(l),void 0!==r&&u.premultiply(r),void 0!==i&&u.multiply(i),u.toArray(c,h/3*4);return new Yf(e+".quaternion",o,c)}},{key:"generateMorphTrack",value:function(e){var t=e.DeformPercent.curves.morph,n=t.values.map((function(e){return e/100})),r=ub.getObjectByName(e.modelName).morphTargetDictionary[e.morphName];return new Wf(e.modelName+".morphTargetInfluences["+r+"]",t.times,n)}},{key:"getTimesForAllAxes",value:function(e){var t=[];if(void 0!==e.x&&(t=t.concat(e.x.times)),void 0!==e.y&&(t=t.concat(e.y.times)),void 0!==e.z&&(t=t.concat(e.z.times)),(t=t.sort((function(e,t){return e-t}))).length>1){for(var n=1,r=t[0],i=1;i<t.length;i++){var a=t[i];a!==r&&(t[n]=a,r=a,n++)}t=t.slice(0,n)}return t}},{key:"getKeyframeTrackValues",value:function(e,t,n){var r=n,i=[],a=-1,o=-1,s=-1;return e.forEach((function(e){if(t.x&&(a=t.x.times.indexOf(e)),t.y&&(o=t.y.times.indexOf(e)),t.z&&(s=t.z.times.indexOf(e)),-1!==a){var n=t.x.values[a];i.push(n),r[0]=n}else i.push(r[0]);if(-1!==o){var u=t.y.values[o];i.push(u),r[1]=u}else i.push(r[1]);if(-1!==s){var l=t.z.values[s];i.push(l),r[2]=l}else i.push(r[2])})),i}},{key:"interpolateRotations",value:function(e){for(var t=1;t<e.values.length;t++){var n=e.values[t-1],r=e.values[t]-n,i=Math.abs(r);if(i>=180){for(var a=i/180,o=r/a,s=n+o,u=e.times[t-1],l=(e.times[t]-u)/a,c=u+l,h=[],d=[];c<e.times[t];)h.push(c),c+=l,d.push(s),s+=o;e.times=Cb(e.times,t,h),e.values=Cb(e.values,t,d)}}}}]),e}(),Ab=function(){function e(){V(this,e)}return W(e,[{key:"getPrevNode",value:function(){return this.nodeStack[this.currentIndent-2]}},{key:"getCurrentNode",value:function(){return this.nodeStack[this.currentIndent-1]}},{key:"getCurrentProp",value:function(){return this.currentProp}},{key:"pushStack",value:function(e){this.nodeStack.push(e),this.currentIndent+=1}},{key:"popStack",value:function(){this.nodeStack.pop(),this.currentIndent-=1}},{key:"setCurrentProp",value:function(e,t){this.currentProp=e,this.currentPropName=t}},{key:"parse",value:function(e){this.currentIndent=0,this.allNodes=new gb,this.nodeStack=[],this.currentProp=[],this.currentPropName="";var t=this,n=e.split(/[\r\n]+/);return n.forEach((function(e,r){var i=e.match(/^[\s\t]*;/),a=e.match(/^[\s\t]*$/);if(!i&&!a){var o=e.match("^\\t{"+t.currentIndent+"}(\\w+):(.*){",""),s=e.match("^\\t{"+t.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),u=e.match("^\\t{"+(t.currentIndent-1)+"}}");o?t.parseNodeBegin(e,o):s?t.parseNodeProperty(e,s,n[++r]):u?t.popStack():e.match(/^[^\s\t}]/)&&t.parseNodePropertyContinued(e)}})),this.allNodes}},{key:"parseNodeBegin",value:function(e,t){var n=t[1].trim().replace(/^"/,"").replace(/"$/,""),r=t[2].split(",").map((function(e){return e.trim().replace(/^"/,"").replace(/"$/,"")})),i={name:n},a=this.parseNodeAttr(r),o=this.getCurrentNode();0===this.currentIndent?this.allNodes.add(n,i):n in o?("PoseNode"===n?o.PoseNode.push(i):void 0!==o[n].id&&(o[n]={},o[n][o[n].id]=o[n]),""!==a.id&&(o[n][a.id]=i)):"number"===typeof a.id?(o[n]={},o[n][a.id]=i):"Properties70"!==n&&(o[n]="PoseNode"===n?[i]:i),"number"===typeof a.id&&(i.id=a.id),""!==a.name&&(i.attrName=a.name),""!==a.type&&(i.attrType=a.type),this.pushStack(i)}},{key:"parseNodeAttr",value:function(e){var t=e[0];""!==e[0]&&(t=parseInt(e[0]),isNaN(t)&&(t=e[0]));var n="",r="";return e.length>1&&(n=e[1].replace(/^(\w+)::/,""),r=e[2]),{id:t,name:n,type:r}}},{key:"parseNodeProperty",value:function(e,t,n){var r=t[1].replace(/^"/,"").replace(/"$/,"").trim(),i=t[2].replace(/^"/,"").replace(/"$/,"").trim();"Content"===r&&","===i&&(i=n.replace(/"/g,"").replace(/,$/,"").trim());var a=this.getCurrentNode();if("Properties70"!==a.name){if("C"===r){var o=i.split(",").slice(1),s=parseInt(o[0]),u=parseInt(o[1]),l=i.split(",").slice(3);r="connections",function(e,t){for(var n=0,r=e.length,i=t.length;n<i;n++,r++)e[r]=t[n]}(i=[s,u],l=l.map((function(e){return e.trim().replace(/^"/,"")}))),void 0===a[r]&&(a[r]=[])}"Node"===r&&(a.id=i),r in a&&Array.isArray(a[r])?a[r].push(i):"a"!==r?a[r]=i:a.a=i,this.setCurrentProp(a,r),"a"===r&&","!==i.slice(-1)&&(a.a=Tb(i))}else this.parseNodeSpecialProperty(e,r,i)}},{key:"parseNodePropertyContinued",value:function(e){var t=this.getCurrentNode();t.a+=e,","!==e.slice(-1)&&(t.a=Tb(t.a))}},{key:"parseNodeSpecialProperty",value:function(e,t,n){var r=n.split('",').map((function(e){return e.trim().replace(/^\"/,"").replace(/\s/,"_")})),i=r[0],a=r[1],o=r[2],s=r[3],u=r[4];switch(a){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":u=parseFloat(u);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":u=Tb(u)}this.getPrevNode()[i]={type:a,type2:o,flag:s,value:u},this.setCurrentProp(this.getPrevNode(),i)}}]),e}(),vb=function(){function e(){V(this,e)}return W(e,[{key:"parse",value:function(e){var t=new mb(e);t.skip(23);var n=t.getUint32();if(n<6400)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+n);for(var r=new gb;!this.endOfContent(t);){var i=this.parseNode(t,n);null!==i&&r.add(i.name,i)}return r}},{key:"endOfContent",value:function(e){return e.size()%16===0?(e.getOffset()+160+16&-16)>=e.size():e.getOffset()+160+16>=e.size()}},{key:"parseNode",value:function(e,t){var n={},r=t>=7500?e.getUint64():e.getUint32(),i=t>=7500?e.getUint64():e.getUint32();t>=7500?e.getUint64():e.getUint32();var a=e.getUint8(),o=e.getString(a);if(0===r)return null;for(var s=[],u=0;u<i;u++)s.push(this.parseProperty(e));var l=s.length>0?s[0]:"",c=s.length>1?s[1]:"",h=s.length>2?s[2]:"";for(n.singleProperty=1===i&&e.getOffset()===r;r>e.getOffset();){var d=this.parseNode(e,t);null!==d&&this.parseSubNode(o,n,d)}return n.propertyList=s,"number"===typeof l&&(n.id=l),""!==c&&(n.attrName=c),""!==h&&(n.attrType=h),""!==o&&(n.name=o),n}},{key:"parseSubNode",value:function(e,t,n){if(!0===n.singleProperty){var r=n.propertyList[0];Array.isArray(r)?(t[n.name]=n,n.a=r):t[n.name]=r}else if("Connections"===e&&"C"===n.name){var i=[];n.propertyList.forEach((function(e,t){0!==t&&i.push(e)})),void 0===t.connections&&(t.connections=[]),t.connections.push(i)}else if("Properties70"===n.name){Object.keys(n).forEach((function(e){t[e]=n[e]}))}else if("Properties70"===e&&"P"===n.name){var a,o=n.propertyList[0],s=n.propertyList[1],u=n.propertyList[2],l=n.propertyList[3];0===o.indexOf("Lcl ")&&(o=o.replace("Lcl ","Lcl_")),0===s.indexOf("Lcl ")&&(s=s.replace("Lcl ","Lcl_")),a="Color"===s||"ColorRGB"===s||"Vector"===s||"Vector3D"===s||0===s.indexOf("Lcl_")?[n.propertyList[4],n.propertyList[5],n.propertyList[6]]:n.propertyList[4],t[o]={type:s,type2:u,flag:l,value:a}}else void 0===t[n.name]?"number"===typeof n.id?(t[n.name]={},t[n.name][n.id]=n):t[n.name]=n:"PoseNode"===n.name?(Array.isArray(t[n.name])||(t[n.name]=[t[n.name]]),t[n.name].push(n)):void 0===t[n.name][n.id]&&(t[n.name][n.id]=n)}},{key:"parseProperty",value:function(e){var t,n=e.getString(1);switch(n){case"C":return e.getBoolean();case"D":return e.getFloat64();case"F":return e.getFloat32();case"I":return e.getInt32();case"L":return e.getInt64();case"R":return t=e.getUint32(),e.getArrayBuffer(t);case"S":return t=e.getUint32(),e.getString(t);case"Y":return e.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":var r=e.getUint32(),i=e.getUint32(),a=e.getUint32();if(0===i)switch(n){case"b":case"c":return e.getBooleanArray(r);case"d":return e.getFloat64Array(r);case"f":return e.getFloat32Array(r);case"i":return e.getInt32Array(r);case"l":return e.getInt64Array(r)}var o=eb(new Uint8Array(e.getArrayBuffer(a))),s=new mb(o.buffer);switch(n){case"b":case"c":return s.getBooleanArray(r);case"d":return s.getFloat64Array(r);case"f":return s.getFloat32Array(r);case"i":return s.getInt32Array(r);case"l":return s.getInt64Array(r)}default:throw new Error("THREE.FBXLoader: Unknown property type "+n)}}}]),e}(),mb=function(){function e(t,n){V(this,e),this.dv=new DataView(t),this.offset=0,this.littleEndian=void 0===n||n}return W(e,[{key:"getOffset",value:function(){return this.offset}},{key:"size",value:function(){return this.dv.buffer.byteLength}},{key:"skip",value:function(e){this.offset+=e}},{key:"getBoolean",value:function(){return 1===(1&this.getUint8())}},{key:"getBooleanArray",value:function(e){for(var t=[],n=0;n<e;n++)t.push(this.getBoolean());return t}},{key:"getUint8",value:function(){var e=this.dv.getUint8(this.offset);return this.offset+=1,e}},{key:"getInt16",value:function(){var e=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}},{key:"getInt32",value:function(){var e=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}},{key:"getInt32Array",value:function(e){for(var t=[],n=0;n<e;n++)t.push(this.getInt32());return t}},{key:"getUint32",value:function(){var e=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}},{key:"getInt64",value:function(){var e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),2147483648&t?(t=4294967295&~t,4294967295===(e=4294967295&~e)&&(t=t+1&4294967295),-(4294967296*t+(e=e+1&4294967295))):4294967296*t+e}},{key:"getInt64Array",value:function(e){for(var t=[],n=0;n<e;n++)t.push(this.getInt64());return t}},{key:"getUint64",value:function(){var e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),4294967296*t+e}},{key:"getFloat32",value:function(){var e=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}},{key:"getFloat32Array",value:function(e){for(var t=[],n=0;n<e;n++)t.push(this.getFloat32());return t}},{key:"getFloat64",value:function(){var e=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}},{key:"getFloat64Array",value:function(e){for(var t=[],n=0;n<e;n++)t.push(this.getFloat64());return t}},{key:"getArrayBuffer",value:function(e){var t=this.dv.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t}},{key:"getString",value:function(e){for(var t=[],n=0;n<e;n++)t[n]=this.getUint8();var r=t.indexOf(0);return r>=0&&(t=t.slice(0,r)),xg(new Uint8Array(t))}}]),e}(),gb=function(){function e(){V(this,e)}return W(e,[{key:"add",value:function(e,t){this[e]=t}}]),e}();function yb(e){var t=e.match(/FBXVersion: (\d+)/);if(t)return parseInt(t[1]);throw new Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function bb(e){return e/46186158e3}var xb=[];function _b(e,t,n,r){var i;switch(r.mappingType){case"ByPolygonVertex":i=e;break;case"ByPolygon":i=t;break;case"ByVertice":i=n;break;case"AllSame":i=r.indices[0];break;default:console.warn("THREE.FBXLoader: unknown attribute mapping type "+r.mappingType)}"IndexToDirect"===r.referenceType&&(i=r.indices[i]);var a=i*r.dataSize,o=a+r.dataSize;return function(e,t,n,r){for(var i=n,a=0;i<r;i++,a++)e[a]=t[i];return e}(xb,r.buffer,a,o)}var wb=new ka,Sb=new zi;function Mb(e){var t=new va,n=new va,r=new va,i=new va,a=new va,o=new va,s=new va,u=new va,l=new va,c=new va,h=new va,d=new va,f=e.inheritType?e.inheritType:0;if(e.translation&&t.setPosition(Sb.fromArray(e.translation)),e.preRotation){var p=e.preRotation.map(ri.degToRad);p.push(e.eulerOrder),n.makeRotationFromEuler(wb.fromArray(p))}if(e.rotation){var A=e.rotation.map(ri.degToRad);A.push(e.eulerOrder),r.makeRotationFromEuler(wb.fromArray(A))}if(e.postRotation){var v=e.postRotation.map(ri.degToRad);v.push(e.eulerOrder),i.makeRotationFromEuler(wb.fromArray(v)),i.invert()}e.scale&&a.scale(Sb.fromArray(e.scale)),e.scalingOffset&&s.setPosition(Sb.fromArray(e.scalingOffset)),e.scalingPivot&&o.setPosition(Sb.fromArray(e.scalingPivot)),e.rotationOffset&&u.setPosition(Sb.fromArray(e.rotationOffset)),e.rotationPivot&&l.setPosition(Sb.fromArray(e.rotationPivot)),e.parentMatrixWorld&&(h.copy(e.parentMatrix),c.copy(e.parentMatrixWorld));var m=n.clone().multiply(r).multiply(i),g=new va;g.extractRotation(c);var y=new va;y.copyPosition(c);var b=y.clone().invert().multiply(c),x=g.clone().invert().multiply(b),_=a,w=new va;if(0===f)w.copy(g).multiply(m).multiply(x).multiply(_);else if(1===f)w.copy(g).multiply(x).multiply(m).multiply(_);else{var S=(new va).scale((new zi).setFromMatrixScale(h)).clone().invert(),M=x.clone().multiply(S);w.copy(g).multiply(m).multiply(M).multiply(_)}var k=l.clone().invert(),T=o.clone().invert(),E=t.clone().multiply(u).multiply(l).multiply(n).multiply(r).multiply(i).multiply(k).multiply(s).multiply(o).multiply(a).multiply(T),C=(new va).copyPosition(E),R=c.clone().multiply(C);return d.copyPosition(R),(E=d.clone().multiply(w)).premultiply(c.invert()),E}function kb(e){var t=["ZYX","YZX","XZY","ZXY","YXZ","XYZ"];return 6===(e=e||0)?(console.warn("THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect."),t[0]):t[e]}function Tb(e){return e.split(",").map((function(e){return parseFloat(e)}))}function Eb(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=e.byteLength),xg(new Uint8Array(e,t,n))}function Cb(e,t,n){return e.slice(0,t).concat(n).concat(e.slice(t))}function Rb(e){return Mm(hb,e)}Rb.preload=function(e){return Mm.preload(hb,e)},Rb.clear=function(e){return Mm.clear(hb,e)};var Bb=n.p+"static/media/Ready_Player_Model.e84112c65921a4a65ecc.glb",Pb=n.p+"static/media/idle.a0dbd5e49e06a2f6874c.fbx",Nb=n.p+"static/media/salute.dc861e51d20283a1875e.fbx",Ib=n.p+"static/media/victory.ed1b2c7aed0520e6730f.fbx",Db=n.p+"static/media/clapping.89b5e47507eaf267a7a0.fbx",Lb=["animationName","loading","setLoading"];My.preload(Bb);var Ob=function(e){var t=e.animationName,n=void 0===t?"idle":t,i=(e.loading,e.setLoading,z(e,Lb)),a=(0,r.useRef)(),o=My(Bb,!0),s=o.nodes,u=o.materials,c=Rb(Pb).animations,h=Rb(Nb).animations,d=Rb(Ib).animations,f=Rb(Db).animations;c[0].name="idle",h[0].name="salute",d[0].name="victory",f[0].name="clapping";var A=function(e,t){var n=r.useRef(),i=l(r.useState((function(){return t?t instanceof Ha?{current:t}:t:n})),1)[0],a=l(r.useState((function(){return new yA(void 0)})),1)[0];r.useLayoutEffect((function(){t&&(i.current=t instanceof Ha?t:t.current),a._root=i.current}));var o=r.useRef({}),s=r.useMemo((function(){var t={};return e.forEach((function(e){return Object.defineProperty(t,e.name,{enumerable:!0,get:function(){if(i.current)return o.current[e.name]||(o.current[e.name]=a.clipAction(e,i.current))},configurable:!0})})),{ref:i,clips:e,actions:t,names:e.map((function(e){return e.name})),mixer:a}}),[e]);return _m((function(e,t){return a.update(t)})),r.useEffect((function(){var e=i.current;return function(){o.current={},a.stopAllAction(),Object.values(s.actions).forEach((function(t){e&&a.uncacheAction(t,e)}))}}),[e]),s}([c[0],h[0],d[0],f[0]],a),v=A.actions;return(0,r.useEffect)((function(){return v[n].reset().fadeIn(.5).play(),function(){return v[n].fadeOut(.5)}}),[n]),(0,p.jsxs)("group",b(b({},i),{},{dispose:null,ref:a,children:[(0,p.jsx)("primitive",{object:s.Hips}),(0,p.jsx)("skinnedMesh",{name:"EyeLeft",geometry:s.EyeLeft.geometry,material:u.Wolf3D_Eye,skeleton:s.EyeLeft.skeleton,morphTargetDictionary:s.EyeLeft.morphTargetDictionary,morphTargetInfluences:s.EyeLeft.morphTargetInfluences}),(0,p.jsx)("skinnedMesh",{name:"EyeRight",geometry:s.EyeRight.geometry,material:u.Wolf3D_Eye,skeleton:s.EyeRight.skeleton,morphTargetDictionary:s.EyeRight.morphTargetDictionary,morphTargetInfluences:s.EyeRight.morphTargetInfluences}),(0,p.jsx)("skinnedMesh",{name:"Wolf3D_Head",geometry:s.Wolf3D_Head.geometry,material:u.Wolf3D_Skin,skeleton:s.Wolf3D_Head.skeleton,morphTargetDictionary:s.Wolf3D_Head.morphTargetDictionary,morphTargetInfluences:s.Wolf3D_Head.morphTargetInfluences}),(0,p.jsx)("skinnedMesh",{name:"Wolf3D_Teeth",geometry:s.Wolf3D_Teeth.geometry,material:u.Wolf3D_Teeth,skeleton:s.Wolf3D_Teeth.skeleton,morphTargetDictionary:s.Wolf3D_Teeth.morphTargetDictionary,morphTargetInfluences:s.Wolf3D_Teeth.morphTargetInfluences}),(0,p.jsx)("skinnedMesh",{geometry:s.Wolf3D_Hair.geometry,material:u.Wolf3D_Hair,skeleton:s.Wolf3D_Hair.skeleton}),(0,p.jsx)("skinnedMesh",{geometry:s.Wolf3D_Outfit_Top.geometry,material:u.Wolf3D_Outfit_Top,skeleton:s.Wolf3D_Outfit_Top.skeleton}),(0,p.jsx)("skinnedMesh",{geometry:s.Wolf3D_Outfit_Bottom.geometry,material:u.Wolf3D_Outfit_Bottom,skeleton:s.Wolf3D_Outfit_Bottom.skeleton}),(0,p.jsx)("skinnedMesh",{geometry:s.Wolf3D_Outfit_Footwear.geometry,material:u.Wolf3D_Outfit_Footwear,skeleton:s.Wolf3D_Outfit_Footwear.skeleton}),(0,p.jsx)("skinnedMesh",{geometry:s.Wolf3D_Body.geometry,material:u.Wolf3D_Body,skeleton:s.Wolf3D_Body.skeleton})]}))};n.p;function Fb(){return Fb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Fb.apply(null,arguments)}var Ub=["children","eps","style","className","prepend","center","fullscreen","portal","distanceFactor","sprite","transform","occlude","onOcclude","castShadow","receiveShadow","material","geometry","zIndexRange","calculatePosition","as","wrapperClass","pointerEvents"],zb=new zi,Gb=new zi,qb=new zi,Hb=new ii;function Vb(e,t,n){var r=zb.setFromMatrixPosition(e.matrixWorld);r.project(t);var i=n.width/2,a=n.height/2;return[r.x*i+i,-r.y*a+a]}var jb=function(e){return Math.abs(e)<1e-10?0:e};function Wb(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r="matrix3d(",i=0;16!==i;i++)r+=jb(t[i]*e.elements[i])+(15!==i?",":")");return n+r}var Xb,Yb=(Xb=[1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1],function(e){return Wb(e,Xb)}),Qb=function(e,t){return Wb(e,[1/(n=t),1/n,1/n,1,-1/n,-1/n,-1/n,-1,1/n,1/n,1/n,1,1,1,1,1],"translate(-50%,-50%)");var n};var Jb=r.forwardRef((function(e,t){var n=e.children,a=e.eps,o=void 0===a?.001:a,s=e.style,u=e.className,c=e.prepend,h=e.center,d=e.fullscreen,f=e.portal,p=e.distanceFactor,A=e.sprite,v=void 0!==A&&A,m=e.transform,g=void 0!==m&&m,y=e.occlude,x=e.onOcclude,_=e.castShadow,w=e.receiveShadow,S=e.material,M=e.geometry,k=e.zIndexRange,T=void 0===k?[16777271,0]:k,E=e.calculatePosition,C=void 0===E?Vb:E,R=e.as,B=void 0===R?"div":R,P=e.wrapperClass,N=e.pointerEvents,I=void 0===N?"auto":N,D=z(e,Ub),L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e){return e},t=arguments.length>1?arguments[1]:void 0;return xm()(e,t)}(),O=L.gl,F=L.camera,U=L.scene,G=L.size,q=L.raycaster,H=L.events,V=L.viewport,j=l(r.useState((function(){return document.createElement(B)})),1)[0],W=r.useRef(),X=r.useRef(null),Y=r.useRef(0),Q=r.useRef([0,0]),J=r.useRef(null),K=r.useRef(null),Z=(null==f?void 0:f.current)||H.connected||O.domElement.parentNode,$=r.useRef(null),ee=r.useRef(!1),te=r.useMemo((function(){return y&&"blending"!==y||Array.isArray(y)&&y.length&&function(e){return e&&"object"===typeof e&&"current"in e}(y[0])}),[y]);r.useLayoutEffect((function(){var e=O.domElement;y&&"blending"===y?(e.style.zIndex="".concat(Math.floor(T[0]/2)),e.style.position="absolute",e.style.pointerEvents="none"):(e.style.zIndex=null,e.style.position=null,e.style.pointerEvents=null)}),[y]),r.useLayoutEffect((function(){if(X.current){var e=W.current=i.createRoot(j);if(U.updateMatrixWorld(),g)j.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{var t=C(X.current,F,G);j.style.cssText="position:absolute;top:0;left:0;transform:translate3d(".concat(t[0],"px,").concat(t[1],"px,0);transform-origin:0 0;")}return Z&&(c?Z.prepend(j):Z.appendChild(j)),function(){Z&&Z.removeChild(j),e.unmount()}}}),[Z,g]),r.useLayoutEffect((function(){P&&(j.className=P)}),[P]);var ne=r.useMemo((function(){return g?{position:"absolute",top:0,left:0,width:G.width,height:G.height,transformStyle:"preserve-3d",pointerEvents:"none"}:b(b({position:"absolute",transform:h?"translate3d(-50%,-50%,0)":"none"},d&&{top:-G.height/2,left:-G.width/2,width:G.width,height:G.height}),s)}),[s,h,d,G,g]),re=r.useMemo((function(){return{position:"absolute",pointerEvents:I}}),[I]);r.useLayoutEffect((function(){var e,i;(ee.current=!1,g)?null==(e=W.current)||e.render(r.createElement("div",{ref:J,style:ne},r.createElement("div",{ref:K,style:re},r.createElement("div",{ref:t,className:u,style:s,children:n})))):null==(i=W.current)||i.render(r.createElement("div",{ref:t,style:ne,className:u,children:n}))}));var ie=r.useRef(!0);_m((function(e){if(X.current){F.updateMatrixWorld(),X.current.updateWorldMatrix(!0,!1);var t=g?Q.current:C(X.current,F,G);if(g||Math.abs(Y.current-F.zoom)>o||Math.abs(Q.current[0]-t[0])>o||Math.abs(Q.current[1]-t[1])>o){var n=function(e,t){var n=zb.setFromMatrixPosition(e.matrixWorld),r=Gb.setFromMatrixPosition(t.matrixWorld),i=n.sub(r),a=t.getWorldDirection(qb);return i.angleTo(a)>Math.PI/2}(X.current,F),r=!1;te&&(Array.isArray(y)?r=y.map((function(e){return e.current})):"blending"!==y&&(r=[U]));var i=ie.current;if(r){var a=function(e,t,n,r){var i=zb.setFromMatrixPosition(e.matrixWorld),a=i.clone();a.project(t),Hb.set(a.x,a.y),n.setFromCamera(Hb,t);var o=n.intersectObjects(r,!0);if(o.length){var s=o[0].distance;return i.distanceTo(n.ray.origin)<s}return!0}(X.current,F,q,r);ie.current=a&&!n}else ie.current=!n;i!==ie.current&&(x?x(!ie.current):j.style.display=ie.current?"block":"none");var s=Math.floor(T[0]/2),u=y?te?[T[0],s]:[s-1,0]:T;if(j.style.zIndex="".concat(function(e,t,n){if(t instanceof us||t instanceof Ds){var r=zb.setFromMatrixPosition(e.matrixWorld),i=Gb.setFromMatrixPosition(t.matrixWorld),a=r.distanceTo(i),o=(n[1]-n[0])/(t.far-t.near),s=n[1]-o*t.far;return Math.round(o*a+s)}}(X.current,F,u)),g){var l=G.width/2,c=G.height/2,h=F.projectionMatrix.elements[5]*c,d=F.isOrthographicCamera,f=F.top,A=F.left,m=F.bottom,b=F.right,_=Yb(F.matrixWorldInverse),w=d?"scale(".concat(h,")translate(").concat(jb(-(b+A)/2),"px,").concat(jb((f+m)/2),"px)"):"translateZ(".concat(h,"px)"),S=X.current.matrixWorld;v&&((S=F.matrixWorldInverse.clone().transpose().copyPosition(S).scale(X.current.scale)).elements[3]=S.elements[7]=S.elements[11]=0,S.elements[15]=1),j.style.width=G.width+"px",j.style.height=G.height+"px",j.style.perspective=d?"":"".concat(h,"px"),J.current&&K.current&&(J.current.style.transform="".concat(w).concat(_,"translate(").concat(l,"px,").concat(c,"px)"),K.current.style.transform=Qb(S,1/((p||10)/400)))}else{var k=void 0===p?1:function(e,t){if(t instanceof Ds)return t.zoom;if(t instanceof us){var n=zb.setFromMatrixPosition(e.matrixWorld),r=Gb.setFromMatrixPosition(t.matrixWorld),i=t.fov*Math.PI/180,a=n.distanceTo(r);return 1/(2*Math.tan(i/2)*a)}return 1}(X.current,F)*p;j.style.transform="translate3d(".concat(t[0],"px,").concat(t[1],"px,0) scale(").concat(k,")")}Q.current=t,Y.current=F.zoom}}if(!te&&$.current&&!ee.current)if(g){if(J.current){var E=J.current.children[0];if(null!=E&&E.clientWidth&&null!=E&&E.clientHeight){if(F.isOrthographicCamera||M)D.scale&&(Array.isArray(D.scale)?D.scale instanceof zi?$.current.scale.copy(D.scale.clone().divideScalar(1)):$.current.scale.set(1/D.scale[0],1/D.scale[1],1/D.scale[2]):$.current.scale.setScalar(1/D.scale));else{var R=(p||10)/400,B=E.clientWidth*R,P=E.clientHeight*R;$.current.scale.set(B,P,1)}ee.current=!0}}}else{var N=j.children[0];if(null!=N&&N.clientWidth&&null!=N&&N.clientHeight){var I=1/V.factor,L=N.clientWidth*I,O=N.clientHeight*I;$.current.scale.set(L,O,1),ee.current=!0}$.current.lookAt(e.camera.position)}}));var ae=r.useMemo((function(){return{vertexShader:g?void 0:'\n          /*\n            This shader is from the THREE\'s SpriteMaterial.\n            We need to turn the backing plane into a Sprite\n            (make it always face the camera) if "transfrom"\n            is false.\n          */\n          #include <common>\n\n          void main() {\n            vec2 center = vec2(0., 1.);\n            float rotation = 0.0;\n\n            // This is somewhat arbitrary, but it seems to work well\n            // Need to figure out how to derive this dynamically if it even matters\n            float size = 0.03;\n\n            vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n            vec2 scale;\n            scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n            scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\n            bool isPerspective = isPerspectiveMatrix( projectionMatrix );\n            if ( isPerspective ) scale *= - mvPosition.z;\n\n            vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;\n            vec2 rotatedPosition;\n            rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n            rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n            mvPosition.xy += rotatedPosition;\n\n            gl_Position = projectionMatrix * mvPosition;\n          }\n      ',fragmentShader:"\n        void main() {\n          gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);\n        }\n      "}}),[g]);return r.createElement("group",Fb({},D,{ref:X}),y&&!te&&r.createElement("mesh",{castShadow:_,receiveShadow:w,ref:$},M||r.createElement("planeGeometry",null),S||r.createElement("shaderMaterial",{side:xe,vertexShader:ae.vertexShader,fragmentShader:ae.fragmentShader})))})),Kb=function(){return(0,p.jsx)(Jb,{children:(0,p.jsxs)("div",{className:"flex flex-row gap-2",children:[(0,p.jsx)("div",{className:"w-4 h-4 rounded-full bg-blue-700 animate-bounce [animation-delay:.7s]"}),(0,p.jsx)("div",{className:"w-4 h-4 rounded-full bg-blue-700 animate-bounce [animation-delay:.3s]"}),(0,p.jsx)("div",{className:"w-4 h-4 rounded-full bg-blue-700 animate-bounce [animation-delay:.7s]"})]})})},Zb=[{id:"0",icon:E,title:"Three.JS",text:"By leveraging Three.js, I create stunning 3D visuals that enhance user experiences and elevate interactivity.",animation:"salute"},{id:"1",icon:B,title:"Framer Motion",text:"Framer Motion allows me to implement smooth and impactful animations, elevating the overall storytelling of projects.",animation:"victory"},{id:"2",icon:M,title:"Tailwind",text:"With Tailwind CSS, I rapidly build responsive designs, ensuring a cohesive and stylish interface across devices.",animation:"clapping"}],$b=function(e){var t=e.loading,n=e.setLoading,i=l((0,r.useState)("idle"),2),a=i[0],o=i[1],s=l([(window.innerWidth,[20,20,20]),[0,-20,-26],[.2,.5,0]],3),u=s[0],c=s[1],h=s[2];return(0,p.jsxs)("div",{id:"features",className:"h-[90vh] w-full bg-[#212121] flex flex-row max-sm:flex-col justify-center items-center",children:[(0,p.jsx)("div",{className:"left-section max-sm:hidden h-full max-sm:h-[50%] w-[50%] max-sm:w-full flex justify-center items-center",children:(0,p.jsxs)(pg,{camera:{near:1,far:500},children:[(0,p.jsx)("ambientLight",{intensity:7}),(0,p.jsx)("spotLight",{position:[10,10,10],angle:.15,penumbra:1}),(0,p.jsx)("directionalLight",{position:[10,10,10],intensity:1}),(0,p.jsx)(r.Suspense,{fallback:(0,p.jsx)(Kb,{}),children:(0,p.jsx)(Ob,{loading:t,setLoading:n,position:c,scale:u,rotation:h,animationName:a})})]})}),(0,p.jsx)("div",{className:"right-section h-full max-sm:h-[80%] w-[50%] max-sm:w-full flex flex-col justify-evenly items-center max-sm:justify-around",children:Zb.map((function(e){var t=e.id,n=e.title,r=e.text,i=e.icon,a=e.animation;return(0,p.jsxs)("div",{className:"bg-[#323232] hover:bg-[#4d4d4d] duration-500 h-[100px] object-contain w-[80%] rounded-[10px] m-5 max-sm:m-[30px] max-sm:mt-[-25px] cursor-pointer z-10 flex flex- justify-start",onClick:function(){return o(a.toLowerCase())},onPointerOver:function(){return o(a.toLowerCase())},onPointerOut:function(){return o("idle")},children:[(0,p.jsxs)("div",{className:"flex flex-col w-[20%]",children:[(0,p.jsx)("img",{src:i,alt:"tech icon",className:"h-10 w-10 mt-[5px] ml-[10px]"}),(0,p.jsx)("h3",{className:"text-white mt-[5px] ml-[10px] font-heading font-semibold max-md:text-[12px]",children:n})]}),(0,p.jsx)("div",{className:"w-[80%] object-contain",children:(0,p.jsx)("p",{className:"text-[#a5a5a5] text-[15px] max-sm:text-[12px] max-md:text-[12px] font-body object-contain font-semibold p-2 max-sm:p-1",children:r})})]},t)}))})]})},ex=n.p+"static/media/What.288c668ccb8033e17ce1.png",tx=n.p+"static/media/Gmail.248fdeff31771e6d41f0.png";n.p;var nx=function(){return(0,p.jsxs)("div",{id:"footer",className:"bg-[#121212] h-[40vh] w-full flex flex-col justify-center items-center",children:[(0,p.jsxs)("h1",{className:"font-sans font-semibold text-[20px] text-[#898989]",children:["Let's Build something  ",(0,p.jsx)("span",{className:"bg-gradient-to-r from-[#3d74ff] to-[#3dd8ff] text-transparent bg-clip-text",children:"Amazing"}),"\ud83d\ude80"," Together"]}),(0,p.jsx)("div",{className:"flex flex-row h-full w-full",children:(0,p.jsxs)("div",{id:"left_side",className:"h-full w-full flex justify-center items-left flex-col",children:[(0,p.jsx)("h3",{id:"Contacts",className:"font-sans font-semibold text-[20px] text-[#898989] m-[10px]",children:"Contact Me"}),(0,p.jsxs)("div",{className:"flex flex-row h-fit w-full",children:[(0,p.jsxs)("div",{id:"whatsapp_container",className:"flex flex-row justify-center items-center w-fit m-[10px]",children:[(0,p.jsx)("img",{src:ex,alt:"whatsapp",className:"h-[20px] w-[20px]"}),(0,p.jsx)("p",{id:"number",className:"font-sans text-[15px] text-[#898989]",children:"+53 50219524"})]}),(0,p.jsxs)("div",{id:"gmail_container",className:"flex flex-row justify-center items-center w-fit m-[10px]",children:[(0,p.jsx)("img",{src:tx,alt:"whatsapp",className:"h-[20px] w-[20px]"}),(0,p.jsx)("p",{id:"number",className:"font-sans text-[15px] text-[#898989]",children:"cyberjay826@gmail.com"})]})]})]})})]})},rx=W((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Network Error";V(this,e),this.status=t,this.text=n})),ix={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:function(){if("undefined"!==typeof localStorage)return{get:function(e){return Promise.resolve(localStorage.getItem(e))},set:function(e,t){return Promise.resolve(localStorage.setItem(e,t))},remove:function(e){return Promise.resolve(localStorage.removeItem(e))}}}()},ax=function(e){return e?"string"===typeof e?{publicKey:e}:"[object Object]"===e.toString()?e:{}:{}},ox=function(){var e=ie(se().mark((function e(t,n){var r,i,a,o,s=arguments;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]?s[2]:{},e.next=3,fetch(ix.origin+t,{method:"POST",headers:r,body:n});case 3:return i=e.sent,e.next=6,i.text();case 6:if(a=e.sent,o=new rx(i.status,a),!i.ok){e.next=10;break}return e.abrupt("return",o);case 10:throw o;case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),sx=function(e,t,n){if(!e||"string"!==typeof e)throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!t||"string"!==typeof t)throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!n||"string"!==typeof n)throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"},ux=function(e){if(e&&"[object Object]"!==e.toString())throw"The template params have to be the object. Visit https://www.emailjs.com/docs/sdk/send/"},lx=function(e){return e.webdriver||!e.languages||0===e.languages.length},cx=function(){return new rx(451,"Unavailable For Headless Browser")},hx=function(e,t){if(function(e){var t;return!(null!==(t=e.list)&&void 0!==t&&t.length)||!e.watchVariable}(e))return!1;!function(e,t){if(!Array.isArray(e))throw"The BlockList list has to be an array";if("string"!==typeof t)throw"The BlockList watchVariable has to be a string"}(e.list,e.watchVariable);var n,r,i=(n=t,r=e.watchVariable,n instanceof FormData?n.get(r):n[r]);return"string"===typeof i&&e.list.includes(i)},dx=function(){return new rx(403,"Forbidden")},fx=function(e,t){if("number"!==typeof e||e<0)throw"The LimitRate throttle has to be a positive number";if(t&&"string"!==typeof t)throw"The LimitRate ID has to be a non-empty string"},px=function(){var e=ie(se().mark((function e(t,n,r){var i;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Number,e.next=3,r.get(t);case 3:if(e.t1=e.sent,e.t1){e.next=6;break}e.t1=0;case 6:return e.t2=e.t1,i=(0,e.t0)(e.t2),e.abrupt("return",n-Date.now()+i);case 9:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),Ax=function(){var e=ie(se().mark((function e(t,n,r){var i;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.throttle&&r){e.next=2;break}return e.abrupt("return",!1);case 2:return fx(n.throttle,n.id),i=n.id||t,e.next=6,px(i,n.throttle,r);case 6:if(!(e.sent>0)){e.next=9;break}return e.abrupt("return",!0);case 9:return e.next=11,r.set(i,Date.now().toString());case 11:return e.abrupt("return",!1);case 12:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),vx=function(){return new rx(429,"Too Many Requests")},mx=function(){var e=ie(se().mark((function e(t,n,r,i){var a,o,s,u,l,c,h;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=ax(i),o=a.publicKey||ix.publicKey,s=a.blockHeadless||ix.blockHeadless,u=a.storageProvider||ix.storageProvider,l=b(b({},ix.blockList),a.blockList),c=b(b({},ix.limitRate),a.limitRate),!s||!lx(navigator)){e.next=8;break}return e.abrupt("return",Promise.reject(cx()));case 8:if(sx(o,t,n),ux(r),!r||!hx(l,r)){e.next=12;break}return e.abrupt("return",Promise.reject(dx()));case 12:return e.next=14,Ax(location.pathname,c,u);case 14:if(!e.sent){e.next=16;break}return e.abrupt("return",Promise.reject(vx()));case 16:return h={lib_version:"4.4.1",user_id:o,service_id:t,template_id:n,template_params:r},e.abrupt("return",ox("/api/v1.0/email/send",JSON.stringify(h),{"Content-type":"application/json"}));case 18:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}(),gx=function(e){if(!e||"FORM"!==e.nodeName)throw"The 3rd parameter is expected to be the HTML form element or the style selector of the form"},yx=function(e){return"string"===typeof e?document.querySelector(e):e},bx=function(){var e=ie(se().mark((function e(t,n,r,i){var a,o,s,u,l,c,h,d;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=ax(i),o=a.publicKey||ix.publicKey,s=a.blockHeadless||ix.blockHeadless,u=ix.storageProvider||a.storageProvider,l=b(b({},ix.blockList),a.blockList),c=b(b({},ix.limitRate),a.limitRate),!s||!lx(navigator)){e.next=8;break}return e.abrupt("return",Promise.reject(cx()));case 8:if(h=yx(r),sx(o,t,n),gx(h),d=new FormData(h),!hx(l,d)){e.next=14;break}return e.abrupt("return",Promise.reject(dx()));case 14:return e.next=16,Ax(location.pathname,c,u);case 16:if(!e.sent){e.next=18;break}return e.abrupt("return",Promise.reject(vx()));case 18:return d.append("lib_version","4.4.1"),d.append("service_id",t),d.append("template_id",n),d.append("user_id",o),e.abrupt("return",ox("/api/v1.0/email/send-form",d));case 23:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}(),xx={init:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"https://api.emailjs.com";if(e){var n=ax(e);ix.publicKey=n.publicKey,ix.blockHeadless=n.blockHeadless,ix.storageProvider=n.storageProvider,ix.blockList=n.blockList,ix.limitRate=n.limitRate,ix.origin=n.origin||t}},send:mx,sendForm:bx,EmailJSResponseStatus:rx},_x=function(){var e=(0,r.useRef)(),t=l((0,r.useState)(!1),2),n=t[0],i=t[1],a=l((0,r.useState)({name:"",email:"",message:""}),2),o=a[0],s=a[1],u=function(e){var t=e.target,n=t.name,r=t.value;s(b(b({},o),{},g({},n,r)))},c=function(){var e=ie(se().mark((function e(t){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),i(!0),e.prev=2,e.next=5,xx.send("service_vwsqpxr","template_61jrj8h",{from_name:o.name,to_name:"Jay",from_email:o.email,to_email:"CyberJay826@gmail.com",message:o.message},"Aq1MKkHaXC9WkHO5P");case 5:i(!1),alert("Your message has been sent!"),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),i(!1),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}();return(0,p.jsx)("div",{id:"email",className:"h-[90vh] w-full flex justify-center items-center bg-[#212121]",children:(0,p.jsxs)("div",{className:"relative h-[80%] max-sm:h-fit w-[80%] flex items-center border rounded-[10px] p-10 max-sm:p-5 justify-center flex-col",children:[(0,p.jsx)("img",{src:"",alt:"",className:"absolute inset-0 min-h-screen"}),(0,p.jsxs)("div",{className:"contact-container z-50",children:[(0,p.jsx)("h3",{className:"head-text text-white font-sans font-semibold",children:"Let's Talk"}),(0,p.jsx)("p",{className:"text-lg text-[#a5a5a5]",children:"wether you're looking to build a new website, improve your existing platform, or bring a unique project to life, I'm here to help."}),(0,p.jsxs)("form",{action:"",ref:e,onSubmit:c,className:"flex flex-col justify-center items-center",children:[(0,p.jsx)("label",{className:"text-white font-sans font-semibold w-full m-[2px]",children:(0,p.jsx)("span",{className:"field-label",children:"Full Name"})}),(0,p.jsx)("input",{type:"text",name:"name",value:o.name,onChange:u,required:!0,className:"bg-[#323232] rounded-[5px] w-full m-[2px] text-white",placeholder:"Jhon Doe"}),(0,p.jsx)("label",{className:"text-white font-sans font-semibold w-full m-[2px]",children:(0,p.jsx)("span",{className:"field-label",children:"Email"})}),(0,p.jsx)("input",{type:"email",name:"email",value:o.email,onChange:u,required:!0,className:"bg-[#323232] rounded-[5px] w-full m-[2px] text-white",placeholder:"JhonDoe@gmail.com"}),(0,p.jsx)("label",{className:"text-white font-sans font-semibold w-full m-[2px]",children:(0,p.jsx)("span",{className:"field-label",children:"Your Message"})}),(0,p.jsx)("textarea",{name:"message",value:o.message,onChange:u,required:!0,rows:5,className:"bg-[#323232] rounded-[5px] w-full m-[2px] text-white",placeholder:"Hi, I\xb4m interested in..."}),(0,p.jsx)("button",{type:"submit",disabled:n,className:"w-full text-white m-[5px] rounded-[10px] bg-[#323232] cursor-pointer font-sans font-semibold hover:bg-[#494949] py-2",children:n?"Sending...":"Send Message"})]})]})]})})},wx=n.p+"static/media/grid1.a77346e231d257c0d659.png",Sx=n.p+"static/media/grid2.45110f7c980fb4b16194.png",Mx=n.p+"static/media/grid3.1f16ca417f6a25d1579c.png";n.p;function kx(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Tx(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,s=[],u=!0,l=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(c){l=!0,i=c}finally{try{if(!u&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(l)throw i}}return s}}(e,t)||Cx(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ex(e){return function(e){if(Array.isArray(e))return Rx(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Cx(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Cx(e,t){if(e){if("string"===typeof e)return Rx(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Rx(e,t):void 0}}function Rx(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Bx=function(e,t){var n=new Set(t);return Object.assign.apply(Object,[{}].concat(Ex(Object.entries(e).filter((function(e){var t=Tx(e,1)[0];return!n.has(t)})).map((function(e){var t=Tx(e,2);return kx({},t[0],t[1])})))))};function Px(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Nx(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,s=[],u=!0,l=!1;try{if(a=(n=n.call(e)).next,0===t);else for(;!(u=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(e){l=!0,i=e}finally{try{if(!u&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(l)throw i}}return s}}(e,t)||Dx(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ix(e){return function(e){if(Array.isArray(e))return Px(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Dx(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Dx(e,t){if(e){if("string"==typeof e)return Px(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Px(e,t):void 0}}function Lx(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.useEffect,n=(0,r.useRef)(),i=(0,r.useRef)(!1),a=(0,r.useRef)(!1),o=(0,r.useState)(0),s=Nx(o,2);s[0];var u=s[1];i.current&&(a.current=!0),t((function(){return i.current||(n.current=e(),i.current=!0),u((function(e){return e+1})),function(){a.current&&n.current&&n.current()}}),[])}var Ox=function(e){Y(n,e);var t=$(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.createElement("div");return V(this,n),(e=t.call(this)).isCSS2DObject=!0,e.element=r,e.element.style.position="absolute",e.element.style.userSelect="none",e.element.setAttribute("draggable",!1),e.center=new ii(.5,.5),e.addEventListener("removed",(function(){this.traverse((function(e){e.element instanceof e.element.ownerDocument.defaultView.Element&&null!==e.element.parentNode&&e.element.remove()}))})),e}return W(n,[{key:"copy",value:function(e,t){return oe(Q(n.prototype),"copy",this).call(this,e,t),this.element=e.element.cloneNode(!0),this.center=e.center,this}}]),n}(Ha),Fx=new zi,Ux=new va,zx=new va,Gx=new zi,qx=new zi,Hx=W((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};V(this,e);var n,r,i,a,o=this,s={objects:new WeakMap},u=void 0!==t.element?t.element:document.createElement("div");function l(e){e.isCSS2DObject&&(e.element.style.display="none");for(var t=0,n=e.children.length;t<n;t++)l(e.children[t])}function c(e,t,n){if(!1!==e.visible){if(e.isCSS2DObject){Fx.setFromMatrixPosition(e.matrixWorld),Fx.applyMatrix4(zx);var r=Fx.z>=-1&&Fx.z<=1&&!0===e.layers.test(n.layers),d=e.element;d.style.display=!0===r?"":"none",!0===r&&(e.onBeforeRender(o,t,n),d.style.transform="translate("+-100*e.center.x+"%,"+-100*e.center.y+"%)translate("+(Fx.x*i+i)+"px,"+(-Fx.y*a+a)+"px)",d.parentNode!==u&&u.appendChild(d),e.onAfterRender(o,t,n));var f={distanceToCameraSquared:h(n,e)};s.objects.set(e,f)}for(var p=0,A=e.children.length;p<A;p++)c(e.children[p],t,n)}else l(e)}function h(e,t){return Gx.setFromMatrixPosition(e.matrixWorld),qx.setFromMatrixPosition(t.matrixWorld),Gx.distanceToSquared(qx)}function d(e){var t=[];return e.traverseVisible((function(e){e.isCSS2DObject&&t.push(e)})),t}function f(e){for(var t=d(e).sort((function(e,t){return e.renderOrder!==t.renderOrder?t.renderOrder-e.renderOrder:s.objects.get(e).distanceToCameraSquared-s.objects.get(t).distanceToCameraSquared})),n=t.length,r=0,i=t.length;r<i;r++)t[r].element.style.zIndex=n-r}u.style.overflow="hidden",this.domElement=u,this.getSize=function(){return{width:n,height:r}},this.render=function(e,t){!0===e.matrixWorldAutoUpdate&&e.updateMatrixWorld(),null===t.parent&&!0===t.matrixWorldAutoUpdate&&t.updateMatrixWorld(),Ux.copy(t.matrixWorldInverse),zx.multiplyMatrices(t.projectionMatrix,Ux),c(e,e,t),f(e)},this.setSize=function(e,t){i=(n=e)/2,a=(r=t)/2,u.style.width=e+"px",u.style.height=t+"px"}}));var Vx=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},jx="object"==typeof global&&global&&global.Object===Object&&global,Wx="object"==typeof self&&self&&self.Object===Object&&self,Xx=jx||Wx||Function("return this")(),Yx=function(){return Xx.Date.now()},Qx=/\s/;var Jx=function(e){for(var t=e.length;t--&&Qx.test(e.charAt(t)););return t},Kx=/^\s+/;var Zx=function(e){return e?e.slice(0,Jx(e)+1).replace(Kx,""):e},$x=Xx.Symbol,e_=Object.prototype,t_=e_.hasOwnProperty,n_=e_.toString,r_=$x?$x.toStringTag:void 0;var i_=function(e){var t=t_.call(e,r_),n=e[r_];try{e[r_]=void 0;var r=!0}catch(_5){}var i=n_.call(e);return r&&(t?e[r_]=n:delete e[r_]),i},a_=Object.prototype.toString;var o_=function(e){return a_.call(e)},s_=$x?$x.toStringTag:void 0;var u_=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":s_&&s_ in Object(e)?i_(e):o_(e)};var l_=function(e){return null!=e&&"object"==typeof e};var c_=function(e){return"symbol"==typeof e||l_(e)&&"[object Symbol]"==u_(e)},h_=/^[-+]0x[0-9a-f]+$/i,d_=/^0b[01]+$/i,f_=/^0o[0-7]+$/i,p_=parseInt;var A_=function(e){if("number"==typeof e)return e;if(c_(e))return NaN;if(Vx(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Vx(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Zx(e);var n=d_.test(e);return n||f_.test(e)?p_(e.slice(2),n?2:8):h_.test(e)?NaN:+e},v_=Math.max,m_=Math.min;var g_=function(e,t,n){var r,i,a,o,s,u,l=0,c=!1,h=!1,d=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function f(t){var n=r,a=i;return r=i=void 0,l=t,o=e.apply(a,n)}function p(e){return l=e,s=setTimeout(v,t),c?f(e):o}function A(e){var n=e-u;return void 0===u||n>=t||n<0||h&&e-l>=a}function v(){var e=Yx();if(A(e))return m(e);s=setTimeout(v,function(e){var n=t-(e-u);return h?m_(n,a-(e-l)):n}(e))}function m(e){return s=void 0,d&&r?f(e):(r=i=void 0,o)}function g(){var e=Yx(),n=A(e);if(r=arguments,i=this,u=e,n){if(void 0===s)return p(u);if(h)return clearTimeout(s),s=setTimeout(v,t),f(u)}return void 0===s&&(s=setTimeout(v,t)),o}return t=A_(t)||0,Vx(n)&&(c=!!n.leading,a=(h="maxWait"in n)?v_(A_(n.maxWait)||0,t):a,d="trailing"in n?!!n.trailing:d),g.cancel=function(){void 0!==s&&clearTimeout(s),l=0,r=u=i=s=void 0},g.flush=function(){return void 0===s?o:m(Yx())},g};function y_(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function b_(e,t,n){return Object.defineProperty(e,"prototype",{writable:!1}),e}function x_(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,s=[],u=!0,l=!1;try{if(a=(n=n.call(e)).next,0===t);else for(;!(u=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(e){l=!0,i=e}finally{try{if(!u&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(l)throw i}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return y_(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?y_(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var __=b_((function e(t,n){var r=n.default,i=void 0===r?null:r,a=n.triggerUpdate,o=void 0===a||a,s=n.onChange,u=void 0===s?function(e,t){}:s;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.name=t,this.defaultVal=i,this.triggerUpdate=o,this.onChange=u}));function w_(e){var t=e.stateInit,n=void 0===t?function(){return{}}:t,r=e.props,i=void 0===r?{}:r,a=e.methods,o=void 0===a?{}:a,s=e.aliases,u=void 0===s?{}:s,l=e.init,c=void 0===l?function(){}:l,h=e.update,d=void 0===h?function(){}:h,f=Object.keys(i).map((function(e){return new __(e,i[e])}));return function e(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];var a=!!(this instanceof e?this.constructor:void 0),s=a?r.shift():void 0,l=r[0],h=void 0===l?{}:l,p=Object.assign({},n instanceof Function?n(h):n,{initialised:!1}),A={};function v(e){return m(e,h),g(),v}var m=function(e,t){c.call(v,e,p,t),p.initialised=!0},g=g_((function(){p.initialised&&(d.call(v,p,A),A={})}),1);return f.forEach((function(e){v[e.name]=function(e){var t=e.name,n=e.triggerUpdate,r=void 0!==n&&n,i=e.onChange,a=void 0===i?function(e,t){}:i,o=e.defaultVal,s=void 0===o?null:o;return function(e){var n=p[t];if(!arguments.length)return n;var i=void 0===e?s:e;return p[t]=i,a.call(v,i,p,n),!A.hasOwnProperty(t)&&(A[t]=n),r&&g(),v}}(e)})),Object.keys(o).forEach((function(e){v[e]=function(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=o[e]).call.apply(t,[v,p].concat(r))}})),Object.entries(u).forEach((function(e){var t=x_(e,2),n=t[0],r=t[1];return v[n]=v[r]})),v.resetProps=function(){return f.forEach((function(e){v[e.name](e.defaultVal)})),v},v.resetProps(),p._rerender=g,a&&s&&v(s),v}}var S_=Object.freeze({Linear:Object.freeze({None:function(e){return e},In:function(e){return e},Out:function(e){return e},InOut:function(e){return e}}),Quadratic:Object.freeze({In:function(e){return e*e},Out:function(e){return e*(2-e)},InOut:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)}}),Cubic:Object.freeze({In:function(e){return e*e*e},Out:function(e){return--e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)}}),Quartic:Object.freeze({In:function(e){return e*e*e*e},Out:function(e){return 1- --e*e*e*e},InOut:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)}}),Quintic:Object.freeze({In:function(e){return e*e*e*e*e},Out:function(e){return--e*e*e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)}}),Sinusoidal:Object.freeze({In:function(e){return 1-Math.sin((1-e)*Math.PI/2)},Out:function(e){return Math.sin(e*Math.PI/2)},InOut:function(e){return.5*(1-Math.sin(Math.PI*(.5-e)))}}),Exponential:Object.freeze({In:function(e){return 0===e?0:Math.pow(1024,e-1)},Out:function(e){return 1===e?1:1-Math.pow(2,-10*e)},InOut:function(e){return 0===e?0:1===e?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(2-Math.pow(2,-10*(e-1)))}}),Circular:Object.freeze({In:function(e){return 1-Math.sqrt(1-e*e)},Out:function(e){return Math.sqrt(1- --e*e)},InOut:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)}}),Elastic:Object.freeze({In:function(e){return 0===e?0:1===e?1:-Math.pow(2,10*(e-1))*Math.sin(5*(e-1.1)*Math.PI)},Out:function(e){return 0===e?0:1===e?1:Math.pow(2,-10*e)*Math.sin(5*(e-.1)*Math.PI)+1},InOut:function(e){return 0===e?0:1===e?1:(e*=2)<1?-.5*Math.pow(2,10*(e-1))*Math.sin(5*(e-1.1)*Math.PI):.5*Math.pow(2,-10*(e-1))*Math.sin(5*(e-1.1)*Math.PI)+1}}),Back:Object.freeze({In:function(e){var t=1.70158;return 1===e?1:e*e*((t+1)*e-t)},Out:function(e){var t=1.70158;return 0===e?0:--e*e*((t+1)*e+t)+1},InOut:function(e){var t=2.5949095;return(e*=2)<1?e*e*((t+1)*e-t)*.5:.5*((e-=2)*e*((t+1)*e+t)+2)}}),Bounce:Object.freeze({In:function(e){return 1-S_.Bounce.Out(1-e)},Out:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},InOut:function(e){return e<.5?.5*S_.Bounce.In(2*e):.5*S_.Bounce.Out(2*e-1)+.5}}),generatePow:function(e){return void 0===e&&(e=4),e=(e=e<Number.EPSILON?Number.EPSILON:e)>1e4?1e4:e,{In:function(t){return Math.pow(t,e)},Out:function(t){return 1-Math.pow(1-t,e)},InOut:function(t){return t<.5?Math.pow(2*t,e)/2:(1-Math.pow(2-2*t,e))/2+.5}}}}),M_=function(){return performance.now()},k_=function(){function e(){this._tweens={},this._tweensAddedDuringUpdate={}}return e.prototype.getAll=function(){var e=this;return Object.keys(this._tweens).map((function(t){return e._tweens[t]}))},e.prototype.removeAll=function(){this._tweens={}},e.prototype.add=function(e){this._tweens[e.getId()]=e,this._tweensAddedDuringUpdate[e.getId()]=e},e.prototype.remove=function(e){delete this._tweens[e.getId()],delete this._tweensAddedDuringUpdate[e.getId()]},e.prototype.update=function(e,t){void 0===e&&(e=M_()),void 0===t&&(t=!1);var n=Object.keys(this._tweens);if(0===n.length)return!1;for(;n.length>0;){this._tweensAddedDuringUpdate={};for(var r=0;r<n.length;r++){var i=this._tweens[n[r]],a=!t;i&&!1===i.update(e,a)&&!t&&delete this._tweens[n[r]]}n=Object.keys(this._tweensAddedDuringUpdate)}return!0},e}(),T_={Linear:function(e,t){var n=e.length-1,r=n*t,i=Math.floor(r),a=T_.Utils.Linear;return t<0?a(e[0],e[1],r):t>1?a(e[n],e[n-1],n-r):a(e[i],e[i+1>n?n:i+1],r-i)},Bezier:function(e,t){for(var n=0,r=e.length-1,i=Math.pow,a=T_.Utils.Bernstein,o=0;o<=r;o++)n+=i(1-t,r-o)*i(t,o)*e[o]*a(r,o);return n},CatmullRom:function(e,t){var n=e.length-1,r=n*t,i=Math.floor(r),a=T_.Utils.CatmullRom;return e[0]===e[n]?(t<0&&(i=Math.floor(r=n*(1+t))),a(e[(i-1+n)%n],e[i],e[(i+1)%n],e[(i+2)%n],r-i)):t<0?e[0]-(a(e[0],e[0],e[1],e[1],-r)-e[0]):t>1?e[n]-(a(e[n],e[n],e[n-1],e[n-1],r-n)-e[n]):a(e[i?i-1:0],e[i],e[n<i+1?n:i+1],e[n<i+2?n:i+2],r-i)},Utils:{Linear:function(e,t,n){return(t-e)*n+e},Bernstein:function(e,t){var n=T_.Utils.Factorial;return n(e)/n(t)/n(e-t)},Factorial:function(){var e=[1];return function(t){var n=1;if(e[t])return e[t];for(var r=t;r>1;r--)n*=r;return e[t]=n,n}}(),CatmullRom:function(e,t,n,r,i){var a=.5*(n-e),o=.5*(r-t),s=i*i;return(2*t-2*n+a+o)*(i*s)+(-3*t+3*n-2*a-o)*s+a*i+t}}},E_=function(){function e(){}return e.nextId=function(){return e._nextId++},e._nextId=0,e}(),C_=new k_,R_=function(){function e(e,t){void 0===t&&(t=C_),this._object=e,this._group=t,this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._isDynamic=!1,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=S_.Linear.None,this._interpolationFunction=T_.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._id=E_.nextId(),this._isChainStopped=!1,this._propertiesAreSetUp=!1,this._goToEnd=!1}return e.prototype.getId=function(){return this._id},e.prototype.isPlaying=function(){return this._isPlaying},e.prototype.isPaused=function(){return this._isPaused},e.prototype.getDuration=function(){return this._duration},e.prototype.to=function(e,t){if(void 0===t&&(t=1e3),this._isPlaying)throw new Error("Can not call Tween.to() while Tween is already started or paused. Stop the Tween first.");return this._valuesEnd=e,this._propertiesAreSetUp=!1,this._duration=t<0?0:t,this},e.prototype.duration=function(e){return void 0===e&&(e=1e3),this._duration=e<0?0:e,this},e.prototype.dynamic=function(e){return void 0===e&&(e=!1),this._isDynamic=e,this},e.prototype.start=function(e,t){if(void 0===e&&(e=M_()),void 0===t&&(t=!1),this._isPlaying)return this;if(this._group&&this._group.add(this),this._repeat=this._initialRepeat,this._reversed)for(var n in this._reversed=!1,this._valuesStartRepeat)this._swapEndStartRepeatValues(n),this._valuesStart[n]=this._valuesStartRepeat[n];if(this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=e,this._startTime+=this._delayTime,!this._propertiesAreSetUp||t){if(this._propertiesAreSetUp=!0,!this._isDynamic){var r={};for(var i in this._valuesEnd)r[i]=this._valuesEnd[i];this._valuesEnd=r}this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat,t)}return this},e.prototype.startFromCurrentValues=function(e){return this.start(e,!0)},e.prototype._setupProperties=function(e,t,n,r,i){for(var a in n){var o=e[a],s=Array.isArray(o),u=s?"array":typeof o,l=!s&&Array.isArray(n[a]);if("undefined"!==u&&"function"!==u){if(l){if(0===(v=n[a]).length)continue;for(var c=[o],h=0,d=v.length;h<d;h+=1){var f=this._handleRelativeValue(o,v[h]);if(isNaN(f)){l=!1,console.warn("Found invalid interpolation list. Skipping.");break}c.push(f)}l&&(n[a]=c)}if("object"!==u&&!s||!o||l)("undefined"===typeof t[a]||i)&&(t[a]=o),s||(t[a]*=1),r[a]=l?n[a].slice().reverse():t[a]||0;else{t[a]=s?[]:{};var p=o;for(var A in p)t[a][A]=p[A];r[a]=s?[]:{};var v=n[a];if(!this._isDynamic){var m={};for(var A in v)m[A]=v[A];n[a]=v=m}this._setupProperties(p,t[a],v,r[a],i)}}}},e.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._group&&this._group.remove(this),this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},e.prototype.end=function(){return this._goToEnd=!0,this.update(1/0),this},e.prototype.pause=function(e){return void 0===e&&(e=M_()),this._isPaused||!this._isPlaying||(this._isPaused=!0,this._pauseStart=e,this._group&&this._group.remove(this)),this},e.prototype.resume=function(e){return void 0===e&&(e=M_()),this._isPaused&&this._isPlaying?(this._isPaused=!1,this._startTime+=e-this._pauseStart,this._pauseStart=0,this._group&&this._group.add(this),this):this},e.prototype.stopChainedTweens=function(){for(var e=0,t=this._chainedTweens.length;e<t;e++)this._chainedTweens[e].stop();return this},e.prototype.group=function(e){return void 0===e&&(e=C_),this._group=e,this},e.prototype.delay=function(e){return void 0===e&&(e=0),this._delayTime=e,this},e.prototype.repeat=function(e){return void 0===e&&(e=0),this._initialRepeat=e,this._repeat=e,this},e.prototype.repeatDelay=function(e){return this._repeatDelayTime=e,this},e.prototype.yoyo=function(e){return void 0===e&&(e=!1),this._yoyo=e,this},e.prototype.easing=function(e){return void 0===e&&(e=S_.Linear.None),this._easingFunction=e,this},e.prototype.interpolation=function(e){return void 0===e&&(e=T_.Linear),this._interpolationFunction=e,this},e.prototype.chain=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this._chainedTweens=e,this},e.prototype.onStart=function(e){return this._onStartCallback=e,this},e.prototype.onEveryStart=function(e){return this._onEveryStartCallback=e,this},e.prototype.onUpdate=function(e){return this._onUpdateCallback=e,this},e.prototype.onRepeat=function(e){return this._onRepeatCallback=e,this},e.prototype.onComplete=function(e){return this._onCompleteCallback=e,this},e.prototype.onStop=function(e){return this._onStopCallback=e,this},e.prototype.update=function(e,t){var n,r,i=this;if(void 0===e&&(e=M_()),void 0===t&&(t=!0),this._isPaused)return!0;var a=this._startTime+this._duration;if(!this._goToEnd&&!this._isPlaying){if(e>a)return!1;t&&this.start(e,!0)}if(this._goToEnd=!1,e<this._startTime)return!0;!1===this._onStartCallbackFired&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),!1===this._onEveryStartCallbackFired&&(this._onEveryStartCallback&&this._onEveryStartCallback(this._object),this._onEveryStartCallbackFired=!0);var o=e-this._startTime,s=this._duration+(null!==(n=this._repeatDelayTime)&&void 0!==n?n:this._delayTime),u=this._duration+this._repeat*s,l=function(){if(0===i._duration)return 1;if(o>u)return 1;var e=Math.trunc(o/s),t=o-e*s,n=Math.min(t/i._duration,1);return 0===n&&o===i._duration?1:n}(),c=this._easingFunction(l);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,c),this._onUpdateCallback&&this._onUpdateCallback(this._object,l),0===this._duration||o>=this._duration){if(this._repeat>0){var h=Math.min(Math.trunc((o-this._duration)/s)+1,this._repeat);for(r in isFinite(this._repeat)&&(this._repeat-=h),this._valuesStartRepeat)this._yoyo||"string"!==typeof this._valuesEnd[r]||(this._valuesStartRepeat[r]=this._valuesStartRepeat[r]+parseFloat(this._valuesEnd[r])),this._yoyo&&this._swapEndStartRepeatValues(r),this._valuesStart[r]=this._valuesStartRepeat[r];return this._yoyo&&(this._reversed=!this._reversed),this._startTime+=s*h,this._onRepeatCallback&&this._onRepeatCallback(this._object),this._onEveryStartCallbackFired=!1,!0}this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var d=0,f=this._chainedTweens.length;d<f;d++)this._chainedTweens[d].start(this._startTime+this._duration,!1);return this._isPlaying=!1,!1}return!0},e.prototype._updateProperties=function(e,t,n,r){for(var i in n)if(void 0!==t[i]){var a=t[i]||0,o=n[i],s=Array.isArray(e[i]),u=Array.isArray(o);!s&&u?e[i]=this._interpolationFunction(o,r):"object"===typeof o&&o?this._updateProperties(e[i],a,o,r):"number"===typeof(o=this._handleRelativeValue(a,o))&&(e[i]=a+(o-a)*r)}},e.prototype._handleRelativeValue=function(e,t){return"string"!==typeof t?t:"+"===t.charAt(0)||"-"===t.charAt(0)?e+parseFloat(t):parseFloat(t)},e.prototype._swapEndStartRepeatValues=function(e){var t=this._valuesStartRepeat[e],n=this._valuesEnd[e];this._valuesStartRepeat[e]="string"===typeof n?this._valuesStartRepeat[e]+parseFloat(n):this._valuesEnd[e],this._valuesEnd[e]=t},e}(),B_=(E_.nextId,C_);B_.getAll.bind(B_),B_.removeAll.bind(B_),B_.add.bind(B_),B_.remove.bind(B_),B_.update.bind(B_);function P_(e,t){var n,r,i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,o=t&&t.length,s=o?t[0]*a:e.length,u=N_(e,0,s,a,!0),l=[];if(!u||u.next===u.prev)return l;if(o&&(u=z_(e,t,u,a)),e.length>80*a){n=1/0,r=1/0;for(var c=-1/0,h=-1/0,d=a;d<s;d+=a){var f=e[d],p=e[d+1];f<n&&(n=f),p<r&&(r=p),f>c&&(c=f),p>h&&(h=p)}i=0!==(i=Math.max(c-n,h-r))?32767/i:0}return D_(u,l,a,n,r,i,0),l}function N_(e,t,n,r,i){var a;if(i===aw(e,t,n,r)>0)for(var o=t;o<n;o+=r)a=nw(o/r|0,e[o],e[o+1],a);else for(var s=n-r;s>=t;s-=r)a=nw(s/r|0,e[s],e[s+1],a);return a&&J_(a,a.next)&&(rw(a),a=a.next),a}function I_(e,t){if(!e)return e;t||(t=e);var n,r=e;do{if(n=!1,r.steiner||!J_(r,r.next)&&0!==Q_(r.prev,r,r.next))r=r.next;else{if(rw(r),(r=t=r.prev)===r.next)break;n=!0}}while(n||r!==t);return t}function D_(e,t,n,r,i,a,o){if(e){!o&&a&&function(e,t,n,r){var i=e;do{0===i.z&&(i.z=V_(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){var t,n=1;do{var r=e,i=void 0;e=null;var a=null;for(t=0;r;){t++;for(var o=r,s=0,u=0;u<n&&(s++,o=o.nextZ);u++);for(var l=n;s>0||l>0&&o;)0!==s&&(0===l||!o||r.z<=o.z)?(i=r,r=r.nextZ,s--):(i=o,o=o.nextZ,l--),a?a.nextZ=i:e=i,i.prevZ=a,a=i;r=o}a.nextZ=null,n*=2}while(t>1)}(i)}(e,r,i,a);for(var s=e;e.prev!==e.next;){var u=e.prev,l=e.next;if(a?O_(e,r,i,a):L_(e))t.push(u.i,e.i,l.i),rw(e),e=l.next,s=l.next;else if((e=l)===s){o?1===o?D_(e=F_(I_(e),t),t,n,r,i,a,2):2===o&&U_(e,t,n,r,i,a):D_(I_(e),t,n,r,i,a,1);break}}}}function L_(e){var t=e.prev,n=e,r=e.next;if(Q_(t,n,r)>=0)return!1;for(var i=t.x,a=n.x,o=r.x,s=t.y,u=n.y,l=r.y,c=Math.min(i,a,o),h=Math.min(s,u,l),d=Math.max(i,a,o),f=Math.max(s,u,l),p=r.next;p!==t;){if(p.x>=c&&p.x<=d&&p.y>=h&&p.y<=f&&X_(i,s,a,u,o,l,p.x,p.y)&&Q_(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function O_(e,t,n,r){var i=e.prev,a=e,o=e.next;if(Q_(i,a,o)>=0)return!1;for(var s=i.x,u=a.x,l=o.x,c=i.y,h=a.y,d=o.y,f=Math.min(s,u,l),p=Math.min(c,h,d),A=Math.max(s,u,l),v=Math.max(c,h,d),m=V_(f,p,t,n,r),g=V_(A,v,t,n,r),y=e.prevZ,b=e.nextZ;y&&y.z>=m&&b&&b.z<=g;){if(y.x>=f&&y.x<=A&&y.y>=p&&y.y<=v&&y!==i&&y!==o&&X_(s,c,u,h,l,d,y.x,y.y)&&Q_(y.prev,y,y.next)>=0)return!1;if(y=y.prevZ,b.x>=f&&b.x<=A&&b.y>=p&&b.y<=v&&b!==i&&b!==o&&X_(s,c,u,h,l,d,b.x,b.y)&&Q_(b.prev,b,b.next)>=0)return!1;b=b.nextZ}for(;y&&y.z>=m;){if(y.x>=f&&y.x<=A&&y.y>=p&&y.y<=v&&y!==i&&y!==o&&X_(s,c,u,h,l,d,y.x,y.y)&&Q_(y.prev,y,y.next)>=0)return!1;y=y.prevZ}for(;b&&b.z<=g;){if(b.x>=f&&b.x<=A&&b.y>=p&&b.y<=v&&b!==i&&b!==o&&X_(s,c,u,h,l,d,b.x,b.y)&&Q_(b.prev,b,b.next)>=0)return!1;b=b.nextZ}return!0}function F_(e,t){var n=e;do{var r=n.prev,i=n.next.next;!J_(r,i)&&K_(r,n,n.next,i)&&ew(r,i)&&ew(i,r)&&(t.push(r.i,n.i,i.i),rw(n),rw(n.next),n=e=i),n=n.next}while(n!==e);return I_(n)}function U_(e,t,n,r,i,a){var o=e;do{for(var s=o.next.next;s!==o.prev;){if(o.i!==s.i&&Y_(o,s)){var u=tw(o,s);return o=I_(o,o.next),u=I_(u,u.next),D_(o,t,n,r,i,a,0),void D_(u,t,n,r,i,a,0)}s=s.next}o=o.next}while(o!==e)}function z_(e,t,n,r){for(var i=[],a=0,o=t.length;a<o;a++){var s=N_(e,t[a]*r,a<o-1?t[a+1]*r:e.length,r,!1);s===s.next&&(s.steiner=!0),i.push(j_(s))}i.sort(G_);for(var u=0;u<i.length;u++)n=q_(i[u],n);return n}function G_(e,t){var n=e.x-t.x;0===n&&(0===(n=e.y-t.y)&&(n=(e.next.y-e.y)/(e.next.x-e.x)-(t.next.y-t.y)/(t.next.x-t.x)));return n}function q_(e,t){var n=function(e,t){var n,r=t,i=e.x,a=e.y,o=-1/0;if(J_(e,r))return r;do{if(J_(e,r.next))return r.next;if(a<=r.y&&a>=r.next.y&&r.next.y!==r.y){var s=r.x+(a-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>o&&(o=s,n=r.x<r.next.x?r:r.next,s===i))return n}r=r.next}while(r!==t);if(!n)return null;var u=n,l=n.x,c=n.y,h=1/0;r=n;do{if(i>=r.x&&r.x>=l&&i!==r.x&&W_(a<c?i:o,a,l,c,a<c?o:i,a,r.x,r.y)){var d=Math.abs(a-r.y)/(i-r.x);ew(r,e)&&(d<h||d===h&&(r.x>n.x||r.x===n.x&&H_(n,r)))&&(n=r,h=d)}r=r.next}while(r!==u);return n}(e,t);if(!n)return t;var r=tw(n,e);return I_(r,r.next),I_(n,n.next)}function H_(e,t){return Q_(e.prev,e,t.prev)<0&&Q_(t.next,e,e.next)<0}function V_(e,t,n,r,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-n)*i|0)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-r)*i|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function j_(e){var t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function W_(e,t,n,r,i,a,o,s){return(i-o)*(t-s)>=(e-o)*(a-s)&&(e-o)*(r-s)>=(n-o)*(t-s)&&(n-o)*(a-s)>=(i-o)*(r-s)}function X_(e,t,n,r,i,a,o,s){return!(e===o&&t===s)&&W_(e,t,n,r,i,a,o,s)}function Y_(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&K_(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(ew(e,t)&&ew(t,e)&&function(e,t){var n=e,r=!1,i=(e.x+t.x)/2,a=(e.y+t.y)/2;do{n.y>a!==n.next.y>a&&n.next.y!==n.y&&i<(n.next.x-n.x)*(a-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}(e,t)&&(Q_(e.prev,e,t.prev)||Q_(e,t.prev,t))||J_(e,t)&&Q_(e.prev,e,e.next)>0&&Q_(t.prev,t,t.next)>0)}function Q_(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function J_(e,t){return e.x===t.x&&e.y===t.y}function K_(e,t,n,r){var i=$_(Q_(e,t,n)),a=$_(Q_(e,t,r)),o=$_(Q_(n,r,e)),s=$_(Q_(n,r,t));return i!==a&&o!==s||(!(0!==i||!Z_(e,n,t))||(!(0!==a||!Z_(e,r,t))||(!(0!==o||!Z_(n,e,r))||!(0!==s||!Z_(n,t,r)))))}function Z_(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function $_(e){return e>0?1:e<0?-1:0}function ew(e,t){return Q_(e.prev,e,e.next)<0?Q_(e,t,e.next)>=0&&Q_(e,e.prev,t)>=0:Q_(e,t,e.prev)<0||Q_(e,e.next,t)<0}function tw(e,t){var n=iw(e.i,e.x,e.y),r=iw(t.i,t.x,t.y),i=e.next,a=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,a.next=r,r.prev=a,r}function nw(e,t,n,r){var i=iw(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function rw(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function iw(e,t,n){return{i:e,x:t,y:n,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function aw(e,t,n,r){for(var i=0,a=t,o=n-r;a<n;a+=r)i+=(e[o]-e[a])*(e[a+1]+e[o+1]),o=a;return i}function ow(e){var t,n=[],r=[],i=e[0][0].length,a=0,o=0,s=ee(e);try{for(s.s();!(t=s.n()).done;){var u,l=t.value,c=ee(l);try{for(c.s();!(u=c.n()).done;)for(var h=u.value,d=0;d<i;d++)n.push(h[d])}catch(f){c.e(f)}finally{c.f()}o&&(a+=o,r.push(a)),o=l.length}}catch(f){s.e(f)}finally{s.f()}return{vertices:n,holes:r,dimensions:i}}var sw=function(){function e(){V(this,e),this._partials=new Float64Array(32),this._n=0}return W(e,[{key:"add",value:function(e){for(var t=this._partials,n=0,r=0;r<this._n&&r<32;r++){var i=t[r],a=e+i,o=Math.abs(e)<Math.abs(i)?e-(a-i):i-(a-e);o&&(t[n++]=o),e=a}return t[n]=e,this._n=n+1,this}},{key:"valueOf",value:function(){var e,t,n,r=this._partials,i=this._n,a=0;if(i>0){for(a=r[--i];i>0&&(e=a,!(n=(t=r[--i])-((a=e+t)-e))););i>0&&(n<0&&r[i-1]<0||n>0&&r[i-1]>0)&&(t=2*n)==(e=a+t)-a&&(a=e)}return a}}]),e}();var uw=1e-6,lw=1e-12,cw=Math.PI,hw=cw/2,dw=cw/4,fw=2*cw,pw=180/cw,Aw=cw/180,vw=Math.abs,mw=Math.atan,gw=Math.atan2,yw=Math.cos,bw=Math.ceil,xw=(Math.exp,Math.floor,Math.hypot),_w=(Math.log,Math.pow,Math.sin),ww=Math.sign||function(e){return e>0?1:e<0?-1:0},Sw=Math.sqrt;Math.tan;function Mw(e){return e>1?hw:e<-1?-hw:Math.asin(e)}function kw(e){return(e=_w(e/2))*e}function Tw(){}function Ew(e,t){e&&Iw.hasOwnProperty(e.type)&&Iw[e.type](e,t)}var Cw,Rw,Bw,Pw,Nw={Feature:function(e,t){Ew(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)Ew(n[r].geometry,t)}},Iw={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){Dw(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)Dw(n[r],t,0)},Polygon:function(e,t){Lw(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)Lw(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)Ew(n[r],t)}};function Dw(e,t,n){var r,i=-1,a=e.length-n;for(t.lineStart();++i<a;)r=e[i],t.point(r[0],r[1],r[2]);t.lineEnd()}function Lw(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)Dw(e[n],t,1);t.polygonEnd()}function Ow(e,t){e&&Nw.hasOwnProperty(e.type)?Nw[e.type](e,t):Ew(e,t)}var Fw={sphere:Tw,point:Tw,lineStart:function(){Fw.point=zw,Fw.lineEnd=Uw},lineEnd:Tw,polygonStart:Tw,polygonEnd:Tw};function Uw(){Fw.point=Fw.lineEnd=Tw}function zw(e,t){Rw=e*=Aw,Bw=_w(t*=Aw),Pw=yw(t),Fw.point=Gw}function Gw(e,t){e*=Aw;var n=_w(t*=Aw),r=yw(t),i=vw(e-Rw),a=yw(i),o=r*_w(i),s=Pw*n-Bw*r*a,u=Bw*n+Pw*r*a;Cw.add(gw(Sw(o*o+s*s),u)),Rw=e,Bw=n,Pw=r}var qw=[null,null],Hw={type:"LineString",coordinates:qw};function Vw(e,t){return qw[0]=e,qw[1]=t,function(e){return Cw=new sw,Ow(e,Fw),+Cw}(Hw)}function jw(e,t){var n=e[0]*Aw,r=e[1]*Aw,i=t[0]*Aw,a=t[1]*Aw,o=yw(r),s=_w(r),u=yw(a),l=_w(a),c=o*yw(n),h=o*_w(n),d=u*yw(i),f=u*_w(i),p=2*Mw(Sw(kw(a-r)+o*u*kw(i-n))),A=_w(p),v=p?function(e){var t=_w(e*=p)/A,n=_w(p-e)/A,r=n*c+t*d,i=n*h+t*f,a=n*s+t*l;return[gw(i,r)*pw,gw(a,Sw(r*r+i*i))*pw]}:function(){return[n*pw,r*pw]};return v.distance=p,v}function Ww(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Xw(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Yw(e,t,n){return t=Jw(t),function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Kw()?Reflect.construct(t,[],Jw(e).constructor):t.apply(e,n))}function Qw(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Jw(e){return Jw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Jw(e)}function Kw(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Kw=function(){return!!e})()}function Zw(e,t){return Zw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Zw(e,t)}function $w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,s=[],u=!0,l=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(e){l=!0,i=e}finally{try{if(!u&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(l)throw i}}return s}}(e,t)||tS(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function eS(e){return function(e){if(Array.isArray(e))return Xw(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||tS(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tS(e,t){if(e){if("string"==typeof e)return Xw(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Xw(e,t):void 0}}var nS=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=[],r=null;return e.forEach((function(e){if(r){var i=180*Vw(e,r)/Math.PI;if(i>t)for(var a=jw(r,e),o=r.length>2||e.length>2?Ww(r[2]||0,e[2]||0):null,s=o?function(e){return[].concat(eS(a(e)),[o(e)])}:a,u=1/Math.ceil(i/t),l=u;l<1;)n.push(s(l)),l+=u}n.push(r=e)})),n},rS="undefined"!==typeof window&&window.THREE?window.THREE:{BufferGeometry:Fo,Float32BufferAttribute:Ro},iS=(new rS.BufferGeometry).setAttribute?"setAttribute":"addAttribute",aS=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5;Qw(this,t),(n=Yw(this,t)).type="GeoJsonGeometry",n.parameters={geoJson:e,radius:r,resolution:i};var a=({Point:l,MultiPoint:c,LineString:h,MultiLineString:d,Polygon:f,MultiPolygon:p}[e.type]||function(){return[]})(e.coordinates,r),o=[],s=[],u=0;function l(e,t){return[{vertices:uS(e[1],e[0],t+(e[2]||0)),indices:[]}]}function c(e,t){var n={vertices:[],indices:[]};return e.map((function(e){return l(e,t)})).forEach((function(e){var t=$w(e,1)[0];oS(n,t)})),[n]}function h(e,t){for(var n=ow([nS(e,i).map((function(e){var n=$w(e,3),r=n[0],i=n[1],a=n[2];return uS(i,r,t+(void 0===a?0:a))}))]).vertices,r=Math.round(n.length/3),a=[],o=1;o<r;o++)a.push(o-1,o);return[{vertices:n,indices:a}]}function d(e,t){var n={vertices:[],indices:[]};return e.map((function(e){return h(e,t)})).forEach((function(e){var t=$w(e,1)[0];oS(n,t)})),[n]}function f(e,t){for(var n=ow(e.map((function(e){return nS(e,i).map((function(e){var n=$w(e,3),r=n[0],i=n[1],a=n[2];return uS(i,r,t+(void 0===a?0:a))}))}))),r=n.vertices,a=n.holes,o=a[0]||1/0,s=r.slice(0,3*o),u=r.slice(3*o),l=new Set(a),c=Math.round(r.length/3),h=[],d=[],f=1;f<c;f++)l.has(f)||(f<o?h.push(f-1,f):d.push(f-1-o,f-o));var p=[{indices:h,vertices:s}];return a.length&&p.push({indices:d,vertices:u}),p}function p(e,t){var n={vertices:[],indices:[]},r={vertices:[],indices:[]};e.map((function(e){return f(e,t)})).forEach((function(e){var t=$w(e,2),i=t[0],a=t[1];oS(n,i),a&&oS(r,a)}));var i=[n];return r.vertices.length&&i.push(r),i}return a.forEach((function(e){var t=o.length;oS({indices:o,vertices:s},e),n.addGroup(t,o.length-t,u++)})),o.length&&n.setIndex(o),s.length&&n[iS]("position",new rS.Float32BufferAttribute(s,3)),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Zw(e,t)}(t,e),n=t,Object.defineProperty(n,"prototype",{writable:!1}),n;var n}(rS.BufferGeometry);function oS(e,t){var n=Math.round(e.vertices.length/3);sS(e.vertices,t.vertices),sS(e.indices,t.indices.map((function(e){return e+n})))}function sS(e,t){var n,r=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=tS(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;e.push(i)}}catch(a){r.e(a)}finally{r.f()}}function uS(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=(90-e)*Math.PI/180,i=(90-t)*Math.PI/180;return[n*Math.sin(r)*Math.cos(i),n*Math.cos(r),n*Math.sin(r)*Math.sin(i)]}function lS(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((t-e)/n)),a=new Array(i);++r<i;)a[r]=e+r*n;return a}function cS(e,t,n){var r=lS(e,t-uw,n).concat(t);return function(e){return r.map((function(t){return[e,t]}))}}function hS(e,t,n){var r=lS(e,t-uw,n).concat(t);return function(e){return r.map((function(t){return[t,e]}))}}function dS(){return function(){var e,t,n,r,i,a,o,s,u,l,c,h,d=10,f=d,p=90,A=360,v=2.5;function m(){return{type:"MultiLineString",coordinates:g()}}function g(){return lS(bw(r/p)*p,n,p).map(c).concat(lS(bw(s/A)*A,o,A).map(h)).concat(lS(bw(t/d)*d,e,d).filter((function(e){return vw(e%p)>uw})).map(u)).concat(lS(bw(a/f)*f,i,f).filter((function(e){return vw(e%A)>uw})).map(l))}return m.lines=function(){return g().map((function(e){return{type:"LineString",coordinates:e}}))},m.outline=function(){return{type:"Polygon",coordinates:[c(r).concat(h(o).slice(1),c(n).reverse().slice(1),h(s).reverse().slice(1))]}},m.extent=function(e){return arguments.length?m.extentMajor(e).extentMinor(e):m.extentMinor()},m.extentMajor=function(e){return arguments.length?(r=+e[0][0],n=+e[1][0],s=+e[0][1],o=+e[1][1],r>n&&(e=r,r=n,n=e),s>o&&(e=s,s=o,o=e),m.precision(v)):[[r,s],[n,o]]},m.extentMinor=function(n){return arguments.length?(t=+n[0][0],e=+n[1][0],a=+n[0][1],i=+n[1][1],t>e&&(n=t,t=e,e=n),a>i&&(n=a,a=i,i=n),m.precision(v)):[[t,a],[e,i]]},m.step=function(e){return arguments.length?m.stepMajor(e).stepMinor(e):m.stepMinor()},m.stepMajor=function(e){return arguments.length?(p=+e[0],A=+e[1],m):[p,A]},m.stepMinor=function(e){return arguments.length?(d=+e[0],f=+e[1],m):[d,f]},m.precision=function(d){return arguments.length?(v=+d,u=cS(a,i,90),l=hS(t,e,v),c=cS(s,o,90),h=hS(r,n,v),m):v},m.extentMajor([[-180,-89.999999],[180,89.999999]]).extentMinor([[-180,-80.000001],[180,80.000001]])}()()}function fS(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!t||!t.isReady)throw new Error("BufferGeometryUtils: Initialized MikkTSpace library required.");if(!e.hasAttribute("position")||!e.hasAttribute("normal")||!e.hasAttribute("uv"))throw new Error('BufferGeometryUtils: Tangents require "position", "normal", and "uv" attributes.');function r(e){if(e.normalized||e.isInterleavedBufferAttribute){for(var t=new Float32Array(e.count*e.itemSize),n=0,r=0;n<e.count;n++)t[r++]=e.getX(n),t[r++]=e.getY(n),e.itemSize>2&&(t[r++]=e.getZ(n));return t}return e.array instanceof Float32Array?e.array:new Float32Array(e.array)}var i=e.index?e.toNonIndexed():e,a=t.generateTangents(r(i.attributes.position),r(i.attributes.normal),r(i.attributes.uv));if(n)for(var o=3;o<a.length;o+=4)a[o]*=-1;return i.setAttribute("tangent",new xo(a,4)),e!==i&&e.copy(i),e}function pS(e){for(var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=null!==e[0].index,r=new Set(Object.keys(e[0].attributes)),i=new Set(Object.keys(e[0].morphAttributes)),a={},o={},s=e[0].morphTargetsRelative,u=new Fo,l=0,c=0;c<e.length;++c){var h=e[c],d=0;if(n!==(null!==h.index))return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+c+". All geometries must have compatible attributes; make sure index attribute exists among all geometries, or in none of them."),null;for(var f in h.attributes){if(!r.has(f))return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+c+'. All geometries must have compatible attributes; make sure "'+f+'" attribute exists among all geometries, or in none of them.'),null;void 0===a[f]&&(a[f]=[]),a[f].push(h.attributes[f]),d++}if(d!==r.size)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+c+". Make sure all geometries have the same number of attributes."),null;if(s!==h.morphTargetsRelative)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+c+". .morphTargetsRelative must be consistent throughout all geometries."),null;for(var p in h.morphAttributes){if(!i.has(p))return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+c+".  .morphAttributes must be consistent throughout all geometries."),null;void 0===o[p]&&(o[p]=[]),o[p].push(h.morphAttributes[p])}if(t){var A=void 0;if(n)A=h.index.count;else{if(void 0===h.attributes.position)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+c+". The geometry must have either an index or a position attribute"),null;A=h.attributes.position.count}u.addGroup(l,A,c),l+=A}}if(n){for(var v=0,m=[],g=0;g<e.length;++g){for(var y=e[g].index,b=0;b<y.count;++b)m.push(y.getX(b)+v);v+=e[g].attributes.position.count}u.setIndex(m)}for(var x in a){var _=AS(a[x]);if(!_)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed while trying to merge the "+x+" attribute."),null;u.setAttribute(x,_)}for(var w in o){var S=o[w][0].length;if(0===S)break;u.morphAttributes=u.morphAttributes||{},u.morphAttributes[w]=[];for(var M=0;M<S;++M){for(var k=[],T=0;T<o[w].length;++T)k.push(o[w][T][M]);var E=AS(k);if(!E)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed while trying to merge the "+w+" morphAttribute."),null;u.morphAttributes[w].push(E)}}return u}function AS(e){for(var t,n,r,i=-1,a=0,o=0;o<e.length;++o){var s=e[o];if(void 0===t&&(t=s.array.constructor),t!==s.array.constructor)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes."),null;if(void 0===n&&(n=s.itemSize),n!==s.itemSize)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes."),null;if(void 0===r&&(r=s.normalized),r!==s.normalized)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes."),null;if(-1===i&&(i=s.gpuType),i!==s.gpuType)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.gpuType must be consistent across matching attributes."),null;a+=s.count*n}for(var u=new t(a),l=new xo(u,n,r),c=0,h=0;h<e.length;++h){var d=e[h];if(d.isInterleavedBufferAttribute)for(var f=c/n,p=0,A=d.count;p<A;p++)for(var v=0;v<n;v++){var m=d.getComponent(p,v);l.setComponent(p+f,v,m)}else u.set(d.array,c);c+=d.count*n}return void 0!==i&&(l.gpuType=i),l}function vS(e){return e.isInstancedInterleavedBufferAttribute||e.isInterleavedBufferAttribute?gS(e):e.isInstancedBufferAttribute?(new Zc).copy(e):(new xo).copy(e)}function mS(e){for(var t,n=0,r=0,i=0,a=e.length;i<a;++i){var o=e[i];if(void 0===t&&(t=o.array.constructor),t!==o.array.constructor)return console.error("AttributeBuffers of different types cannot be interleaved"),null;n+=o.array.length,r+=o.itemSize}for(var s=new vc(new t(n),r),u=0,l=[],c=["getX","getY","getZ","getW"],h=["setX","setY","setZ","setW"],d=0,f=e.length;d<f;d++){var p=e[d],A=p.itemSize,v=p.count,m=new gc(s,A,u,p.normalized);l.push(m),u+=A;for(var g=0;g<v;g++)for(var y=0;y<A;y++)m[h[y]](g,p[c[y]](g))}return l}function gS(e){var t,n=e.data.array.constructor,r=e.count,i=e.itemSize,a=e.normalized,o=new n(r*i);t=e.isInstancedInterleavedBufferAttribute?new Zc(o,i,a,e.meshPerAttribute):new xo(o,i,a);for(var s=0;s<r;s++)t.setX(s,e.getX(s)),i>=2&&t.setY(s,e.getY(s)),i>=3&&t.setZ(s,e.getZ(s)),i>=4&&t.setW(s,e.getW(s));return t}function yS(e){var t=e.attributes,n=e.morphTargets,r=new Map;for(var i in t){var a=t[i];a.isInterleavedBufferAttribute&&(r.has(a)||r.set(a,gS(a)),t[i]=r.get(a))}for(var o in n){var s=n[o];s.isInterleavedBufferAttribute&&(r.has(s)||r.set(s,gS(s)),n[o]=r.get(s))}}function bS(e){var t=0;for(var n in e.attributes){var r=e.getAttribute(n);t+=r.count*r.itemSize*r.array.BYTES_PER_ELEMENT}var i=e.getIndex();return t+=i?i.count*i.itemSize*i.array.BYTES_PER_ELEMENT:0}function xS(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e-4;t=Math.max(t,Number.EPSILON);for(var n={},r=e.getIndex(),i=e.getAttribute("position"),a=r?r.count:i.count,o=0,s=Object.keys(e.attributes),u={},l={},c=[],h=["getX","getY","getZ","getW"],d=["setX","setY","setZ","setW"],f=function(){var t=s[p],n=e.attributes[t];u[t]=new n.constructor(new n.array.constructor(n.count*n.itemSize),n.itemSize,n.normalized);var r=e.morphAttributes[t];r&&(l[t]||(l[t]=[]),r.forEach((function(e,n){var r=new e.array.constructor(e.count*e.itemSize);l[t][n]=new e.constructor(r,e.itemSize,e.normalized)})))},p=0,A=s.length;p<A;p++)f();for(var v=.5*t,m=Math.log10(1/t),g=Math.pow(10,m),y=v*g,b=0;b<a;b++){for(var x=r?r.getX(b):b,_="",w=0,S=s.length;w<S;w++)for(var M=s[w],k=e.getAttribute(M),T=k.itemSize,E=0;E<T;E++)_+="".concat(~~(k[h[E]](x)*g+y),",");if(_ in n)c.push(n[_]);else{for(var C=0,R=s.length;C<R;C++)for(var B=s[C],P=e.getAttribute(B),N=e.morphAttributes[B],I=P.itemSize,D=u[B],L=l[B],O=0;O<I;O++){var F=h[O],U=d[O];if(D[U](o,P[F](x)),N)for(var z=0,G=N.length;z<G;z++)L[z][U](o,N[z][F](x))}n[_]=o,c.push(o),o++}}var q=e.clone();for(var H in e.attributes){var V=u[H];if(q.setAttribute(H,new V.constructor(V.array.slice(0,o*V.itemSize),V.itemSize,V.normalized)),H in l)for(var j=0;j<l[H].length;j++){var W=l[H][j];q.morphAttributes[H][j]=new W.constructor(W.array.slice(0,o*W.itemSize),W.itemSize,W.normalized)}}return q.setIndex(c),q}function _S(e,t){if(t===Qn)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),e;if(t===Kn||t===Jn){var n=e.getIndex();if(null===n){var r=[],i=e.getAttribute("position");if(void 0===i)return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),e;for(var a=0;a<i.count;a++)r.push(a);e.setIndex(r),n=e.getIndex()}var o=n.count-2,s=[];if(t===Kn)for(var u=1;u<=o;u++)s.push(n.getX(0)),s.push(n.getX(u)),s.push(n.getX(u+1));else for(var l=0;l<o;l++)l%2===0?(s.push(n.getX(l)),s.push(n.getX(l+1)),s.push(n.getX(l+2))):(s.push(n.getX(l+2)),s.push(n.getX(l+1)),s.push(n.getX(l)));s.length/3!==o&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");var c=e.clone();return c.setIndex(s),c.clearGroups(),c}return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",t),e}function wS(e){var t=new zi,n=new zi,r=new zi,i=new zi,a=new zi,o=new zi,s=new zi,u=new zi,l=new zi;function c(e,c,h,d,f,p,A,v){t.fromBufferAttribute(c,f),n.fromBufferAttribute(c,p),r.fromBufferAttribute(c,A);var m=e.morphTargetInfluences;if(h&&m){s.set(0,0,0),u.set(0,0,0),l.set(0,0,0);for(var g=0,y=h.length;g<y;g++){var b=m[g],x=h[g];0!==b&&(i.fromBufferAttribute(x,f),a.fromBufferAttribute(x,p),o.fromBufferAttribute(x,A),d?(s.addScaledVector(i,b),u.addScaledVector(a,b),l.addScaledVector(o,b)):(s.addScaledVector(i.sub(t),b),u.addScaledVector(a.sub(n),b),l.addScaledVector(o.sub(r),b)))}t.add(s),n.add(u),r.add(l)}e.isSkinnedMesh&&(e.applyBoneTransform(f,t),e.applyBoneTransform(p,n),e.applyBoneTransform(A,r)),v[3*f+0]=t.x,v[3*f+1]=t.y,v[3*f+2]=t.z,v[3*p+0]=n.x,v[3*p+1]=n.y,v[3*p+2]=n.z,v[3*A+0]=r.x,v[3*A+1]=r.y,v[3*A+2]=r.z}var h,d,f,p,A,v,m,g,y=e.geometry,b=e.material,x=y.index,_=y.attributes.position,w=y.morphAttributes.position,S=y.morphTargetsRelative,M=y.attributes.normal,k=y.morphAttributes.position,T=y.groups,E=y.drawRange,C=new Float32Array(_.count*_.itemSize),R=new Float32Array(M.count*M.itemSize);if(null!==x)if(Array.isArray(b))for(p=0,v=T.length;p<v;p++)for(g=T[p],A=Math.max(g.start,E.start),m=Math.min(g.start+g.count,E.start+E.count);A<m;A+=3)c(e,_,w,S,h=x.getX(A),d=x.getX(A+1),f=x.getX(A+2),C),c(e,M,k,S,h,d,f,R);else for(p=Math.max(0,E.start),v=Math.min(x.count,E.start+E.count);p<v;p+=3)c(e,_,w,S,h=x.getX(p),d=x.getX(p+1),f=x.getX(p+2),C),c(e,M,k,S,h,d,f,R);else if(Array.isArray(b))for(p=0,v=T.length;p<v;p++)for(g=T[p],A=Math.max(g.start,E.start),m=Math.min(g.start+g.count,E.start+E.count);A<m;A+=3)c(e,_,w,S,h=A,d=A+1,f=A+2,C),c(e,M,k,S,h,d,f,R);else for(p=Math.max(0,E.start),v=Math.min(_.count,E.start+E.count);p<v;p+=3)c(e,_,w,S,h=p,d=p+1,f=p+2,C),c(e,M,k,S,h,d,f,R);return{positionAttribute:_,normalAttribute:M,morphedPositionAttribute:new Ro(C,3),morphedNormalAttribute:new Ro(R,3)}}function SS(e){if(0===e.groups.length)return console.warn("THREE.BufferGeometryUtils.mergeGroups(): No groups are defined. Nothing to merge."),e;var t=e.groups;if(t=t.sort((function(e,t){return e.materialIndex!==t.materialIndex?e.materialIndex-t.materialIndex:e.start-t.start})),null===e.getIndex()){for(var n=e.getAttribute("position"),r=[],i=0;i<n.count;i+=3)r.push(i,i+1,i+2);e.setIndex(r)}for(var a=e.getIndex(),o=[],s=0;s<t.length;s++)for(var u=t[s],l=u.start,c=l+u.count,h=l;h<c;h++)o.push(a.getX(h));e.dispose(),e.setIndex(o);for(var d=0,f=0;f<t.length;f++){var p=t[f];p.start=d,d+=p.count}var A=t[0];e.groups=[A];for(var v=1;v<t.length;v++){var m=t[v];A.materialIndex===m.materialIndex?A.count+=m.count:(A=m,e.groups.push(A))}return e}function MS(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Math.PI/3,n=Math.cos(t),r=100*(1+1e-10),i=[new zi,new zi,new zi],a=new zi,o=new zi,s=new zi,u=new zi;function l(e){var t=~~(e.x*r),n=~~(e.y*r),i=~~(e.z*r);return"".concat(t,",").concat(n,",").concat(i)}for(var c=e.index?e.toNonIndexed():e,h=c.attributes.position,d={},f=0,p=h.count/3;f<p;f++){var A=3*f,v=i[0].fromBufferAttribute(h,A+0),m=i[1].fromBufferAttribute(h,A+1),g=i[2].fromBufferAttribute(h,A+2);a.subVectors(g,m),o.subVectors(v,m);for(var y=(new zi).crossVectors(a,o).normalize(),b=0;b<3;b++){var x=i[b],_=l(x);_ in d||(d[_]=[]),d[_].push(y)}}for(var w=new Float32Array(3*h.count),S=new xo(w,3,!1),M=0,k=h.count/3;M<k;M++){var T=3*M,E=i[0].fromBufferAttribute(h,T+0),C=i[1].fromBufferAttribute(h,T+1),R=i[2].fromBufferAttribute(h,T+2);a.subVectors(R,C),o.subVectors(E,C),s.crossVectors(a,o).normalize();for(var B=0;B<3;B++){var P=i[B],N=l(P),I=d[N];u.set(0,0,0);for(var D=0,L=I.length;D<L;D++){var O=I[D];s.dot(O)>n&&u.add(O)}u.normalize(),S.setXYZ(T+B,u.x,u.y,u.z)}}return c.setAttribute("normal",S),c}var kS=function(e){return"function"===typeof e?e:"string"===typeof e?function(t){return t[e]}:function(t){return e}};function TS(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function ES(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function CS(){}var RS=.7,BS=1/RS,PS="\\s*([+-]?\\d+)\\s*",NS="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",IS="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",DS=/^#([0-9a-f]{3,8})$/,LS=new RegExp("^rgb\\(".concat(PS,",").concat(PS,",").concat(PS,"\\)$")),OS=new RegExp("^rgb\\(".concat(IS,",").concat(IS,",").concat(IS,"\\)$")),FS=new RegExp("^rgba\\(".concat(PS,",").concat(PS,",").concat(PS,",").concat(NS,"\\)$")),US=new RegExp("^rgba\\(".concat(IS,",").concat(IS,",").concat(IS,",").concat(NS,"\\)$")),zS=new RegExp("^hsl\\(".concat(NS,",").concat(IS,",").concat(IS,"\\)$")),GS=new RegExp("^hsla\\(".concat(NS,",").concat(IS,",").concat(IS,",").concat(NS,"\\)$")),qS={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function HS(){return this.rgb().formatHex()}function VS(){return this.rgb().formatRgb()}function jS(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=DS.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?WS(t):3===n?new JS(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?XS(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?XS(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=LS.exec(e))?new JS(t[1],t[2],t[3],1):(t=OS.exec(e))?new JS(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=FS.exec(e))?XS(t[1],t[2],t[3],t[4]):(t=US.exec(e))?XS(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=zS.exec(e))?nM(t[1],t[2]/100,t[3]/100,1):(t=GS.exec(e))?nM(t[1],t[2]/100,t[3]/100,t[4]):qS.hasOwnProperty(e)?WS(qS[e]):"transparent"===e?new JS(NaN,NaN,NaN,0):null}function WS(e){return new JS(e>>16&255,e>>8&255,255&e,1)}function XS(e,t,n,r){return r<=0&&(e=t=n=NaN),new JS(e,t,n,r)}function YS(e){return e instanceof CS||(e=jS(e)),e?new JS((e=e.rgb()).r,e.g,e.b,e.opacity):new JS}function QS(e,t,n,r){return 1===arguments.length?YS(e):new JS(e,t,n,null==r?1:r)}function JS(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function KS(){return"#".concat(tM(this.r)).concat(tM(this.g)).concat(tM(this.b))}function ZS(){var e=$S(this.opacity);return"".concat(1===e?"rgb(":"rgba(").concat(eM(this.r),", ").concat(eM(this.g),", ").concat(eM(this.b)).concat(1===e?")":", ".concat(e,")"))}function $S(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function eM(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function tM(e){return((e=eM(e))<16?"0":"")+e.toString(16)}function nM(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new iM(e,t,n,r)}function rM(e){if(e instanceof iM)return new iM(e.h,e.s,e.l,e.opacity);if(e instanceof CS||(e=jS(e)),!e)return new iM;if(e instanceof iM)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),a=Math.max(t,n,r),o=NaN,s=a-i,u=(a+i)/2;return s?(o=t===a?(n-r)/s+6*(n<r):n===a?(r-t)/s+2:(t-n)/s+4,s/=u<.5?a+i:2-a-i,o*=60):s=u>0&&u<1?0:o,new iM(o,s,u,e.opacity)}function iM(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function aM(e){return(e=(e||0)%360)<0?e+360:e}function oM(e){return Math.max(0,Math.min(1,e||0))}function sM(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}function uM(e){return uM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},uM(e)}TS(CS,jS,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:HS,formatHex:HS,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return rM(this).formatHsl()},formatRgb:VS,toString:VS}),TS(JS,QS,ES(CS,{brighter:function(e){return e=null==e?BS:Math.pow(BS,e),new JS(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?RS:Math.pow(RS,e),new JS(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},clamp:function(){return new JS(eM(this.r),eM(this.g),eM(this.b),$S(this.opacity))},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:KS,formatHex:KS,formatHex8:function(){return"#".concat(tM(this.r)).concat(tM(this.g)).concat(tM(this.b)).concat(tM(255*(isNaN(this.opacity)?1:this.opacity)))},formatRgb:ZS,toString:ZS})),TS(iM,(function(e,t,n,r){return 1===arguments.length?rM(e):new iM(e,t,n,null==r?1:r)}),ES(CS,{brighter:function(e){return e=null==e?BS:Math.pow(BS,e),new iM(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?RS:Math.pow(RS,e),new iM(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new JS(sM(e>=240?e-240:e+120,i,r),sM(e,i,r),sM(e<120?e+240:e-120,i,r),this.opacity)},clamp:function(){return new iM(aM(this.h),oM(this.s),oM(this.l),$S(this.opacity))},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=$S(this.opacity);return"".concat(1===e?"hsl(":"hsla(").concat(aM(this.h),", ").concat(100*oM(this.s),"%, ").concat(100*oM(this.l),"%").concat(1===e?")":", ".concat(e,")"))}}));var lM=/^\s+/,cM=/\s+$/;function hM(e,t){if(t=t||{},(e=e||"")instanceof hM)return e;if(!(this instanceof hM))return new hM(e,t);var n=function(e){var t={r:0,g:0,b:0},n=1,r=null,i=null,a=null,o=!1,s=!1;"string"==typeof e&&(e=function(e){e=e.replace(lM,"").replace(cM,"").toLowerCase();var t,n=!1;if(EM[e])e=EM[e],n=!0;else if("transparent"==e)return{r:0,g:0,b:0,a:0,format:"name"};if(t=FM.rgb.exec(e))return{r:t[1],g:t[2],b:t[3]};if(t=FM.rgba.exec(e))return{r:t[1],g:t[2],b:t[3],a:t[4]};if(t=FM.hsl.exec(e))return{h:t[1],s:t[2],l:t[3]};if(t=FM.hsla.exec(e))return{h:t[1],s:t[2],l:t[3],a:t[4]};if(t=FM.hsv.exec(e))return{h:t[1],s:t[2],v:t[3]};if(t=FM.hsva.exec(e))return{h:t[1],s:t[2],v:t[3],a:t[4]};if(t=FM.hex8.exec(e))return{r:NM(t[1]),g:NM(t[2]),b:NM(t[3]),a:OM(t[4]),format:n?"name":"hex8"};if(t=FM.hex6.exec(e))return{r:NM(t[1]),g:NM(t[2]),b:NM(t[3]),format:n?"name":"hex"};if(t=FM.hex4.exec(e))return{r:NM(t[1]+""+t[1]),g:NM(t[2]+""+t[2]),b:NM(t[3]+""+t[3]),a:OM(t[4]+""+t[4]),format:n?"name":"hex8"};if(t=FM.hex3.exec(e))return{r:NM(t[1]+""+t[1]),g:NM(t[2]+""+t[2]),b:NM(t[3]+""+t[3]),format:n?"name":"hex"};return!1}(e));"object"==uM(e)&&(UM(e.r)&&UM(e.g)&&UM(e.b)?(t=function(e,t,n){return{r:255*BM(e,255),g:255*BM(t,255),b:255*BM(n,255)}}(e.r,e.g,e.b),o=!0,s="%"===String(e.r).substr(-1)?"prgb":"rgb"):UM(e.h)&&UM(e.s)&&UM(e.v)?(r=DM(e.s),i=DM(e.v),t=function(e,t,n){e=6*BM(e,360),t=BM(t,100),n=BM(n,100);var r=Math.floor(e),i=e-r,a=n*(1-t),o=n*(1-i*t),s=n*(1-(1-i)*t),u=r%6,l=[n,o,a,a,s,n][u],c=[s,n,n,o,a,a][u],h=[a,a,s,n,n,o][u];return{r:255*l,g:255*c,b:255*h}}(e.h,r,i),o=!0,s="hsv"):UM(e.h)&&UM(e.s)&&UM(e.l)&&(r=DM(e.s),a=DM(e.l),t=function(e,t,n){var r,i,a;function o(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}if(e=BM(e,360),t=BM(t,100),n=BM(n,100),0===t)r=i=a=n;else{var s=n<.5?n*(1+t):n+t-n*t,u=2*n-s;r=o(u,s,e+1/3),i=o(u,s,e),a=o(u,s,e-1/3)}return{r:255*r,g:255*i,b:255*a}}(e.h,r,a),o=!0,s="hsl"),e.hasOwnProperty("a")&&(n=e.a));return n=RM(n),{ok:o,format:e.format||s,r:Math.min(255,Math.max(t.r,0)),g:Math.min(255,Math.max(t.g,0)),b:Math.min(255,Math.max(t.b,0)),a:n}}(e);this._originalInput=e,this._r=n.r,this._g=n.g,this._b=n.b,this._a=n.a,this._roundA=Math.round(100*this._a)/100,this._format=t.format||n.format,this._gradientType=t.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=n.ok}function dM(e,t,n){e=BM(e,255),t=BM(t,255),n=BM(n,255);var r,i,a=Math.max(e,t,n),o=Math.min(e,t,n),s=(a+o)/2;if(a==o)r=i=0;else{var u=a-o;switch(i=s>.5?u/(2-a-o):u/(a+o),a){case e:r=(t-n)/u+(t<n?6:0);break;case t:r=(n-e)/u+2;break;case n:r=(e-t)/u+4}r/=6}return{h:r,s:i,l:s}}function fM(e,t,n){e=BM(e,255),t=BM(t,255),n=BM(n,255);var r,i,a=Math.max(e,t,n),o=Math.min(e,t,n),s=a,u=a-o;if(i=0===a?0:u/a,a==o)r=0;else{switch(a){case e:r=(t-n)/u+(t<n?6:0);break;case t:r=(n-e)/u+2;break;case n:r=(e-t)/u+4}r/=6}return{h:r,s:i,v:s}}function pM(e,t,n,r){var i=[IM(Math.round(e).toString(16)),IM(Math.round(t).toString(16)),IM(Math.round(n).toString(16))];return r&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function AM(e,t,n,r){return[IM(LM(r)),IM(Math.round(e).toString(16)),IM(Math.round(t).toString(16)),IM(Math.round(n).toString(16))].join("")}function vM(e,t){t=0===t?0:t||10;var n=hM(e).toHsl();return n.s-=t/100,n.s=PM(n.s),hM(n)}function mM(e,t){t=0===t?0:t||10;var n=hM(e).toHsl();return n.s+=t/100,n.s=PM(n.s),hM(n)}function gM(e){return hM(e).desaturate(100)}function yM(e,t){t=0===t?0:t||10;var n=hM(e).toHsl();return n.l+=t/100,n.l=PM(n.l),hM(n)}function bM(e,t){t=0===t?0:t||10;var n=hM(e).toRgb();return n.r=Math.max(0,Math.min(255,n.r-Math.round(-t/100*255))),n.g=Math.max(0,Math.min(255,n.g-Math.round(-t/100*255))),n.b=Math.max(0,Math.min(255,n.b-Math.round(-t/100*255))),hM(n)}function xM(e,t){t=0===t?0:t||10;var n=hM(e).toHsl();return n.l-=t/100,n.l=PM(n.l),hM(n)}function _M(e,t){var n=hM(e).toHsl(),r=(n.h+t)%360;return n.h=r<0?360+r:r,hM(n)}function wM(e){var t=hM(e).toHsl();return t.h=(t.h+180)%360,hM(t)}function SM(e,t){if(isNaN(t)||t<=0)throw new Error("Argument to polyad must be a positive number");for(var n=hM(e).toHsl(),r=[hM(e)],i=360/t,a=1;a<t;a++)r.push(hM({h:(n.h+a*i)%360,s:n.s,l:n.l}));return r}function MM(e){var t=hM(e).toHsl(),n=t.h;return[hM(e),hM({h:(n+72)%360,s:t.s,l:t.l}),hM({h:(n+216)%360,s:t.s,l:t.l})]}function kM(e,t,n){t=t||6,n=n||30;var r=hM(e).toHsl(),i=360/n,a=[hM(e)];for(r.h=(r.h-(i*t>>1)+720)%360;--t;)r.h=(r.h+i)%360,a.push(hM(r));return a}function TM(e,t){t=t||6;for(var n=hM(e).toHsv(),r=n.h,i=n.s,a=n.v,o=[],s=1/t;t--;)o.push(hM({h:r,s:i,v:a})),a=(a+s)%1;return o}hM.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},getLuminance:function(){var e,t,n,r=this.toRgb();return e=r.r/255,t=r.g/255,n=r.b/255,.2126*(e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4))+.7152*(t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4))+.0722*(n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4))},setAlpha:function(e){return this._a=RM(e),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var e=fM(this._r,this._g,this._b);return{h:360*e.h,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=fM(this._r,this._g,this._b),t=Math.round(360*e.h),n=Math.round(100*e.s),r=Math.round(100*e.v);return 1==this._a?"hsv("+t+", "+n+"%, "+r+"%)":"hsva("+t+", "+n+"%, "+r+"%, "+this._roundA+")"},toHsl:function(){var e=dM(this._r,this._g,this._b);return{h:360*e.h,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=dM(this._r,this._g,this._b),t=Math.round(360*e.h),n=Math.round(100*e.s),r=Math.round(100*e.l);return 1==this._a?"hsl("+t+", "+n+"%, "+r+"%)":"hsla("+t+", "+n+"%, "+r+"%, "+this._roundA+")"},toHex:function(e){return pM(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return function(e,t,n,r,i){var a=[IM(Math.round(e).toString(16)),IM(Math.round(t).toString(16)),IM(Math.round(n).toString(16)),IM(LM(r))];if(i&&a[0].charAt(0)==a[0].charAt(1)&&a[1].charAt(0)==a[1].charAt(1)&&a[2].charAt(0)==a[2].charAt(1)&&a[3].charAt(0)==a[3].charAt(1))return a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0)+a[3].charAt(0);return a.join("")}(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(100*BM(this._r,255))+"%",g:Math.round(100*BM(this._g,255))+"%",b:Math.round(100*BM(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+Math.round(100*BM(this._r,255))+"%, "+Math.round(100*BM(this._g,255))+"%, "+Math.round(100*BM(this._b,255))+"%)":"rgba("+Math.round(100*BM(this._r,255))+"%, "+Math.round(100*BM(this._g,255))+"%, "+Math.round(100*BM(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(CM[pM(this._r,this._g,this._b,!0)]||!1)},toFilter:function(e){var t="#"+AM(this._r,this._g,this._b,this._a),n=t,r=this._gradientType?"GradientType = 1, ":"";if(e){var i=hM(e);n="#"+AM(i._r,i._g,i._b,i._a)}return"progid:DXImageTransform.Microsoft.gradient("+r+"startColorstr="+t+",endColorstr="+n+")"},toString:function(e){var t=!!e;e=e||this._format;var n=!1,r=this._a<1&&this._a>=0;return t||!r||"hex"!==e&&"hex6"!==e&&"hex3"!==e&&"hex4"!==e&&"hex8"!==e&&"name"!==e?("rgb"===e&&(n=this.toRgbString()),"prgb"===e&&(n=this.toPercentageRgbString()),"hex"!==e&&"hex6"!==e||(n=this.toHexString()),"hex3"===e&&(n=this.toHexString(!0)),"hex4"===e&&(n=this.toHex8String(!0)),"hex8"===e&&(n=this.toHex8String()),"name"===e&&(n=this.toName()),"hsl"===e&&(n=this.toHslString()),"hsv"===e&&(n=this.toHsvString()),n||this.toHexString()):"name"===e&&0===this._a?this.toName():this.toRgbString()},clone:function(){return hM(this.toString())},_applyModification:function(e,t){var n=e.apply(null,[this].concat([].slice.call(t)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(yM,arguments)},brighten:function(){return this._applyModification(bM,arguments)},darken:function(){return this._applyModification(xM,arguments)},desaturate:function(){return this._applyModification(vM,arguments)},saturate:function(){return this._applyModification(mM,arguments)},greyscale:function(){return this._applyModification(gM,arguments)},spin:function(){return this._applyModification(_M,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(kM,arguments)},complement:function(){return this._applyCombination(wM,arguments)},monochromatic:function(){return this._applyCombination(TM,arguments)},splitcomplement:function(){return this._applyCombination(MM,arguments)},triad:function(){return this._applyCombination(SM,[3])},tetrad:function(){return this._applyCombination(SM,[4])}},hM.fromRatio=function(e,t){if("object"==uM(e)){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]="a"===r?e[r]:DM(e[r]));e=n}return hM(e,t)},hM.equals=function(e,t){return!(!e||!t)&&hM(e).toRgbString()==hM(t).toRgbString()},hM.random=function(){return hM.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})},hM.mix=function(e,t,n){n=0===n?0:n||50;var r=hM(e).toRgb(),i=hM(t).toRgb(),a=n/100;return hM({r:(i.r-r.r)*a+r.r,g:(i.g-r.g)*a+r.g,b:(i.b-r.b)*a+r.b,a:(i.a-r.a)*a+r.a})},hM.readability=function(e,t){var n=hM(e),r=hM(t);return(Math.max(n.getLuminance(),r.getLuminance())+.05)/(Math.min(n.getLuminance(),r.getLuminance())+.05)},hM.isReadable=function(e,t,n){var r,i,a=hM.readability(e,t);switch(i=!1,r=function(e){var t,n;t=((e=e||{level:"AA",size:"small"}).level||"AA").toUpperCase(),n=(e.size||"small").toLowerCase(),"AA"!==t&&"AAA"!==t&&(t="AA");"small"!==n&&"large"!==n&&(n="small");return{level:t,size:n}}(n),r.level+r.size){case"AAsmall":case"AAAlarge":i=a>=4.5;break;case"AAlarge":i=a>=3;break;case"AAAsmall":i=a>=7}return i},hM.mostReadable=function(e,t,n){var r,i,a,o,s=null,u=0;i=(n=n||{}).includeFallbackColors,a=n.level,o=n.size;for(var l=0;l<t.length;l++)(r=hM.readability(e,t[l]))>u&&(u=r,s=hM(t[l]));return hM.isReadable(e,s,{level:a,size:o})||!i?s:(n.includeFallbackColors=!1,hM.mostReadable(e,["#fff","#000"],n))};var EM=hM.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},CM=hM.hexNames=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}(EM);function RM(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function BM(e,t){(function(e){return"string"==typeof e&&-1!=e.indexOf(".")&&1===parseFloat(e)})(e)&&(e="100%");var n=function(e){return"string"===typeof e&&-1!=e.indexOf("%")}(e);return e=Math.min(t,Math.max(0,parseFloat(e))),n&&(e=parseInt(e*t,10)/100),Math.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function PM(e){return Math.min(1,Math.max(0,e))}function NM(e){return parseInt(e,16)}function IM(e){return 1==e.length?"0"+e:""+e}function DM(e){return e<=1&&(e=100*e+"%"),e}function LM(e){return Math.round(255*parseFloat(e)).toString(16)}function OM(e){return NM(e)/255}var FM=function(){var e="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)",t="[\\s|\\(]+("+e+")[,|\\s]+("+e+")[,|\\s]+("+e+")\\s*\\)?",n="[\\s|\\(]+("+e+")[,|\\s]+("+e+")[,|\\s]+("+e+")[,|\\s]+("+e+")\\s*\\)?";return{CSS_UNIT:new RegExp(e),rgb:new RegExp("rgb"+t),rgba:new RegExp("rgba"+n),hsl:new RegExp("hsl"+t),hsla:new RegExp("hsla"+n),hsv:new RegExp("hsv"+t),hsva:new RegExp("hsva"+n),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function UM(e){return!!FM.CSS_UNIT.exec(e)}function zM(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function GM(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}function qM(e,t){return e.get(GM(e,t))}function HM(e,t,n){(function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")})(e,t),t.set(e,n)}function VM(e,t,n){return e.set(GM(e,t),n),n}function jM(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,YM(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function WM(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,s=[],u=!0,l=!1;try{if(a=(n=n.call(e)).next,0===t);else for(;!(u=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(e){l=!0,i=e}finally{try{if(!u&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(l)throw i}}return s}}(e,t)||QM(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function XM(e){return function(e){if(Array.isArray(e))return zM(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||QM(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function YM(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}function QM(e,t){if(e){if("string"==typeof e)return zM(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?zM(e,t):void 0}}var JM=new WeakMap,KM=new WeakMap,ZM=new WeakMap,$M=new WeakMap,ek=new WeakMap,tk=new WeakMap,nk=function(){return jM((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),HM(this,JM,new Map),HM(this,KM,new Map),HM(this,ZM,(function(e){return e})),HM(this,$M,(function(){return{}})),HM(this,ek,(function(){})),HM(this,tk,(function(){}))}),[{key:"getObj",value:function(e){return qM(JM,this).get(qM(ZM,this).call(this,e))}},{key:"getData",value:function(e){return qM(KM,this).get(e)}},{key:"entries",value:function(){return XM(qM(KM,this).entries()).map((function(e){var t=WM(e,2),n=t[0];return[t[1],n]}))}},{key:"id",value:function(e){return VM(ZM,this,kS(e)),this}},{key:"onCreateObj",value:function(e){return VM($M,this,e),this}},{key:"onUpdateObj",value:function(e){return VM(ek,this,e),this}},{key:"onRemoveObj",value:function(e){return VM(tk,this,e),this}},{key:"digest",value:function(e){var t=this;e.filter((function(e){return!qM(JM,t).has(qM(ZM,t).call(t,e))})).forEach((function(e){var n=qM($M,t).call(t,e);qM(JM,t).set(qM(ZM,t).call(t,e),n),qM(KM,t).set(n,e)}));var n=new Map(e.map((function(e){return[qM(ZM,t).call(t,e),e]})));return qM(JM,this).forEach((function(e,r){n.has(r)?qM(ek,t).call(t,e,n.get(r)):(qM(tk,t).call(t,e,r),qM(JM,t).delete(r),qM(KM,t).delete(e))})),this}},{key:"clear",value:function(){return this.digest([]),this}}])}(),rk=n(6253),ik=Math.sqrt(50),ak=Math.sqrt(10),ok=Math.sqrt(2);function sk(e,t,n){var r,i,a,o=(t-e)/Math.max(0,n),s=Math.floor(Math.log10(o)),u=o/Math.pow(10,s),l=u>=ik?10:u>=ak?5:u>=ok?2:1;return s<0?(a=Math.pow(10,-s)/l,(r=Math.round(e*a))/a<e&&++r,(i=Math.round(t*a))/a>t&&--i,a=-a):(a=Math.pow(10,s)*l,(r=Math.round(e/a))*a<e&&++r,(i=Math.round(t/a))*a>t&&--i),i<r&&.5<=n&&n<2?sk(e,t,2*n):[r,i,a]}function uk(e,t,n){return sk(e=+e,t=+t,n=+n)[2]}function lk(e,t){return null==e||null==t?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function ck(e,t){return null==e||null==t?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function hk(e){var t,n,r;function i(e,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length;if(i<a){if(0!==t(r,r))return a;do{var o=i+a>>>1;n(e[o],r)<0?i=o+1:a=o}while(i<a)}return i}return 2!==e.length?(t=lk,n=function(t,n){return lk(e(t),n)},r=function(t,n){return e(t)-n}):(t=e===lk||e===ck?e:dk,n=e,r=e),{left:i,center:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length,o=i(e,t,n,a-1);return o>n&&r(e[o-1],t)>-r(e[o],t)?o-1:o},right:function(e,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length;if(i<a){if(0!==t(r,r))return a;do{var o=i+a>>>1;n(e[o],r)<=0?i=o+1:a=o}while(i<a)}return i}}}function dk(){return 0}var fk=hk(lk),pk=fk.right,Ak=(fk.left,hk((function(e){return null===e?NaN:+e})).center,pk);function vk(e,t,n,r,i){var a=e*e,o=a*e;return((1-3*e+3*a-o)*t+(4-6*a+3*o)*n+(1+3*e+3*a-3*o)*r+o*i)/6}var mk=function(e){return function(){return e}};function gk(e,t){return function(n){return e+n*t}}function yk(e){return 1===(e=+e)?bk:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}(t,n,e):mk(isNaN(t)?n:t)}}function bk(e,t){var n=t-e;return n?gk(e,n):mk(isNaN(e)?t:e)}var xk=function e(t){var n=yk(t);function r(e,t){var r=n((e=QS(e)).r,(t=QS(t)).r),i=n(e.g,t.g),a=n(e.b,t.b),o=bk(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=i(t),e.b=a(t),e.opacity=o(t),e+""}}return r.gamma=e,r}(1);function _k(e){return function(t){var n,r,i=t.length,a=new Array(i),o=new Array(i),s=new Array(i);for(n=0;n<i;++n)r=QS(t[n]),a[n]=r.r||0,o[n]=r.g||0,s[n]=r.b||0;return a=e(a),o=e(o),s=e(s),r.opacity=1,function(e){return r.r=a(e),r.g=o(e),r.b=s(e),r+""}}}_k((function(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],a=e[r+1],o=r>0?e[r-1]:2*i-a,s=r<t-1?e[r+2]:2*a-i;return vk((n-r/t)*t,o,i,a,s)}})),_k((function(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],a=e[r%t],o=e[(r+1)%t],s=e[(r+2)%t];return vk((n-r/t)*t,i,a,o,s)}}));function wk(e,t){t||(t=[]);var n,r=e?Math.min(t.length,e.length):0,i=t.slice();return function(a){for(n=0;n<r;++n)i[n]=e[n]*(1-a)+t[n]*a;return i}}function Sk(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Mk(e,t){return(Sk(t)?wk:kk)(e,t)}function kk(e,t){var n,r=t?t.length:0,i=e?Math.min(r,e.length):0,a=new Array(i),o=new Array(r);for(n=0;n<i;++n)a[n]=Pk(e[n],t[n]);for(;n<r;++n)o[n]=t[n];return function(e){for(n=0;n<i;++n)o[n]=a[n](e);return o}}function Tk(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Ek(e,t){var n,r={},i={};for(n in null!==e&&"object"===typeof e||(e={}),null!==t&&"object"===typeof t||(t={}),t)n in e?r[n]=Pk(e[n],t[n]):i[n]=t[n];return function(e){for(n in r)i[n]=r[n](e);return i}}var Ck=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Rk=new RegExp(Ck.source,"g");function Bk(e,t){var n,r,i,a=Ck.lastIndex=Rk.lastIndex=0,o=-1,s=[],u=[];for(e+="",t+="";(n=Ck.exec(e))&&(r=Rk.exec(t));)(i=r.index)>a&&(i=t.slice(a,i),s[o]?s[o]+=i:s[++o]=i),(n=n[0])===(r=r[0])?s[o]?s[o]+=r:s[++o]=r:(s[++o]=null,u.push({i:o,x:Ww(n,r)})),a=Rk.lastIndex;return a<t.length&&(i=t.slice(a),s[o]?s[o]+=i:s[++o]=i),s.length<2?u[0]?function(e){return function(t){return e(t)+""}}(u[0].x):function(e){return function(){return e}}(t):(t=u.length,function(e){for(var n,r=0;r<t;++r)s[(n=u[r]).i]=n.x(e);return s.join("")})}function Pk(e,t){var n,r=typeof t;return null==t||"boolean"===r?mk(t):("number"===r?Ww:"string"===r?(n=jS(t))?(t=n,xk):Bk:t instanceof jS?xk:t instanceof Date?Tk:Sk(t)?wk:Array.isArray(t)?kk:"function"!==typeof t.valueOf&&"function"!==typeof t.toString||isNaN(t)?Ek:Ww)(e,t)}function Nk(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function Ik(e){return+e}var Dk=[0,1];function Lk(e){return e}function Ok(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:function(e){return function(){return e}}(isNaN(t)?NaN:.5)}function Fk(e,t,n){var r=e[0],i=e[1],a=t[0],o=t[1];return i<r?(r=Ok(i,r),a=n(o,a)):(r=Ok(r,i),a=n(a,o)),function(e){return a(r(e))}}function Uk(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),a=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)i[o]=Ok(e[o],e[o+1]),a[o]=n(t[o],t[o+1]);return function(t){var n=Ak(e,t,1,r)-1;return a[n](i[n](t))}}function zk(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Gk(){var e,t,n,r,i,a,o=Dk,s=Dk,u=Pk,l=Lk;function c(){var e=Math.min(o.length,s.length);return l!==Lk&&(l=function(e,t){var n;return e>t&&(n=e,e=t,t=n),function(n){return Math.max(e,Math.min(t,n))}}(o[0],o[e-1])),r=e>2?Uk:Fk,i=a=null,h}function h(t){return null==t||isNaN(t=+t)?n:(i||(i=r(o.map(e),s,u)))(e(l(t)))}return h.invert=function(n){return l(t((a||(a=r(s,o.map(e),Ww)))(n)))},h.domain=function(e){return arguments.length?(o=Array.from(e,Ik),c()):o.slice()},h.range=function(e){return arguments.length?(s=Array.from(e),c()):s.slice()},h.rangeRound=function(e){return s=Array.from(e),u=Nk,c()},h.clamp=function(e){return arguments.length?(l=!!e||Lk,c()):l!==Lk},h.interpolate=function(e){return arguments.length?(u=e,c()):u},h.unknown=function(e){return arguments.length?(n=e,h):n},function(n,r){return e=n,t=r,c()}}function qk(){return Gk()(Lk,Lk)}function Hk(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}var Vk,jk=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Wk(e){if(!(t=jk.exec(e)))throw new Error("invalid format: "+e);var t;return new Xk({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function Xk(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function Yk(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function Qk(e){return(e=Yk(Math.abs(e)))?e[1]:NaN}function Jk(e,t){var n=Yk(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}Wk.prototype=Xk.prototype,Xk.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var Kk={"%":function(e,t){return(100*e).toFixed(t)},b:function(e){return Math.round(e).toString(2)},c:function(e){return e+""},d:function(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},g:function(e,t){return e.toPrecision(t)},o:function(e){return Math.round(e).toString(8)},p:function(e,t){return Jk(100*e,t)},r:Jk,s:function(e,t){var n=Yk(e,t);if(!n)return e+"";var r=n[0],i=n[1],a=i-(Vk=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+Yk(e,Math.max(0,t+a-1))[0]},X:function(e){return Math.round(e).toString(16).toUpperCase()},x:function(e){return Math.round(e).toString(16)}};function Zk(e){return e}var $k,eT,tT,nT=Array.prototype.map,rT=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function iT(e){var t,n,r=void 0===e.grouping||void 0===e.thousands?Zk:(t=nT.call(e.grouping,Number),n=e.thousands+"",function(e,r){for(var i=e.length,a=[],o=0,s=t[0],u=0;i>0&&s>0&&(u+s+1>r&&(s=Math.max(1,r-u)),a.push(e.substring(i-=s,i+s)),!((u+=s+1)>r));)s=t[o=(o+1)%t.length];return a.reverse().join(n)}),i=void 0===e.currency?"":e.currency[0]+"",a=void 0===e.currency?"":e.currency[1]+"",o=void 0===e.decimal?".":e.decimal+"",s=void 0===e.numerals?Zk:function(e){return function(t){return t.replace(/[0-9]/g,(function(t){return e[+t]}))}}(nT.call(e.numerals,String)),u=void 0===e.percent?"%":e.percent+"",l=void 0===e.minus?"\u2212":e.minus+"",c=void 0===e.nan?"NaN":e.nan+"";function h(e){var t=(e=Wk(e)).fill,n=e.align,h=e.sign,d=e.symbol,f=e.zero,p=e.width,A=e.comma,v=e.precision,m=e.trim,g=e.type;"n"===g?(A=!0,g="g"):Kk[g]||(void 0===v&&(v=12),m=!0,g="g"),(f||"0"===t&&"="===n)&&(f=!0,t="0",n="=");var y="$"===d?i:"#"===d&&/[boxX]/.test(g)?"0"+g.toLowerCase():"",b="$"===d?a:/[%p]/.test(g)?u:"",x=Kk[g],_=/[defgprs%]/.test(g);function w(e){var i,a,u,d=y,w=b;if("c"===g)w=x(e)+w,e="";else{var S=(e=+e)<0||1/e<0;if(e=isNaN(e)?c:x(Math.abs(e),v),m&&(e=function(e){e:for(var t,n=e.length,r=1,i=-1;r<n;++r)switch(e[r]){case".":i=t=r;break;case"0":0===i&&(i=r),t=r;break;default:if(!+e[r])break e;i>0&&(i=0)}return i>0?e.slice(0,i)+e.slice(t+1):e}(e)),S&&0===+e&&"+"!==h&&(S=!1),d=(S?"("===h?h:l:"-"===h||"("===h?"":h)+d,w=("s"===g?rT[8+Vk/3]:"")+w+(S&&"("===h?")":""),_)for(i=-1,a=e.length;++i<a;)if(48>(u=e.charCodeAt(i))||u>57){w=(46===u?o+e.slice(i+1):e.slice(i))+w,e=e.slice(0,i);break}}A&&!f&&(e=r(e,1/0));var M=d.length+e.length+w.length,k=M<p?new Array(p-M+1).join(t):"";switch(A&&f&&(e=r(k+e,k.length?p-w.length:1/0),k=""),n){case"<":e=d+e+w+k;break;case"=":e=d+k+e+w;break;case"^":e=k.slice(0,M=k.length>>1)+d+e+w+k.slice(M);break;default:e=k+d+e+w}return s(e)}return v=void 0===v?6:/[gprs]/.test(g)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v)),w.toString=function(){return e+""},w}return{format:h,formatPrefix:function(e,t){var n=h(((e=Wk(e)).type="f",e)),r=3*Math.max(-8,Math.min(8,Math.floor(Qk(t)/3))),i=Math.pow(10,-r),a=rT[8+r/3];return function(e){return n(i*e)+a}}}}function aT(e,t,n,r){var i,a=function(e,t,n){n=+n;var r=(t=+t)<(e=+e),i=r?uk(t,e,n):uk(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}(e,t,n);switch((r=Wk(null==r?",f":r)).type){case"s":var o=Math.max(Math.abs(e),Math.abs(t));return null!=r.precision||isNaN(i=function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Qk(t)/3)))-Qk(Math.abs(e)))}(a,o))||(r.precision=i),tT(r,o);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Qk(t)-Qk(e))+1}(a,Math.max(Math.abs(e),Math.abs(t))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=function(e){return Math.max(0,-Qk(Math.abs(e)))}(a))||(r.precision=i-2*("%"===r.type))}return eT(r)}function oT(e){var t=e.domain;return e.ticks=function(e){var n=t();return function(e,t,n){if(!((n=+n)>0))return[];if((e=+e)===(t=+t))return[e];var r=t<e,i=l(r?sk(t,e,n):sk(e,t,n),3),a=i[0],o=i[1],s=i[2];if(!(o>=a))return[];var u=o-a+1,c=new Array(u);if(r)if(s<0)for(var h=0;h<u;++h)c[h]=(o-h)/-s;else for(var d=0;d<u;++d)c[d]=(o-d)*s;else if(s<0)for(var f=0;f<u;++f)c[f]=(a+f)/-s;else for(var p=0;p<u;++p)c[p]=(a+p)*s;return c}(n[0],n[n.length-1],null==e?10:e)},e.tickFormat=function(e,n){var r=t();return aT(r[0],r[r.length-1],null==e?10:e,n)},e.nice=function(n){null==n&&(n=10);var r,i,a=t(),o=0,s=a.length-1,u=a[o],l=a[s],c=10;for(l<u&&(i=u,u=l,l=i,i=o,o=s,s=i);c-- >0;){if((i=uk(u,l,n))===r)return a[o]=u,a[s]=l,t(a);if(i>0)u=Math.floor(u/i)*i,l=Math.ceil(l/i)*i;else{if(!(i<0))break;u=Math.ceil(u*i)/i,l=Math.floor(l*i)/i}r=i}return e},e}function sT(){var e=qk();return e.copy=function(){return zk(e,sT())},Hk.apply(e,arguments),oT(e)}function uT(){var e,t=0,n=1,r=1,i=[.5],a=[0,1];function o(t){return null!=t&&t<=t?a[Ak(i,t,0,r)]:e}function s(){var e=-1;for(i=new Array(r);++e<r;)i[e]=((e+1)*n-(e-r)*t)/(r+1);return o}return o.domain=function(e){var r;return arguments.length?(r=l(e,2),t=r[0],n=r[1],t=+t,n=+n,s()):[t,n]},o.range=function(e){return arguments.length?(r=(a=Array.from(e)).length-1,s()):a.slice()},o.invertExtent=function(e){var o=a.indexOf(e);return o<0?[NaN,NaN]:o<1?[t,i[0]]:o>=r?[i[r-1],n]:[i[o-1],i[o]]},o.unknown=function(t){return arguments.length?(e=t,o):o},o.thresholds=function(){return i.slice()},o.copy=function(){return uT().domain([t,n]).range(a).unknown(e)},Hk.apply(oT(o),arguments)}$k=iT({thousands:",",grouping:[3],currency:["$",""]}),eT=$k.format,tT=$k.formatPrefix;var lT=se().mark(cT);function cT(e){var t,n,r;return se().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:t=ee(e),i.prev=1,t.s();case 3:if((n=t.n()).done){i.next=8;break}return r=n.value,i.delegateYield(r,"t0",6);case 6:i.next=3;break;case 8:i.next=13;break;case 10:i.prev=10,i.t1=i.catch(1),t.e(i.t1);case 13:return i.prev=13,t.f(),i.finish(13);case 16:case"end":return i.stop()}}),lT,null,[[1,10,13,16]])}function hT(e){return Array.from(cT(e))}function dT(e,t){var n=0,r=0;if(void 0===t){var i,a=ee(e);try{for(a.s();!(i=a.n()).done;){var o=i.value;null!=o&&(o=+o)>=o&&(++n,r+=o)}}catch(h){a.e(h)}finally{a.f()}}else{var s,u=-1,l=ee(e);try{for(l.s();!(s=l.n()).done;){var c=s.value;null!=(c=t(c,++u,e))&&(c=+c)>=c&&(++n,r+=c)}}catch(h){l.e(h)}finally{l.f()}}if(n)return r/n}function fT(e,t){var n,r;if(void 0===t){var i,a=ee(e);try{for(a.s();!(i=a.n()).done;){var o=i.value;null!=o&&(void 0===n?o>=o&&(n=r=o):(n>o&&(n=o),r<o&&(r=o)))}}catch(h){a.e(h)}finally{a.f()}}else{var s,u=-1,l=ee(e);try{for(l.s();!(s=l.n()).done;){var c=s.value;null!=(c=t(c,++u,e))&&(void 0===n?c>=c&&(n=r=c):(n>c&&(n=c),r<c&&(r=c)))}}catch(h){l.e(h)}finally{l.f()}}return[n,r]}var pT=134217729;function AT(e,t,n,r,i){var a,o,s,u,l=t[0],c=r[0],h=0,d=0;c>l===c>-l?(a=l,l=t[++h]):(a=c,c=r[++d]);var f=0;if(h<e&&d<n)for(c>l===c>-l?(s=a-((o=l+a)-l),l=t[++h]):(s=a-((o=c+a)-c),c=r[++d]),a=o,0!==s&&(i[f++]=s);h<e&&d<n;)c>l===c>-l?(s=a-((o=a+l)-(u=o-a))+(l-u),l=t[++h]):(s=a-((o=a+c)-(u=o-a))+(c-u),c=r[++d]),a=o,0!==s&&(i[f++]=s);for(;h<e;)s=a-((o=a+l)-(u=o-a))+(l-u),l=t[++h],a=o,0!==s&&(i[f++]=s);for(;d<n;)s=a-((o=a+c)-(u=o-a))+(c-u),c=r[++d],a=o,0!==s&&(i[f++]=s);return 0===a&&0!==f||(i[f++]=a),f}function vT(e){return new Float64Array(e)}var mT=vT(4),gT=vT(8),yT=vT(12),bT=vT(16),xT=vT(4);function _T(e,t,n,r,i,a){var o=(t-a)*(n-i),s=(e-i)*(r-a),u=o-s,l=Math.abs(o+s);return Math.abs(u)>=33306690738754716e-32*l?u:-function(e,t,n,r,i,a,o){var s,u,l,c,h,d,f,p,A,v,m,g,y,b,x,_,w,S,M=e-i,k=n-i,T=t-a,E=r-a;h=(x=(p=M-(f=(d=pT*M)-(d-M)))*(v=E-(A=(d=pT*E)-(d-E)))-((b=M*E)-f*A-p*A-f*v))-(m=x-(w=(p=T-(f=(d=pT*T)-(d-T)))*(v=k-(A=(d=pT*k)-(d-k)))-((_=T*k)-f*A-p*A-f*v))),mT[0]=x-(m+h)+(h-w),h=(y=b-((g=b+m)-(h=g-b))+(m-h))-(m=y-_),mT[1]=y-(m+h)+(h-_),h=(S=g+m)-g,mT[2]=g-(S-h)+(m-h),mT[3]=S;var C=function(e,t){for(var n=t[0],r=1;r<e;r++)n+=t[r];return n}(4,mT),R=22204460492503146e-32*o;if(C>=R||-C>=R)return C;if(s=e-(M+(h=e-M))+(h-i),l=n-(k+(h=n-k))+(h-i),u=t-(T+(h=t-T))+(h-a),c=r-(E+(h=r-E))+(h-a),0===s&&0===u&&0===l&&0===c)return C;if(R=11093356479670487e-47*o+33306690738754706e-32*Math.abs(C),(C+=M*c+E*s-(T*l+k*u))>=R||-C>=R)return C;h=(x=(p=s-(f=(d=pT*s)-(d-s)))*(v=E-(A=(d=pT*E)-(d-E)))-((b=s*E)-f*A-p*A-f*v))-(m=x-(w=(p=u-(f=(d=pT*u)-(d-u)))*(v=k-(A=(d=pT*k)-(d-k)))-((_=u*k)-f*A-p*A-f*v))),xT[0]=x-(m+h)+(h-w),h=(y=b-((g=b+m)-(h=g-b))+(m-h))-(m=y-_),xT[1]=y-(m+h)+(h-_),h=(S=g+m)-g,xT[2]=g-(S-h)+(m-h),xT[3]=S;var B=AT(4,mT,4,xT,gT);h=(x=(p=M-(f=(d=pT*M)-(d-M)))*(v=c-(A=(d=pT*c)-(d-c)))-((b=M*c)-f*A-p*A-f*v))-(m=x-(w=(p=T-(f=(d=pT*T)-(d-T)))*(v=l-(A=(d=pT*l)-(d-l)))-((_=T*l)-f*A-p*A-f*v))),xT[0]=x-(m+h)+(h-w),h=(y=b-((g=b+m)-(h=g-b))+(m-h))-(m=y-_),xT[1]=y-(m+h)+(h-_),h=(S=g+m)-g,xT[2]=g-(S-h)+(m-h),xT[3]=S;var P=AT(B,gT,4,xT,yT);h=(x=(p=s-(f=(d=pT*s)-(d-s)))*(v=c-(A=(d=pT*c)-(d-c)))-((b=s*c)-f*A-p*A-f*v))-(m=x-(w=(p=u-(f=(d=pT*u)-(d-u)))*(v=l-(A=(d=pT*l)-(d-l)))-((_=u*l)-f*A-p*A-f*v))),xT[0]=x-(m+h)+(h-w),h=(y=b-((g=b+m)-(h=g-b))+(m-h))-(m=y-_),xT[1]=y-(m+h)+(h-_),h=(S=g+m)-g,xT[2]=g-(S-h)+(m-h),xT[3]=S;var N=AT(P,yT,4,xT,bT);return bT[N-1]}(e,t,n,r,i,a,l)}vT(4),vT(4),vT(4),vT(4),vT(4),vT(4),vT(4),vT(4),vT(4),vT(8),vT(8),vT(8),vT(4),vT(8),vT(8),vT(8),vT(12),vT(192),vT(192);vT(4),vT(4),vT(4),vT(4),vT(4),vT(4),vT(4),vT(4),vT(8),vT(8),vT(8),vT(8),vT(8),vT(8),vT(8),vT(8),vT(8),vT(4),vT(4),vT(4),vT(8),vT(16),vT(16),vT(16),vT(32),vT(32),vT(48),vT(64),vT(1152),vT(1152);vT(4),vT(4),vT(4),vT(4),vT(4),vT(4),vT(4),vT(4),vT(4),vT(4),vT(24),vT(24),vT(24),vT(24),vT(24),vT(24),vT(24),vT(24),vT(24),vT(24),vT(1152),vT(1152),vT(1152),vT(1152),vT(1152),vT(2304),vT(2304),vT(3456),vT(5760),vT(8),vT(8),vT(8),vT(16),vT(24),vT(48),vT(48),vT(96),vT(192),vT(384),vT(384),vT(384),vT(768);vT(96),vT(96),vT(96),vT(1152);var wT=Math.pow(2,-52),ST=new Uint32Array(512),MT=function(){function e(t){V(this,e);var n=t.length>>1;if(n>0&&"number"!==typeof t[0])throw new Error("Expected coords to contain numbers.");this.coords=t;var r=Math.max(2*n-5,0);this._triangles=new Uint32Array(3*r),this._halfedges=new Int32Array(3*r),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}return W(e,[{key:"update",value:function(){for(var e=this.coords,t=this._hullPrev,n=this._hullNext,r=this._hullTri,i=this._hullHash,a=e.length>>1,o=1/0,s=1/0,u=-1/0,l=-1/0,c=0;c<a;c++){var h=e[2*c],d=e[2*c+1];h<o&&(o=h),d<s&&(s=d),h>u&&(u=h),d>l&&(l=d),this._ids[c]=c}for(var f,p,A,v=(o+u)/2,m=(s+l)/2,g=0,y=1/0;g<a;g++){var b=kT(v,m,e[2*g],e[2*g+1]);b<y&&(f=g,y=b)}for(var x=e[2*f],_=e[2*f+1],w=0,S=1/0;w<a;w++)if(w!==f){var M=kT(x,_,e[2*w],e[2*w+1]);M<S&&M>0&&(p=w,S=M)}for(var k=e[2*p],T=e[2*p+1],E=1/0,C=0;C<a;C++)if(C!==f&&C!==p){var R=ET(x,_,k,T,e[2*C],e[2*C+1]);R<E&&(A=C,E=R)}var B=e[2*A],P=e[2*A+1];if(E===1/0){for(var N=0;N<a;N++)this._dists[N]=e[2*N]-e[0]||e[2*N+1]-e[1];CT(this._ids,this._dists,0,a-1);for(var I=new Uint32Array(a),D=0,L=0,O=-1/0;L<a;L++){var F=this._ids[L],U=this._dists[F];U>O&&(I[D++]=F,O=U)}return this.hull=I.subarray(0,D),this.triangles=new Uint32Array(0),void(this.halfedges=new Uint32Array(0))}if(_T(x,_,k,T,B,P)<0){var z=p,G=k,q=T;p=A,k=B,T=P,A=z,B=G,P=q}var H=function(e,t,n,r,i,a){var o=n-e,s=r-t,u=i-e,l=a-t,c=o*o+s*s,h=u*u+l*l,d=.5/(o*l-s*u),f=e+(l*c-s*h)*d,p=t+(o*h-u*c)*d;return{x:f,y:p}}(x,_,k,T,B,P);this._cx=H.x,this._cy=H.y;for(var V=0;V<a;V++)this._dists[V]=kT(e[2*V],e[2*V+1],H.x,H.y);CT(this._ids,this._dists,0,a-1),this._hullStart=f;var j=3;n[f]=t[A]=p,n[p]=t[f]=A,n[A]=t[p]=f,r[f]=0,r[p]=1,r[A]=2,i.fill(-1),i[this._hashKey(x,_)]=f,i[this._hashKey(k,T)]=p,i[this._hashKey(B,P)]=A,this.trianglesLen=0,this._addTriangle(f,p,A,-1,-1,-1);for(var W,X,Y=0;Y<this._ids.length;Y++){var Q=this._ids[Y],J=e[2*Q],K=e[2*Q+1];if(!(Y>0&&Math.abs(J-W)<=wT&&Math.abs(K-X)<=wT)&&(W=J,X=K,Q!==f&&Q!==p&&Q!==A)){for(var Z=0,$=0,ee=this._hashKey(J,K);$<this._hashSize&&(-1===(Z=i[(ee+$)%this._hashSize])||Z===n[Z]);$++);for(var te=Z=t[Z],ne=void 0;ne=n[te],_T(J,K,e[2*te],e[2*te+1],e[2*ne],e[2*ne+1])>=0;)if((te=ne)===Z){te=-1;break}if(-1!==te){var re=this._addTriangle(te,Q,n[te],-1,-1,r[te]);r[Q]=this._legalize(re+2),r[te]=re,j++;for(var ie=n[te];ne=n[ie],_T(J,K,e[2*ie],e[2*ie+1],e[2*ne],e[2*ne+1])<0;)re=this._addTriangle(ie,Q,ne,r[Q],-1,r[ie]),r[Q]=this._legalize(re+2),n[ie]=ie,j--,ie=ne;if(te===Z)for(;_T(J,K,e[2*(ne=t[te])],e[2*ne+1],e[2*te],e[2*te+1])<0;)re=this._addTriangle(ne,Q,te,-1,r[te],r[ne]),this._legalize(re+2),r[ne]=re,n[te]=te,j--,te=ne;this._hullStart=t[Q]=te,n[te]=t[ie]=Q,n[Q]=ie,i[this._hashKey(J,K)]=Q,i[this._hashKey(e[2*te],e[2*te+1])]=te}}}this.hull=new Uint32Array(j);for(var ae=0,oe=this._hullStart;ae<j;ae++)this.hull[ae]=oe,oe=n[oe];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}},{key:"_hashKey",value:function(e,t){return Math.floor(function(e,t){var n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}(e-this._cx,t-this._cy)*this._hashSize)%this._hashSize}},{key:"_legalize",value:function(e){for(var t=this._triangles,n=this._halfedges,r=this.coords,i=0,a=0;;){var o=n[e],s=e-e%3;if(a=s+(e+2)%3,-1!==o){var u=o-o%3,l=s+(e+1)%3,c=u+(o+2)%3,h=t[a],d=t[e],f=t[l],p=t[c];if(TT(r[2*h],r[2*h+1],r[2*d],r[2*d+1],r[2*f],r[2*f+1],r[2*p],r[2*p+1])){t[e]=p,t[o]=h;var A=n[c];if(-1===A){var v=this._hullStart;do{if(this._hullTri[v]===c){this._hullTri[v]=e;break}v=this._hullPrev[v]}while(v!==this._hullStart)}this._link(e,A),this._link(o,n[a]),this._link(a,c);var m=u+(o+1)%3;i<ST.length&&(ST[i++]=m)}else{if(0===i)break;e=ST[--i]}}else{if(0===i)break;e=ST[--i]}}return a}},{key:"_link",value:function(e,t){this._halfedges[e]=t,-1!==t&&(this._halfedges[t]=e)}},{key:"_addTriangle",value:function(e,t,n,r,i,a){var o=this.trianglesLen;return this._triangles[o]=e,this._triangles[o+1]=t,this._triangles[o+2]=n,this._link(o,r),this._link(o+1,i),this._link(o+2,a),this.trianglesLen+=3,o}}],[{key:"from",value:function(t){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:BT,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:PT,i=t.length,a=new Float64Array(2*i),o=0;o<i;o++){var s=t[o];a[2*o]=n(s),a[2*o+1]=r(s)}return new e(a)}}]),e}();function kT(e,t,n,r){var i=e-n,a=t-r;return i*i+a*a}function TT(e,t,n,r,i,a,o,s){var u=e-o,l=t-s,c=n-o,h=r-s,d=i-o,f=a-s,p=c*c+h*h,A=d*d+f*f;return u*(h*A-p*f)-l*(c*A-p*d)+(u*u+l*l)*(c*f-h*d)<0}function ET(e,t,n,r,i,a){var o=n-e,s=r-t,u=i-e,l=a-t,c=o*o+s*s,h=u*u+l*l,d=.5/(o*l-s*u),f=(l*c-s*h)*d,p=(o*h-u*c)*d;return f*f+p*p}function CT(e,t,n,r){if(r-n<=20)for(var i=n+1;i<=r;i++){for(var a=e[i],o=t[a],s=i-1;s>=n&&t[e[s]]>o;)e[s+1]=e[s--];e[s+1]=a}else{var u=n+1,l=r;RT(e,n+r>>1,u),t[e[n]]>t[e[r]]&&RT(e,n,r),t[e[u]]>t[e[r]]&&RT(e,u,r),t[e[n]]>t[e[u]]&&RT(e,n,u);for(var c=e[u],h=t[c];;){do{u++}while(t[e[u]]<h);do{l--}while(t[e[l]]>h);if(l<u)break;RT(e,u,l)}e[n+1]=e[l],e[l]=c,r-u+1>=l-n?(CT(e,t,u,r),CT(e,t,n,l-1)):(CT(e,t,n,l-1),CT(e,t,u,r))}}function RT(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function BT(e){return e[0]}function PT(e){return e[1]}function NT(e,t){var n,r,i,a,o,s,u,l,c,h=0,d=e[0],f=e[1],p=t.length;for(n=0;n<p;n++){r=0;var A=t[n],v=A.length-1;if((l=A[0])[0]!==A[v][0]&&l[1]!==A[v][1])throw new Error("First and last coordinates in a ring must be the same");for(a=l[0]-d,o=l[1]-f;r<v;r++){if(s=(c=A[r+1])[0]-d,u=c[1]-f,0===o&&0===u){if(s<=0&&a>=0||a<=0&&s>=0)return 0}else if(u>=0&&o<=0||u<=0&&o>=0){if(0===(i=_T(a,s,o,u,0,0)))return 0;(i>0&&u>0&&o<=0||i<0&&u<=0&&o>0)&&h++}l=c,o=u,a=s}}return h%2!==0}function IT(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if("Feature"===e.type&&null!==e.geometry&&"Point"===e.geometry.type)return q(e.geometry.coordinates);if("Point"===e.type)return q(e.coordinates)}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return q(e);throw new Error("coord must be GeoJSON Point or an Array of numbers")}function DT(e){return"Feature"===e.type?e.geometry:e}function LT(e,t){return t[0]<=e[0]&&t[1]<=e[1]&&t[2]>=e[0]&&t[3]>=e[1]}var OT,FT,UT,zT,GT,qT,HT,VT,jT,WT,XT,YT,QT,JT,KT,ZT,$T=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e)throw new Error("point is required");if(!t)throw new Error("polygon is required");var r=IT(e),i=DT(t),a=i.type,o=t.bbox,s=i.coordinates;if(o&&!1===LT(r,o))return!1;"Polygon"===a&&(s=[s]);for(var u=!1,l=0;l<s.length;++l){var c=NT(r,s[l]);if(0===c)return!n.ignoreBoundary;c&&(u=!0)}return u},eE=new sw,tE=new sw,nE={point:Tw,lineStart:Tw,lineEnd:Tw,polygonStart:function(){eE=new sw,nE.lineStart=rE,nE.lineEnd=iE},polygonEnd:function(){var e=+eE;tE.add(e<0?fw+e:e),this.lineStart=this.lineEnd=this.point=Tw},sphere:function(){tE.add(fw)}};function rE(){nE.point=aE}function iE(){oE(OT,FT)}function aE(e,t){nE.point=oE,OT=e,FT=t,UT=e*=Aw,zT=yw(t=(t*=Aw)/2+dw),GT=_w(t)}function oE(e,t){var n=(e*=Aw)-UT,r=n>=0?1:-1,i=r*n,a=yw(t=(t*=Aw)/2+dw),o=_w(t),s=GT*o,u=zT*a+s*yw(i),l=s*r*_w(i);eE.add(gw(l,u)),UT=e,zT=a,GT=o}function sE(e){return[gw(e[1],e[0]),Mw(e[2])]}function uE(e){var t=e[0],n=e[1],r=yw(n);return[r*yw(t),r*_w(t),_w(n)]}function lE(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function cE(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function hE(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function dE(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function fE(e){var t=Sw(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var pE={point:AE,lineStart:mE,lineEnd:gE,polygonStart:function(){pE.point=yE,pE.lineStart=bE,pE.lineEnd=xE,JT=new sw,nE.polygonStart()},polygonEnd:function(){nE.polygonEnd(),pE.point=AE,pE.lineStart=mE,pE.lineEnd=gE,eE<0?(qT=-(VT=180),HT=-(jT=90)):JT>uw?jT=90:JT<-1e-6&&(HT=-90),ZT[0]=qT,ZT[1]=VT},sphere:function(){qT=-(VT=180),HT=-(jT=90)}};function AE(e,t){KT.push(ZT=[qT=e,VT=e]),t<HT&&(HT=t),t>jT&&(jT=t)}function vE(e,t){var n=uE([e*Aw,t*Aw]);if(QT){var r=cE(QT,n),i=cE([r[1],-r[0],0],r);fE(i),i=sE(i);var a,o=e-WT,s=o>0?1:-1,u=i[0]*pw*s,l=vw(o)>180;l^(s*WT<u&&u<s*e)?(a=i[1]*pw)>jT&&(jT=a):l^(s*WT<(u=(u+360)%360-180)&&u<s*e)?(a=-i[1]*pw)<HT&&(HT=a):(t<HT&&(HT=t),t>jT&&(jT=t)),l?e<WT?_E(qT,e)>_E(qT,VT)&&(VT=e):_E(e,VT)>_E(qT,VT)&&(qT=e):VT>=qT?(e<qT&&(qT=e),e>VT&&(VT=e)):e>WT?_E(qT,e)>_E(qT,VT)&&(VT=e):_E(e,VT)>_E(qT,VT)&&(qT=e)}else KT.push(ZT=[qT=e,VT=e]);t<HT&&(HT=t),t>jT&&(jT=t),QT=n,WT=e}function mE(){pE.point=vE}function gE(){ZT[0]=qT,ZT[1]=VT,pE.point=AE,QT=null}function yE(e,t){if(QT){var n=e-WT;JT.add(vw(n)>180?n+(n>0?360:-360):n)}else XT=e,YT=t;nE.point(e,t),vE(e,t)}function bE(){nE.lineStart()}function xE(){yE(XT,YT),nE.lineEnd(),vw(JT)>uw&&(qT=-(VT=180)),ZT[0]=qT,ZT[1]=VT,QT=null}function _E(e,t){return(t-=e)<0?t+360:t}function wE(e,t){return e[0]-t[0]}function SE(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function ME(e){var t,n,r,i,a,o,s;if(jT=VT=-(qT=HT=1/0),KT=[],Ow(e,pE),n=KT.length){for(KT.sort(wE),t=1,a=[r=KT[0]];t<n;++t)SE(r,(i=KT[t])[0])||SE(r,i[1])?(_E(r[0],i[1])>_E(r[0],r[1])&&(r[1]=i[1]),_E(i[0],r[1])>_E(r[0],r[1])&&(r[0]=i[0])):a.push(r=i);for(o=-1/0,t=0,r=a[n=a.length-1];t<=n;r=i,++t)i=a[t],(s=_E(r[1],i[0]))>o&&(o=s,qT=i[0],VT=r[1])}return KT=ZT=null,qT===1/0||HT===1/0?[[NaN,NaN],[NaN,NaN]]:[[qT,HT],[VT,jT]]}function kE(e){return vw(e[0])<=cw?e[0]:ww(e[0])*((vw(e[0])+cw)%fw-cw)}function TE(e,t){var n=kE(t),r=t[1],i=_w(r),a=[_w(n),-yw(n),0],o=0,s=0,u=new sw;1===i?r=hw+uw:-1===i&&(r=-hw-uw);for(var l=0,c=e.length;l<c;++l)if(d=(h=e[l]).length)for(var h,d,f=h[d-1],p=kE(f),A=f[1]/2+dw,v=_w(A),m=yw(A),g=0;g<d;++g,p=b,v=_,m=w,f=y){var y=h[g],b=kE(y),x=y[1]/2+dw,_=_w(x),w=yw(x),S=b-p,M=S>=0?1:-1,k=M*S,T=k>cw,E=v*_;if(u.add(gw(E*M*_w(k),m*w+E*yw(k))),o+=T?S+M*fw:S,T^p>=n^b>=n){var C=cE(uE(f),uE(y));fE(C);var R=cE(a,C);fE(R);var B=(T^S>=0?-1:1)*Mw(R[2]);(r>B||r===B&&(C[0]||C[1]))&&(s+=T^S>=0?1:-1)}}return(o<-1e-6||o<uw&&u<-1e-12)^1&s}var EE,CE,RE,BE,PE,NE,IE,DE,LE,OE,FE,UE,zE,GE,qE,HE,VE={Feature:function(e,t){return WE(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)if(WE(n[r].geometry,t))return!0;return!1}},jE={Sphere:function(){return!0},Point:function(e,t){return XE(e.coordinates,t)},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)if(XE(n[r],t))return!0;return!1},LineString:function(e,t){return YE(e.coordinates,t)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)if(YE(n[r],t))return!0;return!1},Polygon:function(e,t){return QE(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)if(QE(n[r],t))return!0;return!1},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)if(WE(n[r],t))return!0;return!1}};function WE(e,t){return!(!e||!jE.hasOwnProperty(e.type))&&jE[e.type](e,t)}function XE(e,t){return 0===Vw(e,t)}function YE(e,t){for(var n,r,i,a=0,o=e.length;a<o;a++){if(0===(r=Vw(e[a],t)))return!0;if(a>0&&(i=Vw(e[a],e[a-1]))>0&&n<=i&&r<=i&&(n+r-i)*(1-Math.pow((n-r)/i,2))<lw*i)return!0;n=r}return!1}function QE(e,t){return!!TE(e.map(JE),KE(t))}function JE(e){return(e=e.map(KE)).pop(),e}function KE(e){return[e[0]*Aw,e[1]*Aw]}function ZE(e,t){return(e&&VE.hasOwnProperty(e.type)?VE[e.type]:WE)(e,t)}var $E={sphere:Tw,point:eC,lineStart:nC,lineEnd:aC,polygonStart:function(){$E.lineStart=oC,$E.lineEnd=sC},polygonEnd:function(){$E.lineStart=nC,$E.lineEnd=aC}};function eC(e,t){e*=Aw;var n=yw(t*=Aw);tC(n*yw(e),n*_w(e),_w(t))}function tC(e,t,n){++EE,RE+=(e-RE)/EE,BE+=(t-BE)/EE,PE+=(n-PE)/EE}function nC(){$E.point=rC}function rC(e,t){e*=Aw;var n=yw(t*=Aw);GE=n*yw(e),qE=n*_w(e),HE=_w(t),$E.point=iC,tC(GE,qE,HE)}function iC(e,t){e*=Aw;var n=yw(t*=Aw),r=n*yw(e),i=n*_w(e),a=_w(t),o=gw(Sw((o=qE*a-HE*i)*o+(o=HE*r-GE*a)*o+(o=GE*i-qE*r)*o),GE*r+qE*i+HE*a);CE+=o,NE+=o*(GE+(GE=r)),IE+=o*(qE+(qE=i)),DE+=o*(HE+(HE=a)),tC(GE,qE,HE)}function aC(){$E.point=eC}function oC(){$E.point=uC}function sC(){lC(UE,zE),$E.point=eC}function uC(e,t){UE=e,zE=t,e*=Aw,t*=Aw,$E.point=lC;var n=yw(t);GE=n*yw(e),qE=n*_w(e),HE=_w(t),tC(GE,qE,HE)}function lC(e,t){e*=Aw;var n=yw(t*=Aw),r=n*yw(e),i=n*_w(e),a=_w(t),o=qE*a-HE*i,s=HE*r-GE*a,u=GE*i-qE*r,l=xw(o,s,u),c=Mw(l),h=l&&-c/l;LE.add(h*o),OE.add(h*s),FE.add(h*u),CE+=c,NE+=c*(GE+(GE=r)),IE+=c*(qE+(qE=i)),DE+=c*(HE+(HE=a)),tC(GE,qE,HE)}function cC(e){EE=CE=RE=BE=PE=NE=IE=DE=0,LE=new sw,OE=new sw,FE=new sw,Ow(e,$E);var t=+LE,n=+OE,r=+FE,i=xw(t,n,r);return i<lw&&(t=NE,n=IE,r=DE,CE<uw&&(t=RE,n=BE,r=PE),(i=xw(t,n,r))<lw)?[NaN,NaN]:[gw(n,t)*pw,Mw(r/i)*pw]}var hC=1e-6,dC=function(){function e(){V(this,e),this._x0=this._y0=this._x1=this._y1=null,this._=""}return W(e,[{key:"moveTo",value:function(e,t){this._+="M".concat(this._x0=this._x1=+e,",").concat(this._y0=this._y1=+t)}},{key:"closePath",value:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}},{key:"lineTo",value:function(e,t){this._+="L".concat(this._x1=+e,",").concat(this._y1=+t)}},{key:"arc",value:function(e,t,n){var r=(e=+e)+(n=+n),i=t=+t;if(n<0)throw new Error("negative radius");null===this._x1?this._+="M".concat(r,",").concat(i):(Math.abs(this._x1-r)>hC||Math.abs(this._y1-i)>hC)&&(this._+="L"+r+","+i),n&&(this._+="A".concat(n,",").concat(n,",0,1,1,").concat(e-n,",").concat(t,"A").concat(n,",").concat(n,",0,1,1,").concat(this._x1=r,",").concat(this._y1=i))}},{key:"rect",value:function(e,t,n,r){this._+="M".concat(this._x0=this._x1=+e,",").concat(this._y0=this._y1=+t,"h").concat(+n,"v").concat(+r,"h").concat(-n,"Z")}},{key:"value",value:function(){return this._||null}}]),e}(),fC=function(){function e(){V(this,e),this._=[]}return W(e,[{key:"moveTo",value:function(e,t){this._.push([e,t])}},{key:"closePath",value:function(){this._.push(this._[0].slice())}},{key:"lineTo",value:function(e,t){this._.push([e,t])}},{key:"value",value:function(){return this._.length?this._:null}}]),e}(),pC=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,960,500],r=l(n,4),i=r[0],a=r[1],o=r[2],s=r[3];if(V(this,e),!((o=+o)>=(i=+i))||!((s=+s)>=(a=+a)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(2*t.points.length),this.vectors=new Float64Array(2*t.points.length),this.xmax=o,this.xmin=i,this.ymax=s,this.ymin=a,this._init()}return W(e,[{key:"update",value:function(){return this.delaunay.update(),this._init(),this}},{key:"_init",value:function(){for(var e,t,n,r,i=this.delaunay,a=i.points,o=i.hull,s=i.triangles,u=this.vectors,l=this.circumcenters=this._circumcenters.subarray(0,s.length/3*2),c=0,h=0,d=s.length;c<d;c+=3,h+=2){var f=2*s[c],p=2*s[c+1],A=2*s[c+2],v=a[f],m=a[f+1],g=a[p],y=a[p+1],b=a[A],x=a[A+1],_=g-v,w=y-m,S=b-v,M=x-m,k=2*(_*M-w*S);if(Math.abs(k)<1e-9){if(void 0===e){e=t=0;var T,E=ee(o);try{for(E.s();!(T=E.n()).done;){var C=T.value;e+=a[2*C],t+=a[2*C+1]}}catch(q){E.e(q)}finally{E.f()}e/=o.length,t/=o.length}var R=1e9*Math.sign((e-v)*M-(t-m)*S);n=(v+b)/2-R*M,r=(m+x)/2+R*S}else{var B=1/k,P=_*_+w*w,N=S*S+M*M;n=v+(M*P-w*N)*B,r=m+(_*N-S*P)*B}l[h]=n,l[h+1]=r}var I,D,L,O=o[o.length-1],F=4*O,U=a[2*O],z=a[2*O+1];u.fill(0);for(var G=0;G<o.length;++G)I=F,D=U,L=z,F=4*(O=o[G]),U=a[2*O],z=a[2*O+1],u[I+2]=u[F]=L-z,u[I+3]=u[F+1]=U-D}},{key:"render",value:function(e){var t=null==e?e=new dC:void 0,n=this.delaunay,r=n.halfedges,i=n.inedges,a=n.hull,o=this.circumcenters,s=this.vectors;if(a.length<=1)return null;for(var u=0,l=r.length;u<l;++u){var c=r[u];if(!(c<u)){var h=2*Math.floor(u/3),d=2*Math.floor(c/3),f=o[h],p=o[h+1],A=o[d],v=o[d+1];this._renderSegment(f,p,A,v,e)}}for(var m,g=a[a.length-1],y=0;y<a.length;++y){m=g,g=a[y];var b=2*Math.floor(i[g]/3),x=o[b],_=o[b+1],w=4*m,S=this._project(x,_,s[w+2],s[w+3]);S&&this._renderSegment(x,_,S[0],S[1],e)}return t&&t.value()}},{key:"renderBounds",value:function(e){var t=null==e?e=new dC:void 0;return e.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),t&&t.value()}},{key:"renderCell",value:function(e,t){var n=null==t?t=new dC:void 0,r=this._clip(e);if(null!==r&&r.length){t.moveTo(r[0],r[1]);for(var i=r.length;r[0]===r[i-2]&&r[1]===r[i-1]&&i>1;)i-=2;for(var a=2;a<i;a+=2)r[a]===r[a-2]&&r[a+1]===r[a-1]||t.lineTo(r[a],r[a+1]);return t.closePath(),n&&n.value()}}},{key:"cellPolygons",value:se().mark((function e(){var t,n,r,i;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.delaunay.points,n=0,r=t.length/2;case 2:if(!(n<r)){e.next=11;break}if(!(i=this.cellPolygon(n))){e.next=8;break}return i.index=n,e.next=8,i;case 8:++n,e.next=2;break;case 11:case"end":return e.stop()}}),e,this)}))},{key:"cellPolygon",value:function(e){var t=new fC;return this.renderCell(e,t),t.value()}},{key:"_renderSegment",value:function(e,t,n,r,i){var a,o=this._regioncode(e,t),s=this._regioncode(n,r);0===o&&0===s?(i.moveTo(e,t),i.lineTo(n,r)):(a=this._clipSegment(e,t,n,r,o,s))&&(i.moveTo(a[0],a[1]),i.lineTo(a[2],a[3]))}},{key:"contains",value:function(e,t,n){return(t=+t)===t&&(n=+n)===n&&this.delaunay._step(e,t,n)===e}},{key:"neighbors",value:se().mark((function e(t){var n,r,i,a,o,s,u,l,c;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=this._clip(t))){e.next=33;break}r=ee(this.delaunay.neighbors(t)),e.prev=3,r.s();case 5:if((i=r.n()).done){e.next=25;break}if(a=i.value,!(o=this._clip(a))){e.next=23;break}s=0,u=n.length;case 10:if(!(s<u)){e.next=23;break}l=0,c=o.length;case 12:if(!(l<c)){e.next=20;break}if(n[s]!==o[l]||n[s+1]!==o[l+1]||n[(s+2)%u]!==o[(l+c-2)%c]||n[(s+3)%u]!==o[(l+c-1)%c]){e.next=17;break}return e.next=16,a;case 16:return e.abrupt("break",23);case 17:l+=2,e.next=12;break;case 20:s+=2,e.next=10;break;case 23:e.next=5;break;case 25:e.next=30;break;case 27:e.prev=27,e.t0=e.catch(3),r.e(e.t0);case 30:return e.prev=30,r.f(),e.finish(30);case 33:case"end":return e.stop()}}),e,this,[[3,27,30,33]])}))},{key:"_cell",value:function(e){var t=this.circumcenters,n=this.delaunay,r=n.inedges,i=n.halfedges,a=n.triangles,o=r[e];if(-1===o)return null;var s=[],u=o;do{var l=Math.floor(u/3);if(s.push(t[2*l],t[2*l+1]),a[u=u%3===2?u-2:u+1]!==e)break;u=i[u]}while(u!==o&&-1!==u);return s}},{key:"_clip",value:function(e){if(0===e&&1===this.delaunay.hull.length)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];var t=this._cell(e);if(null===t)return null;var n=this.vectors,r=4*e;return this._simplify(n[r]||n[r+1]?this._clipInfinite(e,t,n[r],n[r+1],n[r+2],n[r+3]):this._clipFinite(e,t))}},{key:"_clipFinite",value:function(e,t){for(var n,r,i,a,o=t.length,s=null,u=t[o-2],c=t[o-1],h=this._regioncode(u,c),d=0,f=0;f<o;f+=2)if(n=u,r=c,u=t[f],c=t[f+1],i=h,h=this._regioncode(u,c),0===i&&0===h)a=d,d=0,s?s.push(u,c):s=[u,c];else{var p=void 0,A=void 0,v=void 0,m=void 0,g=void 0;if(0===i){if(null===(p=this._clipSegment(n,r,u,c,i,h)))continue;var y=l(p,4);A=y[0],v=y[1],m=y[2],g=y[3]}else{if(null===(p=this._clipSegment(u,c,n,r,h,i)))continue;var b=l(p,4);m=b[0],g=b[1],A=b[2],v=b[3],a=d,d=this._edgecode(A,v),a&&d&&this._edge(e,a,d,s,s.length),s?s.push(A,v):s=[A,v]}a=d,d=this._edgecode(m,g),a&&d&&this._edge(e,a,d,s,s.length),s?s.push(m,g):s=[m,g]}if(s)a=d,d=this._edgecode(s[0],s[1]),a&&d&&this._edge(e,a,d,s,s.length);else if(this.contains(e,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return s}},{key:"_clipSegment",value:function(e,t,n,r,i,a){var o=i<a;if(o){var s=[n,r,e,t,a,i];e=s[0],t=s[1],n=s[2],r=s[3],i=s[4],a=s[5]}for(;;){if(0===i&&0===a)return o?[n,r,e,t]:[e,t,n,r];if(i&a)return null;var u=void 0,l=void 0,c=i||a;8&c?(u=e+(n-e)*(this.ymax-t)/(r-t),l=this.ymax):4&c?(u=e+(n-e)*(this.ymin-t)/(r-t),l=this.ymin):2&c?(l=t+(r-t)*(this.xmax-e)/(n-e),u=this.xmax):(l=t+(r-t)*(this.xmin-e)/(n-e),u=this.xmin),i?(e=u,t=l,i=this._regioncode(e,t)):(n=u,r=l,a=this._regioncode(n,r))}}},{key:"_clipInfinite",value:function(e,t,n,r,i,a){var o,s=Array.from(t);if((o=this._project(s[0],s[1],n,r))&&s.unshift(o[0],o[1]),(o=this._project(s[s.length-2],s[s.length-1],i,a))&&s.push(o[0],o[1]),s=this._clipFinite(e,s))for(var u,l=0,c=s.length,h=this._edgecode(s[c-2],s[c-1]);l<c;l+=2)u=h,h=this._edgecode(s[l],s[l+1]),u&&h&&(l=this._edge(e,u,h,s,l),c=s.length);else this.contains(e,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(s=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return s}},{key:"_edge",value:function(e,t,n,r,i){for(;t!==n;){var a=void 0,o=void 0;switch(t){case 5:t=4;continue;case 4:t=6,a=this.xmax,o=this.ymin;break;case 6:t=2;continue;case 2:t=10,a=this.xmax,o=this.ymax;break;case 10:t=8;continue;case 8:t=9,a=this.xmin,o=this.ymax;break;case 9:t=1;continue;case 1:t=5,a=this.xmin,o=this.ymin}r[i]===a&&r[i+1]===o||!this.contains(e,a,o)||(r.splice(i,0,a,o),i+=2)}return i}},{key:"_project",value:function(e,t,n,r){var i,a,o,s=1/0;if(r<0){if(t<=this.ymin)return null;(i=(this.ymin-t)/r)<s&&(o=this.ymin,a=e+(s=i)*n)}else if(r>0){if(t>=this.ymax)return null;(i=(this.ymax-t)/r)<s&&(o=this.ymax,a=e+(s=i)*n)}if(n>0){if(e>=this.xmax)return null;(i=(this.xmax-e)/n)<s&&(a=this.xmax,o=t+(s=i)*r)}else if(n<0){if(e<=this.xmin)return null;(i=(this.xmin-e)/n)<s&&(a=this.xmin,o=t+(s=i)*r)}return[a,o]}},{key:"_edgecode",value:function(e,t){return(e===this.xmin?1:e===this.xmax?2:0)|(t===this.ymin?4:t===this.ymax?8:0)}},{key:"_regioncode",value:function(e,t){return(e<this.xmin?1:e>this.xmax?2:0)|(t<this.ymin?4:t>this.ymax?8:0)}},{key:"_simplify",value:function(e){if(e&&e.length>4){for(var t=0;t<e.length;t+=2){var n=(t+2)%e.length,r=(t+4)%e.length;(e[t]===e[n]&&e[n]===e[r]||e[t+1]===e[n+1]&&e[n+1]===e[r+1])&&(e.splice(n,2),t-=2)}e.length||(e=null)}return e}}]),e}(),AC=se().mark(wC),vC=2*Math.PI,mC=Math.pow;function gC(e){return e[0]}function yC(e){return e[1]}function bC(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}var xC=function(){function e(t){V(this,e),this._delaunator=new MT(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}return W(e,[{key:"update",value:function(){return this._delaunator.update(),this._init(),this}},{key:"_init",value:function(){var e=this._delaunator,t=this.points;if(e.hull&&e.hull.length>2&&function(e){for(var t=e.triangles,n=e.coords,r=0;r<t.length;r+=3){var i=2*t[r],a=2*t[r+1],o=2*t[r+2];if((n[o]-n[i])*(n[a+1]-n[i+1])-(n[a]-n[i])*(n[o+1]-n[i+1])>1e-10)return!1}return!0}(e)){this.collinear=Int32Array.from({length:t.length/2},(function(e,t){return t})).sort((function(e,n){return t[2*e]-t[2*n]||t[2*e+1]-t[2*n+1]}));for(var n=this.collinear[0],r=this.collinear[this.collinear.length-1],i=[t[2*n],t[2*n+1],t[2*r],t[2*r+1]],a=1e-8*Math.hypot(i[3]-i[1],i[2]-i[0]),o=0,s=t.length/2;o<s;++o){var u=bC(t[2*o],t[2*o+1],a);t[2*o]=u[0],t[2*o+1]=u[1]}this._delaunator=new MT(t)}else delete this.collinear;for(var l=this.halfedges=this._delaunator.halfedges,c=this.hull=this._delaunator.hull,h=this.triangles=this._delaunator.triangles,d=this.inedges.fill(-1),f=this._hullIndex.fill(-1),p=0,A=l.length;p<A;++p){var v=h[p%3===2?p-2:p+1];-1!==l[p]&&-1!==d[v]||(d[v]=p)}for(var m=0,g=c.length;m<g;++m)f[c[m]]=m;c.length<=2&&c.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=c[0],d[c[0]]=1,2===c.length&&(d[c[1]]=0,this.triangles[1]=c[1],this.triangles[2]=c[1]))}},{key:"voronoi",value:function(e){return new pC(this,e)}},{key:"neighbors",value:se().mark((function e(t){var n,r,i,a,o,s,u,l,c,h,d;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.inedges,r=this.hull,i=this._hullIndex,a=this.halfedges,o=this.triangles,!(s=this.collinear)){e.next=10;break}if(!((u=s.indexOf(t))>0)){e.next=6;break}return e.next=6,s[u-1];case 6:if(!(u<s.length-1)){e.next=9;break}return e.next=9,s[u+1];case 9:return e.abrupt("return");case 10:if(-1!==(l=n[t])){e.next=13;break}return e.abrupt("return");case 13:c=l,h=-1;case 14:return e.next=16,h=o[c];case 16:if(o[c=c%3===2?c-2:c+1]===t){e.next=19;break}return e.abrupt("return");case 19:if(-1!==(c=a[c])){e.next=26;break}if((d=r[(i[t]+1)%r.length])===h){e.next=25;break}return e.next=25,d;case 25:return e.abrupt("return");case 26:if(c!==l){e.next=14;break}case 27:case"end":return e.stop()}}),e,this)}))},{key:"find",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if((e=+e)!==e||(t=+t)!==t)return-1;for(var r,i=n;(r=this._step(n,e,t))>=0&&r!==n&&r!==i;)n=r;return r}},{key:"_step",value:function(e,t,n){var r=this.inedges,i=this.hull,a=this._hullIndex,o=this.halfedges,s=this.triangles,u=this.points;if(-1===r[e]||!u.length)return(e+1)%(u.length>>1);var l=e,c=mC(t-u[2*e],2)+mC(n-u[2*e+1],2),h=r[e],d=h;do{var f=s[d],p=mC(t-u[2*f],2)+mC(n-u[2*f+1],2);if(p<c&&(c=p,l=f),s[d=d%3===2?d-2:d+1]!==e)break;if(-1===(d=o[d])){if((d=i[(a[e]+1)%i.length])!==f&&mC(t-u[2*d],2)+mC(n-u[2*d+1],2)<c)return d;break}}while(d!==h);return l}},{key:"render",value:function(e){for(var t=null==e?e=new dC:void 0,n=this.points,r=this.halfedges,i=this.triangles,a=0,o=r.length;a<o;++a){var s=r[a];if(!(s<a)){var u=2*i[a],l=2*i[s];e.moveTo(n[u],n[u+1]),e.lineTo(n[l],n[l+1])}}return this.renderHull(e),t&&t.value()}},{key:"renderPoints",value:function(e,t){void 0!==t||e&&"function"===typeof e.moveTo||(t=e,e=null),t=void 0==t?2:+t;for(var n=null==e?e=new dC:void 0,r=this.points,i=0,a=r.length;i<a;i+=2){var o=r[i],s=r[i+1];e.moveTo(o+t,s),e.arc(o,s,t,0,vC)}return n&&n.value()}},{key:"renderHull",value:function(e){var t=null==e?e=new dC:void 0,n=this.hull,r=this.points,i=2*n[0],a=n.length;e.moveTo(r[i],r[i+1]);for(var o=1;o<a;++o){var s=2*n[o];e.lineTo(r[s],r[s+1])}return e.closePath(),t&&t.value()}},{key:"hullPolygon",value:function(){var e=new fC;return this.renderHull(e),e.value()}},{key:"renderTriangle",value:function(e,t){var n=null==t?t=new dC:void 0,r=this.points,i=this.triangles,a=2*i[e*=3],o=2*i[e+1],s=2*i[e+2];return t.moveTo(r[a],r[a+1]),t.lineTo(r[o],r[o+1]),t.lineTo(r[s],r[s+1]),t.closePath(),n&&n.value()}},{key:"trianglePolygons",value:se().mark((function e(){var t,n,r;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.triangles,n=0,r=t.length/3;case 2:if(!(n<r)){e.next=8;break}return e.next=5,this.trianglePolygon(n);case 5:++n,e.next=2;break;case 8:case"end":return e.stop()}}),e,this)}))},{key:"trianglePolygon",value:function(e){var t=new fC;return this.renderTriangle(e,t),t.value()}}],[{key:"from",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:gC,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:yC,i=arguments.length>3?arguments[3]:void 0;return new e("length"in t?_C(t,n,r,i):Float64Array.from(wC(t,n,r,i)))}}]),e}();function _C(e,t,n,r){for(var i=e.length,a=new Float64Array(2*i),o=0;o<i;++o){var s=e[o];a[2*o]=t.call(r,s,o,e),a[2*o+1]=n.call(r,s,o,e)}return a}function wC(e,t,n,r){var i,a,o,s;return se().wrap((function(u){for(;;)switch(u.prev=u.next){case 0:i=0,a=ee(e),u.prev=2,a.s();case 4:if((o=a.n()).done){u.next=13;break}return s=o.value,u.next=8,t.call(r,s,i,e);case 8:return u.next=10,n.call(r,s,i,e);case 10:++i;case 11:u.next=4;break;case 13:u.next=18;break;case 15:u.prev=15,u.t0=u.catch(2),a.e(u.t0);case 18:return u.prev=18,a.f(),u.finish(18);case 21:case"end":return u.stop()}}),AC,null,[[2,15,18,21]])}function SC(e,t){function n(n,r){return n=e(n,r),t(n[0],n[1])}return e.invert&&t.invert&&(n.invert=function(n,r){return(n=t.invert(n,r))&&e.invert(n[0],n[1])}),n}function MC(e,t){return vw(e)>cw&&(e-=Math.round(e/fw)*fw),[e,t]}function kC(e,t,n){return(e%=fw)?t||n?SC(EC(e),CC(t,n)):EC(e):t||n?CC(t,n):MC}function TC(e){return function(t,n){return vw(t+=e)>cw&&(t-=Math.round(t/fw)*fw),[t,n]}}function EC(e){var t=TC(e);return t.invert=TC(-e),t}function CC(e,t){var n=yw(e),r=_w(e),i=yw(t),a=_w(t);function o(e,t){var o=yw(t),s=yw(e)*o,u=_w(e)*o,l=_w(t),c=l*n+s*r;return[gw(u*i-c*a,s*n-l*r),Mw(c*i+u*a)]}return o.invert=function(e,t){var o=yw(t),s=yw(e)*o,u=_w(e)*o,l=_w(t),c=l*i-u*a;return[gw(u*i+l*a,s*n+c*r),Mw(c*n-s*r)]},o}function RC(){var e,t=[];return{point:function(t,n,r){e.push([t,n,r])},lineStart:function(){t.push(e=[])},lineEnd:Tw,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var n=t;return t=[],e=null,n}}}function BC(e,t){return vw(e[0]-t[0])<uw&&vw(e[1]-t[1])<uw}function PC(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function NC(e,t,n,r,i){var a,o,s=[],u=[];if(e.forEach((function(e){if(!((t=e.length-1)<=0)){var t,n,r=e[0],o=e[t];if(BC(r,o)){if(!r[2]&&!o[2]){for(i.lineStart(),a=0;a<t;++a)i.point((r=e[a])[0],r[1]);return void i.lineEnd()}o[0]+=2e-6}s.push(n=new PC(r,e,null,!0)),u.push(n.o=new PC(r,null,n,!1)),s.push(n=new PC(o,e,null,!1)),u.push(n.o=new PC(o,null,n,!0))}})),s.length){for(u.sort(t),IC(s),IC(u),a=0,o=u.length;a<o;++a)u[a].e=n=!n;for(var l,c,h=s[0];;){for(var d=h,f=!0;d.v;)if((d=d.n)===h)return;l=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(f)for(a=0,o=l.length;a<o;++a)i.point((c=l[a])[0],c[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(f)for(l=d.p.z,a=l.length-1;a>=0;--a)i.point((c=l[a])[0],c[1]);else r(d.x,d.p.x,-1,i);d=d.p}l=(d=d.o).z,f=!f}while(!d.v);i.lineEnd()}}}function IC(e){if(t=e.length){for(var t,n,r=0,i=e[0];++r<t;)i.n=n=e[r],n.p=i,i=n;i.n=n=e[0],n.p=i}}function DC(e,t,n,r){return function(i){var a,o,s,u=t(i),l=RC(),c=t(l),h=!1,d={point:f,lineStart:A,lineEnd:v,polygonStart:function(){d.point=m,d.lineStart=g,d.lineEnd=y,o=[],a=[]},polygonEnd:function(){d.point=f,d.lineStart=A,d.lineEnd=v,o=hT(o);var e=TE(a,r);o.length?(h||(i.polygonStart(),h=!0),NC(o,OC,e,n,i)):e&&(h||(i.polygonStart(),h=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),h&&(i.polygonEnd(),h=!1),o=a=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function f(t,n){e(t,n)&&i.point(t,n)}function p(e,t){u.point(e,t)}function A(){d.point=p,u.lineStart()}function v(){d.point=f,u.lineEnd()}function m(e,t){s.push([e,t]),c.point(e,t)}function g(){c.lineStart(),s=[]}function y(){m(s[0][0],s[0][1]),c.lineEnd();var e,t,n,r,u=c.clean(),d=l.result(),f=d.length;if(s.pop(),a.push(s),s=null,f)if(1&u){if((t=(n=d[0]).length-1)>0){for(h||(i.polygonStart(),h=!0),i.lineStart(),e=0;e<t;++e)i.point((r=n[e])[0],r[1]);i.lineEnd()}}else f>1&&2&u&&d.push(d.pop().concat(d.shift())),o.push(d.filter(LC))}return d}}function LC(e){return e.length>1}function OC(e,t){return((e=e.x)[0]<0?e[1]-hw-uw:hw-e[1])-((t=t.x)[0]<0?t[1]-hw-uw:hw-t[1])}MC.invert=MC;var FC=DC((function(){return!0}),(function(e){var t,n=NaN,r=NaN,i=NaN;return{lineStart:function(){e.lineStart(),t=1},point:function(a,o){var s=a>0?cw:-cw,u=vw(a-n);vw(u-cw)<uw?(e.point(n,r=(r+o)/2>0?hw:-hw),e.point(i,r),e.lineEnd(),e.lineStart(),e.point(s,r),e.point(a,r),t=0):i!==s&&u>=cw&&(vw(n-i)<uw&&(n-=i*uw),vw(a-s)<uw&&(a-=s*uw),r=function(e,t,n,r){var i,a,o=_w(e-n);return vw(o)>uw?mw((_w(t)*(a=yw(r))*_w(n)-_w(r)*(i=yw(t))*_w(e))/(i*a*o)):(t+r)/2}(n,r,a,o),e.point(i,r),e.lineEnd(),e.lineStart(),e.point(s,r),t=0),e.point(n=a,r=o),i=s},lineEnd:function(){e.lineEnd(),n=r=NaN},clean:function(){return 2-t}}}),(function(e,t,n,r){var i;if(null==e)i=n*hw,r.point(-cw,i),r.point(0,i),r.point(cw,i),r.point(cw,0),r.point(cw,-i),r.point(0,-i),r.point(-cw,-i),r.point(-cw,0),r.point(-cw,i);else if(vw(e[0]-t[0])>uw){var a=e[0]<t[0]?cw:-cw;i=n*a/2,r.point(-a,i),r.point(0,i),r.point(a,i)}else r.point(t[0],t[1])}),[-cw,-hw]);function UC(e,t,n,r,i,a){if(n){var o=yw(t),s=_w(t),u=r*n;null==i?(i=t+r*fw,a=t-u/2):(i=zC(o,i),a=zC(o,a),(r>0?i<a:i>a)&&(i+=r*fw));for(var l,c=i;r>0?c>a:c<a;c-=u)l=sE([o,-s*yw(c),-s*_w(c)]),e.point(l[0],l[1])}}function zC(e,t){(t=uE(t))[0]-=e,fE(t);var n=function(e){return e>1?0:e<-1?cw:Math.acos(e)}(-t[1]);return((-t[2]<0?-n:n)+fw-uw)%fw}function GC(e){var t=yw(e),n=2*Aw,r=t>0,i=vw(t)>uw;function a(e,n){return yw(e)*yw(n)>t}function o(e,n,r){var i=[1,0,0],a=cE(uE(e),uE(n)),o=lE(a,a),s=a[0],u=o-s*s;if(!u)return!r&&e;var l=t*o/u,c=-t*s/u,h=cE(i,a),d=dE(i,l);hE(d,dE(a,c));var f=h,p=lE(d,f),A=lE(f,f),v=p*p-A*(lE(d,d)-1);if(!(v<0)){var m=Sw(v),g=dE(f,(-p-m)/A);if(hE(g,d),g=sE(g),!r)return g;var y,b=e[0],x=n[0],_=e[1],w=n[1];x<b&&(y=b,b=x,x=y);var S=x-b,M=vw(S-cw)<uw;if(!M&&w<_&&(y=_,_=w,w=y),M||S<uw?M?_+w>0^g[1]<(vw(g[0]-b)<uw?_:w):_<=g[1]&&g[1]<=w:S>cw^(b<=g[0]&&g[0]<=x)){var k=dE(f,(-p+m)/A);return hE(k,d),[g,sE(k)]}}}function s(t,n){var i=r?e:cw-e,a=0;return t<-i?a|=1:t>i&&(a|=2),n<-i?a|=4:n>i&&(a|=8),a}return DC(a,(function(e){var t,n,u,l,c;return{lineStart:function(){l=u=!1,c=1},point:function(h,d){var f,p=[h,d],A=a(h,d),v=r?A?0:s(h,d):A?s(h+(h<0?cw:-cw),d):0;if(!t&&(l=u=A)&&e.lineStart(),A!==u&&(!(f=o(t,p))||BC(t,f)||BC(p,f))&&(p[2]=1),A!==u)c=0,A?(e.lineStart(),f=o(p,t),e.point(f[0],f[1])):(f=o(t,p),e.point(f[0],f[1],2),e.lineEnd()),t=f;else if(i&&t&&r^A){var m;v&n||!(m=o(p,t,!0))||(c=0,r?(e.lineStart(),e.point(m[0][0],m[0][1]),e.point(m[1][0],m[1][1]),e.lineEnd()):(e.point(m[1][0],m[1][1]),e.lineEnd(),e.lineStart(),e.point(m[0][0],m[0][1],3)))}!A||t&&BC(t,p)||e.point(p[0],p[1]),t=p,u=A,n=v},lineEnd:function(){u&&e.lineEnd(),t=null},clean:function(){return c|(l&&u)<<1}}}),(function(t,r,i,a){UC(a,e,n,i,t,r)}),r?[0,-e]:[-cw,e-cw])}var qC=1e9,HC=-qC;function VC(e,t,n,r){function i(i,a){return e<=i&&i<=n&&t<=a&&a<=r}function a(i,a,s,l){var c=0,h=0;if(null==i||(c=o(i,s))!==(h=o(a,s))||u(i,a)<0^s>0)do{l.point(0===c||3===c?e:n,c>1?r:t)}while((c=(c+s+4)%4)!==h);else l.point(a[0],a[1])}function o(r,i){return vw(r[0]-e)<uw?i>0?0:3:vw(r[0]-n)<uw?i>0?2:1:vw(r[1]-t)<uw?i>0?1:0:i>0?3:2}function s(e,t){return u(e.x,t.x)}function u(e,t){var n=o(e,1),r=o(t,1);return n!==r?n-r:0===n?t[1]-e[1]:1===n?e[0]-t[0]:2===n?e[1]-t[1]:t[0]-e[0]}return function(o){var u,l,c,h,d,f,p,A,v,m,g,y=o,b=RC(),x={point:_,lineStart:function(){x.point=w,l&&l.push(c=[]);m=!0,v=!1,p=A=NaN},lineEnd:function(){u&&(w(h,d),f&&v&&b.rejoin(),u.push(b.result()));x.point=_,v&&y.lineEnd()},polygonStart:function(){y=b,u=[],l=[],g=!0},polygonEnd:function(){var t=function(){for(var t=0,n=0,i=l.length;n<i;++n)for(var a,o,s=l[n],u=1,c=s.length,h=s[0],d=h[0],f=h[1];u<c;++u)a=d,o=f,d=(h=s[u])[0],f=h[1],o<=r?f>r&&(d-a)*(r-o)>(f-o)*(e-a)&&++t:f<=r&&(d-a)*(r-o)<(f-o)*(e-a)&&--t;return t}(),n=g&&t,i=(u=hT(u)).length;(n||i)&&(o.polygonStart(),n&&(o.lineStart(),a(null,null,1,o),o.lineEnd()),i&&NC(u,s,t,a,o),o.polygonEnd());y=o,u=l=c=null}};function _(e,t){i(e,t)&&y.point(e,t)}function w(a,o){var s=i(a,o);if(l&&c.push([a,o]),m)h=a,d=o,f=s,m=!1,s&&(y.lineStart(),y.point(a,o));else if(s&&v)y.point(a,o);else{var u=[p=Math.max(HC,Math.min(qC,p)),A=Math.max(HC,Math.min(qC,A))],b=[a=Math.max(HC,Math.min(qC,a)),o=Math.max(HC,Math.min(qC,o))];!function(e,t,n,r,i,a){var o,s=e[0],u=e[1],l=0,c=1,h=t[0]-s,d=t[1]-u;if(o=n-s,h||!(o>0)){if(o/=h,h<0){if(o<l)return;o<c&&(c=o)}else if(h>0){if(o>c)return;o>l&&(l=o)}if(o=i-s,h||!(o<0)){if(o/=h,h<0){if(o>c)return;o>l&&(l=o)}else if(h>0){if(o<l)return;o<c&&(c=o)}if(o=r-u,d||!(o>0)){if(o/=d,d<0){if(o<l)return;o<c&&(c=o)}else if(d>0){if(o>c)return;o>l&&(l=o)}if(o=a-u,d||!(o<0)){if(o/=d,d<0){if(o>c)return;o>l&&(l=o)}else if(d>0){if(o<l)return;o<c&&(c=o)}return l>0&&(e[0]=s+l*h,e[1]=u+l*d),c<1&&(t[0]=s+c*h,t[1]=u+c*d),!0}}}}}(u,b,e,t,n,r)?s&&(y.lineStart(),y.point(a,o),g=!1):(v||(y.lineStart(),y.point(u[0],u[1])),y.point(b[0],b[1]),s||y.lineEnd(),g=!1)}p=a,A=o,v=s}return x}}var jC=function(e){return e};function WC(e){return function(t){var n=new XC;for(var r in e)n[r]=e[r];return n.stream=t,n}}function XC(){}XC.prototype={constructor:XC,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var YC=1/0,QC=YC,JC=-YC,KC=JC,ZC={point:function(e,t){e<YC&&(YC=e);e>JC&&(JC=e);t<QC&&(QC=t);t>KC&&(KC=t)},lineStart:Tw,lineEnd:Tw,polygonStart:Tw,polygonEnd:Tw,result:function(){var e=[[YC,QC],[JC,KC]];return JC=KC=-(QC=YC=1/0),e}};var $C=ZC;function eR(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),null!=r&&e.clipExtent(null),Ow(n,e.stream($C)),t($C.result()),null!=r&&e.clipExtent(r),e}function tR(e,t,n){return eR(e,(function(n){var r=t[1][0]-t[0][0],i=t[1][1]-t[0][1],a=Math.min(r/(n[1][0]-n[0][0]),i/(n[1][1]-n[0][1])),o=+t[0][0]+(r-a*(n[1][0]+n[0][0]))/2,s=+t[0][1]+(i-a*(n[1][1]+n[0][1]))/2;e.scale(150*a).translate([o,s])}),n)}var nR=yw(30*Aw);function rR(e,t){return+t?function(e,t){function n(r,i,a,o,s,u,l,c,h,d,f,p,A,v){var m=l-r,g=c-i,y=m*m+g*g;if(y>4*t&&A--){var b=o+d,x=s+f,_=u+p,w=Sw(b*b+x*x+_*_),S=Mw(_/=w),M=vw(vw(_)-1)<uw||vw(a-h)<uw?(a+h)/2:gw(x,b),k=e(M,S),T=k[0],E=k[1],C=T-r,R=E-i,B=g*C-m*R;(B*B/y>t||vw((m*C+g*R)/y-.5)>.3||o*d+s*f+u*p<nR)&&(n(r,i,a,o,s,u,T,E,M,b/=w,x/=w,_,A,v),v.point(T,E),n(T,E,M,b,x,_,l,c,h,d,f,p,A,v))}}return function(t){var r,i,a,o,s,u,l,c,h,d,f,p,A={point:v,lineStart:m,lineEnd:y,polygonStart:function(){t.polygonStart(),A.lineStart=b},polygonEnd:function(){t.polygonEnd(),A.lineStart=m}};function v(n,r){n=e(n,r),t.point(n[0],n[1])}function m(){c=NaN,A.point=g,t.lineStart()}function g(r,i){var a=uE([r,i]),o=e(r,i);n(c,h,l,d,f,p,c=o[0],h=o[1],l=r,d=a[0],f=a[1],p=a[2],16,t),t.point(c,h)}function y(){A.point=v,t.lineEnd()}function b(){m(),A.point=x,A.lineEnd=_}function x(e,t){g(r=e,t),i=c,a=h,o=d,s=f,u=p,A.point=g}function _(){n(c,h,l,d,f,p,i,a,r,o,s,u,16,t),A.lineEnd=y,y()}return A}}(e,t):function(e){return WC({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}(e)}var iR=WC({point:function(e,t){this.stream.point(e*Aw,t*Aw)}});function aR(e,t,n,r,i,a){if(!a)return function(e,t,n,r,i){function a(a,o){return[t+e*(a*=r),n-e*(o*=i)]}return a.invert=function(a,o){return[(a-t)/e*r,(n-o)/e*i]},a}(e,t,n,r,i);var o=yw(a),s=_w(a),u=o*e,l=s*e,c=o/e,h=s/e,d=(s*n-o*t)/e,f=(s*t+o*n)/e;function p(e,a){return[u*(e*=r)-l*(a*=i)+t,n-l*e-u*a]}return p.invert=function(e,t){return[r*(c*e-h*t+d),i*(f-h*e-c*t)]},p}function oR(e){return function(e){var t,n,r,i,a,o,s,u,l,c,h=150,d=480,f=250,p=0,A=0,v=0,m=0,g=0,y=0,b=1,x=1,_=null,w=FC,S=null,M=jC,k=.5;function T(e){return u(e[0]*Aw,e[1]*Aw)}function E(e){return(e=u.invert(e[0],e[1]))&&[e[0]*pw,e[1]*pw]}function C(){var e=aR(h,0,0,b,x,y).apply(null,t(p,A)),r=aR(h,d-e[0],f-e[1],b,x,y);return n=kC(v,m,g),s=SC(t,r),u=SC(n,s),o=rR(s,k),R()}function R(){return l=c=null,T}return T.stream=function(e){return l&&c===e?l:l=iR(function(e){return WC({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}(n)(w(o(M(c=e)))))},T.preclip=function(e){return arguments.length?(w=e,_=void 0,R()):w},T.postclip=function(e){return arguments.length?(M=e,S=r=i=a=null,R()):M},T.clipAngle=function(e){return arguments.length?(w=+e?GC(_=e*Aw):(_=null,FC),R()):_*pw},T.clipExtent=function(e){return arguments.length?(M=null==e?(S=r=i=a=null,jC):VC(S=+e[0][0],r=+e[0][1],i=+e[1][0],a=+e[1][1]),R()):null==S?null:[[S,r],[i,a]]},T.scale=function(e){return arguments.length?(h=+e,C()):h},T.translate=function(e){return arguments.length?(d=+e[0],f=+e[1],C()):[d,f]},T.center=function(e){return arguments.length?(p=e[0]%360*Aw,A=e[1]%360*Aw,C()):[p*pw,A*pw]},T.rotate=function(e){return arguments.length?(v=e[0]%360*Aw,m=e[1]%360*Aw,g=e.length>2?e[2]%360*Aw:0,C()):[v*pw,m*pw,g*pw]},T.angle=function(e){return arguments.length?(y=e%360*Aw,C()):y*pw},T.reflectX=function(e){return arguments.length?(b=e?-1:1,C()):b<0},T.reflectY=function(e){return arguments.length?(x=e?-1:1,C()):x<0},T.precision=function(e){return arguments.length?(o=rR(s,k=e*e),R()):Sw(k)},T.fitExtent=function(e,t){return tR(T,e,t)},T.fitSize=function(e,t){return function(e,t,n){return tR(e,[[0,0],t],n)}(T,e,t)},T.fitWidth=function(e,t){return function(e,t,n){return eR(e,(function(n){var r=+t,i=r/(n[1][0]-n[0][0]),a=(r-i*(n[1][0]+n[0][0]))/2,o=-i*n[0][1];e.scale(150*i).translate([a,o])}),n)}(T,e,t)},T.fitHeight=function(e,t){return function(e,t,n){return eR(e,(function(n){var r=+t,i=r/(n[1][1]-n[0][1]),a=-i*n[0][0],o=(r-i*(n[1][1]+n[0][1]))/2;e.scale(150*i).translate([a,o])}),n)}(T,e,t)},function(){return t=e.apply(this,arguments),T.invert=t.invert&&E,C()}}((function(){return e}))()}function sR(e,t){var n=yw(t),r=1+yw(e)*n;return[n*_w(e)/r,_w(t)/r]}function uR(){return oR(sR).scale(250).clipAngle(142)}sR.invert=function(e){return function(t,n){var r=Sw(t*t+n*n),i=e(r),a=_w(i),o=yw(i);return[gw(t*a,r*o),Mw(r&&n*a/r)]}}((function(e){return 2*mw(e)}));var lR=Math.PI,cR=lR/2,hR=180/lR,dR=lR/180,fR=(Math.abs,Math.atan,Math.atan2),pR=Math.cos,AR=(Math.ceil,Math.exp,Math.floor,Math.log,Math.max),vR=Math.min,mR=(Math.pow,Math.sin),gR=Math.sign||function(e){return e>0?1:e<0?-1:0},yR=Math.sqrt;Math.tan;function bR(e){return e>1?cR:e<-1?-cR:Math.asin(e)}function xR(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function _R(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function wR(e,t){return[e[0]+t[0],e[1]+t[1],e[2]+t[2]]}function SR(e){var t=yR(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);return[e[0]/t,e[1]/t,e[2]/t]}function MR(e){return[fR(e[1],e[0])*hR,bR(AR(-1,vR(1,e[2])))*hR]}function kR(e){var t=e[0]*dR,n=e[1]*dR,r=pR(n);return[r*pR(t),r*mR(t),mR(n)]}function TR(e){return xR((e=e.map((function(e){return kR(e)})))[0],_R(e[2],e[1]))}function ER(e){var t=function(e){if(e.length<2)return{};var t=0;for(;isNaN(e[t][0]+e[t][1])&&t++<e.length;);var n=function(e){function t(t){return(t=e(t[0]*Aw,t[1]*Aw))[0]*=pw,t[1]*=pw,t}return e=kC(e[0]*Aw,e[1]*Aw,e.length>2?e[2]*Aw:0),t.invert=function(t){return(t=e.invert(t[0]*Aw,t[1]*Aw))[0]*=pw,t[1]*=pw,t},t}(e[t]),r=uR().translate([0,0]).scale(1).rotate(n.invert([180,0]));e=e.map(r);for(var i=[],a=1,o=0,s=e.length;o<s;o++){var u=Math.pow(e[o][0],2)+Math.pow(e[o][1],2);!isFinite(u)||u>1e32?i.push(o):u>a&&(a=u)}var l=1e6*yR(a);i.forEach((function(t){return e[t]=[l,0]})),e.push([0,l]),e.push([-l,0]),e.push([0,-l]);var c=xC.from(e);c.projection=r;for(var h=c.triangles,d=c.halfedges,f=c.inedges,p=[],A=0,v=d.length;A<v;A++)if(d[A]<0){var m=A%3==2?A-2:A+1,g=A%3==0?A+2:A-1,y=d[m],b=d[g];d[y]=b,d[b]=y,d[m]=d[g]=-1,h[A]=h[m]=h[g]=t,f[h[y]]=y%3==0?y+2:y-1,f[h[b]]=b%3==0?b+2:b-1,p.push(Math.min(A,m,g)),A+=2-A%3}else h[A]>e.length-3-1&&(h[A]=t);return c}(e),n=function(e){var t=e.triangles;if(!t)return[];for(var n=[],r=0,i=t.length/3;r<i;r++){var a=t[3*r],o=t[3*r+1],s=t[3*r+2];a!==o&&o!==s&&n.push([a,s,o])}return n}(t),r=function(e,t){var n=new Set;return 2===t.length?[[0,1]]:(e.forEach((function(e){if(e[0]!==e[1]&&!(TR(e.map((function(e){return t[e]})))<0))for(var r,i=0;i<3;i++)r=(i+1)%3,n.add(fT([e[i],e[r]]).join("-"))})),Array.from(n,(function(e){return e.split("-").map(Number)})))}(n,e),i=function(e,t){var n=[];e.forEach((function(e){for(var t=0;t<3;t++){var r=e[t],i=e[(t+1)%3];n[r]=n[r]||[],n[r].push(i)}})),0===e.length&&(2===t?(n[0]=[1],n[1]=[0]):1===t&&(n[0]=[]));return n}(n,e.length),a=function(e,t){function n(e,t){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2];return n*n+r*r+i*i}return function(r,i,a){void 0===a&&(a=0);var o,s,u=a,l=kR([r,i]);do{o=a,a=null,s=n(l,kR(t[o])),e[o].forEach((function(e){var r=n(l,kR(t[e]));if(r<s)return s=r,a=e,void(u=e)}))}while(null!==a);return u}}(i,e),o=function(e,t){return e.map((function(e){var n=e.map((function(e){return t[e]})).map(kR);return MR(SR(wR(wR(_R(n[1],n[0]),_R(n[2],n[1])),_R(n[0],n[2]))))}))}(n,e),s=function(e,t,n){var r=[],i=e.slice();if(0===t.length){if(n.length<2)return{polygons:r,centers:i};if(2===n.length){var a=kR(n[0]),o=kR(n[1]),s=SR(wR(a,o)),u=SR(_R(a,o)),l=_R(s,u),c=[s,_R(s,l),_R(_R(s,l),l),_R(_R(_R(s,l),l),l)].map(MR).map(d);return r.push(c),r.push(c.slice().reverse()),{polygons:r,centers:i}}}t.forEach((function(e,t){for(var n=0;n<3;n++){var i=e[n],a=e[(n+1)%3],o=e[(n+2)%3];r[i]=r[i]||[],r[i].push([a,o,t,[i,a,o]])}}));var h=r.map((function(e){for(var t=[e[0][2]],r=e[0][1],a=1;a<e.length;a++)for(var o=0;o<e.length;o++)if(e[o][0]==r){r=e[o][1],t.push(e[o][2]);break}if(t.length>2)return t;if(2==t.length){var s=CR(n[e[0][3][0]],n[e[0][3][1]],i[t[0]]),u=CR(n[e[0][3][2]],n[e[0][3][0]],i[t[0]]),l=d(s),c=d(u);return[t[0],c,t[1],l]}}));function d(e){var n=-1;return i.slice(t.length,1/0).forEach((function(r,i){r[0]===e[0]&&r[1]===e[1]&&(n=i+t.length)})),n<0&&(n=i.length,i.push(e)),n}return{polygons:h,centers:i}}(o,n,e),u=s.polygons,l=s.centers,c=function(e){var t=[];return e.forEach((function(e){if(e){var n,r=e[e.length-1],i=ee(e);try{for(i.s();!(n=i.n()).done;){var a=n.value;a>r&&t.push([r,a]),r=a}}catch(o){i.e(o)}finally{i.f()}}})),t}(u),h=function(e,t){var n=new Set,r=[];e.map((function(e){if(!(TR(e.map((function(e){return t[e>t.length?0:e]})))>1e-12))for(var r=0;r<3;r++){var i=[e[r],e[(r+1)%3]],a="".concat(i[0],"-").concat(i[1]);n.has(a)?n.delete(a):n.add("".concat(i[1],"-").concat(i[0]))}}));var i,a=new Map;if(n.forEach((function(e){e=e.split("-").map(Number),a.set(e[0],e[1]),i=e[0]})),void 0===i)return r;var o=i;do{r.push(o);var s=a.get(o);a.set(o,-1),o=s}while(o>-1&&o!==i);return r}(n,e),d=function(e,t){return function(n){var r=new Map,i=new Map;return e.forEach((function(e,t){var a=e.join("-");r.set(a,n[t]),i.set(a,!0)})),t.forEach((function(e){for(var t=0,n=-1,a=0;a<3;a++){var o=fT([e[a],e[(a+1)%3]]).join("-");r.get(o)>t&&(t=r.get(o),n=o)}i.set(n,!1)})),e.map((function(e){return i.get(e.join("-"))}))}}(r,n);return{delaunay:t,edges:r,triangles:n,centers:l,neighbors:i,polygons:u,mesh:c,hull:h,urquhart:d,find:a}}function CR(e,t,n){e=kR(e),t=kR(t),n=kR(n);var r=gR(xR(_R(t,e),n));return MR(SR(wR(e,t)).map((function(e){return r*e})))}function RR(e){var t=function e(t){if(e.delaunay=null,"object"===typeof(e._data=t)&&"FeatureCollection"===e._data.type&&(e._data=e._data.features),"object"===typeof e._data){var n=e._data.map((function(t){return[e._vx(t),e._vy(t),t]})).filter((function(e){return isFinite(e[0]+e[1])}));e.points=n.map((function(e){return[e[0],e[1]]})),e.valid=n.map((function(e){return e[2]})),e.delaunay=ER(e.points)}return e};return t._vx=function(e){return"object"==typeof e&&"type"in e?cC(e)[0]:0 in e?e[0]:void 0},t._vy=function(e){return"object"==typeof e&&"type"in e?cC(e)[1]:1 in e?e[1]:void 0},t.x=function(e){return e?(t._vx=e,t):t._vx},t.y=function(e){return e?(t._vy=e,t):t._vy},t.polygons=function(e){if(void 0!==e&&t(e),!t.delaunay)return!1;var n={type:"FeatureCollection",features:[]};return 0===t.valid.length||(t.delaunay.polygons.forEach((function(e,r){return n.features.push({type:"Feature",geometry:e?{type:"Polygon",coordinates:[[].concat(q(e),[e[0]]).map((function(e){return t.delaunay.centers[e]}))]}:null,properties:{site:t.valid[r],sitecoordinates:t.points[r],neighbours:t.delaunay.neighbors[r]}})})),1===t.valid.length&&n.features.push({type:"Feature",geometry:{type:"Sphere"},properties:{site:t.valid[0],sitecoordinates:t.points[0],neighbours:[]}})),n},t.triangles=function(e){return void 0!==e&&t(e),!!t.delaunay&&{type:"FeatureCollection",features:t.delaunay.triangles.map((function(e,n){return e=e.map((function(e){return t.points[e]})),e.center=t.delaunay.centers[n],e})).filter((function(e){return TR(e)>0})).map((function(e){return{type:"Feature",properties:{circumcenter:e.center},geometry:{type:"Polygon",coordinates:[[].concat(q(e),[e[0]])]}}}))}},t.links=function(e){if(void 0!==e&&t(e),!t.delaunay)return!1;var n=t.delaunay.edges.map((function(e){return Vw(t.points[e[0]],t.points[e[1]])})),r=t.delaunay.urquhart(n);return{type:"FeatureCollection",features:t.delaunay.edges.map((function(e,i){return{type:"Feature",properties:{source:t.valid[e[0]],target:t.valid[e[1]],length:n[i],urquhart:!!r[i]},geometry:{type:"LineString",coordinates:[t.points[e[0]],t.points[e[1]]]}}}))}},t.mesh=function(e){return void 0!==e&&t(e),!!t.delaunay&&{type:"MultiLineString",coordinates:t.delaunay.edges.map((function(e){return[t.points[e[0]],t.points[e[1]]]}))}},t.cellMesh=function(e){if(void 0!==e&&t(e),!t.delaunay)return!1;var n,r=t.delaunay,i=r.centers,a=[],o=ee(r.polygons);try{for(o.s();!(n=o.n()).done;){var s=n.value;if(s)for(var u=s.length,l=s[u-1],c=s[0],h=0;h<u;l=c,c=s[++h])c>l&&a.push([i[l],i[c]])}}catch(d){o.e(d)}finally{o.f()}return{type:"MultiLineString",coordinates:a}},t._found=void 0,t.find=function(e,n,r){if(t._found=t.delaunay.find(e,n,t._found),!r||Vw([e,n],t.points[t._found])<r)return t._found},t.hull=function(e){void 0!==e&&t(e);var n=t.delaunay.hull,r=t.points;return 0===n.length?null:{type:"Polygon",coordinates:[[].concat(q(n.map((function(e){return r[e]}))),[r[n[0]]])]}},e?t(e):t}function BR(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function PR(e,t,n){return t=NR(t),function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,IR()?Reflect.construct(t,[],NR(e).constructor):t.apply(e,n))}function NR(e){return NR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},NR(e)}function IR(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(IR=function(){return!!e})()}function DR(e,t){return DR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},DR(e,t)}function LR(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,s=[],u=!0,l=!1;try{if(a=(n=n.call(e)).next,0===t);else for(;!(u=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(e){l=!0,i=e}finally{try{if(!u&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(l)throw i}}return s}}(e,t)||FR(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function OR(e){return function(e){if(Array.isArray(e))return BR(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||FR(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function FR(e,t){if(e){if("string"==typeof e)return BR(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?BR(e,t):void 0}}function UR(e,t){return e.map((function(e){var n,r=[];return e.forEach((function(e){if(n){var i=180*Vw(e,n)/Math.PI;if(i>t)for(var a=jw(n,e),o=1/Math.ceil(i/t),s=o;s<1;)r.push(a(s)),s+=o}r.push(n=e)})),r}))}function zR(e,t){var n={type:"Polygon",coordinates:e},r=LR(ME(n),2),i=LR(r[0],2),a=i[0],o=i[1],s=LR(r[1],2),u=s[0],l=s[1];if(Math.min(Math.abs(u-a),Math.abs(l-o))<t)return[];var c=a>u||l>=89||o<=-89;return function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.minLng,r=t.maxLng,i=t.minLat,a=t.maxLat,o=Math.round(Math.pow(360/e,2)/Math.PI),s=(1+Math.sqrt(5))/2,u=function(e){return e/s*360%360-180},l=function(e){return Math.acos(2*e/o-1)/Math.PI*180-90},c=function(e){return o*(Math.cos((e+90)*Math.PI/180)+1)/2},h=[void 0!==a?Math.ceil(c(a)):0,void 0!==i?Math.floor(c(i)):o-1],d=void 0===n&&void 0===r?function(){return!0}:void 0===n?function(e){return e<=r}:void 0===r?function(e){return e>=n}:r>=n?function(e){return e>=n&&e<=r}:function(e){return e>=n||e<=r},f=[],p=h[0];p<=h[1];p++){var A=u(p);d(A)&&f.push([A,l(p)])}return f}(t,{minLng:a,maxLng:u,minLat:o,maxLat:l}).filter((function(e){return GR(e,n,c)}))}function GR(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return n?ZE(t,e):$T(e,t)}var qR=window.THREE?window.THREE:{BufferGeometry:Fo,Float32BufferAttribute:Ro},HR=(new qR.BufferGeometry).setAttribute?"setAttribute":"addAttribute",VR=function(e){function t(e,n,r,i,a,o,s){var u;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(u=PR(this,t)).type="ConicPolygonGeometry",u.parameters={polygonGeoJson:e,startHeight:n,endHeight:r,closedBottom:i,closedTop:a,includeSides:o,curvatureResolution:s},n=n||0,r=r||1,i=void 0===i||i,a=void 0===a||a,o=void 0===o||o;var l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.resolution,r=void 0===n?1/0:n,i=UR(e,r),a=hT(i),o=zR(e,r),s=[].concat(OR(a),OR(o)),u={type:"Polygon",coordinates:e},l=LR(ME(u),2),c=LR(l[0],2),h=c[0],d=c[1],f=LR(l[1],2),p=f[0],A=f[1],v=h>p||A>=89||d<=-89,m=[];if(v){var g=RR(s).triangles(),y=new Map(s.map((function(e,t){var n=LR(e,2),r=n[0],i=n[1];return["".concat(r,"-").concat(i),t]})));g.features.forEach((function(e){var t,n=e.geometry.coordinates[0].slice(0,3).reverse(),r=[];if(n.forEach((function(e){var t=LR(e,2),n=t[0],i=t[1],a="".concat(n,"-").concat(i);y.has(a)&&r.push(y.get(a))})),3===r.length){if(r.some((function(e){return e<a.length}))&&!GR(e.properties.circumcenter,u,v))return;(t=m).push.apply(t,r)}}))}else if(o.length)for(var b=MT.from(s),x=function(e){var t,n=[2,1,0].map((function(t){return b.triangles[e+t]})),r=n.map((function(e){return s[e]}));if(n.some((function(e){return e<a.length}))&&!GR([0,1].map((function(e){return dT(r,(function(t){return t[e]}))})),u,v))return 1;(t=m).push.apply(t,OR(n))},_=0,w=b.triangles.length;_<w;_+=3)x(_);else{var S=ow(i),M=S.vertices,k=S.holes;m=P_(M,void 0===k?[]:k,2)}var T=sT(fT(s,(function(e){return e[0]})),[0,1]),E=sT(fT(s,(function(e){return e[1]})),[0,1]),C=s.map((function(e){var t=LR(e,2),n=t[0],r=t[1];return[T(n),E(r)]})),R={points:s,indices:m,uvs:C};return{contour:i,triangles:R}}(e,{resolution:s=s||5}),c=l.contour,h=l.triangles,d=hT(h.uvs),f=[],p=[],A=[],v=0,m=function(e){var t=Math.round(f.length/3),n=A.length;f=f.concat(e.vertices),p=p.concat(e.uvs),A=A.concat(t?e.indices.map((function(e){return e+t})):e.indices),u.addGroup(n,A.length-n,v++)};function g(e,t){var n=e.map((function(e){return e.map((function(e){var n=LR(e,2),r=n[0];return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=(90-e)*Math.PI/180,i=(90-t)*Math.PI/180;return[n*Math.sin(r)*Math.cos(i),n*Math.cos(r),n*Math.sin(r)*Math.sin(i)]}(n[1],r,t)}))}));return ow(n)}function y(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return{indices:t?h.indices:h.indices.slice().reverse(),vertices:g([h.points],e).vertices,uvs:d}}return o&&m(function(){for(var e=g(c,n),t=e.vertices,i=e.holes,a=g(c,r).vertices,o=hT([a,t]),s=Math.round(a.length/3),u=new Set(i),l=0,h=[],d=0;d<s;d++){var f=d+1;if(f===s)f=l;else if(u.has(f)){var p=f;f=l,l=p}h.push(d,d+s,f+s),h.push(f+s,f,d)}for(var A=[],v=1;v>=0;v--)for(var m=0;m<s;m+=1)A.push(m/(s-1),v);return{indices:h,vertices:o,uvs:A}}()),i&&m(y(n,!1)),a&&m(y(r,!0)),u.setIndex(A),u[HR]("position",new qR.Float32BufferAttribute(f,3)),u[HR]("uv",new qR.Float32BufferAttribute(p,2)),u.computeVertexNormals(),u}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&DR(e,t)}(t,e),n=t,Object.defineProperty(n,"prototype",{writable:!1}),n;var n}(qR.BufferGeometry);function jR(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function WR(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.includes(n)||{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function XR(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,s=[],u=!0,l=!1;try{if(a=(n=n.call(e)).next,0===t);else for(;!(u=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(e){l=!0,i=e}finally{try{if(!u&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(l)throw i}}return s}}(e,t)||JR(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function YR(e){return function(e){if(Array.isArray(e))return jR(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||JR(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function QR(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}function JR(e,t){if(e){if("string"==typeof e)return jR(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?jR(e,t):void 0}}var KR=function(e){var t,n="undefined"!==typeof(e=e||{})?e:{},r={};for(t in n)n.hasOwnProperty(t)&&(r[t]=n[t]);var i,a=[],o="";"undefined"!==typeof document&&document.currentScript&&(o=document.currentScript.src),o=0!==o.indexOf("blob:")?o.substr(0,o.lastIndexOf("/")+1):"",i=function(e,t,n){var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="arraybuffer",r.onload=function(){if(200==r.status||0==r.status&&r.response)t(r.response);else{var i=Y(e);i?t(i.buffer):n()}},r.onerror=n,r.send(null)};var s=n.print||console.log.bind(console),u=n.printErr||console.warn.bind(console);for(t in r)r.hasOwnProperty(t)&&(n[t]=r[t]);r=null,n.arguments&&(a=n.arguments);var l=0;var c=!1;function h(e){var t,r=n["_"+e];return t="Cannot call unknown function "+e+", make sure it is exported",r||ue("Assertion failed: "+t),r}function d(e,t,n,r,i){var a={string:function(e){var t=0;if(null!==e&&void 0!==e&&0!==e){var n=1+(e.length<<2);(function(e,t,n){(function(e,t,n,r){if(!(r>0))return 0;for(var i=n,a=n+r-1,o=0;o<e.length;++o){var s=e.charCodeAt(o);if(s>=55296&&s<=57343)s=65536+((1023&s)<<10)|1023&e.charCodeAt(++o);if(s<=127){if(n>=a)break;t[n++]=s}else if(s<=2047){if(n+1>=a)break;t[n++]=192|s>>6,t[n++]=128|63&s}else if(s<=65535){if(n+2>=a)break;t[n++]=224|s>>12,t[n++]=128|s>>6&63,t[n++]=128|63&s}else{if(n+3>=a)break;t[n++]=240|s>>18,t[n++]=128|s>>12&63,t[n++]=128|s>>6&63,t[n++]=128|63&s}}t[n]=0})(e,m,t,n)})(e,t=ee(n),n)}return t},array:function(e){var t=ee(e.length);return function(e,t){v.set(e,t)}(e,t),t}};var o=h(e),s=[],u=0;if(r)for(var l=0;l<r.length;l++){var c=a[n[l]];c?(0===u&&(u=ne()),s[l]=c(r[l])):s[l]=r[l]}var d=o.apply(null,s);return d=function(e){return"string"===t?p(e):"boolean"===t?Boolean(e):e}(d),0!==u&&te(u),d}var f="undefined"!==typeof TextDecoder?new TextDecoder("utf8"):void 0;function p(e,t){return e?function(e,t,n){for(var r=t+n,i=t;e[i]&&!(i>=r);)++i;if(i-t>16&&e.subarray&&f)return f.decode(e.subarray(t,i));for(var a="";t<i;){var o=e[t++];if(128&o){var s=63&e[t++];if(192!=(224&o)){var u=63&e[t++];if((o=224==(240&o)?(15&o)<<12|s<<6|u:(7&o)<<18|s<<12|u<<6|63&e[t++])<65536)a+=String.fromCharCode(o);else{var l=o-65536;a+=String.fromCharCode(55296|l>>10,56320|1023&l)}}else a+=String.fromCharCode((31&o)<<6|s)}else a+=String.fromCharCode(o)}return a}(m,e,t):""}var A,v,m,g,y,b,x;"undefined"!==typeof TextDecoder&&new TextDecoder("utf-16le");function _(e,t){return e%t>0&&(e+=t-e%t),e}function w(e){A=e,n.HEAP8=v=new Int8Array(e),n.HEAP16=g=new Int16Array(e),n.HEAP32=y=new Int32Array(e),n.HEAPU8=m=new Uint8Array(e),n.HEAPU16=new Uint16Array(e),n.HEAPU32=new Uint32Array(e),n.HEAPF32=b=new Float32Array(e),n.HEAPF64=x=new Float64Array(e)}var S=n.TOTAL_MEMORY||33554432;function M(e){for(;e.length>0;){var t=e.shift();if("function"!=typeof t){var r=t.func;"number"===typeof r?void 0===t.arg?n.dynCall_v(r):n.dynCall_vi(r,t.arg):r(void 0===t.arg?null:t.arg)}else t()}}S=(A=n.buffer?n.buffer:new ArrayBuffer(S)).byteLength,w(A),y[6032]=5267040;var k=[],T=[],E=[],C=[];var R=Math.abs,B=Math.ceil,P=Math.floor,N=Math.min,I=0,D=null,L=null;n.preloadedImages={},n.preloadedAudios={};var O,F,U=null,z="data:application/octet-stream;base64,";function G(e){return String.prototype.startsWith?e.startsWith(z):0===e.indexOf(z)}U="data:application/octet-stream;base64,AAAAAAAAAAAAAAAAAQAAAAIAAAADAAAABAAAAAUAAAAGAAAAAQAAAAQAAAADAAAABgAAAAUAAAACAAAAAAAAAAIAAAADAAAAAQAAAAQAAAAGAAAAAAAAAAUAAAADAAAABgAAAAQAAAAFAAAAAAAAAAEAAAACAAAABAAAAAUAAAAGAAAAAAAAAAIAAAADAAAAAQAAAAUAAAACAAAAAAAAAAEAAAADAAAABgAAAAQAAAAGAAAAAAAAAAUAAAACAAAAAQAAAAQAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAEAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAIAAAADAAAAAAAAAAAAAAACAAAAAAAAAAEAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAABAAAAAYAAAAAAAAABQAAAAAAAAAAAAAABAAAAAUAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAYAAAAAAAAABgAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAgAAAAMAAAAEAAAABQAAAAYAAAABAAAAAgAAAAMAAAAEAAAABQAAAAYAAAAAAAAAAgAAAAMAAAAEAAAABQAAAAYAAAAAAAAAAQAAAAMAAAAEAAAABQAAAAYAAAAAAAAAAQAAAAIAAAAEAAAABQAAAAYAAAAAAAAAAQAAAAIAAAADAAAABQAAAAYAAAAAAAAAAQAAAAIAAAADAAAABAAAAAYAAAAAAAAAAQAAAAIAAAADAAAABAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAgAAAAIAAAAAAAAAAAAAAAYAAAAAAAAAAwAAAAIAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAFAAAABAAAAAAAAAABAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAYAAAAAAAAABAAAAAAAAAAGAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAgAAAAQAAAADAAAACAAAAAEAAAAHAAAABgAAAAkAAAAAAAAAAwAAAAIAAAACAAAABgAAAAoAAAALAAAAAAAAAAEAAAAFAAAAAwAAAA0AAAABAAAABwAAAAQAAAAMAAAAAAAAAAQAAAB/AAAADwAAAAgAAAADAAAAAAAAAAwAAAAFAAAAAgAAABIAAAAKAAAACAAAAAAAAAAQAAAABgAAAA4AAAALAAAAEQAAAAEAAAAJAAAAAgAAAAcAAAAVAAAACQAAABMAAAADAAAADQAAAAEAAAAIAAAABQAAABYAAAAQAAAABAAAAAAAAAAPAAAACQAAABMAAAAOAAAAFAAAAAEAAAAHAAAABgAAAAoAAAALAAAAGAAAABcAAAAFAAAAAgAAABIAAAALAAAAEQAAABcAAAAZAAAAAgAAAAYAAAAKAAAADAAAABwAAAANAAAAGgAAAAQAAAAPAAAAAwAAAA0AAAAaAAAAFQAAAB0AAAADAAAADAAAAAcAAAAOAAAAfwAAABEAAAAbAAAACQAAABQAAAAGAAAADwAAABYAAAAcAAAAHwAAAAQAAAAIAAAADAAAABAAAAASAAAAIQAAAB4AAAAIAAAABQAAABYAAAARAAAACwAAAA4AAAAGAAAAIwAAABkAAAAbAAAAEgAAABgAAAAeAAAAIAAAAAUAAAAKAAAAEAAAABMAAAAiAAAAFAAAACQAAAAHAAAAFQAAAAkAAAAUAAAADgAAABMAAAAJAAAAKAAAABsAAAAkAAAAFQAAACYAAAATAAAAIgAAAA0AAAAdAAAABwAAABYAAAAQAAAAKQAAACEAAAAPAAAACAAAAB8AAAAXAAAAGAAAAAsAAAAKAAAAJwAAACUAAAAZAAAAGAAAAH8AAAAgAAAAJQAAAAoAAAAXAAAAEgAAABkAAAAXAAAAEQAAAAsAAAAtAAAAJwAAACMAAAAaAAAAKgAAAB0AAAArAAAADAAAABwAAAANAAAAGwAAACgAAAAjAAAALgAAAA4AAAAUAAAAEQAAABwAAAAfAAAAKgAAACwAAAAMAAAADwAAABoAAAAdAAAAKwAAACYAAAAvAAAADQAAABoAAAAVAAAAHgAAACAAAAAwAAAAMgAAABAAAAASAAAAIQAAAB8AAAApAAAALAAAADUAAAAPAAAAFgAAABwAAAAgAAAAHgAAABgAAAASAAAANAAAADIAAAAlAAAAIQAAAB4AAAAxAAAAMAAAABYAAAAQAAAAKQAAACIAAAATAAAAJgAAABUAAAA2AAAAJAAAADMAAAAjAAAALgAAAC0AAAA4AAAAEQAAABsAAAAZAAAAJAAAABQAAAAiAAAAEwAAADcAAAAoAAAANgAAACUAAAAnAAAANAAAADkAAAAYAAAAFwAAACAAAAAmAAAAfwAAACIAAAAzAAAAHQAAAC8AAAAVAAAAJwAAACUAAAAZAAAAFwAAADsAAAA5AAAALQAAACgAAAAbAAAAJAAAABQAAAA8AAAALgAAADcAAAApAAAAMQAAADUAAAA9AAAAFgAAACEAAAAfAAAAKgAAADoAAAArAAAAPgAAABwAAAAsAAAAGgAAACsAAAA+AAAALwAAAEAAAAAaAAAAKgAAAB0AAAAsAAAANQAAADoAAABBAAAAHAAAAB8AAAAqAAAALQAAACcAAAAjAAAAGQAAAD8AAAA7AAAAOAAAAC4AAAA8AAAAOAAAAEQAAAAbAAAAKAAAACMAAAAvAAAAJgAAACsAAAAdAAAARQAAADMAAABAAAAAMAAAADEAAAAeAAAAIQAAAEMAAABCAAAAMgAAADEAAAB/AAAAPQAAAEIAAAAhAAAAMAAAACkAAAAyAAAAMAAAACAAAAAeAAAARgAAAEMAAAA0AAAAMwAAAEUAAAA2AAAARwAAACYAAAAvAAAAIgAAADQAAAA5AAAARgAAAEoAAAAgAAAAJQAAADIAAAA1AAAAPQAAAEEAAABLAAAAHwAAACkAAAAsAAAANgAAAEcAAAA3AAAASQAAACIAAAAzAAAAJAAAADcAAAAoAAAANgAAACQAAABIAAAAPAAAAEkAAAA4AAAARAAAAD8AAABNAAAAIwAAAC4AAAAtAAAAOQAAADsAAABKAAAATgAAACUAAAAnAAAANAAAADoAAAB/AAAAPgAAAEwAAAAsAAAAQQAAACoAAAA7AAAAPwAAAE4AAABPAAAAJwAAAC0AAAA5AAAAPAAAAEgAAABEAAAAUAAAACgAAAA3AAAALgAAAD0AAAA1AAAAMQAAACkAAABRAAAASwAAAEIAAAA+AAAAKwAAADoAAAAqAAAAUgAAAEAAAABMAAAAPwAAAH8AAAA4AAAALQAAAE8AAAA7AAAATQAAAEAAAAAvAAAAPgAAACsAAABUAAAARQAAAFIAAABBAAAAOgAAADUAAAAsAAAAVgAAAEwAAABLAAAAQgAAAEMAAABRAAAAVQAAADEAAAAwAAAAPQAAAEMAAABCAAAAMgAAADAAAABXAAAAVQAAAEYAAABEAAAAOAAAADwAAAAuAAAAWgAAAE0AAABQAAAARQAAADMAAABAAAAALwAAAFkAAABHAAAAVAAAAEYAAABDAAAANAAAADIAAABTAAAAVwAAAEoAAABHAAAAWQAAAEkAAABbAAAAMwAAAEUAAAA2AAAASAAAAH8AAABJAAAANwAAAFAAAAA8AAAAWAAAAEkAAABbAAAASAAAAFgAAAA2AAAARwAAADcAAABKAAAATgAAAFMAAABcAAAANAAAADkAAABGAAAASwAAAEEAAAA9AAAANQAAAF4AAABWAAAAUQAAAEwAAABWAAAAUgAAAGAAAAA6AAAAQQAAAD4AAABNAAAAPwAAAEQAAAA4AAAAXQAAAE8AAABaAAAATgAAAEoAAAA7AAAAOQAAAF8AAABcAAAATwAAAE8AAABOAAAAPwAAADsAAABdAAAAXwAAAE0AAABQAAAARAAAAEgAAAA8AAAAYwAAAFoAAABYAAAAUQAAAFUAAABeAAAAZQAAAD0AAABCAAAASwAAAFIAAABgAAAAVAAAAGIAAAA+AAAATAAAAEAAAABTAAAAfwAAAEoAAABGAAAAZAAAAFcAAABcAAAAVAAAAEUAAABSAAAAQAAAAGEAAABZAAAAYgAAAFUAAABXAAAAZQAAAGYAAABCAAAAQwAAAFEAAABWAAAATAAAAEsAAABBAAAAaAAAAGAAAABeAAAAVwAAAFMAAABmAAAAZAAAAEMAAABGAAAAVQAAAFgAAABIAAAAWwAAAEkAAABjAAAAUAAAAGkAAABZAAAAYQAAAFsAAABnAAAARQAAAFQAAABHAAAAWgAAAE0AAABQAAAARAAAAGoAAABdAAAAYwAAAFsAAABJAAAAWQAAAEcAAABpAAAAWAAAAGcAAABcAAAAUwAAAE4AAABKAAAAbAAAAGQAAABfAAAAXQAAAE8AAABaAAAATQAAAG0AAABfAAAAagAAAF4AAABWAAAAUQAAAEsAAABrAAAAaAAAAGUAAABfAAAAXAAAAE8AAABOAAAAbQAAAGwAAABdAAAAYAAAAGgAAABiAAAAbgAAAEwAAABWAAAAUgAAAGEAAAB/AAAAYgAAAFQAAABnAAAAWQAAAG8AAABiAAAAbgAAAGEAAABvAAAAUgAAAGAAAABUAAAAYwAAAFAAAABpAAAAWAAAAGoAAABaAAAAcQAAAGQAAABmAAAAUwAAAFcAAABsAAAAcgAAAFwAAABlAAAAZgAAAGsAAABwAAAAUQAAAFUAAABeAAAAZgAAAGUAAABXAAAAVQAAAHIAAABwAAAAZAAAAGcAAABbAAAAYQAAAFkAAAB0AAAAaQAAAG8AAABoAAAAawAAAG4AAABzAAAAVgAAAF4AAABgAAAAaQAAAFgAAABnAAAAWwAAAHEAAABjAAAAdAAAAGoAAABdAAAAYwAAAFoAAAB1AAAAbQAAAHEAAABrAAAAfwAAAGUAAABeAAAAcwAAAGgAAABwAAAAbAAAAGQAAABfAAAAXAAAAHYAAAByAAAAbQAAAG0AAABsAAAAXQAAAF8AAAB1AAAAdgAAAGoAAABuAAAAYgAAAGgAAABgAAAAdwAAAG8AAABzAAAAbwAAAGEAAABuAAAAYgAAAHQAAABnAAAAdwAAAHAAAABrAAAAZgAAAGUAAAB4AAAAcwAAAHIAAABxAAAAYwAAAHQAAABpAAAAdQAAAGoAAAB5AAAAcgAAAHAAAABkAAAAZgAAAHYAAAB4AAAAbAAAAHMAAABuAAAAawAAAGgAAAB4AAAAdwAAAHAAAAB0AAAAZwAAAHcAAABvAAAAcQAAAGkAAAB5AAAAdQAAAH8AAABtAAAAdgAAAHEAAAB5AAAAagAAAHYAAAB4AAAAbAAAAHIAAAB1AAAAeQAAAG0AAAB3AAAAbwAAAHMAAABuAAAAeQAAAHQAAAB4AAAAeAAAAHMAAAByAAAAcAAAAHkAAAB3AAAAdgAAAHkAAAB0AAAAeAAAAHcAAAB1AAAAcQAAAHYAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAABAAAABQAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAACAAAABQAAAAEAAAAAAAAA/////wEAAAAAAAAAAwAAAAQAAAACAAAAAAAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAMAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAFAAAAAQAAAAAAAAAAAAAAAQAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAADAAAAAAAAAAAAAAABAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAADAAAABQAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAEAAAABQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAFAAAABQAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAAAAAABAAAAAwAAAAAAAAAAAAAAAQAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAQAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAADAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAFAAAABQAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAwAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAwAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAFAAAAAAAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAADAAAAAQAAAAAAAAABAAAAAAAAAAAAAAABAAAAAwAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAADAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAADAAAAAwAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAFAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAFAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAEAAAADAAAAAQAAAAAAAAABAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAADAAAAAQAAAAAAAAABAAAAAAAAAAMAAAADAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAUAAAABAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAABAAAAAUAAAABAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAIAAAAFAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAADAAAAAQAAAAAAAAABAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAFAAAAAAAAAAAAAAD/////AQAAAAAAAAADAAAABAAAAAIAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAUAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAFAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAUAAAABAAAAAAAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAAAAAAAAAAAAAEAAAD//////////wEAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAADAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAACAAAAAAAAAAAAAAABAAAAAgAAAAYAAAAEAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAYAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAcAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAYAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAKAAAAAgAAAAAAAAAAAAAAAQAAAAEAAAAFAAAABgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAALAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAABwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACgAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAACAAAAAAAAAAAAAAABAAAAAwAAAAcAAAAGAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAABwAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAGAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAADgAAAAIAAAAAAAAAAAAAAAEAAAAAAAAACQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACgAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAMAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAABwAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAKAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADQAAAAIAAAAAAAAAAAAAAAEAAAAEAAAACAAAAAoAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAALAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAACQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAGAAAAAgAAAAAAAAAAAAAAAQAAAAsAAAAPAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAOAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAIAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAABQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAgAAAAAAAAAAAAAAAQAAAAwAAAAQAAAADAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAoAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAJAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAPAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAADwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAADQAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAACAAAAAAAAAAAAAAABAAAACgAAABMAAAAIAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEQAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEQAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAA8AAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAQAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAACQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAANAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAIAAAAAAAAAAAAAAAEAAAANAAAAEQAAAA0AAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAARAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAATAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAAEQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAA0AAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAARAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkAAAACAAAAAAAAAAAAAAABAAAADgAAABIAAAAPAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAADwAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABIAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAASAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEwAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAATAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAABIAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAATAAAAAgAAAAAAAAAAAAAAAQAAAP//////////EwAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAATAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEgAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAASAAAAAAAAABgAAAAAAAAAIQAAAAAAAAAeAAAAAAAAACAAAAADAAAAMQAAAAEAAAAwAAAAAwAAADIAAAADAAAACAAAAAAAAAAFAAAABQAAAAoAAAAFAAAAFgAAAAAAAAAQAAAAAAAAABIAAAAAAAAAKQAAAAEAAAAhAAAAAAAAAB4AAAAAAAAABAAAAAAAAAAAAAAABQAAAAIAAAAFAAAADwAAAAEAAAAIAAAAAAAAAAUAAAAFAAAAHwAAAAEAAAAWAAAAAAAAABAAAAAAAAAAAgAAAAAAAAAGAAAAAAAAAA4AAAAAAAAACgAAAAAAAAALAAAAAAAAABEAAAADAAAAGAAAAAEAAAAXAAAAAwAAABkAAAADAAAAAAAAAAAAAAABAAAABQAAAAkAAAAFAAAABQAAAAAAAAACAAAAAAAAAAYAAAAAAAAAEgAAAAEAAAAKAAAAAAAAAAsAAAAAAAAABAAAAAEAAAADAAAABQAAAAcAAAAFAAAACAAAAAEAAAAAAAAAAAAAAAEAAAAFAAAAEAAAAAEAAAAFAAAAAAAAAAIAAAAAAAAABwAAAAAAAAAVAAAAAAAAACYAAAAAAAAACQAAAAAAAAATAAAAAAAAACIAAAADAAAADgAAAAEAAAAUAAAAAwAAACQAAAADAAAAAwAAAAAAAAANAAAABQAAAB0AAAAFAAAAAQAAAAAAAAAHAAAAAAAAABUAAAAAAAAABgAAAAEAAAAJAAAAAAAAABMAAAAAAAAABAAAAAIAAAAMAAAABQAAABoAAAAFAAAAAAAAAAEAAAADAAAAAAAAAA0AAAAFAAAAAgAAAAEAAAABAAAAAAAAAAcAAAAAAAAAGgAAAAAAAAAqAAAAAAAAADoAAAAAAAAAHQAAAAAAAAArAAAAAAAAAD4AAAADAAAAJgAAAAEAAAAvAAAAAwAAAEAAAAADAAAADAAAAAAAAAAcAAAABQAAACwAAAAFAAAADQAAAAAAAAAaAAAAAAAAACoAAAAAAAAAFQAAAAEAAAAdAAAAAAAAACsAAAAAAAAABAAAAAMAAAAPAAAABQAAAB8AAAAFAAAAAwAAAAEAAAAMAAAAAAAAABwAAAAFAAAABwAAAAEAAAANAAAAAAAAABoAAAAAAAAAHwAAAAAAAAApAAAAAAAAADEAAAAAAAAALAAAAAAAAAA1AAAAAAAAAD0AAAADAAAAOgAAAAEAAABBAAAAAwAAAEsAAAADAAAADwAAAAAAAAAWAAAABQAAACEAAAAFAAAAHAAAAAAAAAAfAAAAAAAAACkAAAAAAAAAKgAAAAEAAAAsAAAAAAAAADUAAAAAAAAABAAAAAQAAAAIAAAABQAAABAAAAAFAAAADAAAAAEAAAAPAAAAAAAAABYAAAAFAAAAGgAAAAEAAAAcAAAAAAAAAB8AAAAAAAAAMgAAAAAAAAAwAAAAAAAAADEAAAADAAAAIAAAAAAAAAAeAAAAAwAAACEAAAADAAAAGAAAAAMAAAASAAAAAwAAABAAAAADAAAARgAAAAAAAABDAAAAAAAAAEIAAAADAAAANAAAAAMAAAAyAAAAAAAAADAAAAAAAAAAJQAAAAMAAAAgAAAAAAAAAB4AAAADAAAAUwAAAAAAAABXAAAAAwAAAFUAAAADAAAASgAAAAMAAABGAAAAAAAAAEMAAAAAAAAAOQAAAAEAAAA0AAAAAwAAADIAAAAAAAAAGQAAAAAAAAAXAAAAAAAAABgAAAADAAAAEQAAAAAAAAALAAAAAwAAAAoAAAADAAAADgAAAAMAAAAGAAAAAwAAAAIAAAADAAAALQAAAAAAAAAnAAAAAAAAACUAAAADAAAAIwAAAAMAAAAZAAAAAAAAABcAAAAAAAAAGwAAAAMAAAARAAAAAAAAAAsAAAADAAAAPwAAAAAAAAA7AAAAAwAAADkAAAADAAAAOAAAAAMAAAAtAAAAAAAAACcAAAAAAAAALgAAAAMAAAAjAAAAAwAAABkAAAAAAAAAJAAAAAAAAAAUAAAAAAAAAA4AAAADAAAAIgAAAAAAAAATAAAAAwAAAAkAAAADAAAAJgAAAAMAAAAVAAAAAwAAAAcAAAADAAAANwAAAAAAAAAoAAAAAAAAABsAAAADAAAANgAAAAMAAAAkAAAAAAAAABQAAAAAAAAAMwAAAAMAAAAiAAAAAAAAABMAAAADAAAASAAAAAAAAAA8AAAAAwAAAC4AAAADAAAASQAAAAMAAAA3AAAAAAAAACgAAAAAAAAARwAAAAMAAAA2AAAAAwAAACQAAAAAAAAAQAAAAAAAAAAvAAAAAAAAACYAAAADAAAAPgAAAAAAAAArAAAAAwAAAB0AAAADAAAAOgAAAAMAAAAqAAAAAwAAABoAAAADAAAAVAAAAAAAAABFAAAAAAAAADMAAAADAAAAUgAAAAMAAABAAAAAAAAAAC8AAAAAAAAATAAAAAMAAAA+AAAAAAAAACsAAAADAAAAYQAAAAAAAABZAAAAAwAAAEcAAAADAAAAYgAAAAMAAABUAAAAAAAAAEUAAAAAAAAAYAAAAAMAAABSAAAAAwAAAEAAAAAAAAAASwAAAAAAAABBAAAAAAAAADoAAAADAAAAPQAAAAAAAAA1AAAAAwAAACwAAAADAAAAMQAAAAMAAAApAAAAAwAAAB8AAAADAAAAXgAAAAAAAABWAAAAAAAAAEwAAAADAAAAUQAAAAMAAABLAAAAAAAAAEEAAAAAAAAAQgAAAAMAAAA9AAAAAAAAADUAAAADAAAAawAAAAAAAABoAAAAAwAAAGAAAAADAAAAZQAAAAMAAABeAAAAAAAAAFYAAAAAAAAAVQAAAAMAAABRAAAAAwAAAEsAAAAAAAAAOQAAAAAAAAA7AAAAAAAAAD8AAAADAAAASgAAAAAAAABOAAAAAwAAAE8AAAADAAAAUwAAAAMAAABcAAAAAwAAAF8AAAADAAAAJQAAAAAAAAAnAAAAAwAAAC0AAAADAAAANAAAAAAAAAA5AAAAAAAAADsAAAAAAAAARgAAAAMAAABKAAAAAAAAAE4AAAADAAAAGAAAAAAAAAAXAAAAAwAAABkAAAADAAAAIAAAAAMAAAAlAAAAAAAAACcAAAADAAAAMgAAAAMAAAA0AAAAAAAAADkAAAAAAAAALgAAAAAAAAA8AAAAAAAAAEgAAAADAAAAOAAAAAAAAABEAAAAAwAAAFAAAAADAAAAPwAAAAMAAABNAAAAAwAAAFoAAAADAAAAGwAAAAAAAAAoAAAAAwAAADcAAAADAAAAIwAAAAAAAAAuAAAAAAAAADwAAAAAAAAALQAAAAMAAAA4AAAAAAAAAEQAAAADAAAADgAAAAAAAAAUAAAAAwAAACQAAAADAAAAEQAAAAMAAAAbAAAAAAAAACgAAAADAAAAGQAAAAMAAAAjAAAAAAAAAC4AAAAAAAAARwAAAAAAAABZAAAAAAAAAGEAAAADAAAASQAAAAAAAABbAAAAAwAAAGcAAAADAAAASAAAAAMAAABYAAAAAwAAAGkAAAADAAAAMwAAAAAAAABFAAAAAwAAAFQAAAADAAAANgAAAAAAAABHAAAAAAAAAFkAAAAAAAAANwAAAAMAAABJAAAAAAAAAFsAAAADAAAAJgAAAAAAAAAvAAAAAwAAAEAAAAADAAAAIgAAAAMAAAAzAAAAAAAAAEUAAAADAAAAJAAAAAMAAAA2AAAAAAAAAEcAAAAAAAAAYAAAAAAAAABoAAAAAAAAAGsAAAADAAAAYgAAAAAAAABuAAAAAwAAAHMAAAADAAAAYQAAAAMAAABvAAAAAwAAAHcAAAADAAAATAAAAAAAAABWAAAAAwAAAF4AAAADAAAAUgAAAAAAAABgAAAAAAAAAGgAAAAAAAAAVAAAAAMAAABiAAAAAAAAAG4AAAADAAAAOgAAAAAAAABBAAAAAwAAAEsAAAADAAAAPgAAAAMAAABMAAAAAAAAAFYAAAADAAAAQAAAAAMAAABSAAAAAAAAAGAAAAAAAAAAVQAAAAAAAABXAAAAAAAAAFMAAAADAAAAZQAAAAAAAABmAAAAAwAAAGQAAAADAAAAawAAAAMAAABwAAAAAwAAAHIAAAADAAAAQgAAAAAAAABDAAAAAwAAAEYAAAADAAAAUQAAAAAAAABVAAAAAAAAAFcAAAAAAAAAXgAAAAMAAABlAAAAAAAAAGYAAAADAAAAMQAAAAAAAAAwAAAAAwAAADIAAAADAAAAPQAAAAMAAABCAAAAAAAAAEMAAAADAAAASwAAAAMAAABRAAAAAAAAAFUAAAAAAAAAXwAAAAAAAABcAAAAAAAAAFMAAAAAAAAATwAAAAAAAABOAAAAAAAAAEoAAAADAAAAPwAAAAEAAAA7AAAAAwAAADkAAAADAAAAbQAAAAAAAABsAAAAAAAAAGQAAAAFAAAAXQAAAAEAAABfAAAAAAAAAFwAAAAAAAAATQAAAAEAAABPAAAAAAAAAE4AAAAAAAAAdQAAAAQAAAB2AAAABQAAAHIAAAAFAAAAagAAAAEAAABtAAAAAAAAAGwAAAAAAAAAWgAAAAEAAABdAAAAAQAAAF8AAAAAAAAAWgAAAAAAAABNAAAAAAAAAD8AAAAAAAAAUAAAAAAAAABEAAAAAAAAADgAAAADAAAASAAAAAEAAAA8AAAAAwAAAC4AAAADAAAAagAAAAAAAABdAAAAAAAAAE8AAAAFAAAAYwAAAAEAAABaAAAAAAAAAE0AAAAAAAAAWAAAAAEAAABQAAAAAAAAAEQAAAAAAAAAdQAAAAMAAABtAAAABQAAAF8AAAAFAAAAcQAAAAEAAABqAAAAAAAAAF0AAAAAAAAAaQAAAAEAAABjAAAAAQAAAFoAAAAAAAAAaQAAAAAAAABYAAAAAAAAAEgAAAAAAAAAZwAAAAAAAABbAAAAAAAAAEkAAAADAAAAYQAAAAEAAABZAAAAAwAAAEcAAAADAAAAcQAAAAAAAABjAAAAAAAAAFAAAAAFAAAAdAAAAAEAAABpAAAAAAAAAFgAAAAAAAAAbwAAAAEAAABnAAAAAAAAAFsAAAAAAAAAdQAAAAIAAABqAAAABQAAAFoAAAAFAAAAeQAAAAEAAABxAAAAAAAAAGMAAAAAAAAAdwAAAAEAAAB0AAAAAQAAAGkAAAAAAAAAdwAAAAAAAABvAAAAAAAAAGEAAAAAAAAAcwAAAAAAAABuAAAAAAAAAGIAAAADAAAAawAAAAEAAABoAAAAAwAAAGAAAAADAAAAeQAAAAAAAAB0AAAAAAAAAGcAAAAFAAAAeAAAAAEAAAB3AAAAAAAAAG8AAAAAAAAAcAAAAAEAAABzAAAAAAAAAG4AAAAAAAAAdQAAAAEAAABxAAAABQAAAGkAAAAFAAAAdgAAAAEAAAB5AAAAAAAAAHQAAAAAAAAAcgAAAAEAAAB4AAAAAQAAAHcAAAAAAAAAcgAAAAAAAABwAAAAAAAAAGsAAAAAAAAAZAAAAAAAAABmAAAAAAAAAGUAAAADAAAAUwAAAAEAAABXAAAAAwAAAFUAAAADAAAAdgAAAAAAAAB4AAAAAAAAAHMAAAAFAAAAbAAAAAEAAAByAAAAAAAAAHAAAAAAAAAAXAAAAAEAAABkAAAAAAAAAGYAAAAAAAAAdQAAAAAAAAB5AAAABQAAAHcAAAAFAAAAbQAAAAEAAAB2AAAAAAAAAHgAAAAAAAAAXwAAAAEAAABsAAAAAQAAAHIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAABAAAAAQAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAGAAAAAgAAAAUAAAABAAAABAAAAAAAAAAAAAAABQAAAAMAAAABAAAABgAAAAQAAAACAAAAAAAAAH6iBfbytuk/Gq6akm/58z/Xrm0Liez0P5doSdOpSwRAWs602ULg8D/dT7Rcbo/1v1N1RQHFNOM/g9Snx7HW3L8HWsP8Q3jfP6VwOLosutk/9rjk1YQcxj+gnmKMsNn6P/HDeuPFY+M/YHwDjqKhB0Ci19/fCVrbP4UxKkDWOP6/pvljWa09tL9wi7wrQXjnv/Z6yLImkM2/3yTlOzY14D+m+WNZrT20PzwKVQnrQwNA9nrIsiaQzT/g40rFrRQFwPa45NWEHMa/kbslHEZq97/xw3rjxWPjv4cLC2SMBci/otff3wla27+rKF5oIAv0P1N1RQHFNOO/iDJPGyWHBUAHWsP8Q3jfvwQf/by16gXAfqIF9vK26b8XrO0Vh0r+v9eubQuJ7PS/BxLrA0ZZ479azrTZQuDwv1MK1EuItPw/yscgV9Z6FkAwHBR2WjQMQJNRzXsQ5vY/GlUHVJYKF0DONuFv2lMNQNCGZ28QJfk/0WUwoIL36D8ggDOMQuATQNqMOeAy/wZAWFYOYM+M2z/LWC4uH3oSQDE+LyTsMgRAkJzhRGWFGEDd4soovCQQQKqk0DJMEP8/rGmNdwOLBUAW2X/9xCbjP4hu3dcqJhNAzuYItRvdB0CgzW3zJW/sPxotm/Y2TxRAQAk9XmdDDEC1Kx9MKgT3P1M+NctcghZAFVqcLlb0C0Bgzd3sB2b2P77mZDPUWhZAFROHJpUGCEDAfma5CxXtPz1DWq/zYxRAmhYY5824F0DOuQKWSbAOQNCMqrvu3fs/L6DR22K2wT9nAAxPBU8RQGiN6mW43AFAZhu25b633D8c1YgmzowSQNM25BRKWARArGS08/lNxD+LFssHwmMRQLC5aNcxBgJABL9HT0WRF0CjCmJmOGEOQHsuaVzMP/s/TWJCaGGwBUCeu1PAPLzjP9nqN9DZOBNAKE4JcydbCkCGtbd1qjPzP8dgm9U8jhVAtPeKTkVwDkCeCLss5l37P401XMPLmBdAFd29VMVQDUBg0yA55h75Pz6odcYLCRdApBM4rBrkAkDyAVWgQxbRP4XDMnK20hFAymLlF7EmzD8GUgo9XBHlP3lbK7T9COc/k+OhPthhy7+YGEpnrOvCPzBFhLs15u4/epbqB6H4uz9IuuLF5svev6lzLKY31es/CaQ0envF5z8ZY0xlUADXv7zaz7HYEuI/CfbK1sn16T8uAQfWwxLWPzKn/YuFN94/5KdbC1AFu793fyCSnlfvPzK2y4doAMY/NRg5t1/X6b/shq4QJaHDP5yNIAKPOeI/vpn7BSE30r/X4YQrO6nrv78Ziv/Thto/DqJ1Y6+y5z9l51NaxFrlv8QlA65HOLS/86dxiEc96z+Hj0+LFjneP6LzBZ8LTc2/DaJ1Y6+y579l51NaxFrlP8QlA65HOLQ/8qdxiEc967+Jj0+LFjnev6LzBZ8LTc0/1qdbC1AFuz93fyCSnlfvvzK2y4doAMa/NRg5t1/X6T/vhq4QJaHDv5yNIAKPOeK/wJn7BSE30j/W4YQrO6nrP78Ziv/Thtq/CaQ0envF578XY0xlUADXP7zaz7HYEuK/CvbK1sn16b8rAQfWwxLWvzKn/YuFN96/zWLlF7EmzL8GUgo9XBHlv3lbK7T9COe/kOOhPthhyz+cGEpnrOvCvzBFhLs15u6/c5bqB6H4u79IuuLF5sveP6lzLKY31eu/AQAAAP////8HAAAA/////zEAAAD/////VwEAAP////9hCQAA/////6dBAAD/////kcsBAP/////3kAwA/////8H2VwAAAAAAAAAAAAAAAAACAAAA/////w4AAAD/////YgAAAP////+uAgAA/////8ISAAD/////ToMAAP////8ilwMA/////+4hGQD/////gu2vAAAAAAAAAAAAAAAAAAAAAAACAAAA//////////8BAAAAAwAAAP//////////////////////////////////////////////////////////////////////////AQAAAAAAAAACAAAA////////////////AwAAAP//////////////////////////////////////////////////////////////////////////AQAAAAAAAAACAAAA////////////////AwAAAP//////////////////////////////////////////////////////////////////////////AQAAAAAAAAACAAAA////////////////AwAAAP//////////////////////////////////////////////////////////AgAAAP//////////AQAAAAAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAD/////////////////////AQAAAP///////////////wIAAAD///////////////////////////////8DAAAA/////////////////////wAAAAD///////////////8CAAAAAQAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAD///////////////8CAAAAAQAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAD///////////////8CAAAAAQAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAD///////////////8CAAAAAQAAAP////////////////////////////////////////////////////8BAAAAAgAAAP///////////////wAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8BAAAAAgAAAP///////////////wAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8BAAAAAgAAAP///////////////wAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8BAAAAAgAAAP///////////////wAAAAD/////////////////////AwAAAP///////////////////////////////wIAAAD///////////////8BAAAA/////////////////////wAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAABAAAA//////////8CAAAA//////////////////////////////////////////////////////////8DAAAA////////////////AgAAAAAAAAABAAAA//////////////////////////////////////////////////////////////////////////8DAAAA////////////////AgAAAAAAAAABAAAA//////////////////////////////////////////////////////////////////////////8DAAAA////////////////AgAAAAAAAAABAAAA//////////////////////////////////////////////////////////////////////////8DAAAAAQAAAP//////////AgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAACAAAAAAAAAAIAAAABAAAAAQAAAAIAAAACAAAAAAAAAAUAAAAFAAAAAAAAAAIAAAACAAAAAwAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAAAAAAAAgAAAAEAAAACAAAAAgAAAAIAAAAAAAAABQAAAAYAAAAAAAAAAgAAAAIAAAADAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAgAAAAAAAAACAAAAAQAAAAMAAAACAAAAAgAAAAAAAAAFAAAABwAAAAAAAAACAAAAAgAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAACAAAAAAAAAAIAAAABAAAABAAAAAIAAAACAAAAAAAAAAUAAAAIAAAAAAAAAAIAAAACAAAAAwAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAIAAAAAAAAAAgAAAAEAAAAAAAAAAgAAAAIAAAAAAAAABQAAAAkAAAAAAAAAAgAAAAIAAAADAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAKAAAAAgAAAAIAAAAAAAAAAwAAAA4AAAACAAAAAAAAAAIAAAADAAAAAAAAAAAAAAACAAAAAgAAAAMAAAAGAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAACAAAAAgAAAAAAAAADAAAACgAAAAIAAAAAAAAAAgAAAAMAAAABAAAAAAAAAAIAAAACAAAAAwAAAAcAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAIAAAACAAAAAAAAAAMAAAALAAAAAgAAAAAAAAACAAAAAwAAAAIAAAAAAAAAAgAAAAIAAAADAAAACAAAAAAAAAAAAAAAAAAAAAAAAAANAAAAAgAAAAIAAAAAAAAAAwAAAAwAAAACAAAAAAAAAAIAAAADAAAAAwAAAAAAAAACAAAAAgAAAAMAAAAJAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAACAAAAAgAAAAAAAAADAAAADQAAAAIAAAAAAAAAAgAAAAMAAAAEAAAAAAAAAAIAAAACAAAAAwAAAAoAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAIAAAACAAAAAAAAAAMAAAAGAAAAAgAAAAAAAAACAAAAAwAAAA8AAAAAAAAAAgAAAAIAAAADAAAACwAAAAAAAAAAAAAAAAAAAAAAAAAGAAAAAgAAAAIAAAAAAAAAAwAAAAcAAAACAAAAAAAAAAIAAAADAAAAEAAAAAAAAAACAAAAAgAAAAMAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAcAAAACAAAAAgAAAAAAAAADAAAACAAAAAIAAAAAAAAAAgAAAAMAAAARAAAAAAAAAAIAAAACAAAAAwAAAA0AAAAAAAAAAAAAAAAAAAAAAAAACAAAAAIAAAACAAAAAAAAAAMAAAAJAAAAAgAAAAAAAAACAAAAAwAAABIAAAAAAAAAAgAAAAIAAAADAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAJAAAAAgAAAAIAAAAAAAAAAwAAAAUAAAACAAAAAAAAAAIAAAADAAAAEwAAAAAAAAACAAAAAgAAAAMAAAAPAAAAAAAAAAAAAAAAAAAAAAAAABAAAAACAAAAAAAAAAIAAAABAAAAEwAAAAIAAAACAAAAAAAAAAUAAAAKAAAAAAAAAAIAAAACAAAAAwAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEQAAAAIAAAAAAAAAAgAAAAEAAAAPAAAAAgAAAAIAAAAAAAAABQAAAAsAAAAAAAAAAgAAAAIAAAADAAAAEQAAAAAAAAAAAAAAAAAAAAAAAAASAAAAAgAAAAAAAAACAAAAAQAAABAAAAACAAAAAgAAAAAAAAAFAAAADAAAAAAAAAACAAAAAgAAAAMAAAASAAAAAAAAAAAAAAAAAAAAAAAAABMAAAACAAAAAAAAAAIAAAABAAAAEQAAAAIAAAACAAAAAAAAAAUAAAANAAAAAAAAAAIAAAACAAAAAwAAABMAAAAAAAAAAAAAAAAAAAAAAAAADwAAAAIAAAAAAAAAAgAAAAEAAAASAAAAAgAAAAIAAAAAAAAABQAAAA4AAAAAAAAAAgAAAAIAAAADAAAAAgAAAAEAAAAAAAAAAQAAAAIAAAAAAAAAAAAAAAIAAAABAAAAAAAAAAEAAAACAAAAAQAAAAAAAAACAAAAAAAAAAUAAAAEAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAFAAAABAAAAAAAAAABAAAABQAAAAQAAAAAAAAABQAAAAAAAAACAAAAAQAAAAAAAAABAAAAAgAAAAAAAAAAAAAAAgAAAAEAAAAAAAAAAQAAAAIAAAABAAAAAAAAAAIAAAACAAAAAAAAAAEAAAAAAAAAAAAAAAUAAAAEAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAFAAAABAAAAAAAAAABAAAABQAAAAQAAAAAAAAABQAAAAUAAAAAAAAAAQAAAAAAAAAAAAAAOgehWlKfUEEz1zLi+JsiQa2og3wcMfVAWCbHorc0yEDi+Yn/Y6mbQJ11/mfsnG9At6bnG4UQQkBvMCQWKqUUQJVmwwswmOc/3hVgVBL3uj//qqOEOdGOPw/WDN4gnGE/H3ANkCUgND+AA8btKgAHPwTXBqJVSdo+XfRQAqsKrj4fc+zLYbSPQklEmCZHv2FCUP+uDso1NEKYtPhwphUHQptxnyFXYdpB7CddZAMmrkGAt1AxSTqBQUibBVdTsFNBSuX3MV+AJkFocv82SLf5QAqmgj7AY81A23VDSEnLoEDGEJVSeDFzQDYrqvBk70VA8U157pcRGUBWfEF+ZKbsP7KBdLHZTpFAqKYk69AqekDbeGY41MdjQD8AZzHK501A1vcrrjubNkD5LnquvBYhQCbiRRD71QlAqt72EbOH8z8Eu+jL1YbdP4uaox/xUcY/abedg1XfsD+BsUdzJ4KZP5wE9YFySIM/rW1kAKMpbT+rZFthVRhWPy4PKlXIs0A/qMZLlwDnMEHByqEF0I0ZQQYSFD8lUQNBPpY+dFs07UAH8BZImBPWQN9RY0I0sMBA2T7kLfc6qUByFYvfhBKTQMq+0Mis1XxA0XQbeQXMZUBJJ5aEGXpQQP7/SY0a6ThAaMD92b/UIkAs8s8yqXoMQNIegOvCk/U/aOi7NZJP4D8AAAAA/////wAAAAAAAAAAAAAAAAAAAAAAAAAA/////////////////////////////////////wAAAAD/////AAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAA/////wAAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAP////8AAAAABQAAAAAAAAAAAAAAAAAAAAAAAAD/////BQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAA/////wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP////////////////////////////////////8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/////////////////////////////////////AAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAABQAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/////////////////////////////////////wAAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAABAAAAAQAAAAAAAAABAAAAAAAAAAUAAAABAAAAAQAAAAAAAAAAAAAAAQAAAAEAAAAAAAAAAQAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAEAAQAAAQEAAAAAAAEAAAABAAAAAQABAAAAAAAAAAAAAAAAAAAAAAcAAAAHAAAAAQAAAAIAAAAEAAAAAwAAAAAAAAAAAAAABwAAAAMAAAABAAAAAgAAAAUAAAAEAAAAAAAAAAAAAAAEAAAABAAAAAAAAAACAAAAAQAAAAMAAAAOAAAABgAAAAsAAAACAAAABwAAAAEAAAAYAAAABQAAAAoAAAABAAAABgAAAAAAAAAmAAAABwAAAAwAAAADAAAACAAAAAIAAAAxAAAACQAAAA4AAAAAAAAABQAAAAQAAAA6AAAACAAAAA0AAAAEAAAACQAAAAMAAAA/AAAACwAAAAYAAAAPAAAACgAAABAAAABIAAAADAAAAAcAAAAQAAAACwAAABEAAABTAAAACgAAAAUAAAATAAAADgAAAA8AAABhAAAADQAAAAgAAAARAAAADAAAABIAAABrAAAADgAAAAkAAAASAAAADQAAABMAAAB1AAAADwAAABMAAAARAAAAEgAAABAAAAAGAAAAAgAAAAMAAAAFAAAABAAAAAAAAAAAAAAAAAAAAAYAAAACAAAAAwAAAAEAAAAFAAAABAAAAAAAAAAAAAAABwAAAAUAAAADAAAABAAAAAEAAAAAAAAAAgAAAAAAAAACAAAAAwAAAAEAAAAFAAAABAAAAAYAAAAAAAAAAAAAAGFsZ29zLmMAaDNOZWlnaGJvclJvdGF0aW9ucwBjb29yZGlqay5jAF91cEFwN0NoZWNrZWQAX3VwQXA3ckNoZWNrZWQAZGlyZWN0ZWRFZGdlLmMAZGlyZWN0ZWRFZGdlVG9Cb3VuZGFyeQBhZGphY2VudEZhY2VEaXJbdG1wRmlqay5mYWNlXVtmaWprLmZhY2VdID09IEtJAGZhY2VpamsuYwBfZmFjZUlqa1BlbnRUb0NlbGxCb3VuZGFyeQBhZGphY2VudEZhY2VEaXJbY2VudGVySUpLLmZhY2VdW2ZhY2UyXSA9PSBLSQBfZmFjZUlqa1RvQ2VsbEJvdW5kYXJ5AGgzSW5kZXguYwBjb21wYWN0Q2VsbHMAbGF0TG5nVG9DZWxsAGNlbGxUb0NoaWxkUG9zAHZhbGlkYXRlQ2hpbGRQb3MAbGF0TG5nLmMAY2VsbEFyZWFSYWRzMgBwb2x5Z29uLT5uZXh0ID09IE5VTEwAbGlua2VkR2VvLmMAYWRkTmV3TGlua2VkUG9seWdvbgBuZXh0ICE9IE5VTEwAbG9vcCAhPSBOVUxMAGFkZE5ld0xpbmtlZExvb3AAcG9seWdvbi0+Zmlyc3QgPT0gTlVMTABhZGRMaW5rZWRMb29wAGNvb3JkICE9IE5VTEwAYWRkTGlua2VkQ29vcmQAbG9vcC0+Zmlyc3QgPT0gTlVMTABpbm5lckxvb3BzICE9IE5VTEwAbm9ybWFsaXplTXVsdGlQb2x5Z29uAGJib3hlcyAhPSBOVUxMAGNhbmRpZGF0ZXMgIT0gTlVMTABmaW5kUG9seWdvbkZvckhvbGUAY2FuZGlkYXRlQkJveGVzICE9IE5VTEwAcmV2RGlyICE9IElOVkFMSURfRElHSVQAbG9jYWxpai5jAGNlbGxUb0xvY2FsSWprAGJhc2VDZWxsICE9IG9yaWdpbkJhc2VDZWxsACEob3JpZ2luT25QZW50ICYmIGluZGV4T25QZW50KQBiYXNlQ2VsbCA9PSBvcmlnaW5CYXNlQ2VsbABiYXNlQ2VsbCAhPSBJTlZBTElEX0JBU0VfQ0VMTABsb2NhbElqa1RvQ2VsbAAhX2lzQmFzZUNlbGxQZW50YWdvbihiYXNlQ2VsbCkAYmFzZUNlbGxSb3RhdGlvbnMgPj0gMABncmlkUGF0aENlbGxzADAAdmVydGV4LmMAY2VsbFRvVmVydGV4AGdyYXBoLT5idWNrZXRzICE9IE5VTEwAdmVydGV4R3JhcGguYwBpbml0VmVydGV4R3JhcGgAbm9kZSAhPSBOVUxMAGFkZFZlcnRleE5vZGU=";function q(e){return e}function H(e){return e.replace(/\b__Z[\w\d_]+/g,(function(e){return e===e?e:e+" ["+e+"]"}))}function V(){var e=new Error;if(!e.stack){try{throw new Error(0)}catch(_5){e=_5}if(!e.stack)return"(no stack trace available)"}return e.stack.toString()}function j(){return v.length}function W(e){try{var t=new ArrayBuffer(e);if(t.byteLength!=e)return;return new Int8Array(t).set(v),$(t),w(t),1}catch(_5){}}var X="function"===typeof atob?atob:function(e){var t,n,r,i,a,o,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",u="",l=0;e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");do{t=s.indexOf(e.charAt(l++))<<2|(i=s.indexOf(e.charAt(l++)))>>4,n=(15&i)<<4|(a=s.indexOf(e.charAt(l++)))>>2,r=(3&a)<<6|(o=s.indexOf(e.charAt(l++))),u+=String.fromCharCode(t),64!==a&&(u+=String.fromCharCode(n)),64!==o&&(u+=String.fromCharCode(r))}while(l<e.length);return u};function Y(e){if(G(e))return function(e){try{for(var t=X(e),n=new Uint8Array(t.length),r=0;r<t.length;++r)n[r]=t.charCodeAt(r);return n}catch(i){throw new Error("Converting base64 string to bytes failed.")}}(e.slice(z.length))}var Q,J,K={a:ue,b:function(e){l=e},c:function(){return l},d:function(e,t,n,r){ue("Assertion failed: "+p(e)+", at: "+[t?p(t):"unknown filename",n,r?p(r):"unknown function"])},e:function(e){return n.___errno_location&&(y[n.___errno_location()>>2]=e),e},f:j,g:function(e,t,n){m.set(m.subarray(t,t+n),e)},h:function(e){var t=j(),n=16777216,r=2130706432;if(e>r)return!1;for(var i=Math.max(t,16777216);i<e;)i=i<=536870912?_(2*i,n):Math.min(_((3*i+2147483648)/4,n),r);return!!W(i)},i:function(e){ue("OOM")},j:q,k:H,l:W,m:V,n:function(){var e=V();return n.extraStackTrace&&(e+="\n"+n.extraStackTrace()),H(e)},o:24144,p:24128},Z=function(e,t,n){var r=new e.Int8Array(n),i=new e.Int32Array(n),a=(new e.Uint8Array(n),new e.Float32Array(n),new e.Float64Array(n)),o=0|t.o,s=0|t.p,u=e.Math.floor,l=e.Math.abs,c=e.Math.sqrt,h=e.Math.pow,d=e.Math.cos,f=e.Math.sin,p=e.Math.tan,A=e.Math.acos,v=e.Math.asin,m=e.Math.atan,g=e.Math.atan2,y=e.Math.ceil,b=e.Math.imul,x=e.Math.min,_=e.Math.max,w=e.Math.clz32,S=t.b,M=t.c,k=t.d,T=t.e,E=t.f,C=t.g,R=t.h,B=t.i,P=24160;function N(e,t,n,r){return 0|I(e|=0,t|=0,n|=0,r|=0,0)}function I(e,t,n,r,a){var o,s=0,u=0,l=0,c=0;if(o=P,P=P+16|0,u=o,!(0|D(e|=0,t|=0,n|=0,r|=0,a|=0)))return P=o,0|(r=0);do{if((0|n)>=0){if((0|n)>13780509){if(0|(s=0|tt(15,u)))break;u=0|i[(l=u)>>2],l=0|i[l+4>>2]}else c=0|Ot(0|n,0|(s=((0|n)<0)<<31>>31),3,0),l=0|M(),s=0|Pt(0|n,0|s,1,0),s=0|Pt(0|(s=0|Ot(0|c,0|l,0|s,0|M())),0|M(),1,0),l=0|M(),i[u>>2]=s,i[u+4>>2]=l,u=s;if(Xt(0|r,0,u<<3|0),0|a){Xt(0|a,0,u<<2|0),s=0|L(e,t,n,r,a,u,l,0);break}(s=0|Bt(u,4))?(c=0|L(e,t,n,r,s,u,l,0),Rt(s),s=c):s=13}else s=2}while(0);return P=o,0|(c=s)}function D(e,t,n,r,a){e|=0,t|=0,n|=0,r|=0,a|=0;var o,s,u=0,l=0,c=0,h=0,d=0,f=0,p=0,A=0,v=0;if(s=P,P=P+16|0,v=s+8|0,i[(A=o=s)>>2]=e,i[A+4>>2]=t,(0|n)<0)return P=s,0|(v=2);if(i[(u=r)>>2]=e,i[u+4>>2]=t,(u=0!=(0|a))&&(i[a>>2]=0),0|Oe(e,t))return P=s,0|(v=9);i[v>>2]=0;e:do{if((0|n)>=1)if(u)for(f=1,d=0,p=0,A=1,u=e;;){if(!(d|p)){if(0|(u=0|O(u,t,4,v,o)))break e;if(0|Oe(u=0|i[(t=o)>>2],t=0|i[t+4>>2])){u=9;break e}}if(0|(u=0|O(u,t,0|i[22384+(p<<2)>>2],v,o)))break e;if(u=0|i[(t=o)>>2],t=0|i[t+4>>2],i[(e=r+(f<<3)|0)>>2]=u,i[e+4>>2]=t,i[a+(f<<2)>>2]=A,l=(0|(e=d+1|0))==(0|A),h=6==(0|(c=p+1|0)),0|Oe(u,t)){u=9;break e}if((0|(A=A+(h&l&1)|0))>(0|n)){u=0;break}f=f+1|0,d=l?0:e,p=l?h?0:c:p}else for(f=1,d=0,p=0,A=1,u=e;;){if(!(d|p)){if(0|(u=0|O(u,t,4,v,o)))break e;if(0|Oe(u=0|i[(t=o)>>2],t=0|i[t+4>>2])){u=9;break e}}if(0|(u=0|O(u,t,0|i[22384+(p<<2)>>2],v,o)))break e;if(u=0|i[(t=o)>>2],t=0|i[t+4>>2],i[(e=r+(f<<3)|0)>>2]=u,i[e+4>>2]=t,l=(0|(e=d+1|0))==(0|A),h=6==(0|(c=p+1|0)),0|Oe(u,t)){u=9;break e}if((0|(A=A+(h&l&1)|0))>(0|n)){u=0;break}f=f+1|0,d=l?0:e,p=l?h?0:c:p}else u=0}while(0);return P=s,0|(v=u)}function L(e,t,n,r,a,o,s,u){n|=0,r|=0,a|=0,u|=0;var l,c,h,d=0,f=0,p=0,A=0,v=0,m=0,g=0;if(h=P,P=P+16|0,l=h+8|0,c=h,d=0|Ut(0|(e|=0),0|(t|=0),0|(o|=0),0|(s|=0)),p=0|M(),!(0==(0|(g=0|i[(m=A=r+(d<<3)|0)>>2]))&0==(0|(m=0|i[m+4>>2]))|(f=(0|g)==(0|e)&(0|m)==(0|t))))do{d=0|Ft(0|(d=0|Pt(0|d,0|p,1,0)),0|M(),0|o,0|s),p=0|M(),f=(0|(m=0|i[(g=A=r+(d<<3)|0)>>2]))==(0|e)&(0|(g=0|i[g+4>>2]))==(0|t)}while(!(0==(0|m)&0==(0|g)|f));if(d=a+(d<<2)|0,f&&(0|i[d>>2])<=(0|u))return P=h,0|(g=0);if(i[(g=A)>>2]=e,i[g+4>>2]=t,i[d>>2]=u,(0|u)>=(0|n))return P=h,0|(g=0);switch(f=u+1|0,i[l>>2]=0,0|(d=0|O(e,t,2,l,c))){case 9:v=9;break;case 0:(d=0|L(0|i[(d=c)>>2],0|i[d+4>>2],n,r,a,o,s,f))||(v=9)}e:do{if(9==(0|v)){switch(i[l>>2]=0,0|(d=0|O(e,t,3,l,c))){case 9:break;case 0:if(0|(d=0|L(0|i[(d=c)>>2],0|i[d+4>>2],n,r,a,o,s,f)))break e;break;default:break e}switch(i[l>>2]=0,0|(d=0|O(e,t,1,l,c))){case 9:break;case 0:if(0|(d=0|L(0|i[(d=c)>>2],0|i[d+4>>2],n,r,a,o,s,f)))break e;break;default:break e}switch(i[l>>2]=0,0|(d=0|O(e,t,5,l,c))){case 9:break;case 0:if(0|(d=0|L(0|i[(d=c)>>2],0|i[d+4>>2],n,r,a,o,s,f)))break e;break;default:break e}switch(i[l>>2]=0,0|(d=0|O(e,t,4,l,c))){case 9:break;case 0:if(0|(d=0|L(0|i[(d=c)>>2],0|i[d+4>>2],n,r,a,o,s,f)))break e;break;default:break e}switch(i[l>>2]=0,0|(d=0|O(e,t,6,l,c))){case 9:break;case 0:if(0|(d=0|L(0|i[(d=c)>>2],0|i[d+4>>2],n,r,a,o,s,f)))break e;break;default:break e}return P=h,0|(g=0)}}while(0);return P=h,0|(g=d)}function O(e,t,n,r,a){e|=0,t|=0,a|=0;var o,s,u=0,l=0,c=0,h=0,d=0,f=0,p=0;if((n|=0)>>>0>6)return 0|(a=1);if(d=(0|i[(r|=0)>>2])%6|0,i[r>>2]=d,(0|d)>0){u=0;do{n=0|pe(n),u=u+1|0}while((0|u)<(0|i[r>>2]))}if(d=0|Gt(0|e,0|t,45),M(),(s=127&d)>>>0>121)return 0|(a=5);o=0|Fe(e,t),u=0|Gt(0|e,0|t,52),M(),u&=15;e:do{if(u){for(;;){if(c=0|Gt(0|e,0|t,0|(l=3*(15-u|0)|0)),M(),7==(0|(c&=7))){t=5;break}if(p=0==(0|He(u)),u=u+-1|0,f=0|qt(7,0,0|l),t&=~(0|M()),e=0|qt(0|i[(p?432:16)+(28*c|0)+(n<<2)>>2],0,0|l)|e&~f,t|=l=0|M(),!(n=0|i[(p?640:224)+(28*c|0)+(n<<2)>>2])){n=0;break e}if(!u){h=8;break e}}return 0|t}h=8}while(0);8==(0|h)&&(e|=0|qt(0|(p=0|i[848+(28*s|0)+(n<<2)>>2]),0,45),t=0|M()|-1040385&t,n=0|i[4272+(28*s|0)+(n<<2)>>2],127==(127&p|0)&&(p=0|qt(0|i[848+(28*s|0)+20>>2],0,45),t=0|M()|-1040385&t,n=0|i[4272+(28*s|0)+20>>2],e=0|ze(p|e,t),t=0|M(),i[r>>2]=1+(0|i[r>>2]))),c=0|Gt(0|e,0|t,45),M(),c&=127;e:do{if(0|z(c)){t:do{if(1==(0|Fe(e,t))){if((0|s)!=(0|c)){if(0|V(c,0|i[7696+(28*s|0)>>2])){e=0|qe(e,t),l=1,t=0|M();break}k(23313,22416,436,22424)}switch(0|o){case 3:e=0|ze(e,t),t=0|M(),i[r>>2]=1+(0|i[r>>2]),l=0;break t;case 5:e=0|qe(e,t),t=0|M(),i[r>>2]=5+(0|i[r>>2]),l=0;break t;case 0:return 0|(p=9);default:return 0|(p=1)}}else l=0}while(0);if((0|n)>0){u=0;do{e=0|Ue(e,t),t=0|M(),u=u+1|0}while((0|u)!=(0|n))}if((0|s)!=(0|c)){if(!(0|G(c))){if(0!=(0|l)|5!=(0|Fe(e,t)))break;i[r>>2]=1+(0|i[r>>2]);break}switch(127&d){case 8:case 118:break e}3!=(0|Fe(e,t))&&(i[r>>2]=1+(0|i[r>>2]))}}else if((0|n)>0){u=0;do{e=0|ze(e,t),t=0|M(),u=u+1|0}while((0|u)!=(0|n))}}while(0);return i[r>>2]=((0|i[r>>2])+n|0)%6|0,i[(p=a)>>2]=e,i[p+4>>2]=t,0|(p=0)}function F(e,t,n,r){n|=0,r|=0;var a,o,s,u=0,l=0;for(s=P,P=P+16|0,a=s,o=s+8|0,u=(u=0==(0|Oe(e|=0,t|=0)))?1:2;;){if(i[o>>2]=0,0==(0|O(e,t,u,o,a))&((0|i[(l=a)>>2])==(0|n)?(0|i[l+4>>2])==(0|r):0)){e=4;break}if((u=u+1|0)>>>0>=7){u=7,e=4;break}}return 4==(0|e)?(P=s,0|u):0}function U(e,t,n,r,o,s,u){t|=0,n|=0,r|=0,o|=0,s|=0,u|=0;var l,c,h,d,f,p,A,v,m,g,y=0,b=0,x=0,_=0,w=0,S=0,k=0,T=0,E=0,C=0,R=0,B=0,N=0,I=0,D=0,L=0,O=0,F=0,U=0;if(g=P,P=P+64|0,A=g+48|0,v=g+32|0,m=g+24|0,l=g+8|0,c=g,(0|(b=0|i[(e|=0)>>2]))<=0)return P=g,0|(D=0);for(h=e+4|0,d=A+8|0,f=v+8|0,p=l+8|0,y=0,N=0;;){B=(x=0|i[h>>2])+(N<<4)|0,i[A>>2]=i[B>>2],i[A+4>>2]=i[B+4>>2],i[A+8>>2]=i[B+8>>2],i[A+12>>2]=i[B+12>>2],(0|N)==(b+-1|0)?(i[v>>2]=i[x>>2],i[v+4>>2]=i[x+4>>2],i[v+8>>2]=i[x+8>>2],i[v+12>>2]=i[x+12>>2]):(B=x+(N+1<<4)|0,i[v>>2]=i[B>>2],i[v+4>>2]=i[B+4>>2],i[v+8>>2]=i[B+8>>2],i[v+12>>2]=i[B+12>>2]),b=0|J(A,v,r,m);e:do{if(b)x=0,y=b;else if(b=0|i[(x=m)>>2],(0|(x=0|i[x+4>>2]))>0|0==(0|x)&b>>>0>0){R=0,B=0;t:for(;;){if(U=+a[A>>3],F=+((C=0|Nt(0|b,0|x,0|R,0|B))>>>0)+4294967296*+(0|M()),L=+(b>>>0)+4294967296*+(0|x),O=+(R>>>0)+4294967296*+(0|B),a[l>>3]=U*F/L+ +a[v>>3]*O/L,a[p>>3]=+a[d>>3]*F/L+ +a[f>>3]*O/L,0|(b=0|Ve(l,r,c))){y=b;break}S=0|Ut(0|(E=0|i[(C=c)>>2]),0|(C=0|i[C+4>>2]),0|t,0|n),_=0|M(),x=0|i[(w=b=u+(S<<3)|0)>>2],w=0|i[w+4>>2];n:do{if(0==(0|x)&0==(0|w))I=b,D=16;else for(k=0,T=0;;){if((0|k)>(0|n)|(0|k)==(0|n)&T>>>0>t>>>0){y=1;break t}if((0|x)==(0|E)&(0|w)==(0|C))break n;if(S=0|Ft(0|(b=0|Pt(0|S,0|_,1,0)),0|M(),0|t,0|n),_=0|M(),T=0|Pt(0|T,0|k,1,0),k=0|M(),0==(0|(x=0|i[(w=b=u+(S<<3)|0)>>2]))&0==(0|(w=0|i[w+4>>2]))){I=b,D=16;break}}}while(0);if(16!=(0|D)||(D=0,0==(0|E)&0==(0|C))||(i[(T=I)>>2]=E,i[T+4>>2]=C,T=s+(i[o>>2]<<3)|0,i[T>>2]=E,i[T+4>>2]=C,T=0|Pt(0|i[(T=o)>>2],0|i[T+4>>2],1,0),E=0|M(),i[(C=o)>>2]=T,i[C+4>>2]=E),R=0|Pt(0|R,0|B,1,0),B=0|M(),b=0|i[(x=m)>>2],!((0|(x=0|i[x+4>>2]))>(0|B)|(0|x)==(0|B)&b>>>0>R>>>0)){x=1;break e}}x=0}else x=1}while(0);if(N=N+1|0,!x){D=21;break}if((0|N)>=(0|(b=0|i[e>>2]))){y=0,D=21;break}}return 21==(0|D)?(P=g,0|y):0}function z(e){return(e|=0)>>>0>121?0|(e=0):0|(e=0|i[7696+(28*e|0)+16>>2])}function G(e){return 4==(0|(e|=0))|117==(0|e)|0}function q(e){return 0|i[11120+(216*(0|i[(e|=0)>>2])|0)+(72*(0|i[e+4>>2])|0)+(24*(0|i[e+8>>2])|0)+(i[e+12>>2]<<3)>>2]}function H(e){return 0|i[11120+(216*(0|i[(e|=0)>>2])|0)+(72*(0|i[e+4>>2])|0)+(24*(0|i[e+8>>2])|0)+(i[e+12>>2]<<3)+4>>2]}function V(e,t){return t|=0,(0|i[7696+(28*(e|=0)|0)+20>>2])==(0|t)?0|(t=1):0|(t=(0|i[7696+(28*e|0)+24>>2])==(0|t))}function j(e,t){return 0|i[848+(28*(e|=0)|0)+((t|=0)<<2)>>2]}function W(e,t){return t|=0,(0|i[848+(28*(e|=0)|0)>>2])==(0|t)?0|(t=0):(0|i[848+(28*e|0)+4>>2])==(0|t)?0|(t=1):(0|i[848+(28*e|0)+8>>2])==(0|t)?0|(t=2):(0|i[848+(28*e|0)+12>>2])==(0|t)?0|(t=3):(0|i[848+(28*e|0)+16>>2])==(0|t)?0|(t=4):(0|i[848+(28*e|0)+20>>2])==(0|t)?0|(t=5):0|((0|i[848+(28*e|0)+24>>2])==(0|t)?6:7)}function X(e){return+a[(e|=0)+16>>3]<+a[e+24>>3]|0}function Y(e,t){e|=0;var n,r,i=0;return(i=+a[(t|=0)>>3])>=+a[e+8>>3]&&i<=+a[e>>3]?(n=+a[e+16>>3],i=+a[e+24>>3],t=(r=+a[t+8>>3])>=i,e=r<=n&1,n<i?t&&(e=1):t||(e=0),0|(t=0!=(0|e))):0|(t=0)}function Q(e,t,n){e|=0,t|=0,n|=0;var r,s,c,h,d,f,p,A=0,v=0,m=0,g=0,b=0,_=0,w=0;f=P,P=P+288|0,d=f+264|0,g=f+96|0,v=(A=m=f)+96|0;do{i[A>>2]=0,A=A+4|0}while((0|A)<(0|v));return 0|(t=0|Qe(t,m))?(P=f,0|(_=t)):(Xe(m=0|i[(v=m)>>2],v=0|i[v+4>>2],d),Ye(m,v,g),h=+et(d,g+8|0),a[d>>3]=+a[e>>3],a[(v=d+8|0)>>3]=+a[e+16>>3],a[g>>3]=+a[e+8>>3],a[(m=g+8|0)>>3]=+a[e+24>>3],s=+et(d,g),w=+a[v>>3]-+a[m>>3],c=+l(+w),p=+a[d>>3]-+a[g>>3],r=+l(+p),0==w|0==p||(w=+Ht(+c,+r),w=+y(+s*s/+Vt(+w/+Vt(+c,+r),3)/(h*(2.59807621135*h)*.8)),a[o>>3]=w,b=~~w>>>0,_=+l(w)>=1?w>0?~~+x(+u(w/4294967296),4294967295)>>>0:~~+y((w-+(~~w>>>0))/4294967296)>>>0:0,2146435072==(2146435072&i[o+4>>2]|0))?t=1:(g=0==(0|b)&0==(0|_),i[(t=n)>>2]=g?1:b,i[t+4>>2]=g?0:_,t=0),P=f,0|(_=t))}function J(e,t,n,r){e|=0,t|=0,n|=0,r|=0;var s,c,h,d,f=0,p=0,A=0;d=P,P=P+288|0,c=d+264|0,h=d+96|0,s=(f=p=d)+96|0;do{i[f>>2]=0,f=f+4|0}while((0|f)<(0|s));return 0|(n=0|Qe(n,p))?(P=d,0|(r=n)):(Xe(f=0|i[(n=p)>>2],n=0|i[n+4>>2],c),Ye(f,n,h),A=+et(c,h+8|0),A=+y(+ +et(e,t)/(2*A)),a[o>>3]=A,n=~~A>>>0,f=+l(A)>=1?A>0?~~+x(+u(A/4294967296),4294967295)>>>0:~~+y((A-+(~~A>>>0))/4294967296)>>>0:0,2146435072==(2146435072&i[o+4>>2]|0)?(P=d,0|(r=1)):(p=0==(0|n)&0==(0|f),i[r>>2]=p?1:n,i[r+4>>2]=p?0:f,P=d,0|(r=0)))}function K(e,t,n,r){t|=0,n|=0,r|=0,i[(e|=0)>>2]=t,i[e+4>>2]=n,i[e+8>>2]=r}function Z(e,t){e|=0;var n,r,o,s,u=0,c=0,h=0,d=0,f=0,p=0,A=0;i[(s=(t|=0)+8|0)>>2]=0,r=+a[e>>3],d=+l(+r),o=+a[e+8>>3],d+=.5*(f=+l(+o)/.8660254037844386),d-=+(0|(u=~~d)),f-=+(0|(e=~~f));do{if(d<.5){if(d<.3333333333333333){if(i[t>>2]=u,f<.5*(d+1)){i[t+4>>2]=e;break}e=e+1|0,i[t+4>>2]=e;break}if(e=(1&!(f<(A=1-d)))+e|0,i[t+4>>2]=e,A<=f&f<2*d){u=u+1|0,i[t>>2]=u;break}i[t>>2]=u;break}if(!(d<.6666666666666666)){if(u=u+1|0,i[t>>2]=u,f<.5*d){i[t+4>>2]=e;break}e=e+1|0,i[t+4>>2]=e;break}if(f<1-d){if(i[t+4>>2]=e,2*d-1<f){i[t>>2]=u;break}}else e=e+1|0,i[t+4>>2]=e;u=u+1|0,i[t>>2]=u}while(0);do{if(r<0){if(1&e){u=~~(+(0|u)-(2*(+((p=0|Nt(0|u,((0|u)<0)<<31>>31|0,0|(p=(e+1|0)/2|0),((0|p)<0)<<31>>31|0))>>>0)+4294967296*+(0|M()))+1)),i[t>>2]=u;break}u=~~(+(0|u)-2*(+((p=0|Nt(0|u,((0|u)<0)<<31>>31|0,0|(p=(0|e)/2|0),((0|p)<0)<<31>>31|0))>>>0)+4294967296*+(0|M()))),i[t>>2]=u;break}}while(0);p=t+4|0,o<0&&(u=u-((1|e<<1)/2|0)|0,i[t>>2]=u,e=0-e|0,i[p>>2]=e),c=e-u|0,(0|u)<0?(h=0-u|0,i[p>>2]=c,i[s>>2]=h,i[t>>2]=0,e=c,u=0):h=0,(0|e)<0&&(u=u-e|0,i[t>>2]=u,h=h-e|0,i[s>>2]=h,i[p>>2]=0,e=0),n=u-h|0,c=e-h|0,(0|h)<0&&(i[t>>2]=n,i[p>>2]=c,i[s>>2]=0,e=c,u=n,h=0),(0|(c=(0|h)<(0|(c=(0|e)<(0|u)?e:u))?h:c))<=0||(i[t>>2]=u-c,i[p>>2]=e-c,i[s>>2]=h-c)}function $(e){var t,n=0,r=0,a=0,o=0,s=0;n=0|i[(e|=0)>>2],r=0|i[(t=e+4|0)>>2],(0|n)<0&&(r=r-n|0,i[t>>2]=r,i[(s=e+8|0)>>2]=(0|i[s>>2])-n,i[e>>2]=0,n=0),(0|r)<0?(n=n-r|0,i[e>>2]=n,o=(0|i[(s=e+8|0)>>2])-r|0,i[s>>2]=o,i[t>>2]=0,r=0):(s=o=e+8|0,o=0|i[o>>2]),(0|o)<0&&(n=n-o|0,i[e>>2]=n,r=r-o|0,i[t>>2]=r,i[s>>2]=0,o=0),(0|(a=(0|o)<(0|(a=(0|r)<(0|n)?r:n))?o:a))<=0||(i[e>>2]=n-a,i[t>>2]=r-a,i[s>>2]=o-a)}function ee(e,t){t|=0;var n,r;r=0|i[(e|=0)+8>>2],n=+((0|i[e+4>>2])-r|0),a[t>>3]=+((0|i[e>>2])-r|0)-.5*n,a[t+8>>3]=.8660254037844386*n}function te(e,t,n){e|=0,t|=0,i[(n|=0)>>2]=(0|i[t>>2])+(0|i[e>>2]),i[n+4>>2]=(0|i[t+4>>2])+(0|i[e+4>>2]),i[n+8>>2]=(0|i[t+8>>2])+(0|i[e+8>>2])}function ne(e,t,n){e|=0,t|=0,i[(n|=0)>>2]=(0|i[e>>2])-(0|i[t>>2]),i[n+4>>2]=(0|i[e+4>>2])-(0|i[t+4>>2]),i[n+8>>2]=(0|i[e+8>>2])-(0|i[t+8>>2])}function re(e,t){t|=0;var n,r=0;r=0|b(0|i[(e|=0)>>2],t),i[e>>2]=r,n=0|b(0|i[(r=e+4|0)>>2],t),i[r>>2]=n,t=0|b(0|i[(e=e+8|0)>>2],t),i[e>>2]=t}function ie(e){var t,n,r=0,a=0,o=0,s=0,u=0;u=(0|(n=0|i[(e|=0)>>2]))<0,e=(e=(a=(0|(s=((t=(0|(o=(0|i[e+4>>2])-(u?n:0)|0))<0)?0-o|0:0)+((0|i[e+8>>2])-(u?n:0))|0))<0)?0:s)-((o=(0|(a=(0|e)<(0|(a=(0|(r=(t?0:o)-(a?s:0)|0))<(0|(s=(u?0:n)-(t?o:0)-(a?s:0)|0))?r:s))?e:a))>0)?a:0)|0,r=r-(o?a:0)|0;e:do{switch(s-(o?a:0)|0){case 0:switch(0|r){case 0:return 0|(u=0==(0|e)?0:1==(0|e)?1:7);case 1:return 0|(u=0==(0|e)?2:1==(0|e)?3:7);default:break e}case 1:switch(0|r){case 0:return 0|(u=0==(0|e)?4:1==(0|e)?5:7);case 1:if(e)break e;return 0|(e=6);default:break e}}}while(0);return 0|(u=7)}function ae(e){var t,n=0,r=0,a=0,o=0,s=0,u=0;o=0|i[(t=(e|=0)+8|0)>>2],s=(0|i[e>>2])-o|0,o=(0|i[(u=e+4|0)>>2])-o|0;do{if(s>>>0>715827881|o>>>0>715827881){if(r=(0|s)>0){if((2147483647-s|0)<(0|s))return 0|(u=1);if((2147483647-(s<<1)|0)<(0|s))return 0|(u=1)}else{if((-2147483648-s|0)>(0|s))return 0|(u=1);if((-2147483648-(s<<1)|0)>(0|s))return 0|(u=1)}if(n=3*s|0,(0|o)>0){if((2147483647-o|0)<(0|o))return 0|(u=1)}else if((-2147483648-o|0)>(0|o))return 0|(u=1);if(a=o<<1,(0|s)>-1){if((-2147483648|n|0)>=(0|o))return 0|(u=1)}else if((-2147483648^n|0)<(0|o))return 0|(u=1);if(r){if(!((2147483647-s|0)<(0|a))){r=a;break}return 0|(n=1)}if(!((-2147483648-s|0)>(0|a))){r=a;break}return 0|(n=1)}r=o<<1,n=3*s|0}while(0);a=0|Et(+(n-o|0)/7),i[e>>2]=a,o=0|Et(+(r+s|0)/7),i[u>>2]=o,i[t>>2]=0,n=(r=(0|o)<(0|a))?a:o,r=r?o:a;do{if((0|r)<0){if((0|n)>0){if((-2147483648|n|0)<(0|r)&-2147483648!=(0|r)&(2147483647-n|0)>=(0|r))break;k(23313,22444,355,22455)}if(-2147483648==(0|r)|(-2147483648-n|0)>(0|r)&&k(23313,22444,355,22455),(0|n)>-1){if((-2147483648|n|0)<(0|r))break;k(23313,22444,355,22455)}else{if((-2147483648^n|0)>=(0|r))break;k(23313,22444,355,22455)}}}while(0);return n=o-a|0,(0|a)<0?(r=0-a|0,i[u>>2]=n,i[t>>2]=r,i[e>>2]=0,a=0):(n=o,r=0),(0|n)<0&&(a=a-n|0,i[e>>2]=a,r=r-n|0,i[t>>2]=r,i[u>>2]=0,n=0),s=a-r|0,o=n-r|0,(0|r)<0?(i[e>>2]=s,i[u>>2]=o,i[t>>2]=0,n=o,o=s,r=0):o=a,(0|(a=(0|r)<(0|(a=(0|n)<(0|o)?n:o))?r:a))<=0||(i[e>>2]=o-a,i[u>>2]=n-a,i[t>>2]=r-a),0|(u=0)}function oe(e){var t,n=0,r=0,a=0,o=0,s=0,u=0;o=0|i[(t=(e|=0)+8|0)>>2],s=(0|i[e>>2])-o|0,o=(0|i[(u=e+4|0)>>2])-o|0;do{if(s>>>0>715827881|o>>>0>715827881){if(r=(0|s)>0){if((2147483647-s|0)<(0|s))return 0|(u=1)}else if((-2147483648-s|0)>(0|s))return 0|(u=1);if(n=s<<1,(0|o)>0){if((2147483647-o|0)<(0|o))return 0|(u=1);if((2147483647-(o<<1)|0)<(0|o))return 0|(u=1)}else{if((-2147483648-o|0)>(0|o))return 0|(u=1);if((-2147483648-(o<<1)|0)>(0|o))return 0|(u=1)}if(a=3*o|0,r){if((2147483647-n|0)<(0|o))return 0|(u=1)}else if((-2147483648-n|0)>(0|o))return 0|(u=1);if((0|o)>-1){if((-2147483648|a|0)<(0|s)){r=a;break}return 0|(n=1)}if(!((-2147483648^a|0)<(0|s))){r=a;break}return 0|(n=1)}r=3*o|0,n=s<<1}while(0);a=0|Et(+(n+o|0)/7),i[e>>2]=a,o=0|Et(+(r-s|0)/7),i[u>>2]=o,i[t>>2]=0,n=(r=(0|o)<(0|a))?a:o,r=r?o:a;do{if((0|r)<0){if((0|n)>0){if((-2147483648|n|0)<(0|r)&-2147483648!=(0|r)&(2147483647-n|0)>=(0|r))break;k(23313,22444,404,22469)}if(-2147483648==(0|r)|(-2147483648-n|0)>(0|r)&&k(23313,22444,404,22469),(0|n)>-1){if((-2147483648|n|0)<(0|r))break;k(23313,22444,404,22469)}else{if((-2147483648^n|0)>=(0|r))break;k(23313,22444,404,22469)}}}while(0);return n=o-a|0,(0|a)<0?(r=0-a|0,i[u>>2]=n,i[t>>2]=r,i[e>>2]=0,a=0):(n=o,r=0),(0|n)<0&&(a=a-n|0,i[e>>2]=a,r=r-n|0,i[t>>2]=r,i[u>>2]=0,n=0),s=a-r|0,o=n-r|0,(0|r)<0?(i[e>>2]=s,i[u>>2]=o,i[t>>2]=0,n=o,o=s,r=0):o=a,(0|(a=(0|r)<(0|(a=(0|n)<(0|o)?n:o))?r:a))<=0||(i[e>>2]=o-a,i[u>>2]=n-a,i[t>>2]=r-a),0|(u=0)}function se(e){var t,n,r=0,a=0,o=0,s=0,u=0;a=0|i[(t=(e|=0)+8|0)>>2],o=0|Et(+((3*(r=(0|i[e>>2])-a|0)|0)-(a=(0|i[(n=e+4|0)>>2])-a|0)|0)/7),i[e>>2]=o,r=0|Et(+((a<<1)+r|0)/7),i[n>>2]=r,i[t>>2]=0,a=r-o|0,(0|o)<0?(u=0-o|0,i[n>>2]=a,i[t>>2]=u,i[e>>2]=0,r=a,o=0,a=u):a=0,(0|r)<0&&(o=o-r|0,i[e>>2]=o,a=a-r|0,i[t>>2]=a,i[n>>2]=0,r=0),u=o-a|0,s=r-a|0,(0|a)<0?(i[e>>2]=u,i[n>>2]=s,i[t>>2]=0,r=s,s=u,a=0):s=o,(0|(o=(0|a)<(0|(o=(0|r)<(0|s)?r:s))?a:o))<=0||(i[e>>2]=s-o,i[n>>2]=r-o,i[t>>2]=a-o)}function ue(e){var t,n,r=0,a=0,o=0,s=0,u=0;a=0|i[(t=(e|=0)+8|0)>>2],o=0|Et(+(((r=(0|i[e>>2])-a|0)<<1)+(a=(0|i[(n=e+4|0)>>2])-a|0)|0)/7),i[e>>2]=o,r=0|Et(+((3*a|0)-r|0)/7),i[n>>2]=r,i[t>>2]=0,a=r-o|0,(0|o)<0?(u=0-o|0,i[n>>2]=a,i[t>>2]=u,i[e>>2]=0,r=a,o=0,a=u):a=0,(0|r)<0&&(o=o-r|0,i[e>>2]=o,a=a-r|0,i[t>>2]=a,i[n>>2]=0,r=0),u=o-a|0,s=r-a|0,(0|a)<0?(i[e>>2]=u,i[n>>2]=s,i[t>>2]=0,r=s,s=u,a=0):s=o,(0|(o=(0|a)<(0|(o=(0|r)<(0|s)?r:s))?a:o))<=0||(i[e>>2]=s-o,i[n>>2]=r-o,i[t>>2]=a-o)}function le(e){var t,n,r,a=0,o=0,s=0,u=0;a=0|i[(e|=0)>>2],o=0|i[(n=e+4|0)>>2],s=0|i[(r=e+8|0)>>2],u=o+(3*a|0)|0,i[e>>2]=u,o=s+(3*o|0)|0,i[n>>2]=o,a=(3*s|0)+a|0,i[r>>2]=a,s=o-u|0,(0|u)<0?(a=a-u|0,i[n>>2]=s,i[r>>2]=a,i[e>>2]=0,o=s,s=0):s=u,(0|o)<0&&(s=s-o|0,i[e>>2]=s,a=a-o|0,i[r>>2]=a,i[n>>2]=0,o=0),t=s-a|0,u=o-a|0,(0|a)<0?(i[e>>2]=t,i[n>>2]=u,i[r>>2]=0,s=t,a=0):u=o,(0|(o=(0|a)<(0|(o=(0|u)<(0|s)?u:s))?a:o))<=0||(i[e>>2]=s-o,i[n>>2]=u-o,i[r>>2]=a-o)}function ce(e){var t,n,r,a=0,o=0,s=0,u=0;u=0|i[(e|=0)>>2],s=(3*(a=0|i[(n=e+4|0)>>2])|0)+u|0,u=(o=0|i[(r=e+8|0)>>2])+(3*u|0)|0,i[e>>2]=u,i[n>>2]=s,a=(3*o|0)+a|0,i[r>>2]=a,o=s-u|0,(0|u)<0?(a=a-u|0,i[n>>2]=o,i[r>>2]=a,i[e>>2]=0,u=0):o=s,(0|o)<0&&(u=u-o|0,i[e>>2]=u,a=a-o|0,i[r>>2]=a,i[n>>2]=0,o=0),t=u-a|0,s=o-a|0,(0|a)<0?(i[e>>2]=t,i[n>>2]=s,i[r>>2]=0,u=t,a=0):s=o,(0|(o=(0|a)<(0|(o=(0|s)<(0|u)?s:u))?a:o))<=0||(i[e>>2]=u-o,i[n>>2]=s-o,i[r>>2]=a-o)}function he(e,t){e|=0;var n,r,a,o=0,s=0,u=0;((t|=0)+-1|0)>>>0>=6||(u=(0|i[15440+(12*t|0)>>2])+(0|i[e>>2])|0,i[e>>2]=u,a=e+4|0,s=(0|i[15440+(12*t|0)+4>>2])+(0|i[a>>2])|0,i[a>>2]=s,r=e+8|0,t=(0|i[15440+(12*t|0)+8>>2])+(0|i[r>>2])|0,i[r>>2]=t,o=s-u|0,(0|u)<0?(t=t-u|0,i[a>>2]=o,i[r>>2]=t,i[e>>2]=0,s=0):(o=s,s=u),(0|o)<0&&(s=s-o|0,i[e>>2]=s,t=t-o|0,i[r>>2]=t,i[a>>2]=0,o=0),n=s-t|0,u=o-t|0,(0|t)<0?(i[e>>2]=n,i[a>>2]=u,i[r>>2]=0,s=n,t=0):u=o,(0|(o=(0|t)<(0|(o=(0|u)<(0|s)?u:s))?t:o))<=0||(i[e>>2]=s-o,i[a>>2]=u-o,i[r>>2]=t-o))}function de(e){var t,n,r,a=0,o=0,s=0,u=0;u=0|i[(e|=0)>>2],s=(a=0|i[(n=e+4|0)>>2])+u|0,u=(o=0|i[(r=e+8|0)>>2])+u|0,i[e>>2]=u,i[n>>2]=s,a=o+a|0,i[r>>2]=a,o=s-u|0,(0|u)<0?(a=a-u|0,i[n>>2]=o,i[r>>2]=a,i[e>>2]=0,s=0):(o=s,s=u),(0|o)<0&&(s=s-o|0,i[e>>2]=s,a=a-o|0,i[r>>2]=a,i[n>>2]=0,o=0),t=s-a|0,u=o-a|0,(0|a)<0?(i[e>>2]=t,i[n>>2]=u,i[r>>2]=0,s=t,a=0):u=o,(0|(o=(0|a)<(0|(o=(0|u)<(0|s)?u:s))?a:o))<=0||(i[e>>2]=s-o,i[n>>2]=u-o,i[r>>2]=a-o)}function fe(e){var t,n,r,a=0,o=0,s=0,u=0;a=0|i[(e|=0)>>2],s=0|i[(n=e+4|0)>>2],o=0|i[(r=e+8|0)>>2],u=s+a|0,i[e>>2]=u,s=o+s|0,i[n>>2]=s,a=o+a|0,i[r>>2]=a,o=s-u|0,(0|u)<0?(a=a-u|0,i[n>>2]=o,i[r>>2]=a,i[e>>2]=0,s=0):(o=s,s=u),(0|o)<0&&(s=s-o|0,i[e>>2]=s,a=a-o|0,i[r>>2]=a,i[n>>2]=0,o=0),t=s-a|0,u=o-a|0,(0|a)<0?(i[e>>2]=t,i[n>>2]=u,i[r>>2]=0,s=t,a=0):u=o,(0|(o=(0|a)<(0|(o=(0|u)<(0|s)?u:s))?a:o))<=0||(i[e>>2]=s-o,i[n>>2]=u-o,i[r>>2]=a-o)}function pe(e){switch(0|(e|=0)){case 1:e=5;break;case 5:e=4;break;case 4:e=6;break;case 6:e=2;break;case 2:e=3;break;case 3:e=1}return 0|e}function Ae(e){switch(0|(e|=0)){case 1:e=3;break;case 3:e=2;break;case 2:e=6;break;case 6:e=4;break;case 4:e=5;break;case 5:e=1}return 0|e}function ve(e){var t,n,r,a=0,o=0,s=0,u=0;a=0|i[(e|=0)>>2],o=0|i[(n=e+4|0)>>2],s=0|i[(r=e+8|0)>>2],u=o+(a<<1)|0,i[e>>2]=u,o=s+(o<<1)|0,i[n>>2]=o,a=(s<<1)+a|0,i[r>>2]=a,s=o-u|0,(0|u)<0?(a=a-u|0,i[n>>2]=s,i[r>>2]=a,i[e>>2]=0,o=s,s=0):s=u,(0|o)<0&&(s=s-o|0,i[e>>2]=s,a=a-o|0,i[r>>2]=a,i[n>>2]=0,o=0),t=s-a|0,u=o-a|0,(0|a)<0?(i[e>>2]=t,i[n>>2]=u,i[r>>2]=0,s=t,a=0):u=o,(0|(o=(0|a)<(0|(o=(0|u)<(0|s)?u:s))?a:o))<=0||(i[e>>2]=s-o,i[n>>2]=u-o,i[r>>2]=a-o)}function me(e){var t,n,r,a=0,o=0,s=0,u=0;u=0|i[(e|=0)>>2],s=((a=0|i[(n=e+4|0)>>2])<<1)+u|0,u=(o=0|i[(r=e+8|0)>>2])+(u<<1)|0,i[e>>2]=u,i[n>>2]=s,a=(o<<1)+a|0,i[r>>2]=a,o=s-u|0,(0|u)<0?(a=a-u|0,i[n>>2]=o,i[r>>2]=a,i[e>>2]=0,u=0):o=s,(0|o)<0&&(u=u-o|0,i[e>>2]=u,a=a-o|0,i[r>>2]=a,i[n>>2]=0,o=0),t=u-a|0,s=o-a|0,(0|a)<0?(i[e>>2]=t,i[n>>2]=s,i[r>>2]=0,u=t,a=0):s=o,(0|(o=(0|a)<(0|(o=(0|s)<(0|u)?s:u))?a:o))<=0||(i[e>>2]=u-o,i[n>>2]=s-o,i[r>>2]=a-o)}function ge(e,t){t|=0;var n,r,a,o=0,s=0,u=0;return a=(0|(r=(0|i[(e|=0)>>2])-(0|i[t>>2])|0))<0,n=(0|(s=(0|i[e+4>>2])-(0|i[t+4>>2])-(a?r:0)|0))<0,t=(t=(e=(0|(u=(a?0-r|0:0)+(0|i[e+8>>2])-(0|i[t+8>>2])+(n?0-s|0:0)|0))<0)?0:u)-((s=(0|(e=(0|t)<(0|(e=(0|(o=(n?0:s)-(e?u:0)|0))<(0|(u=(a?0:r)-(n?s:0)-(e?u:0)|0))?o:u))?t:e))>0)?e:0)|0,o=o-(s?e:0)|0,0|((0|(e=(0|(e=u-(s?e:0)|0))>-1?e:0-e|0))>(0|(t=(0|(o=(0|o)>-1?o:0-o|0))>(0|(t=(0|t)>-1?t:0-t|0))?o:t))?e:t)}function ye(e,t){t|=0;var n;n=0|i[(e|=0)+8>>2],i[t>>2]=(0|i[e>>2])-n,i[t+4>>2]=(0|i[e+4>>2])-n}function be(e,t){t|=0;var n,r,a,o=0,s=0,u=0;s=0|i[(e|=0)>>2],i[t>>2]=s,u=0|i[e+4>>2],i[(r=t+4|0)>>2]=u,i[(a=t+8|0)>>2]=0,e=(o=(0|u)<(0|s))?s:u,o=o?u:s;do{if((0|o)<0){if((0|e)>0){if((-2147483648|e|0)<(0|o)&-2147483648!=(0|o)&(2147483647-e|0)>=(0|o))break;return 0|(e=1)}if(-2147483648==(0|o)|(-2147483648-e|0)>(0|o))return 0|(t=1);if((0|e)>-1){if((-2147483648|e|0)<(0|o))break;return 0|(e=1)}if(!((-2147483648^e|0)<(0|o)))break;return 0|(e=1)}}while(0);return e=u-s|0,(0|s)<0?(o=0-s|0,i[r>>2]=e,i[a>>2]=o,i[t>>2]=0,s=0):(e=u,o=0),(0|e)<0&&(s=s-e|0,i[t>>2]=s,o=o-e|0,i[a>>2]=o,i[r>>2]=0,e=0),n=s-o|0,u=e-o|0,(0|o)<0?(i[t>>2]=n,i[r>>2]=u,i[a>>2]=0,e=u,u=n,o=0):u=s,(0|(s=(0|o)<(0|(s=(0|e)<(0|u)?e:u))?o:s))<=0||(i[t>>2]=u-s,i[r>>2]=e-s,i[a>>2]=o-s),0|(t=0)}function xe(e){var t,n,r,a;n=(a=0|i[(t=(e|=0)+8|0)>>2])-(0|i[e>>2])|0,i[e>>2]=n,e=(0|i[(r=e+4|0)>>2])-a|0,i[r>>2]=e,i[t>>2]=0-(e+n)}function _e(e){var t,n,r=0,a=0,o=0,s=0,u=0;r=0-(a=0|i[(e|=0)>>2])|0,i[e>>2]=r,i[(t=e+8|0)>>2]=0,s=(o=0|i[(n=e+4|0)>>2])+a|0,(0|a)>0?(i[n>>2]=s,i[t>>2]=a,i[e>>2]=0,r=0,o=s):a=0,(0|o)<0?(u=r-o|0,i[e>>2]=u,a=a-o|0,i[t>>2]=a,i[n>>2]=0,s=u-a|0,r=0-a|0,(0|a)<0?(i[e>>2]=s,i[n>>2]=r,i[t>>2]=0,o=r,a=0):(o=0,s=u)):s=r,(0|(r=(0|a)<(0|(r=(0|o)<(0|s)?o:s))?a:r))<=0||(i[e>>2]=s-r,i[n>>2]=o-r,i[t>>2]=a-r)}function we(e,t,n){n|=0;var r,a,o=0,s=0;return a=P,P=P+16|0,r=a,s=-2130706433&(t|=0)|134217728,!0&268435456==(2013265920&t|0)?(o=0|Gt(0|(e|=0),0|t,56),M(),o=0|function(e,t,n){e|=0,t|=0,n|=0;var r=0,a=0,o=0;if(o=P,P=P+16|0,a=o,r=0|Oe(e,t),(n+-1|0)>>>0>5)return P=o,0|(a=-1);if(r=0!=(0|r),1==(0|n)&r)return P=o,0|(a=-1);do{if(!(0|yt(e,t,a))){if(r){r=(5+(0|i[21936+(n<<2)>>2])-(0|i[a>>2])|0)%5|0;break}r=(6+(0|i[21968+(n<<2)>>2])-(0|i[a>>2])|0)%6|0;break}r=-1}while(0);return a=r,P=o,0|a}(e,s,7&o),-1==(0|o)?(i[n>>2]=0,P=a,0|(s=6)):(0|We(e,s,r)&&k(23313,22484,282,22499),t=0|Gt(0|e,0|t,52),M(),t&=15,0|Oe(e,s)?Te(r,t,o,2,n):Be(r,t,o,2,n),P=a,0|(s=0))):(P=a,0|(s=6))}function Se(e,t,n,r){t|=0,r|=0;var o,s=0,u=0,l=0,c=0;if(o=P,P=P+16|0,function(e,t,n){e|=0,t|=0,n|=0;var r=0,o=0,s=0;s=P,P=P+32|0,o=s,function(e,t){e|=0,t|=0;var n=0,r=0,i=0;n=+a[e>>3],r=+d(+n),n=+f(+n),a[t+16>>3]=n,n=+a[e+8>>3],i=r*+d(+n),a[t>>3]=i,n=r*+f(+n),a[t+8>>3]=n}(e,o),i[t>>2]=0,a[n>>3]=5,r=+gt(16400,o),r<+a[n>>3]&&(i[t>>2]=0,a[n>>3]=r);r=+gt(16424,o),r<+a[n>>3]&&(i[t>>2]=1,a[n>>3]=r);r=+gt(16448,o),r<+a[n>>3]&&(i[t>>2]=2,a[n>>3]=r);r=+gt(16472,o),r<+a[n>>3]&&(i[t>>2]=3,a[n>>3]=r);r=+gt(16496,o),r<+a[n>>3]&&(i[t>>2]=4,a[n>>3]=r);r=+gt(16520,o),r<+a[n>>3]&&(i[t>>2]=5,a[n>>3]=r);r=+gt(16544,o),r<+a[n>>3]&&(i[t>>2]=6,a[n>>3]=r);r=+gt(16568,o),r<+a[n>>3]&&(i[t>>2]=7,a[n>>3]=r);r=+gt(16592,o),r<+a[n>>3]&&(i[t>>2]=8,a[n>>3]=r);r=+gt(16616,o),r<+a[n>>3]&&(i[t>>2]=9,a[n>>3]=r);r=+gt(16640,o),r<+a[n>>3]&&(i[t>>2]=10,a[n>>3]=r);r=+gt(16664,o),r<+a[n>>3]&&(i[t>>2]=11,a[n>>3]=r);r=+gt(16688,o),r<+a[n>>3]&&(i[t>>2]=12,a[n>>3]=r);r=+gt(16712,o),r<+a[n>>3]&&(i[t>>2]=13,a[n>>3]=r);r=+gt(16736,o),r<+a[n>>3]&&(i[t>>2]=14,a[n>>3]=r);r=+gt(16760,o),r<+a[n>>3]&&(i[t>>2]=15,a[n>>3]=r);r=+gt(16784,o),r<+a[n>>3]&&(i[t>>2]=16,a[n>>3]=r);r=+gt(16808,o),r<+a[n>>3]&&(i[t>>2]=17,a[n>>3]=r);r=+gt(16832,o),r<+a[n>>3]&&(i[t>>2]=18,a[n>>3]=r);if(r=+gt(16856,o),!(r<+a[n>>3]))return void(P=s);i[t>>2]=19,a[n>>3]=r,P=s}(e|=0,n|=0,c=o),(u=+A(+(1-.5*+a[c>>3])))<1e-16)return i[r>>2]=0,i[r+4>>2]=0,i[r+8>>2]=0,i[r+12>>2]=0,void(P=o);if(c=0|i[n>>2],s=+Ze((s=+a[15920+(24*c|0)>>3])-+Ze(+function(e,t){e|=0,t|=0;var n=0,r=0,i=0,o=0,s=0;return o=+a[t>>3],r=+d(+o),i=+a[t+8>>3]-+a[e+8>>3],s=r*+f(+i),n=+a[e>>3],+ +g(+s,+(+f(+o)*+d(+n)-+d(+i)*(r*+f(+n))))}(15600+(c<<4)|0,e))),l=0|He(t)?+Ze(s+-.3334731722518321):s,s=+p(+u)/.381966011250105,(0|t)>0){e=0;do{s*=2.6457513110645907,e=e+1|0}while((0|e)!=(0|t))}u=+d(+l)*s,a[r>>3]=u,l=+f(+l)*s,a[r+8>>3]=l,P=o}function Me(e,t,n,r,o){t|=0,n|=0,r|=0,o|=0;var s=0,u=0;if(s=+function(e){e|=0;var t=0,n=0;return n=+a[e>>3],t=+a[e+8>>3],+ +c(+(n*n+t*t))}(e|=0),s<1e-16)return t=15600+(t<<4)|0,i[o>>2]=i[t>>2],i[o+4>>2]=i[t+4>>2],i[o+8>>2]=i[t+8>>2],void(i[o+12>>2]=i[t+12>>2]);if(u=+g(+ +a[e+8>>3],+ +a[e>>3]),(0|n)>0){e=0;do{s/=2.6457513110645907,e=e+1|0}while((0|e)!=(0|n))}r?(s/=3,n=0==(0|He(n)),s=+m(.381966011250105*(n?s:s/2.6457513110645907))):(s=+m(.381966011250105*s),0|He(n)&&(u=+Ze(u+.3334731722518321))),function(e,t,n,r){e|=0,t=+t,n=+n,r|=0;var o=0,s=0,u=0,c=0;if(n<1e-16)return i[r>>2]=i[e>>2],i[r+4>>2]=i[e+4>>2],i[r+8>>2]=i[e+8>>2],void(i[r+12>>2]=i[e+12>>2]);s=t<0?t+6.283185307179586:t,s=t>=6.283185307179586?s+-6.283185307179586:s;do{if(!(s<1e-16)){if(o=+l(+(s+-3.141592653589793))<1e-16,t=+a[e>>3],o){t-=n,a[r>>3]=t,o=r;break}if(u=+d(+n),n=+f(+n),t=u*+f(+t)+ +d(+s)*(n*+d(+t)),t=+v(+((t=t>1?1:t)<-1?-1:t)),a[r>>3]=t,+l(+(t+-1.5707963267948966))<1e-16)return a[r>>3]=1.5707963267948966,void(a[r+8>>3]=0);if(+l(+(t+1.5707963267948966))<1e-16)return a[r>>3]=-1.5707963267948966,void(a[r+8>>3]=0);if(c=+d(+t),s=n*+f(+s)/c,n=+a[e>>3],t=(u-+f(+t)*+f(+n))/+d(+n)/c,u=s>1?1:s,t=t>1?1:t,(t=+a[e+8>>3]+ +g(+(u<-1?-1:u),+(t<-1?-1:t)))>3.141592653589793)do{t+=-6.283185307179586}while(t>3.141592653589793);if(t<-3.141592653589793)do{t+=6.283185307179586}while(t<-3.141592653589793);return void(a[r+8>>3]=t)}t=+a[e>>3]+n,a[r>>3]=t,o=r}while(0);if(+l(+(t+-1.5707963267948966))<1e-16)return a[o>>3]=1.5707963267948966,void(a[r+8>>3]=0);if(+l(+(t+1.5707963267948966))<1e-16)return a[o>>3]=-1.5707963267948966,void(a[r+8>>3]=0);if(t=+a[e+8>>3],t>3.141592653589793)do{t+=-6.283185307179586}while(t>3.141592653589793);if(t<-3.141592653589793)do{t+=6.283185307179586}while(t<-3.141592653589793);a[r+8>>3]=t}(15600+(t<<4)|0,+Ze(+a[15920+(24*t|0)>>3]-u),s,o)}function ke(e,t,n){t|=0,n|=0;var r,a;r=P,P=P+16|0,ee((e|=0)+4|0,a=r),Me(a,0|i[e>>2],t,0,n),P=r}function Te(e,t,n,r,o){e|=0,t|=0,n|=0,r|=0,o|=0;var s,u,l,c,h,d,f,p,A,v,m,g,y,b,x,_,w,S,M,T,E,C,R=0,B=0,N=0,I=0,D=0,L=0;if(C=P,P=P+272|0,I=C+240|0,M=C,T=C+224|0,E=C+208|0,m=C+176|0,g=C+160|0,y=C+192|0,b=C+144|0,x=C+128|0,_=C+112|0,w=C+96|0,S=C+80|0,i[(R=C+256|0)>>2]=t,i[I>>2]=i[e>>2],i[I+4>>2]=i[e+4>>2],i[I+8>>2]=i[e+8>>2],i[I+12>>2]=i[e+12>>2],Ee(I,R,M),i[o>>2]=0,(0|(I=r+n+(5==(0|r)&1)|0))<=(0|n))P=C;else{u=T+4|0,l=m+4|0,c=n+5|0,h=16880+((s=0|i[R>>2])<<2)|0,d=16960+(s<<2)|0,f=x+8|0,p=_+8|0,A=w+8|0,v=E+4|0,N=n;e:for(;;){B=M+(((0|N)%5|0)<<4)|0,i[E>>2]=i[B>>2],i[E+4>>2]=i[B+4>>2],i[E+8>>2]=i[B+8>>2],i[E+12>>2]=i[B+12>>2];do{}while(2==(0|Ce(E,s,0,1)));if((0|N)>(0|n)&0!=(0|He(t))){if(i[m>>2]=i[E>>2],i[m+4>>2]=i[E+4>>2],i[m+8>>2]=i[E+8>>2],i[m+12>>2]=i[E+12>>2],ee(u,g),r=0|i[m>>2],R=0|i[17040+(80*r|0)+(i[T>>2]<<2)>>2],i[m>>2]=i[18640+(80*r|0)+(20*R|0)>>2],(0|(B=0|i[18640+(80*r|0)+(20*R|0)+16>>2]))>0){e=0;do{de(l),e=e+1|0}while((0|e)<(0|B))}switch(B=18640+(80*r|0)+(20*R|0)+4|0,i[y>>2]=i[B>>2],i[y+4>>2]=i[B+4>>2],i[y+8>>2]=i[B+8>>2],re(y,3*(0|i[h>>2])|0),te(l,y,l),$(l),ee(l,b),D=+(0|i[d>>2]),a[x>>3]=3*D,a[f>>3]=0,L=-1.5*D,a[_>>3]=L,a[p>>3]=2.598076211353316*D,a[w>>3]=L,a[A>>3]=-2.598076211353316*D,0|i[17040+(80*(0|i[m>>2])|0)+(i[E>>2]<<2)>>2]){case 1:e=_,r=x;break;case 3:e=w,r=_;break;case 2:e=x,r=w;break;default:e=12;break e}vt(g,b,r,e,S),Me(S,0|i[m>>2],s,1,o+8+(i[o>>2]<<4)|0),i[o>>2]=1+(0|i[o>>2])}if((0|N)<(0|c)&&(ee(v,m),Me(m,0|i[E>>2],s,1,o+8+(i[o>>2]<<4)|0),i[o>>2]=1+(0|i[o>>2])),i[T>>2]=i[E>>2],i[T+4>>2]=i[E+4>>2],i[T+8>>2]=i[E+8>>2],i[T+12>>2]=i[E+12>>2],(0|(N=N+1|0))>=(0|I)){e=3;break}}3!=(0|e)?12==(0|e)&&k(22522,22569,571,22579):P=C}}function Ee(e,t,n){e|=0,t|=0,n|=0;var r,a=0,o=0,s=0,u=0,l=0;r=P,P=P+128|0,o=r,u=20240,l=(s=a=r+64|0)+60|0;do{i[s>>2]=i[u>>2],s=s+4|0,u=u+4|0}while((0|s)<(0|l));u=20304,l=(s=o)+60|0;do{i[s>>2]=i[u>>2],s=s+4|0,u=u+4|0}while((0|s)<(0|l));a=(l=0==(0|He(0|i[t>>2])))?a:o,ve(o=e+4|0),me(o),0|He(0|i[t>>2])&&(ce(o),i[t>>2]=1+(0|i[t>>2])),i[n>>2]=i[e>>2],te(o,a,t=n+4|0),$(t),i[n+16>>2]=i[e>>2],te(o,a+12|0,t=n+20|0),$(t),i[n+32>>2]=i[e>>2],te(o,a+24|0,t=n+36|0),$(t),i[n+48>>2]=i[e>>2],te(o,a+36|0,t=n+52|0),$(t),i[n+64>>2]=i[e>>2],te(o,a+48|0,n=n+68|0),$(n),P=r}function Ce(e,t,n,r){n|=0,r|=0;var a,o,s,u,l,c,h=0,d=0,f=0,p=0,A=0;if(c=P,P=P+32|0,l=c+12|0,o=c,A=(e|=0)+4|0,p=0|i[16960+((t|=0)<<2)>>2],p=(u=0!=(0|r))?3*p|0:p,h=0|i[A>>2],a=0|i[(s=e+8|0)>>2],u){if((0|(h=a+h+(r=0|i[(d=e+12|0)>>2])|0))==(0|p))return P=c,0|(A=1);f=d}else h=a+h+(r=0|i[(f=e+12|0)>>2])|0;if((0|h)<=(0|p))return P=c,0|(A=0);do{if((0|r)>0){if(r=0|i[e>>2],(0|a)>0){d=18640+(80*r|0)+60|0,r=e;break}r=18640+(80*r|0)+40|0,n?(K(l,p,0,0),ne(A,l,o),fe(o),te(o,l,A),d=r,r=e):(d=r,r=e)}else d=18640+(80*(0|i[e>>2])|0)+20|0,r=e}while(0);if(i[r>>2]=i[d>>2],(0|i[(h=d+16|0)>>2])>0){r=0;do{de(A),r=r+1|0}while((0|r)<(0|i[h>>2]))}return e=d+4|0,i[l>>2]=i[e>>2],i[l+4>>2]=i[e+4>>2],i[l+8>>2]=i[e+8>>2],t=0|i[16880+(t<<2)>>2],re(l,u?3*t|0:t),te(A,l,A),$(A),r=u&&((0|i[s>>2])+(0|i[A>>2])+(0|i[f>>2])|0)==(0|p)?1:2,P=c,0|(A=r)}function Re(e,t){e|=0,t|=0;var n=0;do{n=0|Ce(e,t,0,1)}while(2==(0|n));return 0|n}function Be(e,t,n,r,o){e|=0,t|=0,n|=0,r|=0,o|=0;var s,u,l,c,h,d,f,p,A,v,m,g,y,b,x,_,w,S,M=0,T=0,E=0,C=0,R=0;if(S=P,P=P+240|0,b=S+208|0,x=S,_=S+192|0,w=S+176|0,A=S+160|0,v=S+144|0,m=S+128|0,g=S+112|0,y=S+96|0,i[(M=S+224|0)>>2]=t,i[b>>2]=i[e>>2],i[b+4>>2]=i[e+4>>2],i[b+8>>2]=i[e+8>>2],i[b+12>>2]=i[e+12>>2],Pe(b,M,x),i[o>>2]=0,(0|(p=r+n+(6==(0|r)&1)|0))<=(0|n))P=S;else{u=n+6|0,l=16960+((s=0|i[M>>2])<<2)|0,c=v+8|0,h=m+8|0,d=g+8|0,f=_+4|0,T=0,E=n,r=-1;e:for(;;){if(e=x+((M=(0|E)%6|0)<<4)|0,i[_>>2]=i[e>>2],i[_+4>>2]=i[e+4>>2],i[_+8>>2]=i[e+8>>2],i[_+12>>2]=i[e+12>>2],e=T,T=0|Ce(_,s,0,1),(0|E)>(0|n)&0!=(0|He(t))&&(1!=(0|e)&&(0|i[_>>2])!=(0|r))){switch(ee(x+(((M+5|0)%6|0)<<4)+4|0,w),ee(x+(M<<4)+4|0,A),C=+(0|i[l>>2]),a[v>>3]=3*C,a[c>>3]=0,R=-1.5*C,a[m>>3]=R,a[h>>3]=2.598076211353316*C,a[g>>3]=R,a[d>>3]=-2.598076211353316*C,M=0|i[b>>2],0|i[17040+(80*M|0)+(((0|r)==(0|M)?0|i[_>>2]:r)<<2)>>2]){case 1:e=m,r=v;break;case 3:e=g,r=m;break;case 2:e=v,r=g;break;default:e=8;break e}vt(w,A,r,e,y),0|mt(w,y)||0|mt(A,y)||(Me(y,0|i[b>>2],s,1,o+8+(i[o>>2]<<4)|0),i[o>>2]=1+(0|i[o>>2]))}if((0|E)<(0|u)&&(ee(f,w),Me(w,0|i[_>>2],s,1,o+8+(i[o>>2]<<4)|0),i[o>>2]=1+(0|i[o>>2])),(0|(E=E+1|0))>=(0|p)){e=3;break}r=0|i[_>>2]}3!=(0|e)?8==(0|e)&&k(22606,22569,736,22651):P=S}}function Pe(e,t,n){e|=0,t|=0,n|=0;var r,a=0,o=0,s=0,u=0,l=0;r=P,P=P+160|0,o=r,u=20368,l=(s=a=r+80|0)+72|0;do{i[s>>2]=i[u>>2],s=s+4|0,u=u+4|0}while((0|s)<(0|l));u=20448,l=(s=o)+72|0;do{i[s>>2]=i[u>>2],s=s+4|0,u=u+4|0}while((0|s)<(0|l));a=(l=0==(0|He(0|i[t>>2])))?a:o,ve(o=e+4|0),me(o),0|He(0|i[t>>2])&&(ce(o),i[t>>2]=1+(0|i[t>>2])),i[n>>2]=i[e>>2],te(o,a,t=n+4|0),$(t),i[n+16>>2]=i[e>>2],te(o,a+12|0,t=n+20|0),$(t),i[n+32>>2]=i[e>>2],te(o,a+24|0,t=n+36|0),$(t),i[n+48>>2]=i[e>>2],te(o,a+36|0,t=n+52|0),$(t),i[n+64>>2]=i[e>>2],te(o,a+48|0,t=n+68|0),$(t),i[n+80>>2]=i[e>>2],te(o,a+60|0,n=n+84|0),$(n),P=r}function Ne(e,t){return t=0|Gt(0|(e|=0),0|(t|=0),45),M(),127&t|0}function Ie(e,t){var n=0,r=0,i=0,a=0,o=0,s=0;if(!(!0&134217728==(-16777216&(t|=0)|0)))return 0|(t=0);if(o=0|Gt(0|(e|=0),0|t,45),M(),(o&=127)>>>0>121)return 0|(t=0);n=0|Gt(0|e,0|t,52),M(),n&=15;do{if(0|n){for(i=1,r=0;;){if(a=0|Gt(0|e,0|t,3*(15-i|0)|0),M(),0!=(0|(a&=7))&(1^r)){if(1==(0|a)&0!=(0|z(o))){s=0,r=13;break}r=1}if(7==(0|a)){s=0,r=13;break}if(!(i>>>0<n>>>0)){r=9;break}i=i+1|0}if(9==(0|r)){if(15!=(0|n))break;return 0|(s=1)}if(13==(0|r))return 0|s}}while(0);for(;;){if(s=0|Gt(0|e,0|t,3*(14-n|0)|0),M(),!(7==(7&s|0)&!0)){s=0,r=13;break}if(!(n>>>0<14)){s=1,r=13;break}n=n+1|0}return 13==(0|r)?0|s:0}function De(e,t,n,r){n|=0,r|=0;var a=0,o=0;if(o=0|Gt(0|(e|=0),0|(t|=0),52),M(),n>>>0>15)return 0|(r=4);if((0|(o&=15))<(0|n))return 0|(r=12);if((0|o)==(0|n))return i[r>>2]=e,i[r+4>>2]=t,0|(r=0);if(a=0|qt(0|n,0,52),a|=e,e=0|M()|-15728641&t,(0|o)>(0|n))do{t=0|qt(7,0,3*(14-n|0)|0),n=n+1|0,a|=t,e=0|M()|e}while((0|n)<(0|o));return i[r>>2]=a,i[r+4>>2]=e,0|(r=0)}function Le(e,t,n,r){n|=0,r|=0;var a=0,o=0,s=0;if(o=0|Gt(0|(e|=0),0|(t|=0),52),M(),!((0|n)<16&(0|(o&=15))<=(0|n)))return 0|(r=4);a=n-o|0,n=0|Gt(0|e,0|t,45),M();e:do{if(0|z(127&n)){t:do{if(0|o){for(n=1;0==((s=0|qt(7,0,3*(15-n|0)|0))&e|0)&0==((0|M())&t|0);){if(!(n>>>0<o>>>0))break t;n=n+1|0}n=0|ht(7,0,a,((0|a)<0)<<31>>31),a=0|M();break e}}while(0);n=0|Pt(0|(n=0|Ot(0|(n=0|ht(7,0,a,((0|a)<0)<<31>>31)),0|M(),5,0)),0|M(),-5,-1),n=0|Pt(0|(n=0|Lt(0|n,0|M(),6,0)),0|M(),1,0),a=0|M()}else n=0|ht(7,0,a,((0|a)<0)<<31>>31),a=0|M()}while(0);return i[(s=r)>>2]=n,i[s+4>>2]=a,0|(s=0)}function Oe(e,t){var n=0,r=0,i=0;if(i=0|Gt(0|(e|=0),0|(t|=0),45),M(),!(0|z(127&i)))return 0|(i=0);i=0|Gt(0|e,0|t,52),M(),i&=15;e:do{if(i)for(r=1;;){if(n=0|Gt(0|e,0|t,3*(15-r|0)|0),M(),0|(n&=7))break e;if(!(r>>>0<i>>>0)){n=0;break}r=r+1|0}else n=0}while(0);return 0|(i=0==(0|n)&1)}function Fe(e,t){var n=0,r=0,i=0;if(i=0|Gt(0|(e|=0),0|(t|=0),52),M(),!(i&=15))return 0|(i=0);for(r=1;;){if(n=0|Gt(0|e,0|t,3*(15-r|0)|0),M(),0|(n&=7)){r=5;break}if(!(r>>>0<i>>>0)){n=0,r=5;break}r=r+1|0}return 5==(0|r)?0|n:0}function Ue(e,t){var n=0,r=0,i=0,a=0,o=0,s=0,u=0;if(u=0|Gt(0|(e|=0),0|(t|=0),52),M(),!(u&=15))return u=e,S(0|(s=t)),0|u;for(s=1,n=0;;){r=0|qt(7,0,0|(a=3*(15-s|0)|0)),i=0|M(),o=0|Gt(0|e,0|t,0|a),M(),e=(a=0|qt(0|pe(7&o),0,0|a))|e&~r,t=(o=0|M())|t&~i;e:do{if(!n)if(0==(a&r|0)&0==(o&i|0))n=0;else if(r=0|Gt(0|e,0|t,52),M(),r&=15){n=1;t:for(;;){switch(o=0|Gt(0|e,0|t,3*(15-n|0)|0),M(),7&o){case 1:break t;case 0:break;default:n=1;break e}if(!(n>>>0<r>>>0)){n=1;break e}n=n+1|0}for(n=1;;){if(i=0|Gt(0|e,0|t,0|(o=3*(15-n|0)|0)),M(),a=0|qt(7,0,0|o),t&=~(0|M()),e=e&~a|(o=0|qt(0|pe(7&i),0,0|o)),t=0|t|M(),!(n>>>0<r>>>0)){n=1;break}n=n+1|0}}else n=1}while(0);if(!(s>>>0<u>>>0))break;s=s+1|0}return S(0|t),0|e}function ze(e,t){var n=0,r=0,i=0,a=0,o=0;if(r=0|Gt(0|(e|=0),0|(t|=0),52),M(),!(r&=15))return r=e,S(0|(n=t)),0|r;for(n=1;o=0|Gt(0|e,0|t,0|(a=3*(15-n|0)|0)),M(),i=0|qt(7,0,0|a),t&=~(0|M()),e=(a=0|qt(0|pe(7&o),0,0|a))|e&~i,t=0|M()|t,n>>>0<r>>>0;)n=n+1|0;return S(0|t),0|e}function Ge(e,t){var n=0,r=0,i=0,a=0,o=0,s=0,u=0;if(u=0|Gt(0|(e|=0),0|(t|=0),52),M(),!(u&=15))return u=e,S(0|(s=t)),0|u;for(s=1,n=0;;){r=0|qt(7,0,0|(a=3*(15-s|0)|0)),i=0|M(),o=0|Gt(0|e,0|t,0|a),M(),e=(a=0|qt(0|Ae(7&o),0,0|a))|e&~r,t=(o=0|M())|t&~i;e:do{if(!n)if(0==(a&r|0)&0==(o&i|0))n=0;else if(r=0|Gt(0|e,0|t,52),M(),r&=15){n=1;t:for(;;){switch(o=0|Gt(0|e,0|t,3*(15-n|0)|0),M(),7&o){case 1:break t;case 0:break;default:n=1;break e}if(!(n>>>0<r>>>0)){n=1;break e}n=n+1|0}for(n=1;;){if(a=0|qt(7,0,0|(i=3*(15-n|0)|0)),o=t&~(0|M()),t=0|Gt(0|e,0|t,0|i),M(),e=e&~a|(t=0|qt(0|Ae(7&t),0,0|i)),t=0|o|M(),!(n>>>0<r>>>0)){n=1;break}n=n+1|0}}else n=1}while(0);if(!(s>>>0<u>>>0))break;s=s+1|0}return S(0|t),0|e}function qe(e,t){var n=0,r=0,i=0,a=0,o=0;if(r=0|Gt(0|(e|=0),0|(t|=0),52),M(),!(r&=15))return r=e,S(0|(n=t)),0|r;for(n=1;a=0|qt(7,0,0|(o=3*(15-n|0)|0)),i=t&~(0|M()),t=0|Gt(0|e,0|t,0|o),M(),e=(t=0|qt(0|Ae(7&t),0,0|o))|e&~a,t=0|M()|i,n>>>0<r>>>0;)n=n+1|0;return S(0|t),0|e}function He(e){return 0|(0|(e|=0))%2}function Ve(e,t,n){n|=0;var r,a=0;return r=P,P=P+16|0,a=r,(t|=0)>>>0>15?(P=r,0|(a=4)):2146435072==(2146435072&i[(e|=0)+4>>2]|0)||2146435072==(2146435072&i[e+8+4>>2]|0)?(P=r,0|(a=3)):(function(e,t,n){var r,i;r=P,P=P+16|0,Se(e|=0,t|=0,n|=0,i=r),Z(i,n+4|0),P=r}(e,t,a),t=0|function(e,t){e|=0;var n,r=0,a=0,o=0,s=0,u=0,l=0,c=0,h=0;if(n=P,P=P+64|0,l=n+40|0,a=n+24|0,o=n+12|0,s=n,qt(0|(t|=0),0,52),r=134225919|M(),!t)return(0|i[e+4>>2])>2||(0|i[e+8>>2])>2||(0|i[e+12>>2])>2?(l=0,S(0|(u=0)),P=n,0|l):(qt(0|q(e),0,45),u=0|M()|r,l=-1,S(0|u),P=n,0|l);if(i[l>>2]=i[e>>2],i[l+4>>2]=i[e+4>>2],i[l+8>>2]=i[e+8>>2],i[l+12>>2]=i[e+12>>2],u=l+4|0,(0|t)>0)for(e=-1;i[a>>2]=i[u>>2],i[a+4>>2]=i[u+4>>2],i[a+8>>2]=i[u+8>>2],1&t?(se(u),i[o>>2]=i[u>>2],i[o+4>>2]=i[u+4>>2],i[o+8>>2]=i[u+8>>2],le(o)):(ue(u),i[o>>2]=i[u>>2],i[o+4>>2]=i[u+4>>2],i[o+8>>2]=i[u+8>>2],ce(o)),ne(a,o,s),$(s),c=0|qt(7,0,0|(h=3*(15-t|0)|0)),r&=~(0|M()),e=(h=0|qt(0|ie(s),0,0|h))|e&~c,r=0|M()|r,(0|t)>1;)t=t+-1|0;else e=-1;e:do{if((0|i[u>>2])<=2&&(0|i[l+8>>2])<=2&&(0|i[l+12>>2])<=2){if(t=0|qt(0|(a=0|q(l)),0,45),t|=e,e=0|M()|-1040385&r,s=0|H(l),!(0|z(a))){if((0|s)<=0)break;for(o=0;;){if(a=0|Gt(0|t,0|e,52),M(),a&=15)for(r=1;l=0|Gt(0|t,0|e,0|(h=3*(15-r|0)|0)),M(),c=0|qt(7,0,0|h),e&=~(0|M()),t=t&~c|(h=0|qt(0|pe(7&l),0,0|h)),e=0|e|M(),r>>>0<a>>>0;)r=r+1|0;if((0|(o=o+1|0))==(0|s))break e}}o=0|Gt(0|t,0|e,52),M(),o&=15;t:do{if(o){r=1;n:for(;;){switch(h=0|Gt(0|t,0|e,3*(15-r|0)|0),M(),7&h){case 1:break n;case 0:break;default:break t}if(!(r>>>0<o>>>0))break t;r=r+1|0}if(0|V(a,0|i[l>>2]))for(r=1;c=0|qt(7,0,0|(l=3*(15-r|0)|0)),h=e&~(0|M()),e=0|Gt(0|t,0|e,0|l),M(),t=t&~c|(e=0|qt(0|Ae(7&e),0,0|l)),e=0|h|M(),r>>>0<o>>>0;)r=r+1|0;else for(r=1;l=0|Gt(0|t,0|e,0|(h=3*(15-r|0)|0)),M(),c=0|qt(7,0,0|h),e&=~(0|M()),t=t&~c|(h=0|qt(0|pe(7&l),0,0|h)),e=0|e|M(),r>>>0<o>>>0;)r=r+1|0}}while(0);if((0|s)>0){r=0;do{t=0|Ue(t,e),e=0|M(),r=r+1|0}while((0|r)!=(0|s))}}else t=0,e=0}while(0);return h=t,S(0|(c=e)),P=n,0|h}(a,t),a=0|M(),i[n>>2]=t,i[n+4>>2]=a,0==(0|t)&0==(0|a)&&k(23313,22674,786,22697),P=r,0|(a=0))}function je(e,t,n){var r,a=0,o=0,s=0;if(r=(n|=0)+4|0,o=0|Gt(0|(e|=0),0|(t|=0),52),M(),o&=15,s=0|Gt(0|e,0|t,45),M(),a=0==(0|o),0|z(127&s)){if(a)return 0|(s=1);a=1}else{if(a)return 0|(s=0);a=0==(0|i[r>>2])&&0==(0|i[n+8>>2])?0!=(0|i[n+12>>2])&1:1}for(n=1;1&n?le(r):ce(r),s=0|Gt(0|e,0|t,3*(15-n|0)|0),M(),he(r,7&s),n>>>0<o>>>0;)n=n+1|0;return 0|a}function We(e,t,n){n|=0;var r,a,o=0,s=0,u=0,l=0,c=0,h=0;if(a=P,P=P+16|0,r=a,h=0|Gt(0|(e|=0),0|(t|=0),45),M(),(h&=127)>>>0>121)return i[n>>2]=0,i[n+4>>2]=0,i[n+8>>2]=0,i[n+12>>2]=0,P=a,0|(h=5);e:do{if(0!=(0|z(h))&&(u=0|Gt(0|e,0|t,52),M(),0!=(0|(u&=15)))){o=1;t:for(;;){switch(c=0|Gt(0|e,0|t,3*(15-o|0)|0),M(),7&c){case 5:break t;case 0:break;default:o=t;break e}if(!(o>>>0<u>>>0)){o=t;break e}o=o+1|0}for(s=1,o=t;l=0|qt(7,0,0|(t=3*(15-s|0)|0)),c=o&~(0|M()),o=0|Gt(0|e,0|o,0|t),M(),e=e&~l|(o=0|qt(0|Ae(7&o),0,0|t)),o=0|c|M(),s>>>0<u>>>0;)s=s+1|0}else o=t}while(0);if(c=7696+(28*h|0)|0,i[n>>2]=i[c>>2],i[n+4>>2]=i[c+4>>2],i[n+8>>2]=i[c+8>>2],i[n+12>>2]=i[c+12>>2],!(0|je(e,o,n)))return P=a,0|(h=0);if(l=n+4|0,i[r>>2]=i[l>>2],i[r+4>>2]=i[l+4>>2],i[r+8>>2]=i[l+8>>2],u=0|Gt(0|e,0|o,52),M(),c=15&u,1&u?(ce(l),u=c+1|0):u=c,0|z(h)){e:do{if(c)for(t=1;;){if(s=0|Gt(0|e,0|o,3*(15-t|0)|0),M(),0|(s&=7)){o=s;break e}if(!(t>>>0<c>>>0)){o=0;break}t=t+1|0}else o=0}while(0);o=4==(0|o)&1}else o=0;if(0|Ce(n,u,o,0)){if(0|z(h))do{}while(0!=(0|Ce(n,u,0,0)));(0|u)!=(0|c)&&ue(l)}else(0|u)!=(0|c)&&(i[l>>2]=i[r>>2],i[l+4>>2]=i[r+4>>2],i[l+8>>2]=i[r+8>>2]);return P=a,0|(h=0)}function Xe(e,t,n){n|=0;var r,i,a=0;return i=P,P=P+16|0,0|(a=0|We(e|=0,t|=0,r=i))?(P=i,0|a):(a=0|Gt(0|e,0|t,52),M(),ke(r,15&a,n),P=i,0|(a=0))}function Ye(e,t,n){n|=0;var r,i=0,a=0,o=0;if(r=P,P=P+16|0,0|(i=0|We(e|=0,t|=0,o=r)))return P=r,0|(o=i);i=0|Gt(0|e,0|t,45),M(),i=0==(0|z(127&i)),a=0|Gt(0|e,0|t,52),M(),a&=15;e:do{if(!i){if(0|a)for(i=1;;){if(!(0==((0|qt(7,0,3*(15-i|0)|0))&e|0)&0==((0|M())&t|0)))break e;if(!(i>>>0<a>>>0))break;i=i+1|0}return Te(o,a,0,5,n),P=r,0|0}}while(0);return Be(o,a,0,6,n),P=r,0|0}function Qe(e,t){t|=0;var n=0,r=0,a=0,o=0,s=0,u=0,l=0;if((e|=0)>>>0>15)return 0|(u=4);if(qt(0|e,0,52),u=134225919|M(),!e){n=0,r=0;do{0|z(r)&&(qt(0|r,0,45),s=0|u|M(),i[(e=t+(n<<3)|0)>>2]=-1,i[e+4>>2]=s,n=n+1|0),r=r+1|0}while(122!=(0|r));return 0|(n=0)}n=0,s=0;do{if(0|z(s)){for(qt(0|s,0,45),r=1,a=-1,o=0|u|M();a&=~(l=0|qt(7,0,3*(15-r|0)|0)),o&=~(0|M()),(0|r)!=(0|e);)r=r+1|0;i[(l=t+(n<<3)|0)>>2]=a,i[l+4>>2]=o,n=n+1|0}s=s+1|0}while(122!=(0|s));return 0|(n=0)}function Je(e,t,n,r){e|=0,r|=0;var a=0,o=0;a=0|Gt(0|(t|=0),0|(n|=0),52),M(),0==(0|t)&0==(0|n)|(0|r)>15|(0|(a&=15))>(0|r)?(r=-1,a=-1,t=0,n=0):(o=0|function(e,t,n,r){return e|=0,t|=0,(0|(r|=0))<(0|(n|=0))?(r=e,S(0|(n=t)),0|r):(n=0|qt(-1,-1,3+(3*(r-n|0)|0)|0),r=0|qt(0|~n,0|~(0|M()),3*(15-r|0)|0),n=~(0|M())&t,r=~r&e,S(0|n),0|r)}(t,n,a+1|0,r),n=-15728641&(0|M()),t=0|qt(0|r,0,52),r=(o=0==(0|Oe(t|=o,n=0|n|M())))?-1:r),i[(o=e)>>2]=t,i[o+4>>2]=n,i[e+8>>2]=a,i[e+12>>2]=r}function Ke(e){var t,n=0,r=0,a=0,o=0,s=0,u=0,l=0,c=0;if(!(0==(0|(n=0|i[(r=e|=0)>>2]))&0==(0|(r=0|i[r+4>>2])))&&(a=0|Gt(0|n,0|r,52),M(),n=0|Pt(0|(l=0|qt(1,0,3*(15^(a&=15))|0)),0|M(),0|n,0|r),r=0|M(),i[(l=e)>>2]=n,i[l+4>>2]=r,!((0|a)<(0|(u=0|i[(l=e+8|0)>>2]))))){for(t=e+12|0,s=a;;){if((0|s)==(0|u)){a=5;break}if(c=(0|s)==(0|i[t>>2]),a=0|Gt(0|n,0|r,0|(o=3*(15-s|0)|0)),M(),c&1==(0|(a&=7))&!0){a=7;break}if(!(7==(0|a)&!0)){a=10;break}if(n=0|Pt(0|n,0|r,0|(c=0|qt(1,0,0|o)),0|M()),r=0|M(),i[(c=e)>>2]=n,i[c+4>>2]=r,!((0|s)>(0|u))){a=10;break}s=s+-1|0}if(5==(0|a))return i[(c=e)>>2]=0,i[c+4>>2]=0,i[l>>2]=-1,void(i[t>>2]=-1);if(7==(0|a))return u=0|Pt(0|n,0|r,0|(u=0|qt(1,0,0|o)),0|M()),l=0|M(),i[(c=e)>>2]=u,i[c+4>>2]=l,void(i[t>>2]=s+-1)}}function Ze(e){var t;return t=(e=+e)<0?e+6.283185307179586:e,+(e>=6.283185307179586?t+-6.283185307179586:t)}function $e(e,t){return t|=0,+l(+(+a[(e|=0)>>3]-+a[t>>3]))<17453292519943298e-27?0|(t=+l(+(+a[e+8>>3]-+a[t+8>>3]))<17453292519943298e-27):0|(t=0)}function et(e,t){e|=0;var n,r,i,o=0;return r=+a[(t|=0)>>3],n=+a[e>>3],o=(i=+f(.5*(r-n)))*i+(o=+f(.5*(+a[t+8>>3]-+a[e+8>>3])))*(+d(+r)*+d(+n)*o),2*+g(+ +c(+o),+ +c(+(1-o)))*6371.007180918475}function tt(e,t){t|=0;var n=0;return(e|=0)>>>0>15?0|(t=4):(n=0|Ot(0|(n=0|ht(7,0,e,((0|e)<0)<<31>>31)),0|M(),120,0),e=0|M(),i[t>>2]=2|n,i[t+4>>2]=e,0|(t=0))}function nt(e,t,n){e|=0,n|=0;var r,i,o,s,u=0,l=0,h=0,A=0,v=0,y=0;return y=+a[(t|=0)>>3],o=+a[e>>3],v=+f(.5*(y-o)),h=+a[t+8>>3],i=+a[e+8>>3],A=+f(.5*(h-i)),r=+d(+o),s=+d(+y),A=2*+g(+ +c(+(A=v*v+A*(s*r*A))),+ +c(+(1-A))),v=+a[n>>3],y=+f(.5*(v-y)),u=+a[n+8>>3],h=+f(.5*(u-h)),l=+d(+v),h=2*+g(+ +c(+(h=y*y+h*(s*l*h))),+ +c(+(1-h))),v=+f(.5*(o-v)),u=+f(.5*(i-u)),u=2*+g(+ +c(+(u=v*v+u*(r*l*u))),+ +c(+(1-u))),4*+m(+ +c(+ +p(.5*(l=.5*(A+h+u)))*+p(.5*(l-A))*+p(.5*(l-h))*+p(.5*(l-u))))}function rt(e,t,n){n|=0;var r,o,s,u=0,l=0;if(s=P,P=P+192|0,o=s,0|(l=0|Xe(e|=0,t|=0,r=s+168|0)))return P=s,0|(n=l);if(0|Ye(e,t,o)&&k(23313,22742,386,22751),(0|(t=0|i[o>>2]))>0){if(u=+nt(o+8|0,o+8+((1!=(0|t)&1)<<4)|0,r)+0,1!=(0|t)){e=1;do{u+=+nt(o+8+((l=e)<<4)|0,o+8+(((0|(e=e+1|0))%(0|t)|0)<<4)|0,r)}while((0|e)<(0|t))}}else u=0;return a[n>>3]=u,P=s,0|(n=0)}function it(e){e|=0;var t,n,r=0;return(t=0|Bt(1,12))||k(22832,22787,49,22845),0|(r=0|i[(n=e+4|0)>>2])?(i[(r=r+8|0)>>2]=t,i[n>>2]=t,0|t):(0|i[e>>2]&&k(22862,22787,61,22885),i[(r=e)>>2]=t,i[n>>2]=t,0|t)}function at(e,t){e|=0,t|=0;var n,r;return(r=0|Ct(24))||k(22899,22787,78,22913),i[r>>2]=i[t>>2],i[r+4>>2]=i[t+4>>2],i[r+8>>2]=i[t+8>>2],i[r+12>>2]=i[t+12>>2],i[r+16>>2]=0,0|(n=0|i[(t=e+4|0)>>2])?(i[n+16>>2]=r,i[t>>2]=r,0|r):(0|i[e>>2]&&k(22928,22787,82,22913),i[e>>2]=r,i[t>>2]=r,0|r)}function ot(e){var t=0,n=0,r=0,a=0;if(e|=0)for(r=1;;){if(0|(t=0|i[e>>2]))do{if(0|(n=0|i[t>>2]))do{a=n,n=0|i[n+16>>2],Rt(a)}while(0!=(0|n));a=t,t=0|i[t+8>>2],Rt(a)}while(0!=(0|t));if(t=e,e=0|i[e+8>>2],r||Rt(t),!e)break;r=0}}function st(e){var t,n,r=0,o=0,s=0,u=0,c=0,h=0,d=0,f=0,p=0,A=0,v=0,m=0,g=0,y=0,b=0,x=0,_=0,w=0,S=0,M=0,T=0,E=0,C=0,R=0,B=0,P=0,N=0,I=0,D=0,L=0;if(0|i[(u=(e|=0)+8|0)>>2])return 0|(L=1);if(!(s=0|i[e>>2]))return 0|(L=0);r=s,o=0;do{o=o+1|0,r=0|i[r+8>>2]}while(0!=(0|r));if(o>>>0<2)return 0|(L=0);(n=0|Ct(o<<2))||k(22948,22787,317,22967),(t=0|Ct(o<<5))||k(22989,22787,321,22967),i[e>>2]=0,i[(E=e+4|0)>>2]=0,i[u>>2]=0,o=0,I=0,T=0,v=0;e:for(;;){if(A=0|i[s>>2]){c=0,h=A;do{if(f=+a[h+8>>3],r=h,h=0|i[h+16>>2],d=+a[(u=(p=0==(0|h))?A:h)+8>>3],+l(+(f-d))>3.141592653589793){L=14;break}c+=(d-f)*(+a[r>>3]+ +a[u>>3])}while(!p);if(14==(0|L)){L=0,c=0,r=A;do{M=+a[r+8>>3],P=0|i[(N=r+16|0)>>2],S=+a[(P=0==(0|P)?A:P)+8>>3],c+=(+a[r>>3]+ +a[P>>3])*((S<0?S+6.283185307179586:S)-(M<0?M+6.283185307179586:M)),r=0|i[(0==(0|r)?s:N)>>2]}while(0!=(0|r))}c>0?(i[n+(I<<2)>>2]=s,I=I+1|0,u=T,r=v):L=19}else L=19;if(19==(0|L)){L=0;do{if(!o){if(v){u=E,h=v+8|0,r=s,o=e;break}if(0|i[e>>2]){L=27;break e}u=E,h=e,r=s,o=e;break}if(0|i[(r=o+8|0)>>2]){L=21;break e}if(!(o=0|Bt(1,12))){L=23;break e}i[r>>2]=o,u=o+4|0,h=o,r=v}while(0);if(i[h>>2]=s,i[u>>2]=s,h=t+(T<<5)|0,p=0|i[s>>2]){for(a[(A=t+(T<<5)+8|0)>>3]=17976931348623157e292,a[(v=t+(T<<5)+24|0)>>3]=17976931348623157e292,a[h>>3]=-17976931348623157e292,a[(m=t+(T<<5)+16|0)>>3]=-17976931348623157e292,_=17976931348623157e292,w=-17976931348623157e292,u=0,g=p,f=17976931348623157e292,b=17976931348623157e292,x=-17976931348623157e292,d=-17976931348623157e292;c=+a[g>>3],M=+a[g+8>>3],g=0|i[g+16>>2],S=+a[((y=0==(0|g))?p:g)+8>>3],c<f&&(a[A>>3]=c,f=c),M<b&&(a[v>>3]=M,b=M),c>x?a[h>>3]=c:c=x,M>d&&(a[m>>3]=M,d=M),_=M>0&M<_?M:_,w=M<0&M>w?M:w,u|=+l(+(M-S))>3.141592653589793,!y;)x=c;u&&(a[m>>3]=w,a[v>>3]=_)}else i[h>>2]=0,i[h+4>>2]=0,i[h+8>>2]=0,i[h+12>>2]=0,i[h+16>>2]=0,i[h+20>>2]=0,i[h+24>>2]=0,i[h+28>>2]=0;u=T+1|0}if(s=0|i[(N=s+8|0)>>2],i[N>>2]=0,!s){L=45;break}T=u,v=r}if(21==(0|L))k(22765,22787,35,22799);else if(23==(0|L))k(22819,22787,37,22799);else if(27==(0|L))k(22862,22787,61,22885);else if(45==(0|L)){e:do{if((0|I)>0){for(N=0==(0|u),B=u<<2,P=0==(0|e),R=0,r=0;;){if(C=0|i[n+(R<<2)>>2],N)L=73;else{if(!(T=0|Ct(B))){L=50;break}if(!(E=0|Ct(B))){L=52;break}t:do{if(P)o=0;else{for(u=0,o=0,h=e;s=t+(u<<5)|0,0|ut(0|i[h>>2],s,0|i[C>>2])?(i[T+(o<<2)>>2]=h,i[E+(o<<2)>>2]=s,y=o+1|0):y=o,h=0|i[h+8>>2];)u=u+1|0,o=y;if((0|y)>0)if(s=0|i[T>>2],1==(0|y))o=s;else for(m=0,g=-1,o=s,v=s;;){for(p=0|i[v>>2],s=0,h=0;A=(0|(u=0|i[i[T+(h<<2)>>2]>>2]))==(0|p)?s:s+(1&(0|ut(u,0|i[E+(h<<2)>>2],0|i[p>>2])))|0,(0|(h=h+1|0))!=(0|y);)s=A;if(o=(u=(0|A)>(0|g))?v:o,(0|(s=m+1|0))==(0|y))break t;m=s,g=u?A:g,v=0|i[T+(s<<2)>>2]}else o=0}}while(0);if(Rt(T),Rt(E),o){if(s=0|i[(u=o+4|0)>>2])o=s+8|0;else if(0|i[o>>2]){L=70;break}i[o>>2]=C,i[u>>2]=C}else L=73}if(73==(0|L)){if(L=0,0|(r=0|i[C>>2]))do{E=r,r=0|i[r+16>>2],Rt(E)}while(0!=(0|r));Rt(C),r=1}if((0|(R=R+1|0))>=(0|I)){D=r;break e}}50==(0|L)?k(23004,22787,249,23023):52==(0|L)?k(23042,22787,252,23023):70==(0|L)&&k(22862,22787,61,22885)}else D=0}while(0);return Rt(n),Rt(t),0|(L=D)}return 0}function ut(e,t,n){e|=0;var r=0,o=0,s=0,u=0,l=0,c=0,h=0,d=0;if(!(0|Y(t|=0,n|=0)))return 0|(e=0);if(t=0|X(t),r=+a[n>>3],o=t&(o=+a[n+8>>3])<0?o+6.283185307179586:o,!(e=0|i[e>>2]))return 0|(e=0);if(t){t=0,h=o,n=e;e:for(;;){for(;u=+a[n>>3],o=+a[n+8>>3],d=0|i[(n=n+16|0)>>2],s=+a[(d=0==(0|d)?e:d)>>3],l=+a[d+8>>3],u>s?(c=u,u=l):(c=s,s=u,u=o,o=l),(r=r==s|r==c?r+2220446049250313e-31:r)<s|r>c;)if(!(n=0|i[n>>2])){n=22;break e}if(((c=(l=u<0?u+6.283185307179586:u)+(r-s)/(c-s)*((u=o<0?o+6.283185307179586:o)-l))<0?c+6.283185307179586:c)>(h=l==h|u==h?h+-2220446049250313e-31:h)&&(t^=1),!(n=0|i[n>>2])){n=22;break}}if(22==(0|n))return 0|t}else{t=0,h=o,n=e;e:for(;;){for(;u=+a[n>>3],o=+a[n+8>>3],d=0|i[(n=n+16|0)>>2],s=+a[(d=0==(0|d)?e:d)>>3],l=+a[d+8>>3],u>s?(c=u,u=l):(c=s,s=u,u=o,o=l),(r=r==s|r==c?r+2220446049250313e-31:r)<s|r>c;)if(!(n=0|i[n>>2])){n=22;break e}if(u+(r-s)/(c-s)*(o-u)>(h=u==h|o==h?h+-2220446049250313e-31:h)&&(t^=1),!(n=0|i[n>>2])){n=22;break}}if(22==(0|n))return 0|t}return 0}function lt(e,t,n,a,o){n|=0,a|=0,o|=0;var s,u,l,c,h=0,d=0,f=0,p=0,A=0,v=0,m=0,g=0,y=0,b=0;if(c=P,P=P+32|0,b=c+16|0,l=c,h=0|Gt(0|(e|=0),0|(t|=0),52),M(),h&=15,m=0|Gt(0|n,0|a,52),M(),(0|h)!=(15&m|0))return P=c,0|(b=12);if(A=0|Gt(0|e,0|t,45),M(),A&=127,v=0|Gt(0|n,0|a,45),M(),A>>>0>121|(v&=127)>>>0>121)return P=c,0|(b=5);if(m=(0|A)!=(0|v)){if(7==(0|(f=0|W(A,v))))return P=c,0|(b=1);7==(0|(p=0|W(v,A)))?k(23066,23090,161,23100):(g=f,d=p)}else g=0,d=0;s=0|z(A),u=0|z(v),i[b>>2]=0,i[b+4>>2]=0,i[b+8>>2]=0,i[b+12>>2]=0;do{if(g){if(f=(0|(v=0|i[4272+(28*A|0)+(g<<2)>>2]))>0,u)if(f){A=0,p=n,f=a;do{p=0|Ge(p,f),f=0|M(),1==(0|(d=0|Ae(d)))&&(d=0|Ae(1)),A=A+1|0}while((0|A)!=(0|v));v=d,A=p,p=f}else v=d,A=n,p=a;else if(f){A=0,p=n,f=a;do{p=0|qe(p,f),f=0|M(),d=0|Ae(d),A=A+1|0}while((0|A)!=(0|v));v=d,A=p,p=f}else v=d,A=n,p=a;if(je(A,p,b),m||k(23115,23090,191,23100),(f=0!=(0|s))&(d=0!=(0|u))&&k(23142,23090,192,23100),f){if(7==(0|(d=0|Fe(e,t)))){h=5;break}if(0|r[21872+(7*d|0)+g>>0]){h=1;break}A=p=0|i[21040+(28*d|0)+(g<<2)>>2]}else if(d){if(7==(0|(d=0|Fe(A,p)))){h=5;break}if(0|r[21872+(7*d|0)+v>>0]){h=1;break}A=0,p=0|i[21040+(28*v|0)+(d<<2)>>2]}else A=0,p=0;if((A|p|0)<0)h=5;else{if((0|p)>0){f=b+4|0,d=0;do{fe(f),d=d+1|0}while((0|d)!=(0|p))}if(i[l>>2]=0,i[l+4>>2]=0,i[l+8>>2]=0,he(l,g),0|h)for(;0|He(h)?le(l):ce(l),(0|h)>1;)h=h+-1|0;if((0|A)>0){h=0;do{fe(l),h=h+1|0}while((0|h)!=(0|A))}te(y=b+4|0,l,y),$(y),y=51}}else if(je(n,a,b),0!=(0|s)&0!=(0|u))if((0|v)!=(0|A)&&k(23173,23090,261,23100),7==(0|(d=0|Fe(e,t)))|7==(0|(h=0|Fe(n,a))))h=5;else if(0|r[21872+(7*d|0)+h>>0])h=1;else if((0|(d=0|i[21040+(28*d|0)+(h<<2)>>2]))>0){f=b+4|0,h=0;do{fe(f),h=h+1|0}while((0|h)!=(0|d));y=51}else y=51;else y=51}while(0);return 51==(0|y)&&(h=b+4|0,i[o>>2]=i[h>>2],i[o+4>>2]=i[h+4>>2],i[o+8>>2]=i[h+8>>2],h=0),P=c,0|(b=h)}function ct(e,t,n,r){n|=0,r|=0;var a,o,s,u=0,l=0,c=0,h=0,d=0,f=0,p=0,A=0,v=0,m=0,g=0,y=0,b=0;if(s=P,P=P+48|0,a=s+36|0,c=s+24|0,h=s+12|0,d=s,u=0|Gt(0|(e|=0),0|(t|=0),52),M(),u&=15,p=0|Gt(0|e,0|t,45),M(),(p&=127)>>>0>121)return P=s,0|(r=5);if(o=0|z(p),qt(0|u,0,52),m=134225919|M(),i[(l=r)>>2]=-1,i[l+4>>2]=m,!u)return 7==(0|(u=0|ie(n)))||127==(0|(u=0|j(p,u)))?(P=s,0|(m=1)):(A=0|qt(0|u,0,45),v=0|M(),v=-1040385&i[(p=r)+4>>2]|v,i[(m=r)>>2]=i[p>>2]|A,i[m+4>>2]=v,P=s,0|(m=0));for(i[a>>2]=i[n>>2],i[a+4>>2]=i[n+4>>2],i[a+8>>2]=i[n+8>>2],n=u;;){if(l=n,n=n+-1|0,i[c>>2]=i[a>>2],i[c+4>>2]=i[a+4>>2],i[c+8>>2]=i[a+8>>2],0|He(l)){if(0|(u=0|ae(a))){n=13;break}i[h>>2]=i[a>>2],i[h+4>>2]=i[a+4>>2],i[h+8>>2]=i[a+8>>2],le(h)}else{if(0|(u=0|oe(a))){n=13;break}i[h>>2]=i[a>>2],i[h+4>>2]=i[a+4>>2],i[h+8>>2]=i[a+8>>2],ce(h)}if(ne(c,h,d),$(d),y=0|i[(u=r)>>2],u=0|i[u+4>>2],g=0|qt(7,0,0|(b=3*(15-l|0)|0)),u&=~(0|M()),b=0|qt(0|ie(d),0,0|b),u=0|M()|u,i[(m=r)>>2]=b|y&~g,i[m+4>>2]=u,(0|l)<=1){n=14;break}}e:do{if(13!=(0|n)&&14==(0|n))if((0|i[a>>2])<=1&&(0|i[a+4>>2])<=1&&(0|i[a+8>>2])<=1){d=127==(0|(u=0|j(p,n=0|ie(a))))?0:0|z(u);t:do{if(n){if(o){if(7==(0|(u=0|Fe(e,t)))){u=5;break e}if((0|(l=0|i[21248+(28*u|0)+(n<<2)>>2]))>0){u=n,n=0;do{u=0|pe(u),n=n+1|0}while((0|n)!=(0|l))}else u=n;if(1==(0|u)){u=9;break e}127==(0|(n=0|j(p,u)))&&k(23200,23090,411,23230),0|z(n)?k(23245,23090,412,23230):(v=n,A=l,f=u)}else v=u,A=0,f=n;if((0|(h=0|i[4272+(28*p|0)+(f<<2)>>2]))<=-1&&k(23276,23090,419,23230),!d){if((0|A)<0){u=5;break e}if(0|A){u=0,n=0|i[(l=r)>>2],l=0|i[l+4>>2];do{n=0|ze(n,l),l=0|M(),i[(b=r)>>2]=n,i[b+4>>2]=l,u=u+1|0}while((0|u)<(0|A))}if((0|h)<=0){u=v,n=58;break}for(u=0,n=0|i[(l=r)>>2],l=0|i[l+4>>2];;)if(n=0|ze(n,l),l=0|M(),i[(b=r)>>2]=n,i[b+4>>2]=l,(0|(u=u+1|0))==(0|h)){u=v,n=58;break t}}if(7==(0|(c=0|W(v,p)))&&k(23066,23090,428,23230),n=0|i[(u=r)>>2],u=0|i[u+4>>2],(0|h)>0){l=0;do{n=0|ze(n,u),u=0|M(),i[(b=r)>>2]=n,i[b+4>>2]=u,l=l+1|0}while((0|l)!=(0|h))}if(7==(0|(u=0|Fe(n,u)))&&k(23313,23090,440,23230),n=0|G(v),(0|(n=0|i[(n?21664:21456)+(28*c|0)+(u<<2)>>2]))<0&&k(23313,23090,454,23230),n){u=0,l=0|i[(c=r)>>2],c=0|i[c+4>>2];do{l=0|Ue(l,c),c=0|M(),i[(b=r)>>2]=l,i[b+4>>2]=c,u=u+1|0}while((0|u)<(0|n));u=v,n=58}else u=v,n=58}else if(0!=(0|o)&0!=(0|d)){if(7==(0|(n=0|Fe(e,t)))|7==(0|(l=0|Fe(0|i[(l=r)>>2],0|i[l+4>>2])))){u=5;break e}if((0|(l=0|i[21248+(28*n|0)+(l<<2)>>2]))<0){u=5;break e}if(l){n=0,c=0|i[(h=r)>>2],h=0|i[h+4>>2];do{c=0|ze(c,h),h=0|M(),i[(b=r)>>2]=c,i[b+4>>2]=h,n=n+1|0}while((0|n)<(0|l));n=58}else n=59}else n=58}while(0);if(58==(0|n)&&d&&(n=59),59==(0|n)&&1==(0|Fe(0|i[(b=r)>>2],0|i[b+4>>2]))){u=9;break}g=0|i[(b=r)>>2],b=-1040385&i[b+4>>2],y=0|qt(0|u,0,45),b=0|b|M(),i[(u=r)>>2]=g|y,i[u+4>>2]=b,u=0}else u=1}while(0);return P=s,0|(b=u)}function ht(e,t,n,r){e|=0,t|=0;var i=0,a=0,o=0;if(0==(0|(n|=0))&0==(0|(r|=0)))return a=1,S(0|(i=0)),0|a;a=e,i=t,e=1,t=0;do{e=0|Ot(0|((o=0==(1&n|0)&!0)?1:a),0|(o?0:i),0|e,0|t),t=0|M(),n=0|zt(0|n,0|r,1),r=0|M(),a=0|Ot(0|a,0|i,0|a,0|i),i=0|M()}while(!(0==(0|n)&0==(0|r)));return S(0|t),0|e}function dt(e,t,n){e|=0;var r,o=0,s=0,u=0,l=0,c=0,h=0,d=0,f=0,p=0;if(!(0|Y(t|=0,n|=0)))return 0|(p=0);if(t=0|X(t),o=+a[n>>3],s=t&(s=+a[n+8>>3])<0?s+6.283185307179586:s,(0|(p=0|i[e>>2]))<=0)return 0|(p=0);if(r=0|i[e+4>>2],t){t=0,f=s,n=-1,e=0;e:for(;;){for(d=e;l=+a[r+(d<<4)>>3],s=+a[r+(d<<4)+8>>3],u=+a[r+((e=(n+2|0)%(0|p)|0)<<4)>>3],c=+a[r+(e<<4)+8>>3],l>u?(h=l,l=c):(h=u,u=l,l=s,s=c),(o=o==u|o==h?o+2220446049250313e-31:o)<u|o>h;){if((0|(n=d+1|0))>=(0|p)){n=22;break e}e=d,d=n,n=e}if(((h=(c=l<0?l+6.283185307179586:l)+(o-u)/(h-u)*((l=s<0?s+6.283185307179586:s)-c))<0?h+6.283185307179586:h)>(f=c==f|l==f?f+-2220446049250313e-31:f)&&(t^=1),(0|(e=d+1|0))>=(0|p)){n=22;break}n=d}if(22==(0|n))return 0|t}else{t=0,f=s,n=-1,e=0;e:for(;;){for(d=e;l=+a[r+(d<<4)>>3],s=+a[r+(d<<4)+8>>3],u=+a[r+((e=(n+2|0)%(0|p)|0)<<4)>>3],c=+a[r+(e<<4)+8>>3],l>u?(h=l,l=c):(h=u,u=l,l=s,s=c),(o=o==u|o==h?o+2220446049250313e-31:o)<u|o>h;){if((0|(n=d+1|0))>=(0|p)){n=22;break e}e=d,d=n,n=e}if(l+(o-u)/(h-u)*(s-l)>(f=l==f|s==f?f+-2220446049250313e-31:f)&&(t^=1),(0|(e=d+1|0))>=(0|p)){n=22;break}n=d}if(22==(0|n))return 0|t}return 0}function ft(e,t){t|=0;var n,r,o,s,u,c=0,h=0,d=0,f=0,p=0,A=0,v=0,m=0,g=0,y=0,b=0,x=0;if(!(r=0|i[(e|=0)>>2]))return i[t>>2]=0,i[t+4>>2]=0,i[t+8>>2]=0,i[t+12>>2]=0,i[t+16>>2]=0,i[t+20>>2]=0,i[t+24>>2]=0,void(i[t+28>>2]=0);if(a[(o=t+8|0)>>3]=17976931348623157e292,a[(s=t+24|0)>>3]=17976931348623157e292,a[t>>3]=-17976931348623157e292,a[(u=t+16|0)>>3]=-17976931348623157e292,!((0|r)<=0)){for(n=0|i[e+4>>2],m=17976931348623157e292,g=-17976931348623157e292,y=0,e=-1,f=17976931348623157e292,p=17976931348623157e292,v=-17976931348623157e292,h=-17976931348623157e292,b=0;c=+a[n+(b<<4)>>3],A=+a[n+(b<<4)+8>>3],d=+a[n+(((0|(e=e+2|0))==(0|r)?0:e)<<4)+8>>3],c<f&&(a[o>>3]=c,f=c),A<p&&(a[s>>3]=A,p=A),c>v?a[t>>3]=c:c=v,A>h&&(a[u>>3]=A,h=A),m=A>0&A<m?A:m,g=A<0&A>g?A:g,y|=+l(+(A-d))>3.141592653589793,(0|(e=b+1|0))!=(0|r);)x=b,v=c,b=e,e=x;y&&(a[u>>3]=g,a[s>>3]=m)}}function pt(e,t){t|=0;var n,r=0,o=0,s=0,u=0,c=0,h=0,d=0,f=0,p=0,A=0,v=0,m=0,g=0,y=0,b=0,x=0,_=0,w=0,S=0,M=0,k=0;if(g=0|i[(e|=0)>>2]){if(a[(y=t+8|0)>>3]=17976931348623157e292,a[(b=t+24|0)>>3]=17976931348623157e292,a[t>>3]=-17976931348623157e292,a[(x=t+16|0)>>3]=-17976931348623157e292,(0|g)>0){for(s=0|i[e+4>>2],v=17976931348623157e292,m=-17976931348623157e292,o=0,r=-1,d=17976931348623157e292,f=17976931348623157e292,A=-17976931348623157e292,c=-17976931348623157e292,_=0;u=+a[s+(_<<4)>>3],p=+a[s+(_<<4)+8>>3],h=+a[s+(((0|(M=r+2|0))==(0|g)?0:M)<<4)+8>>3],u<d&&(a[y>>3]=u,d=u),p<f&&(a[b>>3]=p,f=p),u>A?a[t>>3]=u:u=A,p>c&&(a[x>>3]=p,c=p),v=p>0&p<v?p:v,m=p<0&p>m?p:m,o|=+l(+(p-h))>3.141592653589793,(0|(r=_+1|0))!=(0|g);)M=_,A=u,_=r,r=M;o&&(a[x>>3]=m,a[b>>3]=v)}}else i[t>>2]=0,i[t+4>>2]=0,i[t+8>>2]=0,i[t+12>>2]=0,i[t+16>>2]=0,i[t+20>>2]=0,i[t+24>>2]=0,i[t+28>>2]=0;if(!((0|(r=0|i[(M=e+8|0)>>2]))<=0)){n=e+12|0,S=0;do{if(s=0|i[n>>2],o=S,b=t+((S=S+1|0)<<5)|0,x=0|i[s+(o<<3)>>2]){if(a[(_=t+(S<<5)+8|0)>>3]=17976931348623157e292,a[(e=t+(S<<5)+24|0)>>3]=17976931348623157e292,a[b>>3]=-17976931348623157e292,a[(w=t+(S<<5)+16|0)>>3]=-17976931348623157e292,(0|x)>0){for(g=0|i[s+(o<<3)+4>>2],v=17976931348623157e292,m=-17976931348623157e292,s=0,o=-1,y=0,d=17976931348623157e292,f=17976931348623157e292,p=-17976931348623157e292,c=-17976931348623157e292;u=+a[g+(y<<4)>>3],A=+a[g+(y<<4)+8>>3],h=+a[g+(((0|(o=o+2|0))==(0|x)?0:o)<<4)+8>>3],u<d&&(a[_>>3]=u,d=u),A<f&&(a[e>>3]=A,f=A),u>p?a[b>>3]=u:u=p,A>c&&(a[w>>3]=A,c=A),v=A>0&A<v?A:v,m=A<0&A>m?A:m,s|=+l(+(A-h))>3.141592653589793,(0|(o=y+1|0))!=(0|x);)k=y,y=o,p=u,o=k;s&&(a[w>>3]=m,a[e>>3]=v)}}else i[b>>2]=0,i[b+4>>2]=0,i[b+8>>2]=0,i[b+12>>2]=0,i[b+16>>2]=0,i[b+20>>2]=0,i[b+24>>2]=0,i[b+28>>2]=0,r=0|i[M>>2]}while((0|S)<(0|r))}}function At(e,t,n){var r=0,a=0,o=0;if(!(0|dt(e|=0,t|=0,n|=0)))return 0|(a=0);if((0|i[(a=e+8|0)>>2])<=0)return 0|(a=1);for(r=e+12|0,e=0;;){if(o=e,e=e+1|0,0|dt((0|i[r>>2])+(o<<3)|0,t+(e<<5)|0,n)){e=0,r=6;break}if((0|e)>=(0|i[a>>2])){e=1,r=6;break}}return 6==(0|r)?0|e:0}function vt(e,t,n,r,i){t|=0,n|=0,r|=0,i|=0;var o,s,u,l,c,h,d,f=0;l=+a[(e|=0)>>3],u=+a[t>>3]-l,s=+a[e+8>>3],o=+a[t+8>>3]-s,h=+a[n>>3],f=((f=+a[r>>3]-h)*(s-(d=+a[n+8>>3]))-(l-h)*(c=+a[r+8>>3]-d))/(u*c-o*f),a[i>>3]=l+u*f,a[i+8>>3]=s+o*f}function mt(e,t){return t|=0,+l(+(+a[(e|=0)>>3]-+a[t>>3]))<1.1920928955078125e-7?0|(t=+l(+(+a[e+8>>3]-+a[t+8>>3]))<1.1920928955078125e-7):0|(t=0)}function gt(e,t){t|=0;var n,r,i;return+((i=+a[(e|=0)>>3]-+a[t>>3])*i+(r=+a[e+8>>3]-+a[t+8>>3])*r+(n=+a[e+16>>3]-+a[t+16>>3])*n)}function yt(e,t,n){n|=0;var r,a,o,s,u=0,l=0,c=0;if(s=P,P=P+32|0,c=s,0|(u=0|We(e|=0,t|=0,a=s+16|0)))return P=s,0|(n=u);r=0|Ne(e,t),o=0|Fe(e,t),function(e,t){e=7696+(28*(e|=0)|0)|0,i[(t|=0)>>2]=i[e>>2],i[t+4>>2]=i[e+4>>2],i[t+8>>2]=i[e+8>>2],i[t+12>>2]=i[e+12>>2]}(r,c),u=0|function(e,t){e|=0;var n=0,r=0;if((t|=0)>>>0>20)return-1;do{if((0|i[11120+(216*t|0)>>2])!=(0|e))if((0|i[11120+(216*t|0)+8>>2])!=(0|e))if((0|i[11120+(216*t|0)+16>>2])!=(0|e))if((0|i[11120+(216*t|0)+24>>2])!=(0|e))if((0|i[11120+(216*t|0)+32>>2])!=(0|e))if((0|i[11120+(216*t|0)+40>>2])!=(0|e))if((0|i[11120+(216*t|0)+48>>2])!=(0|e))if((0|i[11120+(216*t|0)+56>>2])!=(0|e))if((0|i[11120+(216*t|0)+64>>2])!=(0|e))if((0|i[11120+(216*t|0)+72>>2])!=(0|e))if((0|i[11120+(216*t|0)+80>>2])!=(0|e))if((0|i[11120+(216*t|0)+88>>2])!=(0|e))if((0|i[11120+(216*t|0)+96>>2])!=(0|e))if((0|i[11120+(216*t|0)+104>>2])!=(0|e))if((0|i[11120+(216*t|0)+112>>2])!=(0|e))if((0|i[11120+(216*t|0)+120>>2])!=(0|e))if((0|i[11120+(216*t|0)+128>>2])!=(0|e)){if((0|i[11120+(216*t|0)+136>>2])!=(0|e)){if((0|i[11120+(216*t|0)+144>>2])==(0|e)){e=0,n=2,r=0;break}if((0|i[11120+(216*t|0)+152>>2])==(0|e)){e=0,n=2,r=1;break}if((0|i[11120+(216*t|0)+160>>2])==(0|e)){e=0,n=2,r=2;break}if((0|i[11120+(216*t|0)+168>>2])==(0|e)){e=1,n=2,r=0;break}if((0|i[11120+(216*t|0)+176>>2])==(0|e)){e=1,n=2,r=1;break}if((0|i[11120+(216*t|0)+184>>2])==(0|e)){e=1,n=2,r=2;break}if((0|i[11120+(216*t|0)+192>>2])==(0|e)){e=2,n=2,r=0;break}if((0|i[11120+(216*t|0)+200>>2])==(0|e)){e=2,n=2,r=1;break}if((0|i[11120+(216*t|0)+208>>2])==(0|e)){e=2,n=2,r=2;break}return-1}e=2,n=1,r=2}else e=2,n=1,r=1;else e=2,n=1,r=0;else e=1,n=1,r=2;else e=1,n=1,r=1;else e=1,n=1,r=0;else e=0,n=1,r=2;else e=0,n=1,r=1;else e=0,n=1,r=0;else e=2,n=0,r=2;else e=2,n=0,r=1;else e=2,n=0,r=0;else e=1,n=0,r=2;else e=1,n=0,r=1;else e=1,n=0,r=0;else e=0,n=0,r=2;else e=0,n=0,r=1;else e=0,n=0,r=0}while(0);return 0|i[11120+(216*t|0)+(72*n|0)+(24*e|0)+(r<<3)+4>>2]}(r,0|i[a>>2]);e:do{if(0|z(r)){switch(0|r){case 4:e=0;break;case 14:e=1;break;case 24:e=2;break;case 38:e=3;break;case 49:e=4;break;case 58:e=5;break;case 63:e=6;break;case 72:e=7;break;case 83:e=8;break;case 97:e=9;break;case 107:e=10;break;case 117:e=11;break;default:u=1;break e}if(l=0|i[22e3+(24*e|0)+8>>2],t=0|i[22e3+(24*e|0)+16>>2],(0|(e=0|i[a>>2]))!=(0|i[c>>2])&&(c=0|G(r))|(0|(e=0|i[a>>2]))==(0|t)&&(u=(u+1|0)%6|0),3==(0|o)&(0|e)==(0|t)){u=(u+5|0)%6|0,l=22;break}5==(0|o)&(0|e)==(0|l)?(u=(u+1|0)%6|0,l=22):l=22}else l=22}while(0);return 22==(0|l)&&(i[n>>2]=u,u=0),P=s,0|(n=u)}function bt(e,t,n,r){n|=0,r|=0;var a,o,s,u,l,c=0,h=0,d=0,f=0,p=0,A=0,v=0,m=0,g=0,y=0,b=0;if(l=P,P=P+32|0,b=l+24|0,u=l+20|0,s=l+8|0,o=l+16|0,a=l,p=(p=0==(0|Oe(e|=0,t|=0)))?6:5,v=0|Gt(0|e,0|t,52),M(),p>>>0<=n>>>0)return P=l,0|(r=2);!(m=0==(0|(v&=15)))&&0==((g=0|qt(7,0,3*(15^v)|0))&e|0)&0==((0|M())&t|0)?c=n:h=4;e:do{if(4==(0|h)){if((0|((c=0!=(0|Oe(e,t)))?4:5))<(0|n))return P=l,0|(r=1);if(0|yt(e,t,b))return P=l,0|(r=1);if(h=(0|i[b>>2])+n|0,7==(0|(g=0|i[(c=c?22288+(((0|h)%5|0)<<2)|0:22320+(((0|h)%6|0)<<2)|0)>>2])))return P=l,0|(r=1);i[u>>2]=0,c=0|O(e,t,g,u,s);do{if(!c){if(A=0|i[(f=s)>>2],h=(d=(f=0|i[f+4>>2])>>>0<t>>>0|(0|f)==(0|t)&A>>>0<e>>>0)?A:e,d=d?f:t,!m&&0==(A&(m=0|qt(7,0,3*(15^v)|0))|0)&0==(f&(0|M())|0))c=n;else{if(f=(n+-1+p|0)%(0|p)|0,c=0|Oe(e,t),(0|f)<0&&k(23313,23315,245,23324),(0|((p=0!=(0|c))?4:5))<(0|f)&&k(23313,23315,245,23324),0|yt(e,t,b)&&k(23313,23315,245,23324),c=(0|i[b>>2])+f|0,7==(0|(f=0|i[(c=p?22288+(((0|c)%5|0)<<2)|0:22320+(((0|c)%6|0)<<2)|0)>>2]))&&k(23313,23315,245,23324),i[o>>2]=0,0|(c=0|O(e,t,f,o,a)))break;p=0|i[(A=a)>>2],A=0|i[A+4>>2];do{if(A>>>0<d>>>0|(0|A)==(0|d)&p>>>0<h>>>0){if(h=0|Oe(p,A)?0|F(p,A,e,t):0|i[22384+((((0|i[o>>2])+(0|i[22352+(f<<2)>>2])|0)%6|0)<<2)>>2],c=0|Oe(p,A),(h+-1|0)>>>0>5){c=-1,h=p,d=A;break}if(1==(0|h)&(c=0!=(0|c))){c=-1,h=p,d=A;break}do{if(!(0|yt(p,A,b))){if(c){c=(5+(0|i[21936+(h<<2)>>2])-(0|i[b>>2])|0)%5|0;break}c=(6+(0|i[21968+(h<<2)>>2])-(0|i[b>>2])|0)%6|0;break}c=-1}while(0);h=p,d=A}else c=n}while(0);A=0|i[(f=s)>>2],f=0|i[f+4>>2]}if((0|h)==(0|A)&(0|d)==(0|f)){if(e=(p=0!=(0|Oe(A,f)))?0|F(A,f,e,t):0|i[22384+((((0|i[u>>2])+(0|i[22352+(g<<2)>>2])|0)%6|0)<<2)>>2],c=0|Oe(A,f),(e+-1|0)>>>0<=5&&!(1==(0|e)&(y=0!=(0|c))))do{if(!(0|yt(A,f,b))){if(y){c=(5+(0|i[21936+(e<<2)>>2])-(0|i[b>>2])|0)%5|0;break}c=(6+(0|i[21968+(e<<2)>>2])-(0|i[b>>2])|0)%6|0;break}c=-1}while(0);else c=-1;c=6==(0|(c=c+1|0))|p&5==(0|c)?0:c}t=d,e=h;break e}}while(0);return P=l,0|(r=c)}}while(0);return y=0|qt(0|c,0,56),b=0|M()|-2130706433&t|536870912,i[r>>2]=y|e,i[r+4>>2]=b,P=l,0|(r=0)}function xt(e,t,n){e|=0,n|=0;var r=0;(0|(t|=0))>0?(r=0|Bt(t,4),i[e>>2]=r,r||k(23337,23360,40,23374)):i[e>>2]=0,i[e+4>>2]=t,i[e+8>>2]=0,i[e+12>>2]=n}function _t(e){var t,n,r,o=0,s=0,u=0,c=0;t=(e|=0)+4|0,n=e+12|0,r=e+8|0;e:for(;;){for(s=0|i[t>>2],o=0;;){if((0|o)>=(0|s))break e;if(u=0|i[e>>2],c=0|i[u+(o<<2)>>2])break;o=o+1|0}o=u+(~~(+l(+ +h(10,+ +(15-(0|i[n>>2])|0))*(+a[c>>3]+ +a[c+8>>3]))%+(0|s))>>>0<<2)|0,s=0|i[o>>2];t:do{if(0|s){if(u=c+32|0,(0|s)==(0|c))i[o>>2]=i[u>>2];else{if(!(o=0|i[(s=s+32|0)>>2]))break;for(;(0|o)!=(0|c);)if(!(o=0|i[(s=o+32|0)>>2]))break t;i[s>>2]=i[u>>2]}Rt(c),i[r>>2]=(0|i[r>>2])-1}}while(0)}Rt(0|i[e>>2])}function wt(e){var t,n=0,r=0;for(t=0|i[(e|=0)+4>>2],r=0;;){if((0|r)>=(0|t)){n=0,r=4;break}if(n=0|i[(0|i[e>>2])+(r<<2)>>2]){r=4;break}r=r+1|0}return 4==(0|r)?0|n:0}function St(e,t){t|=0;var n=0,r=0,o=0,s=0;if(n=~~(+l(+ +h(10,+ +(15-(0|i[(e|=0)+12>>2])|0))*(+a[t>>3]+ +a[t+8>>3]))%+(0|i[e+4>>2]))>>>0,n=(0|i[e>>2])+(n<<2)|0,!(r=0|i[n>>2]))return 0|(s=1);s=t+32|0;do{if((0|r)!=(0|t)){if(!(n=0|i[r+32>>2]))return 0|(s=1);for(o=n;;){if((0|o)==(0|t)){o=8;break}if(!(n=0|i[o+32>>2])){n=1,o=10;break}r=o,o=n}if(8==(0|o)){i[r+32>>2]=i[s>>2];break}if(10==(0|o))return 0|n}else i[n>>2]=i[s>>2]}while(0);return Rt(t),i[(s=e+8|0)>>2]=(0|i[s>>2])-1,0|(s=0)}function Mt(e,t,n){e|=0,t|=0,n|=0;var r,o=0,s=0,u=0;(r=0|Ct(40))||k(23390,23360,98,23403),i[r>>2]=i[t>>2],i[r+4>>2]=i[t+4>>2],i[r+8>>2]=i[t+8>>2],i[r+12>>2]=i[t+12>>2],i[(s=r+16|0)>>2]=i[n>>2],i[s+4>>2]=i[n+4>>2],i[s+8>>2]=i[n+8>>2],i[s+12>>2]=i[n+12>>2],i[r+32>>2]=0,s=~~(+l(+ +h(10,+ +(15-(0|i[e+12>>2])|0))*(+a[t>>3]+ +a[t+8>>3]))%+(0|i[e+4>>2]))>>>0,s=(0|i[e>>2])+(s<<2)|0,o=0|i[s>>2];do{if(o){for(;!(0|$e(o,t)&&0|$e(o+16|0,n));)if(s=0|i[o+32>>2],!(0|i[(o=0==(0|s)?o:s)+32>>2])){u=10;break}if(10==(0|u)){i[o+32>>2]=r;break}return Rt(r),0|(u=o)}i[s>>2]=r}while(0);return i[(u=e+8|0)>>2]=1+(0|i[u>>2]),0|(u=r)}function kt(e,t,n){t|=0,n|=0;var r=0,o=0;if(o=~~(+l(+ +h(10,+ +(15-(0|i[(e|=0)+12>>2])|0))*(+a[t>>3]+ +a[t+8>>3]))%+(0|i[e+4>>2]))>>>0,!(o=0|i[(0|i[e>>2])+(o<<2)>>2]))return 0|(n=0);if(!n){for(e=o;;){if(0|$e(e,t)){r=10;break}if(!(e=0|i[e+32>>2])){e=0,r=10;break}}if(10==(0|r))return 0|e}for(e=o;;){if(0|$e(e,t)&&0|$e(e+16|0,n)){r=10;break}if(!(e=0|i[e+32>>2])){e=0,r=10;break}}return 10==(0|r)?0|e:0}function Tt(e,t){t|=0;var n=0;if(n=~~(+l(+ +h(10,+ +(15-(0|i[(e|=0)+12>>2])|0))*(+a[t>>3]+ +a[t+8>>3]))%+(0|i[e+4>>2]))>>>0,!(e=0|i[(0|i[e>>2])+(n<<2)>>2]))return 0|(n=0);for(;;){if(0|$e(e,t)){t=5;break}if(!(e=0|i[e+32>>2])){e=0,t=5;break}}return 5==(0|t)?0|e:0}function Et(e){return 0|~~+function(e){return+ +Yt(+(e=+e))}(e=+e)}function Ct(e){e|=0;var t,n=0,r=0,a=0,o=0,s=0,u=0,l=0,c=0,h=0,d=0,f=0,p=0,A=0,v=0,m=0,g=0,y=0,b=0,x=0,_=0;t=P,P=P+16|0,p=t;do{if(e>>>0<245){if(e=(h=e>>>0<11?16:e+11&-8)>>>3,3&(r=(f=0|i[5857])>>>e)|0)return a=0|i[(r=(e=23468+((n=(1&r^1)+e|0)<<1<<2)|0)+8|0)>>2],(0|(s=0|i[(o=a+8|0)>>2]))==(0|e)?i[5857]=f&~(1<<n):(i[s+12>>2]=e,i[r>>2]=s),_=n<<3,i[a+4>>2]=3|_,i[(_=a+_+4|0)>>2]=1|i[_>>2],P=t,0|(_=o);if(h>>>0>(d=0|i[5859])>>>0){if(0|r)return n=((n=r<<e&((n=2<<e)|0-n))&0-n)-1|0,s=0|i[(e=(n=23468+((a=((r=(n>>>=l=n>>>12&16)>>>5&8)|l|(s=(n>>>=r)>>>2&4)|(e=(n>>>=s)>>>1&2)|(a=(n>>>=e)>>>1&1))+(n>>>a)|0)<<1<<2)|0)+8|0)>>2],(0|(r=0|i[(l=s+8|0)>>2]))==(0|n)?(e=f&~(1<<a),i[5857]=e):(i[r+12>>2]=n,i[e>>2]=r,e=f),u=(_=a<<3)-h|0,i[s+4>>2]=3|h,i[(o=s+h|0)+4>>2]=1|u,i[s+_>>2]=u,0|d&&(a=0|i[5862],r=23468+((n=d>>>3)<<1<<2)|0,e&(n=1<<n)?n=0|i[(e=r+8|0)>>2]:(i[5857]=e|n,n=r,e=r+8|0),i[e>>2]=a,i[n+12>>2]=a,i[a+8>>2]=n,i[a+12>>2]=r),i[5859]=u,i[5862]=o,P=t,0|(_=l);if(s=0|i[5858]){for(r=(s&0-s)-1|0,r=c=0|i[23732+(((a=(r>>>=o=r>>>12&16)>>>5&8)|o|(u=(r>>>=a)>>>2&4)|(l=(r>>>=u)>>>1&2)|(c=(r>>>=l)>>>1&1))+(r>>>c)<<2)>>2],l=c,c=(-8&i[c+4>>2])-h|0;(e=0|i[r+16>>2])||(e=0|i[r+20>>2]);)r=e,l=(o=(u=(-8&i[e+4>>2])-h|0)>>>0<c>>>0)?e:l,c=o?u:c;if((u=l+h|0)>>>0>l>>>0){o=0|i[l+24>>2],n=0|i[l+12>>2];do{if((0|n)==(0|l)){if(!(n=0|i[(e=l+20|0)>>2])&&!(n=0|i[(e=l+16|0)>>2])){r=0;break}for(;;)if(r=0|i[(a=n+20|0)>>2])n=r,e=a;else{if(!(r=0|i[(a=n+16|0)>>2]))break;n=r,e=a}i[e>>2]=0,r=n}else r=0|i[l+8>>2],i[r+12>>2]=n,i[n+8>>2]=r,r=n}while(0);do{if(0|o){if(n=0|i[l+28>>2],(0|l)==(0|i[(e=23732+(n<<2)|0)>>2])){if(i[e>>2]=r,!r){i[5858]=s&~(1<<n);break}}else if(i[((0|i[(_=o+16|0)>>2])==(0|l)?_:o+20|0)>>2]=r,!r)break;i[r+24>>2]=o,0|(n=0|i[l+16>>2])&&(i[r+16>>2]=n,i[n+24>>2]=r),0|(n=0|i[l+20>>2])&&(i[r+20>>2]=n,i[n+24>>2]=r)}}while(0);return c>>>0<16?(_=c+h|0,i[l+4>>2]=3|_,i[(_=l+_+4|0)>>2]=1|i[_>>2]):(i[l+4>>2]=3|h,i[u+4>>2]=1|c,i[u+c>>2]=c,0|d&&(a=0|i[5862],r=23468+((n=d>>>3)<<1<<2)|0,(n=1<<n)&f?n=0|i[(e=r+8|0)>>2]:(i[5857]=n|f,n=r,e=r+8|0),i[e>>2]=a,i[n+12>>2]=a,i[a+8>>2]=n,i[a+12>>2]=r),i[5859]=c,i[5862]=u),P=t,0|(_=l+8|0)}f=h}else f=h}else f=h}else if(e>>>0<=4294967231)if(h=-8&(e=e+11|0),a=0|i[5858]){o=0-h|0,c=(e>>>=8)?h>>>0>16777215?31:h>>>((c=14-((l=((m=e<<(f=(e+1048320|0)>>>16&8))+520192|0)>>>16&4)|f|(c=((m<<=l)+245760|0)>>>16&2))+(m<<c>>>15)|0)+7|0)&1|c<<1:0,r=0|i[23732+(c<<2)>>2];e:do{if(r)for(e=0,l=h<<(31==(0|c)?0:25-(c>>>1)|0),s=0;;){if((u=(-8&i[r+4>>2])-h|0)>>>0<o>>>0){if(!u){e=r,o=0,m=65;break e}e=r,o=u}if(s=0==(0|(m=0|i[r+20>>2]))|(0|m)==(0|(r=0|i[r+16+(l>>>31<<2)>>2]))?s:m,!r){r=s,m=61;break}l<<=1}else r=0,e=0,m=61}while(0);if(61==(0|m)){if(0==(0|r)&0==(0|e)){if(!(e=((e=2<<c)|0-e)&a)){f=h;break}f=(e&0-e)-1|0,e=0,r=0|i[23732+(((s=(f>>>=u=f>>>12&16)>>>5&8)|u|(l=(f>>>=s)>>>2&4)|(c=(f>>>=l)>>>1&2)|(r=(f>>>=c)>>>1&1))+(f>>>r)<<2)>>2]}r?m=65:(l=e,u=o)}if(65==(0|m))for(s=r;;){if(o=(r=(f=(-8&i[s+4>>2])-h|0)>>>0<o>>>0)?f:o,e=r?s:e,(r=0|i[s+16>>2])||(r=0|i[s+20>>2]),!r){l=e,u=o;break}s=r}if(0!=(0|l)&&u>>>0<((0|i[5859])-h|0)>>>0&&(d=l+h|0)>>>0>l>>>0){s=0|i[l+24>>2],n=0|i[l+12>>2];do{if((0|n)==(0|l)){if(!(n=0|i[(e=l+20|0)>>2])&&!(n=0|i[(e=l+16|0)>>2])){n=0;break}for(;;)if(r=0|i[(o=n+20|0)>>2])n=r,e=o;else{if(!(r=0|i[(o=n+16|0)>>2]))break;n=r,e=o}i[e>>2]=0}else _=0|i[l+8>>2],i[_+12>>2]=n,i[n+8>>2]=_}while(0);do{if(s){if(e=0|i[l+28>>2],(0|l)==(0|i[(r=23732+(e<<2)|0)>>2])){if(i[r>>2]=n,!n){a&=~(1<<e),i[5858]=a;break}}else if(i[((0|i[(_=s+16|0)>>2])==(0|l)?_:s+20|0)>>2]=n,!n)break;i[n+24>>2]=s,0|(e=0|i[l+16>>2])&&(i[n+16>>2]=e,i[e+24>>2]=n),(e=0|i[l+20>>2])&&(i[n+20>>2]=e,i[e+24>>2]=n)}}while(0);e:do{if(u>>>0<16)_=u+h|0,i[l+4>>2]=3|_,i[(_=l+_+4|0)>>2]=1|i[_>>2];else{if(i[l+4>>2]=3|h,i[d+4>>2]=1|u,i[d+u>>2]=u,n=u>>>3,u>>>0<256){r=23468+(n<<1<<2)|0,(e=0|i[5857])&(n=1<<n)?n=0|i[(e=r+8|0)>>2]:(i[5857]=e|n,n=r,e=r+8|0),i[e>>2]=d,i[n+12>>2]=d,i[d+8>>2]=n,i[d+12>>2]=r;break}if(n=23732+((r=(n=u>>>8)?u>>>0>16777215?31:u>>>((r=14-((b=((_=n<<(x=(n+1048320|0)>>>16&8))+520192|0)>>>16&4)|x|(r=((_<<=b)+245760|0)>>>16&2))+(_<<r>>>15)|0)+7|0)&1|r<<1:0)<<2)|0,i[d+28>>2]=r,i[(e=d+16|0)+4>>2]=0,i[e>>2]=0,!(a&(e=1<<r))){i[5858]=a|e,i[n>>2]=d,i[d+24>>2]=n,i[d+12>>2]=d,i[d+8>>2]=d;break}n=0|i[n>>2];t:do{if((-8&i[n+4>>2]|0)!=(0|u)){for(a=u<<(31==(0|r)?0:25-(r>>>1)|0);e=0|i[(r=n+16+(a>>>31<<2)|0)>>2];){if((-8&i[e+4>>2]|0)==(0|u)){n=e;break t}a<<=1,n=e}i[r>>2]=d,i[d+24>>2]=n,i[d+12>>2]=d,i[d+8>>2]=d;break e}}while(0);_=0|i[(x=n+8|0)>>2],i[_+12>>2]=d,i[x>>2]=d,i[d+8>>2]=_,i[d+12>>2]=n,i[d+24>>2]=0}}while(0);return P=t,0|(_=l+8|0)}f=h}else f=h;else f=-1}while(0);if((r=0|i[5859])>>>0>=f>>>0)return n=r-f|0,e=0|i[5862],n>>>0>15?(_=e+f|0,i[5862]=_,i[5859]=n,i[_+4>>2]=1|n,i[e+r>>2]=n,i[e+4>>2]=3|f):(i[5859]=0,i[5862]=0,i[e+4>>2]=3|r,i[(_=e+r+4|0)>>2]=1|i[_>>2]),P=t,0|(_=e+8|0);if((u=0|i[5860])>>>0>f>>>0)return b=u-f|0,i[5860]=b,x=(_=0|i[5863])+f|0,i[5863]=x,i[x+4>>2]=1|b,i[_+4>>2]=3|f,P=t,0|(_=_+8|0);if(0|i[5975]?e=0|i[5977]:(i[5977]=4096,i[5976]=4096,i[5978]=-1,i[5979]=-1,i[5980]=0,i[5968]=0,i[5975]=-16&p^1431655768,e=4096),l=f+48|0,(h=(s=e+(c=f+47|0)|0)&(o=0-e|0))>>>0<=f>>>0)return P=t,0|(_=0);if(0|(e=0|i[5967])&&(p=(d=0|i[5965])+h|0)>>>0<=d>>>0|p>>>0>e>>>0)return P=t,0|(_=0);e:do{if(4&i[5968])n=0,m=143;else{r=0|i[5863];t:do{if(r){for(a=23876;!((p=0|i[a>>2])>>>0<=r>>>0&&(p+(0|i[a+4>>2])|0)>>>0>r>>>0);){if(!(e=0|i[a+8>>2])){m=128;break t}a=e}if((n=s-u&o)>>>0<2147483647)if((0|(e=0|Qt(0|n)))==((0|i[a>>2])+(0|i[a+4>>2])|0)){if(-1!=(0|e)){u=n,s=e,m=145;break e}}else a=e,m=136;else n=0}else m=128}while(0);do{if(128==(0|m))if(-1!=(0|(r=0|Qt(0)))&&(n=r,v=(n=(0==((v=(A=0|i[5976])+-1|0)&n|0)?0:(v+n&0-A)-n|0)+h|0)+(A=0|i[5965])|0,n>>>0>f>>>0&n>>>0<2147483647)){if(0|(p=0|i[5967])&&v>>>0<=A>>>0|v>>>0>p>>>0){n=0;break}if((0|(e=0|Qt(0|n)))==(0|r)){u=n,s=r,m=145;break e}a=e,m=136}else n=0}while(0);do{if(136==(0|m)){if(r=0-n|0,!(l>>>0>n>>>0&n>>>0<2147483647&-1!=(0|a))){if(-1==(0|a)){n=0;break}u=n,s=a,m=145;break e}if((e=c-n+(e=0|i[5977])&0-e)>>>0>=2147483647){u=n,s=a,m=145;break e}if(-1==(0|Qt(0|e))){Qt(0|r),n=0;break}u=e+n|0,s=a,m=145;break e}}while(0);i[5968]=4|i[5968],m=143}}while(0);if(143==(0|m)&&h>>>0<2147483647&&!(-1==(0|(b=0|Qt(0|h)))|1^(y=(g=(v=0|Qt(0))-b|0)>>>0>(f+40|0)>>>0)|b>>>0<v>>>0&-1!=(0|b)&-1!=(0|v)^1)&&(u=y?g:n,s=b,m=145),145==(0|m)){n=(0|i[5965])+u|0,i[5965]=n,n>>>0>(0|i[5966])>>>0&&(i[5966]=n),c=0|i[5863];e:do{if(c){for(n=23876;;){if((0|s)==((e=0|i[n>>2])+(r=0|i[n+4>>2])|0)){m=154;break}if(!(a=0|i[n+8>>2]))break;n=a}if(154==(0|m)&&(x=n+4|0,0==(8&i[n+12>>2]|0))&&s>>>0>c>>>0&e>>>0<=c>>>0){i[x>>2]=r+u,x=c+(b=0==(7&(b=c+8|0)|0)?0:0-b&7)|0,b=(_=(0|i[5860])+u|0)-b|0,i[5863]=x,i[5860]=b,i[x+4>>2]=1|b,i[c+_+4>>2]=40,i[5864]=i[5979];break}for(s>>>0<(0|i[5861])>>>0&&(i[5861]=s),r=s+u|0,n=23876;;){if((0|i[n>>2])==(0|r)){m=162;break}if(!(e=0|i[n+8>>2]))break;n=e}if(162==(0|m)&&0==(8&i[n+12>>2]|0)){i[n>>2]=s,i[(d=n+4|0)>>2]=(0|i[d>>2])+u,h=(d=s+(0==(7&(d=s+8|0)|0)?0:0-d&7)|0)+f|0,l=(n=r+(0==(7&(n=r+8|0)|0)?0:0-n&7)|0)-d-f|0,i[d+4>>2]=3|f;t:do{if((0|c)==(0|n))_=(0|i[5860])+l|0,i[5860]=_,i[5863]=h,i[h+4>>2]=1|_;else{if((0|i[5862])==(0|n)){_=(0|i[5859])+l|0,i[5859]=_,i[5862]=h,i[h+4>>2]=1|_,i[h+_>>2]=_;break}if(1==(3&(e=0|i[n+4>>2])|0)){u=-8&e,a=e>>>3;n:do{if(e>>>0<256){if(e=0|i[n+8>>2],(0|(r=0|i[n+12>>2]))==(0|e)){i[5857]=i[5857]&~(1<<a);break}i[e+12>>2]=r,i[r+8>>2]=e;break}s=0|i[n+24>>2],e=0|i[n+12>>2];do{if((0|e)==(0|n)){if(e=0|i[(a=(r=n+16|0)+4|0)>>2])r=a;else if(!(e=0|i[r>>2])){e=0;break}for(;;)if(a=0|i[(o=e+20|0)>>2])e=a,r=o;else{if(!(a=0|i[(o=e+16|0)>>2]))break;e=a,r=o}i[r>>2]=0}else _=0|i[n+8>>2],i[_+12>>2]=e,i[e+8>>2]=_}while(0);if(!s)break;a=23732+((r=0|i[n+28>>2])<<2)|0;do{if((0|i[a>>2])==(0|n)){if(i[a>>2]=e,0|e)break;i[5858]=i[5858]&~(1<<r);break n}if(i[((0|i[(_=s+16|0)>>2])==(0|n)?_:s+20|0)>>2]=e,!e)break n}while(0);if(i[e+24>>2]=s,0|(a=0|i[(r=n+16|0)>>2])&&(i[e+16>>2]=a,i[a+24>>2]=e),!(r=0|i[r+4>>2]))break;i[e+20>>2]=r,i[r+24>>2]=e}while(0);n=n+u|0,o=u+l|0}else o=l;if(i[(n=n+4|0)>>2]=-2&i[n>>2],i[h+4>>2]=1|o,i[h+o>>2]=o,n=o>>>3,o>>>0<256){r=23468+(n<<1<<2)|0,(e=0|i[5857])&(n=1<<n)?n=0|i[(e=r+8|0)>>2]:(i[5857]=e|n,n=r,e=r+8|0),i[e>>2]=h,i[n+12>>2]=h,i[h+8>>2]=n,i[h+12>>2]=r;break}n=o>>>8;do{if(n){if(o>>>0>16777215){a=31;break}a=o>>>((a=14-((b=((_=n<<(x=(n+1048320|0)>>>16&8))+520192|0)>>>16&4)|x|(a=((_<<=b)+245760|0)>>>16&2))+(_<<a>>>15)|0)+7|0)&1|a<<1}else a=0}while(0);if(n=23732+(a<<2)|0,i[h+28>>2]=a,i[(e=h+16|0)+4>>2]=0,i[e>>2]=0,!((e=0|i[5858])&(r=1<<a))){i[5858]=e|r,i[n>>2]=h,i[h+24>>2]=n,i[h+12>>2]=h,i[h+8>>2]=h;break}n=0|i[n>>2];n:do{if((-8&i[n+4>>2]|0)!=(0|o)){for(a=o<<(31==(0|a)?0:25-(a>>>1)|0);e=0|i[(r=n+16+(a>>>31<<2)|0)>>2];){if((-8&i[e+4>>2]|0)==(0|o)){n=e;break n}a<<=1,n=e}i[r>>2]=h,i[h+24>>2]=n,i[h+12>>2]=h,i[h+8>>2]=h;break t}}while(0);_=0|i[(x=n+8|0)>>2],i[_+12>>2]=h,i[x>>2]=h,i[h+8>>2]=_,i[h+12>>2]=n,i[h+24>>2]=0}}while(0);return P=t,0|(_=d+8|0)}for(n=23876;!((e=0|i[n>>2])>>>0<=c>>>0&&(_=e+(0|i[n+4>>2])|0)>>>0>c>>>0);)n=0|i[n+8>>2];n=(e=(e=(o=_+-47|0)+(0==(7&(e=o+8|0)|0)?0:0-e&7)|0)>>>0<(o=c+16|0)>>>0?c:e)+8|0,x=s+(b=0==(7&(b=s+8|0)|0)?0:0-b&7)|0,b=(r=u+-40|0)-b|0,i[5863]=x,i[5860]=b,i[x+4>>2]=1|b,i[s+r+4>>2]=40,i[5864]=i[5979],i[(r=e+4|0)>>2]=27,i[n>>2]=i[5969],i[n+4>>2]=i[5970],i[n+8>>2]=i[5971],i[n+12>>2]=i[5972],i[5969]=s,i[5970]=u,i[5972]=0,i[5971]=n,n=e+24|0;do{x=n,i[(n=n+4|0)>>2]=7}while((x+8|0)>>>0<_>>>0);if((0|e)!=(0|c)){if(s=e-c|0,i[r>>2]=-2&i[r>>2],i[c+4>>2]=1|s,i[e>>2]=s,n=s>>>3,s>>>0<256){r=23468+(n<<1<<2)|0,(e=0|i[5857])&(n=1<<n)?n=0|i[(e=r+8|0)>>2]:(i[5857]=e|n,n=r,e=r+8|0),i[e>>2]=c,i[n+12>>2]=c,i[c+8>>2]=n,i[c+12>>2]=r;break}if(r=23732+((a=(n=s>>>8)?s>>>0>16777215?31:s>>>((a=14-((b=((_=n<<(x=(n+1048320|0)>>>16&8))+520192|0)>>>16&4)|x|(a=((_<<=b)+245760|0)>>>16&2))+(_<<a>>>15)|0)+7|0)&1|a<<1:0)<<2)|0,i[c+28>>2]=a,i[c+20>>2]=0,i[o>>2]=0,!((n=0|i[5858])&(e=1<<a))){i[5858]=n|e,i[r>>2]=c,i[c+24>>2]=r,i[c+12>>2]=c,i[c+8>>2]=c;break}n=0|i[r>>2];t:do{if((-8&i[n+4>>2]|0)!=(0|s)){for(a=s<<(31==(0|a)?0:25-(a>>>1)|0);e=0|i[(r=n+16+(a>>>31<<2)|0)>>2];){if((-8&i[e+4>>2]|0)==(0|s)){n=e;break t}a<<=1,n=e}i[r>>2]=c,i[c+24>>2]=n,i[c+12>>2]=c,i[c+8>>2]=c;break e}}while(0);_=0|i[(x=n+8|0)>>2],i[_+12>>2]=c,i[x>>2]=c,i[c+8>>2]=_,i[c+12>>2]=n,i[c+24>>2]=0}}else 0==(0|(_=0|i[5861]))|s>>>0<_>>>0&&(i[5861]=s),i[5969]=s,i[5970]=u,i[5972]=0,i[5866]=i[5975],i[5865]=-1,i[5870]=23468,i[5869]=23468,i[5872]=23476,i[5871]=23476,i[5874]=23484,i[5873]=23484,i[5876]=23492,i[5875]=23492,i[5878]=23500,i[5877]=23500,i[5880]=23508,i[5879]=23508,i[5882]=23516,i[5881]=23516,i[5884]=23524,i[5883]=23524,i[5886]=23532,i[5885]=23532,i[5888]=23540,i[5887]=23540,i[5890]=23548,i[5889]=23548,i[5892]=23556,i[5891]=23556,i[5894]=23564,i[5893]=23564,i[5896]=23572,i[5895]=23572,i[5898]=23580,i[5897]=23580,i[5900]=23588,i[5899]=23588,i[5902]=23596,i[5901]=23596,i[5904]=23604,i[5903]=23604,i[5906]=23612,i[5905]=23612,i[5908]=23620,i[5907]=23620,i[5910]=23628,i[5909]=23628,i[5912]=23636,i[5911]=23636,i[5914]=23644,i[5913]=23644,i[5916]=23652,i[5915]=23652,i[5918]=23660,i[5917]=23660,i[5920]=23668,i[5919]=23668,i[5922]=23676,i[5921]=23676,i[5924]=23684,i[5923]=23684,i[5926]=23692,i[5925]=23692,i[5928]=23700,i[5927]=23700,i[5930]=23708,i[5929]=23708,i[5932]=23716,i[5931]=23716,x=s+(b=0==(7&(b=s+8|0)|0)?0:0-b&7)|0,b=(_=u+-40|0)-b|0,i[5863]=x,i[5860]=b,i[x+4>>2]=1|b,i[s+_+4>>2]=40,i[5864]=i[5979]}while(0);if((n=0|i[5860])>>>0>f>>>0)return b=n-f|0,i[5860]=b,x=(_=0|i[5863])+f|0,i[5863]=x,i[x+4>>2]=1|b,i[_+4>>2]=3|f,P=t,0|(_=_+8|0)}return i[(_=23424)>>2]=12,P=t,0|(_=0)}function Rt(e){var t=0,n=0,r=0,a=0,o=0,s=0,u=0,l=0;if(e|=0){n=e+-8|0,a=0|i[5861],l=n+(t=-8&(e=0|i[e+-4>>2]))|0;do{if(1&e)u=n,s=n;else{if(r=0|i[n>>2],!(3&e))return;if(o=r+t|0,(s=n+(0-r)|0)>>>0<a>>>0)return;if((0|i[5862])==(0|s)){if(3!=(3&(t=0|i[(e=l+4|0)>>2])|0)){u=s,t=o;break}return i[5859]=o,i[e>>2]=-2&t,i[s+4>>2]=1|o,void(i[s+o>>2]=o)}if(n=r>>>3,r>>>0<256){if(e=0|i[s+8>>2],(0|(t=0|i[s+12>>2]))==(0|e)){i[5857]=i[5857]&~(1<<n),u=s,t=o;break}i[e+12>>2]=t,i[t+8>>2]=e,u=s,t=o;break}a=0|i[s+24>>2],e=0|i[s+12>>2];do{if((0|e)==(0|s)){if(e=0|i[(n=(t=s+16|0)+4|0)>>2])t=n;else if(!(e=0|i[t>>2])){e=0;break}for(;;)if(n=0|i[(r=e+20|0)>>2])e=n,t=r;else{if(!(n=0|i[(r=e+16|0)>>2]))break;e=n,t=r}i[t>>2]=0}else u=0|i[s+8>>2],i[u+12>>2]=e,i[e+8>>2]=u}while(0);if(a){if(t=0|i[s+28>>2],(0|i[(n=23732+(t<<2)|0)>>2])==(0|s)){if(i[n>>2]=e,!e){i[5858]=i[5858]&~(1<<t),u=s,t=o;break}}else if(i[((0|i[(u=a+16|0)>>2])==(0|s)?u:a+20|0)>>2]=e,!e){u=s,t=o;break}i[e+24>>2]=a,0|(n=0|i[(t=s+16|0)>>2])&&(i[e+16>>2]=n,i[n+24>>2]=e),(t=0|i[t+4>>2])?(i[e+20>>2]=t,i[t+24>>2]=e,u=s,t=o):(u=s,t=o)}else u=s,t=o}}while(0);if(!(s>>>0>=l>>>0)&&1&(r=0|i[(e=l+4|0)>>2])){if(2&r)i[e>>2]=-2&r,i[u+4>>2]=1|t,i[s+t>>2]=t,a=t;else{if((0|i[5863])==(0|l)){if(l=(0|i[5860])+t|0,i[5860]=l,i[5863]=u,i[u+4>>2]=1|l,(0|u)!=(0|i[5862]))return;return i[5862]=0,void(i[5859]=0)}if((0|i[5862])==(0|l))return l=(0|i[5859])+t|0,i[5859]=l,i[5862]=s,i[u+4>>2]=1|l,void(i[s+l>>2]=l);a=(-8&r)+t|0,n=r>>>3;do{if(r>>>0<256){if(t=0|i[l+8>>2],(0|(e=0|i[l+12>>2]))==(0|t)){i[5857]=i[5857]&~(1<<n);break}i[t+12>>2]=e,i[e+8>>2]=t;break}o=0|i[l+24>>2],e=0|i[l+12>>2];do{if((0|e)==(0|l)){if(e=0|i[(n=(t=l+16|0)+4|0)>>2])t=n;else if(!(e=0|i[t>>2])){n=0;break}for(;;)if(n=0|i[(r=e+20|0)>>2])e=n,t=r;else{if(!(n=0|i[(r=e+16|0)>>2]))break;e=n,t=r}i[t>>2]=0,n=e}else n=0|i[l+8>>2],i[n+12>>2]=e,i[e+8>>2]=n,n=e}while(0);if(0|o){if(e=0|i[l+28>>2],(0|i[(t=23732+(e<<2)|0)>>2])==(0|l)){if(i[t>>2]=n,!n){i[5858]=i[5858]&~(1<<e);break}}else if(i[((0|i[(r=o+16|0)>>2])==(0|l)?r:o+20|0)>>2]=n,!n)break;i[n+24>>2]=o,0|(t=0|i[(e=l+16|0)>>2])&&(i[n+16>>2]=t,i[t+24>>2]=n),0|(e=0|i[e+4>>2])&&(i[n+20>>2]=e,i[e+24>>2]=n)}}while(0);if(i[u+4>>2]=1|a,i[s+a>>2]=a,(0|u)==(0|i[5862]))return void(i[5859]=a)}if(e=a>>>3,a>>>0<256)return n=23468+(e<<1<<2)|0,(t=0|i[5857])&(e=1<<e)?e=0|i[(t=n+8|0)>>2]:(i[5857]=t|e,e=n,t=n+8|0),i[t>>2]=u,i[e+12>>2]=u,i[u+8>>2]=e,void(i[u+12>>2]=n);e=23732+((r=(e=a>>>8)?a>>>0>16777215?31:a>>>((r=14-((o=((l=e<<(s=(e+1048320|0)>>>16&8))+520192|0)>>>16&4)|s|(r=((l<<=o)+245760|0)>>>16&2))+(l<<r>>>15)|0)+7|0)&1|r<<1:0)<<2)|0,i[u+28>>2]=r,i[u+20>>2]=0,i[u+16>>2]=0,t=0|i[5858],n=1<<r;e:do{if(t&n){e=0|i[e>>2];t:do{if((-8&i[e+4>>2]|0)!=(0|a)){for(r=a<<(31==(0|r)?0:25-(r>>>1)|0);t=0|i[(n=e+16+(r>>>31<<2)|0)>>2];){if((-8&i[t+4>>2]|0)==(0|a)){e=t;break t}r<<=1,e=t}i[n>>2]=u,i[u+24>>2]=e,i[u+12>>2]=u,i[u+8>>2]=u;break e}}while(0);l=0|i[(s=e+8|0)>>2],i[l+12>>2]=u,i[s>>2]=u,i[u+8>>2]=l,i[u+12>>2]=e,i[u+24>>2]=0}else i[5858]=t|n,i[e>>2]=u,i[u+24>>2]=e,i[u+12>>2]=u,i[u+8>>2]=u}while(0);if(l=(0|i[5865])-1|0,i[5865]=l,!(0|l)){for(e=23884;e=0|i[e>>2];)e=e+8|0;i[5865]=-1}}}}function Bt(e,t){t|=0;var n=0;return(e|=0)?(n=0|b(t,e),(t|e)>>>0>65535&&(n=(0|(n>>>0)/(e>>>0))==(0|t)?n:-1)):n=0,(e=0|Ct(n))&&3&i[e+-4>>2]?(Xt(0|e,0,0|n),0|e):0|e}function Pt(e,t,n,r){return 0|(S((t|=0)+(r|=0)+((n=(e|=0)+(n|=0)>>>0)>>>0<e>>>0|0)>>>0|0),0|n)}function Nt(e,t,n,r){return 0|(S(0|(r=(t|=0)-(r|=0)-((n|=0)>>>0>(e|=0)>>>0|0)>>>0)),e-n>>>0|0)}function It(e){return 0|((e|=0)?31-(0|w(e^e-1))|0:32)}function Dt(e,t,n,r,a){a|=0;var o=0,s=0,u=0,l=0,c=0,h=0,d=0,f=0,p=0,A=0;if(h=e|=0,s=n|=0,u=f=r|=0,!(c=l=t|=0))return o=0!=(0|a),u?o?(i[a>>2]=0|e,i[a+4>>2]=0&t,a=0,0|(S(0|(f=0)),a)):(a=0,0|(S(0|(f=0)),a)):(o&&(i[a>>2]=(h>>>0)%(s>>>0),i[a+4>>2]=0),a=(h>>>0)/(s>>>0)>>>0,0|(S(0|(f=0)),a));o=0==(0|u);do{if(s){if(!o){if((o=(0|w(0|u))-(0|w(0|c))|0)>>>0<=31){s=d=o+1|0,e=h>>>(d>>>0)&(t=o-31>>31)|c<<(u=31-o|0),t&=c>>>(d>>>0),o=0,u=h<<u;break}return a?(i[a>>2]=0|e,i[a+4>>2]=l|0&t,a=0,0|(S(0|(f=0)),a)):(a=0,0|(S(0|(f=0)),a))}if((o=s-1|0)&s|0){s=u=33+(0|w(0|s))-(0|w(0|c))|0,e=(d=32-u|0)-1>>31&c>>>((p=u-32|0)>>>0)|(c<<d|h>>>(u>>>0))&(t=p>>31),t&=c>>>(u>>>0),o=h<<(A=64-u|0)&(l=d>>31),u=(c<<A|h>>>(p>>>0))&l|h<<d&u-33>>31;break}return 0|a&&(i[a>>2]=o&h,i[a+4>>2]=0),1==(0|s)?(A=0|e,0|(S(0|(p=l|0&t)),A)):(p=c>>>((A=0|It(0|s))>>>0)|0,A=c<<32-A|h>>>(A>>>0)|0,0|(S(0|p),A))}if(o)return 0|a&&(i[a>>2]=(c>>>0)%(s>>>0),i[a+4>>2]=0),A=(c>>>0)/(s>>>0)>>>0,0|(S(0|(p=0)),A);if(!h)return 0|a&&(i[a>>2]=0,i[a+4>>2]=(c>>>0)%(u>>>0)),A=(c>>>0)/(u>>>0)>>>0,0|(S(0|(p=0)),A);if(!((o=u-1|0)&u))return 0|a&&(i[a>>2]=0|e,i[a+4>>2]=o&c|0&t),p=0,A=c>>>((0|It(0|u))>>>0),0|(S(0|p),A);if((o=(0|w(0|u))-(0|w(0|c))|0)>>>0<=30){s=t=o+1|0,e=c<<(u=31-o|0)|h>>>(t>>>0),t=c>>>(t>>>0),o=0,u=h<<u;break}return a?(i[a>>2]=0|e,i[a+4>>2]=l|0&t,A=0,0|(S(0|(p=0)),A)):(A=0,0|(S(0|(p=0)),A))}while(0);if(s){c=0|Pt(0|(d=0|n),0|(h=f|0&r),-1,-1),n=0|M(),l=u,u=0;do{r=l,l=o>>>31|l<<1,o=u|o<<1,Nt(0|c,0|n,0|(r=e<<1|r>>>31|0),0|(f=e>>>31|t<<1|0)),u=1&(p=(A=0|M())>>31|((0|A)<0?-1:0)<<1),e=0|Nt(0|r,0|f,p&d|0,(((0|A)<0?-1:0)>>31|((0|A)<0?-1:0)<<1)&h|0),t=0|M(),s=s-1|0}while(0!=(0|s));c=l,l=0}else c=u,l=0,u=0;return s=0,0|a&&(i[a>>2]=e,i[a+4>>2]=t),A=-2&(o<<1|0)|u,0|(S(0|(p=(0|o)>>>31|(c|s)<<1|0&(s<<1|o>>>31)|l)),A)}function Lt(e,t,n,r){n|=0;var i,a,o,s,u;return a=(r|=0)>>31|((0|r)<0?-1:0)<<1,i=((0|r)<0?-1:0)>>31|((0|r)<0?-1:0)<<1,o=0|Nt((u=(t|=0)>>31|((0|t)<0?-1:0)<<1)^(e|=0)|0,(s=((0|t)<0?-1:0)>>31|((0|t)<0?-1:0)<<1)^t|0,0|u,0|s),e=a^u,t=i^s,0|Nt((0|Dt(o,0|M(),0|Nt(a^n|0,i^r|0,0|a,0|i),0|M(),0))^e|0,(0|M())^t|0,0|e,0|t)}function Ot(e,t,n,r){t|=0,r|=0;var i,a;return n=0|function(e,t){var n,r,i,a=0;return e=((n=0|b(a=65535&(t|=0),i=65535&(e|=0)))>>>16)+(0|b(a,r=e>>>16))|0,t=0|b(a=t>>>16,i),0|(S((e>>>16)+(0|b(a,r))+(((65535&e)+t|0)>>>16)|0),e+t<<16|65535&n|0)}(i=e|=0,a=n|=0),e=0|M(),0|(S((0|b(t,a))+(0|b(r,i))+e|0&e|0),0|n)}function Ft(e,t,n,r){n|=0;var a,o,s,u,l,c;return a=P,P=P+16|0,u=0|a,c=(r|=0)>>31|((0|r)<0?-1:0)<<1,l=((0|r)<0?-1:0)>>31|((0|r)<0?-1:0)<<1,Dt(e=0|Nt((s=(t|=0)>>31|((0|t)<0?-1:0)<<1)^(e|=0)|0,(o=((0|t)<0?-1:0)>>31|((0|t)<0?-1:0)<<1)^t|0,0|s,0|o),t=0|M(),0|Nt(c^n|0,l^r|0,0|c,0|l),0|M(),u),r=0|Nt(i[u>>2]^s|0,i[u+4>>2]^o|0,0|s,0|o),n=0|M(),P=a,0|(S(0|n),r)}function Ut(e,t,n,r){var a,o;return o=P,P=P+16|0,Dt(e|=0,t|=0,n|=0,r|=0,a=0|o),P=o,0|(S(0|i[a+4>>2]),0|i[a>>2])}function zt(e,t,n){return e|=0,t|=0,(0|(n|=0))<32?(S(t>>n|0),e>>>n|(t&(1<<n)-1)<<32-n):(S(0|((0|t)<0?-1:0)),t>>n-32|0)}function Gt(e,t,n){return e|=0,t|=0,(0|(n|=0))<32?(S(t>>>n|0),e>>>n|(t&(1<<n)-1)<<32-n):(S(0),t>>>n-32|0)}function qt(e,t,n){return e|=0,t|=0,(0|(n|=0))<32?(S(t<<n|(e&(1<<n)-1<<32-n)>>>32-n|0),e<<n):(S(e<<n-32|0),0)}function Ht(e,t){return t=+t,(e=+e)!=e?+t:t!=t?+e:+_(+e,+t)}function Vt(e,t){return t=+t,(e=+e)!=e?+t:t!=t?+e:+x(+e,+t)}function jt(e){return(e=+e)>=0?+u(e+.5):+y(e-.5)}function Wt(e,t,n){e|=0,t|=0;var a,o,s=0;if((0|(n|=0))>=8192)return C(0|e,0|t,0|n),0|e;if(o=0|e,a=e+n|0,(3&e)==(3&t)){for(;3&e;){if(!n)return 0|o;r[e>>0]=0|r[t>>0],e=e+1|0,t=t+1|0,n=n-1|0}for(s=(n=-4&a|0)-64|0;(0|e)<=(0|s);)i[e>>2]=i[t>>2],i[e+4>>2]=i[t+4>>2],i[e+8>>2]=i[t+8>>2],i[e+12>>2]=i[t+12>>2],i[e+16>>2]=i[t+16>>2],i[e+20>>2]=i[t+20>>2],i[e+24>>2]=i[t+24>>2],i[e+28>>2]=i[t+28>>2],i[e+32>>2]=i[t+32>>2],i[e+36>>2]=i[t+36>>2],i[e+40>>2]=i[t+40>>2],i[e+44>>2]=i[t+44>>2],i[e+48>>2]=i[t+48>>2],i[e+52>>2]=i[t+52>>2],i[e+56>>2]=i[t+56>>2],i[e+60>>2]=i[t+60>>2],e=e+64|0,t=t+64|0;for(;(0|e)<(0|n);)i[e>>2]=i[t>>2],e=e+4|0,t=t+4|0}else for(n=a-4|0;(0|e)<(0|n);)r[e>>0]=0|r[t>>0],r[e+1>>0]=0|r[t+1>>0],r[e+2>>0]=0|r[t+2>>0],r[e+3>>0]=0|r[t+3>>0],e=e+4|0,t=t+4|0;for(;(0|e)<(0|a);)r[e>>0]=0|r[t>>0],e=e+1|0,t=t+1|0;return 0|o}function Xt(e,t,n){t|=0;var a,o=0,s=0,u=0;if(a=(e|=0)+(n|=0)|0,t&=255,(0|n)>=67){for(;3&e;)r[e>>0]=t,e=e+1|0;for(u=t|t<<8|t<<16|t<<24,s=(o=-4&a|0)-64|0;(0|e)<=(0|s);)i[e>>2]=u,i[e+4>>2]=u,i[e+8>>2]=u,i[e+12>>2]=u,i[e+16>>2]=u,i[e+20>>2]=u,i[e+24>>2]=u,i[e+28>>2]=u,i[e+32>>2]=u,i[e+36>>2]=u,i[e+40>>2]=u,i[e+44>>2]=u,i[e+48>>2]=u,i[e+52>>2]=u,i[e+56>>2]=u,i[e+60>>2]=u,e=e+64|0;for(;(0|e)<(0|o);)i[e>>2]=u,e=e+4|0}for(;(0|e)<(0|a);)r[e>>0]=t,e=e+1|0;return a-n|0}function Yt(e){return(e=+e)>=0?+u(e+.5):+y(e-.5)}function Qt(e){e|=0;var t,n,r;return r=0|E(),(0|e)>0&(0|(t=(n=0|i[s>>2])+e|0))<(0|n)|(0|t)<0?(B(0|t),T(12),-1):(0|t)>(0|r)&&!(0|R(0|t))?(T(12),-1):(i[s>>2]=t,0|n)}return{___divdi3:Lt,___muldi3:Ot,___remdi3:Ft,___uremdi3:Ut,_areNeighborCells:function(e,t,n,r,a){a|=0;var o,s,u,l=0,c=0,h=0,d=0;if(u=P,P=P+64|0,s=u,o=u+56|0,!(!0&134217728==(2013265920&(t|=0)|0)&!0&134217728==(2013265920&(r|=0)|0)))return P=u,0|(a=5);if((0|(e|=0))==(0|(n|=0))&(0|t)==(0|r))return i[a>>2]=0,P=u,0|(a=0);if(c=0|Gt(0|e,0|t,52),M(),c&=15,d=0|Gt(0|n,0|r,52),M(),(0|c)!=(15&d|0))return P=u,0|(a=12);if(l=c+-1|0,c>>>0>1){De(e,t,l,s),De(n,r,l,o),h=0|i[(d=s)>>2],d=0|i[d+4>>2];e:do{if((0|h)==(0|i[o>>2])&&(0|d)==(0|i[o+4>>2])){l=0|Gt(0|e,0|t,0|(c=3*(15^c)|0)),M(),l&=7,c=0|Gt(0|n,0|r,0|c),M(),c&=7;do{if(0==(0|l)|0==(0|c))i[a>>2]=1,l=0;else if(7==(0|l))l=5;else{if(1==(0|l)|1==(0|c)&&0|Oe(h,d)){l=5;break}if((0|i[15536+(l<<2)>>2])!=(0|c)&&(0|i[15568+(l<<2)>>2])!=(0|c))break e;i[a>>2]=1,l=0}}while(0);return P=u,0|(a=l)}}while(0)}c=(l=s)+56|0;do{i[l>>2]=0,l=l+4|0}while((0|l)<(0|c));return N(e,t,1,s),l=(0|i[(t=s)>>2])==(0|n)&&(0|i[t+4>>2])==(0|r)||(0|i[(t=s+8|0)>>2])==(0|n)&&(0|i[t+4>>2])==(0|r)||(0|i[(t=s+16|0)>>2])==(0|n)&&(0|i[t+4>>2])==(0|r)||(0|i[(t=s+24|0)>>2])==(0|n)&&(0|i[t+4>>2])==(0|r)||(0|i[(t=s+32|0)>>2])==(0|n)&&(0|i[t+4>>2])==(0|r)||(0|i[(t=s+40|0)>>2])==(0|n)&&(0|i[t+4>>2])==(0|r)?1:1&((0|i[(l=s+48|0)>>2])==(0|n)?(0|i[l+4>>2])==(0|r):0),i[a>>2]=l,P=u,0|(a=0)},_bitshift64Ashr:zt,_bitshift64Lshr:Gt,_bitshift64Shl:qt,_calloc:Bt,_cellAreaKm2:function(e,t,n){return 0|(e=0|rt(e|=0,t|=0,n|=0))||(a[n>>3]=6371.007180918475*+a[n>>3]*6371.007180918475),0|e},_cellAreaM2:function(e,t,n){return 0|(e=0|rt(e|=0,t|=0,n|=0))||(a[n>>3]=6371.007180918475*+a[n>>3]*6371.007180918475*1e3*1e3),0|e},_cellAreaRads2:rt,_cellToBoundary:Ye,_cellToCenterChild:function(e,t,n,r){n|=0,r|=0;var a=0;return a=0|Gt(0|(e|=0),0|(t|=0),52),M(),(0|n)<16&(0|(a&=15))<=(0|n)?((0|a)<(0|n)&&(a=0|qt(-1,-1,3+(3*(n+-1-a|0)|0)|0),a=0|qt(0|~a,0|~(0|M()),3*(15-n|0)|0),t=~(0|M())&t,e&=~a),a=0|qt(0|n,0,52),n=-15728641&t|0|M(),i[r>>2]=e|a,i[r+4>>2]=n,0|(r=0)):0|(r=4)},_cellToChildPos:function(e,t,n,r){n|=0,r|=0;var a,o=0,s=0,u=0,l=0,c=0,h=0,d=0,f=0,p=0,A=0,v=0,m=0,g=0,y=0;if(a=P,P=P+16|0,g=a,y=0|Gt(0|(e|=0),0|(t|=0),52),M(),y&=15,n>>>0>15)return P=a,0|(y=4);if((0|y)<(0|n))return P=a,0|(y=12);if((0|y)!=(0|n))if(s=0|qt(0|n,0,52),s|=e,l=0|M()|-15728641&t,(0|y)>(0|n)){c=n;do{m=0|qt(7,0,3*(14-c|0)|0),c=c+1|0,s|=m,l=0|M()|l}while((0|c)<(0|y));m=s}else m=s;else m=e,l=t;v=0|Gt(0|m,0|l,45),M();e:do{if(0|z(127&v)){if(c=0|Gt(0|m,0|l,52),M(),0|(c&=15))for(s=1;;){if(!(0==((v=0|qt(7,0,3*(15-s|0)|0))&m|0)&0==((0|M())&l|0))){h=33;break e}if(!(s>>>0<c>>>0))break;s=s+1|0}if(i[(v=r)>>2]=0,i[v+4>>2]=0,(0|y)>(0|n)){for(v=-15728641&t,A=y;;){if(p=A,(A=A+-1|0)>>>0>15|(0|y)<(0|A)){h=19;break}if((0|y)!=(0|A))if(s=0|qt(0|A,0,52),s|=e,c=0|M()|v,(0|y)<(0|p))f=s;else{h=A;do{f=0|qt(7,0,3*(14-h|0)|0),h=h+1|0,s|=f,c=0|M()|c}while((0|h)<(0|y));f=s}else f=e,c=t;if(d=0|Gt(0|f,0|c,45),M(),0|z(127&d)){d=0|Gt(0|f,0|c,52),M(),d&=15;t:do{if(d)for(h=1;;){if(s=0|Gt(0|f,0|c,3*(15-h|0)|0),M(),0|(s&=7))break t;if(!(h>>>0<d>>>0)){s=0;break}h=h+1|0}else s=0}while(0);s=0==(0|s)&1}else s=0;if(c=0|Gt(0|e,0|t,3*(15-p|0)|0),M(),7==(0|(c&=7))){o=5,h=42;break}if(1==(0|c)&(s=0!=(0|s))){o=5,h=42;break}if(0|(f=c+((0!=(0|c)&s)<<31>>31)|0)&&(h=0|ht(7,0,h=y-p|0,((0|h)<0)<<31>>31),d=0|M(),s?(s=0|Pt(0|(s=0|Ot(0|h,0|d,5,0)),0|M(),-5,-1),s=0|Pt(0|(s=0|Lt(0|s,0|M(),6,0)),0|M(),1,0),c=0|M()):(s=h,c=d),p=0|Pt(0|s,0|c,0|(p=0|Ot(0|h,0|d,0|(p=f+-1|0),((0|p)<0)<<31>>31|0)),0|M()),d=0|Pt(0|p,0|(f=0|M()),0|i[(d=r)>>2],0|i[d+4>>2]),f=0|M(),i[(p=r)>>2]=d,i[p+4>>2]=f),(0|A)<=(0|n)){h=37;break}}if(19==(0|h))k(23313,22674,1099,22710);else{if(37==(0|h)){o=0|i[(u=r)+4>>2],u=0|i[u>>2];break}if(42==(0|h))return P=a,0|o}}else o=0,u=0}else h=33}while(0);e:do{if(33==(0|h)){if(i[(v=r)>>2]=0,i[v+4>>2]=0,(0|y)>(0|n)){for(s=y;;){if(o=0|Gt(0|e,0|t,3*(15-s|0)|0),M(),7==(0|(o&=7))){o=5;break}if(o=0|Ot(0|(u=0|ht(7,0,u=y-s|0,((0|u)<0)<<31>>31)),0|M(),0|o,0),u=0|M(),u=0|Pt(0|i[(v=r)>>2],0|i[v+4>>2],0|o,0|u),o=0|M(),i[(v=r)>>2]=u,i[v+4>>2]=o,(0|(s=s+-1|0))<=(0|n))break e}return P=a,0|o}o=0,u=0}}while(0);return 0|Le(m,l,y,g)&&k(23313,22674,1063,22725),((0|o)>-1|-1==(0|o)&u>>>0>4294967295)&((0|(g=0|i[(y=g)+4>>2]))>(0|o)|((0|g)==(0|o)?(0|i[y>>2])>>>0>u>>>0:0))?(P=a,0|(y=0)):(k(23313,22674,1139,22710),0)},_cellToChildren:function(e,t,n,r){r|=0;var a,o,s=0,u=0;if(o=P,P=P+16|0,Je(a=o,e|=0,t|=0,n|=0),0==(0|(e=0|i[(t=a)>>2]))&0==(0|(t=0|i[t+4>>2])))return P=o,0;s=0,n=0;do{i[(u=r+(s<<3)|0)>>2]=e,i[u+4>>2]=t,s=0|Pt(0|s,0|n,1,0),n=0|M(),Ke(a),e=0|i[(u=a)>>2],t=0|i[u+4>>2]}while(!(0==(0|e)&0==(0|t)));return P=o,0},_cellToChildrenSize:Le,_cellToLatLng:Xe,_cellToLocalIj:function(e,t,n,r,i,a){var o,s;return e|=0,t|=0,n|=0,r|=0,a|=0,s=P,P=P+16|0,o=s,(i|=0)?e=15:(e=0|lt(e,t,n,r,o))||(ye(o,a),e=0),P=s,0|e},_cellToParent:De,_cellToVertex:bt,_cellToVertexes:function(e,t,n){n|=0;var r,a=0,o=0;return o=0==(0|Oe(e|=0,t|=0)),r=0==(0|(a=0|bt(e,t,0,n))),o?r?0|(a=0|bt(e,t,1,n+8|0))||0|(a=0|bt(e,t,2,n+16|0))||0|(a=0|bt(e,t,3,n+24|0))||(a=0|bt(e,t,4,n+32|0))?0|(o=a):0|bt(e,t,5,n+40|0):0|(o=a):r?0|(a=0|bt(e,t,1,n+8|0))||0|(a=0|bt(e,t,2,n+16|0))||0|(a=0|bt(e,t,3,n+24|0))||0|(a=0|bt(e,t,4,n+32|0))?0|(o=a):(i[(o=n+40|0)>>2]=0,i[o+4>>2]=0,0|(o=0)):0|(o=a)},_cellsToDirectedEdge:function(e,t,n,r,a){return a|=0,7==(0|(n=0|F(e|=0,t|=0,n|=0,r|=0)))?0|(a=11):(r=0|qt(0|n,0,56),t=-2130706433&t|0|M()|268435456,i[a>>2]=e|r,i[a+4>>2]=t,0|(a=0))},_cellsToLinkedMultiPolygon:function(e,t,n){n|=0;var r,a,o,s=0;if(o=P,P=P+32|0,r=o,e=0|function(e,t,n){e|=0,n|=0;var r,a,o=0,s=0,u=0,l=0,c=0,h=0;if(a=P,P=P+176|0,r=a,(0|(t|=0))<1)return xt(n,0,0),P=a,0;for(c=0|Gt(0|i[(c=e)>>2],0|i[c+4>>2],52),M(),xt(n,(0|t)>6?t:6,15&c),c=0;!(0|(o=0|Ye(0|i[(o=e+(c<<3)|0)>>2],0|i[o+4>>2],r)));){if((0|(o=0|i[r>>2]))>0){l=0;do{u=r+8+(l<<4)|0,(s=0|kt(n,o=r+8+(((0|(l=l+1|0))%(0|o)|0)<<4)|0,u))?St(n,s):Mt(n,u,o),o=0|i[r>>2]}while((0|l)<(0|o))}if((0|(c=c+1|0))>=(0|t)){o=0,h=13;break}}return 13==(0|h)?(P=a,0|o):(_t(n),P=a,0|(h=o))}(e|=0,t|=0,a=o+16|0),0|e)return P=o,0|(n=e);if(i[n>>2]=0,i[n+4>>2]=0,i[n+8>>2]=0,0|(e=0|wt(a)))do{t=0|it(n);do{at(t,e),s=e+16|0,i[r>>2]=i[s>>2],i[r+4>>2]=i[s+4>>2],i[r+8>>2]=i[s+8>>2],i[r+12>>2]=i[s+12>>2],St(a,e),e=0|Tt(a,r)}while(0!=(0|e));e=0|wt(a)}while(0!=(0|e));return _t(a),(e=0|st(n))?(ot(n),P=o,0|(s=e)):(P=o,0|(s=0))},_childPosToCell:function(e,t,n,r,a,o){e|=0,t|=0,o|=0;var s,u=0,l=0,c=0,h=0,d=0,f=0,p=0,A=0,v=0;if(s=P,P=P+16|0,u=s,(a|=0)>>>0>15)return P=s,0|(o=4);if(l=0|Gt(0|(n|=0),0|(r|=0),52),M(),(0|(l&=15))>(0|a))return P=s,0|(o=12);if(0|Le(n,r,a,u)&&k(23313,22674,1063,22725),!(((0|t)>-1|-1==(0|t)&e>>>0>4294967295)&((0|(h=0|i[(d=u)+4>>2]))>(0|t)|((0|h)==(0|t)?(0|i[d>>2])>>>0>e>>>0:0))))return P=s,0|(o=2);d=a-l|0,a=0|qt(0|a,0,52),c=0|M()|-15728641&r,i[(h=o)>>2]=a|n,i[h+4>>2]=c,h=0|Gt(0|n,0|r,45),M();e:do{if(0|z(127&h)){if(0|l)for(u=1;;){if(!(0==((h=0|qt(7,0,3*(15-u|0)|0))&n|0)&0==((0|M())&r|0)))break e;if(!(u>>>0<l>>>0))break;u=u+1|0}if((0|d)<1)return P=s,0|(o=0);for(h=15^l,r=-1,c=1,u=1;;){l=0|ht(7,0,l=d-c|0,((0|l)<0)<<31>>31),n=0|M();do{if(u){if(u=0|Lt(0|(u=0|Pt(0|(u=0|Ot(0|l,0|n,5,0)),0|M(),-5,-1)),0|M(),6,0),(0|t)>(0|(a=0|M()))|(0|t)==(0|a)&e>>>0>u>>>0){t=0|Nt(0|(t=0|Pt(0|e,0|t,-1,-1)),0|M(),0|u,0|a),u=0|M(),A=0|i[(f=o)>>2],f=0|i[f+4>>2],p=0|qt(7,0,0|(v=3*(h+r|0)|0)),f&=~(0|M()),v=0|qt(0|(a=0|Pt(0|(r=0|Lt(0|t,0|u,0|l,0|n)),0|(e=0|M()),2,0)),0|M(),0|v),f=0|M()|f,i[(a=o)>>2]=v|A&~p,i[a+4>>2]=f,e=0|Nt(0|t,0|u,0|(e=0|Ot(0|r,0|e,0|l,0|n)),0|M()),u=0,t=0|M();break}p=0|i[(v=o)>>2],v=0|i[v+4>>2],A=0|qt(7,0,3*(h+r|0)|0),v&=~(0|M()),i[(u=o)>>2]=p&~A,i[u+4>>2]=v,u=1;break}a=0|i[(p=o)>>2],p=0|i[p+4>>2],f=0|qt(7,0,0|(r=3*(h+r|0)|0)),p&=~(0|M()),r=0|qt(0|(v=0|Lt(0|e,0|t,0|l,0|n)),0|(u=0|M()),0|r),p=0|M()|p,i[(A=o)>>2]=r|a&~f,i[A+4>>2]=p,e=0|Nt(0|e,0|t,0|(u=0|Ot(0|v,0|u,0|l,0|n)),0|M()),u=0,t=0|M()}while(0);if(!((0|d)>(0|c))){t=0;break}r=~c,c=c+1|0}return P=s,0|t}}while(0);if((0|d)<1)return P=s,0|(v=0);for(a=15^l,u=1;;){if(A=0|ht(7,0,A=d-u|0,((0|A)<0)<<31>>31),v=0|M(),n=0|i[(c=o)>>2],c=0|i[c+4>>2],r=0|qt(7,0,0|(l=3*(a-u|0)|0)),c&=~(0|M()),l=0|qt(0|(f=0|Lt(0|e,0|t,0|A,0|v)),0|(p=0|M()),0|l),c=0|M()|c,i[(h=o)>>2]=l|n&~r,i[h+4>>2]=c,e=0|Nt(0|e,0|t,0|(v=0|Ot(0|f,0|p,0|A,0|v)),0|M()),t=0|M(),(0|d)<=(0|u)){t=0;break}u=u+1|0}return P=s,0|t},_compactCells:function(e,t,n,r){t|=0;var a,o=0,s=0,u=0,l=0,c=0,h=0,d=0,f=0,p=0,A=0,v=0,m=0,g=0,y=0,b=0,x=0,_=0,w=0,S=0,T=0;if(0==(0|(n|=0))&0==(0|(r|=0)))return 0|(S=0);if(s=0|i[(o=e|=0)>>2],!0&0==(15728640&(o=0|i[o+4>>2])|0)){if(!((0|r)>0|0==(0|r)&n>>>0>0))return 0|(S=0);if(i[(S=t)>>2]=s,i[S+4>>2]=o,1==(0|n)&0==(0|r))return 0|(S=0);o=1;do{w=0|i[(_=e+(o<<3)|0)+4>>2],i[(S=t+(o<<3)|0)>>2]=i[_>>2],i[S+4>>2]=w,o=o+1|0}while(0<(0|r)|0==(0|r)&o>>>0<n>>>0);return 0|(o=0)}if(!(w=0|Ct(a=n<<3)))return 0|(S=13);if(Wt(0|w,0|e,0|a),!(_=0|Bt(n,8)))return Rt(w),0|(S=13);e:do{if(0|n){t:for(;;){b=0|Gt(0|(y=0|i[(o=w)>>2]),0|(o=0|i[o+4>>2]),52),M(),x=(b&=15)+-1|0,g=(0|n)>0;n:do{if(0!=(0|b)&g){if(A=((0|n)<0)<<31>>31,v=0|qt(0|x,0,52),m=0|M(),x>>>0>15){if(!(0==(0|y)&0==(0|o))){S=17;break t}for(s=0;;){if((0|(s=s+1|0))>=(0|n))break n;if(!(0==(0|(m=0|i[(r=w+(s<<3)|0)>>2]))&0==(0|(r=0|i[r+4>>2])))){o=r,S=17;break t}}}for(s=0,e=y,r=o;;){if(!(0==(0|e)&0==(0|r))){if(!(!0&0==(117440512&r|0))){S=22;break t}if(l=0|Gt(0|e,0|r,52),M(),(0|(l&=15))<(0|x)){o=12,S=28;break t}if((0|l)!=(0|x)&&(e|=v,r=-15728641&r|m,l>>>0>=b>>>0)){u=x;do{p=0|qt(7,0,3*(14-u|0)|0),u=u+1|0,e|=p,r=0|M()|r}while(u>>>0<l>>>0)}if(u=0|Ut(0|e,0|r,0|n,0|A),M(),0==(0|(c=0|i[(l=h=_+(u<<3)|0)>>2]))&0==(0|(l=0|i[l+4>>2])))u=h;else for(p=0;;){if((0|p)>(0|n)){S=32;break t}if((0|c)==(0|e)&(-117440513&l|0)==(0|r)){d=0|Gt(0|c,0|l,56),M(),f=(d&=7)+1|0,T=0|Gt(0|c,0|l,45),M();r:do{if(0|z(127&T)){if(c=0|Gt(0|c,0|l,52),M(),!(c&=15)){l=6;break}for(l=1;;){if(!(0==((T=0|qt(7,0,3*(15-l|0)|0))&e|0)&0==((0|M())&r|0))){l=7;break r}if(!(l>>>0<c>>>0)){l=6;break}l=l+1|0}}else l=7}while(0);if((d+2|0)>>>0>l>>>0){S=42;break t}T=0|qt(0|f,0,56),r=0|M()|-117440513&r,i[(f=h)>>2]=0,i[f+4>>2]=0,e|=T}else u=(u+1|0)%(0|n)|0;if(0==(0|(c=0|i[(l=h=_+(u<<3)|0)>>2]))&0==(0|(l=0|i[l+4>>2]))){u=h;break}p=p+1|0}i[(T=u)>>2]=e,i[T+4>>2]=r}if((0|(s=s+1|0))>=(0|n))break n;e=0|i[(r=w+(s<<3)|0)>>2],r=0|i[r+4>>2]}}}while(0);if((n+5|0)>>>0<11){S=85;break}if(!(m=0|Bt((0|n)/6|0,8))){S=49;break}n:do{if(g){p=0,f=0;do{if(!(0==(0|(s=0|i[(r=l=_+(p<<3)|0)>>2]))&0==(0|(r=0|i[r+4>>2])))){c=0|Gt(0|s,0|r,56),M(),e=(c&=7)+1|0,h=-117440513&r,T=0|Gt(0|s,0|r,45),M();r:do{if(0|z(127&T)){if(d=0|Gt(0|s,0|r,52),M(),0|(d&=15))for(u=1;;){if(!(0==(s&(T=0|qt(7,0,3*(15-u|0)|0))|0)&0==(h&(0|M())|0)))break r;if(!(u>>>0<d>>>0))break;u=u+1|0}s|=r=0|qt(0|e,0,56),r=0|M()|h,i[(e=l)>>2]=s,i[e+4>>2]=r,e=c+2|0}}while(0);7==(0|e)&&(i[(T=m+(f<<3)|0)>>2]=s,i[T+4>>2]=-117440513&r,f=f+1|0)}p=p+1|0}while((0|p)!=(0|n));if(g){if(p=((0|n)<0)<<31>>31,A=0|qt(0|x,0,52),v=0|M(),x>>>0>15){if(!(0==(0|y)&0==(0|o))){o=4,S=84;break t}for(o=0;;){if((0|(o=o+1|0))>=(0|n)){s=0,o=f;break n}if(!(0==(0|i[(T=w+(o<<3)|0)>>2])&0==(0|i[T+4>>2]))){o=4,S=84;break t}}}for(d=0,s=0,h=y;;){do{if(!(0==(0|h)&0==(0|o))){if(l=0|Gt(0|h,0|o,52),M(),(0|(l&=15))<(0|x)){o=12,S=84;break t}do{if((0|l)==(0|x))r=h,l=o;else{if(r=h|A,e=-15728641&o|v,l>>>0<b>>>0){l=e;break}u=x;do{T=0|qt(7,0,3*(14-u|0)|0),u=u+1|0,r|=T,e=0|M()|e}while(u>>>0<l>>>0);l=e}}while(0);for(u=0|Ut(0|r,0|l,0|n,0|p),M(),e=0;;){if((0|e)>(0|n)){S=77;break t}if((-117440513&(c=0|i[(T=_+(u<<3)|0)+4>>2])|0)==(0|l)&&(0|i[T>>2])==(0|r)){S=79;break}if((0|i[(T=_+((u=(u+1|0)%(0|n)|0)<<3)|0)>>2])==(0|r)&&(0|i[T+4>>2])==(0|l))break;e=e+1|0}if(79==(0|S)&&(S=0,!0&100663296==(117440512&c|0)))break;i[(T=t+(s<<3)|0)>>2]=h,i[T+4>>2]=o,s=s+1|0}}while(0);if((0|(o=d+1|0))>=(0|n)){o=f;break n}d=o,h=0|i[(T=w+(o<<3)|0)>>2],o=0|i[T+4>>2]}}else s=0,o=f}else s=0,o=0}while(0);if(Xt(0|_,0,0|a),Wt(0|w,0|m,o<<3|0),Rt(m),!o)break e;t=t+(s<<3)|0,n=o}if(17==(0|S))!0&0==(117440512&o|0)?(o=4,S=28):S=22;else if(32==(0|S))k(23313,22674,362,22684);else{if(42==(0|S))return Rt(w),Rt(_),0|(T=10);if(49==(0|S))return Rt(w),Rt(_),0|(T=13);if(77==(0|S))k(23313,22674,462,22684);else{if(84==(0|S))return Rt(m),Rt(w),Rt(_),0|(T=o);if(85==(0|S)){Wt(0|t,0|w,n<<3|0);break}}}if(22==(0|S))return Rt(w),Rt(_),0|(T=5);if(28==(0|S))return Rt(w),Rt(_),0|(T=o)}}while(0);return Rt(w),Rt(_),0|(T=0)},_destroyLinkedMultiPolygon:ot,_directedEdgeToBoundary:we,_directedEdgeToCells:function(e,t,n){e|=0;var r,a,o,s=0;return r=P,P=P+16|0,s=r,!0&268435456==(2013265920&(t|=0)|0)?(a=-2130706433&t|134217728,i[(o=n|=0)>>2]=e,i[o+4>>2]=a,i[s>>2]=0,t=0|Gt(0|e,0|t,56),M(),s=0|O(e,a,7&t,s,n+8|0),P=r,0|s):(P=r,0|(s=6))},_edgeLengthKm:function(e,t,n){n|=0;var r,o=0,s=0,u=0,l=0,h=0,p=0,A=0;if(r=P,P=P+176|0,0|(e=0|we(e|=0,t|=0,l=r)))return l=e,u=+a[n>>3],u*=6371.007180918475,a[n>>3]=u,P=r,0|l;if(a[n>>3]=0,(0|(e=0|i[l>>2]))<=1)return l=0,u=0,u*=6371.007180918475,a[n>>3]=u,P=r,0|l;t=e+-1|0,e=0,o=+a[l+8>>3],s=+a[l+16>>3],u=0;do{p=o,o=+a[l+8+((e=e+1|0)<<4)>>3],A=+f(.5*(o-p)),h=s,s=+a[l+8+(e<<4)+8>>3],h=A*A+(h=+f(.5*(s-h)))*(+d(+p)*+d(+o)*h),u+=2*+g(+ +c(+h),+ +c(+(1-h)))}while((0|e)!=(0|t));return a[n>>3]=u,l=0,A=u,A*=6371.007180918475,a[n>>3]=A,P=r,0|l},_edgeLengthM:function(e,t,n){n|=0;var r,o=0,s=0,u=0,l=0,h=0,p=0,A=0;if(r=P,P=P+176|0,0|(e=0|we(e|=0,t|=0,l=r)))return l=e,u=+a[n>>3],u*=6371.007180918475,u*=1e3,a[n>>3]=u,P=r,0|l;if(a[n>>3]=0,(0|(e=0|i[l>>2]))<=1)return l=0,u=0,u*=6371.007180918475,u*=1e3,a[n>>3]=u,P=r,0|l;t=e+-1|0,e=0,o=+a[l+8>>3],s=+a[l+16>>3],u=0;do{p=o,o=+a[l+8+((e=e+1|0)<<4)>>3],A=+f(.5*(o-p)),h=s,s=+a[l+8+(e<<4)+8>>3],h=A*A+(h=+f(.5*(s-h)))*(+d(+p)*+d(+o)*h),u+=2*+g(+ +c(+h),+ +c(+(1-h)))}while((0|e)!=(0|t));return a[n>>3]=u,l=0,A=u,A*=6371.007180918475,A*=1e3,a[n>>3]=A,P=r,0|l},_edgeLengthRads:function(e,t,n){n|=0;var r,o=0,s=0,u=0,l=0,h=0,p=0,A=0;if(r=P,P=P+176|0,0|(e=0|we(e|=0,t|=0,l=r)))return P=r,0|(l=e);if(a[n>>3]=0,(0|(e=0|i[l>>2]))<=1)return P=r,0|(l=0);t=e+-1|0,e=0,o=+a[l+8>>3],s=+a[l+16>>3],u=0;do{p=o,o=+a[l+8+((e=e+1|0)<<4)>>3],A=+f(.5*(o-p)),h=s,s=+a[l+8+(e<<4)+8>>3],h=A*A+(h=+f(.5*(s-h)))*(+d(+o)*+d(+p)*h),u+=2*+g(+ +c(+h),+ +c(+(1-h)))}while((0|e)<(0|t));return a[n>>3]=u,P=r,0|(l=0)},_emscripten_replace_memory:function(e){return r=new Int8Array(e),new Uint8Array(e),i=new Int32Array(e),new Float32Array(e),a=new Float64Array(e),n=e,!0},_free:Rt,_getBaseCellNumber:Ne,_getDirectedEdgeDestination:function(e,t,n){e|=0,t|=0,n|=0;var r,a,o=0;return r=P,P=P+16|0,i[(o=r)>>2]=0,!0&268435456==(2013265920&t|0)?(a=0|Gt(0|e,0|t,56),M(),o=0|O(e,-2130706433&t|134217728,7&a,o,n),P=r,0|o):(P=r,0|(o=6))},_getDirectedEdgeOrigin:function(e,t,n){return e|=0,n|=0,!0&268435456==(2013265920&(t|=0)|0)?(i[n>>2]=e,i[n+4>>2]=-2130706433&t|134217728,0|(n=0)):0|(n=6)},_getHexagonAreaAvgKm2:function(e,t){return t|=0,(e|=0)>>>0>15?0|(t=4):(a[t>>3]=+a[20528+(e<<3)>>3],0|(t=0))},_getHexagonAreaAvgM2:function(e,t){return t|=0,(e|=0)>>>0>15?0|(t=4):(a[t>>3]=+a[20656+(e<<3)>>3],0|(t=0))},_getHexagonEdgeLengthAvgKm:function(e,t){return t|=0,(e|=0)>>>0>15?0|(t=4):(a[t>>3]=+a[20784+(e<<3)>>3],0|(t=0))},_getHexagonEdgeLengthAvgM:function(e,t){return t|=0,(e|=0)>>>0>15?0|(t=4):(a[t>>3]=+a[20912+(e<<3)>>3],0|(t=0))},_getIcosahedronFaces:function e(t,n,r){r|=0;var a,o=0,s=0,u=0,l=0,c=0,h=0,d=0,f=0;a=P,P=P+128|0,d=a+112|0,u=a+96|0,f=a,s=0|Gt(0|(t|=0),0|(n|=0),52),M(),c=15&s,i[d>>2]=c,l=0|Gt(0|t,0|n,45),M(),l&=127;e:do{if(0|z(l)){if(0|c)for(o=1;;){if(!(0==((h=0|qt(7,0,3*(15-o|0)|0))&t|0)&0==((0|M())&n|0))){s=0;break e}if(!(o>>>0<c>>>0))break;o=o+1|0}if(!(1&s))return h=0|qt(c+1|0,0,52),f=0|M()|-15728641&n,f=0|e((h|t)&~(d=0|qt(7,0,3*(14-c|0)|0)),f&~(0|M()),r),P=a,0|f;s=1}else s=0}while(0);if(!(o=0|We(t,n,u))){s?(Ee(u,d,f),h=5):(Pe(u,d,f),h=6);e:do{if(0|z(l))if(c)for(o=1;;){if(!(0==((l=0|qt(7,0,3*(15-o|0)|0))&t|0)&0==((0|M())&n|0))){t=2;break e}if(!(o>>>0<c>>>0)){t=5;break}o=o+1|0}else t=5;else t=2}while(0);Xt(0|r,-1,t<<2|0);e:do{if(s)for(u=0;;){if(Re(l=f+(u<<4)|0,0|i[d>>2]),l=0|i[l>>2],-1==(0|(c=0|i[r>>2]))|(0|c)==(0|l))o=r;else{s=0;do{if((s=s+1|0)>>>0>=t>>>0){o=1;break e}c=0|i[(o=r+(s<<2)|0)>>2]}while(!(-1==(0|c)|(0|c)==(0|l)))}if(i[o>>2]=l,(u=u+1|0)>>>0>=h>>>0){o=0;break}}else for(u=0;;){if(Ce(l=f+(u<<4)|0,0|i[d>>2],0,1),l=0|i[l>>2],-1==(0|(c=0|i[r>>2]))|(0|c)==(0|l))o=r;else{s=0;do{if((s=s+1|0)>>>0>=t>>>0){o=1;break e}c=0|i[(o=r+(s<<2)|0)>>2]}while(!(-1==(0|c)|(0|c)==(0|l)))}if(i[o>>2]=l,(u=u+1|0)>>>0>=h>>>0){o=0;break}}}while(0)}return P=a,0|(f=o)},_getNumCells:tt,_getPentagons:Qe,_getRes0Cells:function(e){e|=0;var t=0,n=0,r=0;t=0;do{qt(0|t,0,45),r=134225919|M(),i[(n=e+(t<<3)|0)>>2]=-1,i[n+4>>2]=r,t=t+1|0}while(122!=(0|t));return 0},_getResolution:function(e,t){return t=0|Gt(0|(e|=0),0|(t|=0),52),M(),15&t|0},_greatCircleDistanceKm:et,_greatCircleDistanceM:function(e,t){e|=0;var n,r,i,o=0;return r=+a[(t|=0)>>3],n=+a[e>>3],o=(i=+f(.5*(r-n)))*i+(o=+f(.5*(+a[t+8>>3]-+a[e+8>>3])))*(+d(+r)*+d(+n)*o),2*+g(+ +c(+o),+ +c(+(1-o)))*6371.007180918475*1e3},_greatCircleDistanceRads:function(e,t){e|=0;var n,r,i,o=0;return r=+a[(t|=0)>>3],n=+a[e>>3],o=(i=+f(.5*(r-n)))*i+(o=+f(.5*(+a[t+8>>3]-+a[e+8>>3])))*(+d(+r)*+d(+n)*o),2*+g(+ +c(+o),+ +c(+(1-o)))},_gridDisk:N,_gridDiskDistances:I,_gridDistance:function(e,t,n,r,a){n|=0,r|=0,a|=0;var o,s,u=0,l=0;return s=P,P=P+32|0,l=s,0|(o=0|lt(e|=0,t|=0,e,t,u=s+12|0))?(P=s,0|(l=o)):0|(e=0|lt(e,t,n,r,l))?(P=s,0|(l=e)):(u=0|ge(u,l),i[(l=a)>>2]=u,i[l+4>>2]=((0|u)<0)<<31>>31,P=s,0|(l=0))},_gridPathCells:function(e,t,n,r,a){n|=0,r|=0,a|=0;var o,s=0,u=0,c=0,h=0,d=0,f=0,p=0,A=0,v=0,m=0,g=0,y=0,b=0,x=0,_=0,w=0,S=0,T=0,E=0;if(o=P,P=P+48|0,c=o+12|0,T=o,!(s=0|lt(e|=0,t|=0,e,t,u=o+24|0))&&!(s=0|lt(e,t,n,r,c))){S=((0|(w=0|ge(u,c)))<0)<<31>>31,i[u>>2]=0,i[u+4>>2]=0,i[u+8>>2]=0,i[c>>2]=0,i[c+4>>2]=0,i[c+8>>2]=0,0|lt(e,t,e,t,u)&&k(23313,23090,691,23299),0|lt(e,t,n,r,c)&&k(23313,23090,696,23299),xe(u),xe(c),w?(m=+(0|w),_=u,r=p=0|i[u>>2],s=A=0|i[(b=u+4|0)>>2],n=v=0|i[(x=u+8|0)>>2],g=+((0|i[c>>2])-p|0)/m,y=+((0|i[c+4>>2])-A|0)/m,m=+((0|i[c+8>>2])-v|0)/m):(b=s=u+4|0,x=n=u+8|0,_=u,r=0|i[u>>2],s=0|i[s>>2],n=0|i[n>>2],g=0,y=0,m=0),i[T>>2]=r,i[(v=T+4|0)>>2]=s,i[(A=T+8|0)>>2]=n;e:do{if((0|w)<0)s=0;else for(f=0,p=0,s=r;;){E=g*(d=+(p>>>0)+4294967296*+(0|f))+ +(0|s),h=y*d+ +(0|i[b>>2]),d=m*d+ +(0|i[x>>2]),n=~~+jt(+E),u=~~+jt(+h),s=~~+jt(+d),E=+l(+(+(0|n)-E)),h=+l(+(+(0|u)-h)),d=+l(+(+(0|s)-d));do{if(!(E>h&E>d)){if(c=0-n|0,h>d){r=c-s|0;break}r=u,s=c-u|0;break}n=0-(u+s)|0,r=u}while(0);if(i[T>>2]=n,i[v>>2]=r,i[A>>2]=s,_e(T),0|(s=0|ct(e,t,T,a+(p<<3)|0)))break e;if(!((0|f)<(0|S)|(0|f)==(0|S)&p>>>0<w>>>0)){s=0;break e}s=0|Pt(0|p,0|f,1,0),f=c=0|M(),p=s,s=0|i[_>>2]}}while(0);return P=o,0|(T=s)}return P=o,0|(T=s)},_gridPathCellsSize:function(e,t,n,r,a){n|=0,r|=0,a|=0;var o,s=0,u=0,l=0;return o=P,P=P+32|0,l=o,(s=0|lt(e|=0,t|=0,e,t,u=o+12|0))||(s=0|lt(e,t,n,r,l))?(P=o,0|(l=s)):(r=0|Pt(0|(r=0|ge(u,l)),((0|r)<0)<<31>>31|0,1,0),u=0|M(),i[(l=a)>>2]=r,i[l+4>>2]=u,P=o,0|(l=0))},_gridRingUnsafe:function(e,t,n,r){e|=0,t|=0,n|=0,r|=0;var a,o,s=0,u=0,l=0,c=0,h=0,d=0,f=0,p=0,A=0;if(o=P,P=P+16|0,A=o+8|0,i[(p=a=o)>>2]=e,i[p+4>>2]=t,!n)return i[(A=r)>>2]=e,i[A+4>>2]=t,P=o,0|(A=0);i[A>>2]=0;e:do{if(0|Oe(e,t))e=9;else{if(u=(0|n)>0){s=0,p=e;do{if(0|(e=0|O(p,t,4,A,a)))break e;if(s=s+1|0,0|Oe(p=0|i[(t=a)>>2],t=0|i[t+4>>2])){e=9;break e}}while((0|s)<(0|n));if(i[(f=r)>>2]=p,i[f+4>>2]=t,f=n+-1|0,u){d=0,e=1;do{if(s=22384+(d<<2)|0,5==(0|d))for(l=0|i[s>>2],u=0,s=e;;){if(0|(e=0|O(0|i[(e=a)>>2],0|i[e+4>>2],l,A,a)))break e;if((0|u)!=(0|f)){if(c=0|i[(h=a)>>2],h=0|i[h+4>>2],i[(e=r+(s<<3)|0)>>2]=c,i[e+4>>2]=h,0|Oe(c,h)){e=9;break e}e=s+1|0}else e=s;if((0|(u=u+1|0))>=(0|n))break;s=e}else for(l=a,h=0|i[s>>2],c=0,s=e,u=0|i[l>>2],l=0|i[l+4>>2];;){if(0|(e=0|O(u,l,h,A,a)))break e;if(u=0|i[(l=a)>>2],l=0|i[l+4>>2],i[(e=r+(s<<3)|0)>>2]=u,i[e+4>>2]=l,e=s+1|0,0|Oe(u,l)){e=9;break e}if((0|(c=c+1|0))>=(0|n))break;s=e}d=d+1|0}while(d>>>0<6);l=p,s=0|i[(e=a)>>2],u=t,e=0|i[e+4>>2]}else l=p,s=p,u=t,e=t}else i[(l=r)>>2]=e,i[l+4>>2]=t,l=e,s=e,u=t,e=t;e=(0|l)==(0|s)&(0|u)==(0|e)?0:9}}while(0);return P=o,0|(A=e)},_i64Add:Pt,_i64Subtract:Nt,_isPentagon:Oe,_isResClassIII:function(e,t){return t=0|Gt(0|(e|=0),0|(t|=0),52),M(),1&t|0},_isValidCell:Ie,_isValidDirectedEdge:function(e,t){var n=0;switch(n=0|Gt(0|(e|=0),0|(t|=0),56),M(),7&n){case 0:case 7:return 0|(n=0)}return n=-2130706433&t|134217728,!0&268435456==(2013265920&t|0)?!0&16777216==(117440512&t|0)&0!=(0|Oe(e,n))?0|(n=0):0|(n=0|Ie(e,n)):0|(n=0)},_isValidVertex:function(e,t){e|=0;var n,r,a=0,o=0;return r=P,P=P+16|0,n=r,!0&536870912==(2013265920&(t|=0)|0)&&0|Ie(e,a=-2130706433&t|134217728)?(o=0|Gt(0|e,0|t,56),M(),a=(o=0==(0|bt(e,a,7&o,n)))&((0|i[(a=n)>>2])==(0|e)?(0|i[a+4>>2])==(0|t):0)&1,P=r,0|a):(P=r,0|(a=0))},_latLngToCell:Ve,_llvm_maxnum_f64:Ht,_llvm_minnum_f64:Vt,_llvm_round_f64:jt,_localIjToCell:function(e,t,n,r,i){var a,o;return e|=0,t|=0,n|=0,i|=0,o=P,P=P+16|0,a=o,(r|=0)?n=15:(n=0|be(n,a))||(n=0|ct(e,t,a,i)),P=o,0|n},_malloc:Ct,_maxFaceCount:function(e,t,n){n|=0;var r=0,a=0;if(a=0|Gt(0|(e|=0),0|(t|=0),45),M(),!(0|z(127&a)))return a=2,i[n>>2]=a,0;if(a=0|Gt(0|e,0|t,52),M(),!(a&=15))return a=5,i[n>>2]=a,0;for(r=1;;){if(!(0==((0|qt(7,0,3*(15-r|0)|0))&e|0)&0==((0|M())&t|0))){r=2,e=6;break}if(!(r>>>0<a>>>0)){r=5,e=6;break}r=r+1|0}return 6==(0|e)?(i[n>>2]=r,0):0},_maxGridDiskSize:function(e,t){t|=0;var n=0,r=0,a=0;return(0|(e|=0))<0?0|(t=2):(0|e)>13780509?0|(t=0|tt(15,t)):(a=0|Ot(0|e,0|(n=((0|e)<0)<<31>>31),3,0),r=0|M(),n=0|Pt(0|e,0|n,1,0),n=0|Pt(0|(n=0|Ot(0|a,0|r,0|n,0|M())),0|M(),1,0),e=0|M(),i[t>>2]=n,i[t+4>>2]=e,0|(t=0))},_maxPolygonToCellsSize:function(e,t,n,r){t|=0,r|=0;var a,o=0,s=0,u=0,l=0,c=0;if(a=P,P=P+48|0,o=a+16|0,s=a+8|0,u=a,0|(n|=0))return P=a,0|(u=15);if(l=0|i[(c=e|=0)+4>>2],i[(n=s)>>2]=i[c>>2],i[n+4>>2]=l,ft(s,o),!(t=0|Q(o,t,u))){if(n=0|i[s>>2],(0|(s=0|i[e+8>>2]))>0){o=0|i[e+12>>2],t=0;do{n=(0|i[o+(t<<3)>>2])+n|0,t=t+1|0}while((0|t)<(0|s))}o=0|i[(t=u)>>2],(0|(t=0|i[t+4>>2]))<(0|(s=((0|n)<0)<<31>>31))|(0|t)==(0|s)&o>>>0<n>>>0?(i[(t=u)>>2]=n,i[t+4>>2]=s,t=s):n=o,l=0|Pt(0|n,0|t,12,0),c=0|M(),i[(t=u)>>2]=l,i[t+4>>2]=c,i[(t=r)>>2]=l,i[t+4>>2]=c,t=0}return P=a,0|(c=t)},_memcpy:Wt,_memset:Xt,_originToDirectedEdges:function(e,t,n){n|=0;var r,a=0;return r=0==(0|Oe(e|=0,t|=0)),t&=-2130706433,i[(a=n)>>2]=r?e:0,i[a+4>>2]=r?285212672|t:0,i[(a=n+8|0)>>2]=e,i[a+4>>2]=301989888|t,i[(a=n+16|0)>>2]=e,i[a+4>>2]=318767104|t,i[(a=n+24|0)>>2]=e,i[a+4>>2]=335544320|t,i[(a=n+32|0)>>2]=e,i[a+4>>2]=352321536|t,i[(n=n+40|0)>>2]=e,i[n+4>>2]=369098752|t,0},_pentagonCount:function(){return 12},_polygonToCells:function(e,t,n,r){t|=0,r|=0;var a,o,s,u,l=0,c=0,h=0,d=0,f=0,p=0,A=0,v=0,m=0,g=0,y=0,b=0,x=0,_=0,w=0,S=0,k=0,T=0,E=0,C=0,R=0,B=0,N=0,I=0,O=0,F=0,z=0;if(u=P,P=P+112|0,a=u+80|0,f=u+72|0,o=u,s=u+56|0,0|(n|=0))return P=u,0|(z=15);if(!(z=0|Ct(32+(i[(p=(e|=0)+8|0)>>2]<<5)|0)))return P=u,0|(z=13);if(pt(e,z),F=0|i[(O=e)+4>>2],i[(n=f)>>2]=i[O>>2],i[n+4>>2]=F,ft(f,a),n=0|Q(a,t,o))O=0,F=0;else{if(n=0|i[f>>2],(0|(c=0|i[p>>2]))>0){h=0|i[e+12>>2],l=0;do{n=(0|i[h+(l<<3)>>2])+n|0,l=l+1|0}while((0|l)!=(0|c));l=n}else l=n;c=0|i[(n=o)>>2],(0|(n=0|i[n+4>>2]))<(0|(h=((0|l)<0)<<31>>31))|(0|n)==(0|h)&c>>>0<l>>>0?(i[(n=o)>>2]=l,i[n+4>>2]=h,n=h):l=c,O=0|Pt(0|l,0|n,12,0),F=0|M(),i[(n=o)>>2]=O,i[n+4>>2]=F,n=0}if(0|n)return Rt(z),P=u,0|(z=n);if(!(l=0|Bt(O,8)))return Rt(z),P=u,0|(z=13);if(!(d=0|Bt(O,8)))return Rt(z),Rt(l),P=u,0|(z=13);i[(N=a)>>2]=0,i[N+4>>2]=0,I=0|i[(N=e)+4>>2],i[(n=f)>>2]=i[N>>2],i[n+4>>2]=I,n=0|U(f,O,F,t,a,l,d);e:do{if(n)Rt(l),Rt(d),Rt(z);else{t:do{if((0|i[p>>2])>0){for(h=e+12|0,c=0;n=0|U((0|i[h>>2])+(c<<3)|0,O,F,t,a,l,d),c=c+1|0,!(0|n);)if((0|c)>=(0|i[p>>2]))break t;Rt(l),Rt(d),Rt(z);break e}}while(0);(0|F)>0|0==(0|F)&O>>>0>0&&Xt(0|d,0,O<<3|0),N=0|i[(I=a)+4>>2];t:do{if((0|N)>0|0==(0|N)&(0|i[I>>2])>>>0>0){C=l,R=d,B=l,N=d,I=l,n=l,k=l,T=d,E=d,l=d;n:for(;;){for(x=0,_=0,w=0,S=0,c=0,h=0;;){f=(d=o)+56|0;do{i[d>>2]=0,d=d+4|0}while((0|d)<(0|f));if(0|D(p=0|i[(t=C+(x<<3)|0)>>2],t=0|i[t+4>>2],1,o,0)){f=(d=o)+56|0;do{i[d>>2]=0,d=d+4|0}while((0|d)<(0|f));0|(d=0|Bt(7,4))&&(L(p,t,1,o,d,7,0,0),Rt(d))}for(b=0;;){g=0|i[(y=o+(b<<3)|0)>>2],y=0|i[y+4>>2];r:do{if(0==(0|g)&0==(0|y))d=c,f=h;else{if(A=0|Ut(0|g,0|y,0|O,0|F),p=0|M(),!(0==(0|(f=0|i[(t=d=r+(A<<3)|0)>>2]))&0==(0|(t=0|i[t+4>>2])))){v=0,m=0;do{if((0|v)>(0|F)|(0|v)==(0|F)&m>>>0>O>>>0)break n;if((0|f)==(0|g)&(0|t)==(0|y)){d=c,f=h;break r}A=0|Ft(0|(d=0|Pt(0|A,0|p,1,0)),0|M(),0|O,0|F),p=0|M(),m=0|Pt(0|m,0|v,1,0),v=0|M(),f=0|i[(t=d=r+(A<<3)|0)>>2],t=0|i[t+4>>2]}while(!(0==(0|f)&0==(0|t)))}0==(0|g)&0==(0|y)?(d=c,f=h):(Xe(g,y,s),0|At(e,z,s)&&(m=0|Pt(0|c,0|h,1,0),h=0|M(),i[(v=d)>>2]=g,i[v+4>>2]=y,i[(c=R+(c<<3)|0)>>2]=g,i[c+4>>2]=y,c=m),d=c,f=h)}}while(0);if((b=b+1|0)>>>0>=7)break;c=d,h=f}if(x=0|Pt(0|x,0|_,1,0),_=0|M(),w=0|Pt(0|w,0|S,1,0),S=0|M(),c=0|i[(h=a)>>2],!((0|S)<(0|(h=0|i[h+4>>2]))|(0|S)==(0|h)&w>>>0<c>>>0))break;c=d,h=f}if((0|h)>0|0==(0|h)&c>>>0>0){c=0,h=0;do{i[(S=C+(c<<3)|0)>>2]=0,i[S+4>>2]=0,c=0|Pt(0|c,0|h,1,0),h=0|M(),w=0|i[(S=a)+4>>2]}while((0|h)<(0|w)|((0|h)==(0|w)?c>>>0<(0|i[S>>2])>>>0:0))}if(i[(S=a)>>2]=d,i[S+4>>2]=f,!((0|f)>0|0==(0|f)&d>>>0>0))break t;b=l,x=E,_=I,w=T,S=R,l=k,E=n,T=B,k=b,n=x,I=N,N=_,B=w,R=C,C=S}Rt(B),Rt(N),Rt(z),n=1;break e}n=d}while(0);Rt(z),Rt(l),Rt(n),n=0}}while(0);return P=u,0|(z=n)},_readInt64AsDoubleFromPointer:function(e){return+(+((0|i[(e|=0)>>2])>>>0)+4294967296*+(0|i[e+4>>2]))},_res0CellCount:function(){return 122},_round:Yt,_sbrk:Qt,_sizeOfCellBoundary:function(){return 168},_sizeOfCoordIJ:function(){return 8},_sizeOfGeoLoop:function(){return 8},_sizeOfGeoPolygon:function(){return 16},_sizeOfH3Index:function(){return 8},_sizeOfLatLng:function(){return 16},_sizeOfLinkedGeoPolygon:function(){return 12},_uncompactCells:function(e,t,n,r,a,o,s){e|=0,r|=0,a|=0,o|=0;var u,l=0,c=0,h=0,d=0,f=0,p=0,A=0,v=0;if(u=P,P=P+16|0,v=u,!((0|(n|=0))>0|0==(0|n)&(t|=0)>>>0>0))return P=u,0|(v=0);if((0|(s|=0))>=16)return P=u,0|(v=12);p=0,A=0,f=0,l=0;e:for(;;){if(d=0|Gt(0|(c=0|i[(h=e+(p<<3)|0)>>2]),0|(h=0|i[h+4>>2]),52),M(),(15&d|0)>(0|s)){l=12,c=11;break}if(Je(v,c,h,s),0==(0|(h=0|i[(d=v)>>2]))&0==(0|(d=0|i[d+4>>2])))c=f;else{c=f;do{if(!((0|l)<(0|o)|(0|l)==(0|o)&c>>>0<a>>>0)){c=10;break e}i[(f=r+(c<<3)|0)>>2]=h,i[f+4>>2]=d,c=0|Pt(0|c,0|l,1,0),l=0|M(),Ke(v),h=0|i[(f=v)>>2],d=0|i[f+4>>2]}while(!(0==(0|h)&0==(0|d)))}if(p=0|Pt(0|p,0|A,1,0),!((0|(A=0|M()))<(0|n)|(0|A)==(0|n)&p>>>0<t>>>0)){l=0,c=11;break}f=c}return 10==(0|c)?(P=u,0|(v=14)):11==(0|c)?(P=u,0|l):0},_uncompactCellsSize:function(e,t,n,r,a){e|=0,t|=0,n|=0,r|=0,a|=0;var o,s,u=0,l=0,c=0,h=0,d=0,f=0;s=P,P=P+16|0,o=s;e:do{if((0|n)>0|0==(0|n)&t>>>0>0){for(d=0,l=0,u=0,f=0;;){if(!(0==(0|(c=0|i[(h=e+(d<<3)|0)>>2]))&0==(0|(h=0|i[h+4>>2])))&&(h=0==(0|Le(c,h,r,o)),l=0|Pt(0|i[(c=o)>>2],0|i[c+4>>2],0|l,0|u),u=0|M(),!h)){u=12;break}if(d=0|Pt(0|d,0|f,1,0),!((0|(f=0|M()))<(0|n)|(0|f)==(0|n)&d>>>0<t>>>0))break e}return P=s,0|u}l=0,u=0}while(0);return i[a>>2]=l,i[a+4>>2]=u,P=s,0|(a=0)},_vertexToLatLng:function(e,t,n){n|=0;var r,a,o,s,u=0,l=0;return s=P,P=P+192|0,a=s,o=s+168|0,u=0|Gt(0|(e|=0),0|(t|=0),56),M(),u&=7,0|(r=0|We(e,l=-2130706433&t|134217728,o))?(P=s,0|(l=r)):(t=0|Gt(0|e,0|t,52),M(),t&=15,0|Oe(e,l)?Te(o,t,u,1,a):Be(o,t,u,1,a),l=a+8|0,i[n>>2]=i[l>>2],i[n+4>>2]=i[l+4>>2],i[n+8>>2]=i[l+8>>2],i[n+12>>2]=i[l+12>>2],P=s,0|(l=0))},establishStackSpace:function(e,t){P=e|=0},stackAlloc:function(e){var t;return t=P,P=(P=P+(e|=0)|0)+15&-16,0|t},stackRestore:function(e){P=e|=0},stackSave:function(){return 0|P}}}({Math:Math,Int8Array:Int8Array,Int32Array:Int32Array,Uint8Array:Uint8Array,Float32Array:Float32Array,Float64Array:Float64Array},K,A),$=(n.___divdi3=Z.___divdi3,n.___muldi3=Z.___muldi3,n.___remdi3=Z.___remdi3,n.___uremdi3=Z.___uremdi3,n._areNeighborCells=Z._areNeighborCells,n._bitshift64Ashr=Z._bitshift64Ashr,n._bitshift64Lshr=Z._bitshift64Lshr,n._bitshift64Shl=Z._bitshift64Shl,n._calloc=Z._calloc,n._cellAreaKm2=Z._cellAreaKm2,n._cellAreaM2=Z._cellAreaM2,n._cellAreaRads2=Z._cellAreaRads2,n._cellToBoundary=Z._cellToBoundary,n._cellToCenterChild=Z._cellToCenterChild,n._cellToChildPos=Z._cellToChildPos,n._cellToChildren=Z._cellToChildren,n._cellToChildrenSize=Z._cellToChildrenSize,n._cellToLatLng=Z._cellToLatLng,n._cellToLocalIj=Z._cellToLocalIj,n._cellToParent=Z._cellToParent,n._cellToVertex=Z._cellToVertex,n._cellToVertexes=Z._cellToVertexes,n._cellsToDirectedEdge=Z._cellsToDirectedEdge,n._cellsToLinkedMultiPolygon=Z._cellsToLinkedMultiPolygon,n._childPosToCell=Z._childPosToCell,n._compactCells=Z._compactCells,n._destroyLinkedMultiPolygon=Z._destroyLinkedMultiPolygon,n._directedEdgeToBoundary=Z._directedEdgeToBoundary,n._directedEdgeToCells=Z._directedEdgeToCells,n._edgeLengthKm=Z._edgeLengthKm,n._edgeLengthM=Z._edgeLengthM,n._edgeLengthRads=Z._edgeLengthRads,n._emscripten_replace_memory=Z._emscripten_replace_memory),ee=(n._free=Z._free,n._getBaseCellNumber=Z._getBaseCellNumber,n._getDirectedEdgeDestination=Z._getDirectedEdgeDestination,n._getDirectedEdgeOrigin=Z._getDirectedEdgeOrigin,n._getHexagonAreaAvgKm2=Z._getHexagonAreaAvgKm2,n._getHexagonAreaAvgM2=Z._getHexagonAreaAvgM2,n._getHexagonEdgeLengthAvgKm=Z._getHexagonEdgeLengthAvgKm,n._getHexagonEdgeLengthAvgM=Z._getHexagonEdgeLengthAvgM,n._getIcosahedronFaces=Z._getIcosahedronFaces,n._getNumCells=Z._getNumCells,n._getPentagons=Z._getPentagons,n._getRes0Cells=Z._getRes0Cells,n._getResolution=Z._getResolution,n._greatCircleDistanceKm=Z._greatCircleDistanceKm,n._greatCircleDistanceM=Z._greatCircleDistanceM,n._greatCircleDistanceRads=Z._greatCircleDistanceRads,n._gridDisk=Z._gridDisk,n._gridDiskDistances=Z._gridDiskDistances,n._gridDistance=Z._gridDistance,n._gridPathCells=Z._gridPathCells,n._gridPathCellsSize=Z._gridPathCellsSize,n._gridRingUnsafe=Z._gridRingUnsafe,n._i64Add=Z._i64Add,n._i64Subtract=Z._i64Subtract,n._isPentagon=Z._isPentagon,n._isResClassIII=Z._isResClassIII,n._isValidCell=Z._isValidCell,n._isValidDirectedEdge=Z._isValidDirectedEdge,n._isValidVertex=Z._isValidVertex,n._latLngToCell=Z._latLngToCell,n._llvm_maxnum_f64=Z._llvm_maxnum_f64,n._llvm_minnum_f64=Z._llvm_minnum_f64,n._llvm_round_f64=Z._llvm_round_f64,n._localIjToCell=Z._localIjToCell,n._malloc=Z._malloc,n._maxFaceCount=Z._maxFaceCount,n._maxGridDiskSize=Z._maxGridDiskSize,n._maxPolygonToCellsSize=Z._maxPolygonToCellsSize,n._memcpy=Z._memcpy,n._memset=Z._memset,n._originToDirectedEdges=Z._originToDirectedEdges,n._pentagonCount=Z._pentagonCount,n._polygonToCells=Z._polygonToCells,n._readInt64AsDoubleFromPointer=Z._readInt64AsDoubleFromPointer,n._res0CellCount=Z._res0CellCount,n._round=Z._round,n._sbrk=Z._sbrk,n._sizeOfCellBoundary=Z._sizeOfCellBoundary,n._sizeOfCoordIJ=Z._sizeOfCoordIJ,n._sizeOfGeoLoop=Z._sizeOfGeoLoop,n._sizeOfGeoPolygon=Z._sizeOfGeoPolygon,n._sizeOfH3Index=Z._sizeOfH3Index,n._sizeOfLatLng=Z._sizeOfLatLng,n._sizeOfLinkedGeoPolygon=Z._sizeOfLinkedGeoPolygon,n._uncompactCells=Z._uncompactCells,n._uncompactCellsSize=Z._uncompactCellsSize,n._vertexToLatLng=Z._vertexToLatLng,n.establishStackSpace=Z.establishStackSpace,n.stackAlloc=Z.stackAlloc),te=n.stackRestore=Z.stackRestore,ne=n.stackSave=Z.stackSave;if(n.asm=Z,n.cwrap=function(e,t,n,r){var i=(n=n||[]).every((function(e){return"number"===e}));return"string"!==t&&i&&!r?h(e):function(){return d(e,t,n,arguments)}},n.setValue=function(e,t,n,r){switch("*"===(n=n||"i8").charAt(n.length-1)&&(n="i32"),n){case"i1":case"i8":v[e>>0]=t;break;case"i16":g[e>>1]=t;break;case"i32":y[e>>2]=t;break;case"i64":F=[t>>>0,(O=t,+R(O)>=1?O>0?(0|N(+P(O/4294967296),4294967295))>>>0:~~+B((O-+(~~O>>>0))/4294967296)>>>0:0)],y[e>>2]=F[0],y[e+4>>2]=F[1];break;case"float":b[e>>2]=t;break;case"double":x[e>>3]=t;break;default:ue("invalid type for setValue: "+n)}},n.getValue=function(e,t,n){switch("*"===(t=t||"i8").charAt(t.length-1)&&(t="i32"),t){case"i1":case"i8":return v[e>>0];case"i16":return g[e>>1];case"i32":case"i64":return y[e>>2];case"float":return b[e>>2];case"double":return x[e>>3];default:ue("invalid type for getValue: "+t)}return null},U){G(U)||(Q=U,U=n.locateFile?n.locateFile(Q,o):o+Q),I++,n.monitorRunDependencies&&n.monitorRunDependencies(I);var re=function(e){e.byteLength&&(e=new Uint8Array(e)),m.set(e,8),n.memoryInitializerRequest&&delete n.memoryInitializerRequest.response,function(e){if(I--,n.monitorRunDependencies&&n.monitorRunDependencies(I),0==I&&(null!==D&&(clearInterval(D),D=null),L)){var t=L;L=null,t()}}()},ie=function(){i(U,re,(function(){throw"could not load memory initializer "+U}))},ae=Y(U);if(ae)re(ae.buffer);else if(n.memoryInitializerRequest){var oe=function(){var e=n.memoryInitializerRequest,t=e.response;if(200!==e.status&&0!==e.status){var r=Y(n.memoryInitializerRequestURL);if(!r)return console.warn("a problem seems to have happened with Module.memoryInitializerRequest, status: "+e.status+", retrying "+U),void ie();t=r.buffer}re(t)};n.memoryInitializerRequest.response?setTimeout(oe,0):n.memoryInitializerRequest.addEventListener("load",oe)}else ie()}function se(e){function t(){J||(J=!0,c||(M(T),M(E),n.onRuntimeInitialized&&n.onRuntimeInitialized(),function(){if(n.postRun)for("function"==typeof n.postRun&&(n.postRun=[n.postRun]);n.postRun.length;)e=n.postRun.shift(),C.unshift(e);var e;M(C)}()))}e=e||a,I>0||(!function(){if(n.preRun)for("function"==typeof n.preRun&&(n.preRun=[n.preRun]);n.preRun.length;)e=n.preRun.shift(),k.unshift(e);var e;M(k)}(),I>0||(n.setStatus?(n.setStatus("Running..."),setTimeout((function(){setTimeout((function(){n.setStatus("")}),1),t()}),1)):t()))}function ue(e){throw n.onAbort&&n.onAbort(e),s(e+=""),u(e),c=!0,"abort("+e+"). Build with -s ASSERTIONS=1 for more info."}if(L=function e(){J||se(),J||(L=e)},n.run=se,n.abort=ue,n.preInit)for("function"==typeof n.preInit&&(n.preInit=[n.preInit]);n.preInit.length>0;)n.preInit.pop()();return se(),e}("object"===typeof KR?KR:{}),ZR="number",$R={0:"Success",1:"The operation failed but a more specific error is not available",2:"Argument was outside of acceptable range",3:"Latitude or longitude arguments were outside of acceptable range",4:"Resolution argument was outside of acceptable range",5:"Cell argument was not valid",6:"Directed edge argument was not valid",7:"Undirected edge argument was not valid",8:"Vertex argument was not valid",9:"Pentagon distortion was encountered",10:"Duplicate input",11:"Cell arguments were not neighbors",12:"Cell arguments had incompatible resolutions",13:"Memory allocation failed",14:"Bounds of provided memory were insufficient",15:"Mode or flags argument was not valid"},eB={1e3:"Unknown unit",1001:"Array length out of bounds",1002:"Got unexpected null value for H3 index"};function tB(e,t,n){var r=n&&"value"in n,i=new Error((e[t]||"Unknown error")+" (code: "+t+(r?", value: "+n.value:"")+")");return i.code=t,i}function nB(e,t){var n=2===arguments.length?{value:t}:{};return tB($R,e,n)}function rB(e,t){var n=2===arguments.length?{value:t}:{};return tB(eB,e,n)}function iB(e){if(0!==e)throw nB(e)}var aB={};[["sizeOfH3Index",ZR],["sizeOfLatLng",ZR],["sizeOfCellBoundary",ZR],["sizeOfGeoLoop",ZR],["sizeOfGeoPolygon",ZR],["sizeOfLinkedGeoPolygon",ZR],["sizeOfCoordIJ",ZR],["readInt64AsDoubleFromPointer",ZR],["isValidCell",ZR,[ZR,ZR]],["latLngToCell",ZR,[ZR,ZR,ZR,ZR]],["cellToLatLng",ZR,[ZR,ZR,ZR]],["cellToBoundary",ZR,[ZR,ZR,ZR]],["maxGridDiskSize",ZR,[ZR,ZR]],["gridDisk",ZR,[ZR,ZR,ZR,ZR]],["gridDiskDistances",ZR,[ZR,ZR,ZR,ZR,ZR]],["gridRingUnsafe",ZR,[ZR,ZR,ZR,ZR]],["maxPolygonToCellsSize",ZR,[ZR,ZR,ZR,ZR]],["polygonToCells",ZR,[ZR,ZR,ZR,ZR]],["cellsToLinkedMultiPolygon",ZR,[ZR,ZR,ZR]],["destroyLinkedMultiPolygon",null,[ZR]],["compactCells",ZR,[ZR,ZR,ZR,ZR]],["uncompactCells",ZR,[ZR,ZR,ZR,ZR,ZR,ZR]],["uncompactCellsSize",ZR,[ZR,ZR,ZR,ZR,ZR]],["isPentagon",ZR,[ZR,ZR]],["isResClassIII",ZR,[ZR,ZR]],["getBaseCellNumber",ZR,[ZR,ZR]],["getResolution",ZR,[ZR,ZR]],["maxFaceCount",ZR,[ZR,ZR,ZR]],["getIcosahedronFaces",ZR,[ZR,ZR,ZR]],["cellToParent",ZR,[ZR,ZR,ZR,ZR]],["cellToChildren",ZR,[ZR,ZR,ZR,ZR]],["cellToCenterChild",ZR,[ZR,ZR,ZR,ZR]],["cellToChildrenSize",ZR,[ZR,ZR,ZR,ZR]],["cellToChildPos",ZR,[ZR,ZR,ZR,ZR]],["childPosToCell",ZR,[ZR,ZR,ZR,ZR,ZR,ZR]],["areNeighborCells",ZR,[ZR,ZR,ZR,ZR,ZR]],["cellsToDirectedEdge",ZR,[ZR,ZR,ZR,ZR,ZR]],["getDirectedEdgeOrigin",ZR,[ZR,ZR,ZR]],["getDirectedEdgeDestination",ZR,[ZR,ZR,ZR]],["isValidDirectedEdge",ZR,[ZR,ZR]],["directedEdgeToCells",ZR,[ZR,ZR,ZR]],["originToDirectedEdges",ZR,[ZR,ZR,ZR]],["directedEdgeToBoundary",ZR,[ZR,ZR,ZR]],["gridDistance",ZR,[ZR,ZR,ZR,ZR,ZR]],["gridPathCells",ZR,[ZR,ZR,ZR,ZR,ZR]],["gridPathCellsSize",ZR,[ZR,ZR,ZR,ZR,ZR]],["cellToLocalIj",ZR,[ZR,ZR,ZR,ZR,ZR,ZR]],["localIjToCell",ZR,[ZR,ZR,ZR,ZR,ZR]],["getHexagonAreaAvgM2",ZR,[ZR,ZR]],["getHexagonAreaAvgKm2",ZR,[ZR,ZR]],["getHexagonEdgeLengthAvgM",ZR,[ZR,ZR]],["getHexagonEdgeLengthAvgKm",ZR,[ZR,ZR]],["greatCircleDistanceM",ZR,[ZR,ZR]],["greatCircleDistanceKm",ZR,[ZR,ZR]],["greatCircleDistanceRads",ZR,[ZR,ZR]],["cellAreaM2",ZR,[ZR,ZR,ZR]],["cellAreaKm2",ZR,[ZR,ZR,ZR]],["cellAreaRads2",ZR,[ZR,ZR,ZR]],["edgeLengthM",ZR,[ZR,ZR,ZR]],["edgeLengthKm",ZR,[ZR,ZR,ZR]],["edgeLengthRads",ZR,[ZR,ZR,ZR]],["getNumCells",ZR,[ZR,ZR]],["getRes0Cells",ZR,[ZR]],["res0CellCount",ZR],["getPentagons",ZR,[ZR,ZR]],["pentagonCount",ZR],["cellToVertex",ZR,[ZR,ZR,ZR,ZR]],["cellToVertexes",ZR,[ZR,ZR,ZR]],["vertexToLatLng",ZR,[ZR,ZR,ZR]],["isValidVertex",ZR,[ZR,ZR]]].forEach((function(e){aB[e[0]]=KR.cwrap.apply(KR,e)}));var oB=16,sB=aB.sizeOfH3Index(),uB=aB.sizeOfLatLng(),lB=aB.sizeOfCellBoundary(),cB=aB.sizeOfGeoPolygon(),hB=aB.sizeOfGeoLoop();aB.sizeOfLinkedGeoPolygon(),aB.sizeOfCoordIJ();function dB(e){if("number"!==typeof e||e<0||e>15||Math.floor(e)!==e)throw nB(4,e);return e}function fB(e){if(!e)throw rB(1002);return e}var pB=Math.pow(2,32)-1;function AB(e){if(e>pB)throw rB(1001,e);return e}var vB=/[^0-9a-fA-F]/;function mB(e){if(Array.isArray(e)&&2===e.length&&Number.isInteger(e[0])&&Number.isInteger(e[1]))return e;if("string"!==typeof e||vB.test(e))return[0,0];var t=parseInt(e.substring(0,e.length-8),oB);return[parseInt(e.substring(e.length-8),oB),t]}function gB(e){if(e>=0)return e.toString(oB);var t=yB(8,(e&=2147483647).toString(oB));return t=(parseInt(t[0],oB)+8).toString(oB)+t.substring(1)}function yB(e,t){for(var n=e-t.length,r="",i=0;i<n;i++)r+="0";return r+=t}Math.pow(2,32);function bB(e,t,n){for(var r=e.length,i=KR._calloc(r,uB),a=n?1:0,o=n?0:1,s=0;s<2*r;s+=2)KR.HEAPF64.set([e[s/2][a],e[s/2][o]].map(PB),i/8+s);return KR.HEAPU32.set([r,i],t/4),t}function xB(e,t){void 0===t&&(t=0);var n=KR.getValue(e+sB*t,"i32"),r=KR.getValue(e+sB*t+4,"i32");return r?function(e,t){return gB(t)+yB(8,gB(e))}(n,r):null}function _B(e){return aB.readInt64AsDoubleFromPointer(e)}function wB(e,t){for(var n=[],r=0;r<t;r++){var i=xB(e,r);null!==i&&n.push(i)}return n}function SB(e){return 180*KR.getValue(e,"double")/Math.PI}function MB(e){return[SB(e),SB(e+8)]}function kB(e){return[SB(e+8),SB(e)]}function TB(e,t,n){for(var r=KR.getValue(e,"i32"),i=e+8,a=[],o=t?kB:MB,s=0;s<2*r;s+=2)a.push(o(i+8*s));return n&&a.push(a[0]),a}function EB(e,t,n){var r=KR._malloc(uB);KR.HEAPF64.set([e,t].map(PB),r/8);var i=KR._malloc(sB);try{return iB(aB.latLngToCell(r,n,i)),fB(xB(i))}finally{KR._free(i),KR._free(r)}}function CB(e){var t=KR._malloc(uB),n=mB(e),r=n[0],i=n[1];try{return iB(aB.cellToLatLng(r,i,t)),MB(t)}finally{KR._free(t)}}function RB(e,t){var n=KR._malloc(lB),r=mB(e),i=r[0],a=r[1];try{return iB(aB.cellToBoundary(i,a,n)),TB(n,t,t)}finally{KR._free(n)}}function BB(e,t,n){if(dB(t),n=Boolean(n),0===e.length||0===e[0].length)return[];var r=function(e,t){var n,r=e.length-1,i=KR._calloc(cB),a=0+hB,o=a+4;if(bB(e[0],i+0,t),r>0){n=KR._calloc(r,hB);for(var s=0;s<r;s++)bB(e[s+1],n+hB*s,t)}return KR.setValue(i+a,r,"i32"),KR.setValue(i+o,n,"i32"),i}("number"===typeof e[0][0]?[e]:e,n),i=KR._malloc(8);try{iB(aB.maxPolygonToCellsSize(r,t,0,i));var a=AB(_B(i)),o=KR._calloc(a,sB);try{return iB(aB.polygonToCells(r,t,0,o)),wB(o,a)}finally{KR._free(o)}}finally{KR._free(i),function(e){var t=0+hB,n=t+4;KR._free(KR.getValue(e+0+4,"i8*"));var r=KR.getValue(e+t,"i32");if(r>0){for(var i=KR.getValue(e+n,"i32"),a=0;a<r;a++)KR._free(KR.getValue(i+hB*a+4,"i8*"));KR._free(i)}KR._free(e)}(r)}}function PB(e){return e*Math.PI/180}function NB(e,t){var n=0;if(void 0===t){var r,i=ee(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;(a=+a)&&(n+=a)}}catch(c){i.e(c)}finally{i.f()}}else{var o,s=-1,u=ee(e);try{for(u.s();!(o=u.n()).done;){var l=o.value;(l=+t(l,++s,e))&&(n+=l)}}catch(c){u.e(c)}finally{u.f()}}return n}var IB=n(7623),DB=new Hi,LB=new zi,OB=function(e){Y(n,e);var t=$(n);function n(){var e;V(this,n),(e=t.call(this)).isLineSegmentsGeometry=!0,e.type="LineSegmentsGeometry";return e.setIndex([0,2,1,2,3,1,2,4,3,4,5,3,4,6,5,6,7,5]),e.setAttribute("position",new Ro([-1,2,0,1,2,0,-1,1,0,1,1,0,-1,0,0,1,0,0,-1,-1,0,1,-1,0],3)),e.setAttribute("uv",new Ro([-1,2,1,2,-1,1,1,1,-1,-1,1,-1,-1,-2,1,-2],2)),e}return W(n,[{key:"applyMatrix4",value:function(e){var t=this.attributes.instanceStart,n=this.attributes.instanceEnd;return void 0!==t&&(t.applyMatrix4(e),n.applyMatrix4(e),t.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}},{key:"setPositions",value:function(e){var t;e instanceof Float32Array?t=e:Array.isArray(e)&&(t=new Float32Array(e));var n=new wA(t,6,1);return this.setAttribute("instanceStart",new gc(n,3,0)),this.setAttribute("instanceEnd",new gc(n,3,3)),this.instanceCount=this.attributes.instanceStart.count,this.computeBoundingBox(),this.computeBoundingSphere(),this}},{key:"setColors",value:function(e){var t;e instanceof Float32Array?t=e:Array.isArray(e)&&(t=new Float32Array(e));var n=new wA(t,6,1);return this.setAttribute("instanceColorStart",new gc(n,3,0)),this.setAttribute("instanceColorEnd",new gc(n,3,3)),this}},{key:"fromWireframeGeometry",value:function(e){return this.setPositions(e.attributes.position.array),this}},{key:"fromEdgesGeometry",value:function(e){return this.setPositions(e.attributes.position.array),this}},{key:"fromMesh",value:function(e){return this.fromWireframeGeometry(new bf(e.geometry)),this}},{key:"fromLineSegments",value:function(e){var t=e.geometry;return this.setPositions(t.attributes.position.array),this}},{key:"computeBoundingBox",value:function(){null===this.boundingBox&&(this.boundingBox=new Hi);var e=this.attributes.instanceStart,t=this.attributes.instanceEnd;void 0!==e&&void 0!==t&&(this.boundingBox.setFromBufferAttribute(e),DB.setFromBufferAttribute(t),this.boundingBox.union(DB))}},{key:"computeBoundingSphere",value:function(){null===this.boundingSphere&&(this.boundingSphere=new sa),null===this.boundingBox&&this.computeBoundingBox();var e=this.attributes.instanceStart,t=this.attributes.instanceEnd;if(void 0!==e&&void 0!==t){var n=this.boundingSphere.center;this.boundingBox.getCenter(n);for(var r=0,i=0,a=e.count;i<a;i++)LB.fromBufferAttribute(e,i),r=Math.max(r,n.distanceToSquared(LB)),LB.fromBufferAttribute(t,i),r=Math.max(r,n.distanceToSquared(LB));this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error("THREE.LineSegmentsGeometry.computeBoundingSphere(): Computed radius is NaN. The instanced position data is likely to have NaN values.",this)}}},{key:"toJSON",value:function(){}},{key:"applyMatrix",value:function(e){return console.warn("THREE.LineSegmentsGeometry: applyMatrix() has been renamed to applyMatrix4()."),this.applyMatrix4(e)}}]),n}(Ip);Ss.line={worldUnits:{value:1},linewidth:{value:1},resolution:{value:new ii(1,1)},dashOffset:{value:0},dashScale:{value:1},dashSize:{value:1},gapSize:{value:1}},Ms.line={uniforms:ns.merge([Ss.common,Ss.fog,Ss.line]),vertexShader:"\n\t\t#include <common>\n\t\t#include <color_pars_vertex>\n\t\t#include <fog_pars_vertex>\n\t\t#include <logdepthbuf_pars_vertex>\n\t\t#include <clipping_planes_pars_vertex>\n\n\t\tuniform float linewidth;\n\t\tuniform vec2 resolution;\n\n\t\tattribute vec3 instanceStart;\n\t\tattribute vec3 instanceEnd;\n\n\t\tattribute vec3 instanceColorStart;\n\t\tattribute vec3 instanceColorEnd;\n\n\t\t#ifdef WORLD_UNITS\n\n\t\t\tvarying vec4 worldPos;\n\t\t\tvarying vec3 worldStart;\n\t\t\tvarying vec3 worldEnd;\n\n\t\t\t#ifdef USE_DASH\n\n\t\t\t\tvarying vec2 vUv;\n\n\t\t\t#endif\n\n\t\t#else\n\n\t\t\tvarying vec2 vUv;\n\n\t\t#endif\n\n\t\t#ifdef USE_DASH\n\n\t\t\tuniform float dashScale;\n\t\t\tattribute float instanceDistanceStart;\n\t\t\tattribute float instanceDistanceEnd;\n\t\t\tvarying float vLineDistance;\n\n\t\t#endif\n\n\t\tvoid trimSegment( const in vec4 start, inout vec4 end ) {\n\n\t\t\t// trim end segment so it terminates between the camera plane and the near plane\n\n\t\t\t// conservative estimate of the near plane\n\t\t\tfloat a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column\n\t\t\tfloat b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column\n\t\t\tfloat nearEstimate = - 0.5 * b / a;\n\n\t\t\tfloat alpha = ( nearEstimate - start.z ) / ( end.z - start.z );\n\n\t\t\tend.xyz = mix( start.xyz, end.xyz, alpha );\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\t#ifdef USE_COLOR\n\n\t\t\t\tvColor.xyz = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;\n\n\t\t\t#endif\n\n\t\t\t#ifdef USE_DASH\n\n\t\t\t\tvLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;\n\t\t\t\tvUv = uv;\n\n\t\t\t#endif\n\n\t\t\tfloat aspect = resolution.x / resolution.y;\n\n\t\t\t// camera space\n\t\t\tvec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );\n\t\t\tvec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );\n\n\t\t\t#ifdef WORLD_UNITS\n\n\t\t\t\tworldStart = start.xyz;\n\t\t\t\tworldEnd = end.xyz;\n\n\t\t\t#else\n\n\t\t\t\tvUv = uv;\n\n\t\t\t#endif\n\n\t\t\t// special case for perspective projection, and segments that terminate either in, or behind, the camera plane\n\t\t\t// clearly the gpu firmware has a way of addressing this issue when projecting into ndc space\n\t\t\t// but we need to perform ndc-space calculations in the shader, so we must address this issue directly\n\t\t\t// perhaps there is a more elegant solution -- WestLangley\n\n\t\t\tbool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 ); // 4th entry in the 3rd column\n\n\t\t\tif ( perspective ) {\n\n\t\t\t\tif ( start.z < 0.0 && end.z >= 0.0 ) {\n\n\t\t\t\t\ttrimSegment( start, end );\n\n\t\t\t\t} else if ( end.z < 0.0 && start.z >= 0.0 ) {\n\n\t\t\t\t\ttrimSegment( end, start );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// clip space\n\t\t\tvec4 clipStart = projectionMatrix * start;\n\t\t\tvec4 clipEnd = projectionMatrix * end;\n\n\t\t\t// ndc space\n\t\t\tvec3 ndcStart = clipStart.xyz / clipStart.w;\n\t\t\tvec3 ndcEnd = clipEnd.xyz / clipEnd.w;\n\n\t\t\t// direction\n\t\t\tvec2 dir = ndcEnd.xy - ndcStart.xy;\n\n\t\t\t// account for clip-space aspect ratio\n\t\t\tdir.x *= aspect;\n\t\t\tdir = normalize( dir );\n\n\t\t\t#ifdef WORLD_UNITS\n\n\t\t\t\tvec3 worldDir = normalize( end.xyz - start.xyz );\n\t\t\t\tvec3 tmpFwd = normalize( mix( start.xyz, end.xyz, 0.5 ) );\n\t\t\t\tvec3 worldUp = normalize( cross( worldDir, tmpFwd ) );\n\t\t\t\tvec3 worldFwd = cross( worldDir, worldUp );\n\t\t\t\tworldPos = position.y < 0.5 ? start: end;\n\n\t\t\t\t// height offset\n\t\t\t\tfloat hw = linewidth * 0.5;\n\t\t\t\tworldPos.xyz += position.x < 0.0 ? hw * worldUp : - hw * worldUp;\n\n\t\t\t\t// don't extend the line if we're rendering dashes because we\n\t\t\t\t// won't be rendering the endcaps\n\t\t\t\t#ifndef USE_DASH\n\n\t\t\t\t\t// cap extension\n\t\t\t\t\tworldPos.xyz += position.y < 0.5 ? - hw * worldDir : hw * worldDir;\n\n\t\t\t\t\t// add width to the box\n\t\t\t\t\tworldPos.xyz += worldFwd * hw;\n\n\t\t\t\t\t// endcaps\n\t\t\t\t\tif ( position.y > 1.0 || position.y < 0.0 ) {\n\n\t\t\t\t\t\tworldPos.xyz -= worldFwd * 2.0 * hw;\n\n\t\t\t\t\t}\n\n\t\t\t\t#endif\n\n\t\t\t\t// project the worldpos\n\t\t\t\tvec4 clip = projectionMatrix * worldPos;\n\n\t\t\t\t// shift the depth of the projected points so the line\n\t\t\t\t// segments overlap neatly\n\t\t\t\tvec3 clipPose = ( position.y < 0.5 ) ? ndcStart : ndcEnd;\n\t\t\t\tclip.z = clipPose.z * clip.w;\n\n\t\t\t#else\n\n\t\t\t\tvec2 offset = vec2( dir.y, - dir.x );\n\t\t\t\t// undo aspect ratio adjustment\n\t\t\t\tdir.x /= aspect;\n\t\t\t\toffset.x /= aspect;\n\n\t\t\t\t// sign flip\n\t\t\t\tif ( position.x < 0.0 ) offset *= - 1.0;\n\n\t\t\t\t// endcaps\n\t\t\t\tif ( position.y < 0.0 ) {\n\n\t\t\t\t\toffset += - dir;\n\n\t\t\t\t} else if ( position.y > 1.0 ) {\n\n\t\t\t\t\toffset += dir;\n\n\t\t\t\t}\n\n\t\t\t\t// adjust for linewidth\n\t\t\t\toffset *= linewidth;\n\n\t\t\t\t// adjust for clip-space to screen-space conversion // maybe resolution should be based on viewport ...\n\t\t\t\toffset /= resolution.y;\n\n\t\t\t\t// select end\n\t\t\t\tvec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;\n\n\t\t\t\t// back to clip space\n\t\t\t\toffset *= clip.w;\n\n\t\t\t\tclip.xy += offset;\n\n\t\t\t#endif\n\n\t\t\tgl_Position = clip;\n\n\t\t\tvec4 mvPosition = ( position.y < 0.5 ) ? start : end; // this is an approximation\n\n\t\t\t#include <logdepthbuf_vertex>\n\t\t\t#include <clipping_planes_vertex>\n\t\t\t#include <fog_vertex>\n\n\t\t}\n\t\t",fragmentShader:"\n\t\tuniform vec3 diffuse;\n\t\tuniform float opacity;\n\t\tuniform float linewidth;\n\n\t\t#ifdef USE_DASH\n\n\t\t\tuniform float dashOffset;\n\t\t\tuniform float dashSize;\n\t\t\tuniform float gapSize;\n\n\t\t#endif\n\n\t\tvarying float vLineDistance;\n\n\t\t#ifdef WORLD_UNITS\n\n\t\t\tvarying vec4 worldPos;\n\t\t\tvarying vec3 worldStart;\n\t\t\tvarying vec3 worldEnd;\n\n\t\t\t#ifdef USE_DASH\n\n\t\t\t\tvarying vec2 vUv;\n\n\t\t\t#endif\n\n\t\t#else\n\n\t\t\tvarying vec2 vUv;\n\n\t\t#endif\n\n\t\t#include <common>\n\t\t#include <color_pars_fragment>\n\t\t#include <fog_pars_fragment>\n\t\t#include <logdepthbuf_pars_fragment>\n\t\t#include <clipping_planes_pars_fragment>\n\n\t\tvec2 closestLineToLine(vec3 p1, vec3 p2, vec3 p3, vec3 p4) {\n\n\t\t\tfloat mua;\n\t\t\tfloat mub;\n\n\t\t\tvec3 p13 = p1 - p3;\n\t\t\tvec3 p43 = p4 - p3;\n\n\t\t\tvec3 p21 = p2 - p1;\n\n\t\t\tfloat d1343 = dot( p13, p43 );\n\t\t\tfloat d4321 = dot( p43, p21 );\n\t\t\tfloat d1321 = dot( p13, p21 );\n\t\t\tfloat d4343 = dot( p43, p43 );\n\t\t\tfloat d2121 = dot( p21, p21 );\n\n\t\t\tfloat denom = d2121 * d4343 - d4321 * d4321;\n\n\t\t\tfloat numer = d1343 * d4321 - d1321 * d4343;\n\n\t\t\tmua = numer / denom;\n\t\t\tmua = clamp( mua, 0.0, 1.0 );\n\t\t\tmub = ( d1343 + d4321 * ( mua ) ) / d4343;\n\t\t\tmub = clamp( mub, 0.0, 1.0 );\n\n\t\t\treturn vec2( mua, mub );\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\t#include <clipping_planes_fragment>\n\n\t\t\t#ifdef USE_DASH\n\n\t\t\t\tif ( vUv.y < - 1.0 || vUv.y > 1.0 ) discard; // discard endcaps\n\n\t\t\t\tif ( mod( vLineDistance + dashOffset, dashSize + gapSize ) > dashSize ) discard; // todo - FIX\n\n\t\t\t#endif\n\n\t\t\tfloat alpha = opacity;\n\n\t\t\t#ifdef WORLD_UNITS\n\n\t\t\t\t// Find the closest points on the view ray and the line segment\n\t\t\t\tvec3 rayEnd = normalize( worldPos.xyz ) * 1e5;\n\t\t\t\tvec3 lineDir = worldEnd - worldStart;\n\t\t\t\tvec2 params = closestLineToLine( worldStart, worldEnd, vec3( 0.0, 0.0, 0.0 ), rayEnd );\n\n\t\t\t\tvec3 p1 = worldStart + lineDir * params.x;\n\t\t\t\tvec3 p2 = rayEnd * params.y;\n\t\t\t\tvec3 delta = p1 - p2;\n\t\t\t\tfloat len = length( delta );\n\t\t\t\tfloat norm = len / linewidth;\n\n\t\t\t\t#ifndef USE_DASH\n\n\t\t\t\t\t#ifdef USE_ALPHA_TO_COVERAGE\n\n\t\t\t\t\t\tfloat dnorm = fwidth( norm );\n\t\t\t\t\t\talpha = 1.0 - smoothstep( 0.5 - dnorm, 0.5 + dnorm, norm );\n\n\t\t\t\t\t#else\n\n\t\t\t\t\t\tif ( norm > 0.5 ) {\n\n\t\t\t\t\t\t\tdiscard;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t#endif\n\n\t\t\t\t#endif\n\n\t\t\t#else\n\n\t\t\t\t#ifdef USE_ALPHA_TO_COVERAGE\n\n\t\t\t\t\t// artifacts appear on some hardware if a derivative is taken within a conditional\n\t\t\t\t\tfloat a = vUv.x;\n\t\t\t\t\tfloat b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;\n\t\t\t\t\tfloat len2 = a * a + b * b;\n\t\t\t\t\tfloat dlen = fwidth( len2 );\n\n\t\t\t\t\tif ( abs( vUv.y ) > 1.0 ) {\n\n\t\t\t\t\t\talpha = 1.0 - smoothstep( 1.0 - dlen, 1.0 + dlen, len2 );\n\n\t\t\t\t\t}\n\n\t\t\t\t#else\n\n\t\t\t\t\tif ( abs( vUv.y ) > 1.0 ) {\n\n\t\t\t\t\t\tfloat a = vUv.x;\n\t\t\t\t\t\tfloat b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;\n\t\t\t\t\t\tfloat len2 = a * a + b * b;\n\n\t\t\t\t\t\tif ( len2 > 1.0 ) discard;\n\n\t\t\t\t\t}\n\n\t\t\t\t#endif\n\n\t\t\t#endif\n\n\t\t\tvec4 diffuseColor = vec4( diffuse, alpha );\n\n\t\t\t#include <logdepthbuf_fragment>\n\t\t\t#include <color_fragment>\n\n\t\t\tgl_FragColor = vec4( diffuseColor.rgb, alpha );\n\n\t\t\t#include <tonemapping_fragment>\n\t\t\t#include <colorspace_fragment>\n\t\t\t#include <fog_fragment>\n\t\t\t#include <premultiplied_alpha_fragment>\n\n\t\t}\n\t\t"};var FB,UB,zB=function(e){Y(n,e);var t=$(n);function n(e){var r;return V(this,n),(r=t.call(this,{uniforms:ns.clone(Ms.line.uniforms),vertexShader:Ms.line.vertexShader,fragmentShader:Ms.line.fragmentShader,clipping:!0})).isLineMaterial=!0,r.setValues(e),r}return W(n,[{key:"color",get:function(){return this.uniforms.diffuse.value},set:function(e){this.uniforms.diffuse.value=e}},{key:"worldUnits",get:function(){return"WORLD_UNITS"in this.defines},set:function(e){!0===e?this.defines.WORLD_UNITS="":delete this.defines.WORLD_UNITS}},{key:"linewidth",get:function(){return this.uniforms.linewidth.value},set:function(e){this.uniforms.linewidth&&(this.uniforms.linewidth.value=e)}},{key:"dashed",get:function(){return"USE_DASH"in this.defines},set:function(e){!0===e!==this.dashed&&(this.needsUpdate=!0),!0===e?this.defines.USE_DASH="":delete this.defines.USE_DASH}},{key:"dashScale",get:function(){return this.uniforms.dashScale.value},set:function(e){this.uniforms.dashScale.value=e}},{key:"dashSize",get:function(){return this.uniforms.dashSize.value},set:function(e){this.uniforms.dashSize.value=e}},{key:"dashOffset",get:function(){return this.uniforms.dashOffset.value},set:function(e){this.uniforms.dashOffset.value=e}},{key:"gapSize",get:function(){return this.uniforms.gapSize.value},set:function(e){this.uniforms.gapSize.value=e}},{key:"opacity",get:function(){return this.uniforms.opacity.value},set:function(e){this.uniforms&&(this.uniforms.opacity.value=e)}},{key:"resolution",get:function(){return this.uniforms.resolution.value},set:function(e){this.uniforms.resolution.value.copy(e)}},{key:"alphaToCoverage",get:function(){return"USE_ALPHA_TO_COVERAGE"in this.defines},set:function(e){this.defines&&(!0===e!==this.alphaToCoverage&&(this.needsUpdate=!0),!0===e?this.defines.USE_ALPHA_TO_COVERAGE="":delete this.defines.USE_ALPHA_TO_COVERAGE)}}],[{key:"type",get:function(){return"LineMaterial"}}]),n}(rs),GB=new Pi,qB=new zi,HB=new zi,VB=new Pi,jB=new Pi,WB=new Pi,XB=new zi,YB=new va,QB=new LA,JB=new zi,KB=new Hi,ZB=new sa,$B=new Pi;function eP(e,t,n){return $B.set(0,0,-t,1).applyMatrix4(e.projectionMatrix),$B.multiplyScalar(1/$B.w),$B.x=UB/n.width,$B.y=UB/n.height,$B.applyMatrix4(e.projectionMatrixInverse),$B.multiplyScalar(1/$B.w),Math.abs(Math.max($B.x,$B.y))}var tP=function(e){Y(n,e);var t=$(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new OB,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new zB({color:16777215*Math.random()});return V(this,n),(e=t.call(this,r,i)).isLineSegments2=!0,e.type="LineSegments2",e}return W(n,[{key:"computeLineDistances",value:function(){for(var e=this.geometry,t=e.attributes.instanceStart,n=e.attributes.instanceEnd,r=new Float32Array(2*t.count),i=0,a=0,o=t.count;i<o;i++,a+=2)qB.fromBufferAttribute(t,i),HB.fromBufferAttribute(n,i),r[a]=0===a?0:r[a-1],r[a+1]=r[a]+qB.distanceTo(HB);var s=new wA(r,2,1);return e.setAttribute("instanceDistanceStart",new gc(s,1,0)),e.setAttribute("instanceDistanceEnd",new gc(s,1,1)),this}},{key:"raycast",value:function(e,t){var n=this.material.worldUnits,r=e.camera;null!==r||n||console.error('LineSegments2: "Raycaster.camera" needs to be set in order to raycast against LineSegments2 while worldUnits is set to false.');var i=void 0!==e.params.Line2&&e.params.Line2.threshold||0;FB=e.ray;var a,o=this.matrixWorld,s=this.geometry,u=this.material;(UB=u.linewidth+i,null===s.boundingSphere&&s.computeBoundingSphere(),ZB.copy(s.boundingSphere).applyMatrix4(o),n)?a=.5*UB:a=eP(r,Math.max(r.near,ZB.distanceToPoint(FB.origin)),u.resolution);if(ZB.radius+=a,!1!==FB.intersectsSphere(ZB)){var l;if(null===s.boundingBox&&s.computeBoundingBox(),KB.copy(s.boundingBox).applyMatrix4(o),n)l=.5*UB;else l=eP(r,Math.max(r.near,KB.distanceToPoint(FB.origin)),u.resolution);KB.expandByScalar(l),!1!==FB.intersectsBox(KB)&&(n?function(e,t){for(var n=e.matrixWorld,r=e.geometry,i=r.attributes.instanceStart,a=r.attributes.instanceEnd,o=0,s=Math.min(r.instanceCount,i.count);o<s;o++){QB.start.fromBufferAttribute(i,o),QB.end.fromBufferAttribute(a,o),QB.applyMatrix4(n);var u=new zi,l=new zi;FB.distanceSqToSegment(QB.start,QB.end,l,u),l.distanceTo(u)<.5*UB&&t.push({point:l,pointOnLine:u,distance:FB.origin.distanceTo(l),object:e,face:null,faceIndex:o,uv:null,uv1:null})}}(this,t):function(e,t,n){var r=t.projectionMatrix,i=e.material.resolution,a=e.matrixWorld,o=e.geometry,s=o.attributes.instanceStart,u=o.attributes.instanceEnd,l=Math.min(o.instanceCount,s.count),c=-t.near;FB.at(1,WB),WB.w=1,WB.applyMatrix4(t.matrixWorldInverse),WB.applyMatrix4(r),WB.multiplyScalar(1/WB.w),WB.x*=i.x/2,WB.y*=i.y/2,WB.z=0,XB.copy(WB),YB.multiplyMatrices(t.matrixWorldInverse,a);for(var h=0,d=l;h<d;h++)if(VB.fromBufferAttribute(s,h),jB.fromBufferAttribute(u,h),VB.w=1,jB.w=1,VB.applyMatrix4(YB),jB.applyMatrix4(YB),!(VB.z>c&&jB.z>c)){if(VB.z>c){var f=VB.z-jB.z,p=(VB.z-c)/f;VB.lerp(jB,p)}else if(jB.z>c){var A=jB.z-VB.z,v=(jB.z-c)/A;jB.lerp(VB,v)}VB.applyMatrix4(r),jB.applyMatrix4(r),VB.multiplyScalar(1/VB.w),jB.multiplyScalar(1/jB.w),VB.x*=i.x/2,VB.y*=i.y/2,jB.x*=i.x/2,jB.y*=i.y/2,QB.start.copy(VB),QB.start.z=0,QB.end.copy(jB),QB.end.z=0;var m=QB.closestPointToPointParameter(XB,!0);QB.at(m,JB);var g=ri.lerp(VB.z,jB.z,m),y=g>=-1&&g<=1,b=XB.distanceTo(JB)<.5*UB;if(y&&b){QB.start.fromBufferAttribute(s,h),QB.end.fromBufferAttribute(u,h),QB.start.applyMatrix4(a),QB.end.applyMatrix4(a);var x=new zi,_=new zi;FB.distanceSqToSegment(QB.start,QB.end,_,x),n.push({point:_,pointOnLine:x,distance:FB.origin.distanceTo(_),object:e,face:null,faceIndex:h,uv:null,uv1:null})}}}(this,r,t))}}},{key:"onBeforeRender",value:function(e){var t=this.material.uniforms;t&&t.resolution&&(e.getViewport(GB),this.material.uniforms.resolution.value.set(GB.z,GB.w))}}]),n}(Jo),nP=function(e){Y(n,e);var t=$(n);function n(){var e;return V(this,n),(e=t.call(this)).isLineGeometry=!0,e.type="LineGeometry",e}return W(n,[{key:"setPositions",value:function(e){for(var t=e.length-3,r=new Float32Array(2*t),i=0;i<t;i+=3)r[2*i]=e[i],r[2*i+1]=e[i+1],r[2*i+2]=e[i+2],r[2*i+3]=e[i+3],r[2*i+4]=e[i+4],r[2*i+5]=e[i+5];return oe(Q(n.prototype),"setPositions",this).call(this,r),this}},{key:"setColors",value:function(e){for(var t=e.length-3,r=new Float32Array(2*t),i=0;i<t;i+=3)r[2*i]=e[i],r[2*i+1]=e[i+1],r[2*i+2]=e[i+2],r[2*i+3]=e[i+3],r[2*i+4]=e[i+4],r[2*i+5]=e[i+5];return oe(Q(n.prototype),"setColors",this).call(this,r),this}},{key:"fromLine",value:function(e){var t=e.geometry;return this.setPositions(t.attributes.position.array),this}}]),n}(OB),rP=function(e){Y(n,e);var t=$(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new nP,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new zB({color:16777215*Math.random()});return V(this,n),(e=t.call(this,r,i)).isLine2=!0,e.type="Line2",e}return W(n)}(tP),iP=function(e){Y(n,e);var t=$(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};V(this,n);var a=i.font;if(void 0===a)r=t.call(this);else{var o=a.generateShapes(e,i.size);void 0===i.depth&&void 0!==i.height&&console.warn("THREE.TextGeometry: .height is now depreciated. Please use .depth instead"),i.depth=void 0!==i.depth?i.depth:void 0!==i.height?i.height:50,void 0===i.bevelThickness&&(i.bevelThickness=10),void 0===i.bevelSize&&(i.bevelSize=8),void 0===i.bevelEnabled&&(i.bevelEnabled=!1),r=t.call(this,o,i)}return r.type="TextGeometry",Z(r)}return W(n)}(lf),aP=function(){function e(t){V(this,e),this.isFont=!0,this.type="Font",this.data=t}return W(e,[{key:"generateShapes",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,n=[],r=oP(e,t,this.data),i=0,a=r.length;i<a;i++)n.push.apply(n,q(r[i].toShapes()));return n}}]),e}();function oP(e,t,n){for(var r=Array.from(e),i=t/n.resolution,a=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*i,o=[],s=0,u=0,l=0;l<r.length;l++){var c=r[l];if("\n"===c)s=0,u-=a;else{var h=sP(c,i,s,u,n);s+=h.offsetX,o.push(h.path)}}return o}function sP(e,t,n,r,i){var a=i.glyphs[e]||i.glyphs["?"];if(a){var o,s,u,l,c,h,d,f,p=new pv;if(a.o)for(var A=a._cachedOutline||(a._cachedOutline=a.o.split(" ")),v=0,m=A.length;v<m;){switch(A[v++]){case"m":o=A[v++]*t+n,s=A[v++]*t+r,p.moveTo(o,s);break;case"l":o=A[v++]*t+n,s=A[v++]*t+r,p.lineTo(o,s);break;case"q":u=A[v++]*t+n,l=A[v++]*t+r,c=A[v++]*t+n,h=A[v++]*t+r,p.quadraticCurveTo(c,h,u,l);break;case"b":u=A[v++]*t+n,l=A[v++]*t+r,c=A[v++]*t+n,h=A[v++]*t+r,d=A[v++]*t+n,f=A[v++]*t+r,p.bezierCurveTo(c,h,d,f,u,l)}}return{offsetX:a.ha*t,path:p}}console.error('THREE.Font: character "'+e+'" does not exists in font family '+i.familyName+".")}function uP(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function lP(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}function cP(e,t,n){return t=bP(t),function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,_P()?Reflect.construct(t,n||[],bP(e).constructor):t.apply(e,n))}function hP(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function dP(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fP(e,t){return e.get(lP(e,t))}function pP(e,t,n){hP(e,t),t.set(e,n)}function AP(e,t,n){return e.set(lP(e,t),n),n}function vP(e,t,n){if(_P())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,t);var i=new(e.bind.apply(e,r));return i}function mP(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,RP(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function gP(e,t,n){return(t=RP(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yP(){return yP="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=TP(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},yP.apply(null,arguments)}function bP(e){return bP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},bP(e)}function xP(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&MP(e,t)}function _P(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(_P=function(){return!!e})()}function wP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function SP(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wP(Object(n),!0).forEach((function(t){gP(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wP(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function MP(e,t){return MP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},MP(e,t)}function kP(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,s=[],u=!0,l=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(e){l=!0,i=e}finally{try{if(!u&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(l)throw i}}return s}}(e,t)||BP(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function TP(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=bP(e)););return e}function EP(e,t,n,r){var i=yP(bP(e.prototype),t,n);return"function"==typeof i?function(e){return i.apply(n,e)}:i}function CP(e){return function(e){if(Array.isArray(e))return uP(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||BP(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function RP(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}function BP(e,t){if(e){if("string"==typeof e)return uP(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?uP(e,t):void 0}}var PP=function(e){e instanceof Array?e.forEach(PP):(e.map&&e.map.dispose(),e.dispose())},NP=function(e){e.geometry&&e.geometry.dispose(),e.material&&PP(e.material),e.texture&&e.texture.dispose(),e.children&&e.children.forEach(NP)},IP=function(e){if(e&&e.children)for(;e.children.length;){var t=e.children[0];e.remove(t),NP(t)}};function DP(e,t){var n=new t;return{linkProp:function(t){return{default:n[t](),onChange:function(n,r){r[e][t](n)},triggerUpdate:!1}},linkMethod:function(t){return function(n){for(var r=n[e],i=arguments.length,a=new Array(i>1?i-1:0),o=1;o<i;o++)a[o-1]=arguments[o];var s=r[t].apply(r,a);return s===r?this:s}}}}var LP=100;function OP(){return LP}function FP(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=(90-e)*Math.PI/180,i=(90-t)*Math.PI/180,a=LP*(1+n);return{x:a*Math.sin(r)*Math.cos(i),y:a*Math.cos(r),z:a*Math.sin(r)*Math.sin(i)}}function UP(e){var t=e.x,n=e.y,r=e.z,i=Math.sqrt(t*t+n*n+r*r),a=Math.acos(n/i),o=Math.atan2(r,t);return{lat:90-180*a/Math.PI,lng:90-180*o/Math.PI-(o<-Math.PI/2?360:0),altitude:i/LP-1}}function zP(e){return e*Math.PI/180}var GP=window.THREE?window.THREE:{BackSide:be,BufferAttribute:xo,Color:uo,Mesh:Jo,ShaderMaterial:rs};function qP(e,t,n,r){return new GP.ShaderMaterial({depthWrite:!1,transparent:!0,vertexShader:"\nuniform float hollowRadius;\n\nvarying vec3 vVertexWorldPosition;\nvarying vec3 vVertexNormal;\nvarying float vCameraDistanceToObjCenter;\nvarying float vVertexAngularDistanceToHollowRadius;\n\nvoid main() {    \n  vVertexNormal\t= normalize(normalMatrix * normal);\n  vVertexWorldPosition = (modelMatrix * vec4(position, 1.0)).xyz;\n  \n  vec4 objCenterViewPosition = modelViewMatrix * vec4(0.0, 0.0, 0.0, 1.0);\n  vCameraDistanceToObjCenter = length(objCenterViewPosition);\n  \n  float edgeAngle = atan(hollowRadius / vCameraDistanceToObjCenter);\n  float vertexAngle = acos(dot(normalize(modelViewMatrix * vec4(position, 1.0)), normalize(objCenterViewPosition)));\n  vVertexAngularDistanceToHollowRadius = vertexAngle - edgeAngle;\n\n  gl_Position\t= projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}",fragmentShader:"\nuniform vec3 color;\nuniform float coefficient;\nuniform float power;\nuniform float hollowRadius;\n\nvarying vec3 vVertexNormal;\nvarying vec3 vVertexWorldPosition;\nvarying float vCameraDistanceToObjCenter;\nvarying float vVertexAngularDistanceToHollowRadius;\n\nvoid main() {\n  if (vCameraDistanceToObjCenter < hollowRadius) discard; // inside the hollowRadius\n  if (vVertexAngularDistanceToHollowRadius < 0.0) discard; // frag position is within the hollow radius\n\n  vec3 worldCameraToVertex = vVertexWorldPosition - cameraPosition;\n  vec3 viewCameraToVertex\t= (viewMatrix * vec4(worldCameraToVertex, 0.0)).xyz;\n  viewCameraToVertex = normalize(viewCameraToVertex);\n  float intensity\t= pow(\n    coefficient + dot(vVertexNormal, viewCameraToVertex),\n    power\n  );\n  gl_FragColor = vec4(color, intensity);\n}",uniforms:{coefficient:{value:e},color:{value:new GP.Color(t)},power:{value:n},hollowRadius:{value:r}}})}function HP(e,t){for(var n=e.clone(),r=new Float32Array(3*e.attributes.position.count),i=0,a=r.length;i<a;i++){var o=e.attributes.normal.array[i],s=e.attributes.position.array[i];r[i]=s+o*t}return n.setAttribute("position",new GP.BufferAttribute(r,3)),n}var VP=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=r.color,a=void 0===i?"gold":i,o=r.size,s=void 0===o?2:o,u=r.coefficient,l=void 0===u?.5:u,c=r.power,h=void 0===c?1:c,d=r.hollowRadius,f=void 0===d?0:d,p=r.backside,A=void 0===p||p;dP(this,t),n=cP(this,t);var v=HP(e,s),m=qP(l,a,h,f);return A&&(m.side=GP.BackSide),n.geometry=v,n.material=m,n}return xP(t,e),mP(t)}(GP.Mesh),jP=window.THREE?window.THREE:{Color:uo,LineBasicMaterial:Mh,LineSegments:Oh,Mesh:Jo,MeshPhongMaterial:Tf,SphereGeometry:Af,SRGBColorSpace:ar,TextureLoader:dp},WP=w_({props:{globeImageUrl:{},bumpImageUrl:{},showGlobe:{default:!0,onChange:function(e,t){t.globeObj.visible=!!e},triggerUpdate:!1},showGraticules:{default:!1,onChange:function(e,t){t.graticulesObj.visible=!!e},triggerUpdate:!1},showAtmosphere:{default:!0,onChange:function(e,t){t.atmosphereObj&&(t.atmosphereObj.visible=!!e)},triggerUpdate:!1},atmosphereColor:{default:"lightskyblue"},atmosphereAltitude:{default:.15},onReady:{default:function(){},triggerUpdate:!1}},methods:{globeMaterial:function(e,t){return void 0!==t?(e.globeObj.material=t||e.defaultGlobeMaterial,this):e.globeObj.material},_destructor:function(e){IP(e.globeObj),IP(e.graticulesObj)}},stateInit:function(){var e=new jP.SphereGeometry(LP,75,75),t=new jP.MeshPhongMaterial({color:0}),n=new jP.Mesh(e,t);return n.rotation.y=-Math.PI/2,n.__globeObjType="globe",{globeObj:n,graticulesObj:new jP.LineSegments(new aS(dS(),LP,2),new jP.LineBasicMaterial({color:"lightgrey",transparent:!0,opacity:.1})),defaultGlobeMaterial:t}},init:function(e,t){IP(e),t.scene=e,t.scene.add(t.globeObj),t.scene.add(t.graticulesObj),t.ready=!1},update:function(e,t){var n=e.globeObj.material;if(t.hasOwnProperty("globeImageUrl")&&(e.globeImageUrl?(new jP.TextureLoader).load(e.globeImageUrl,(function(t){t.colorSpace=jP.SRGBColorSpace,n.map=t,n.color=null,n.needsUpdate=!0,!e.ready&&(e.ready=!0)&&setTimeout(e.onReady)})):!n.color&&(n.color=new jP.Color(0))),t.hasOwnProperty("bumpImageUrl")&&(e.bumpImageUrl?e.bumpImageUrl&&(new jP.TextureLoader).load(e.bumpImageUrl,(function(e){n.bumpMap=e,n.needsUpdate=!0})):(n.bumpMap=null,n.needsUpdate=!0)),(t.hasOwnProperty("atmosphereColor")||t.hasOwnProperty("atmosphereAltitude"))&&(e.atmosphereObj&&(e.scene.remove(e.atmosphereObj),IP(e.atmosphereObj)),e.atmosphereColor&&e.atmosphereAltitude)){var r=e.atmosphereObj=new VP(e.globeObj.geometry,{color:e.atmosphereColor,size:LP*e.atmosphereAltitude,hollowRadius:LP,coefficient:.1,power:3.5});r.visible=!!e.showAtmosphere,r.__globeObjType="atmosphere",e.scene.add(r)}e.ready||e.globeImageUrl||(e.ready=!0,e.onReady())}}),XP=function(e){return isNaN(e)?parseInt(hM(e).toHex(),16):e},YP=function(e){return e&&isNaN(e)?jS(e).opacity:1},QP=function(e){var t,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=1,a=/^rgba\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.eE+-]+)\s*\)$/.exec(e.trim().toLowerCase());if(a){var o=a.slice(1),s=kP(o,4),u=s[0],l=s[1],c=s[2],h=s[3];t=new uo("rgb(".concat(+u,",").concat(+l,",").concat(+c,")")),i=Math.min(+h,1)}else t=new uo(e);r&&t.convertLinearToSRGB();var d=t.toArray();return n?[].concat(CP(d),[i]):d};var JP=window.THREE?window.THREE:{BufferAttribute:xo};function KP(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Float32Array;if(1===t)return new JP.BufferAttribute(new n(e),t);for(var r=new JP.BufferAttribute(new n(e.length*t),t),i=0,a=e.length;i<a;i++)r.set(e[i],i*t);return r}var ZP=new WeakMap,$P=new WeakMap,eN=new WeakMap,tN=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=r.dataBindAttr,a=void 0===i?"__data":i,o=r.objBindAttr,s=void 0===o?"__threeObj":o,u=r.removeDelay,l=void 0===u?0:u;return dP(this,t),gP(n=cP(this,t),"scene",void 0),pP(n,ZP,void 0),pP(n,$P,void 0),pP(n,eN,void 0),n.scene=e,AP(ZP,n,a),AP($P,n,s),AP(eN,n,l),n.onRemoveObj((function(){})),n}return xP(t,e),mP(t,[{key:"onCreateObj",value:function(e){var n=this;return EP(t,"onCreateObj",this)([function(t){var r=e(t);return t[fP($P,n)]=r,r[fP(ZP,n)]=t,n.scene.add(r),r}]),this}},{key:"onRemoveObj",value:function(e){var n=this;return EP(t,"onRemoveObj",this)([function(r,i){var a=EP(t,"getData",n)([r]);e(r,i);var o=function(){n.scene.remove(r),IP(r),delete a[fP($P,n)]};fP(eN,n)?setTimeout(o,fP(eN,n)):o()}]),this}}])}(nk),nN=window.THREE?window.THREE:{BufferGeometry:Fo,Color:uo,CylinderGeometry:wd,Matrix4:va,Mesh:Jo,MeshLambertMaterial:Rf,Object3D:Ha,Vector3:zi},rN=Object.assign({},t),iN=rN.BufferGeometryUtils||rN,aN=w_({props:{pointsData:{default:[]},pointLat:{default:"lat"},pointLng:{default:"lng"},pointColor:{default:function(){return"#ffffaa"}},pointAltitude:{default:.1},pointRadius:{default:.25},pointResolution:{default:12,triggerUpdate:!1},pointsMerge:{default:!1},pointsTransitionDuration:{default:1e3,triggerUpdate:!1}},init:function(e,t,n){var r=n.tweenGroup;IP(e),t.scene=e,t.tweenGroup=r,t.dataMapper=new tN(e,{objBindAttr:"__threeObjPoint"})},update:function(e,t){var n=kS(e.pointLat),r=kS(e.pointLng),i=kS(e.pointAltitude),a=kS(e.pointRadius),o=kS(e.pointColor),s=new nN.CylinderGeometry(1,1,1,e.pointResolution);s.applyMatrix4((new nN.Matrix4).makeRotationX(Math.PI/2)),s.applyMatrix4((new nN.Matrix4).makeTranslation(0,0,-.5));var u=2*Math.PI*LP/360,l={};if(!e.pointsMerge&&t.hasOwnProperty("pointsMerge")&&IP(e.scene),e.dataMapper.scene=e.pointsMerge?new nN.Object3D:e.scene,e.dataMapper.onCreateObj((function(){var e=new nN.Mesh(s);return e.__globeObjType="point",e})).onUpdateObj((function(t,s){var c=function(n){var r=t.__currentTargetD=n,i=r.r,a=r.alt,o=r.lat,s=r.lng;Object.assign(t.position,FP(o,s));var l=e.pointsMerge?new nN.Vector3(0,0,0):e.scene.localToWorld(new nN.Vector3(0,0,0));t.lookAt(l),t.scale.x=t.scale.y=Math.min(30,i)*u,t.scale.z=Math.max(a*LP,.1)},h={alt:+i(s),r:+a(s),lat:+n(s),lng:+r(s)},d=t.__currentTargetD||Object.assign({},h,{alt:-.001});Object.keys(h).some((function(e){return d[e]!==h[e]}))&&(e.pointsMerge||!e.pointsTransitionDuration||e.pointsTransitionDuration<0?c(h):e.tweenGroup.add(new R_(d).to(h,e.pointsTransitionDuration).easing(S_.Quadratic.InOut).onUpdate(c).start()));if(!e.pointsMerge){var f=o(s),p=f?YP(f):0,A=!!p;t.visible=A,A&&(l.hasOwnProperty(f)||(l[f]=new nN.MeshLambertMaterial({color:XP(f),transparent:p<1,opacity:p})),t.material=l[f])}})).digest(e.pointsData),e.pointsMerge){var c=e.pointsData.length?(iN.mergeGeometries||iN.mergeBufferGeometries)(e.pointsData.map((function(t){var n=e.dataMapper.getObj(t),r=n.geometry.clone();n.updateMatrix(),r.applyMatrix4(n.matrix);var i=QP(o(t));return r.setAttribute("color",KP(Array(r.getAttribute("position").count).fill(i),4)),r}))):new nN.BufferGeometry,h=new nN.Mesh(c,new nN.MeshLambertMaterial({color:16777215,transparent:!0,vertexColors:!0}));h.__globeObjType="points",h.__data=e.pointsData,e.dataMapper.clear(),IP(e.scene),e.scene.add(h)}}}),oN=function(e){return e.uniforms.surfaceRadius={type:"float",value:0},e.vertexShader=("attribute float surfaceRadius;\nvarying float vSurfaceRadius;\nvarying vec3 vPos;\n"+e.vertexShader).replace("void main() {",["void main() {","vSurfaceRadius = surfaceRadius;","vPos = position;"].join("\n")),e.fragmentShader=("uniform float surfaceRadius;\nvarying float vSurfaceRadius;\nvarying vec3 vPos;\n"+e.fragmentShader).replace("void main() {",["void main() {","if (length(vPos) < max(surfaceRadius, vSurfaceRadius)) discard;"].join("\n")),e},sN=function(e){return e.vertexShader="\n    attribute float r;\n    \n    const float PI = 3.1415926535897932384626433832795;\n    float toRad(in float a) {\n      return a * PI / 180.0;\n    }\n    \n    vec3 Polar2Cartesian(in vec3 c) { // [lat, lng, r]\n      float phi = toRad(90.0 - c.x);\n      float theta = toRad(90.0 - c.y);\n      float r = c.z;\n      return vec3( // x,y,z\n        r * sin(phi) * cos(theta),\n        r * cos(phi),\n        r * sin(phi) * sin(theta)\n      );\n    }\n    \n    vec2 Cartesian2Polar(in vec3 p) {\n      float r = sqrt(p.x * p.x + p.y * p.y + p.z * p.z);\n      float phi = acos(p.y / r);\n      float theta = atan(p.z, p.x);\n      return vec2( // lat,lng\n        90.0 - phi * 180.0 / PI,\n        90.0 - theta * 180.0 / PI - (theta < -PI / 2.0 ? 360.0 : 0.0)\n      );\n    }\n    ".concat(e.vertexShader.replace("}","                  \n        vec3 pos = Polar2Cartesian(vec3(Cartesian2Polar(position), r));\n        gl_Position = projectionMatrix * modelViewMatrix * vec4(pos, 1.0);\n      }\n    "),"\n  "),e},uN=function(e,t){return e.onBeforeCompile=function(n){e.userData.shader=t(n)},e},lN=["stroke"],cN=window.THREE?window.THREE:{BufferGeometry:Fo,CubicBezierCurve3:hd,Curve:Zh,Group:nc,Line:Nh,Mesh:Jo,NormalBlending:we,QuadraticBezierCurve3:Ad,ShaderMaterial:rs,TubeGeometry:yf,Vector3:zi},hN=rk.default||rk,dN=w_({props:{arcsData:{default:[]},arcStartLat:{default:"startLat"},arcStartLng:{default:"startLng"},arcEndLat:{default:"endLat"},arcEndLng:{default:"endLng"},arcColor:{default:function(){return"#ffffaa"}},arcAltitude:{},arcAltitudeAutoScale:{default:.5},arcStroke:{},arcCurveResolution:{default:64,triggerUpdate:!1},arcCircularResolution:{default:6,triggerUpdate:!1},arcDashLength:{default:1},arcDashGap:{default:0},arcDashInitialGap:{default:0},arcDashAnimateTime:{default:0},arcsTransitionDuration:{default:1e3,triggerUpdate:!1}},methods:{pauseAnimation:function(e){var t;null===(t=e.ticker)||void 0===t||t.pause()},resumeAnimation:function(e){var t;null===(t=e.ticker)||void 0===t||t.resume()},_destructor:function(e){var t;e.sharedMaterial.dispose(),null===(t=e.ticker)||void 0===t||t.dispose()}},stateInit:function(e){return{tweenGroup:e.tweenGroup,ticker:new hN,sharedMaterial:new cN.ShaderMaterial(SP(SP({},{uniforms:{dashOffset:{value:0},dashSize:{value:1},gapSize:{value:0},dashTranslate:{value:0}},vertexShader:"\n    uniform float dashTranslate; \n\n    attribute vec4 color;\n    varying vec4 vColor;\n    \n    attribute float relDistance;\n    varying float vRelDistance;\n\n    void main() {\n      // pass through colors and distances\n      vColor = color;\n      vRelDistance = relDistance + dashTranslate;\n      gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n    }\n  ",fragmentShader:"\n    uniform float dashOffset; \n    uniform float dashSize;\n    uniform float gapSize; \n    \n    varying vec4 vColor;\n    varying float vRelDistance;\n    \n    void main() {\n      // ignore pixels in the gap\n      if (vRelDistance < dashOffset) discard;\n      if (mod(vRelDistance - dashOffset, dashSize + gapSize) > dashSize) discard;\n    \n      // set px color: [r, g, b, a], interpolated between vertices \n      gl_FragColor = vColor; \n    }\n  "}),{},{transparent:!0,blending:cN.NormalBlending}))}},init:function(e,t){IP(e),t.scene=e,t.dataMapper=new tN(e,{objBindAttr:"__threeObjArc"}).onCreateObj((function(){var e=new cN.Group;return e.__globeObjType="arc",e})),t.ticker.onTick.add((function(e,n){t.dataMapper.entries().map((function(e){return kP(e,2)[1]})).filter((function(e){return e.children.length&&e.children[0].material&&e.children[0].__dashAnimateStep})).forEach((function(e){var t=e.children[0],r=t.__dashAnimateStep*n,i=t.material.uniforms.dashTranslate.value%1e9;t.material.uniforms.dashTranslate.value=i+r}))}))},update:function(e){var t=kS(e.arcStartLat),n=kS(e.arcStartLng),r=kS(e.arcEndLat),i=kS(e.arcEndLng),a=kS(e.arcAltitude),o=kS(e.arcAltitudeAutoScale),s=kS(e.arcStroke),u=kS(e.arcColor),l=kS(e.arcDashLength),c=kS(e.arcDashGap),h=kS(e.arcDashInitialGap),d=kS(e.arcDashAnimateTime);e.dataMapper.onUpdateObj((function(f,p){var A=s(p),v=null!==A&&void 0!==A;if(!f.children.length||v!==("Mesh"===f.children[0].type)){IP(f);var m=v?new cN.Mesh:new cN.Line(new cN.BufferGeometry);m.material=e.sharedMaterial.clone(),f.add(m)}var g=f.children[0];Object.assign(g.material.uniforms,{dashSize:{value:l(p)},gapSize:{value:c(p)},dashOffset:{value:h(p)}});var y=d(p);g.__dashAnimateStep=y>0?1e3/y:0;var b=function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=t+1;if(e instanceof Array||e instanceof Function){var a=e instanceof Array?sT().domain(e.map((function(t,n){return n/(e.length-1)}))).range(e):e;n=function(e){return QP(a(e),!0,!0)}}else{var o=QP(e,!0,!0);n=function(){return o}}for(var s=[],u=0,l=i;u<l;u++)for(var c=n(u/(l-1)),h=0;h<r;h++)s.push(c);return KP(s,4)}(u(p),e.arcCurveResolution,v?e.arcCircularResolution+1:1),x=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=[],i=0,a=e+1;i<a;i++)for(var o=i/(a-1),s=0;s<t;s++)r.push(o);return n&&r.reverse(),KP(r,1)}(e.arcCurveResolution,v?e.arcCircularResolution+1:1,!0);g.geometry.setAttribute("color",b),g.geometry.setAttribute("relDistance",x);var _=function(t){var n=f.__currentTargetD=t,r=n.stroke,i=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.includes(n)||{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(n,lN),a=function(e){var t=e.alt,n=e.altAutoScale,r=e.startLat,i=e.startLng,a=e.endLat,o=e.endLng,s=function(e){var t=kP(e,3),n=t[0],r=FP(t[1],n,t[2]),i=r.x,a=r.y,o=r.z;return new cN.Vector3(i,a,o)},u=[i,r],l=[o,a],c=t;if((null===c||void 0===c)&&(c=Vw(u,l)/2*n),c){var h=jw(u,l),d=kP([.25,.75].map((function(e){return[].concat(CP(h(e)),[1.5*c])})),2),f=d[0],p=d[1];return vP(cN.CubicBezierCurve3,CP([u,f,p,l].map(s)))}var A=.001;return v.apply(void 0,CP([[].concat(u,[A]),[].concat(l,[A])].map(s)));function v(e,t){var n=e.angleTo(t),r=0===n?function(){return e.clone()}:function(r){return(new cN.Vector3).addVectors(e.clone().multiplyScalar(Math.sin((1-r)*n)),t.clone().multiplyScalar(Math.sin(r*n))).divideScalar(Math.sin(n))},i=new cN.Curve;return i.getPoint=r,i}}(i);v?(g.geometry&&g.geometry.dispose(),g.geometry=new cN.TubeGeometry(a,e.arcCurveResolution,r/2,e.arcCircularResolution),g.geometry.setAttribute("color",b),g.geometry.setAttribute("relDistance",x)):g.geometry.setFromPoints(a.getPoints(e.arcCurveResolution))},w={stroke:A,alt:a(p),altAutoScale:+o(p),startLat:+t(p),startLng:+n(p),endLat:+r(p),endLng:+i(p)},S=f.__currentTargetD||Object.assign({},w,{altAutoScale:-.001});Object.keys(w).some((function(e){return S[e]!==w[e]}))&&(!e.arcsTransitionDuration||e.arcsTransitionDuration<0?_(w):e.tweenGroup.add(new R_(S).to(w,e.arcsTransitionDuration).easing(S_.Quadratic.InOut).onUpdate(_).start()))})).digest(e.arcsData)}}),fN=window.THREE?window.THREE:{BufferGeometry:Fo,Color:uo,DoubleSide:xe,Mesh:Jo,MeshLambertMaterial:Rf,Object3D:Ha},pN=Object.assign({},t),AN=pN.BufferGeometryUtils||pN,vN=w_({props:{hexBinPointsData:{default:[]},hexBinPointLat:{default:"lat"},hexBinPointLng:{default:"lng"},hexBinPointWeight:{default:1},hexBinResolution:{default:4},hexMargin:{default:.2},hexTopCurvatureResolution:{default:5},hexTopColor:{default:function(){return"#ffffaa"}},hexSideColor:{default:function(){return"#ffffaa"}},hexAltitude:{default:function(e){return.01*e.sumWeight}},hexBinMerge:{default:!1},hexTransitionDuration:{default:1e3,triggerUpdate:!1}},init:function(e,t,n){var r=n.tweenGroup;IP(e),t.scene=e,t.tweenGroup=r,t.dataMapper=new tN(e,{objBindAttr:"__threeObjHexbin"})},update:function(e,t){var n=kS(e.hexBinPointLat),r=kS(e.hexBinPointLng),i=kS(e.hexBinPointWeight),a=kS(e.hexAltitude),o=kS(e.hexTopColor),s=kS(e.hexSideColor),u=kS(e.hexMargin),l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=(t instanceof Array?t.length?t:[void 0]:[t]).map((function(e){return{keyAccessor:e,isProp:!(e instanceof Function)}})),a=e.reduce((function(e,t){var r=e,a=t;return i.forEach((function(e,t){var o,s=e.keyAccessor;if(e.isProp){var u=a,l=u[s],c=WR(u,[s].map(QR));o=l,a=c}else o=s(a,t);t+1<i.length?(r.hasOwnProperty(o)||(r[o]={}),r=r[o]):n?(r.hasOwnProperty(o)||(r[o]=[]),r[o].push(a)):r[o]=a})),e}),{});n instanceof Function&&function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;r===i.length?Object.keys(t).forEach((function(e){return t[e]=n(t[e])})):Object.values(t).forEach((function(t){return e(t,r+1)}))}(a);var o=a;return r&&(o=[],function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];n.length===i.length?o.push({keys:n,vals:t}):Object.entries(t).forEach((function(t){var r=XR(t,2),i=r[0],a=r[1];return e(a,[].concat(YR(n),[i]))}))}(a),t instanceof Array&&0===t.length&&1===o.length&&(o[0].keys=[])),o}(e.hexBinPointsData.map((function(t){return SP(SP({},t),{},{h3Idx:EB(n(t),r(t),e.hexBinResolution)})})),"h3Idx"),c=Object.entries(l).map((function(e){var t=kP(e,2),n=t[0],r=t[1];return{h3Idx:n,points:r,sumWeight:r.reduce((function(e,t){return e+ +i(t)}),0)}})),h={};if(!e.hexBinMerge&&t.hasOwnProperty("hexBinMerge")&&IP(e.scene),e.dataMapper.scene=e.hexBinMerge?new fN.Object3D:e.scene,e.dataMapper.id((function(e){return e.h3Idx})).onCreateObj((function(e){var t=new fN.Mesh;t.__hexCenter=CB(e.h3Idx),t.__hexGeoJson=RB(e.h3Idx,!0).reverse();var n=t.__hexCenter[1];return t.__hexGeoJson.forEach((function(e){var t=e[0];Math.abs(n-t)>170&&(e[0]+=n>t?360:-360)})),t.__globeObjType="hexbin",t})).onUpdateObj((function(t,n){var r=Math.max(0,Math.min(1,+u(n))),i=kP(t.__hexCenter,2),l=i[0],c=i[1],d=0===r?t.__hexGeoJson:t.__hexGeoJson.map((function(e){var t=kP(e,2),n=t[0],i=t[1];return[[n,c],[i,l]].map((function(e){var t=kP(e,2);return function(e,t,n){return e-(e-t)*n}(t[0],t[1],r)}))})),f=e.hexTopCurvatureResolution;t.geometry&&t.geometry.dispose(),t.geometry=new VR([d],0,LP,!1,!0,!0,f);var p={alt:+a(n)},A=function(e){var n=(t.__currentTargetD=e).alt;t.scale.x=t.scale.y=t.scale.z=1+n;var r=LP/(n+1);t.geometry.setAttribute("surfaceRadius",KP(Array(t.geometry.getAttribute("position").count).fill(r),1))},v=t.__currentTargetD||Object.assign({},p,{alt:-.001});Object.keys(p).some((function(e){return v[e]!==p[e]}))&&(e.hexBinMerge||!e.hexTransitionDuration||e.hexTransitionDuration<0?A(p):e.tweenGroup.add(new R_(v).to(p,e.hexTransitionDuration).easing(S_.Quadratic.InOut).onUpdate(A).start()));if(!e.hexBinMerge){var m=s(n),g=o(n);[m,g].forEach((function(e){if(!h.hasOwnProperty(e)){var t=YP(e);h[e]=uN(new fN.MeshLambertMaterial({color:XP(e),transparent:t<1,opacity:t,side:fN.DoubleSide}),oN)}})),t.material=[m,g].map((function(e){return h[e]}))}})).digest(c),e.hexBinMerge){var d=c.length?(AN.mergeGeometries||AN.mergeBufferGeometries)(c.map((function(t){var n=e.dataMapper.getObj(t),r=n.geometry.toNonIndexed();n.updateMatrix(),r.applyMatrix4(n.matrix);var i=QP(o(t)),a=QP(s(t)),u=r.getAttribute("position").count,l=r.groups[0].count;return r.setAttribute("color",KP(CP(new Array(u)).map((function(e,t){return t>=l?i:a})),4)),r}))):new fN.BufferGeometry,f=new fN.MeshLambertMaterial({color:16777215,transparent:!0,vertexColors:!0,side:fN.DoubleSide});f.onBeforeCompile=function(e){f.userData.shader=oN(e)};var p=new fN.Mesh(d,f);p.__globeObjType="hexBinPoints",p.__data=c,e.dataMapper.clear(),IP(e.scene),e.scene.add(p)}}}),mN=function(e){return e*e};function gN(e,t){var n=Math.sqrt,r=Math.cos,i=function(e){return e*Math.PI/180},a=function(e){return mN(Math.sin(e/2))},o=i(e[1]),s=i(t[1]),u=i(e[0]),l=i(t[0]);return 2*Math.asin(n(a(s-o)+r(o)*r(s)*a(l-u)))}var yN=Math.sqrt(2*Math.PI);function bN(e,t){return Math.exp(-mN(e/t)/2)/(t*yN)}var xN=window.THREE?window.THREE:{Mesh:Jo,MeshLambertMaterial:Rf,SphereGeometry:Af},_N=new WeakSet,wN=new WeakMap,SN=new WeakMap,MN=new WeakMap,kN=function(){return mP((function e(t,n){var r,i;dP(this,e),hP(r=this,i=_N),i.add(r),pP(this,wN,void 0),pP(this,SN,void 0),pP(this,MN,void 0),AP(wN,this,t),AP(SN,this,IB()),fP(SN,this).init(t.map((function(e){return[e.x,e.y,e.z]})).flat()),AP(MN,this,lP(_N,this,TN).call(this,FP(0,0),FP(0,Math.min(180,n))))}),[{key:"getNearPoints",value:function(e,t,n){var r=this;return fP(SN,this).intersectSphere(e,t,n,fP(MN,this)).map((function(e){return fP(wN,r)[e/3]}))}}])}();function TN(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)+Math.pow(e.z-t.z,2))}var EN=function(e){var t=jS(function(e){return e=Math.max(0,Math.min(1,e)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+e*(1172.33-e*(10793.56-e*(33300.12-e*(38394.49-14825.05*e)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+e*(557.33+e*(1225.33-e*(3574.96-e*(1073.77+707.56*e)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+e*(3211.1-e*(15327.97-e*(27814-e*(22569.18-6838.66*e)))))))+")"}(e));return t.opacity=Math.cbrt(e),t.formatRgb()},CN=w_({props:{heatmapsData:{default:[]},heatmapPoints:{default:function(e){return e}},heatmapPointLat:{default:function(e){return e[0]}},heatmapPointLng:{default:function(e){return e[1]}},heatmapPointWeight:{default:1},heatmapBandwidth:{default:2.5},heatmapColorFn:{default:function(){return EN}},heatmapColorSaturation:{default:1.5},heatmapBaseAltitude:{default:.01},heatmapTopAltitude:{},heatmapsTransitionDuration:{default:0,triggerUpdate:!1}},init:function(e,t,n){var r=n.tweenGroup;IP(e),t.scene=e,t.tweenGroup=r,t.dataMapper=new tN(e,{objBindAttr:"__threeObjHeatmap"}).onCreateObj((function(){var e=new xN.Mesh(new xN.SphereGeometry(LP),uN(new xN.MeshLambertMaterial({vertexColors:!0,transparent:!0}),sN));return e.__globeObjType="heatmap",e}))},update:function(e){var t=kS(e.heatmapPoints),n=kS(e.heatmapPointLat),r=kS(e.heatmapPointLng),i=kS(e.heatmapPointWeight),a=kS(e.heatmapBandwidth),o=kS(e.heatmapColorFn),s=kS(e.heatmapColorSaturation),u=kS(e.heatmapBaseAltitude),l=kS(e.heatmapTopAltitude);e.dataMapper.onUpdateObj((function(c,h){var d=a(h),f=o(h),p=s(h),A=u(h),v=l(h),m=t(h).map((function(e){var t=n(e),a=r(e),o=FP(t,a);return{x:o.x,y:o.y,z:o.z,lat:t,lng:a,weight:i(e)}})),g=Math.max(.1,d/3.5),y=Math.ceil(360/(g||-1));c.geometry.parameters.widthSegments!==y&&(c.geometry.dispose(),c.geometry=new xN.SphereGeometry(LP,y,y/2));var b=function(e){for(var t=e.itemSize,n=[],r=0;r<e.count;r++)n.push(e.array.slice(r*t,(r+1)*t));return n}(c.geometry.getAttribute("position")),x=b.map((function(e){var t=kP(e,3),n=UP({x:t[0],y:t[1],z:t[2]});return[n.lng,n.lat]})),_=new kN(m,3.5*d),w=x.map((function(e,t){var n=kP(b[t],3),r=n[0],i=n[1],a=n[2];return function(e){var t=kP(e,2),n=t[0],r=t[1],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=a.lngAccessor,s=void 0===o?function(e){return e[0]}:o,u=a.latAccessor,l=void 0===u?function(e){return e[1]}:u,c=a.weightAccessor,h=void 0===c?function(){return 1}:c,d=a.bandwidth,f=[n,r],p=d*Math.PI/180;return NB(i.map((function(e){var t=h(e);return t?bN(gN(f,[s(e),l(e)]),p)*t:0})))}(e,_.getNearPoints(r,i,a),{latAccessor:function(e){return e.lat},lngAccessor:function(e){return e.lng},weightAccessor:function(e){return e.weight},bandwidth:d})})),S=CP(new Array(100)).map((function(e,t){return QP(f(t/99))})),M=function(e){var t=c.__currentTargetD=e,n=t.kdeVals,r=t.topAlt,i=t.saturation,a=function(e,t){var n;if(void 0===t){var r,i=ee(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;null!=a&&(n<a||void 0===n&&a>=a)&&(n=a)}}catch(c){i.e(c)}finally{i.f()}}else{var o,s=-1,u=ee(e);try{for(u.s();!(o=u.n()).done;){var l=o.value;null!=(l=t(l,++s,e))&&(n<l||void 0===n&&l>=l)&&(n=l)}}catch(c){u.e(c)}finally{u.f()}}return n}(n.map(Math.abs))||1e-15,o=uT([0,a/i],S);c.geometry.setAttribute("color",KP(n.map((function(e){return o(Math.abs(e))})),4));var s=sT([0,a],[LP*(1+A),LP*(1+(r||A))]);c.geometry.setAttribute("r",KP(n.map(s)))},k={kdeVals:w,topAlt:v,saturation:p},T=c.__currentTargetD||Object.assign({},k,{kdeVals:w.map((function(){return 0})),topAlt:v?A:v,saturation:.5});T.kdeVals.length!==w.length&&(T.kdeVals=w.slice()),Object.keys(k).some((function(e){return T[e]!==k[e]}))&&(!e.heatmapsTransitionDuration||e.heatmapsTransitionDuration<0?M(k):e.tweenGroup.add(new R_(T).to(k,e.heatmapsTransitionDuration).easing(S_.Quadratic.InOut).onUpdate(M).start()))})).digest(e.heatmapsData)}}),RN=window.THREE?window.THREE:{DoubleSide:xe,Group:nc,LineBasicMaterial:Mh,LineSegments:Oh,Mesh:Jo,MeshBasicMaterial:fo},BN=w_({props:{polygonsData:{default:[]},polygonGeoJsonGeometry:{default:"geometry"},polygonSideColor:{default:function(){return"#ffffaa"}},polygonSideMaterial:{},polygonCapColor:{default:function(){return"#ffffaa"}},polygonCapMaterial:{},polygonStrokeColor:{},polygonAltitude:{default:.01},polygonCapCurvatureResolution:{default:5},polygonsTransitionDuration:{default:1e3,triggerUpdate:!1}},init:function(e,t,n){var r=n.tweenGroup;IP(e),t.scene=e,t.tweenGroup=r,t.dataMapper=new tN(e,{objBindAttr:"__threeObjPolygon"}).id((function(e){return e.id})).onCreateObj((function(){var e=new RN.Group;return e.__defaultSideMaterial=uN(new RN.MeshBasicMaterial({side:RN.DoubleSide,depthWrite:!0}),oN),e.__defaultCapMaterial=new RN.MeshBasicMaterial({side:RN.DoubleSide,depthWrite:!0}),e.add(new RN.Mesh(void 0,[e.__defaultSideMaterial,e.__defaultCapMaterial])),e.add(new RN.LineSegments(void 0,new RN.LineBasicMaterial)),e.__globeObjType="polygon",e}))},update:function(e){var t=kS(e.polygonGeoJsonGeometry),n=kS(e.polygonAltitude),r=kS(e.polygonCapCurvatureResolution),i=kS(e.polygonCapColor),a=kS(e.polygonCapMaterial),o=kS(e.polygonSideColor),s=kS(e.polygonSideMaterial),u=kS(e.polygonStrokeColor),l=[];e.polygonsData.forEach((function(e){var c={data:e,capColor:i(e),capMaterial:a(e),sideColor:o(e),sideMaterial:s(e),strokeColor:u(e),altitude:+n(e),capCurvatureResolution:+r(e)},h=t(e),d=e.__id||"".concat(Math.round(1e9*Math.random()));e.__id=d,"Polygon"===h.type?l.push(SP({id:"".concat(d,"_0"),coords:h.coordinates},c)):"MultiPolygon"===h.type?l.push.apply(l,CP(h.coordinates.map((function(e,t){return SP({id:"".concat(d,"_").concat(t),coords:e},c)})))):console.warn("Unsupported GeoJson geometry type: ".concat(h.type,". Skipping geometry..."))})),e.dataMapper.onUpdateObj((function(t,n){var r=n.coords,i=n.capColor,a=n.capMaterial,o=n.sideColor,s=n.sideMaterial,u=n.strokeColor,l=n.altitude,c=n.capCurvatureResolution,h=kP(t.children,2),d=h[0],f=h[1],p=!!u;if(f.visible=p,function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return function(e,t){return e===t}};return Object.entries(t).every((function(t){var r=kP(t,2),i=r[0],a=r[1];return e.hasOwnProperty(i)&&n(i)(e[i],a)}))}(d.geometry.parameters||{},{polygonGeoJson:r,curvatureResolution:c})||(d.geometry&&d.geometry.dispose(),d.geometry=new VR(r,0,LP,!1,!0,!0,c)),!p||f.geometry.parameters&&f.geometry.parameters.geoJson.coordinates===r&&f.geometry.parameters.resolution===c||(f.geometry&&f.geometry.dispose(),f.geometry=new aS({type:"Polygon",coordinates:r},LP,c)),d.material[0]=s||t.__defaultSideMaterial,d.material[1]=a||t.__defaultCapMaterial,[!s&&o,!a&&i].forEach((function(e,t){if(e){var n=d.material[t],r=YP(e);n.color.set(XP(e)),n.transparent=r<1,n.opacity=r}})),p){var A=f.material,v=YP(u);A.color.set(XP(u)),A.transparent=v<1,A.opacity=v}var m={alt:l},g=function(e){var n=(t.__currentTargetD=e).alt;d.scale.x=d.scale.y=d.scale.z=1+n,p&&(f.scale.x=f.scale.y=f.scale.z=1+n+1e-4),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return e};if(e.userData.shader)t(e.userData.shader.uniforms);else{var n=e.onBeforeCompile;e.onBeforeCompile=function(e){n(e),t(e.uniforms)}}}(t.__defaultSideMaterial,(function(e){return e.surfaceRadius.value=LP/(n+1)}))},y=t.__currentTargetD||Object.assign({},m,{alt:-.001});Object.keys(m).some((function(e){return y[e]!==m[e]}))&&(!e.polygonsTransitionDuration||e.polygonsTransitionDuration<0||y.alt===m.alt?g(m):e.tweenGroup.add(new R_(y).to(m,e.polygonsTransitionDuration).easing(S_.Quadratic.InOut).onUpdate(g).start()))})).digest(l)}});var PN=window.THREE?window.THREE:{BufferGeometry:Fo,CircleGeometry:_d,DoubleSide:xe,Mesh:Jo,MeshLambertMaterial:Rf,Vector3:zi},NN=Object.assign({},t),IN=NN.BufferGeometryUtils||NN,DN=w_({props:{hexPolygonsData:{default:[]},hexPolygonGeoJsonGeometry:{default:"geometry"},hexPolygonColor:{default:function(){return"#ffffaa"}},hexPolygonAltitude:{default:.001},hexPolygonResolution:{default:3},hexPolygonMargin:{default:.2},hexPolygonUseDots:{default:!1},hexPolygonCurvatureResolution:{default:5},hexPolygonDotResolution:{default:12},hexPolygonsTransitionDuration:{default:0,triggerUpdate:!1}},init:function(e,t,n){var r=n.tweenGroup;IP(e),t.scene=e,t.tweenGroup=r,t.dataMapper=new tN(e,{objBindAttr:"__threeObjHexPolygon"}).onCreateObj((function(){var e=new PN.Mesh(void 0,new PN.MeshLambertMaterial({side:PN.DoubleSide}));return e.__globeObjType="hexPolygon",e}))},update:function(e){var t=kS(e.hexPolygonGeoJsonGeometry),n=kS(e.hexPolygonColor),r=kS(e.hexPolygonAltitude),i=kS(e.hexPolygonResolution),a=kS(e.hexPolygonMargin),o=kS(e.hexPolygonUseDots),s=kS(e.hexPolygonCurvatureResolution),u=kS(e.hexPolygonDotResolution);e.dataMapper.onUpdateObj((function(l,c){var h=t(c),d=i(c),f=r(c),p=Math.max(0,Math.min(1,+a(c))),A=o(c),v=s(c),m=u(c),g=n(c),y=YP(g);l.material.color.set(XP(g)),l.material.transparent=y<1,l.material.opacity=y;var b={alt:f,margin:p,curvatureResolution:v},x={geoJson:h,h3Res:d},_=l.__currentTargetD||Object.assign({},b,{alt:-.001}),w=l.__currentMemD||x;if(Object.keys(b).some((function(e){return _[e]!==b[e]}))||Object.keys(x).some((function(e){return w[e]!==x[e]}))){l.__currentMemD=x;var S=[];"Polygon"===h.type?BB(h.coordinates,d,!0).forEach((function(e){return S.push(e)})):"MultiPolygon"===h.type?h.coordinates.forEach((function(e){return BB(e,d,!0).forEach((function(e){return S.push(e)}))})):console.warn("Unsupported GeoJson geometry type: ".concat(h.type,". Skipping geometry..."));var M=S.map((function(e){var t=CB(e),n=RB(e,!0).reverse(),r=t[1];return n.forEach((function(e){var t=e[0];Math.abs(r-t)>170&&(e[0]+=r>t?360:-360)})),{h3Idx:e,hexCenter:t,hexGeoJson:n}})),k=function(e){var t=l.__currentTargetD=e,n=t.alt,r=t.margin,i=t.curvatureResolution;l.geometry&&l.geometry.dispose(),l.geometry=M.length?(IN.mergeGeometries||IN.mergeBufferGeometries)(M.map((function(e){var t=kP(e.hexCenter,2),a=t[0],o=t[1];if(A){var s=FP(a,o,n),u=FP(e.hexGeoJson[0][1],e.hexGeoJson[0][0],n),l=.85*(1-r)*new PN.Vector3(s.x,s.y,s.z).distanceTo(new PN.Vector3(u.x,u.y,u.z)),c=new _d(l,m);return c.rotateX(zP(-a)),c.rotateY(zP(o)),c.translate(s.x,s.y,s.z),c}var h=0===r?e.hexGeoJson:e.hexGeoJson.map((function(e){var t=kP(e,2),n=t[0],i=t[1];return[[n,o],[i,a]].map((function(e){var t=kP(e,2);return function(e,t,n){return e-(e-t)*n}(t[0],t[1],r)}))}));return new VR([h],LP,LP*(1+n),!1,!0,!1,i)}))):new PN.BufferGeometry};!e.hexPolygonsTransitionDuration||e.hexPolygonsTransitionDuration<0?k(b):e.tweenGroup.add(new R_(_).to(b,e.hexPolygonsTransitionDuration).easing(S_.Quadratic.InOut).onUpdate(k).start())}})).digest(e.hexPolygonsData)}}),LN=window.THREE?window.THREE:{Vector3:zi};function ON(e,t){var n=Math.max(e.length,t.length),r=Mk.apply(void 0,CP([e,t].map((function(e){return e.map((function(e){return[e.x,e.y,e.z]}))})).map((function(e){return function(e,t){var n=e[e.length-1];return[].concat(CP(e),CP(Array(t-e.length).fill(n)))}(e,n)}))));return function(n){return 0===n?e:1===n?t:r(n).map((function(e){var t=kP(e,3),n=t[0],r=t[1],i=t[2];return new LN.Vector3(n,r,i)}))}}var FN=window.THREE?window.THREE:{BufferGeometry:Fo,Color:uo,Group:nc,Line:Nh,NormalBlending:we,ShaderMaterial:rs,Vector3:zi},UN=rk.default||rk,zN=w_({props:{pathsData:{default:[]},pathPoints:{default:function(e){return e}},pathPointLat:{default:function(e){return e[0]}},pathPointLng:{default:function(e){return e[1]}},pathPointAlt:{default:.001},pathResolution:{default:2},pathColor:{default:function(){return"#ffffaa"}},pathStroke:{},pathDashLength:{default:1},pathDashGap:{default:0},pathDashInitialGap:{default:0},pathDashAnimateTime:{default:0},pathTransitionDuration:{default:1e3,triggerUpdate:!1},rendererSize:{}},methods:{pauseAnimation:function(e){var t;null===(t=e.ticker)||void 0===t||t.pause()},resumeAnimation:function(e){var t;null===(t=e.ticker)||void 0===t||t.resume()},_destructor:function(e){var t;null===(t=e.ticker)||void 0===t||t.dispose()}},stateInit:function(e){return{tweenGroup:e.tweenGroup,ticker:new UN,sharedMaterial:new FN.ShaderMaterial(SP(SP({},{uniforms:{dashOffset:{value:0},dashSize:{value:1},gapSize:{value:0},dashTranslate:{value:0}},vertexShader:"\n    uniform float dashTranslate; \n\n    attribute vec4 color;\n    varying vec4 vColor;\n    \n    attribute float relDistance;\n    varying float vRelDistance;\n\n    void main() {\n      // pass through colors and distances\n      vColor = color;\n      vRelDistance = relDistance + dashTranslate;\n      gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n    }\n  ",fragmentShader:"\n    uniform float dashOffset; \n    uniform float dashSize;\n    uniform float gapSize; \n    \n    varying vec4 vColor;\n    varying float vRelDistance;\n    \n    void main() {\n      // ignore pixels in the gap\n      if (vRelDistance < dashOffset) discard;\n      if (mod(vRelDistance - dashOffset, dashSize + gapSize) > dashSize) discard;\n    \n      // set px color: [r, g, b, a], interpolated between vertices \n      gl_FragColor = vColor; \n    }\n  "}),{},{transparent:!0,blending:FN.NormalBlending}))}},init:function(e,t){IP(e),t.scene=e,t.dataMapper=new tN(e,{objBindAttr:"__threeObjPath"}).onCreateObj((function(){var e=new FN.Group;return e.__globeObjType="path",e})),t.ticker.onTick.add((function(e,n){t.dataMapper.entries().map((function(e){return kP(e,2)[1]})).filter((function(e){return e.children.length&&e.children[0].material&&e.children[0].__dashAnimateStep})).forEach((function(e){var t=e.children[0],r=t.__dashAnimateStep*n;if("Line"===t.type){var i=t.material.uniforms.dashTranslate.value%1e9;t.material.uniforms.dashTranslate.value=i+r}else if("Line2"===t.type){for(var a=t.material.dashOffset-r,o=t.material.dashSize+t.material.gapSize;a<=-o;)a+=o;t.material.dashOffset=a}}))}))},update:function(e){var t=kS(e.pathPoints),n=kS(e.pathPointLat),r=kS(e.pathPointLng),i=kS(e.pathPointAlt),a=kS(e.pathStroke),o=kS(e.pathColor),s=kS(e.pathDashLength),u=kS(e.pathDashGap),l=kS(e.pathDashInitialGap),c=kS(e.pathDashAnimateTime);function h(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=t+1;if(e instanceof Array||e instanceof Function){var o=e instanceof Array?sT().domain(e.map((function(t,n){return n/(e.length-1)}))).range(e):e;n=function(e){return QP(o(e),i,!0)}}else{var s=QP(e,i,!0);n=function(){return s}}for(var u=[],l=0,c=a;l<c;l++)for(var h=n(l/(c-1)),d=0;d<r;d++)u.push(h);return KP(u,i?4:3)}e.dataMapper.onUpdateObj((function(d,f){var p=a(f),A=null!==p&&void 0!==p;if(!d.children.length||A===("Line"===d.children[0].type)){IP(d);var v=A?new rP(new nP,new zB):new FN.Line(new FN.BufferGeometry,e.sharedMaterial.clone());d.add(v)}var m=d.children[0],g=function(e,t,n,r,i){var a=function(e,t,n){for(var r=[],i=1;i<=n;i++)r.push(e+(t-e)*i/(n+1));return r},o=function(){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,t=[],n=null;return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach((function(r){if(n){for(;Math.abs(n[1]-r[1])>180;)n[1]+=360*(n[1]<r[1]?1:-1);var i=Math.sqrt(Math.pow(r[0]-n[0],2)+Math.pow(r[1]-n[1],2));if(i>e)for(var o=Math.floor(i/e),s=a(n[0],r[0],o),u=a(n[1],r[1],o),l=a(n[2],r[2],o),c=0,h=s.length;c<h;c++)t.push([s[c],u[c],l[c]])}t.push(n=r)})),t},s=function(e){var t=kP(e,3),n=FP(t[0],t[1],t[2]),r=n.x,i=n.y,a=n.z;return new FN.Vector3(r,i,a)};return o(e.map((function(e){return[t(e),n(e),r(e)]})),i).map(s)}(t(f),n,r,i,e.pathResolution),y=c(f);if(m.__dashAnimateStep=y>0?1e3/y:0,A){m.material.resolution=e.rendererSize;var b=s(f),x=u(f),_=l(f);m.material.dashed=x>0,m.material.dashed?m.material.defines.USE_DASH="":delete m.material.defines.USE_DASH,m.material.dashed&&(m.material.dashScale=1/function(e){var t,n=0;return e.forEach((function(e){t&&(n+=t.distanceTo(e)),t=e})),n}(g),m.material.dashSize=b,m.material.gapSize=x,m.material.dashOffset=-_);var w=o(f);if(w instanceof Array){var S=h(o(f),g.length-1,1,!1);m.geometry.setColors(S.array),m.material.vertexColors=!0}else{var M=w,k=YP(M);m.material.color=new FN.Color(XP(M)),m.material.transparent=k<1,m.material.opacity=k,m.material.vertexColors=!1}m.material.needsUpdate=!0}else{Object.assign(m.material.uniforms,{dashSize:{value:s(f)},gapSize:{value:u(f)},dashOffset:{value:l(f)}});var T=h(o(f),g.length),E=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=[],i=0,a=e+1;i<a;i++)for(var o=i/(a-1),s=0;s<t;s++)r.push(o);return n&&r.reverse(),KP(r,1)}(g.length,1,!0);m.geometry.setAttribute("color",T),m.geometry.setAttribute("relDistance",E)}var C=ON(d.__currentTargetD&&d.__currentTargetD.points||[g[0]],g),R=function(e){var t,n=d.__currentTargetD=e,r=n.stroke,i=n.interpolK,a=d.__currentTargetD.points=C(i);A?(m.geometry.setPositions((t=[]).concat.apply(t,CP(a.map((function(e){return[e.x,e.y,e.z]}))))),m.material.linewidth=r,m.material.dashed&&m.computeLineDistances()):(m.geometry.setFromPoints(a),m.geometry.computeBoundingSphere())},B={stroke:p,interpolK:1},P=Object.assign({},d.__currentTargetD||B,{interpolK:0});Object.keys(B).some((function(e){return P[e]!==B[e]}))&&(!e.pathTransitionDuration||e.pathTransitionDuration<0?R(B):e.tweenGroup.add(new R_(P).to(B,e.pathTransitionDuration).easing(S_.Quadratic.InOut).onUpdate(R).start()))})).digest(e.pathsData)}}),GN=window.THREE?window.THREE:{Euler:ka,Mesh:Jo,MeshLambertMaterial:Rf,SphereGeometry:Af},qN=w_({props:{tilesData:{default:[]},tileLat:{default:"lat"},tileLng:{default:"lng"},tileAltitude:{default:.01},tileWidth:{default:1},tileHeight:{default:1},tileUseGlobeProjection:{default:!0},tileMaterial:{default:function(){return new GN.MeshLambertMaterial({color:"#ffbb88",opacity:.4,transparent:!0})}},tileCurvatureResolution:{default:5},tilesTransitionDuration:{default:1e3,triggerUpdate:!1}},init:function(e,t,n){var r=n.tweenGroup;IP(e),t.scene=e,t.tweenGroup=r,t.dataMapper=new tN(e,{objBindAttr:"__threeObjTile"}).onCreateObj((function(){var e=new GN.Mesh;return e.__globeObjType="tile",e}))},update:function(e){var t=kS(e.tileLat),n=kS(e.tileLng),r=kS(e.tileAltitude),i=kS(e.tileWidth),a=kS(e.tileHeight),o=kS(e.tileUseGlobeProjection),s=kS(e.tileMaterial),u=kS(e.tileCurvatureResolution);e.dataMapper.onUpdateObj((function(l,c){l.material=s(c);var h=o(c),d=u(c),f=function(e){var t=l.__currentTargetD=e,n=t.lat,r=t.lng,i=t.alt,a=t.width,o=t.height,s=HN(r),u=HN(-n);l.geometry&&l.geometry.dispose(),l.geometry=new GN.SphereGeometry(LP*(1+i),Math.ceil(a/(d||-1)),Math.ceil(o/(d||-1)),HN(90-a/2)+(h?s:0),HN(a),HN(90-o/2)+(h?u:0),HN(o)),h||l.setRotationFromEuler(new GN.Euler(u,s,0,"YXZ"))},p={lat:+t(c),lng:+n(c),alt:+r(c),width:+i(c),height:+a(c)},A=l.__currentTargetD||Object.assign({},p,{width:0,height:0});Object.keys(p).some((function(e){return A[e]!==p[e]}))&&(!e.tilesTransitionDuration||e.tilesTransitionDuration<0?f(p):e.tweenGroup.add(new R_(A).to(p,e.tilesTransitionDuration).easing(S_.Quadratic.InOut).onUpdate(f).start()))})).digest(e.tilesData)}}),HN=function(e){return e*Math.PI/180},VN={glyphs:{0:{x_min:73,x_max:715,ha:792,o:"m 394 -29 q 153 129 242 -29 q 73 479 73 272 q 152 829 73 687 q 394 989 241 989 q 634 829 545 989 q 715 479 715 684 q 635 129 715 270 q 394 -29 546 -29 m 394 89 q 546 211 489 89 q 598 479 598 322 q 548 748 598 640 q 394 871 491 871 q 241 748 298 871 q 190 479 190 637 q 239 211 190 319 q 394 89 296 89 "},1:{x_min:215.671875,x_max:574,ha:792,o:"m 574 0 l 442 0 l 442 697 l 215 697 l 215 796 q 386 833 330 796 q 475 986 447 875 l 574 986 l 574 0 "},2:{x_min:59,x_max:731,ha:792,o:"m 731 0 l 59 0 q 197 314 59 188 q 457 487 199 315 q 598 691 598 580 q 543 819 598 772 q 411 867 488 867 q 272 811 328 867 q 209 630 209 747 l 81 630 q 182 901 81 805 q 408 986 271 986 q 629 909 536 986 q 731 694 731 826 q 613 449 731 541 q 378 316 495 383 q 201 122 235 234 l 731 122 l 731 0 "},3:{x_min:54,x_max:737,ha:792,o:"m 737 284 q 635 55 737 141 q 399 -25 541 -25 q 156 52 248 -25 q 54 308 54 140 l 185 308 q 245 147 185 202 q 395 96 302 96 q 539 140 484 96 q 602 280 602 190 q 510 429 602 390 q 324 454 451 454 l 324 565 q 487 584 441 565 q 565 719 565 617 q 515 835 565 791 q 395 879 466 879 q 255 824 307 879 q 203 661 203 769 l 78 661 q 166 909 78 822 q 387 992 250 992 q 603 921 513 992 q 701 723 701 844 q 669 607 701 656 q 578 524 637 558 q 696 434 655 499 q 737 284 737 369 "},4:{x_min:48,x_max:742.453125,ha:792,o:"m 742 243 l 602 243 l 602 0 l 476 0 l 476 243 l 48 243 l 48 368 l 476 958 l 602 958 l 602 354 l 742 354 l 742 243 m 476 354 l 476 792 l 162 354 l 476 354 "},5:{x_min:54.171875,x_max:738,ha:792,o:"m 738 314 q 626 60 738 153 q 382 -23 526 -23 q 155 47 248 -23 q 54 256 54 125 l 183 256 q 259 132 204 174 q 382 91 314 91 q 533 149 471 91 q 602 314 602 213 q 538 469 602 411 q 386 528 475 528 q 284 506 332 528 q 197 439 237 484 l 81 439 l 159 958 l 684 958 l 684 840 l 254 840 l 214 579 q 306 627 258 612 q 407 643 354 643 q 636 552 540 643 q 738 314 738 457 "},6:{x_min:53,x_max:739,ha:792,o:"m 739 312 q 633 62 739 162 q 400 -31 534 -31 q 162 78 257 -31 q 53 439 53 206 q 178 859 53 712 q 441 986 284 986 q 643 912 559 986 q 732 713 732 833 l 601 713 q 544 830 594 786 q 426 875 494 875 q 268 793 331 875 q 193 517 193 697 q 301 597 240 570 q 427 624 362 624 q 643 540 552 624 q 739 312 739 451 m 603 298 q 540 461 603 400 q 404 516 484 516 q 268 461 323 516 q 207 300 207 401 q 269 137 207 198 q 405 83 325 83 q 541 137 486 83 q 603 298 603 197 "},7:{x_min:58.71875,x_max:730.953125,ha:792,o:"m 730 839 q 469 448 560 641 q 335 0 378 255 l 192 0 q 328 441 235 252 q 593 830 421 630 l 58 830 l 58 958 l 730 958 l 730 839 "},8:{x_min:55,x_max:736,ha:792,o:"m 571 527 q 694 424 652 491 q 736 280 736 358 q 648 71 736 158 q 395 -26 551 -26 q 142 69 238 -26 q 55 279 55 157 q 96 425 55 359 q 220 527 138 491 q 120 615 153 562 q 88 726 88 668 q 171 904 88 827 q 395 986 261 986 q 618 905 529 986 q 702 727 702 830 q 670 616 702 667 q 571 527 638 565 m 394 565 q 519 610 475 565 q 563 717 563 655 q 521 823 563 781 q 392 872 474 872 q 265 824 312 872 q 224 720 224 783 q 265 613 224 656 q 394 565 312 565 m 395 91 q 545 150 488 91 q 597 280 597 204 q 546 408 597 355 q 395 465 492 465 q 244 408 299 465 q 194 280 194 356 q 244 150 194 203 q 395 91 299 91 "},9:{x_min:53,x_max:739,ha:792,o:"m 739 524 q 619 94 739 241 q 362 -32 516 -32 q 150 47 242 -32 q 59 244 59 126 l 191 244 q 246 129 191 176 q 373 82 301 82 q 526 161 466 82 q 597 440 597 255 q 363 334 501 334 q 130 432 216 334 q 53 650 53 521 q 134 880 53 786 q 383 986 226 986 q 659 841 566 986 q 739 524 739 719 m 388 449 q 535 514 480 449 q 585 658 585 573 q 535 805 585 744 q 388 873 480 873 q 242 809 294 873 q 191 658 191 745 q 239 514 191 572 q 388 449 292 449 "},"\u03bf":{x_min:0,x_max:712,ha:815,o:"m 356 -25 q 96 88 192 -25 q 0 368 0 201 q 92 642 0 533 q 356 761 192 761 q 617 644 517 761 q 712 368 712 533 q 619 91 712 201 q 356 -25 520 -25 m 356 85 q 527 175 465 85 q 583 369 583 255 q 528 562 583 484 q 356 651 466 651 q 189 560 250 651 q 135 369 135 481 q 187 177 135 257 q 356 85 250 85 "},S:{x_min:0,x_max:788,ha:890,o:"m 788 291 q 662 54 788 144 q 397 -26 550 -26 q 116 68 226 -26 q 0 337 0 168 l 131 337 q 200 152 131 220 q 384 85 269 85 q 557 129 479 85 q 650 270 650 183 q 490 429 650 379 q 194 513 341 470 q 33 739 33 584 q 142 964 33 881 q 388 1041 242 1041 q 644 957 543 1041 q 756 716 756 867 l 625 716 q 561 874 625 816 q 395 933 497 933 q 243 891 309 933 q 164 759 164 841 q 325 609 164 656 q 625 526 475 568 q 788 291 788 454 "},"\xa6":{x_min:343,x_max:449,ha:792,o:"m 449 462 l 343 462 l 343 986 l 449 986 l 449 462 m 449 -242 l 343 -242 l 343 280 l 449 280 l 449 -242 "},"/":{x_min:183.25,x_max:608.328125,ha:792,o:"m 608 1041 l 266 -129 l 183 -129 l 520 1041 l 608 1041 "},"\u03a4":{x_min:-.4375,x_max:777.453125,ha:839,o:"m 777 893 l 458 893 l 458 0 l 319 0 l 319 892 l 0 892 l 0 1013 l 777 1013 l 777 893 "},y:{x_min:0,x_max:684.78125,ha:771,o:"m 684 738 l 388 -83 q 311 -216 356 -167 q 173 -279 252 -279 q 97 -266 133 -279 l 97 -149 q 132 -155 109 -151 q 168 -160 155 -160 q 240 -114 213 -160 q 274 -26 248 -98 l 0 738 l 137 737 l 341 139 l 548 737 l 684 738 "},"\u03a0":{x_min:0,x_max:803,ha:917,o:"m 803 0 l 667 0 l 667 886 l 140 886 l 140 0 l 0 0 l 0 1012 l 803 1012 l 803 0 "},"\u0390":{x_min:-111,x_max:339,ha:361,o:"m 339 800 l 229 800 l 229 925 l 339 925 l 339 800 m -1 800 l -111 800 l -111 925 l -1 925 l -1 800 m 284 3 q 233 -10 258 -5 q 182 -15 207 -15 q 85 26 119 -15 q 42 200 42 79 l 42 737 l 167 737 l 168 215 q 172 141 168 157 q 226 101 183 101 q 248 103 239 101 q 284 112 257 104 l 284 3 m 302 1040 l 113 819 l 30 819 l 165 1040 l 302 1040 "},g:{x_min:0,x_max:686,ha:838,o:"m 686 34 q 586 -213 686 -121 q 331 -306 487 -306 q 131 -252 216 -306 q 31 -84 31 -190 l 155 -84 q 228 -174 166 -138 q 345 -207 284 -207 q 514 -109 454 -207 q 564 89 564 -27 q 461 6 521 36 q 335 -23 401 -23 q 88 100 184 -23 q 0 370 0 215 q 87 634 0 522 q 330 758 183 758 q 457 728 398 758 q 564 644 515 699 l 564 737 l 686 737 l 686 34 m 582 367 q 529 560 582 481 q 358 652 468 652 q 189 561 250 652 q 135 369 135 482 q 189 176 135 255 q 361 85 251 85 q 529 176 468 85 q 582 367 582 255 "},"\xb2":{x_min:0,x_max:442,ha:539,o:"m 442 383 l 0 383 q 91 566 0 492 q 260 668 176 617 q 354 798 354 727 q 315 875 354 845 q 227 905 277 905 q 136 869 173 905 q 99 761 99 833 l 14 761 q 82 922 14 864 q 232 974 141 974 q 379 926 316 974 q 442 797 442 878 q 351 635 442 704 q 183 539 321 611 q 92 455 92 491 l 442 455 l 442 383 "},"\u2013":{x_min:0,x_max:705.5625,ha:803,o:"m 705 334 l 0 334 l 0 410 l 705 410 l 705 334 "},"\u039a":{x_min:0,x_max:819.5625,ha:893,o:"m 819 0 l 650 0 l 294 509 l 139 356 l 139 0 l 0 0 l 0 1013 l 139 1013 l 139 526 l 626 1013 l 809 1013 l 395 600 l 819 0 "},"\u0192":{x_min:-46.265625,x_max:392,ha:513,o:"m 392 651 l 259 651 l 79 -279 l -46 -278 l 134 651 l 14 651 l 14 751 l 135 751 q 151 948 135 900 q 304 1041 185 1041 q 334 1040 319 1041 q 392 1034 348 1039 l 392 922 q 337 931 360 931 q 271 883 287 931 q 260 793 260 853 l 260 751 l 392 751 l 392 651 "},e:{x_min:0,x_max:714,ha:813,o:"m 714 326 l 140 326 q 200 157 140 227 q 359 87 260 87 q 488 130 431 87 q 561 245 545 174 l 697 245 q 577 48 670 123 q 358 -26 484 -26 q 97 85 195 -26 q 0 363 0 197 q 94 642 0 529 q 358 765 195 765 q 626 627 529 765 q 714 326 714 503 m 576 429 q 507 583 564 522 q 355 650 445 650 q 206 583 266 650 q 140 429 152 522 l 576 429 "},"\u03cc":{x_min:0,x_max:712,ha:815,o:"m 356 -25 q 94 91 194 -25 q 0 368 0 202 q 92 642 0 533 q 356 761 192 761 q 617 644 517 761 q 712 368 712 533 q 619 91 712 201 q 356 -25 520 -25 m 356 85 q 527 175 465 85 q 583 369 583 255 q 528 562 583 484 q 356 651 466 651 q 189 560 250 651 q 135 369 135 481 q 187 177 135 257 q 356 85 250 85 m 576 1040 l 387 819 l 303 819 l 438 1040 l 576 1040 "},J:{x_min:0,x_max:588,ha:699,o:"m 588 279 q 287 -26 588 -26 q 58 73 126 -26 q 0 327 0 158 l 133 327 q 160 172 133 227 q 288 96 198 96 q 426 171 391 96 q 449 336 449 219 l 449 1013 l 588 1013 l 588 279 "},"\xbb":{x_min:-1,x_max:503,ha:601,o:"m 503 302 l 280 136 l 281 256 l 429 373 l 281 486 l 280 608 l 503 440 l 503 302 m 221 302 l 0 136 l 0 255 l 145 372 l 0 486 l -1 608 l 221 440 l 221 302 "},"\xa9":{x_min:-3,x_max:1008,ha:1106,o:"m 502 -7 q 123 151 263 -7 q -3 501 -3 294 q 123 851 -3 706 q 502 1011 263 1011 q 881 851 739 1011 q 1008 501 1008 708 q 883 151 1008 292 q 502 -7 744 -7 m 502 60 q 830 197 709 60 q 940 501 940 322 q 831 805 940 681 q 502 944 709 944 q 174 805 296 944 q 65 501 65 680 q 173 197 65 320 q 502 60 294 60 m 741 394 q 661 246 731 302 q 496 190 591 190 q 294 285 369 190 q 228 497 228 370 q 295 714 228 625 q 499 813 370 813 q 656 762 588 813 q 733 625 724 711 l 634 625 q 589 704 629 673 q 498 735 550 735 q 377 666 421 735 q 334 504 334 597 q 374 340 334 408 q 490 272 415 272 q 589 304 549 272 q 638 394 628 337 l 741 394 "},"\u03ce":{x_min:0,x_max:922,ha:1030,o:"m 687 1040 l 498 819 l 415 819 l 549 1040 l 687 1040 m 922 339 q 856 97 922 203 q 650 -26 780 -26 q 538 9 587 -26 q 461 103 489 44 q 387 12 436 46 q 277 -22 339 -22 q 69 97 147 -22 q 0 338 0 202 q 45 551 0 444 q 161 737 84 643 l 302 737 q 175 552 219 647 q 124 336 124 446 q 155 179 124 248 q 275 88 197 88 q 375 163 341 88 q 400 294 400 219 l 400 572 l 524 572 l 524 294 q 561 135 524 192 q 643 88 591 88 q 762 182 719 88 q 797 341 797 257 q 745 555 797 450 q 619 737 705 637 l 760 737 q 874 551 835 640 q 922 339 922 444 "},"^":{x_min:193.0625,x_max:598.609375,ha:792,o:"m 598 772 l 515 772 l 395 931 l 277 772 l 193 772 l 326 1013 l 462 1013 l 598 772 "},"\xab":{x_min:0,x_max:507.203125,ha:604,o:"m 506 136 l 284 302 l 284 440 l 506 608 l 507 485 l 360 371 l 506 255 l 506 136 m 222 136 l 0 302 l 0 440 l 222 608 l 221 486 l 73 373 l 222 256 l 222 136 "},D:{x_min:0,x_max:828,ha:935,o:"m 389 1013 q 714 867 593 1013 q 828 521 828 729 q 712 161 828 309 q 382 0 587 0 l 0 0 l 0 1013 l 389 1013 m 376 124 q 607 247 523 124 q 681 510 681 355 q 607 771 681 662 q 376 896 522 896 l 139 896 l 139 124 l 376 124 "},"\u2219":{x_min:0,x_max:142,ha:239,o:"m 142 585 l 0 585 l 0 738 l 142 738 l 142 585 "},"\xff":{x_min:0,x_max:47,ha:125,o:"m 47 3 q 37 -7 47 -7 q 28 0 30 -7 q 39 -4 32 -4 q 45 3 45 -1 l 37 0 q 28 9 28 0 q 39 19 28 19 l 47 16 l 47 19 l 47 3 m 37 1 q 44 8 44 1 q 37 16 44 16 q 30 8 30 16 q 37 1 30 1 m 26 1 l 23 22 l 14 0 l 3 22 l 3 3 l 0 25 l 13 1 l 22 25 l 26 1 "},w:{x_min:0,x_max:1009.71875,ha:1100,o:"m 1009 738 l 783 0 l 658 0 l 501 567 l 345 0 l 222 0 l 0 738 l 130 738 l 284 174 l 432 737 l 576 738 l 721 173 l 881 737 l 1009 738 "},$:{x_min:0,x_max:700,ha:793,o:"m 664 717 l 542 717 q 490 825 531 785 q 381 872 450 865 l 381 551 q 620 446 540 522 q 700 241 700 370 q 618 45 700 116 q 381 -25 536 -25 l 381 -152 l 307 -152 l 307 -25 q 81 62 162 -25 q 0 297 0 149 l 124 297 q 169 146 124 204 q 307 81 215 89 l 307 441 q 80 536 148 469 q 13 725 13 603 q 96 910 13 839 q 307 982 180 982 l 307 1077 l 381 1077 l 381 982 q 574 917 494 982 q 664 717 664 845 m 307 565 l 307 872 q 187 831 233 872 q 142 724 142 791 q 180 618 142 656 q 307 565 218 580 m 381 76 q 562 237 562 96 q 517 361 562 313 q 381 423 472 409 l 381 76 "},"\\":{x_min:-.015625,x_max:425.0625,ha:522,o:"m 425 -129 l 337 -129 l 0 1041 l 83 1041 l 425 -129 "},"\xb5":{x_min:0,x_max:697.21875,ha:747,o:"m 697 -4 q 629 -14 658 -14 q 498 97 513 -14 q 422 9 470 41 q 313 -23 374 -23 q 207 4 258 -23 q 119 81 156 32 l 119 -278 l 0 -278 l 0 738 l 124 738 l 124 343 q 165 173 124 246 q 308 83 216 83 q 452 178 402 83 q 493 359 493 255 l 493 738 l 617 738 l 617 214 q 623 136 617 160 q 673 92 637 92 q 697 96 684 92 l 697 -4 "},"\u0399":{x_min:42,x_max:181,ha:297,o:"m 181 0 l 42 0 l 42 1013 l 181 1013 l 181 0 "},"\u038e":{x_min:0,x_max:1144.5,ha:1214,o:"m 1144 1012 l 807 416 l 807 0 l 667 0 l 667 416 l 325 1012 l 465 1012 l 736 533 l 1004 1012 l 1144 1012 m 277 1040 l 83 799 l 0 799 l 140 1040 l 277 1040 "},"\u2019":{x_min:0,x_max:139,ha:236,o:"m 139 851 q 102 737 139 784 q 0 669 65 690 l 0 734 q 59 787 42 741 q 72 873 72 821 l 0 873 l 0 1013 l 139 1013 l 139 851 "},"\u039d":{x_min:0,x_max:801,ha:915,o:"m 801 0 l 651 0 l 131 822 l 131 0 l 0 0 l 0 1013 l 151 1013 l 670 191 l 670 1013 l 801 1013 l 801 0 "},"-":{x_min:8.71875,x_max:350.390625,ha:478,o:"m 350 317 l 8 317 l 8 428 l 350 428 l 350 317 "},Q:{x_min:0,x_max:968,ha:1072,o:"m 954 5 l 887 -79 l 744 35 q 622 -11 687 2 q 483 -26 556 -26 q 127 130 262 -26 q 0 504 0 279 q 127 880 0 728 q 484 1041 262 1041 q 841 884 708 1041 q 968 507 968 735 q 933 293 968 398 q 832 104 899 188 l 954 5 m 723 191 q 802 330 777 248 q 828 499 828 412 q 744 790 828 673 q 483 922 650 922 q 228 791 322 922 q 142 505 142 673 q 227 221 142 337 q 487 91 323 91 q 632 123 566 91 l 520 215 l 587 301 l 723 191 "},"\u03c2":{x_min:1,x_max:676.28125,ha:740,o:"m 676 460 l 551 460 q 498 595 542 546 q 365 651 448 651 q 199 578 263 651 q 136 401 136 505 q 266 178 136 241 q 508 106 387 142 q 640 -50 640 62 q 625 -158 640 -105 q 583 -278 611 -211 l 465 -278 q 498 -182 490 -211 q 515 -80 515 -126 q 381 12 515 -15 q 134 91 197 51 q 1 388 1 179 q 100 651 1 542 q 354 761 199 761 q 587 680 498 761 q 676 460 676 599 "},M:{x_min:0,x_max:954,ha:1067,o:"m 954 0 l 819 0 l 819 869 l 537 0 l 405 0 l 128 866 l 128 0 l 0 0 l 0 1013 l 200 1013 l 472 160 l 757 1013 l 954 1013 l 954 0 "},"\u03a8":{x_min:0,x_max:1006,ha:1094,o:"m 1006 678 q 914 319 1006 429 q 571 200 814 200 l 571 0 l 433 0 l 433 200 q 92 319 194 200 q 0 678 0 429 l 0 1013 l 139 1013 l 139 679 q 191 417 139 492 q 433 326 255 326 l 433 1013 l 571 1013 l 571 326 l 580 326 q 813 423 747 326 q 868 679 868 502 l 868 1013 l 1006 1013 l 1006 678 "},C:{x_min:0,x_max:886,ha:944,o:"m 886 379 q 760 87 886 201 q 455 -26 634 -26 q 112 136 236 -26 q 0 509 0 283 q 118 882 0 737 q 469 1041 245 1041 q 748 955 630 1041 q 879 708 879 859 l 745 708 q 649 862 724 805 q 473 920 573 920 q 219 791 312 920 q 136 509 136 675 q 217 229 136 344 q 470 99 311 99 q 672 179 591 99 q 753 379 753 259 l 886 379 "},"!":{x_min:0,x_max:138,ha:236,o:"m 138 684 q 116 409 138 629 q 105 244 105 299 l 33 244 q 16 465 33 313 q 0 684 0 616 l 0 1013 l 138 1013 l 138 684 m 138 0 l 0 0 l 0 151 l 138 151 l 138 0 "},"{":{x_min:0,x_max:480.5625,ha:578,o:"m 480 -286 q 237 -213 303 -286 q 187 -45 187 -159 q 194 48 187 -15 q 201 141 201 112 q 164 264 201 225 q 0 314 118 314 l 0 417 q 164 471 119 417 q 201 605 201 514 q 199 665 201 644 q 193 772 193 769 q 241 941 193 887 q 480 1015 308 1015 l 480 915 q 336 866 375 915 q 306 742 306 828 q 310 662 306 717 q 314 577 314 606 q 288 452 314 500 q 176 365 256 391 q 289 275 257 337 q 314 143 314 226 q 313 84 314 107 q 310 -11 310 -5 q 339 -131 310 -94 q 480 -182 377 -182 l 480 -286 "},X:{x_min:-.015625,x_max:854.15625,ha:940,o:"m 854 0 l 683 0 l 423 409 l 166 0 l 0 0 l 347 519 l 18 1013 l 186 1013 l 428 637 l 675 1013 l 836 1013 l 504 520 l 854 0 "},"#":{x_min:0,x_max:963.890625,ha:1061,o:"m 963 690 l 927 590 l 719 590 l 655 410 l 876 410 l 840 310 l 618 310 l 508 -3 l 393 -2 l 506 309 l 329 310 l 215 -2 l 102 -3 l 212 310 l 0 310 l 36 410 l 248 409 l 312 590 l 86 590 l 120 690 l 347 690 l 459 1006 l 573 1006 l 462 690 l 640 690 l 751 1006 l 865 1006 l 754 690 l 963 690 m 606 590 l 425 590 l 362 410 l 543 410 l 606 590 "},"\u03b9":{x_min:42,x_max:284,ha:361,o:"m 284 3 q 233 -10 258 -5 q 182 -15 207 -15 q 85 26 119 -15 q 42 200 42 79 l 42 738 l 167 738 l 168 215 q 172 141 168 157 q 226 101 183 101 q 248 103 239 101 q 284 112 257 104 l 284 3 "},"\u0386":{x_min:0,x_max:906.953125,ha:982,o:"m 283 1040 l 88 799 l 5 799 l 145 1040 l 283 1040 m 906 0 l 756 0 l 650 303 l 251 303 l 143 0 l 0 0 l 376 1012 l 529 1012 l 906 0 m 609 421 l 452 866 l 293 421 l 609 421 "},")":{x_min:0,x_max:318,ha:415,o:"m 318 365 q 257 25 318 191 q 87 -290 197 -141 l 0 -290 q 140 21 93 -128 q 193 360 193 189 q 141 704 193 537 q 0 1024 97 850 l 87 1024 q 257 706 197 871 q 318 365 318 542 "},"\u03b5":{x_min:0,x_max:634.71875,ha:714,o:"m 634 234 q 527 38 634 110 q 300 -25 433 -25 q 98 29 183 -25 q 0 204 0 93 q 37 314 0 265 q 128 390 67 353 q 56 460 82 419 q 26 555 26 505 q 114 712 26 654 q 295 763 191 763 q 499 700 416 763 q 589 515 589 631 l 478 515 q 419 618 464 580 q 307 657 374 657 q 207 630 253 657 q 151 547 151 598 q 238 445 151 469 q 389 434 280 434 l 389 331 l 349 331 q 206 315 255 331 q 125 210 125 287 q 183 107 125 145 q 302 76 233 76 q 436 117 379 76 q 509 234 493 159 l 634 234 "},"\u0394":{x_min:0,x_max:952.78125,ha:1028,o:"m 952 0 l 0 0 l 400 1013 l 551 1013 l 952 0 m 762 124 l 476 867 l 187 124 l 762 124 "},"}":{x_min:0,x_max:481,ha:578,o:"m 481 314 q 318 262 364 314 q 282 136 282 222 q 284 65 282 97 q 293 -58 293 -48 q 241 -217 293 -166 q 0 -286 174 -286 l 0 -182 q 143 -130 105 -182 q 171 -2 171 -93 q 168 81 171 22 q 165 144 165 140 q 188 275 165 229 q 306 365 220 339 q 191 455 224 391 q 165 588 165 505 q 168 681 165 624 q 171 742 171 737 q 141 865 171 827 q 0 915 102 915 l 0 1015 q 243 942 176 1015 q 293 773 293 888 q 287 675 293 741 q 282 590 282 608 q 318 466 282 505 q 481 417 364 417 l 481 314 "},"\u2030":{x_min:-3,x_max:1672,ha:1821,o:"m 846 0 q 664 76 732 0 q 603 244 603 145 q 662 412 603 344 q 846 489 729 489 q 1027 412 959 489 q 1089 244 1089 343 q 1029 76 1089 144 q 846 0 962 0 m 845 103 q 945 143 910 103 q 981 243 981 184 q 947 340 981 301 q 845 385 910 385 q 745 342 782 385 q 709 243 709 300 q 742 147 709 186 q 845 103 781 103 m 888 986 l 284 -25 l 199 -25 l 803 986 l 888 986 m 241 468 q 58 545 126 468 q -3 715 -3 615 q 56 881 -3 813 q 238 958 124 958 q 421 881 353 958 q 483 712 483 813 q 423 544 483 612 q 241 468 356 468 m 241 855 q 137 811 175 855 q 100 710 100 768 q 136 612 100 653 q 240 572 172 572 q 344 614 306 572 q 382 713 382 656 q 347 810 382 771 q 241 855 308 855 m 1428 0 q 1246 76 1314 0 q 1185 244 1185 145 q 1244 412 1185 344 q 1428 489 1311 489 q 1610 412 1542 489 q 1672 244 1672 343 q 1612 76 1672 144 q 1428 0 1545 0 m 1427 103 q 1528 143 1492 103 q 1564 243 1564 184 q 1530 340 1564 301 q 1427 385 1492 385 q 1327 342 1364 385 q 1291 243 1291 300 q 1324 147 1291 186 q 1427 103 1363 103 "},a:{x_min:0,x_max:698.609375,ha:794,o:"m 698 0 q 661 -12 679 -7 q 615 -17 643 -17 q 536 12 564 -17 q 500 96 508 41 q 384 6 456 37 q 236 -25 312 -25 q 65 31 130 -25 q 0 194 0 88 q 118 390 0 334 q 328 435 180 420 q 488 483 476 451 q 495 523 495 504 q 442 619 495 584 q 325 654 389 654 q 209 617 257 654 q 152 513 161 580 l 33 513 q 123 705 33 633 q 332 772 207 772 q 528 712 448 772 q 617 531 617 645 l 617 163 q 624 108 617 126 q 664 90 632 90 l 698 94 l 698 0 m 491 262 l 491 372 q 272 329 350 347 q 128 201 128 294 q 166 113 128 144 q 264 83 205 83 q 414 130 346 83 q 491 262 491 183 "},"\u2014":{x_min:0,x_max:941.671875,ha:1039,o:"m 941 334 l 0 334 l 0 410 l 941 410 l 941 334 "},"=":{x_min:8.71875,x_max:780.953125,ha:792,o:"m 780 510 l 8 510 l 8 606 l 780 606 l 780 510 m 780 235 l 8 235 l 8 332 l 780 332 l 780 235 "},N:{x_min:0,x_max:801,ha:914,o:"m 801 0 l 651 0 l 131 823 l 131 0 l 0 0 l 0 1013 l 151 1013 l 670 193 l 670 1013 l 801 1013 l 801 0 "},"\u03c1":{x_min:0,x_max:712,ha:797,o:"m 712 369 q 620 94 712 207 q 362 -26 521 -26 q 230 2 292 -26 q 119 83 167 30 l 119 -278 l 0 -278 l 0 362 q 91 643 0 531 q 355 764 190 764 q 617 647 517 764 q 712 369 712 536 m 583 366 q 530 559 583 480 q 359 651 469 651 q 190 562 252 651 q 135 370 135 483 q 189 176 135 257 q 359 85 250 85 q 528 175 466 85 q 583 366 583 254 "},"\xaf":{x_min:0,x_max:941.671875,ha:938,o:"m 941 1033 l 0 1033 l 0 1109 l 941 1109 l 941 1033 "},Z:{x_min:0,x_max:779,ha:849,o:"m 779 0 l 0 0 l 0 113 l 621 896 l 40 896 l 40 1013 l 779 1013 l 778 887 l 171 124 l 779 124 l 779 0 "},u:{x_min:0,x_max:617,ha:729,o:"m 617 0 l 499 0 l 499 110 q 391 10 460 45 q 246 -25 322 -25 q 61 58 127 -25 q 0 258 0 136 l 0 738 l 125 738 l 125 284 q 156 148 125 202 q 273 82 197 82 q 433 165 369 82 q 493 340 493 243 l 493 738 l 617 738 l 617 0 "},k:{x_min:0,x_max:612.484375,ha:697,o:"m 612 738 l 338 465 l 608 0 l 469 0 l 251 382 l 121 251 l 121 0 l 0 0 l 0 1013 l 121 1013 l 121 402 l 456 738 l 612 738 "},"\u0397":{x_min:0,x_max:803,ha:917,o:"m 803 0 l 667 0 l 667 475 l 140 475 l 140 0 l 0 0 l 0 1013 l 140 1013 l 140 599 l 667 599 l 667 1013 l 803 1013 l 803 0 "},"\u0391":{x_min:0,x_max:906.953125,ha:985,o:"m 906 0 l 756 0 l 650 303 l 251 303 l 143 0 l 0 0 l 376 1013 l 529 1013 l 906 0 m 609 421 l 452 866 l 293 421 l 609 421 "},s:{x_min:0,x_max:604,ha:697,o:"m 604 217 q 501 36 604 104 q 292 -23 411 -23 q 86 43 166 -23 q 0 238 0 114 l 121 237 q 175 122 121 164 q 300 85 223 85 q 415 112 363 85 q 479 207 479 147 q 361 309 479 276 q 140 372 141 370 q 21 544 21 426 q 111 708 21 647 q 298 761 190 761 q 492 705 413 761 q 583 531 583 643 l 462 531 q 412 625 462 594 q 298 657 363 657 q 199 636 242 657 q 143 558 143 608 q 262 454 143 486 q 484 394 479 397 q 604 217 604 341 "},B:{x_min:0,x_max:778,ha:876,o:"m 580 546 q 724 469 670 535 q 778 311 778 403 q 673 83 778 171 q 432 0 575 0 l 0 0 l 0 1013 l 411 1013 q 629 957 541 1013 q 732 768 732 892 q 691 633 732 693 q 580 546 650 572 m 393 899 l 139 899 l 139 588 l 379 588 q 521 624 462 588 q 592 744 592 667 q 531 859 592 819 q 393 899 471 899 m 419 124 q 566 169 504 124 q 635 303 635 219 q 559 436 635 389 q 402 477 494 477 l 139 477 l 139 124 l 419 124 "},"\u2026":{x_min:0,x_max:614,ha:708,o:"m 142 0 l 0 0 l 0 151 l 142 151 l 142 0 m 378 0 l 236 0 l 236 151 l 378 151 l 378 0 m 614 0 l 472 0 l 472 151 l 614 151 l 614 0 "},"?":{x_min:0,x_max:607,ha:704,o:"m 607 777 q 543 599 607 674 q 422 474 482 537 q 357 272 357 391 l 236 272 q 297 487 236 395 q 411 619 298 490 q 474 762 474 691 q 422 885 474 838 q 301 933 371 933 q 179 880 228 933 q 124 706 124 819 l 0 706 q 94 963 0 872 q 302 1044 177 1044 q 511 973 423 1044 q 607 777 607 895 m 370 0 l 230 0 l 230 151 l 370 151 l 370 0 "},H:{x_min:0,x_max:803,ha:915,o:"m 803 0 l 667 0 l 667 475 l 140 475 l 140 0 l 0 0 l 0 1013 l 140 1013 l 140 599 l 667 599 l 667 1013 l 803 1013 l 803 0 "},"\u03bd":{x_min:0,x_max:675,ha:761,o:"m 675 738 l 404 0 l 272 0 l 0 738 l 133 738 l 340 147 l 541 738 l 675 738 "},c:{x_min:1,x_max:701.390625,ha:775,o:"m 701 264 q 584 53 681 133 q 353 -26 487 -26 q 91 91 188 -26 q 1 370 1 201 q 92 645 1 537 q 353 761 190 761 q 572 688 479 761 q 690 493 666 615 l 556 493 q 487 606 545 562 q 356 650 428 650 q 186 563 246 650 q 134 372 134 487 q 188 179 134 258 q 359 88 250 88 q 492 136 437 88 q 566 264 548 185 l 701 264 "},"\xb6":{x_min:0,x_max:566.671875,ha:678,o:"m 21 892 l 52 892 l 98 761 l 145 892 l 176 892 l 178 741 l 157 741 l 157 867 l 108 741 l 88 741 l 40 871 l 40 741 l 21 741 l 21 892 m 308 854 l 308 731 q 252 691 308 691 q 227 691 240 691 q 207 696 213 695 l 207 712 l 253 706 q 288 733 288 706 l 288 763 q 244 741 279 741 q 193 797 193 741 q 261 860 193 860 q 287 860 273 860 q 308 854 302 855 m 288 842 l 263 843 q 213 796 213 843 q 248 756 213 756 q 288 796 288 756 l 288 842 m 566 988 l 502 988 l 502 -1 l 439 -1 l 439 988 l 317 988 l 317 -1 l 252 -1 l 252 602 q 81 653 155 602 q 0 805 0 711 q 101 989 0 918 q 309 1053 194 1053 l 566 1053 l 566 988 "},"\u03b2":{x_min:0,x_max:660,ha:745,o:"m 471 550 q 610 450 561 522 q 660 280 660 378 q 578 64 660 151 q 367 -22 497 -22 q 239 5 299 -22 q 126 82 178 32 l 126 -278 l 0 -278 l 0 593 q 54 903 0 801 q 318 1042 127 1042 q 519 964 436 1042 q 603 771 603 887 q 567 644 603 701 q 471 550 532 586 m 337 79 q 476 138 418 79 q 535 279 535 198 q 427 437 535 386 q 226 477 344 477 l 226 583 q 398 620 329 583 q 486 762 486 668 q 435 884 486 833 q 312 935 384 935 q 169 861 219 935 q 126 698 126 797 l 126 362 q 170 169 126 242 q 337 79 224 79 "},"\u039c":{x_min:0,x_max:954,ha:1068,o:"m 954 0 l 819 0 l 819 868 l 537 0 l 405 0 l 128 865 l 128 0 l 0 0 l 0 1013 l 199 1013 l 472 158 l 758 1013 l 954 1013 l 954 0 "},"\u038c":{x_min:.109375,x_max:1120,ha:1217,o:"m 1120 505 q 994 132 1120 282 q 642 -29 861 -29 q 290 130 422 -29 q 167 505 167 280 q 294 883 167 730 q 650 1046 430 1046 q 999 882 868 1046 q 1120 505 1120 730 m 977 504 q 896 784 977 669 q 644 915 804 915 q 391 785 484 915 q 307 504 307 669 q 391 224 307 339 q 644 95 486 95 q 894 224 803 95 q 977 504 977 339 m 277 1040 l 83 799 l 0 799 l 140 1040 l 277 1040 "},"\u0389":{x_min:0,x_max:1158,ha:1275,o:"m 1158 0 l 1022 0 l 1022 475 l 496 475 l 496 0 l 356 0 l 356 1012 l 496 1012 l 496 599 l 1022 599 l 1022 1012 l 1158 1012 l 1158 0 m 277 1040 l 83 799 l 0 799 l 140 1040 l 277 1040 "},"\u2022":{x_min:0,x_max:663.890625,ha:775,o:"m 663 529 q 566 293 663 391 q 331 196 469 196 q 97 294 194 196 q 0 529 0 393 q 96 763 0 665 q 331 861 193 861 q 566 763 469 861 q 663 529 663 665 "},"\xa5":{x_min:.1875,x_max:819.546875,ha:886,o:"m 563 561 l 697 561 l 696 487 l 520 487 l 482 416 l 482 380 l 697 380 l 695 308 l 482 308 l 482 0 l 342 0 l 342 308 l 125 308 l 125 380 l 342 380 l 342 417 l 303 487 l 125 487 l 125 561 l 258 561 l 0 1013 l 140 1013 l 411 533 l 679 1013 l 819 1013 l 563 561 "},"(":{x_min:0,x_max:318.0625,ha:415,o:"m 318 -290 l 230 -290 q 61 23 122 -142 q 0 365 0 190 q 62 712 0 540 q 230 1024 119 869 l 318 1024 q 175 705 219 853 q 125 360 125 542 q 176 22 125 187 q 318 -290 223 -127 "},U:{x_min:0,x_max:796,ha:904,o:"m 796 393 q 681 93 796 212 q 386 -25 566 -25 q 101 95 208 -25 q 0 393 0 211 l 0 1013 l 138 1013 l 138 391 q 204 191 138 270 q 394 107 276 107 q 586 191 512 107 q 656 391 656 270 l 656 1013 l 796 1013 l 796 393 "},"\u03b3":{x_min:.5,x_max:744.953125,ha:822,o:"m 744 737 l 463 54 l 463 -278 l 338 -278 l 338 54 l 154 495 q 104 597 124 569 q 13 651 67 651 l 0 651 l 0 751 l 39 753 q 168 711 121 753 q 242 594 207 676 l 403 208 l 617 737 l 744 737 "},"\u03b1":{x_min:0,x_max:765.5625,ha:809,o:"m 765 -4 q 698 -14 726 -14 q 564 97 586 -14 q 466 7 525 40 q 337 -26 407 -26 q 88 98 186 -26 q 0 369 0 212 q 88 637 0 525 q 337 760 184 760 q 465 728 407 760 q 563 637 524 696 l 563 739 l 685 739 l 685 222 q 693 141 685 168 q 748 94 708 94 q 765 96 760 94 l 765 -4 m 584 371 q 531 562 584 485 q 360 653 470 653 q 192 566 254 653 q 135 379 135 489 q 186 181 135 261 q 358 84 247 84 q 528 176 465 84 q 584 371 584 260 "},F:{x_min:0,x_max:683.328125,ha:717,o:"m 683 888 l 140 888 l 140 583 l 613 583 l 613 458 l 140 458 l 140 0 l 0 0 l 0 1013 l 683 1013 l 683 888 "},"\xad":{x_min:0,x_max:705.5625,ha:803,o:"m 705 334 l 0 334 l 0 410 l 705 410 l 705 334 "},":":{x_min:0,x_max:142,ha:239,o:"m 142 585 l 0 585 l 0 738 l 142 738 l 142 585 m 142 0 l 0 0 l 0 151 l 142 151 l 142 0 "},"\u03a7":{x_min:0,x_max:854.171875,ha:935,o:"m 854 0 l 683 0 l 423 409 l 166 0 l 0 0 l 347 519 l 18 1013 l 186 1013 l 427 637 l 675 1013 l 836 1013 l 504 521 l 854 0 "},"*":{x_min:116,x_max:674,ha:792,o:"m 674 768 l 475 713 l 610 544 l 517 477 l 394 652 l 272 478 l 178 544 l 314 713 l 116 766 l 153 876 l 341 812 l 342 1013 l 446 1013 l 446 811 l 635 874 l 674 768 "},"\u2020":{x_min:0,x_max:777,ha:835,o:"m 458 804 l 777 804 l 777 683 l 458 683 l 458 0 l 319 0 l 319 681 l 0 683 l 0 804 l 319 804 l 319 1015 l 458 1013 l 458 804 "},"\xb0":{x_min:0,x_max:347,ha:444,o:"m 173 802 q 43 856 91 802 q 0 977 0 905 q 45 1101 0 1049 q 173 1153 90 1153 q 303 1098 255 1153 q 347 977 347 1049 q 303 856 347 905 q 173 802 256 802 m 173 884 q 238 910 214 884 q 262 973 262 937 q 239 1038 262 1012 q 173 1064 217 1064 q 108 1037 132 1064 q 85 973 85 1010 q 108 910 85 937 q 173 884 132 884 "},V:{x_min:0,x_max:862.71875,ha:940,o:"m 862 1013 l 505 0 l 361 0 l 0 1013 l 143 1013 l 434 165 l 718 1012 l 862 1013 "},"\u039e":{x_min:0,x_max:734.71875,ha:763,o:"m 723 889 l 9 889 l 9 1013 l 723 1013 l 723 889 m 673 463 l 61 463 l 61 589 l 673 589 l 673 463 m 734 0 l 0 0 l 0 124 l 734 124 l 734 0 "},"\xa0":{x_min:0,x_max:0,ha:853},"\u03ab":{x_min:.328125,x_max:819.515625,ha:889,o:"m 588 1046 l 460 1046 l 460 1189 l 588 1189 l 588 1046 m 360 1046 l 232 1046 l 232 1189 l 360 1189 l 360 1046 m 819 1012 l 482 416 l 482 0 l 342 0 l 342 416 l 0 1012 l 140 1012 l 411 533 l 679 1012 l 819 1012 "},"\u201d":{x_min:0,x_max:347,ha:454,o:"m 139 851 q 102 737 139 784 q 0 669 65 690 l 0 734 q 59 787 42 741 q 72 873 72 821 l 0 873 l 0 1013 l 139 1013 l 139 851 m 347 851 q 310 737 347 784 q 208 669 273 690 l 208 734 q 267 787 250 741 q 280 873 280 821 l 208 873 l 208 1013 l 347 1013 l 347 851 "},"@":{x_min:0,x_max:1260,ha:1357,o:"m 1098 -45 q 877 -160 1001 -117 q 633 -203 752 -203 q 155 -29 327 -203 q 0 360 0 127 q 176 802 0 616 q 687 1008 372 1008 q 1123 854 969 1008 q 1260 517 1260 718 q 1155 216 1260 341 q 868 82 1044 82 q 772 106 801 82 q 737 202 737 135 q 647 113 700 144 q 527 82 594 82 q 367 147 420 82 q 314 312 314 212 q 401 565 314 452 q 639 690 498 690 q 810 588 760 690 l 849 668 l 938 668 q 877 441 900 532 q 833 226 833 268 q 853 182 833 198 q 902 167 873 167 q 1088 272 1012 167 q 1159 512 1159 372 q 1051 793 1159 681 q 687 925 925 925 q 248 747 415 925 q 97 361 97 586 q 226 26 97 159 q 627 -122 370 -122 q 856 -87 737 -122 q 1061 8 976 -53 l 1098 -45 m 786 488 q 738 580 777 545 q 643 615 700 615 q 483 517 548 615 q 425 322 425 430 q 457 203 425 250 q 552 156 490 156 q 722 273 665 156 q 786 488 738 309 "},"\u038a":{x_min:0,x_max:499,ha:613,o:"m 277 1040 l 83 799 l 0 799 l 140 1040 l 277 1040 m 499 0 l 360 0 l 360 1012 l 499 1012 l 499 0 "},i:{x_min:14,x_max:136,ha:275,o:"m 136 873 l 14 873 l 14 1013 l 136 1013 l 136 873 m 136 0 l 14 0 l 14 737 l 136 737 l 136 0 "},"\u0392":{x_min:0,x_max:778,ha:877,o:"m 580 545 q 724 468 671 534 q 778 310 778 402 q 673 83 778 170 q 432 0 575 0 l 0 0 l 0 1013 l 411 1013 q 629 957 541 1013 q 732 768 732 891 q 691 632 732 692 q 580 545 650 571 m 393 899 l 139 899 l 139 587 l 379 587 q 521 623 462 587 q 592 744 592 666 q 531 859 592 819 q 393 899 471 899 m 419 124 q 566 169 504 124 q 635 302 635 219 q 559 435 635 388 q 402 476 494 476 l 139 476 l 139 124 l 419 124 "},"\u03c5":{x_min:0,x_max:617,ha:725,o:"m 617 352 q 540 94 617 199 q 308 -24 455 -24 q 76 94 161 -24 q 0 352 0 199 l 0 739 l 126 739 l 126 355 q 169 185 126 257 q 312 98 220 98 q 451 185 402 98 q 492 355 492 257 l 492 739 l 617 739 l 617 352 "},"]":{x_min:0,x_max:275,ha:372,o:"m 275 -281 l 0 -281 l 0 -187 l 151 -187 l 151 920 l 0 920 l 0 1013 l 275 1013 l 275 -281 "},m:{x_min:0,x_max:1019,ha:1128,o:"m 1019 0 l 897 0 l 897 454 q 860 591 897 536 q 739 660 816 660 q 613 586 659 660 q 573 436 573 522 l 573 0 l 447 0 l 447 455 q 412 591 447 535 q 294 657 372 657 q 165 586 213 657 q 122 437 122 521 l 122 0 l 0 0 l 0 738 l 117 738 l 117 640 q 202 730 150 697 q 316 763 254 763 q 437 730 381 763 q 525 642 494 697 q 621 731 559 700 q 753 763 682 763 q 943 694 867 763 q 1019 512 1019 625 l 1019 0 "},"\u03c7":{x_min:8.328125,x_max:780.5625,ha:815,o:"m 780 -278 q 715 -294 747 -294 q 616 -257 663 -294 q 548 -175 576 -227 l 379 133 l 143 -277 l 9 -277 l 313 254 l 163 522 q 127 586 131 580 q 36 640 91 640 q 8 637 27 640 l 8 752 l 52 757 q 162 719 113 757 q 236 627 200 690 l 383 372 l 594 737 l 726 737 l 448 250 l 625 -69 q 670 -153 647 -110 q 743 -188 695 -188 q 780 -184 759 -188 l 780 -278 "},"\u03af":{x_min:42,x_max:326.71875,ha:361,o:"m 284 3 q 233 -10 258 -5 q 182 -15 207 -15 q 85 26 119 -15 q 42 200 42 79 l 42 737 l 167 737 l 168 215 q 172 141 168 157 q 226 101 183 101 q 248 102 239 101 q 284 112 257 104 l 284 3 m 326 1040 l 137 819 l 54 819 l 189 1040 l 326 1040 "},"\u0396":{x_min:0,x_max:779.171875,ha:850,o:"m 779 0 l 0 0 l 0 113 l 620 896 l 40 896 l 40 1013 l 779 1013 l 779 887 l 170 124 l 779 124 l 779 0 "},R:{x_min:0,x_max:781.953125,ha:907,o:"m 781 0 l 623 0 q 587 242 590 52 q 407 433 585 433 l 138 433 l 138 0 l 0 0 l 0 1013 l 396 1013 q 636 946 539 1013 q 749 731 749 868 q 711 597 749 659 q 608 502 674 534 q 718 370 696 474 q 729 207 722 352 q 781 26 736 62 l 781 0 m 373 551 q 533 594 465 551 q 614 731 614 645 q 532 859 614 815 q 373 896 465 896 l 138 896 l 138 551 l 373 551 "},o:{x_min:0,x_max:713,ha:821,o:"m 357 -25 q 94 91 194 -25 q 0 368 0 202 q 93 642 0 533 q 357 761 193 761 q 618 644 518 761 q 713 368 713 533 q 619 91 713 201 q 357 -25 521 -25 m 357 85 q 528 175 465 85 q 584 369 584 255 q 529 562 584 484 q 357 651 467 651 q 189 560 250 651 q 135 369 135 481 q 187 177 135 257 q 357 85 250 85 "},K:{x_min:0,x_max:819.46875,ha:906,o:"m 819 0 l 649 0 l 294 509 l 139 355 l 139 0 l 0 0 l 0 1013 l 139 1013 l 139 526 l 626 1013 l 809 1013 l 395 600 l 819 0 "},",":{x_min:0,x_max:142,ha:239,o:"m 142 -12 q 105 -132 142 -82 q 0 -205 68 -182 l 0 -138 q 57 -82 40 -124 q 70 0 70 -51 l 0 0 l 0 151 l 142 151 l 142 -12 "},d:{x_min:0,x_max:683,ha:796,o:"m 683 0 l 564 0 l 564 93 q 456 6 516 38 q 327 -25 395 -25 q 87 100 181 -25 q 0 365 0 215 q 90 639 0 525 q 343 763 187 763 q 564 647 486 763 l 564 1013 l 683 1013 l 683 0 m 582 373 q 529 562 582 484 q 361 653 468 653 q 190 561 253 653 q 135 365 135 479 q 189 175 135 254 q 358 85 251 85 q 529 178 468 85 q 582 373 582 258 "},"\xa8":{x_min:-109,x_max:247,ha:232,o:"m 247 1046 l 119 1046 l 119 1189 l 247 1189 l 247 1046 m 19 1046 l -109 1046 l -109 1189 l 19 1189 l 19 1046 "},E:{x_min:0,x_max:736.109375,ha:789,o:"m 736 0 l 0 0 l 0 1013 l 725 1013 l 725 889 l 139 889 l 139 585 l 677 585 l 677 467 l 139 467 l 139 125 l 736 125 l 736 0 "},Y:{x_min:0,x_max:820,ha:886,o:"m 820 1013 l 482 416 l 482 0 l 342 0 l 342 416 l 0 1013 l 140 1013 l 411 534 l 679 1012 l 820 1013 "},'"':{x_min:0,x_max:299,ha:396,o:"m 299 606 l 203 606 l 203 988 l 299 988 l 299 606 m 96 606 l 0 606 l 0 988 l 96 988 l 96 606 "},"\u2039":{x_min:17.984375,x_max:773.609375,ha:792,o:"m 773 40 l 18 376 l 17 465 l 773 799 l 773 692 l 159 420 l 773 149 l 773 40 "},"\u201e":{x_min:0,x_max:364,ha:467,o:"m 141 -12 q 104 -132 141 -82 q 0 -205 67 -182 l 0 -138 q 56 -82 40 -124 q 69 0 69 -51 l 0 0 l 0 151 l 141 151 l 141 -12 m 364 -12 q 327 -132 364 -82 q 222 -205 290 -182 l 222 -138 q 279 -82 262 -124 q 292 0 292 -51 l 222 0 l 222 151 l 364 151 l 364 -12 "},"\u03b4":{x_min:1,x_max:710,ha:810,o:"m 710 360 q 616 87 710 196 q 356 -28 518 -28 q 99 82 197 -28 q 1 356 1 192 q 100 606 1 509 q 355 703 199 703 q 180 829 288 754 q 70 903 124 866 l 70 1012 l 643 1012 l 643 901 l 258 901 q 462 763 422 794 q 636 592 577 677 q 710 360 710 485 m 584 365 q 552 501 584 447 q 451 602 521 555 q 372 611 411 611 q 197 541 258 611 q 136 355 136 472 q 190 171 136 245 q 358 85 252 85 q 528 173 465 85 q 584 365 584 252 "},"\u03ad":{x_min:0,x_max:634.71875,ha:714,o:"m 634 234 q 527 38 634 110 q 300 -25 433 -25 q 98 29 183 -25 q 0 204 0 93 q 37 313 0 265 q 128 390 67 352 q 56 459 82 419 q 26 555 26 505 q 114 712 26 654 q 295 763 191 763 q 499 700 416 763 q 589 515 589 631 l 478 515 q 419 618 464 580 q 307 657 374 657 q 207 630 253 657 q 151 547 151 598 q 238 445 151 469 q 389 434 280 434 l 389 331 l 349 331 q 206 315 255 331 q 125 210 125 287 q 183 107 125 145 q 302 76 233 76 q 436 117 379 76 q 509 234 493 159 l 634 234 m 520 1040 l 331 819 l 248 819 l 383 1040 l 520 1040 "},"\u03c9":{x_min:0,x_max:922,ha:1031,o:"m 922 339 q 856 97 922 203 q 650 -26 780 -26 q 538 9 587 -26 q 461 103 489 44 q 387 12 436 46 q 277 -22 339 -22 q 69 97 147 -22 q 0 339 0 203 q 45 551 0 444 q 161 738 84 643 l 302 738 q 175 553 219 647 q 124 336 124 446 q 155 179 124 249 q 275 88 197 88 q 375 163 341 88 q 400 294 400 219 l 400 572 l 524 572 l 524 294 q 561 135 524 192 q 643 88 591 88 q 762 182 719 88 q 797 342 797 257 q 745 556 797 450 q 619 738 705 638 l 760 738 q 874 551 835 640 q 922 339 922 444 "},"\xb4":{x_min:0,x_max:96,ha:251,o:"m 96 606 l 0 606 l 0 988 l 96 988 l 96 606 "},"\xb1":{x_min:11,x_max:781,ha:792,o:"m 781 490 l 446 490 l 446 255 l 349 255 l 349 490 l 11 490 l 11 586 l 349 586 l 349 819 l 446 819 l 446 586 l 781 586 l 781 490 m 781 21 l 11 21 l 11 115 l 781 115 l 781 21 "},"|":{x_min:343,x_max:449,ha:792,o:"m 449 462 l 343 462 l 343 986 l 449 986 l 449 462 m 449 -242 l 343 -242 l 343 280 l 449 280 l 449 -242 "},"\u03cb":{x_min:0,x_max:617,ha:725,o:"m 482 800 l 372 800 l 372 925 l 482 925 l 482 800 m 239 800 l 129 800 l 129 925 l 239 925 l 239 800 m 617 352 q 540 93 617 199 q 308 -24 455 -24 q 76 93 161 -24 q 0 352 0 199 l 0 738 l 126 738 l 126 354 q 169 185 126 257 q 312 98 220 98 q 451 185 402 98 q 492 354 492 257 l 492 738 l 617 738 l 617 352 "},"\xa7":{x_min:0,x_max:593,ha:690,o:"m 593 425 q 554 312 593 369 q 467 233 516 254 q 537 83 537 172 q 459 -74 537 -12 q 288 -133 387 -133 q 115 -69 184 -133 q 47 96 47 -6 l 166 96 q 199 7 166 40 q 288 -26 232 -26 q 371 -5 332 -26 q 420 60 420 21 q 311 201 420 139 q 108 309 210 255 q 0 490 0 383 q 33 602 0 551 q 124 687 66 654 q 75 743 93 712 q 58 812 58 773 q 133 984 58 920 q 300 1043 201 1043 q 458 987 394 1043 q 529 814 529 925 l 411 814 q 370 908 404 877 q 289 939 336 939 q 213 911 246 939 q 180 841 180 883 q 286 720 180 779 q 484 612 480 615 q 593 425 593 534 m 467 409 q 355 544 467 473 q 196 630 228 612 q 146 587 162 609 q 124 525 124 558 q 239 387 124 462 q 398 298 369 315 q 448 345 429 316 q 467 409 467 375 "},b:{x_min:0,x_max:685,ha:783,o:"m 685 372 q 597 99 685 213 q 347 -25 501 -25 q 219 5 277 -25 q 121 93 161 36 l 121 0 l 0 0 l 0 1013 l 121 1013 l 121 634 q 214 723 157 692 q 341 754 272 754 q 591 637 493 754 q 685 372 685 526 m 554 356 q 499 550 554 470 q 328 644 437 644 q 162 556 223 644 q 108 369 108 478 q 160 176 108 256 q 330 83 221 83 q 498 169 435 83 q 554 356 554 245 "},q:{x_min:0,x_max:683,ha:876,o:"m 683 -278 l 564 -278 l 564 97 q 474 8 533 39 q 345 -23 415 -23 q 91 93 188 -23 q 0 364 0 203 q 87 635 0 522 q 337 760 184 760 q 466 727 408 760 q 564 637 523 695 l 564 737 l 683 737 l 683 -278 m 582 375 q 527 564 582 488 q 358 652 466 652 q 190 565 253 652 q 135 377 135 488 q 189 179 135 261 q 361 84 251 84 q 530 179 469 84 q 582 375 582 260 "},"\u03a9":{x_min:-.171875,x_max:969.5625,ha:1068,o:"m 969 0 l 555 0 l 555 123 q 744 308 675 194 q 814 558 814 423 q 726 812 814 709 q 484 922 633 922 q 244 820 334 922 q 154 567 154 719 q 223 316 154 433 q 412 123 292 199 l 412 0 l 0 0 l 0 124 l 217 124 q 68 327 122 210 q 15 572 15 444 q 144 911 15 781 q 484 1041 274 1041 q 822 909 691 1041 q 953 569 953 777 q 899 326 953 443 q 750 124 846 210 l 969 124 l 969 0 "},"\u03cd":{x_min:0,x_max:617,ha:725,o:"m 617 352 q 540 93 617 199 q 308 -24 455 -24 q 76 93 161 -24 q 0 352 0 199 l 0 738 l 126 738 l 126 354 q 169 185 126 257 q 312 98 220 98 q 451 185 402 98 q 492 354 492 257 l 492 738 l 617 738 l 617 352 m 535 1040 l 346 819 l 262 819 l 397 1040 l 535 1040 "},z:{x_min:-.015625,x_max:613.890625,ha:697,o:"m 613 0 l 0 0 l 0 100 l 433 630 l 20 630 l 20 738 l 594 738 l 593 636 l 163 110 l 613 110 l 613 0 "},"\u2122":{x_min:0,x_max:894,ha:1e3,o:"m 389 951 l 229 951 l 229 503 l 160 503 l 160 951 l 0 951 l 0 1011 l 389 1011 l 389 951 m 894 503 l 827 503 l 827 939 l 685 503 l 620 503 l 481 937 l 481 503 l 417 503 l 417 1011 l 517 1011 l 653 580 l 796 1010 l 894 1011 l 894 503 "},"\u03ae":{x_min:.78125,x_max:697,ha:810,o:"m 697 -278 l 572 -278 l 572 454 q 540 587 572 536 q 425 650 501 650 q 271 579 337 650 q 206 420 206 509 l 206 0 l 81 0 l 81 489 q 73 588 81 562 q 0 644 56 644 l 0 741 q 68 755 38 755 q 158 721 124 755 q 200 630 193 687 q 297 726 234 692 q 434 761 359 761 q 620 692 544 761 q 697 516 697 624 l 697 -278 m 479 1040 l 290 819 l 207 819 l 341 1040 l 479 1040 "},"\u0398":{x_min:0,x_max:960,ha:1056,o:"m 960 507 q 833 129 960 280 q 476 -32 698 -32 q 123 129 255 -32 q 0 507 0 280 q 123 883 0 732 q 476 1045 255 1045 q 832 883 696 1045 q 960 507 960 732 m 817 500 q 733 789 817 669 q 476 924 639 924 q 223 792 317 924 q 142 507 142 675 q 222 222 142 339 q 476 89 315 89 q 730 218 636 89 q 817 500 817 334 m 716 449 l 243 449 l 243 571 l 716 571 l 716 449 "},"\xae":{x_min:-3,x_max:1008,ha:1106,o:"m 503 532 q 614 562 566 532 q 672 658 672 598 q 614 747 672 716 q 503 772 569 772 l 338 772 l 338 532 l 503 532 m 502 -7 q 123 151 263 -7 q -3 501 -3 294 q 123 851 -3 706 q 502 1011 263 1011 q 881 851 739 1011 q 1008 501 1008 708 q 883 151 1008 292 q 502 -7 744 -7 m 502 60 q 830 197 709 60 q 940 501 940 322 q 831 805 940 681 q 502 944 709 944 q 174 805 296 944 q 65 501 65 680 q 173 197 65 320 q 502 60 294 60 m 788 146 l 678 146 q 653 316 655 183 q 527 449 652 449 l 338 449 l 338 146 l 241 146 l 241 854 l 518 854 q 688 808 621 854 q 766 658 766 755 q 739 563 766 607 q 668 497 713 519 q 751 331 747 472 q 788 164 756 190 l 788 146 "},"~":{x_min:0,x_max:833,ha:931,o:"m 833 958 q 778 753 833 831 q 594 665 716 665 q 402 761 502 665 q 240 857 302 857 q 131 795 166 857 q 104 665 104 745 l 0 665 q 54 867 0 789 q 237 958 116 958 q 429 861 331 958 q 594 765 527 765 q 704 827 670 765 q 729 958 729 874 l 833 958 "},"\u0395":{x_min:0,x_max:736.21875,ha:778,o:"m 736 0 l 0 0 l 0 1013 l 725 1013 l 725 889 l 139 889 l 139 585 l 677 585 l 677 467 l 139 467 l 139 125 l 736 125 l 736 0 "},"\xb3":{x_min:0,x_max:450,ha:547,o:"m 450 552 q 379 413 450 464 q 220 366 313 366 q 69 414 130 366 q 0 567 0 470 l 85 567 q 126 470 85 504 q 225 437 168 437 q 320 467 280 437 q 360 552 360 498 q 318 632 360 608 q 213 657 276 657 q 195 657 203 657 q 176 657 181 657 l 176 722 q 279 733 249 722 q 334 815 334 752 q 300 881 334 856 q 220 907 267 907 q 133 875 169 907 q 97 781 97 844 l 15 781 q 78 926 15 875 q 220 972 135 972 q 364 930 303 972 q 426 817 426 888 q 344 697 426 733 q 421 642 392 681 q 450 552 450 603 "},"[":{x_min:0,x_max:273.609375,ha:371,o:"m 273 -281 l 0 -281 l 0 1013 l 273 1013 l 273 920 l 124 920 l 124 -187 l 273 -187 l 273 -281 "},L:{x_min:0,x_max:645.828125,ha:696,o:"m 645 0 l 0 0 l 0 1013 l 140 1013 l 140 126 l 645 126 l 645 0 "},"\u03c3":{x_min:0,x_max:803.390625,ha:894,o:"m 803 628 l 633 628 q 713 368 713 512 q 618 93 713 204 q 357 -25 518 -25 q 94 91 194 -25 q 0 368 0 201 q 94 644 0 533 q 356 761 194 761 q 481 750 398 761 q 608 739 564 739 l 803 739 l 803 628 m 360 85 q 529 180 467 85 q 584 374 584 262 q 527 566 584 490 q 352 651 463 651 q 187 559 247 651 q 135 368 135 478 q 189 175 135 254 q 360 85 251 85 "},"\u03b6":{x_min:0,x_max:573,ha:642,o:"m 573 -40 q 553 -162 573 -97 q 510 -278 543 -193 l 400 -278 q 441 -187 428 -219 q 462 -90 462 -132 q 378 -14 462 -14 q 108 45 197 -14 q 0 290 0 117 q 108 631 0 462 q 353 901 194 767 l 55 901 l 55 1012 l 561 1012 l 561 924 q 261 669 382 831 q 128 301 128 489 q 243 117 128 149 q 458 98 350 108 q 573 -40 573 80 "},"\u03b8":{x_min:0,x_max:674,ha:778,o:"m 674 496 q 601 160 674 304 q 336 -26 508 -26 q 73 153 165 -26 q 0 485 0 296 q 72 840 0 683 q 343 1045 166 1045 q 605 844 516 1045 q 674 496 674 692 m 546 579 q 498 798 546 691 q 336 935 437 935 q 178 798 237 935 q 126 579 137 701 l 546 579 m 546 475 l 126 475 q 170 233 126 348 q 338 80 230 80 q 504 233 447 80 q 546 475 546 346 "},"\u039f":{x_min:0,x_max:958,ha:1054,o:"m 485 1042 q 834 883 703 1042 q 958 511 958 735 q 834 136 958 287 q 481 -26 701 -26 q 126 130 261 -26 q 0 504 0 279 q 127 880 0 729 q 485 1042 263 1042 m 480 98 q 731 225 638 98 q 815 504 815 340 q 733 783 815 670 q 480 913 640 913 q 226 785 321 913 q 142 504 142 671 q 226 224 142 339 q 480 98 319 98 "},"\u0393":{x_min:0,x_max:705.28125,ha:749,o:"m 705 886 l 140 886 l 140 0 l 0 0 l 0 1012 l 705 1012 l 705 886 "}," ":{x_min:0,x_max:0,ha:375},"%":{x_min:-3,x_max:1089,ha:1186,o:"m 845 0 q 663 76 731 0 q 602 244 602 145 q 661 412 602 344 q 845 489 728 489 q 1027 412 959 489 q 1089 244 1089 343 q 1029 76 1089 144 q 845 0 962 0 m 844 103 q 945 143 909 103 q 981 243 981 184 q 947 340 981 301 q 844 385 909 385 q 744 342 781 385 q 708 243 708 300 q 741 147 708 186 q 844 103 780 103 m 888 986 l 284 -25 l 199 -25 l 803 986 l 888 986 m 241 468 q 58 545 126 468 q -3 715 -3 615 q 56 881 -3 813 q 238 958 124 958 q 421 881 353 958 q 483 712 483 813 q 423 544 483 612 q 241 468 356 468 m 241 855 q 137 811 175 855 q 100 710 100 768 q 136 612 100 653 q 240 572 172 572 q 344 614 306 572 q 382 713 382 656 q 347 810 382 771 q 241 855 308 855 "},P:{x_min:0,x_max:726,ha:806,o:"m 424 1013 q 640 931 555 1013 q 726 719 726 850 q 637 506 726 587 q 413 426 548 426 l 140 426 l 140 0 l 0 0 l 0 1013 l 424 1013 m 379 889 l 140 889 l 140 548 l 372 548 q 522 589 459 548 q 593 720 593 637 q 528 845 593 801 q 379 889 463 889 "},"\u0388":{x_min:0,x_max:1078.21875,ha:1118,o:"m 1078 0 l 342 0 l 342 1013 l 1067 1013 l 1067 889 l 481 889 l 481 585 l 1019 585 l 1019 467 l 481 467 l 481 125 l 1078 125 l 1078 0 m 277 1040 l 83 799 l 0 799 l 140 1040 l 277 1040 "},"\u038f":{x_min:.125,x_max:1136.546875,ha:1235,o:"m 1136 0 l 722 0 l 722 123 q 911 309 842 194 q 981 558 981 423 q 893 813 981 710 q 651 923 800 923 q 411 821 501 923 q 321 568 321 720 q 390 316 321 433 q 579 123 459 200 l 579 0 l 166 0 l 166 124 l 384 124 q 235 327 289 210 q 182 572 182 444 q 311 912 182 782 q 651 1042 441 1042 q 989 910 858 1042 q 1120 569 1120 778 q 1066 326 1120 443 q 917 124 1013 210 l 1136 124 l 1136 0 m 277 1040 l 83 800 l 0 800 l 140 1041 l 277 1040 "},_:{x_min:0,x_max:705.5625,ha:803,o:"m 705 -334 l 0 -334 l 0 -234 l 705 -234 l 705 -334 "},"\u03aa":{x_min:-110,x_max:246,ha:275,o:"m 246 1046 l 118 1046 l 118 1189 l 246 1189 l 246 1046 m 18 1046 l -110 1046 l -110 1189 l 18 1189 l 18 1046 m 136 0 l 0 0 l 0 1012 l 136 1012 l 136 0 "},"+":{x_min:23,x_max:768,ha:792,o:"m 768 372 l 444 372 l 444 0 l 347 0 l 347 372 l 23 372 l 23 468 l 347 468 l 347 840 l 444 840 l 444 468 l 768 468 l 768 372 "},"\xbd":{x_min:0,x_max:1050,ha:1149,o:"m 1050 0 l 625 0 q 712 178 625 108 q 878 277 722 187 q 967 385 967 328 q 932 456 967 429 q 850 484 897 484 q 759 450 798 484 q 721 352 721 416 l 640 352 q 706 502 640 448 q 851 551 766 551 q 987 509 931 551 q 1050 385 1050 462 q 976 251 1050 301 q 829 179 902 215 q 717 68 740 133 l 1050 68 l 1050 0 m 834 985 l 215 -28 l 130 -28 l 750 984 l 834 985 m 224 422 l 142 422 l 142 811 l 0 811 l 0 867 q 104 889 62 867 q 164 973 157 916 l 224 973 l 224 422 "},"\u03a1":{x_min:0,x_max:720,ha:783,o:"m 424 1013 q 637 933 554 1013 q 720 723 720 853 q 633 508 720 591 q 413 426 546 426 l 140 426 l 140 0 l 0 0 l 0 1013 l 424 1013 m 378 889 l 140 889 l 140 548 l 371 548 q 521 589 458 548 q 592 720 592 637 q 527 845 592 801 q 378 889 463 889 "},"'":{x_min:0,x_max:139,ha:236,o:"m 139 851 q 102 737 139 784 q 0 669 65 690 l 0 734 q 59 787 42 741 q 72 873 72 821 l 0 873 l 0 1013 l 139 1013 l 139 851 "},"\xaa":{x_min:0,x_max:350,ha:397,o:"m 350 625 q 307 616 328 616 q 266 631 281 616 q 247 673 251 645 q 190 628 225 644 q 116 613 156 613 q 32 641 64 613 q 0 722 0 669 q 72 826 0 800 q 247 866 159 846 l 247 887 q 220 934 247 916 q 162 953 194 953 q 104 934 129 953 q 76 882 80 915 l 16 882 q 60 976 16 941 q 166 1011 104 1011 q 266 979 224 1011 q 308 891 308 948 l 308 706 q 311 679 308 688 q 331 670 315 670 l 350 672 l 350 625 m 247 757 l 247 811 q 136 790 175 798 q 64 726 64 773 q 83 682 64 697 q 132 667 103 667 q 207 690 174 667 q 247 757 247 718 "},"\u0385":{x_min:0,x_max:450,ha:553,o:"m 450 800 l 340 800 l 340 925 l 450 925 l 450 800 m 406 1040 l 212 800 l 129 800 l 269 1040 l 406 1040 m 110 800 l 0 800 l 0 925 l 110 925 l 110 800 "},T:{x_min:0,x_max:777,ha:835,o:"m 777 894 l 458 894 l 458 0 l 319 0 l 319 894 l 0 894 l 0 1013 l 777 1013 l 777 894 "},"\u03a6":{x_min:0,x_max:915,ha:997,o:"m 527 0 l 389 0 l 389 122 q 110 231 220 122 q 0 509 0 340 q 110 785 0 677 q 389 893 220 893 l 389 1013 l 527 1013 l 527 893 q 804 786 693 893 q 915 509 915 679 q 805 231 915 341 q 527 122 696 122 l 527 0 m 527 226 q 712 310 641 226 q 779 507 779 389 q 712 705 779 627 q 527 787 641 787 l 527 226 m 389 226 l 389 787 q 205 698 275 775 q 136 505 136 620 q 206 308 136 391 q 389 226 276 226 "},"\u204b":{x_min:0,x_max:0,ha:694},j:{x_min:-77.78125,x_max:167,ha:349,o:"m 167 871 l 42 871 l 42 1013 l 167 1013 l 167 871 m 167 -80 q 121 -231 167 -184 q -26 -278 76 -278 l -77 -278 l -77 -164 l -41 -164 q 26 -143 11 -164 q 42 -65 42 -122 l 42 737 l 167 737 l 167 -80 "},"\u03a3":{x_min:0,x_max:756.953125,ha:819,o:"m 756 0 l 0 0 l 0 107 l 395 523 l 22 904 l 22 1013 l 745 1013 l 745 889 l 209 889 l 566 523 l 187 125 l 756 125 l 756 0 "},"\u203a":{x_min:18.0625,x_max:774,ha:792,o:"m 774 376 l 18 40 l 18 149 l 631 421 l 18 692 l 18 799 l 774 465 l 774 376 "},"<":{x_min:17.984375,x_max:773.609375,ha:792,o:"m 773 40 l 18 376 l 17 465 l 773 799 l 773 692 l 159 420 l 773 149 l 773 40 "},"\xa3":{x_min:0,x_max:704.484375,ha:801,o:"m 704 41 q 623 -10 664 5 q 543 -26 583 -26 q 359 15 501 -26 q 243 36 288 36 q 158 23 197 36 q 73 -21 119 10 l 6 76 q 125 195 90 150 q 175 331 175 262 q 147 443 175 383 l 0 443 l 0 512 l 108 512 q 43 734 43 623 q 120 929 43 854 q 358 1010 204 1010 q 579 936 487 1010 q 678 729 678 857 l 678 684 l 552 684 q 504 838 552 780 q 362 896 457 896 q 216 852 263 896 q 176 747 176 815 q 199 627 176 697 q 248 512 217 574 l 468 512 l 468 443 l 279 443 q 297 356 297 398 q 230 194 297 279 q 153 107 211 170 q 227 133 190 125 q 293 142 264 142 q 410 119 339 142 q 516 96 482 96 q 579 105 550 96 q 648 142 608 115 l 704 41 "},t:{x_min:0,x_max:367,ha:458,o:"m 367 0 q 312 -5 339 -2 q 262 -8 284 -8 q 145 28 183 -8 q 108 143 108 64 l 108 638 l 0 638 l 0 738 l 108 738 l 108 944 l 232 944 l 232 738 l 367 738 l 367 638 l 232 638 l 232 185 q 248 121 232 140 q 307 102 264 102 q 345 104 330 102 q 367 107 360 107 l 367 0 "},"\xac":{x_min:0,x_max:706,ha:803,o:"m 706 411 l 706 158 l 630 158 l 630 335 l 0 335 l 0 411 l 706 411 "},"\u03bb":{x_min:0,x_max:750,ha:803,o:"m 750 -7 q 679 -15 716 -15 q 538 59 591 -15 q 466 214 512 97 l 336 551 l 126 0 l 0 0 l 270 705 q 223 837 247 770 q 116 899 190 899 q 90 898 100 899 l 90 1004 q 152 1011 125 1011 q 298 938 244 1011 q 373 783 326 901 l 605 192 q 649 115 629 136 q 716 95 669 95 l 736 95 q 750 97 745 97 l 750 -7 "},W:{x_min:0,x_max:1263.890625,ha:1351,o:"m 1263 1013 l 995 0 l 859 0 l 627 837 l 405 0 l 265 0 l 0 1013 l 136 1013 l 342 202 l 556 1013 l 701 1013 l 921 207 l 1133 1012 l 1263 1013 "},">":{x_min:18.0625,x_max:774,ha:792,o:"m 774 376 l 18 40 l 18 149 l 631 421 l 18 692 l 18 799 l 774 465 l 774 376 "},v:{x_min:0,x_max:675.15625,ha:761,o:"m 675 738 l 404 0 l 272 0 l 0 738 l 133 737 l 340 147 l 541 737 l 675 738 "},"\u03c4":{x_min:.28125,x_max:644.5,ha:703,o:"m 644 628 l 382 628 l 382 179 q 388 120 382 137 q 436 91 401 91 q 474 94 447 91 q 504 97 501 97 l 504 0 q 454 -9 482 -5 q 401 -14 426 -14 q 278 67 308 -14 q 260 233 260 118 l 260 628 l 0 628 l 0 739 l 644 739 l 644 628 "},"\u03be":{x_min:0,x_max:624.9375,ha:699,o:"m 624 -37 q 608 -153 624 -96 q 563 -278 593 -211 l 454 -278 q 491 -183 486 -200 q 511 -83 511 -126 q 484 -23 511 -44 q 370 1 452 1 q 323 0 354 1 q 283 -1 293 -1 q 84 76 169 -1 q 0 266 0 154 q 56 431 0 358 q 197 538 108 498 q 94 613 134 562 q 54 730 54 665 q 77 823 54 780 q 143 901 101 867 l 27 901 l 27 1012 l 576 1012 l 576 901 l 380 901 q 244 863 303 901 q 178 745 178 820 q 312 600 178 636 q 532 582 380 582 l 532 479 q 276 455 361 479 q 118 281 118 410 q 165 173 118 217 q 274 120 208 133 q 494 101 384 110 q 624 -37 624 76 "},"&":{x_min:-3,x_max:894.25,ha:992,o:"m 894 0 l 725 0 l 624 123 q 471 0 553 40 q 306 -41 390 -41 q 168 -7 231 -41 q 62 92 105 26 q 14 187 31 139 q -3 276 -3 235 q 55 433 -3 358 q 248 581 114 508 q 170 689 196 640 q 137 817 137 751 q 214 985 137 922 q 384 1041 284 1041 q 548 988 483 1041 q 622 824 622 928 q 563 666 622 739 q 431 556 516 608 l 621 326 q 649 407 639 361 q 663 493 653 426 l 781 493 q 703 229 781 352 l 894 0 m 504 818 q 468 908 504 877 q 384 940 433 940 q 293 907 331 940 q 255 818 255 875 q 289 714 255 767 q 363 628 313 678 q 477 729 446 682 q 504 818 504 771 m 556 209 l 314 499 q 179 395 223 449 q 135 283 135 341 q 146 222 135 253 q 183 158 158 192 q 333 80 241 80 q 556 209 448 80 "},"\u039b":{x_min:0,x_max:862.5,ha:942,o:"m 862 0 l 719 0 l 426 847 l 143 0 l 0 0 l 356 1013 l 501 1013 l 862 0 "},I:{x_min:41,x_max:180,ha:293,o:"m 180 0 l 41 0 l 41 1013 l 180 1013 l 180 0 "},G:{x_min:0,x_max:921,ha:1011,o:"m 921 0 l 832 0 l 801 136 q 655 15 741 58 q 470 -28 568 -28 q 126 133 259 -28 q 0 499 0 284 q 125 881 0 731 q 486 1043 259 1043 q 763 957 647 1043 q 905 709 890 864 l 772 709 q 668 866 747 807 q 486 926 589 926 q 228 795 322 926 q 142 507 142 677 q 228 224 142 342 q 483 94 323 94 q 712 195 625 94 q 796 435 796 291 l 477 435 l 477 549 l 921 549 l 921 0 "},"\u03b0":{x_min:0,x_max:617,ha:725,o:"m 524 800 l 414 800 l 414 925 l 524 925 l 524 800 m 183 800 l 73 800 l 73 925 l 183 925 l 183 800 m 617 352 q 540 93 617 199 q 308 -24 455 -24 q 76 93 161 -24 q 0 352 0 199 l 0 738 l 126 738 l 126 354 q 169 185 126 257 q 312 98 220 98 q 451 185 402 98 q 492 354 492 257 l 492 738 l 617 738 l 617 352 m 489 1040 l 300 819 l 216 819 l 351 1040 l 489 1040 "},"`":{x_min:0,x_max:138.890625,ha:236,o:"m 138 699 l 0 699 l 0 861 q 36 974 0 929 q 138 1041 72 1020 l 138 977 q 82 931 95 969 q 69 839 69 893 l 138 839 l 138 699 "},"\xb7":{x_min:0,x_max:142,ha:239,o:"m 142 585 l 0 585 l 0 738 l 142 738 l 142 585 "},"\u03a5":{x_min:.328125,x_max:819.515625,ha:889,o:"m 819 1013 l 482 416 l 482 0 l 342 0 l 342 416 l 0 1013 l 140 1013 l 411 533 l 679 1013 l 819 1013 "},r:{x_min:0,x_max:355.5625,ha:432,o:"m 355 621 l 343 621 q 179 569 236 621 q 122 411 122 518 l 122 0 l 0 0 l 0 737 l 117 737 l 117 604 q 204 719 146 686 q 355 753 262 753 l 355 621 "},x:{x_min:0,x_max:675,ha:764,o:"m 675 0 l 525 0 l 331 286 l 144 0 l 0 0 l 256 379 l 12 738 l 157 737 l 336 473 l 516 738 l 661 738 l 412 380 l 675 0 "},"\u03bc":{x_min:0,x_max:696.609375,ha:747,o:"m 696 -4 q 628 -14 657 -14 q 498 97 513 -14 q 422 8 470 41 q 313 -24 374 -24 q 207 3 258 -24 q 120 80 157 31 l 120 -278 l 0 -278 l 0 738 l 124 738 l 124 343 q 165 172 124 246 q 308 82 216 82 q 451 177 402 82 q 492 358 492 254 l 492 738 l 616 738 l 616 214 q 623 136 616 160 q 673 92 636 92 q 696 95 684 92 l 696 -4 "},h:{x_min:0,x_max:615,ha:724,o:"m 615 472 l 615 0 l 490 0 l 490 454 q 456 590 490 535 q 338 654 416 654 q 186 588 251 654 q 122 436 122 522 l 122 0 l 0 0 l 0 1013 l 122 1013 l 122 633 q 218 727 149 694 q 362 760 287 760 q 552 676 484 760 q 615 472 615 600 "},".":{x_min:0,x_max:142,ha:239,o:"m 142 0 l 0 0 l 0 151 l 142 151 l 142 0 "},"\u03c6":{x_min:-2,x_max:878,ha:974,o:"m 496 -279 l 378 -279 l 378 -17 q 101 88 204 -17 q -2 367 -2 194 q 68 626 -2 510 q 283 758 151 758 l 283 646 q 167 537 209 626 q 133 373 133 462 q 192 177 133 254 q 378 93 259 93 l 378 758 q 445 764 426 763 q 476 765 464 765 q 765 659 653 765 q 878 377 878 553 q 771 96 878 209 q 496 -17 665 -17 l 496 -279 m 496 93 l 514 93 q 687 183 623 93 q 746 380 746 265 q 691 569 746 491 q 522 658 629 658 l 496 656 l 496 93 "},";":{x_min:0,x_max:142,ha:239,o:"m 142 585 l 0 585 l 0 738 l 142 738 l 142 585 m 142 -12 q 105 -132 142 -82 q 0 -206 68 -182 l 0 -138 q 58 -82 43 -123 q 68 0 68 -56 l 0 0 l 0 151 l 142 151 l 142 -12 "},f:{x_min:0,x_max:378,ha:472,o:"m 378 638 l 246 638 l 246 0 l 121 0 l 121 638 l 0 638 l 0 738 l 121 738 q 137 935 121 887 q 290 1028 171 1028 q 320 1027 305 1028 q 378 1021 334 1026 l 378 908 q 323 918 346 918 q 257 870 273 918 q 246 780 246 840 l 246 738 l 378 738 l 378 638 "},"\u201c":{x_min:1,x_max:348.21875,ha:454,o:"m 140 670 l 1 670 l 1 830 q 37 943 1 897 q 140 1011 74 990 l 140 947 q 82 900 97 940 q 68 810 68 861 l 140 810 l 140 670 m 348 670 l 209 670 l 209 830 q 245 943 209 897 q 348 1011 282 990 l 348 947 q 290 900 305 940 q 276 810 276 861 l 348 810 l 348 670 "},A:{x_min:.03125,x_max:906.953125,ha:1008,o:"m 906 0 l 756 0 l 648 303 l 251 303 l 142 0 l 0 0 l 376 1013 l 529 1013 l 906 0 m 610 421 l 452 867 l 293 421 l 610 421 "},"\u2018":{x_min:1,x_max:139.890625,ha:236,o:"m 139 670 l 1 670 l 1 830 q 37 943 1 897 q 139 1011 74 990 l 139 947 q 82 900 97 940 q 68 810 68 861 l 139 810 l 139 670 "},"\u03ca":{x_min:-70,x_max:283,ha:361,o:"m 283 800 l 173 800 l 173 925 l 283 925 l 283 800 m 40 800 l -70 800 l -70 925 l 40 925 l 40 800 m 283 3 q 232 -10 257 -5 q 181 -15 206 -15 q 84 26 118 -15 q 41 200 41 79 l 41 737 l 166 737 l 167 215 q 171 141 167 157 q 225 101 182 101 q 247 103 238 101 q 283 112 256 104 l 283 3 "},"\u03c0":{x_min:-.21875,x_max:773.21875,ha:857,o:"m 773 -7 l 707 -11 q 575 40 607 -11 q 552 174 552 77 l 552 226 l 552 626 l 222 626 l 222 0 l 97 0 l 97 626 l 0 626 l 0 737 l 773 737 l 773 626 l 676 626 l 676 171 q 695 103 676 117 q 773 90 714 90 l 773 -7 "},"\u03ac":{x_min:0,x_max:765.5625,ha:809,o:"m 765 -4 q 698 -14 726 -14 q 564 97 586 -14 q 466 7 525 40 q 337 -26 407 -26 q 88 98 186 -26 q 0 369 0 212 q 88 637 0 525 q 337 760 184 760 q 465 727 407 760 q 563 637 524 695 l 563 738 l 685 738 l 685 222 q 693 141 685 168 q 748 94 708 94 q 765 95 760 94 l 765 -4 m 584 371 q 531 562 584 485 q 360 653 470 653 q 192 566 254 653 q 135 379 135 489 q 186 181 135 261 q 358 84 247 84 q 528 176 465 84 q 584 371 584 260 m 604 1040 l 415 819 l 332 819 l 466 1040 l 604 1040 "},O:{x_min:0,x_max:958,ha:1057,o:"m 485 1041 q 834 882 702 1041 q 958 512 958 734 q 834 136 958 287 q 481 -26 702 -26 q 126 130 261 -26 q 0 504 0 279 q 127 880 0 728 q 485 1041 263 1041 m 480 98 q 731 225 638 98 q 815 504 815 340 q 733 783 815 669 q 480 912 640 912 q 226 784 321 912 q 142 504 142 670 q 226 224 142 339 q 480 98 319 98 "},n:{x_min:0,x_max:615,ha:724,o:"m 615 463 l 615 0 l 490 0 l 490 454 q 453 592 490 537 q 331 656 410 656 q 178 585 240 656 q 117 421 117 514 l 117 0 l 0 0 l 0 738 l 117 738 l 117 630 q 218 728 150 693 q 359 764 286 764 q 552 675 484 764 q 615 463 615 593 "},l:{x_min:41,x_max:166,ha:279,o:"m 166 0 l 41 0 l 41 1013 l 166 1013 l 166 0 "},"\xa4":{x_min:40.09375,x_max:728.796875,ha:825,o:"m 728 304 l 649 224 l 512 363 q 383 331 458 331 q 256 363 310 331 l 119 224 l 40 304 l 177 441 q 150 553 150 493 q 184 673 150 621 l 40 818 l 119 898 l 267 749 q 321 766 291 759 q 384 773 351 773 q 447 766 417 773 q 501 749 477 759 l 649 898 l 728 818 l 585 675 q 612 618 604 648 q 621 553 621 587 q 591 441 621 491 l 728 304 m 384 682 q 280 643 318 682 q 243 551 243 604 q 279 461 243 499 q 383 423 316 423 q 487 461 449 423 q 525 553 525 500 q 490 641 525 605 q 384 682 451 682 "},"\u03ba":{x_min:0,x_max:632.328125,ha:679,o:"m 632 0 l 482 0 l 225 384 l 124 288 l 124 0 l 0 0 l 0 738 l 124 738 l 124 446 l 433 738 l 596 738 l 312 466 l 632 0 "},p:{x_min:0,x_max:685,ha:786,o:"m 685 364 q 598 96 685 205 q 350 -23 504 -23 q 121 89 205 -23 l 121 -278 l 0 -278 l 0 738 l 121 738 l 121 633 q 220 726 159 691 q 351 761 280 761 q 598 636 504 761 q 685 364 685 522 m 557 371 q 501 560 557 481 q 330 651 437 651 q 162 559 223 651 q 108 366 108 479 q 162 177 108 254 q 333 87 224 87 q 502 178 441 87 q 557 371 557 258 "},"\u2021":{x_min:0,x_max:777,ha:835,o:"m 458 238 l 458 0 l 319 0 l 319 238 l 0 238 l 0 360 l 319 360 l 319 681 l 0 683 l 0 804 l 319 804 l 319 1015 l 458 1013 l 458 804 l 777 804 l 777 683 l 458 683 l 458 360 l 777 360 l 777 238 l 458 238 "},"\u03c8":{x_min:0,x_max:808,ha:907,o:"m 465 -278 l 341 -278 l 341 -15 q 87 102 180 -15 q 0 378 0 210 l 0 739 l 133 739 l 133 379 q 182 195 133 275 q 341 98 242 98 l 341 922 l 465 922 l 465 98 q 623 195 563 98 q 675 382 675 278 l 675 742 l 808 742 l 808 381 q 720 104 808 213 q 466 -13 627 -13 l 465 -278 "},"\u03b7":{x_min:.78125,x_max:697,ha:810,o:"m 697 -278 l 572 -278 l 572 454 q 540 587 572 536 q 425 650 501 650 q 271 579 337 650 q 206 420 206 509 l 206 0 l 81 0 l 81 489 q 73 588 81 562 q 0 644 56 644 l 0 741 q 68 755 38 755 q 158 720 124 755 q 200 630 193 686 q 297 726 234 692 q 434 761 359 761 q 620 692 544 761 q 697 516 697 624 l 697 -278 "}},cssFontWeight:"normal",ascender:1189,underlinePosition:-100,cssFontStyle:"normal",boundingBox:{yMin:-334,xMin:-111,yMax:1189,xMax:1672},resolution:1e3,original_font_information:{postscript_name:"Helvetiker-Regular",version_string:"Version 1.00 2004 initial release",vendor_url:"http://www.magenta.gr/",full_font_name:"Helvetiker",font_family_name:"Helvetiker",copyright:"Copyright (c) \u039cagenta ltd, 2004",description:"",trademark:"",designer:"",designer_url:"",unique_font_identifier:"\u039cagenta ltd:Helvetiker:22-10-104",license_url:"http://www.ellak.gr/fonts/MgOpen/license.html",license_description:'Copyright (c) 2004 by MAGENTA Ltd. All Rights Reserved.\r\n\r\nPermission is hereby granted, free of charge, to any person obtaining a copy of the fonts accompanying this license ("Fonts") and associated documentation files (the "Font Software"), to reproduce and distribute the Font Software, including without limitation the rights to use, copy, merge, publish, distribute, and/or sell copies of the Font Software, and to permit persons to whom the Font Software is furnished to do so, subject to the following conditions: \r\n\r\nThe above copyright and this permission notice shall be included in all copies of one or more of the Font Software typefaces.\r\n\r\nThe Font Software may be modified, altered, or added to, and in particular the designs of glyphs or characters in the Fonts may be modified and additional glyphs or characters may be added to the Fonts, only if the fonts are renamed to names not containing the word "MgOpen", or if the modifications are accepted for inclusion in the Font Software itself by the each appointed Administrator.\r\n\r\nThis License becomes null and void to the extent applicable to Fonts or Font Software that has been modified and is distributed under the "MgOpen" name.\r\n\r\nThe Font Software may be sold as part of a larger software package but no copy of one or more of the Font Software typefaces may be sold by itself. \r\n\r\nTHE FONT SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT OF COPYRIGHT, PATENT, TRADEMARK, OR OTHER RIGHT. IN NO EVENT SHALL MAGENTA OR PERSONS OR BODIES IN CHARGE OF ADMINISTRATION AND MAINTENANCE OF THE FONT SOFTWARE BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, INCLUDING ANY GENERAL, SPECIAL, INDIRECT, INCIDENTAL, OR CONSEQUENTIAL DAMAGES, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF THE USE OR INABILITY TO USE THE FONT SOFTWARE OR FROM OTHER DEALINGS IN THE FONT SOFTWARE.',manufacturer_name:"\u039cagenta ltd",font_sub_family_name:"Regular"},descender:-334,familyName:"Helvetiker",lineHeight:1522,underlineThickness:50},jN=SP(SP({},window.THREE?window.THREE:{BoxGeometry:Zo,CircleGeometry:_d,DoubleSide:xe,Group:nc,Mesh:Jo,MeshLambertMaterial:Rf,TextGeometry:iP,Vector3:zi}),{},{Font:aP,TextGeometry:iP}),WN=w_({props:{labelsData:{default:[]},labelLat:{default:"lat"},labelLng:{default:"lng"},labelAltitude:{default:0},labelText:{default:"text"},labelSize:{default:.5},labelTypeFace:{default:VN,onChange:function(e,t){t.font=new jN.Font(e)}},labelColor:{default:function(){return"lightgrey"}},labelRotation:{default:0},labelResolution:{default:3},labelIncludeDot:{default:!0},labelDotRadius:{default:.1},labelDotOrientation:{default:function(){return"bottom"}},labelsTransitionDuration:{default:1e3,triggerUpdate:!1}},init:function(e,t,n){var r=n.tweenGroup;IP(e),t.scene=e,t.tweenGroup=r;var i=new jN.CircleGeometry(1,32);t.dataMapper=new tN(e,{objBindAttr:"__threeObjLabel"}).onCreateObj((function(){var e=new jN.MeshLambertMaterial;e.side=xe;var t=new jN.Group;t.add(new jN.Mesh(i,e));var n=new jN.Mesh(void 0,e);t.add(n);var r=new jN.Mesh;return r.visible=!1,n.add(r),t.__globeObjType="label",t}))},update:function(e){var t=kS(e.labelLat),n=kS(e.labelLng),r=kS(e.labelAltitude),i=kS(e.labelText),a=kS(e.labelSize),o=kS(e.labelRotation),s=kS(e.labelColor),u=kS(e.labelIncludeDot),l=kS(e.labelDotRadius),c=kS(e.labelDotOrientation),h=new Set(["right","top","bottom"]),d=2*Math.PI*LP/360;e.dataMapper.onUpdateObj((function(f,p){var A=kP(f.children,2),v=A[0],m=A[1],g=kP(m.children,1)[0],y=s(p),b=YP(y);m.material.color.set(XP(y)),m.material.transparent=b<1,m.material.opacity=b;var x=u(p),_=c(p);!x||!h.has(_)&&(_="bottom");var w=x?+l(p)*d:1e-12;v.scale.x=v.scale.y=w;var S=+a(p)*d;if(m.geometry&&m.geometry.dispose(),m.geometry=new jN.TextGeometry(i(p),{font:e.font,size:S,depth:0,height:0,curveSegments:e.labelResolution}),g.geometry&&g.geometry.dispose(),m.geometry.computeBoundingBox(),g.geometry=vP(jN.BoxGeometry,CP((new jN.Vector3).subVectors(m.geometry.boundingBox.max,m.geometry.boundingBox.min).toArray())),"right"!==_&&m.geometry.center(),x){var M=w+S/2;"right"===_&&(m.position.x=M),m.position.y={right:-S/2,top:M+S/2,bottom:-M-S/2}[_]}var k=function(t){var n=f.__currentTargetD=t,r=n.lat,i=n.lng,a=n.alt,o=n.rot,s=n.scale;Object.assign(f.position,FP(r,i,a)),f.lookAt(e.scene.localToWorld(new jN.Vector3(0,0,0))),f.rotateY(Math.PI),f.rotateZ(-o*Math.PI/180),f.scale.x=f.scale.y=f.scale.z=s},T={lat:+t(p),lng:+n(p),alt:+r(p),rot:+o(p),scale:1},E=f.__currentTargetD||Object.assign({},T,{scale:1e-12});Object.keys(T).some((function(e){return E[e]!==T[e]}))&&(!e.labelsTransitionDuration||e.labelsTransitionDuration<0?k(T):e.tweenGroup.add(new R_(E).to(T,e.labelsTransitionDuration).easing(S_.Quadratic.InOut).onUpdate(k).start()))})).digest(e.labelsData)}}),XN=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32;dP(this,t),(e=cP(this,t)).type="CircleLineGeometry",e.parameters={radius:n,segmentCount:r};for(var i=[],a=0;a<=r;a++){var o=(a/r-.25)*Math.PI*2;i.push({x:Math.cos(o)*n,y:Math.sin(o)*n,z:0})}return e.setFromPoints(i),e}return xP(t,e),mP(t)}((window.THREE?window.THREE:{BufferGeometry:Fo}).BufferGeometry),YN=window.THREE?window.THREE:{Color:uo,Group:nc,Line:Nh,LineBasicMaterial:Mh,Vector3:zi},QN=rk.default||rk,JN=w_({props:{ringsData:{default:[]},ringLat:{default:"lat"},ringLng:{default:"lng"},ringAltitude:{default:.0015},ringColor:{default:function(){return"#ffffaa"},triggerUpdate:!1},ringResolution:{default:64,triggerUpdate:!1},ringMaxRadius:{default:2,triggerUpdate:!1},ringPropagationSpeed:{default:1,triggerUpdate:!1},ringRepeatPeriod:{default:700,triggerUpdate:!1}},methods:{pauseAnimation:function(e){var t;null===(t=e.ticker)||void 0===t||t.pause()},resumeAnimation:function(e){var t;null===(t=e.ticker)||void 0===t||t.resume()},_destructor:function(e){var t;null===(t=e.ticker)||void 0===t||t.dispose()}},init:function(e,t,n){var r=n.tweenGroup;IP(e),t.scene=e,t.tweenGroup=r,t.dataMapper=new tN(e,{objBindAttr:"__threeObjRing",removeDelay:3e4}).onCreateObj((function(){var e=new YN.Group;return e.__globeObjType="ring",e})),t.ticker=new QN,t.ticker.onTick.add((function(e){if(t.ringsData.length){var n=kS(t.ringColor),r=kS(t.ringAltitude),i=kS(t.ringMaxRadius),a=kS(t.ringPropagationSpeed),o=kS(t.ringRepeatPeriod);t.dataMapper.entries().filter((function(e){return kP(e,2)[1]})).forEach((function(s){var u,l,c=kP(s,2),h=c[0],d=c[1];if((d.__nextRingTime||0)<=e){var f=o(h)/1e3;d.__nextRingTime=e+(f<=0?1/0:f);var p,A=new YN.Line(new XN(1,t.ringResolution),new YN.LineBasicMaterial),v=n(h),m=v instanceof Array||v instanceof Function;m?v instanceof Array?(p=sT().domain(v.map((function(e,t){return t/(v.length-1)}))).range(v),A.material.transparent=v.some((function(e){return YP(e)<1}))):(p=v,A.material.transparent=!0):(A.material.color=new YN.Color(XP(v)),u=A.material,l=YP(v),u.opacity=l,u.transparent=l<1,u.depthWrite=l>=1);var g=LP*(1+r(h)),y=i(h),b=y*Math.PI/180,x=a(h),_=x<=0,w=function(e){var t=e.t,n=(_?1-t:t)*b;if(A.scale.x=A.scale.y=g*Math.sin(n),A.position.z=g*(1-Math.cos(n)),m){var r=p(t);A.material.color=new YN.Color(XP(r)),A.material.transparent&&(A.material.opacity=YP(r))}};if(0===x)w({t:0}),d.add(A);else{var S=1e3*Math.abs(y/x);t.tweenGroup.add(new R_({t:0}).to({t:1},S).onUpdate(w).onStart((function(){return d.add(A)})).onComplete((function(){d.remove(A),NP(A)})).start())}}}))}}))},update:function(e){var t=kS(e.ringLat),n=kS(e.ringLng),r=kS(e.ringAltitude),i=e.scene.localToWorld(new YN.Vector3(0,0,0));e.dataMapper.onUpdateObj((function(e,a){var o=t(a),s=n(a),u=r(a);Object.assign(e.position,FP(o,s,u)),e.lookAt(i)})).digest(e.ringsData)}}),KN=SP(SP({},window.THREE?window.THREE:{}),{},{CSS2DObject:Ox}),ZN=w_({props:{htmlElementsData:{default:[]},htmlLat:{default:"lat"},htmlLng:{default:"lng"},htmlAltitude:{default:0},htmlElement:{},htmlTransitionDuration:{default:1e3,triggerUpdate:!1},isBehindGlobe:{onChange:function(){this.updateObjVisibility()},triggerUpdate:!1}},methods:{updateObjVisibility:function(e,t){e.dataMapper&&(t?[t]:e.dataMapper.entries().map((function(e){return kP(e,2)[1]})).filter((function(e){return e}))).forEach((function(t){return t.visible=!e.isBehindGlobe||!e.isBehindGlobe(t.position)}))}},init:function(e,t,n){var r=n.tweenGroup;IP(e),t.scene=e,t.tweenGroup=r,t.dataMapper=new tN(e,{objBindAttr:"__threeObjHtml"}).onCreateObj((function(e){var n=kS(t.htmlElement)(e),r=new KN.CSS2DObject(n);return r.__globeObjType="html",r}))},update:function(e,t){var n=this,r=kS(e.htmlLat),i=kS(e.htmlLng),a=kS(e.htmlAltitude);t.hasOwnProperty("htmlElement")&&e.dataMapper.clear(),e.dataMapper.onUpdateObj((function(t,o){var s=function(e){var r=t.__currentTargetD=e,i=r.alt,a=r.lat,o=r.lng;Object.assign(t.position,FP(a,o,i)),n.updateObjVisibility(t)},u={lat:+r(o),lng:+i(o),alt:+a(o)};!e.htmlTransitionDuration||e.htmlTransitionDuration<0||!t.__currentTargetD?s(u):e.tweenGroup.add(new R_(t.__currentTargetD).to(u,e.htmlTransitionDuration).easing(S_.Quadratic.InOut).onUpdate(s).start())})).digest(e.htmlElementsData)}}),$N=window.THREE?window.THREE:{Euler:ka,Group:nc,Mesh:Jo,MeshLambertMaterial:Rf,SphereGeometry:Af},eI=w_({props:{objectsData:{default:[]},objectLat:{default:"lat"},objectLng:{default:"lng"},objectAltitude:{default:.01},objectFacesSurface:{default:!0},objectRotation:{},objectThreeObject:{default:new $N.Mesh(new $N.SphereGeometry(1,16,8),new $N.MeshLambertMaterial({color:"#ffffaa",transparent:!0,opacity:.7}))}},init:function(e,t){IP(e),t.scene=e,t.dataMapper=new tN(e,{objBindAttr:"__threeObjObject"}).onCreateObj((function(e){var n=kS(t.objectThreeObject)(e);t.objectThreeObject===n&&(n=n.clone());var r=new $N.Group;return r.add(n),r.__globeObjType="object",r}))},update:function(e,t){var n=kS(e.objectLat),r=kS(e.objectLng),i=kS(e.objectAltitude),a=kS(e.objectFacesSurface),o=kS(e.objectRotation);t.hasOwnProperty("objectThreeObject")&&e.dataMapper.clear(),e.dataMapper.onUpdateObj((function(e,t){var s=+n(t),u=+r(t),l=+i(t);Object.assign(e.position,FP(s,u,l)),a(t)?e.setRotationFromEuler(new ka(zP(-s),zP(u),0,"YXZ")):e.rotation.set(0,0,0);var c=e.children[0],h=o(t);h&&c.setRotationFromEuler(new ka(zP(h.x||0),zP(h.y||0),zP(h.z||0)))})).digest(e.objectsData)}}),tI=w_({props:{customLayerData:{default:[]},customThreeObject:{},customThreeObjectUpdate:{triggerUpdate:!1}},init:function(e,t){IP(e),t.scene=e,t.dataMapper=new tN(e,{objBindAttr:"__threeObjCustom"}).onCreateObj((function(e){var n=kS(t.customThreeObject)(e,LP);return n&&(t.customThreeObject===n&&(n=n.clone()),n.__globeObjType="custom"),n}))},update:function(e,t){e.customThreeObjectUpdate||IP(e.scene);var n=kS(e.customThreeObjectUpdate);t.hasOwnProperty("customThreeObject")&&e.dataMapper.clear(),e.dataMapper.onUpdateObj((function(e,t){return n(e,t,LP)})).digest(e.customLayerData)}}),nI=window.THREE?window.THREE:{Camera:is,Frustum:ys,Group:nc,Matrix4:va,Vector2:ii,Vector3:zi},rI=["globeLayer","pointsLayer","arcsLayer","hexBinLayer","heatmapsLayer","polygonsLayer","hexedPolygonsLayer","pathsLayer","tilesLayer","labelsLayer","ringsLayer","htmlElementsLayer","objectsLayer","customLayer"],iI=DP("globeLayer",WP),aI=Object.assign.apply(Object,CP(["globeImageUrl","bumpImageUrl","showGlobe","showGraticules","showAtmosphere","atmosphereColor","atmosphereAltitude"].map((function(e){return gP({},e,iI.linkProp(e))})))),oI=Object.assign.apply(Object,CP(["globeMaterial"].map((function(e){return gP({},e,iI.linkMethod(e))})))),sI=DP("pointsLayer",aN),uI=Object.assign.apply(Object,CP(["pointsData","pointLat","pointLng","pointColor","pointAltitude","pointRadius","pointResolution","pointsMerge","pointsTransitionDuration"].map((function(e){return gP({},e,sI.linkProp(e))})))),lI=DP("arcsLayer",dN),cI=Object.assign.apply(Object,CP(["arcsData","arcStartLat","arcStartLng","arcEndLat","arcEndLng","arcColor","arcAltitude","arcAltitudeAutoScale","arcStroke","arcCurveResolution","arcCircularResolution","arcDashLength","arcDashGap","arcDashInitialGap","arcDashAnimateTime","arcsTransitionDuration"].map((function(e){return gP({},e,lI.linkProp(e))})))),hI=DP("hexBinLayer",vN),dI=Object.assign.apply(Object,CP(["hexBinPointsData","hexBinPointLat","hexBinPointLng","hexBinPointWeight","hexBinResolution","hexMargin","hexTopCurvatureResolution","hexTopColor","hexSideColor","hexAltitude","hexBinMerge","hexTransitionDuration"].map((function(e){return gP({},e,hI.linkProp(e))})))),fI=DP("heatmapsLayer",CN),pI=Object.assign.apply(Object,CP(["heatmapsData","heatmapPoints","heatmapPointLat","heatmapPointLng","heatmapPointWeight","heatmapBandwidth","heatmapColorFn","heatmapColorSaturation","heatmapBaseAltitude","heatmapTopAltitude","heatmapsTransitionDuration"].map((function(e){return gP({},e,fI.linkProp(e))})))),AI=DP("hexedPolygonsLayer",DN),vI=Object.assign.apply(Object,CP(["hexPolygonsData","hexPolygonGeoJsonGeometry","hexPolygonColor","hexPolygonAltitude","hexPolygonResolution","hexPolygonMargin","hexPolygonUseDots","hexPolygonCurvatureResolution","hexPolygonDotResolution","hexPolygonsTransitionDuration"].map((function(e){return gP({},e,AI.linkProp(e))})))),mI=DP("polygonsLayer",BN),gI=Object.assign.apply(Object,CP(["polygonsData","polygonGeoJsonGeometry","polygonCapColor","polygonCapMaterial","polygonSideColor","polygonSideMaterial","polygonStrokeColor","polygonAltitude","polygonCapCurvatureResolution","polygonsTransitionDuration"].map((function(e){return gP({},e,mI.linkProp(e))})))),yI=DP("pathsLayer",zN),bI=Object.assign.apply(Object,CP(["pathsData","pathPoints","pathPointLat","pathPointLng","pathPointAlt","pathResolution","pathColor","pathStroke","pathDashLength","pathDashGap","pathDashInitialGap","pathDashAnimateTime","pathTransitionDuration"].map((function(e){return gP({},e,yI.linkProp(e))})))),xI=DP("tilesLayer",qN),_I=Object.assign.apply(Object,CP(["tilesData","tileLat","tileLng","tileAltitude","tileWidth","tileHeight","tileUseGlobeProjection","tileMaterial","tileCurvatureResolution","tilesTransitionDuration"].map((function(e){return gP({},e,xI.linkProp(e))})))),wI=DP("labelsLayer",WN),SI=Object.assign.apply(Object,CP(["labelsData","labelLat","labelLng","labelAltitude","labelRotation","labelText","labelSize","labelTypeFace","labelColor","labelResolution","labelIncludeDot","labelDotRadius","labelDotOrientation","labelsTransitionDuration"].map((function(e){return gP({},e,wI.linkProp(e))})))),MI=DP("ringsLayer",JN),kI=Object.assign.apply(Object,CP(["ringsData","ringLat","ringLng","ringAltitude","ringColor","ringResolution","ringMaxRadius","ringPropagationSpeed","ringRepeatPeriod"].map((function(e){return gP({},e,MI.linkProp(e))})))),TI=DP("htmlElementsLayer",ZN),EI=Object.assign.apply(Object,CP(["htmlElementsData","htmlLat","htmlLng","htmlAltitude","htmlElement","htmlTransitionDuration"].map((function(e){return gP({},e,TI.linkProp(e))})))),CI=DP("objectsLayer",eI),RI=Object.assign.apply(Object,CP(["objectsData","objectLat","objectLng","objectAltitude","objectRotation","objectFacesSurface","objectThreeObject"].map((function(e){return gP({},e,CI.linkProp(e))})))),BI=DP("customLayer",tI),PI=Object.assign.apply(Object,CP(["customLayerData","customThreeObject","customThreeObjectUpdate"].map((function(e){return gP({},e,BI.linkProp(e))})))),NI=w_({props:SP(SP(SP(SP(SP(SP(SP(SP(SP(SP(SP(SP(SP(SP({onGlobeReady:{triggerUpdate:!1},rendererSize:{default:new nI.Vector2(window.innerWidth,window.innerHeight),onChange:function(e,t){t.pathsLayer.rendererSize(e)},triggerUpdate:!1}},aI),uI),cI),dI),pI),gI),vI),bI),_I),SI),kI),EI),RI),PI),methods:SP({getGlobeRadius:OP,getCoords:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return FP.apply(void 0,n)},toGeoCoords:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return UP.apply(void 0,n)},setPointOfView:function(e,t){var n=t instanceof nI.Camera?t.position:t,r=void 0;if(e.scene&&n){var i,a,o,s,u=OP();r=function(t){void 0===i&&(i=n.clone().applyMatrix4(e.scene.matrixWorld.clone().invert())),void 0===a&&(a=i.length()),void 0===o&&(o=Math.sqrt(Math.pow(a,2)-Math.pow(u,2))),void 0===s&&(s=Math.acos(o/a));var r=i.distanceTo(t);if(r<o)return!1;var l=t.length();return Math.acos((Math.pow(a,2)+Math.pow(r,2)-Math.pow(l,2))/(2*a*r))<s}}var l,c,h=void 0;e.scene&&t instanceof nI.Camera&&(h=function(n){var r=n.clone().applyMatrix4(e.scene.matrixWorld);if(l||(t.updateMatrix(),t.updateMatrixWorld(),(l=new nI.Frustum).setFromProjectionMatrix((new nI.Matrix4).multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse))),!l.containsPoint(r))return!1;c||(c=e.scene.getWorldPosition(new nI.Vector3));var i=t.position;return i.distanceTo(r)<i.distanceTo(c)});e.layersThatNeedBehindGlobeChecker.forEach((function(e){return e.isBehindGlobe(r)})),e.layersThatNeedInViewChecker.forEach((function(e){return e.isInView(h)}))},pauseAnimation:function(e){return null!==e.animationFrameRequestId&&(cancelAnimationFrame(e.animationFrameRequestId),e.animationFrameRequestId=null),e.pausableLayers.forEach((function(e){var t;return null===(t=e.pauseAnimation)||void 0===t?void 0:t.call(e)})),this},resumeAnimation:function(e){return null===e.animationFrameRequestId&&this._animationCycle(),e.pausableLayers.forEach((function(e){var t;return null===(t=e.resumeAnimation)||void 0===t?void 0:t.call(e)})),this},_animationCycle:function(e){e.animationFrameRequestId=requestAnimationFrame(this._animationCycle),e.tweenGroup.update()},_destructor:function(e){this.pauseAnimation(),e.destructableLayers.forEach((function(e){return e._destructor()}))}},oI),stateInit:function(){var e=new k_,t={tweenGroup:e},n={globeLayer:WP(t),pointsLayer:aN(t),arcsLayer:dN(t),hexBinLayer:vN(t),heatmapsLayer:CN(t),polygonsLayer:BN(t),hexedPolygonsLayer:DN(t),pathsLayer:zN(t),tilesLayer:qN(t),labelsLayer:WN(t),ringsLayer:JN(t),htmlElementsLayer:ZN(t),objectsLayer:eI(t),customLayer:tI(t)};return SP(SP({tweenGroup:e},n),{},{layersThatNeedBehindGlobeChecker:Object.values(n).filter((function(e){return e.hasOwnProperty("isBehindGlobe")})),layersThatNeedInViewChecker:Object.values(n).filter((function(e){return e.hasOwnProperty("isInView")})),destructableLayers:Object.values(n).filter((function(e){return e.hasOwnProperty("_destructor")})),pausableLayers:Object.values(n).filter((function(e){return e.hasOwnProperty("pauseAnimation")}))})},init:function(e,t,n){var r=n.animateIn,i=void 0===r||r,a=n.waitForGlobeReady,o=void 0===a||a;IP(e),t.scene=e,t.scene.visible=!1,rI.forEach((function(e){var n=new nI.Group;t.scene.add(n),t[e](n)}));var s=function(){if(i){t.scene.scale.set(1e-6,1e-6,1e-6),t.tweenGroup.add(new R_({k:1e-6}).to({k:1},600).easing(S_.Quadratic.Out).onUpdate((function(e){var n=e.k;return t.scene.scale.set(n,n,n)})).start());var e=new nI.Vector3(0,1,0);t.tweenGroup.add(new R_({rot:2*Math.PI}).to({rot:0},1200).easing(S_.Quintic.Out).onUpdate((function(n){var r=n.rot;return t.scene.setRotationFromAxisAngle(e,r)})).start())}t.scene.visible=!0,t.onGlobeReady&&t.onGlobeReady()};o?t.globeLayer.onReady(s):s(),this._animationCycle()},update:function(e){}});var II,DI,LI=window.THREE?window.THREE:{Group:nc},OI=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=function(t){function r(){var t;dP(this,r);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return(t=cP(this,r,[].concat(a))).__kapsuleInstance=vP(e,[].concat(CP(n?[t]:[]),a)),t}return xP(r,t),mP(r)}(t);return Object.keys(e()).forEach((function(e){return r.prototype[e]=function(){var t,n=(t=this.__kapsuleInstance)[e].apply(t,arguments);return n===this.__kapsuleInstance?this:n}})),r}(NI,LI.Group,!0),FI="170",UI=100,zI=204,GI=205,qI=300,HI=301,VI=302,jI=303,WI=304,XI=306,YI=1e3,QI=1001,JI=1002,KI=1003,ZI=1004,$I=1005,eD=1006,tD=1007,nD=1008,rD=1009,iD=1010,aD=1011,oD=1012,sD=1013,uD=1014,lD=1015,cD=1016,hD=1020,dD=35902,fD=1022,pD=1023,AD=1026,vD=1027,mD=1028,gD=1029,yD=1030,bD=1031,xD=1033,_D=33776,wD=33777,SD=33778,MD=33779,kD=35840,TD=35841,ED=35842,CD=35843,RD=36196,BD=37492,PD=37496,ND=37808,ID=37809,DD=37810,LD=37811,OD=37812,FD=37813,UD=37814,zD=37815,GD=37816,qD=37817,HD=37818,VD=37819,jD=37820,WD=37821,XD=36492,YD=36284,QD=36285,JD=36286,KD=2300,ZD=2301,$D=2302,eL=2400,tL=2401,nL=2402,rL="",iL="srgb",aL="srgb-linear",oL="linear",sL="srgb",uL=7680,lL=35044,cL=35048,hL=2e3,dL=2001,fL=function(){function e(){V(this,e)}return W(e,[{key:"addEventListener",value:function(e,t){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}},{key:"hasEventListener",value:function(e,t){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)}},{key:"removeEventListener",value:function(e,t){if(void 0!==this._listeners){var n=this._listeners[e];if(void 0!==n){var r=n.indexOf(t);-1!==r&&n.splice(r,1)}}}},{key:"dispatchEvent",value:function(e){if(void 0!==this._listeners){var t=this._listeners[e.type];if(void 0!==t){e.target=this;for(var n=t.slice(0),r=0,i=n.length;r<i;r++)n[r].call(this,e);e.target=null}}}}]),e}(),pL=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],AL=1234567,vL=Math.PI/180,mL=180/Math.PI;function gL(){var e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(pL[255&e]+pL[e>>8&255]+pL[e>>16&255]+pL[e>>24&255]+"-"+pL[255&t]+pL[t>>8&255]+"-"+pL[t>>16&15|64]+pL[t>>24&255]+"-"+pL[63&n|128]+pL[n>>8&255]+"-"+pL[n>>16&255]+pL[n>>24&255]+pL[255&r]+pL[r>>8&255]+pL[r>>16&255]+pL[r>>24&255]).toLowerCase()}function yL(e,t,n){return Math.max(t,Math.min(n,e))}function bL(e,t){return(e%t+t)%t}function xL(e,t,n){return(1-n)*e+n*t}function _L(e,t){switch(t.constructor){case Float32Array:return e;case Uint32Array:return e/4294967295;case Uint16Array:return e/65535;case Uint8Array:return e/255;case Int32Array:return Math.max(e/2147483647,-1);case Int16Array:return Math.max(e/32767,-1);case Int8Array:return Math.max(e/127,-1);default:throw new Error("Invalid component type.")}}function wL(e,t){switch(t.constructor){case Float32Array:return e;case Uint32Array:return Math.round(4294967295*e);case Uint16Array:return Math.round(65535*e);case Uint8Array:return Math.round(255*e);case Int32Array:return Math.round(2147483647*e);case Int16Array:return Math.round(32767*e);case Int8Array:return Math.round(127*e);default:throw new Error("Invalid component type.")}}var SL={DEG2RAD:vL,RAD2DEG:mL,generateUUID:gL,clamp:yL,euclideanModulo:bL,mapLinear:function(e,t,n,r,i){return r+(e-t)*(i-r)/(n-t)},inverseLerp:function(e,t,n){return e!==t?(n-e)/(t-e):0},lerp:xL,damp:function(e,t,n,r){return xL(e,t,1-Math.exp(-n*r))},pingpong:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return t-Math.abs(bL(e,2*t)-t)},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*(3-2*e)},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},seededRandom:function(e){void 0!==e&&(AL=e);var t=AL+=1831565813;return t=Math.imul(t^t>>>15,1|t),(((t^=t+Math.imul(t^t>>>7,61|t))^t>>>14)>>>0)/4294967296},degToRad:function(e){return e*vL},radToDeg:function(e){return e*mL},isPowerOfTwo:function(e){return 0===(e&e-1)&&0!==e},ceilPowerOfTwo:function(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},floorPowerOfTwo:function(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))},setQuaternionFromProperEuler:function(e,t,n,r,i){var a=Math.cos,o=Math.sin,s=a(n/2),u=o(n/2),l=a((t+r)/2),c=o((t+r)/2),h=a((t-r)/2),d=o((t-r)/2),f=a((r-t)/2),p=o((r-t)/2);switch(i){case"XYX":e.set(s*c,u*h,u*d,s*l);break;case"YZY":e.set(u*d,s*c,u*h,s*l);break;case"ZXZ":e.set(u*h,u*d,s*c,s*l);break;case"XZX":e.set(s*c,u*p,u*f,s*l);break;case"YXY":e.set(u*f,s*c,u*p,s*l);break;case"ZYZ":e.set(u*p,u*f,s*c,s*l);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}},normalize:wL,denormalize:_L},ML=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;V(this,t),t.prototype.isVector2=!0,this.x=e,this.y=n}return W(t,[{key:"width",get:function(){return this.x},set:function(e){this.x=e}},{key:"height",get:function(){return this.y},set:function(e){this.y=e}},{key:"set",value:function(e,t){return this.x=e,this.y=t,this}},{key:"setScalar",value:function(e){return this.x=e,this.y=e,this}},{key:"setX",value:function(e){return this.x=e,this}},{key:"setY",value:function(e){return this.y=e,this}},{key:"setComponent",value:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}},{key:"getComponent",value:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y)}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this}},{key:"add",value:function(e){return this.x+=e.x,this.y+=e.y,this}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this}},{key:"addVectors",value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}},{key:"addScaledVector",value:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}},{key:"sub",value:function(e){return this.x-=e.x,this.y-=e.y,this}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this}},{key:"subVectors",value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}},{key:"multiply",value:function(e){return this.x*=e.x,this.y*=e.y,this}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this}},{key:"divide",value:function(e){return this.x/=e.x,this.y/=e.y,this}},{key:"divideScalar",value:function(e){return this.multiplyScalar(1/e)}},{key:"applyMatrix3",value:function(e){var t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this}},{key:"min",value:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}},{key:"max",value:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}},{key:"clamp",value:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}},{key:"clampScalar",value:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}},{key:"clampLength",value:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},{key:"roundToZero",value:function(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y}},{key:"cross",value:function(e){return this.x*e.y-this.y*e.x}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"angle",value:function(){var e=Math.atan2(-this.y,-this.x)+Math.PI;return e}},{key:"angleTo",value:function(e){var t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;var n=this.dot(e)/t;return Math.acos(yL(n,-1,1))}},{key:"distanceTo",value:function(e){return Math.sqrt(this.distanceToSquared(e))}},{key:"distanceToSquared",value:function(e){var t=this.x-e.x,n=this.y-e.y;return t*t+n*n}},{key:"manhattanDistanceTo",value:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}},{key:"setLength",value:function(e){return this.normalize().multiplyScalar(e)}},{key:"lerp",value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}},{key:"lerpVectors",value:function(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e}},{key:"fromBufferAttribute",value:function(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}},{key:"rotateAround",value:function(e,t){var n=Math.cos(t),r=Math.sin(t),i=this.x-e.x,a=this.y-e.y;return this.x=i*n-a*r+e.x,this.y=i*r+a*n+e.y,this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this}},{key:Symbol.iterator,value:se().mark((function e(){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.x;case 2:return e.next=4,this.y;case 4:case"end":return e.stop()}}),e,this)}))}]),t}(),kL=function(){function e(t,n,r,i,a,o,s,u,l){V(this,e),e.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],void 0!==t&&this.set(t,n,r,i,a,o,s,u,l)}return W(e,[{key:"set",value:function(e,t,n,r,i,a,o,s,u){var l=this.elements;return l[0]=e,l[1]=r,l[2]=o,l[3]=t,l[4]=i,l[5]=s,l[6]=n,l[7]=a,l[8]=u,this}},{key:"identity",value:function(){return this.set(1,0,0,0,1,0,0,0,1),this}},{key:"copy",value:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}},{key:"extractBasis",value:function(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}},{key:"setFromMatrix4",value:function(e){var t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}},{key:"multiply",value:function(e){return this.multiplyMatrices(this,e)}},{key:"premultiply",value:function(e){return this.multiplyMatrices(e,this)}},{key:"multiplyMatrices",value:function(e,t){var n=e.elements,r=t.elements,i=this.elements,a=n[0],o=n[3],s=n[6],u=n[1],l=n[4],c=n[7],h=n[2],d=n[5],f=n[8],p=r[0],A=r[3],v=r[6],m=r[1],g=r[4],y=r[7],b=r[2],x=r[5],_=r[8];return i[0]=a*p+o*m+s*b,i[3]=a*A+o*g+s*x,i[6]=a*v+o*y+s*_,i[1]=u*p+l*m+c*b,i[4]=u*A+l*g+c*x,i[7]=u*v+l*y+c*_,i[2]=h*p+d*m+f*b,i[5]=h*A+d*g+f*x,i[8]=h*v+d*y+f*_,this}},{key:"multiplyScalar",value:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}},{key:"determinant",value:function(){var e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],s=e[6],u=e[7],l=e[8];return t*a*l-t*o*u-n*i*l+n*o*s+r*i*u-r*a*s}},{key:"invert",value:function(){var e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],s=e[6],u=e[7],l=e[8],c=l*a-o*u,h=o*s-l*i,d=u*i-a*s,f=t*c+n*h+r*d;if(0===f)return this.set(0,0,0,0,0,0,0,0,0);var p=1/f;return e[0]=c*p,e[1]=(r*u-l*n)*p,e[2]=(o*n-r*a)*p,e[3]=h*p,e[4]=(l*t-r*s)*p,e[5]=(r*i-o*t)*p,e[6]=d*p,e[7]=(n*s-u*t)*p,e[8]=(a*t-n*i)*p,this}},{key:"transpose",value:function(){var e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}},{key:"getNormalMatrix",value:function(e){return this.setFromMatrix4(e).invert().transpose()}},{key:"transposeIntoArray",value:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}},{key:"setUvTransform",value:function(e,t,n,r,i,a,o){var s=Math.cos(i),u=Math.sin(i);return this.set(n*s,n*u,-n*(s*a+u*o)+a+e,-r*u,r*s,-r*(-u*a+s*o)+o+t,0,0,1),this}},{key:"scale",value:function(e,t){return this.premultiply(TL.makeScale(e,t)),this}},{key:"rotate",value:function(e){return this.premultiply(TL.makeRotation(-e)),this}},{key:"translate",value:function(e,t){return this.premultiply(TL.makeTranslation(e,t)),this}},{key:"makeTranslation",value:function(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}},{key:"makeRotation",value:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}},{key:"makeScale",value:function(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}},{key:"equals",value:function(e){for(var t=this.elements,n=e.elements,r=0;r<9;r++)if(t[r]!==n[r])return!1;return!0}},{key:"fromArray",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<9;n++)this.elements[n]=e[n+t];return this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}},{key:"clone",value:function(){return(new this.constructor).fromArray(this.elements)}}]),e}(),TL=new kL;Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;function EL(e){return document.createElementNS("http://www.w3.org/1999/xhtml",e)}var CL={};var RL={enabled:!0,workingColorSpace:aL,spaces:{},convert:function(e,t,n){return!1!==this.enabled&&t!==n&&t&&n?(this.spaces[t].transfer===sL&&(e.r=BL(e.r),e.g=BL(e.g),e.b=BL(e.b)),this.spaces[t].primaries!==this.spaces[n].primaries&&(e.applyMatrix3(this.spaces[t].toXYZ),e.applyMatrix3(this.spaces[n].fromXYZ)),this.spaces[n].transfer===sL&&(e.r=PL(e.r),e.g=PL(e.g),e.b=PL(e.b)),e):e},fromWorkingColorSpace:function(e,t){return this.convert(e,this.workingColorSpace,t)},toWorkingColorSpace:function(e,t){return this.convert(e,t,this.workingColorSpace)},getPrimaries:function(e){return this.spaces[e].primaries},getTransfer:function(e){return e===rL?oL:this.spaces[e].transfer},getLuminanceCoefficients:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.workingColorSpace;return e.fromArray(this.spaces[t].luminanceCoefficients)},define:function(e){Object.assign(this.spaces,e)},_getMatrix:function(e,t,n){return e.copy(this.spaces[t].toXYZ).multiply(this.spaces[n].fromXYZ)},_getDrawingBufferColorSpace:function(e){return this.spaces[e].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.workingColorSpace;return this.spaces[e].workingColorSpaceConfig.unpackColorSpace}};function BL(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function PL(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}var NL,IL=[.64,.33,.3,.6,.15,.06],DL=[.2126,.7152,.0722],LL=[.3127,.329],OL=(new kL).set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),FL=(new kL).set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);RL.define((g(II={},aL,{primaries:IL,whitePoint:LL,transfer:oL,toXYZ:OL,fromXYZ:FL,luminanceCoefficients:DL,workingColorSpaceConfig:{unpackColorSpace:iL},outputColorSpaceConfig:{drawingBufferColorSpace:iL}}),g(II,iL,{primaries:IL,whitePoint:LL,transfer:sL,toXYZ:OL,fromXYZ:FL,luminanceCoefficients:DL,outputColorSpaceConfig:{drawingBufferColorSpace:iL}}),II));var UL=function(){function e(){V(this,e)}return W(e,null,[{key:"getDataURL",value:function(e){if(/^data:/i.test(e.src))return e.src;if("undefined"===typeof HTMLCanvasElement)return e.src;var t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===NL&&(NL=EL("canvas")),NL.width=e.width,NL.height=e.height;var n=NL.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=NL}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}},{key:"sRGBToLinear",value:function(e){if("undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap){var t=EL("canvas");t.width=e.width,t.height=e.height;var n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);for(var r=n.getImageData(0,0,e.width,e.height),i=r.data,a=0;a<i.length;a++)i[a]=255*BL(i[a]/255);return n.putImageData(r,0,0),t}if(e.data){for(var o=e.data.slice(0),s=0;s<o.length;s++)o instanceof Uint8Array||o instanceof Uint8ClampedArray?o[s]=Math.floor(255*BL(o[s]/255)):o[s]=BL(o[s]);return{data:o,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}]),e}(),zL=0,GL=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;V(this,e),this.isSource=!0,Object.defineProperty(this,"id",{value:zL++}),this.uuid=gL(),this.data=t,this.dataReady=!0,this.version=0}return W(e,[{key:"needsUpdate",set:function(e){!0===e&&this.version++}},{key:"toJSON",value:function(e){var t=void 0===e||"string"===typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];var n={uuid:this.uuid,url:""},r=this.data;if(null!==r){var i;if(Array.isArray(r)){i=[];for(var a=0,o=r.length;a<o;a++)r[a].isDataTexture?i.push(qL(r[a].image)):i.push(qL(r[a]))}else i=qL(r);n.url=i}return t||(e.images[this.uuid]=n),n}}]),e}();function qL(e){return"undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap?UL.getDataURL(e):e.data?{data:Array.from(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}var HL=0,VL=function(e){Y(n,e);var t=$(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.DEFAULT_IMAGE,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.DEFAULT_MAPPING,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:QI,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:QI,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:eD,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:nD,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:pD,c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:rD,h=arguments.length>8&&void 0!==arguments[8]?arguments[8]:n.DEFAULT_ANISOTROPY,d=arguments.length>9&&void 0!==arguments[9]?arguments[9]:rL;return V(this,n),(e=t.call(this)).isTexture=!0,Object.defineProperty(K(e),"id",{value:HL++}),e.uuid=gL(),e.name="",e.source=new GL(r),e.mipmaps=[],e.mapping=i,e.channel=0,e.wrapS=a,e.wrapT=o,e.magFilter=s,e.minFilter=u,e.anisotropy=h,e.format=l,e.internalFormat=null,e.type=c,e.offset=new ML(0,0),e.repeat=new ML(1,1),e.center=new ML(0,0),e.rotation=0,e.matrixAutoUpdate=!0,e.matrix=new kL,e.generateMipmaps=!0,e.premultiplyAlpha=!1,e.flipY=!0,e.unpackAlignment=4,e.colorSpace=d,e.userData={},e.version=0,e.onUpdate=null,e.isRenderTargetTexture=!1,e.pmremVersion=0,e}return W(n,[{key:"image",get:function(){return this.source.data},set:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.source.data=e}},{key:"updateMatrix",value:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}},{key:"toJSON",value:function(e){var t=void 0===e||"string"===typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];var n={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}},{key:"transformUv",value:function(e){if(this.mapping!==qI)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case YI:e.x=e.x-Math.floor(e.x);break;case QI:e.x=e.x<0?0:1;break;case JI:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case YI:e.y=e.y-Math.floor(e.y);break;case QI:e.y=e.y<0?0:1;break;case JI:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}},{key:"needsUpdate",set:function(e){!0===e&&(this.version++,this.source.needsUpdate=!0)}},{key:"needsPMREMUpdate",set:function(e){!0===e&&this.pmremVersion++}}]),n}(fL);VL.DEFAULT_IMAGE=null,VL.DEFAULT_MAPPING=qI,VL.DEFAULT_ANISOTROPY=1;var jL=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;V(this,t),t.prototype.isVector4=!0,this.x=e,this.y=n,this.z=r,this.w=i}return W(t,[{key:"width",get:function(){return this.z},set:function(e){this.z=e}},{key:"height",get:function(){return this.w},set:function(e){this.w=e}},{key:"set",value:function(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this}},{key:"setScalar",value:function(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}},{key:"setX",value:function(e){return this.x=e,this}},{key:"setY",value:function(e){return this.y=e,this}},{key:"setZ",value:function(e){return this.z=e,this}},{key:"setW",value:function(e){return this.w=e,this}},{key:"setComponent",value:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}},{key:"getComponent",value:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z,this.w)}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}},{key:"add",value:function(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}},{key:"addVectors",value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}},{key:"addScaledVector",value:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}},{key:"sub",value:function(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}},{key:"subVectors",value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}},{key:"multiply",value:function(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}},{key:"applyMatrix4",value:function(e){var t=this.x,n=this.y,r=this.z,i=this.w,a=e.elements;return this.x=a[0]*t+a[4]*n+a[8]*r+a[12]*i,this.y=a[1]*t+a[5]*n+a[9]*r+a[13]*i,this.z=a[2]*t+a[6]*n+a[10]*r+a[14]*i,this.w=a[3]*t+a[7]*n+a[11]*r+a[15]*i,this}},{key:"divide",value:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}},{key:"divideScalar",value:function(e){return this.multiplyScalar(1/e)}},{key:"setAxisAngleFromQuaternion",value:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}},{key:"setAxisAngleFromRotationMatrix",value:function(e){var t,n,r,i,a=.01,o=.1,s=e.elements,u=s[0],l=s[4],c=s[8],h=s[1],d=s[5],f=s[9],p=s[2],A=s[6],v=s[10];if(Math.abs(l-h)<a&&Math.abs(c-p)<a&&Math.abs(f-A)<a){if(Math.abs(l+h)<o&&Math.abs(c+p)<o&&Math.abs(f+A)<o&&Math.abs(u+d+v-3)<o)return this.set(1,0,0,0),this;t=Math.PI;var m=(u+1)/2,g=(d+1)/2,y=(v+1)/2,b=(l+h)/4,x=(c+p)/4,_=(f+A)/4;return m>g&&m>y?m<a?(n=0,r=.707106781,i=.707106781):(r=b/(n=Math.sqrt(m)),i=x/n):g>y?g<a?(n=.707106781,r=0,i=.707106781):(n=b/(r=Math.sqrt(g)),i=_/r):y<a?(n=.707106781,r=.707106781,i=0):(n=x/(i=Math.sqrt(y)),r=_/i),this.set(n,r,i,t),this}var w=Math.sqrt((A-f)*(A-f)+(c-p)*(c-p)+(h-l)*(h-l));return Math.abs(w)<.001&&(w=1),this.x=(A-f)/w,this.y=(c-p)/w,this.z=(h-l)/w,this.w=Math.acos((u+d+v-1)/2),this}},{key:"setFromMatrixPosition",value:function(e){var t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}},{key:"min",value:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}},{key:"max",value:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}},{key:"clamp",value:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}},{key:"clampScalar",value:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}},{key:"clampLength",value:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}},{key:"roundToZero",value:function(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"setLength",value:function(e){return this.normalize().multiplyScalar(e)}},{key:"lerp",value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}},{key:"lerpVectors",value:function(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}},{key:"fromBufferAttribute",value:function(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}},{key:Symbol.iterator,value:se().mark((function e(){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.x;case 2:return e.next=4,this.y;case 4:return e.next=6,this.z;case 6:return e.next=8,this.w;case 8:case"end":return e.stop()}}),e,this)}))}]),t}(),WL=function(e){Y(n,e);var t=$(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};V(this,n),(e=t.call(this)).isRenderTarget=!0,e.width=r,e.height=i,e.depth=1,e.scissor=new jL(0,0,r,i),e.scissorTest=!1,e.viewport=new jL(0,0,r,i);var o={width:r,height:i,depth:1};a=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:eD,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},a);var s=new VL(o,a.mapping,a.wrapS,a.wrapT,a.magFilter,a.minFilter,a.format,a.type,a.anisotropy,a.colorSpace);s.flipY=!1,s.generateMipmaps=a.generateMipmaps,s.internalFormat=a.internalFormat,e.textures=[];for(var u=a.count,l=0;l<u;l++)e.textures[l]=s.clone(),e.textures[l].isRenderTargetTexture=!0;return e.depthBuffer=a.depthBuffer,e.stencilBuffer=a.stencilBuffer,e.resolveDepthBuffer=a.resolveDepthBuffer,e.resolveStencilBuffer=a.resolveStencilBuffer,e.depthTexture=a.depthTexture,e.samples=a.samples,e}return W(n,[{key:"texture",get:function(){return this.textures[0]},set:function(e){this.textures[0]=e}},{key:"setSize",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(var r=0,i=this.textures.length;r<i;r++)this.textures[r].image.width=e,this.textures[r].image.height=t,this.textures[r].image.depth=n;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(var t=0,n=e.textures.length;t<n;t++)this.textures[t]=e.textures[t].clone(),this.textures[t].isRenderTargetTexture=!0;var r=Object.assign({},e.texture.image);return this.texture.source=new GL(r),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}}]),n}(fL),XL=function(e){Y(n,e);var t=$(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return V(this,n),(e=t.call(this,r,i,a)).isWebGLRenderTarget=!0,e}return W(n)}(WL),YL=function(e){Y(n,e);var t=$(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return V(this,n),(e=t.call(this,null)).isDataArrayTexture=!0,e.image={data:r,width:i,height:a,depth:o},e.magFilter=KI,e.minFilter=KI,e.wrapR=QI,e.generateMipmaps=!1,e.flipY=!1,e.unpackAlignment=1,e.layerUpdates=new Set,e}return W(n,[{key:"addLayerUpdate",value:function(e){this.layerUpdates.add(e)}},{key:"clearLayerUpdates",value:function(){this.layerUpdates.clear()}}]),n}(VL),QL=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;V(this,t),this.isQuaternion=!0,this._x=e,this._y=n,this._z=r,this._w=i}return W(t,[{key:"x",get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},{key:"y",get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},{key:"z",get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},{key:"w",get:function(){return this._w},set:function(e){this._w=e,this._onChangeCallback()}},{key:"set",value:function(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this}},{key:"clone",value:function(){return new this.constructor(this._x,this._y,this._z,this._w)}},{key:"copy",value:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}},{key:"setFromEuler",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=e._x,r=e._y,i=e._z,a=e._order,o=Math.cos,s=Math.sin,u=o(n/2),l=o(r/2),c=o(i/2),h=s(n/2),d=s(r/2),f=s(i/2);switch(a){case"XYZ":this._x=h*l*c+u*d*f,this._y=u*d*c-h*l*f,this._z=u*l*f+h*d*c,this._w=u*l*c-h*d*f;break;case"YXZ":this._x=h*l*c+u*d*f,this._y=u*d*c-h*l*f,this._z=u*l*f-h*d*c,this._w=u*l*c+h*d*f;break;case"ZXY":this._x=h*l*c-u*d*f,this._y=u*d*c+h*l*f,this._z=u*l*f+h*d*c,this._w=u*l*c-h*d*f;break;case"ZYX":this._x=h*l*c-u*d*f,this._y=u*d*c+h*l*f,this._z=u*l*f-h*d*c,this._w=u*l*c+h*d*f;break;case"YZX":this._x=h*l*c+u*d*f,this._y=u*d*c+h*l*f,this._z=u*l*f-h*d*c,this._w=u*l*c-h*d*f;break;case"XZY":this._x=h*l*c-u*d*f,this._y=u*d*c-h*l*f,this._z=u*l*f+h*d*c,this._w=u*l*c+h*d*f;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return!0===t&&this._onChangeCallback(),this}},{key:"setFromAxisAngle",value:function(e,t){var n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}},{key:"setFromRotationMatrix",value:function(e){var t=e.elements,n=t[0],r=t[4],i=t[8],a=t[1],o=t[5],s=t[9],u=t[2],l=t[6],c=t[10],h=n+o+c;if(h>0){var d=.5/Math.sqrt(h+1);this._w=.25/d,this._x=(l-s)*d,this._y=(i-u)*d,this._z=(a-r)*d}else if(n>o&&n>c){var f=2*Math.sqrt(1+n-o-c);this._w=(l-s)/f,this._x=.25*f,this._y=(r+a)/f,this._z=(i+u)/f}else if(o>c){var p=2*Math.sqrt(1+o-n-c);this._w=(i-u)/p,this._x=(r+a)/p,this._y=.25*p,this._z=(s+l)/p}else{var A=2*Math.sqrt(1+c-n-o);this._w=(a-r)/A,this._x=(i+u)/A,this._y=(s+l)/A,this._z=.25*A}return this._onChangeCallback(),this}},{key:"setFromUnitVectors",value:function(e,t){var n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}},{key:"angleTo",value:function(e){return 2*Math.acos(Math.abs(yL(this.dot(e),-1,1)))}},{key:"rotateTowards",value:function(e,t){var n=this.angleTo(e);if(0===n)return this;var r=Math.min(1,t/n);return this.slerp(e,r),this}},{key:"identity",value:function(){return this.set(0,0,0,1)}},{key:"invert",value:function(){return this.conjugate()}},{key:"conjugate",value:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}},{key:"dot",value:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}},{key:"lengthSq",value:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}},{key:"length",value:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}},{key:"normalize",value:function(){var e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}},{key:"multiply",value:function(e){return this.multiplyQuaternions(this,e)}},{key:"premultiply",value:function(e){return this.multiplyQuaternions(e,this)}},{key:"multiplyQuaternions",value:function(e,t){var n=e._x,r=e._y,i=e._z,a=e._w,o=t._x,s=t._y,u=t._z,l=t._w;return this._x=n*l+a*o+r*u-i*s,this._y=r*l+a*s+i*o-n*u,this._z=i*l+a*u+n*s-r*o,this._w=a*l-n*o-r*s-i*u,this._onChangeCallback(),this}},{key:"slerp",value:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var n=this._x,r=this._y,i=this._z,a=this._w,o=a*e._w+n*e._x+r*e._y+i*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=a,this._x=n,this._y=r,this._z=i,this;var s=1-o*o;if(s<=Number.EPSILON){var u=1-t;return this._w=u*a+t*this._w,this._x=u*n+t*this._x,this._y=u*r+t*this._y,this._z=u*i+t*this._z,this.normalize(),this}var l=Math.sqrt(s),c=Math.atan2(l,o),h=Math.sin((1-t)*c)/l,d=Math.sin(t*c)/l;return this._w=a*h+this._w*d,this._x=n*h+this._x*d,this._y=r*h+this._y*d,this._z=i*h+this._z*d,this._onChangeCallback(),this}},{key:"slerpQuaternions",value:function(e,t,n){return this.copy(e).slerp(t,n)}},{key:"random",value:function(){var e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),n=Math.random(),r=Math.sqrt(1-n),i=Math.sqrt(n);return this.set(r*Math.sin(e),r*Math.cos(e),i*Math.sin(t),i*Math.cos(t))}},{key:"equals",value:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}},{key:"fromBufferAttribute",value:function(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}},{key:"toJSON",value:function(){return this.toArray()}},{key:"_onChange",value:function(e){return this._onChangeCallback=e,this}},{key:"_onChangeCallback",value:function(){}},{key:Symbol.iterator,value:se().mark((function e(){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._x;case 2:return e.next=4,this._y;case 4:return e.next=6,this._z;case 6:return e.next=8,this._w;case 8:case"end":return e.stop()}}),e,this)}))}],[{key:"slerpFlat",value:function(e,t,n,r,i,a,o){var s=n[r+0],u=n[r+1],l=n[r+2],c=n[r+3],h=i[a+0],d=i[a+1],f=i[a+2],p=i[a+3];if(0===o)return e[t+0]=s,e[t+1]=u,e[t+2]=l,void(e[t+3]=c);if(1===o)return e[t+0]=h,e[t+1]=d,e[t+2]=f,void(e[t+3]=p);if(c!==p||s!==h||u!==d||l!==f){var A=1-o,v=s*h+u*d+l*f+c*p,m=v>=0?1:-1,g=1-v*v;if(g>Number.EPSILON){var y=Math.sqrt(g),b=Math.atan2(y,v*m);A=Math.sin(A*b)/y,o=Math.sin(o*b)/y}var x=o*m;if(s=s*A+h*x,u=u*A+d*x,l=l*A+f*x,c=c*A+p*x,A===1-o){var _=1/Math.sqrt(s*s+u*u+l*l+c*c);s*=_,u*=_,l*=_,c*=_}}e[t]=s,e[t+1]=u,e[t+2]=l,e[t+3]=c}},{key:"multiplyQuaternionsFlat",value:function(e,t,n,r,i,a){var o=n[r],s=n[r+1],u=n[r+2],l=n[r+3],c=i[a],h=i[a+1],d=i[a+2],f=i[a+3];return e[t]=o*f+l*c+s*d-u*h,e[t+1]=s*f+l*h+u*c-o*d,e[t+2]=u*f+l*d+o*h-s*c,e[t+3]=l*f-o*c-s*h-u*d,e}}]),t}(),JL=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;V(this,t),t.prototype.isVector3=!0,this.x=e,this.y=n,this.z=r}return W(t,[{key:"set",value:function(e,t,n){return void 0===n&&(n=this.z),this.x=e,this.y=t,this.z=n,this}},{key:"setScalar",value:function(e){return this.x=e,this.y=e,this.z=e,this}},{key:"setX",value:function(e){return this.x=e,this}},{key:"setY",value:function(e){return this.y=e,this}},{key:"setZ",value:function(e){return this.z=e,this}},{key:"setComponent",value:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}},{key:"getComponent",value:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z)}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}},{key:"add",value:function(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this.z+=e,this}},{key:"addVectors",value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}},{key:"addScaledVector",value:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}},{key:"sub",value:function(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this.z-=e,this}},{key:"subVectors",value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}},{key:"multiply",value:function(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this.z*=e,this}},{key:"multiplyVectors",value:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}},{key:"applyEuler",value:function(e){return this.applyQuaternion(ZL.setFromEuler(e))}},{key:"applyAxisAngle",value:function(e,t){return this.applyQuaternion(ZL.setFromAxisAngle(e,t))}},{key:"applyMatrix3",value:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6]*r,this.y=i[1]*t+i[4]*n+i[7]*r,this.z=i[2]*t+i[5]*n+i[8]*r,this}},{key:"applyNormalMatrix",value:function(e){return this.applyMatrix3(e).normalize()}},{key:"applyMatrix4",value:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements,a=1/(i[3]*t+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*t+i[4]*n+i[8]*r+i[12])*a,this.y=(i[1]*t+i[5]*n+i[9]*r+i[13])*a,this.z=(i[2]*t+i[6]*n+i[10]*r+i[14])*a,this}},{key:"applyQuaternion",value:function(e){var t=this.x,n=this.y,r=this.z,i=e.x,a=e.y,o=e.z,s=e.w,u=2*(a*r-o*n),l=2*(o*t-i*r),c=2*(i*n-a*t);return this.x=t+s*u+a*c-o*l,this.y=n+s*l+o*u-i*c,this.z=r+s*c+i*l-a*u,this}},{key:"project",value:function(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}},{key:"unproject",value:function(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}},{key:"transformDirection",value:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[4]*n+i[8]*r,this.y=i[1]*t+i[5]*n+i[9]*r,this.z=i[2]*t+i[6]*n+i[10]*r,this.normalize()}},{key:"divide",value:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}},{key:"divideScalar",value:function(e){return this.multiplyScalar(1/e)}},{key:"min",value:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}},{key:"max",value:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}},{key:"clamp",value:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}},{key:"clampScalar",value:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}},{key:"clampLength",value:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}},{key:"roundToZero",value:function(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y+this.z*e.z}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"setLength",value:function(e){return this.normalize().multiplyScalar(e)}},{key:"lerp",value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}},{key:"lerpVectors",value:function(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}},{key:"cross",value:function(e){return this.crossVectors(this,e)}},{key:"crossVectors",value:function(e,t){var n=e.x,r=e.y,i=e.z,a=t.x,o=t.y,s=t.z;return this.x=r*s-i*o,this.y=i*a-n*s,this.z=n*o-r*a,this}},{key:"projectOnVector",value:function(e){var t=e.lengthSq();if(0===t)return this.set(0,0,0);var n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}},{key:"projectOnPlane",value:function(e){return KL.copy(this).projectOnVector(e),this.sub(KL)}},{key:"reflect",value:function(e){return this.sub(KL.copy(e).multiplyScalar(2*this.dot(e)))}},{key:"angleTo",value:function(e){var t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;var n=this.dot(e)/t;return Math.acos(yL(n,-1,1))}},{key:"distanceTo",value:function(e){return Math.sqrt(this.distanceToSquared(e))}},{key:"distanceToSquared",value:function(e){var t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r}},{key:"manhattanDistanceTo",value:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}},{key:"setFromSpherical",value:function(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}},{key:"setFromSphericalCoords",value:function(e,t,n){var r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this}},{key:"setFromCylindrical",value:function(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}},{key:"setFromCylindricalCoords",value:function(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}},{key:"setFromMatrixPosition",value:function(e){var t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}},{key:"setFromMatrixScale",value:function(e){var t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this}},{key:"setFromMatrixColumn",value:function(e,t){return this.fromArray(e.elements,4*t)}},{key:"setFromMatrix3Column",value:function(e,t){return this.fromArray(e.elements,3*t)}},{key:"setFromEuler",value:function(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}},{key:"setFromColor",value:function(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}},{key:"fromBufferAttribute",value:function(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}},{key:"randomDirection",value:function(){var e=Math.random()*Math.PI*2,t=2*Math.random()-1,n=Math.sqrt(1-t*t);return this.x=n*Math.cos(e),this.y=t,this.z=n*Math.sin(e),this}},{key:Symbol.iterator,value:se().mark((function e(){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.x;case 2:return e.next=4,this.y;case 4:return e.next=6,this.z;case 6:case"end":return e.stop()}}),e,this)}))}]),t}(),KL=new JL,ZL=new QL,$L=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new JL(1/0,1/0,1/0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new JL(-1/0,-1/0,-1/0);V(this,e),this.isBox3=!0,this.min=t,this.max=n}return W(e,[{key:"set",value:function(e,t){return this.min.copy(e),this.max.copy(t),this}},{key:"setFromArray",value:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t+=3)this.expandByPoint(tO.fromArray(e,t));return this}},{key:"setFromBufferAttribute",value:function(e){this.makeEmpty();for(var t=0,n=e.count;t<n;t++)this.expandByPoint(tO.fromBufferAttribute(e,t));return this}},{key:"setFromPoints",value:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}},{key:"setFromCenterAndSize",value:function(e,t){var n=tO.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}},{key:"setFromObject",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.makeEmpty(),this.expandByObject(e,t)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.min.copy(e.min),this.max.copy(e.max),this}},{key:"makeEmpty",value:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}},{key:"isEmpty",value:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}},{key:"getCenter",value:function(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}},{key:"getSize",value:function(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}},{key:"expandByPoint",value:function(e){return this.min.min(e),this.max.max(e),this}},{key:"expandByVector",value:function(e){return this.min.sub(e),this.max.add(e),this}},{key:"expandByScalar",value:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this}},{key:"expandByObject",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.updateWorldMatrix(!1,!1);var n=e.geometry;if(void 0!==n){var r=n.getAttribute("position");if(!0===t&&void 0!==r&&!0!==e.isInstancedMesh)for(var i=0,a=r.count;i<a;i++)!0===e.isMesh?e.getVertexPosition(i,tO):tO.fromBufferAttribute(r,i),tO.applyMatrix4(e.matrixWorld),this.expandByPoint(tO);else void 0!==e.boundingBox?(null===e.boundingBox&&e.computeBoundingBox(),nO.copy(e.boundingBox)):(null===n.boundingBox&&n.computeBoundingBox(),nO.copy(n.boundingBox)),nO.applyMatrix4(e.matrixWorld),this.union(nO)}for(var o=e.children,s=0,u=o.length;s<u;s++)this.expandByObject(o[s],t);return this}},{key:"containsPoint",value:function(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}},{key:"containsBox",value:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}},{key:"getParameter",value:function(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}},{key:"intersectsBox",value:function(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}},{key:"intersectsSphere",value:function(e){return this.clampPoint(e.center,tO),tO.distanceToSquared(e.center)<=e.radius*e.radius}},{key:"intersectsPlane",value:function(e){var t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}},{key:"intersectsTriangle",value:function(e){if(this.isEmpty())return!1;this.getCenter(lO),cO.subVectors(this.max,lO),rO.subVectors(e.a,lO),iO.subVectors(e.b,lO),aO.subVectors(e.c,lO),oO.subVectors(iO,rO),sO.subVectors(aO,iO),uO.subVectors(rO,aO);var t=[0,-oO.z,oO.y,0,-sO.z,sO.y,0,-uO.z,uO.y,oO.z,0,-oO.x,sO.z,0,-sO.x,uO.z,0,-uO.x,-oO.y,oO.x,0,-sO.y,sO.x,0,-uO.y,uO.x,0];return!!fO(t,rO,iO,aO,cO)&&(!!fO(t=[1,0,0,0,1,0,0,0,1],rO,iO,aO,cO)&&(hO.crossVectors(oO,sO),fO(t=[hO.x,hO.y,hO.z],rO,iO,aO,cO)))}},{key:"clampPoint",value:function(e,t){return t.copy(e).clamp(this.min,this.max)}},{key:"distanceToPoint",value:function(e){return this.clampPoint(e,tO).distanceTo(e)}},{key:"getBoundingSphere",value:function(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=.5*this.getSize(tO).length()),e}},{key:"intersect",value:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}},{key:"union",value:function(e){return this.min.min(e.min),this.max.max(e.max),this}},{key:"applyMatrix4",value:function(e){return this.isEmpty()||(eO[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),eO[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),eO[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),eO[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),eO[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),eO[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),eO[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),eO[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(eO)),this}},{key:"translate",value:function(e){return this.min.add(e),this.max.add(e),this}},{key:"equals",value:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}]),e}(),eO=[new JL,new JL,new JL,new JL,new JL,new JL,new JL,new JL],tO=new JL,nO=new $L,rO=new JL,iO=new JL,aO=new JL,oO=new JL,sO=new JL,uO=new JL,lO=new JL,cO=new JL,hO=new JL,dO=new JL;function fO(e,t,n,r,i){for(var a=0,o=e.length-3;a<=o;a+=3){dO.fromArray(e,a);var s=i.x*Math.abs(dO.x)+i.y*Math.abs(dO.y)+i.z*Math.abs(dO.z),u=t.dot(dO),l=n.dot(dO),c=r.dot(dO);if(Math.max(-Math.max(u,l,c),Math.min(u,l,c))>s)return!1}return!0}var pO=new $L,AO=new JL,vO=new JL,mO=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new JL,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;V(this,e),this.isSphere=!0,this.center=t,this.radius=n}return W(e,[{key:"set",value:function(e,t){return this.center.copy(e),this.radius=t,this}},{key:"setFromPoints",value:function(e,t){var n=this.center;void 0!==t?n.copy(t):pO.setFromPoints(e).getCenter(n);for(var r=0,i=0,a=e.length;i<a;i++)r=Math.max(r,n.distanceToSquared(e[i]));return this.radius=Math.sqrt(r),this}},{key:"copy",value:function(e){return this.center.copy(e.center),this.radius=e.radius,this}},{key:"isEmpty",value:function(){return this.radius<0}},{key:"makeEmpty",value:function(){return this.center.set(0,0,0),this.radius=-1,this}},{key:"containsPoint",value:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}},{key:"distanceToPoint",value:function(e){return e.distanceTo(this.center)-this.radius}},{key:"intersectsSphere",value:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}},{key:"intersectsBox",value:function(e){return e.intersectsSphere(this)}},{key:"intersectsPlane",value:function(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}},{key:"clampPoint",value:function(e,t){var n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}},{key:"getBoundingBox",value:function(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}},{key:"applyMatrix4",value:function(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}},{key:"translate",value:function(e){return this.center.add(e),this}},{key:"expandByPoint",value:function(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;AO.subVectors(e,this.center);var t=AO.lengthSq();if(t>this.radius*this.radius){var n=Math.sqrt(t),r=.5*(n-this.radius);this.center.addScaledVector(AO,r/n),this.radius+=r}return this}},{key:"union",value:function(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(!0===this.center.equals(e.center)?this.radius=Math.max(this.radius,e.radius):(vO.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(AO.copy(e.center).add(vO)),this.expandByPoint(AO.copy(e.center).sub(vO))),this)}},{key:"equals",value:function(e){return e.center.equals(this.center)&&e.radius===this.radius}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}(),gO=new JL,yO=new JL,bO=new JL,xO=new JL,_O=new JL,wO=new JL,SO=new JL,MO=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new JL,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new JL(0,0,-1);V(this,e),this.origin=t,this.direction=n}return W(e,[{key:"set",value:function(e,t){return this.origin.copy(e),this.direction.copy(t),this}},{key:"copy",value:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}},{key:"at",value:function(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}},{key:"lookAt",value:function(e){return this.direction.copy(e).sub(this.origin).normalize(),this}},{key:"recast",value:function(e){return this.origin.copy(this.at(e,gO)),this}},{key:"closestPointToPoint",value:function(e,t){t.subVectors(e,this.origin);var n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,n)}},{key:"distanceToPoint",value:function(e){return Math.sqrt(this.distanceSqToPoint(e))}},{key:"distanceSqToPoint",value:function(e){var t=gO.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(gO.copy(this.origin).addScaledVector(this.direction,t),gO.distanceToSquared(e))}},{key:"distanceSqToSegment",value:function(e,t,n,r){yO.copy(e).add(t).multiplyScalar(.5),bO.copy(t).sub(e).normalize(),xO.copy(this.origin).sub(yO);var i,a,o,s,u=.5*e.distanceTo(t),l=-this.direction.dot(bO),c=xO.dot(this.direction),h=-xO.dot(bO),d=xO.lengthSq(),f=Math.abs(1-l*l);if(f>0)if(a=l*c-h,s=u*f,(i=l*h-c)>=0)if(a>=-s)if(a<=s){var p=1/f;o=(i*=p)*(i+l*(a*=p)+2*c)+a*(l*i+a+2*h)+d}else a=u,o=-(i=Math.max(0,-(l*a+c)))*i+a*(a+2*h)+d;else a=-u,o=-(i=Math.max(0,-(l*a+c)))*i+a*(a+2*h)+d;else a<=-s?o=-(i=Math.max(0,-(-l*u+c)))*i+(a=i>0?-u:Math.min(Math.max(-u,-h),u))*(a+2*h)+d:a<=s?(i=0,o=(a=Math.min(Math.max(-u,-h),u))*(a+2*h)+d):o=-(i=Math.max(0,-(l*u+c)))*i+(a=i>0?u:Math.min(Math.max(-u,-h),u))*(a+2*h)+d;else a=l>0?-u:u,o=-(i=Math.max(0,-(l*a+c)))*i+a*(a+2*h)+d;return n&&n.copy(this.origin).addScaledVector(this.direction,i),r&&r.copy(yO).addScaledVector(bO,a),o}},{key:"intersectSphere",value:function(e,t){gO.subVectors(e.center,this.origin);var n=gO.dot(this.direction),r=gO.dot(gO)-n*n,i=e.radius*e.radius;if(r>i)return null;var a=Math.sqrt(i-r),o=n-a,s=n+a;return s<0?null:o<0?this.at(s,t):this.at(o,t)}},{key:"intersectsSphere",value:function(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}},{key:"distanceToPlane",value:function(e){var t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;var n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}},{key:"intersectPlane",value:function(e,t){var n=this.distanceToPlane(e);return null===n?null:this.at(n,t)}},{key:"intersectsPlane",value:function(e){var t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0}},{key:"intersectBox",value:function(e,t){var n,r,i,a,o,s,u=1/this.direction.x,l=1/this.direction.y,c=1/this.direction.z,h=this.origin;return u>=0?(n=(e.min.x-h.x)*u,r=(e.max.x-h.x)*u):(n=(e.max.x-h.x)*u,r=(e.min.x-h.x)*u),l>=0?(i=(e.min.y-h.y)*l,a=(e.max.y-h.y)*l):(i=(e.max.y-h.y)*l,a=(e.min.y-h.y)*l),n>a||i>r?null:((i>n||isNaN(n))&&(n=i),(a<r||isNaN(r))&&(r=a),c>=0?(o=(e.min.z-h.z)*c,s=(e.max.z-h.z)*c):(o=(e.max.z-h.z)*c,s=(e.min.z-h.z)*c),n>s||o>r?null:((o>n||n!==n)&&(n=o),(s<r||r!==r)&&(r=s),r<0?null:this.at(n>=0?n:r,t)))}},{key:"intersectsBox",value:function(e){return null!==this.intersectBox(e,gO)}},{key:"intersectTriangle",value:function(e,t,n,r,i){_O.subVectors(t,e),wO.subVectors(n,e),SO.crossVectors(_O,wO);var a,o=this.direction.dot(SO);if(o>0){if(r)return null;a=1}else{if(!(o<0))return null;a=-1,o=-o}xO.subVectors(this.origin,e);var s=a*this.direction.dot(wO.crossVectors(xO,wO));if(s<0)return null;var u=a*this.direction.dot(_O.cross(xO));if(u<0)return null;if(s+u>o)return null;var l=-a*xO.dot(SO);return l<0?null:this.at(l/o,i)}},{key:"applyMatrix4",value:function(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}},{key:"equals",value:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}(),kO=function(){function e(t,n,r,i,a,o,s,u,l,c,h,d,f,p,A,v){V(this,e),e.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],void 0!==t&&this.set(t,n,r,i,a,o,s,u,l,c,h,d,f,p,A,v)}return W(e,[{key:"set",value:function(e,t,n,r,i,a,o,s,u,l,c,h,d,f,p,A){var v=this.elements;return v[0]=e,v[4]=t,v[8]=n,v[12]=r,v[1]=i,v[5]=a,v[9]=o,v[13]=s,v[2]=u,v[6]=l,v[10]=c,v[14]=h,v[3]=d,v[7]=f,v[11]=p,v[15]=A,this}},{key:"identity",value:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}},{key:"clone",value:function(){return(new e).fromArray(this.elements)}},{key:"copy",value:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}},{key:"copyPosition",value:function(e){var t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}},{key:"setFromMatrix3",value:function(e){var t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}},{key:"extractBasis",value:function(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}},{key:"makeBasis",value:function(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}},{key:"extractRotation",value:function(e){var t=this.elements,n=e.elements,r=1/TO.setFromMatrixColumn(e,0).length(),i=1/TO.setFromMatrixColumn(e,1).length(),a=1/TO.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*i,t[5]=n[5]*i,t[6]=n[6]*i,t[7]=0,t[8]=n[8]*a,t[9]=n[9]*a,t[10]=n[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}},{key:"makeRotationFromEuler",value:function(e){var t=this.elements,n=e.x,r=e.y,i=e.z,a=Math.cos(n),o=Math.sin(n),s=Math.cos(r),u=Math.sin(r),l=Math.cos(i),c=Math.sin(i);if("XYZ"===e.order){var h=a*l,d=a*c,f=o*l,p=o*c;t[0]=s*l,t[4]=-s*c,t[8]=u,t[1]=d+f*u,t[5]=h-p*u,t[9]=-o*s,t[2]=p-h*u,t[6]=f+d*u,t[10]=a*s}else if("YXZ"===e.order){var A=s*l,v=s*c,m=u*l,g=u*c;t[0]=A+g*o,t[4]=m*o-v,t[8]=a*u,t[1]=a*c,t[5]=a*l,t[9]=-o,t[2]=v*o-m,t[6]=g+A*o,t[10]=a*s}else if("ZXY"===e.order){var y=s*l,b=s*c,x=u*l,_=u*c;t[0]=y-_*o,t[4]=-a*c,t[8]=x+b*o,t[1]=b+x*o,t[5]=a*l,t[9]=_-y*o,t[2]=-a*u,t[6]=o,t[10]=a*s}else if("ZYX"===e.order){var w=a*l,S=a*c,M=o*l,k=o*c;t[0]=s*l,t[4]=M*u-S,t[8]=w*u+k,t[1]=s*c,t[5]=k*u+w,t[9]=S*u-M,t[2]=-u,t[6]=o*s,t[10]=a*s}else if("YZX"===e.order){var T=a*s,E=a*u,C=o*s,R=o*u;t[0]=s*l,t[4]=R-T*c,t[8]=C*c+E,t[1]=c,t[5]=a*l,t[9]=-o*l,t[2]=-u*l,t[6]=E*c+C,t[10]=T-R*c}else if("XZY"===e.order){var B=a*s,P=a*u,N=o*s,I=o*u;t[0]=s*l,t[4]=-c,t[8]=u*l,t[1]=B*c+I,t[5]=a*l,t[9]=P*c-N,t[2]=N*c-P,t[6]=o*l,t[10]=I*c+B}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}},{key:"makeRotationFromQuaternion",value:function(e){return this.compose(CO,e,RO)}},{key:"lookAt",value:function(e,t,n){var r=this.elements;return NO.subVectors(e,t),0===NO.lengthSq()&&(NO.z=1),NO.normalize(),BO.crossVectors(n,NO),0===BO.lengthSq()&&(1===Math.abs(n.z)?NO.x+=1e-4:NO.z+=1e-4,NO.normalize(),BO.crossVectors(n,NO)),BO.normalize(),PO.crossVectors(NO,BO),r[0]=BO.x,r[4]=PO.x,r[8]=NO.x,r[1]=BO.y,r[5]=PO.y,r[9]=NO.y,r[2]=BO.z,r[6]=PO.z,r[10]=NO.z,this}},{key:"multiply",value:function(e){return this.multiplyMatrices(this,e)}},{key:"premultiply",value:function(e){return this.multiplyMatrices(e,this)}},{key:"multiplyMatrices",value:function(e,t){var n=e.elements,r=t.elements,i=this.elements,a=n[0],o=n[4],s=n[8],u=n[12],l=n[1],c=n[5],h=n[9],d=n[13],f=n[2],p=n[6],A=n[10],v=n[14],m=n[3],g=n[7],y=n[11],b=n[15],x=r[0],_=r[4],w=r[8],S=r[12],M=r[1],k=r[5],T=r[9],E=r[13],C=r[2],R=r[6],B=r[10],P=r[14],N=r[3],I=r[7],D=r[11],L=r[15];return i[0]=a*x+o*M+s*C+u*N,i[4]=a*_+o*k+s*R+u*I,i[8]=a*w+o*T+s*B+u*D,i[12]=a*S+o*E+s*P+u*L,i[1]=l*x+c*M+h*C+d*N,i[5]=l*_+c*k+h*R+d*I,i[9]=l*w+c*T+h*B+d*D,i[13]=l*S+c*E+h*P+d*L,i[2]=f*x+p*M+A*C+v*N,i[6]=f*_+p*k+A*R+v*I,i[10]=f*w+p*T+A*B+v*D,i[14]=f*S+p*E+A*P+v*L,i[3]=m*x+g*M+y*C+b*N,i[7]=m*_+g*k+y*R+b*I,i[11]=m*w+g*T+y*B+b*D,i[15]=m*S+g*E+y*P+b*L,this}},{key:"multiplyScalar",value:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}},{key:"determinant",value:function(){var e=this.elements,t=e[0],n=e[4],r=e[8],i=e[12],a=e[1],o=e[5],s=e[9],u=e[13],l=e[2],c=e[6],h=e[10],d=e[14];return e[3]*(+i*s*c-r*u*c-i*o*h+n*u*h+r*o*d-n*s*d)+e[7]*(+t*s*d-t*u*h+i*a*h-r*a*d+r*u*l-i*s*l)+e[11]*(+t*u*c-t*o*d-i*a*c+n*a*d+i*o*l-n*u*l)+e[15]*(-r*o*l-t*s*c+t*o*h+r*a*c-n*a*h+n*s*l)}},{key:"transpose",value:function(){var e,t=this.elements;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}},{key:"setPosition",value:function(e,t,n){var r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this}},{key:"invert",value:function(){var e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],s=e[6],u=e[7],l=e[8],c=e[9],h=e[10],d=e[11],f=e[12],p=e[13],A=e[14],v=e[15],m=c*A*u-p*h*u+p*s*d-o*A*d-c*s*v+o*h*v,g=f*h*u-l*A*u-f*s*d+a*A*d+l*s*v-a*h*v,y=l*p*u-f*c*u+f*o*d-a*p*d-l*o*v+a*c*v,b=f*c*s-l*p*s-f*o*h+a*p*h+l*o*A-a*c*A,x=t*m+n*g+r*y+i*b;if(0===x)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);var _=1/x;return e[0]=m*_,e[1]=(p*h*i-c*A*i-p*r*d+n*A*d+c*r*v-n*h*v)*_,e[2]=(o*A*i-p*s*i+p*r*u-n*A*u-o*r*v+n*s*v)*_,e[3]=(c*s*i-o*h*i-c*r*u+n*h*u+o*r*d-n*s*d)*_,e[4]=g*_,e[5]=(l*A*i-f*h*i+f*r*d-t*A*d-l*r*v+t*h*v)*_,e[6]=(f*s*i-a*A*i-f*r*u+t*A*u+a*r*v-t*s*v)*_,e[7]=(a*h*i-l*s*i+l*r*u-t*h*u-a*r*d+t*s*d)*_,e[8]=y*_,e[9]=(f*c*i-l*p*i-f*n*d+t*p*d+l*n*v-t*c*v)*_,e[10]=(a*p*i-f*o*i+f*n*u-t*p*u-a*n*v+t*o*v)*_,e[11]=(l*o*i-a*c*i-l*n*u+t*c*u+a*n*d-t*o*d)*_,e[12]=b*_,e[13]=(l*p*r-f*c*r+f*n*h-t*p*h-l*n*A+t*c*A)*_,e[14]=(f*o*r-a*p*r-f*n*s+t*p*s+a*n*A-t*o*A)*_,e[15]=(a*c*r-l*o*r+l*n*s-t*c*s-a*n*h+t*o*h)*_,this}},{key:"scale",value:function(e){var t=this.elements,n=e.x,r=e.y,i=e.z;return t[0]*=n,t[4]*=r,t[8]*=i,t[1]*=n,t[5]*=r,t[9]*=i,t[2]*=n,t[6]*=r,t[10]*=i,t[3]*=n,t[7]*=r,t[11]*=i,this}},{key:"getMaxScaleOnAxis",value:function(){var e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))}},{key:"makeTranslation",value:function(e,t,n){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}},{key:"makeRotationX",value:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}},{key:"makeRotationY",value:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}},{key:"makeRotationZ",value:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}},{key:"makeRotationAxis",value:function(e,t){var n=Math.cos(t),r=Math.sin(t),i=1-n,a=e.x,o=e.y,s=e.z,u=i*a,l=i*o;return this.set(u*a+n,u*o-r*s,u*s+r*o,0,u*o+r*s,l*o+n,l*s-r*a,0,u*s-r*o,l*s+r*a,i*s*s+n,0,0,0,0,1),this}},{key:"makeScale",value:function(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}},{key:"makeShear",value:function(e,t,n,r,i,a){return this.set(1,n,i,0,e,1,a,0,t,r,1,0,0,0,0,1),this}},{key:"compose",value:function(e,t,n){var r=this.elements,i=t._x,a=t._y,o=t._z,s=t._w,u=i+i,l=a+a,c=o+o,h=i*u,d=i*l,f=i*c,p=a*l,A=a*c,v=o*c,m=s*u,g=s*l,y=s*c,b=n.x,x=n.y,_=n.z;return r[0]=(1-(p+v))*b,r[1]=(d+y)*b,r[2]=(f-g)*b,r[3]=0,r[4]=(d-y)*x,r[5]=(1-(h+v))*x,r[6]=(A+m)*x,r[7]=0,r[8]=(f+g)*_,r[9]=(A-m)*_,r[10]=(1-(h+p))*_,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}},{key:"decompose",value:function(e,t,n){var r=this.elements,i=TO.set(r[0],r[1],r[2]).length(),a=TO.set(r[4],r[5],r[6]).length(),o=TO.set(r[8],r[9],r[10]).length();this.determinant()<0&&(i=-i),e.x=r[12],e.y=r[13],e.z=r[14],EO.copy(this);var s=1/i,u=1/a,l=1/o;return EO.elements[0]*=s,EO.elements[1]*=s,EO.elements[2]*=s,EO.elements[4]*=u,EO.elements[5]*=u,EO.elements[6]*=u,EO.elements[8]*=l,EO.elements[9]*=l,EO.elements[10]*=l,t.setFromRotationMatrix(EO),n.x=i,n.y=a,n.z=o,this}},{key:"makePerspective",value:function(e,t,n,r,i,a){var o,s,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:hL,l=this.elements,c=2*i/(t-e),h=2*i/(n-r),d=(t+e)/(t-e),f=(n+r)/(n-r);if(u===hL)o=-(a+i)/(a-i),s=-2*a*i/(a-i);else{if(u!==dL)throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+u);o=-a/(a-i),s=-a*i/(a-i)}return l[0]=c,l[4]=0,l[8]=d,l[12]=0,l[1]=0,l[5]=h,l[9]=f,l[13]=0,l[2]=0,l[6]=0,l[10]=o,l[14]=s,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}},{key:"makeOrthographic",value:function(e,t,n,r,i,a){var o,s,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:hL,l=this.elements,c=1/(t-e),h=1/(n-r),d=1/(a-i),f=(t+e)*c,p=(n+r)*h;if(u===hL)o=(a+i)*d,s=-2*d;else{if(u!==dL)throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+u);o=i*d,s=-1*d}return l[0]=2*c,l[4]=0,l[8]=0,l[12]=-f,l[1]=0,l[5]=2*h,l[9]=0,l[13]=-p,l[2]=0,l[6]=0,l[10]=s,l[14]=-o,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}},{key:"equals",value:function(e){for(var t=this.elements,n=e.elements,r=0;r<16;r++)if(t[r]!==n[r])return!1;return!0}},{key:"fromArray",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<16;n++)this.elements[n]=e[n+t];return this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}]),e}(),TO=new JL,EO=new kO,CO=new JL(0,0,0),RO=new JL(1,1,1),BO=new JL,PO=new JL,NO=new JL,IO=new kO,DO=new QL,LO=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.DEFAULT_ORDER;V(this,t),this.isEuler=!0,this._x=e,this._y=n,this._z=r,this._order=i}return W(t,[{key:"x",get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},{key:"y",get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},{key:"z",get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},{key:"order",get:function(){return this._order},set:function(e){this._order=e,this._onChangeCallback()}},{key:"set",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this._order;return this._x=e,this._y=t,this._z=n,this._order=r,this._onChangeCallback(),this}},{key:"clone",value:function(){return new this.constructor(this._x,this._y,this._z,this._order)}},{key:"copy",value:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}},{key:"setFromRotationMatrix",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=e.elements,i=r[0],a=r[4],o=r[8],s=r[1],u=r[5],l=r[9],c=r[2],h=r[6],d=r[10];switch(t){case"XYZ":this._y=Math.asin(yL(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-l,d),this._z=Math.atan2(-a,i)):(this._x=Math.atan2(h,u),this._z=0);break;case"YXZ":this._x=Math.asin(-yL(l,-1,1)),Math.abs(l)<.9999999?(this._y=Math.atan2(o,d),this._z=Math.atan2(s,u)):(this._y=Math.atan2(-c,i),this._z=0);break;case"ZXY":this._x=Math.asin(yL(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-c,d),this._z=Math.atan2(-a,u)):(this._y=0,this._z=Math.atan2(s,i));break;case"ZYX":this._y=Math.asin(-yL(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(h,d),this._z=Math.atan2(s,i)):(this._x=0,this._z=Math.atan2(-a,u));break;case"YZX":this._z=Math.asin(yL(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-l,u),this._y=Math.atan2(-c,i)):(this._x=0,this._y=Math.atan2(o,d));break;case"XZY":this._z=Math.asin(-yL(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(h,u),this._y=Math.atan2(o,i)):(this._x=Math.atan2(-l,d),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!0===n&&this._onChangeCallback(),this}},{key:"setFromQuaternion",value:function(e,t,n){return IO.makeRotationFromQuaternion(e),this.setFromRotationMatrix(IO,t,n)}},{key:"setFromVector3",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order;return this.set(e.x,e.y,e.z,t)}},{key:"reorder",value:function(e){return DO.setFromEuler(this),this.setFromQuaternion(DO,e)}},{key:"equals",value:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}},{key:"fromArray",value:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}},{key:"_onChange",value:function(e){return this._onChangeCallback=e,this}},{key:"_onChangeCallback",value:function(){}},{key:Symbol.iterator,value:se().mark((function e(){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._x;case 2:return e.next=4,this._y;case 4:return e.next=6,this._z;case 6:return e.next=8,this._order;case 8:case"end":return e.stop()}}),e,this)}))}]),t}();LO.DEFAULT_ORDER="XYZ";var OO=function(){function e(){V(this,e),this.mask=1}return W(e,[{key:"set",value:function(e){this.mask=(1<<e|0)>>>0}},{key:"enable",value:function(e){this.mask|=1<<e|0}},{key:"enableAll",value:function(){this.mask=-1}},{key:"toggle",value:function(e){this.mask^=1<<e|0}},{key:"disable",value:function(e){this.mask&=~(1<<e|0)}},{key:"disableAll",value:function(){this.mask=0}},{key:"test",value:function(e){return 0!==(this.mask&e.mask)}},{key:"isEnabled",value:function(e){return 0!==(this.mask&(1<<e|0))}}]),e}(),FO=0,UO=new JL,zO=new QL,GO=new kO,qO=new JL,HO=new JL,VO=new JL,jO=new QL,WO=new JL(1,0,0),XO=new JL(0,1,0),YO=new JL(0,0,1),QO={type:"added"},JO={type:"removed"},KO={type:"childadded",child:null},ZO={type:"childremoved",child:null},$O=function(e){Y(n,e);var t=$(n);function n(){var e;V(this,n),(e=t.call(this)).isObject3D=!0,Object.defineProperty(K(e),"id",{value:FO++}),e.uuid=gL(),e.name="",e.type="Object3D",e.parent=null,e.children=[],e.up=n.DEFAULT_UP.clone();var r=new JL,i=new LO,a=new QL,o=new JL(1,1,1);return i._onChange((function(){a.setFromEuler(i,!1)})),a._onChange((function(){i.setFromQuaternion(a,void 0,!1)})),Object.defineProperties(K(e),{position:{configurable:!0,enumerable:!0,value:r},rotation:{configurable:!0,enumerable:!0,value:i},quaternion:{configurable:!0,enumerable:!0,value:a},scale:{configurable:!0,enumerable:!0,value:o},modelViewMatrix:{value:new kO},normalMatrix:{value:new kL}}),e.matrix=new kO,e.matrixWorld=new kO,e.matrixAutoUpdate=n.DEFAULT_MATRIX_AUTO_UPDATE,e.matrixWorldAutoUpdate=n.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,e.matrixWorldNeedsUpdate=!1,e.layers=new OO,e.visible=!0,e.castShadow=!1,e.receiveShadow=!1,e.frustumCulled=!0,e.renderOrder=0,e.animations=[],e.userData={},e}return W(n,[{key:"onBeforeShadow",value:function(){}},{key:"onAfterShadow",value:function(){}},{key:"onBeforeRender",value:function(){}},{key:"onAfterRender",value:function(){}},{key:"applyMatrix4",value:function(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}},{key:"applyQuaternion",value:function(e){return this.quaternion.premultiply(e),this}},{key:"setRotationFromAxisAngle",value:function(e,t){this.quaternion.setFromAxisAngle(e,t)}},{key:"setRotationFromEuler",value:function(e){this.quaternion.setFromEuler(e,!0)}},{key:"setRotationFromMatrix",value:function(e){this.quaternion.setFromRotationMatrix(e)}},{key:"setRotationFromQuaternion",value:function(e){this.quaternion.copy(e)}},{key:"rotateOnAxis",value:function(e,t){return zO.setFromAxisAngle(e,t),this.quaternion.multiply(zO),this}},{key:"rotateOnWorldAxis",value:function(e,t){return zO.setFromAxisAngle(e,t),this.quaternion.premultiply(zO),this}},{key:"rotateX",value:function(e){return this.rotateOnAxis(WO,e)}},{key:"rotateY",value:function(e){return this.rotateOnAxis(XO,e)}},{key:"rotateZ",value:function(e){return this.rotateOnAxis(YO,e)}},{key:"translateOnAxis",value:function(e,t){return UO.copy(e).applyQuaternion(this.quaternion),this.position.add(UO.multiplyScalar(t)),this}},{key:"translateX",value:function(e){return this.translateOnAxis(WO,e)}},{key:"translateY",value:function(e){return this.translateOnAxis(XO,e)}},{key:"translateZ",value:function(e){return this.translateOnAxis(YO,e)}},{key:"localToWorld",value:function(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}},{key:"worldToLocal",value:function(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(GO.copy(this.matrixWorld).invert())}},{key:"lookAt",value:function(e,t,n){e.isVector3?qO.copy(e):qO.set(e,t,n);var r=this.parent;this.updateWorldMatrix(!0,!1),HO.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?GO.lookAt(HO,qO,this.up):GO.lookAt(qO,HO,this.up),this.quaternion.setFromRotationMatrix(GO),r&&(GO.extractRotation(r.matrixWorld),zO.setFromRotationMatrix(GO),this.quaternion.premultiply(zO.invert()))}},{key:"add",value:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(QO),KO.child=e,this.dispatchEvent(KO),KO.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}},{key:"remove",value:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}var n=this.children.indexOf(e);return-1!==n&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(JO),ZO.child=e,this.dispatchEvent(ZO),ZO.child=null),this}},{key:"removeFromParent",value:function(){var e=this.parent;return null!==e&&e.remove(this),this}},{key:"clear",value:function(){return this.remove.apply(this,q(this.children))}},{key:"attach",value:function(e){return this.updateWorldMatrix(!0,!1),GO.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),GO.multiply(e.parent.matrixWorld)),e.applyMatrix4(GO),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(QO),KO.child=e,this.dispatchEvent(KO),KO.child=null,this}},{key:"getObjectById",value:function(e){return this.getObjectByProperty("id",e)}},{key:"getObjectByName",value:function(e){return this.getObjectByProperty("name",e)}},{key:"getObjectByProperty",value:function(e,t){if(this[e]===t)return this;for(var n=0,r=this.children.length;n<r;n++){var i=this.children[n].getObjectByProperty(e,t);if(void 0!==i)return i}}},{key:"getObjectsByProperty",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];this[e]===t&&n.push(this);for(var r=this.children,i=0,a=r.length;i<a;i++)r[i].getObjectsByProperty(e,t,n);return n}},{key:"getWorldPosition",value:function(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}},{key:"getWorldQuaternion",value:function(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(HO,e,VO),e}},{key:"getWorldScale",value:function(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(HO,jO,e),e}},{key:"getWorldDirection",value:function(e){this.updateWorldMatrix(!0,!1);var t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}},{key:"raycast",value:function(){}},{key:"traverse",value:function(e){e(this);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].traverse(e)}},{key:"traverseVisible",value:function(e){if(!1!==this.visible){e(this);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}}},{key:"traverseAncestors",value:function(e){var t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))}},{key:"updateMatrix",value:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}},{key:"updateMatrixWorld",value:function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(!0===this.matrixWorldAutoUpdate&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);for(var t=this.children,n=0,r=t.length;n<r;n++){t[n].updateMatrixWorld(e)}}},{key:"updateWorldMatrix",value:function(e,t){var n=this.parent;if(!0===e&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),!0===this.matrixWorldAutoUpdate&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),!0===t)for(var r=this.children,i=0,a=r.length;i<a;i++){r[i].updateWorldMatrix(!1,!0)}}},{key:"toJSON",value:function(e){var t=void 0===e||"string"===typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});var r={};function i(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(r.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(r.type="BatchedMesh",r.perObjectFrustumCulled=this.perObjectFrustumCulled,r.sortObjects=this.sortObjects,r.drawRanges=this._drawRanges,r.reservedRanges=this._reservedRanges,r.visibility=this._visibility,r.active=this._active,r.bounds=this._bounds.map((function(e){return{boxInitialized:e.boxInitialized,boxMin:e.box.min.toArray(),boxMax:e.box.max.toArray(),sphereInitialized:e.sphereInitialized,sphereRadius:e.sphere.radius,sphereCenter:e.sphere.center.toArray()}})),r.maxInstanceCount=this._maxInstanceCount,r.maxVertexCount=this._maxVertexCount,r.maxIndexCount=this._maxIndexCount,r.geometryInitialized=this._geometryInitialized,r.geometryCount=this._geometryCount,r.matricesTexture=this._matricesTexture.toJSON(e),null!==this._colorsTexture&&(r.colorsTexture=this._colorsTexture.toJSON(e)),null!==this.boundingSphere&&(r.boundingSphere={center:r.boundingSphere.center.toArray(),radius:r.boundingSphere.radius}),null!==this.boundingBox&&(r.boundingBox={min:r.boundingBox.min.toArray(),max:r.boundingBox.max.toArray()})),this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=i(e.geometries,this.geometry);var a=this.geometry.parameters;if(void 0!==a&&void 0!==a.shapes){var o=a.shapes;if(Array.isArray(o))for(var s=0,u=o.length;s<u;s++){var l=o[s];i(e.shapes,l)}else i(e.shapes,o)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(i(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){for(var c=[],h=0,d=this.material.length;h<d;h++)c.push(i(e.materials,this.material[h]));r.material=c}else r.material=i(e.materials,this.material);if(this.children.length>0){r.children=[];for(var f=0;f<this.children.length;f++)r.children.push(this.children[f].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(var p=0;p<this.animations.length;p++){var A=this.animations[p];r.animations.push(i(e.animations,A))}}if(t){var v=S(e.geometries),m=S(e.materials),g=S(e.textures),y=S(e.images),b=S(e.shapes),x=S(e.skeletons),_=S(e.animations),w=S(e.nodes);v.length>0&&(n.geometries=v),m.length>0&&(n.materials=m),g.length>0&&(n.textures=g),y.length>0&&(n.images=y),b.length>0&&(n.shapes=b),x.length>0&&(n.skeletons=x),_.length>0&&(n.animations=_),w.length>0&&(n.nodes=w)}return n.object=r,n;function S(e){var t=[];for(var n in e){var r=e[n];delete r.metadata,t.push(r)}return t}}},{key:"clone",value:function(e){return(new this.constructor).copy(this,e)}},{key:"copy",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(var n=0;n<e.children.length;n++){var r=e.children[n];this.add(r.clone())}return this}}]),n}(fL);$O.DEFAULT_UP=new JL(0,1,0),$O.DEFAULT_MATRIX_AUTO_UPDATE=!0,$O.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;var eF=new JL,tF=new JL,nF=new JL,rF=new JL,iF=new JL,aF=new JL,oF=new JL,sF=new JL,uF=new JL,lF=new JL,cF=new jL,hF=new jL,dF=new jL,fF=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new JL,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new JL,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new JL;V(this,e),this.a=t,this.b=n,this.c=r}return W(e,[{key:"set",value:function(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}},{key:"setFromPointsAndIndices",value:function(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this}},{key:"setFromAttributeAndIndices",value:function(e,t,n,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,r),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}},{key:"getArea",value:function(){return eF.subVectors(this.c,this.b),tF.subVectors(this.a,this.b),.5*eF.cross(tF).length()}},{key:"getMidpoint",value:function(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}},{key:"getNormal",value:function(t){return e.getNormal(this.a,this.b,this.c,t)}},{key:"getPlane",value:function(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}},{key:"getBarycoord",value:function(t,n){return e.getBarycoord(t,this.a,this.b,this.c,n)}},{key:"getInterpolation",value:function(t,n,r,i,a){return e.getInterpolation(t,this.a,this.b,this.c,n,r,i,a)}},{key:"containsPoint",value:function(t){return e.containsPoint(t,this.a,this.b,this.c)}},{key:"isFrontFacing",value:function(t){return e.isFrontFacing(this.a,this.b,this.c,t)}},{key:"intersectsBox",value:function(e){return e.intersectsTriangle(this)}},{key:"closestPointToPoint",value:function(e,t){var n,r,i=this.a,a=this.b,o=this.c;iF.subVectors(a,i),aF.subVectors(o,i),sF.subVectors(e,i);var s=iF.dot(sF),u=aF.dot(sF);if(s<=0&&u<=0)return t.copy(i);uF.subVectors(e,a);var l=iF.dot(uF),c=aF.dot(uF);if(l>=0&&c<=l)return t.copy(a);var h=s*c-l*u;if(h<=0&&s>=0&&l<=0)return n=s/(s-l),t.copy(i).addScaledVector(iF,n);lF.subVectors(e,o);var d=iF.dot(lF),f=aF.dot(lF);if(f>=0&&d<=f)return t.copy(o);var p=d*u-s*f;if(p<=0&&u>=0&&f<=0)return r=u/(u-f),t.copy(i).addScaledVector(aF,r);var A=l*f-d*c;if(A<=0&&c-l>=0&&d-f>=0)return oF.subVectors(o,a),r=(c-l)/(c-l+(d-f)),t.copy(a).addScaledVector(oF,r);var v=1/(A+p+h);return n=p*v,r=h*v,t.copy(i).addScaledVector(iF,n).addScaledVector(aF,r)}},{key:"equals",value:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}],[{key:"getNormal",value:function(e,t,n,r){r.subVectors(n,t),eF.subVectors(e,t),r.cross(eF);var i=r.lengthSq();return i>0?r.multiplyScalar(1/Math.sqrt(i)):r.set(0,0,0)}},{key:"getBarycoord",value:function(e,t,n,r,i){eF.subVectors(r,t),tF.subVectors(n,t),nF.subVectors(e,t);var a=eF.dot(eF),o=eF.dot(tF),s=eF.dot(nF),u=tF.dot(tF),l=tF.dot(nF),c=a*u-o*o;if(0===c)return i.set(0,0,0),null;var h=1/c,d=(u*s-o*l)*h,f=(a*l-o*s)*h;return i.set(1-d-f,f,d)}},{key:"containsPoint",value:function(e,t,n,r){return null!==this.getBarycoord(e,t,n,r,rF)&&(rF.x>=0&&rF.y>=0&&rF.x+rF.y<=1)}},{key:"getInterpolation",value:function(e,t,n,r,i,a,o,s){return null===this.getBarycoord(e,t,n,r,rF)?(s.x=0,s.y=0,"z"in s&&(s.z=0),"w"in s&&(s.w=0),null):(s.setScalar(0),s.addScaledVector(i,rF.x),s.addScaledVector(a,rF.y),s.addScaledVector(o,rF.z),s)}},{key:"getInterpolatedAttribute",value:function(e,t,n,r,i,a){return cF.setScalar(0),hF.setScalar(0),dF.setScalar(0),cF.fromBufferAttribute(e,t),hF.fromBufferAttribute(e,n),dF.fromBufferAttribute(e,r),a.setScalar(0),a.addScaledVector(cF,i.x),a.addScaledVector(hF,i.y),a.addScaledVector(dF,i.z),a}},{key:"isFrontFacing",value:function(e,t,n,r){return eF.subVectors(n,t),tF.subVectors(e,t),eF.cross(tF).dot(r)<0}}]),e}(),pF={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},AF={h:0,s:0,l:0},vF={h:0,s:0,l:0};function mF(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}var gF=function(e){function t(e,n,r){return V(this,t),this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,n,r)}return W(t,[{key:"set",value:function(e,t,n){if(void 0===t&&void 0===n){var r=e;r&&r.isColor?this.copy(r):"number"===typeof r?this.setHex(r):"string"===typeof r&&this.setStyle(r)}else this.setRGB(e,t,n);return this}},{key:"setScalar",value:function(e){return this.r=e,this.g=e,this.b=e,this}},{key:"setHex",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:iL;return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,RL.toWorkingColorSpace(this,t),this}},{key:"setRGB",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:RL.workingColorSpace;return this.r=e,this.g=t,this.b=n,RL.toWorkingColorSpace(this,r),this}},{key:"setHSL",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:RL.workingColorSpace;if(e=bL(e,1),t=yL(t,0,1),n=yL(n,0,1),0===t)this.r=this.g=this.b=n;else{var i=n<=.5?n*(1+t):n+t-n*t,a=2*n-i;this.r=mF(a,i,e+1/3),this.g=mF(a,i,e),this.b=mF(a,i,e-1/3)}return RL.toWorkingColorSpace(this,r),this}},{key:"setStyle",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:iL;function r(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}if(t=/^(\w+)\(([^\)]*)\)/.exec(e)){var i,a=t[1],o=t[2];switch(a){case"rgb":case"rgba":if(i=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return r(i[4]),this.setRGB(Math.min(255,parseInt(i[1],10))/255,Math.min(255,parseInt(i[2],10))/255,Math.min(255,parseInt(i[3],10))/255,n);if(i=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return r(i[4]),this.setRGB(Math.min(100,parseInt(i[1],10))/100,Math.min(100,parseInt(i[2],10))/100,Math.min(100,parseInt(i[3],10))/100,n);break;case"hsl":case"hsla":if(i=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return r(i[4]),this.setHSL(parseFloat(i[1])/360,parseFloat(i[2])/100,parseFloat(i[3])/100,n);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(t=/^\#([A-Fa-f\d]+)$/.exec(e)){var s=t[1],u=s.length;if(3===u)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,n);if(6===u)return this.setHex(parseInt(s,16),n);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,n);return this}},{key:"setColorName",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:iL,n=pF[e.toLowerCase()];return void 0!==n?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}},{key:"clone",value:function(){return new this.constructor(this.r,this.g,this.b)}},{key:"copy",value:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}},{key:"copySRGBToLinear",value:function(e){return this.r=BL(e.r),this.g=BL(e.g),this.b=BL(e.b),this}},{key:"copyLinearToSRGB",value:function(e){return this.r=PL(e.r),this.g=PL(e.g),this.b=PL(e.b),this}},{key:"convertSRGBToLinear",value:function(){return this.copySRGBToLinear(this),this}},{key:"convertLinearToSRGB",value:function(){return this.copyLinearToSRGB(this),this}},{key:"getHex",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:iL;return RL.fromWorkingColorSpace(yF.copy(this),e),65536*Math.round(yL(255*yF.r,0,255))+256*Math.round(yL(255*yF.g,0,255))+Math.round(yL(255*yF.b,0,255))}},{key:"getHexString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:iL;return("000000"+this.getHex(e).toString(16)).slice(-6)}},{key:"getHSL",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:RL.workingColorSpace;RL.fromWorkingColorSpace(yF.copy(this),t);var n,r,i=yF.r,a=yF.g,o=yF.b,s=Math.max(i,a,o),u=Math.min(i,a,o),l=(u+s)/2;if(u===s)n=0,r=0;else{var c=s-u;switch(r=l<=.5?c/(s+u):c/(2-s-u),s){case i:n=(a-o)/c+(a<o?6:0);break;case a:n=(o-i)/c+2;break;case o:n=(i-a)/c+4}n/=6}return e.h=n,e.s=r,e.l=l,e}},{key:"getRGB",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:RL.workingColorSpace;return RL.fromWorkingColorSpace(yF.copy(this),t),e.r=yF.r,e.g=yF.g,e.b=yF.b,e}},{key:"getStyle",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:iL;RL.fromWorkingColorSpace(yF.copy(this),e);var t=yF.r,n=yF.g,r=yF.b;return e!==iL?"color(".concat(e," ").concat(t.toFixed(3)," ").concat(n.toFixed(3)," ").concat(r.toFixed(3),")"):"rgb(".concat(Math.round(255*t),",").concat(Math.round(255*n),",").concat(Math.round(255*r),")")}},{key:"offsetHSL",value:function(e,t,n){return this.getHSL(AF),this.setHSL(AF.h+e,AF.s+t,AF.l+n)}},{key:"add",value:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}},{key:"addColors",value:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}},{key:"addScalar",value:function(e){return this.r+=e,this.g+=e,this.b+=e,this}},{key:"sub",value:function(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}},{key:"multiply",value:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}},{key:"multiplyScalar",value:function(e){return this.r*=e,this.g*=e,this.b*=e,this}},{key:"lerp",value:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}},{key:"lerpColors",value:function(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}},{key:"lerpHSL",value:function(e,t){this.getHSL(AF),e.getHSL(vF);var n=xL(AF.h,vF.h,t),r=xL(AF.s,vF.s,t),i=xL(AF.l,vF.l,t);return this.setHSL(n,r,i),this}},{key:"setFromVector3",value:function(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}},{key:"applyMatrix3",value:function(e){var t=this.r,n=this.g,r=this.b,i=e.elements;return this.r=i[0]*t+i[3]*n+i[6]*r,this.g=i[1]*t+i[4]*n+i[7]*r,this.b=i[2]*t+i[5]*n+i[8]*r,this}},{key:"equals",value:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}},{key:"fromBufferAttribute",value:function(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}},{key:"toJSON",value:function(){return this.getHex()}},{key:Symbol.iterator,value:se().mark((function e(){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.r;case 2:return e.next=4,this.g;case 4:return e.next=6,this.b;case 6:case"end":return e.stop()}}),e,this)}))}]),t}(),yF=new gF;gF.NAMES=pF;var bF=0,xF=function(e){Y(n,e);var t=$(n);function n(){var e;return V(this,n),(e=t.call(this)).isMaterial=!0,Object.defineProperty(K(e),"id",{value:bF++}),e.uuid=gL(),e.name="",e.blending=1,e.side=0,e.vertexColors=!1,e.opacity=1,e.transparent=!1,e.alphaHash=!1,e.blendSrc=zI,e.blendDst=GI,e.blendEquation=UI,e.blendSrcAlpha=null,e.blendDstAlpha=null,e.blendEquationAlpha=null,e.blendColor=new gF(0,0,0),e.blendAlpha=0,e.depthFunc=3,e.depthTest=!0,e.depthWrite=!0,e.stencilWriteMask=255,e.stencilFunc=519,e.stencilRef=0,e.stencilFuncMask=255,e.stencilFail=uL,e.stencilZFail=uL,e.stencilZPass=uL,e.stencilWrite=!1,e.clippingPlanes=null,e.clipIntersection=!1,e.clipShadows=!1,e.shadowSide=null,e.colorWrite=!0,e.precision=null,e.polygonOffset=!1,e.polygonOffsetFactor=0,e.polygonOffsetUnits=0,e.dithering=!1,e.alphaToCoverage=!1,e.premultipliedAlpha=!1,e.forceSinglePass=!1,e.visible=!0,e.toneMapped=!0,e.userData={},e.version=0,e._alphaTest=0,e}return W(n,[{key:"type",get:function(){return this.constructor.type},set:function(e){}},{key:"alphaTest",get:function(){return this._alphaTest},set:function(e){this._alphaTest>0!==e>0&&this.version++,this._alphaTest=e}},{key:"onBeforeRender",value:function(){}},{key:"onBeforeCompile",value:function(){}},{key:"customProgramCacheKey",value:function(){return this.onBeforeCompile.toString()}},{key:"setValues",value:function(e){if(void 0!==e)for(var t in e){var n=e[t];if(void 0!==n){var r=this[t];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]=n:console.warn("THREE.Material: '".concat(t,"' is not a property of THREE.").concat(this.type,"."))}else console.warn("THREE.Material: parameter '".concat(t,"' has value of undefined."))}}},{key:"toJSON",value:function(e){var t=void 0===e||"string"===typeof e;t&&(e={textures:{},images:{}});var n={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};function r(e){var t=[];for(var n in e){var r=e[n];delete r.metadata,t.push(r)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),void 0!==this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.dispersion&&(n.dispersion=this.dispersion),void 0!==this.iridescence&&(n.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(n.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),void 0!==this.anisotropy&&(n.anisotropy=this.anisotropy),void 0!==this.anisotropyRotation&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapRotation&&(n.envMapRotation=this.envMapRotation.toArray()),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(n.blending=this.blending),0!==this.side&&(n.side=this.side),!0===this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=!0),this.blendSrc!==zI&&(n.blendSrc=this.blendSrc),this.blendDst!==GI&&(n.blendDst=this.blendDst),this.blendEquation!==UI&&(n.blendEquation=this.blendEquation),null!==this.blendSrcAlpha&&(n.blendSrcAlpha=this.blendSrcAlpha),null!==this.blendDstAlpha&&(n.blendDstAlpha=this.blendDstAlpha),null!==this.blendEquationAlpha&&(n.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(n.blendColor=this.blendColor.getHex()),0!==this.blendAlpha&&(n.blendAlpha=this.blendAlpha),3!==this.depthFunc&&(n.depthFunc=this.depthFunc),!1===this.depthTest&&(n.depthTest=this.depthTest),!1===this.depthWrite&&(n.depthWrite=this.depthWrite),!1===this.colorWrite&&(n.colorWrite=this.colorWrite),255!==this.stencilWriteMask&&(n.stencilWriteMask=this.stencilWriteMask),519!==this.stencilFunc&&(n.stencilFunc=this.stencilFunc),0!==this.stencilRef&&(n.stencilRef=this.stencilRef),255!==this.stencilFuncMask&&(n.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==uL&&(n.stencilFail=this.stencilFail),this.stencilZFail!==uL&&(n.stencilZFail=this.stencilZFail),this.stencilZPass!==uL&&(n.stencilZPass=this.stencilZPass),!0===this.stencilWrite&&(n.stencilWrite=this.stencilWrite),void 0!==this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaHash&&(n.alphaHash=!0),!0===this.alphaToCoverage&&(n.alphaToCoverage=!0),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=!0),!0===this.forceSinglePass&&(n.forceSinglePass=!0),!0===this.wireframe&&(n.wireframe=!0),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=!0),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),!1===this.fog&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData),t){var i=r(e.textures),a=r(e.images);i.length>0&&(n.textures=i),a.length>0&&(n.images=a)}return n}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;var t=e.clippingPlanes,n=null;if(null!==t){var r=t.length;n=new Array(r);for(var i=0;i!==r;++i)n[i]=t[i].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}},{key:"needsUpdate",set:function(e){!0===e&&this.version++}},{key:"onBuild",value:function(){console.warn("Material: onBuild() has been removed.")}}],[{key:"type",get:function(){return"Material"}}]),n}(fL),_F=function(e){Y(n,e);var t=$(n);function n(e){var r;return V(this,n),(r=t.call(this)).isMeshBasicMaterial=!0,r.color=new gF(16777215),r.map=null,r.lightMap=null,r.lightMapIntensity=1,r.aoMap=null,r.aoMapIntensity=1,r.specularMap=null,r.alphaMap=null,r.envMap=null,r.envMapRotation=new LO,r.combine=0,r.reflectivity=1,r.refractionRatio=.98,r.wireframe=!1,r.wireframeLinewidth=1,r.wireframeLinecap="round",r.wireframeLinejoin="round",r.fog=!0,r.setValues(e),r}return W(n,[{key:"copy",value:function(e){return oe(Q(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}],[{key:"type",get:function(){return"MeshBasicMaterial"}}]),n}(xF),wF=SF();function SF(){for(var e=new ArrayBuffer(4),t=new Float32Array(e),n=new Uint32Array(e),r=new Uint32Array(512),i=new Uint32Array(512),a=0;a<256;++a){var o=a-127;o<-27?(r[a]=0,r[256|a]=32768,i[a]=24,i[256|a]=24):o<-14?(r[a]=1024>>-o-14,r[256|a]=1024>>-o-14|32768,i[a]=-o-1,i[256|a]=-o-1):o<=15?(r[a]=o+15<<10,r[256|a]=o+15<<10|32768,i[a]=13,i[256|a]=13):o<128?(r[a]=31744,r[256|a]=64512,i[a]=24,i[256|a]=24):(r[a]=31744,r[256|a]=64512,i[a]=13,i[256|a]=13)}for(var s=new Uint32Array(2048),u=new Uint32Array(64),l=new Uint32Array(64),c=1;c<1024;++c){for(var h=c<<13,d=0;0===(8388608&h);)h<<=1,d-=8388608;h&=-8388609,d+=947912704,s[c]=h|d}for(var f=1024;f<2048;++f)s[f]=939524096+(f-1024<<13);for(var p=1;p<31;++p)u[p]=p<<23;u[31]=1199570944,u[32]=2147483648;for(var A=33;A<63;++A)u[A]=2147483648+(A-32<<23);u[63]=3347054592;for(var v=1;v<64;++v)32!==v&&(l[v]=1024);return{floatView:t,uint32View:n,baseTable:r,shiftTable:i,mantissaTable:s,exponentTable:u,offsetTable:l}}function MF(e){Math.abs(e)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),e=yL(e,-65504,65504),wF.floatView[0]=e;var t=wF.uint32View[0],n=t>>23&511;return wF.baseTable[n]+((8388607&t)>>wF.shiftTable[n])}function kF(e){var t=e>>10;return wF.uint32View[0]=wF.mantissaTable[wF.offsetTable[t]+(1023&e)]+wF.exponentTable[t],wF.floatView[0]}var TF=new JL,EF=new ML,CF=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(V(this,e),Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=t,this.itemSize=n,this.count=void 0!==t?t.length/n:0,this.normalized=r,this.usage=lL,this.updateRanges=[],this.gpuType=lD,this.version=0}return W(e,[{key:"onUploadCallback",value:function(){}},{key:"needsUpdate",set:function(e){!0===e&&this.version++}},{key:"setUsage",value:function(e){return this.usage=e,this}},{key:"addUpdateRange",value:function(e,t){this.updateRanges.push({start:e,count:t})}},{key:"clearUpdateRanges",value:function(){this.updateRanges.length=0}},{key:"copy",value:function(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}},{key:"copyAt",value:function(e,t,n){e*=this.itemSize,n*=t.itemSize;for(var r=0,i=this.itemSize;r<i;r++)this.array[e+r]=t.array[n+r];return this}},{key:"copyArray",value:function(e){return this.array.set(e),this}},{key:"applyMatrix3",value:function(e){if(2===this.itemSize)for(var t=0,n=this.count;t<n;t++)EF.fromBufferAttribute(this,t),EF.applyMatrix3(e),this.setXY(t,EF.x,EF.y);else if(3===this.itemSize)for(var r=0,i=this.count;r<i;r++)TF.fromBufferAttribute(this,r),TF.applyMatrix3(e),this.setXYZ(r,TF.x,TF.y,TF.z);return this}},{key:"applyMatrix4",value:function(e){for(var t=0,n=this.count;t<n;t++)TF.fromBufferAttribute(this,t),TF.applyMatrix4(e),this.setXYZ(t,TF.x,TF.y,TF.z);return this}},{key:"applyNormalMatrix",value:function(e){for(var t=0,n=this.count;t<n;t++)TF.fromBufferAttribute(this,t),TF.applyNormalMatrix(e),this.setXYZ(t,TF.x,TF.y,TF.z);return this}},{key:"transformDirection",value:function(e){for(var t=0,n=this.count;t<n;t++)TF.fromBufferAttribute(this,t),TF.transformDirection(e),this.setXYZ(t,TF.x,TF.y,TF.z);return this}},{key:"set",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(e,t),this}},{key:"getComponent",value:function(e,t){var n=this.array[e*this.itemSize+t];return this.normalized&&(n=_L(n,this.array)),n}},{key:"setComponent",value:function(e,t,n){return this.normalized&&(n=wL(n,this.array)),this.array[e*this.itemSize+t]=n,this}},{key:"getX",value:function(e){var t=this.array[e*this.itemSize];return this.normalized&&(t=_L(t,this.array)),t}},{key:"setX",value:function(e,t){return this.normalized&&(t=wL(t,this.array)),this.array[e*this.itemSize]=t,this}},{key:"getY",value:function(e){var t=this.array[e*this.itemSize+1];return this.normalized&&(t=_L(t,this.array)),t}},{key:"setY",value:function(e,t){return this.normalized&&(t=wL(t,this.array)),this.array[e*this.itemSize+1]=t,this}},{key:"getZ",value:function(e){var t=this.array[e*this.itemSize+2];return this.normalized&&(t=_L(t,this.array)),t}},{key:"setZ",value:function(e,t){return this.normalized&&(t=wL(t,this.array)),this.array[e*this.itemSize+2]=t,this}},{key:"getW",value:function(e){var t=this.array[e*this.itemSize+3];return this.normalized&&(t=_L(t,this.array)),t}},{key:"setW",value:function(e,t){return this.normalized&&(t=wL(t,this.array)),this.array[e*this.itemSize+3]=t,this}},{key:"setXY",value:function(e,t,n){return e*=this.itemSize,this.normalized&&(t=wL(t,this.array),n=wL(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}},{key:"setXYZ",value:function(e,t,n,r){return e*=this.itemSize,this.normalized&&(t=wL(t,this.array),n=wL(n,this.array),r=wL(r,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this}},{key:"setXYZW",value:function(e,t,n,r,i){return e*=this.itemSize,this.normalized&&(t=wL(t,this.array),n=wL(n,this.array),r=wL(r,this.array),i=wL(i,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=i,this}},{key:"onUpload",value:function(e){return this.onUploadCallback=e,this}},{key:"clone",value:function(){return new this.constructor(this.array,this.itemSize).copy(this)}},{key:"toJSON",value:function(){var e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),this.usage!==lL&&(e.usage=this.usage),e}}]),e}(),RF=function(e){Y(n,e);var t=$(n);function n(e,r,i){return V(this,n),t.call(this,new Uint16Array(e),r,i)}return W(n)}(CF),BF=function(e){Y(n,e);var t=$(n);function n(e,r,i){return V(this,n),t.call(this,new Uint32Array(e),r,i)}return W(n)}(CF),PF=function(e){Y(n,e);var t=$(n);function n(e,r,i){var a;return V(this,n),(a=t.call(this,new Uint16Array(e),r,i)).isFloat16BufferAttribute=!0,a}return W(n,[{key:"getX",value:function(e){var t=kF(this.array[e*this.itemSize]);return this.normalized&&(t=_L(t,this.array)),t}},{key:"setX",value:function(e,t){return this.normalized&&(t=wL(t,this.array)),this.array[e*this.itemSize]=MF(t),this}},{key:"getY",value:function(e){var t=kF(this.array[e*this.itemSize+1]);return this.normalized&&(t=_L(t,this.array)),t}},{key:"setY",value:function(e,t){return this.normalized&&(t=wL(t,this.array)),this.array[e*this.itemSize+1]=MF(t),this}},{key:"getZ",value:function(e){var t=kF(this.array[e*this.itemSize+2]);return this.normalized&&(t=_L(t,this.array)),t}},{key:"setZ",value:function(e,t){return this.normalized&&(t=wL(t,this.array)),this.array[e*this.itemSize+2]=MF(t),this}},{key:"getW",value:function(e){var t=kF(this.array[e*this.itemSize+3]);return this.normalized&&(t=_L(t,this.array)),t}},{key:"setW",value:function(e,t){return this.normalized&&(t=wL(t,this.array)),this.array[e*this.itemSize+3]=MF(t),this}},{key:"setXY",value:function(e,t,n){return e*=this.itemSize,this.normalized&&(t=wL(t,this.array),n=wL(n,this.array)),this.array[e+0]=MF(t),this.array[e+1]=MF(n),this}},{key:"setXYZ",value:function(e,t,n,r){return e*=this.itemSize,this.normalized&&(t=wL(t,this.array),n=wL(n,this.array),r=wL(r,this.array)),this.array[e+0]=MF(t),this.array[e+1]=MF(n),this.array[e+2]=MF(r),this}},{key:"setXYZW",value:function(e,t,n,r,i){return e*=this.itemSize,this.normalized&&(t=wL(t,this.array),n=wL(n,this.array),r=wL(r,this.array),i=wL(i,this.array)),this.array[e+0]=MF(t),this.array[e+1]=MF(n),this.array[e+2]=MF(r),this.array[e+3]=MF(i),this}}]),n}(CF),NF=function(e){Y(n,e);var t=$(n);function n(e,r,i){return V(this,n),t.call(this,new Float32Array(e),r,i)}return W(n)}(CF),IF=0,DF=new kO,LF=new $O,OF=new JL,FF=new $L,UF=new $L,zF=new JL,GF=function(e){Y(n,e);var t=$(n);function n(){var e;return V(this,n),(e=t.call(this)).isBufferGeometry=!0,Object.defineProperty(K(e),"id",{value:IF++}),e.uuid=gL(),e.name="",e.type="BufferGeometry",e.index=null,e.indirect=null,e.attributes={},e.morphAttributes={},e.morphTargetsRelative=!1,e.groups=[],e.boundingBox=null,e.boundingSphere=null,e.drawRange={start:0,count:1/0},e.userData={},e}return W(n,[{key:"getIndex",value:function(){return this.index}},{key:"setIndex",value:function(e){return Array.isArray(e)?this.index=new(function(e){for(var t=e.length-1;t>=0;--t)if(e[t]>=65535)return!0;return!1}(e)?BF:RF)(e,1):this.index=e,this}},{key:"setIndirect",value:function(e){return this.indirect=e,this}},{key:"getIndirect",value:function(){return this.indirect}},{key:"getAttribute",value:function(e){return this.attributes[e]}},{key:"setAttribute",value:function(e,t){return this.attributes[e]=t,this}},{key:"deleteAttribute",value:function(e){return delete this.attributes[e],this}},{key:"hasAttribute",value:function(e){return void 0!==this.attributes[e]}},{key:"addGroup",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.groups.push({start:e,count:t,materialIndex:n})}},{key:"clearGroups",value:function(){this.groups=[]}},{key:"setDrawRange",value:function(e,t){this.drawRange.start=e,this.drawRange.count=t}},{key:"applyMatrix4",value:function(e){var t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);var n=this.attributes.normal;if(void 0!==n){var r=(new kL).getNormalMatrix(e);n.applyNormalMatrix(r),n.needsUpdate=!0}var i=this.attributes.tangent;return void 0!==i&&(i.transformDirection(e),i.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}},{key:"applyQuaternion",value:function(e){return DF.makeRotationFromQuaternion(e),this.applyMatrix4(DF),this}},{key:"rotateX",value:function(e){return DF.makeRotationX(e),this.applyMatrix4(DF),this}},{key:"rotateY",value:function(e){return DF.makeRotationY(e),this.applyMatrix4(DF),this}},{key:"rotateZ",value:function(e){return DF.makeRotationZ(e),this.applyMatrix4(DF),this}},{key:"translate",value:function(e,t,n){return DF.makeTranslation(e,t,n),this.applyMatrix4(DF),this}},{key:"scale",value:function(e,t,n){return DF.makeScale(e,t,n),this.applyMatrix4(DF),this}},{key:"lookAt",value:function(e){return LF.lookAt(e),LF.updateMatrix(),this.applyMatrix4(LF.matrix),this}},{key:"center",value:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(OF).negate(),this.translate(OF.x,OF.y,OF.z),this}},{key:"setFromPoints",value:function(e){var t=this.getAttribute("position");if(void 0===t){for(var n=[],r=0,i=e.length;r<i;r++){var a=e[r];n.push(a.x,a.y,a.z||0)}this.setAttribute("position",new NF(n,3))}else{for(var o=0,s=t.count;o<s;o++){var u=e[o];t.setXYZ(o,u.x,u.y,u.z||0)}e.length>t.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}},{key:"computeBoundingBox",value:function(){null===this.boundingBox&&(this.boundingBox=new $L);var e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),void this.boundingBox.set(new JL(-1/0,-1/0,-1/0),new JL(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(var n=0,r=t.length;n<r;n++){var i=t[n];FF.setFromBufferAttribute(i),this.morphTargetsRelative?(zF.addVectors(this.boundingBox.min,FF.min),this.boundingBox.expandByPoint(zF),zF.addVectors(this.boundingBox.max,FF.max),this.boundingBox.expandByPoint(zF)):(this.boundingBox.expandByPoint(FF.min),this.boundingBox.expandByPoint(FF.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}},{key:"computeBoundingSphere",value:function(){null===this.boundingSphere&&(this.boundingSphere=new mO);var e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),void this.boundingSphere.set(new JL,1/0);if(e){var n=this.boundingSphere.center;if(FF.setFromBufferAttribute(e),t)for(var r=0,i=t.length;r<i;r++){var a=t[r];UF.setFromBufferAttribute(a),this.morphTargetsRelative?(zF.addVectors(FF.min,UF.min),FF.expandByPoint(zF),zF.addVectors(FF.max,UF.max),FF.expandByPoint(zF)):(FF.expandByPoint(UF.min),FF.expandByPoint(UF.max))}FF.getCenter(n);for(var o=0,s=0,u=e.count;s<u;s++)zF.fromBufferAttribute(e,s),o=Math.max(o,n.distanceToSquared(zF));if(t)for(var l=0,c=t.length;l<c;l++)for(var h=t[l],d=this.morphTargetsRelative,f=0,p=h.count;f<p;f++)zF.fromBufferAttribute(h,f),d&&(OF.fromBufferAttribute(e,f),zF.add(OF)),o=Math.max(o,n.distanceToSquared(zF));this.boundingSphere.radius=Math.sqrt(o),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}},{key:"computeTangents",value:function(){var e=this.index,t=this.attributes;if(null!==e&&void 0!==t.position&&void 0!==t.normal&&void 0!==t.uv){var n=t.position,r=t.normal,i=t.uv;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new CF(new Float32Array(4*n.count),4));for(var a=this.getAttribute("tangent"),o=[],s=[],u=0;u<n.count;u++)o[u]=new JL,s[u]=new JL;var l=new JL,c=new JL,h=new JL,d=new ML,f=new ML,p=new ML,A=new JL,v=new JL,m=this.groups;0===m.length&&(m=[{start:0,count:e.count}]);for(var g=0,y=m.length;g<y;++g)for(var b=m[g],x=b.start,_=x,w=x+b.count;_<w;_+=3)I(e.getX(_+0),e.getX(_+1),e.getX(_+2));for(var S=new JL,M=new JL,k=new JL,T=new JL,E=0,C=m.length;E<C;++E)for(var R=m[E],B=R.start,P=B,N=B+R.count;P<N;P+=3)D(e.getX(P+0)),D(e.getX(P+1)),D(e.getX(P+2))}else console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");function I(e,t,r){l.fromBufferAttribute(n,e),c.fromBufferAttribute(n,t),h.fromBufferAttribute(n,r),d.fromBufferAttribute(i,e),f.fromBufferAttribute(i,t),p.fromBufferAttribute(i,r),c.sub(l),h.sub(l),f.sub(d),p.sub(d);var a=1/(f.x*p.y-p.x*f.y);isFinite(a)&&(A.copy(c).multiplyScalar(p.y).addScaledVector(h,-f.y).multiplyScalar(a),v.copy(h).multiplyScalar(f.x).addScaledVector(c,-p.x).multiplyScalar(a),o[e].add(A),o[t].add(A),o[r].add(A),s[e].add(v),s[t].add(v),s[r].add(v))}function D(e){k.fromBufferAttribute(r,e),T.copy(k);var t=o[e];S.copy(t),S.sub(k.multiplyScalar(k.dot(t))).normalize(),M.crossVectors(T,t);var n=M.dot(s[e])<0?-1:1;a.setXYZW(e,S.x,S.y,S.z,n)}}},{key:"computeVertexNormals",value:function(){var e=this.index,t=this.getAttribute("position");if(void 0!==t){var n=this.getAttribute("normal");if(void 0===n)n=new CF(new Float32Array(3*t.count),3),this.setAttribute("normal",n);else for(var r=0,i=n.count;r<i;r++)n.setXYZ(r,0,0,0);var a=new JL,o=new JL,s=new JL,u=new JL,l=new JL,c=new JL,h=new JL,d=new JL;if(e)for(var f=0,p=e.count;f<p;f+=3){var A=e.getX(f+0),v=e.getX(f+1),m=e.getX(f+2);a.fromBufferAttribute(t,A),o.fromBufferAttribute(t,v),s.fromBufferAttribute(t,m),h.subVectors(s,o),d.subVectors(a,o),h.cross(d),u.fromBufferAttribute(n,A),l.fromBufferAttribute(n,v),c.fromBufferAttribute(n,m),u.add(h),l.add(h),c.add(h),n.setXYZ(A,u.x,u.y,u.z),n.setXYZ(v,l.x,l.y,l.z),n.setXYZ(m,c.x,c.y,c.z)}else for(var g=0,y=t.count;g<y;g+=3)a.fromBufferAttribute(t,g+0),o.fromBufferAttribute(t,g+1),s.fromBufferAttribute(t,g+2),h.subVectors(s,o),d.subVectors(a,o),h.cross(d),n.setXYZ(g+0,h.x,h.y,h.z),n.setXYZ(g+1,h.x,h.y,h.z),n.setXYZ(g+2,h.x,h.y,h.z);this.normalizeNormals(),n.needsUpdate=!0}}},{key:"normalizeNormals",value:function(){for(var e=this.attributes.normal,t=0,n=e.count;t<n;t++)zF.fromBufferAttribute(e,t),zF.normalize(),e.setXYZ(t,zF.x,zF.y,zF.z)}},{key:"toNonIndexed",value:function(){function e(e,t){for(var n=e.array,r=e.itemSize,i=e.normalized,a=new n.constructor(t.length*r),o=0,s=0,u=0,l=t.length;u<l;u++){o=e.isInterleavedBufferAttribute?t[u]*e.data.stride+e.offset:t[u]*r;for(var c=0;c<r;c++)a[s++]=n[o++]}return new CF(a,r,i)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;var t=new n,r=this.index.array,i=this.attributes;for(var a in i){var o=e(i[a],r);t.setAttribute(a,o)}var s=this.morphAttributes;for(var u in s){for(var l=[],c=s[u],h=0,d=c.length;h<d;h++){var f=e(c[h],r);l.push(f)}t.morphAttributes[u]=l}t.morphTargetsRelative=this.morphTargetsRelative;for(var p=this.groups,A=0,v=p.length;A<v;A++){var m=p[A];t.addGroup(m.start,m.count,m.materialIndex)}return t}},{key:"toJSON",value:function(){var e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){var t=this.parameters;for(var n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};var r=this.index;null!==r&&(e.data.index={type:r.array.constructor.name,array:Array.prototype.slice.call(r.array)});var i=this.attributes;for(var a in i){var o=i[a];e.data.attributes[a]=o.toJSON(e.data)}var s={},u=!1;for(var l in this.morphAttributes){for(var c=this.morphAttributes[l],h=[],d=0,f=c.length;d<f;d++){var p=c[d];h.push(p.toJSON(e.data))}h.length>0&&(s[l]=h,u=!0)}u&&(e.data.morphAttributes=s,e.data.morphTargetsRelative=this.morphTargetsRelative);var A=this.groups;A.length>0&&(e.data.groups=JSON.parse(JSON.stringify(A)));var v=this.boundingSphere;return null!==v&&(e.data.boundingSphere={center:v.center.toArray(),radius:v.radius}),e}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;var t={};this.name=e.name;var n=e.index;null!==n&&this.setIndex(n.clone(t));var r=e.attributes;for(var i in r){var a=r[i];this.setAttribute(i,a.clone(t))}var o=e.morphAttributes;for(var s in o){for(var u=[],l=o[s],c=0,h=l.length;c<h;c++)u.push(l[c].clone(t));this.morphAttributes[s]=u}this.morphTargetsRelative=e.morphTargetsRelative;for(var d=e.groups,f=0,p=d.length;f<p;f++){var A=d[f];this.addGroup(A.start,A.count,A.materialIndex)}var v=e.boundingBox;null!==v&&(this.boundingBox=v.clone());var m=e.boundingSphere;return null!==m&&(this.boundingSphere=m.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}}]),n}(fL),qF=new kO,HF=new MO,VF=new mO,jF=new JL,WF=new JL,XF=new JL,YF=new JL,QF=new JL,JF=new JL,KF=new JL,ZF=new JL,$F=function(e){Y(n,e);var t=$(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new GF,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new _F;return V(this,n),(e=t.call(this)).isMesh=!0,e.type="Mesh",e.geometry=r,e.material=i,e.updateMorphTargets(),e}return W(n,[{key:"copy",value:function(e,t){return oe(Q(n.prototype),"copy",this).call(this,e,t),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}},{key:"updateMorphTargets",value:function(){var e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){var n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var r=0,i=n.length;r<i;r++){var a=n[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=r}}}}},{key:"getVertexPosition",value:function(e,t){var n=this.geometry,r=n.attributes.position,i=n.morphAttributes.position,a=n.morphTargetsRelative;t.fromBufferAttribute(r,e);var o=this.morphTargetInfluences;if(i&&o){JF.set(0,0,0);for(var s=0,u=i.length;s<u;s++){var l=o[s],c=i[s];0!==l&&(QF.fromBufferAttribute(c,e),a?JF.addScaledVector(QF,l):JF.addScaledVector(QF.sub(t),l))}t.add(JF)}return t}},{key:"raycast",value:function(e,t){var n=this.geometry,r=this.material,i=this.matrixWorld;if(void 0!==r){if(null===n.boundingSphere&&n.computeBoundingSphere(),VF.copy(n.boundingSphere),VF.applyMatrix4(i),HF.copy(e.ray).recast(e.near),!1===VF.containsPoint(HF.origin)){if(null===HF.intersectSphere(VF,jF))return;if(HF.origin.distanceToSquared(jF)>Math.pow(e.far-e.near,2))return}qF.copy(i).invert(),HF.copy(e.ray).applyMatrix4(qF),null!==n.boundingBox&&!1===HF.intersectsBox(n.boundingBox)||this._computeIntersections(e,t,HF)}}},{key:"_computeIntersections",value:function(e,t,n){var r,i=this.geometry,a=this.material,o=i.index,s=i.attributes.position,u=i.attributes.uv,l=i.attributes.uv1,c=i.attributes.normal,h=i.groups,d=i.drawRange;if(null!==o)if(Array.isArray(a))for(var f=0,p=h.length;f<p;f++)for(var A=h[f],v=a[A.materialIndex],m=Math.max(A.start,d.start),g=Math.min(o.count,Math.min(A.start+A.count,d.start+d.count));m<g;m+=3){(r=eU(this,v,e,n,u,l,c,o.getX(m),o.getX(m+1),o.getX(m+2)))&&(r.faceIndex=Math.floor(m/3),r.face.materialIndex=A.materialIndex,t.push(r))}else for(var y=Math.max(0,d.start),b=Math.min(o.count,d.start+d.count);y<b;y+=3){(r=eU(this,a,e,n,u,l,c,o.getX(y),o.getX(y+1),o.getX(y+2)))&&(r.faceIndex=Math.floor(y/3),t.push(r))}else if(void 0!==s)if(Array.isArray(a))for(var x=0,_=h.length;x<_;x++)for(var w=h[x],S=a[w.materialIndex],M=Math.max(w.start,d.start),k=Math.min(s.count,Math.min(w.start+w.count,d.start+d.count));M<k;M+=3){(r=eU(this,S,e,n,u,l,c,M,M+1,M+2))&&(r.faceIndex=Math.floor(M/3),r.face.materialIndex=w.materialIndex,t.push(r))}else for(var T=Math.max(0,d.start),E=Math.min(s.count,d.start+d.count);T<E;T+=3){(r=eU(this,a,e,n,u,l,c,T,T+1,T+2))&&(r.faceIndex=Math.floor(T/3),t.push(r))}}}]),n}($O);function eU(e,t,n,r,i,a,o,s,u,l){e.getVertexPosition(s,WF),e.getVertexPosition(u,XF),e.getVertexPosition(l,YF);var c=function(e,t,n,r,i,a,o,s){if(null===(1===t.side?r.intersectTriangle(o,a,i,!0,s):r.intersectTriangle(i,a,o,0===t.side,s)))return null;ZF.copy(s),ZF.applyMatrix4(e.matrixWorld);var u=n.ray.origin.distanceTo(ZF);return u<n.near||u>n.far?null:{distance:u,point:ZF.clone(),object:e}}(e,t,n,r,WF,XF,YF,KF);if(c){var h=new JL;fF.getBarycoord(KF,WF,XF,YF,h),i&&(c.uv=fF.getInterpolatedAttribute(i,s,u,l,h,new ML)),a&&(c.uv1=fF.getInterpolatedAttribute(a,s,u,l,h,new ML)),o&&(c.normal=fF.getInterpolatedAttribute(o,s,u,l,h,new JL),c.normal.dot(r.direction)>0&&c.normal.multiplyScalar(-1));var d={a:s,b:u,c:l,normal:new JL,materialIndex:0};fF.getNormal(WF,XF,YF,d.normal),c.face=d,c.barycoord=h}return c}var tU=function(e){Y(n,e);var t=$(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;V(this,n),(e=t.call(this)).type="BoxGeometry",e.parameters={width:r,height:i,depth:a,widthSegments:o,heightSegments:s,depthSegments:u};var l=K(e);o=Math.floor(o),s=Math.floor(s),u=Math.floor(u);var c=[],h=[],d=[],f=[],p=0,A=0;function v(e,t,n,r,i,a,o,s,u,v,m){for(var g=a/u,y=o/v,b=a/2,x=o/2,_=s/2,w=u+1,S=v+1,M=0,k=0,T=new JL,E=0;E<S;E++)for(var C=E*y-x,R=0;R<w;R++){var B=R*g-b;T[e]=B*r,T[t]=C*i,T[n]=_,h.push(T.x,T.y,T.z),T[e]=0,T[t]=0,T[n]=s>0?1:-1,d.push(T.x,T.y,T.z),f.push(R/u),f.push(1-E/v),M+=1}for(var P=0;P<v;P++)for(var N=0;N<u;N++){var I=p+N+w*P,D=p+N+w*(P+1),L=p+(N+1)+w*(P+1),O=p+(N+1)+w*P;c.push(I,D,O),c.push(D,L,O),k+=6}l.addGroup(A,k,m),A+=k,p+=M}return v("z","y","x",-1,-1,a,i,r,u,s,0),v("z","y","x",1,-1,a,i,-r,u,s,1),v("x","z","y",1,1,r,a,i,o,u,2),v("x","z","y",1,-1,r,a,-i,o,u,3),v("x","y","z",1,-1,r,i,a,o,s,4),v("x","y","z",-1,-1,r,i,-a,o,s,5),e.setIndex(c),e.setAttribute("position",new NF(h,3)),e.setAttribute("normal",new NF(d,3)),e.setAttribute("uv",new NF(f,2)),e}return W(n,[{key:"copy",value:function(e){return oe(Q(n.prototype),"copy",this).call(this,e),this.parameters=Object.assign({},e.parameters),this}}],[{key:"fromJSON",value:function(e){return new n(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}]),n}(GF);function nU(e){var t={};for(var n in e)for(var r in t[n]={},e[n]){var i=e[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),t[n][r]=null):t[n][r]=i.clone():Array.isArray(i)?t[n][r]=i.slice():t[n][r]=i}return t}var rU=function(e){Y(n,e);var t=$(n);function n(e){var r;return V(this,n),(r=t.call(this)).isShaderMaterial=!0,r.defines={},r.uniforms={},r.uniformsGroups=[],r.vertexShader="\nvoid main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}\n",r.fragmentShader="\nvoid main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}\n",r.linewidth=1,r.wireframe=!1,r.wireframeLinewidth=1,r.fog=!1,r.lights=!1,r.clipping=!1,r.forceSinglePass=!0,r.extensions={clipCullDistance:!1,multiDraw:!1},r.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},r.index0AttributeName=void 0,r.uniformsNeedUpdate=!1,r.glslVersion=null,void 0!==e&&r.setValues(e),r}return W(n,[{key:"copy",value:function(e){return oe(Q(n.prototype),"copy",this).call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=nU(e.uniforms),this.uniformsGroups=function(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n].clone());return t}(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}},{key:"toJSON",value:function(e){var t=oe(Q(n.prototype),"toJSON",this).call(this,e);for(var r in t.glslVersion=this.glslVersion,t.uniforms={},this.uniforms){var i=this.uniforms[r].value;i&&i.isTexture?t.uniforms[r]={type:"t",value:i.toJSON(e).uuid}:i&&i.isColor?t.uniforms[r]={type:"c",value:i.getHex()}:i&&i.isVector2?t.uniforms[r]={type:"v2",value:i.toArray()}:i&&i.isVector3?t.uniforms[r]={type:"v3",value:i.toArray()}:i&&i.isVector4?t.uniforms[r]={type:"v4",value:i.toArray()}:i&&i.isMatrix3?t.uniforms[r]={type:"m3",value:i.toArray()}:i&&i.isMatrix4?t.uniforms[r]={type:"m4",value:i.toArray()}:t.uniforms[r]={value:i}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;var a={};for(var o in this.extensions)!0===this.extensions[o]&&(a[o]=!0);return Object.keys(a).length>0&&(t.extensions=a),t}}],[{key:"type",get:function(){return"ShaderMaterial"}}]),n}(xF),iU=function(e){Y(n,e);var t=$(n);function n(){var e;return V(this,n),(e=t.call(this)).isCamera=!0,e.type="Camera",e.matrixWorldInverse=new kO,e.projectionMatrix=new kO,e.projectionMatrixInverse=new kO,e.coordinateSystem=hL,e}return W(n,[{key:"copy",value:function(e,t){return oe(Q(n.prototype),"copy",this).call(this,e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}},{key:"getWorldDirection",value:function(e){return oe(Q(n.prototype),"getWorldDirection",this).call(this,e).negate()}},{key:"updateMatrixWorld",value:function(e){oe(Q(n.prototype),"updateMatrixWorld",this).call(this,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}},{key:"updateWorldMatrix",value:function(e,t){oe(Q(n.prototype),"updateWorldMatrix",this).call(this,e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),n}($O),aU=new JL,oU=new ML,sU=new ML,uU=function(e){Y(n,e);var t=$(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2e3;return V(this,n),(e=t.call(this)).isPerspectiveCamera=!0,e.type="PerspectiveCamera",e.fov=r,e.zoom=1,e.near=a,e.far=o,e.focus=10,e.aspect=i,e.view=null,e.filmGauge=35,e.filmOffset=0,e.updateProjectionMatrix(),e}return W(n,[{key:"copy",value:function(e,t){return oe(Q(n.prototype),"copy",this).call(this,e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}},{key:"setFocalLength",value:function(e){var t=.5*this.getFilmHeight()/e;this.fov=2*mL*Math.atan(t),this.updateProjectionMatrix()}},{key:"getFocalLength",value:function(){var e=Math.tan(.5*vL*this.fov);return.5*this.getFilmHeight()/e}},{key:"getEffectiveFOV",value:function(){return 2*mL*Math.atan(Math.tan(.5*vL*this.fov)/this.zoom)}},{key:"getFilmWidth",value:function(){return this.filmGauge*Math.min(this.aspect,1)}},{key:"getFilmHeight",value:function(){return this.filmGauge/Math.max(this.aspect,1)}},{key:"getViewBounds",value:function(e,t,n){aU.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(aU.x,aU.y).multiplyScalar(-e/aU.z),aU.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(aU.x,aU.y).multiplyScalar(-e/aU.z)}},{key:"getViewSize",value:function(e,t){return this.getViewBounds(e,oU,sU),t.subVectors(sU,oU)}},{key:"setViewOffset",value:function(e,t,n,r,i,a){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=a,this.updateProjectionMatrix()}},{key:"clearViewOffset",value:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}},{key:"updateProjectionMatrix",value:function(){var e=this.near,t=e*Math.tan(.5*vL*this.fov)/this.zoom,n=2*t,r=this.aspect*n,i=-.5*r,a=this.view;if(null!==this.view&&this.view.enabled){var o=a.fullWidth,s=a.fullHeight;i+=a.offsetX*r/o,t-=a.offsetY*n/s,r*=a.width/o,n*=a.height/s}var u=this.filmOffset;0!==u&&(i+=e*u/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,t,t-n,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}},{key:"toJSON",value:function(e){var t=oe(Q(n.prototype),"toJSON",this).call(this,e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}]),n}(iU),lU=-90,cU=function(e){Y(n,e);var t=$(n);function n(e,r,i){var a;V(this,n),(a=t.call(this)).type="CubeCamera",a.renderTarget=i,a.coordinateSystem=null,a.activeMipmapLevel=0;var o=new uU(lU,1,e,r);o.layers=a.layers,a.add(o);var s=new uU(lU,1,e,r);s.layers=a.layers,a.add(s);var u=new uU(lU,1,e,r);u.layers=a.layers,a.add(u);var l=new uU(lU,1,e,r);l.layers=a.layers,a.add(l);var c=new uU(lU,1,e,r);c.layers=a.layers,a.add(c);var h=new uU(lU,1,e,r);return h.layers=a.layers,a.add(h),a}return W(n,[{key:"updateCoordinateSystem",value:function(){var e,t=this.coordinateSystem,n=this.children.concat(),r=l(n,6),i=r[0],a=r[1],o=r[2],s=r[3],u=r[4],c=r[5],h=ee(n);try{for(h.s();!(e=h.n()).done;){var d=e.value;this.remove(d)}}catch(v){h.e(v)}finally{h.f()}if(t===hL)i.up.set(0,1,0),i.lookAt(1,0,0),a.up.set(0,1,0),a.lookAt(-1,0,0),o.up.set(0,0,-1),o.lookAt(0,1,0),s.up.set(0,0,1),s.lookAt(0,-1,0),u.up.set(0,1,0),u.lookAt(0,0,1),c.up.set(0,1,0),c.lookAt(0,0,-1);else{if(t!==dL)throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+t);i.up.set(0,-1,0),i.lookAt(-1,0,0),a.up.set(0,-1,0),a.lookAt(1,0,0),o.up.set(0,0,1),o.lookAt(0,1,0),s.up.set(0,0,-1),s.lookAt(0,-1,0),u.up.set(0,-1,0),u.lookAt(0,0,1),c.up.set(0,-1,0),c.lookAt(0,0,-1)}var f,p=ee(n);try{for(p.s();!(f=p.n()).done;){var A=f.value;this.add(A),A.updateMatrixWorld()}}catch(v){p.e(v)}finally{p.f()}}},{key:"update",value:function(e,t){null===this.parent&&this.updateMatrixWorld();var n=this.renderTarget,r=this.activeMipmapLevel;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());var i=l(this.children,6),a=i[0],o=i[1],s=i[2],u=i[3],c=i[4],h=i[5],d=e.getRenderTarget(),f=e.getActiveCubeFace(),p=e.getActiveMipmapLevel(),A=e.xr.enabled;e.xr.enabled=!1;var v=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0,r),e.render(t,a),e.setRenderTarget(n,1,r),e.render(t,o),e.setRenderTarget(n,2,r),e.render(t,s),e.setRenderTarget(n,3,r),e.render(t,u),e.setRenderTarget(n,4,r),e.render(t,c),n.texture.generateMipmaps=v,e.setRenderTarget(n,5,r),e.render(t,h),e.setRenderTarget(d,f,p),e.xr.enabled=A,n.texture.needsPMREMUpdate=!0}}]),n}($O),hU=function(e){Y(n,e);var t=$(n);function n(e,r,i,a,o,s,u,l,c,h){var d;return V(this,n),e=void 0!==e?e:[],r=void 0!==r?r:HI,(d=t.call(this,e,r,i,a,o,s,u,l,c,h)).isCubeTexture=!0,d.flipY=!1,d}return W(n,[{key:"images",get:function(){return this.image},set:function(e){this.image=e}}]),n}(VL),dU=function(e){Y(n,e);var t=$(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};V(this,n),(e=t.call(this,r,r,i)).isWebGLCubeRenderTarget=!0;var a={width:r,height:r,depth:1},o=[a,a,a,a,a,a];return e.texture=new hU(o,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace),e.texture.isRenderTargetTexture=!0,e.texture.generateMipmaps=void 0!==i.generateMipmaps&&i.generateMipmaps,e.texture.minFilter=void 0!==i.minFilter?i.minFilter:eD,e}return W(n,[{key:"fromEquirectangularTexture",value:function(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;var n={tEquirect:{value:null}},r="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",i="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",a=new tU(5,5,5),o=new rU({name:"CubemapFromEquirect",uniforms:nU(n),vertexShader:r,fragmentShader:i,side:1,blending:0});o.uniforms.tEquirect.value=t;var s=new $F(a,o),u=t.minFilter;return t.minFilter===nD&&(t.minFilter=eD),new cU(1,10,this).update(e,s),t.minFilter=u,s.geometry.dispose(),s.material.dispose(),this}},{key:"clear",value:function(e,t,n,r){for(var i=e.getRenderTarget(),a=0;a<6;a++)e.setRenderTarget(this,a),e.clear(t,n,r);e.setRenderTarget(i)}}]),n}(XL),fU=function(e){Y(n,e);var t=$(n);function n(){var e;return V(this,n),(e=t.call(this)).isScene=!0,e.type="Scene",e.background=null,e.environment=null,e.fog=null,e.backgroundBlurriness=0,e.backgroundIntensity=1,e.backgroundRotation=new LO,e.environmentIntensity=1,e.environmentRotation=new LO,e.overrideMaterial=null,"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:K(e)})),e}return W(n,[{key:"copy",value:function(e,t){return oe(Q(n.prototype),"copy",this).call(this,e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}},{key:"toJSON",value:function(e){var t=oe(Q(n.prototype),"toJSON",this).call(this,e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),1!==this.environmentIntensity&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}]),n}($O),pU=function(){function e(t,n){V(this,e),this.isInterleavedBuffer=!0,this.array=t,this.stride=n,this.count=void 0!==t?t.length/n:0,this.usage=lL,this.updateRanges=[],this.version=0,this.uuid=gL()}return W(e,[{key:"onUploadCallback",value:function(){}},{key:"needsUpdate",set:function(e){!0===e&&this.version++}},{key:"setUsage",value:function(e){return this.usage=e,this}},{key:"addUpdateRange",value:function(e,t){this.updateRanges.push({start:e,count:t})}},{key:"clearUpdateRanges",value:function(){this.updateRanges.length=0}},{key:"copy",value:function(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}},{key:"copyAt",value:function(e,t,n){e*=this.stride,n*=t.stride;for(var r=0,i=this.stride;r<i;r++)this.array[e+r]=t.array[n+r];return this}},{key:"set",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(e,t),this}},{key:"clone",value:function(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=gL()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);var t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}},{key:"onUpload",value:function(e){return this.onUploadCallback=e,this}},{key:"toJSON",value:function(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=gL()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}]),e}(),AU=new JL,vU=function(){function e(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];V(this,e),this.isInterleavedBufferAttribute=!0,this.name="",this.data=t,this.itemSize=n,this.offset=r,this.normalized=i}return W(e,[{key:"count",get:function(){return this.data.count}},{key:"array",get:function(){return this.data.array}},{key:"needsUpdate",set:function(e){this.data.needsUpdate=e}},{key:"applyMatrix4",value:function(e){for(var t=0,n=this.data.count;t<n;t++)AU.fromBufferAttribute(this,t),AU.applyMatrix4(e),this.setXYZ(t,AU.x,AU.y,AU.z);return this}},{key:"applyNormalMatrix",value:function(e){for(var t=0,n=this.count;t<n;t++)AU.fromBufferAttribute(this,t),AU.applyNormalMatrix(e),this.setXYZ(t,AU.x,AU.y,AU.z);return this}},{key:"transformDirection",value:function(e){for(var t=0,n=this.count;t<n;t++)AU.fromBufferAttribute(this,t),AU.transformDirection(e),this.setXYZ(t,AU.x,AU.y,AU.z);return this}},{key:"getComponent",value:function(e,t){var n=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(n=_L(n,this.array)),n}},{key:"setComponent",value:function(e,t,n){return this.normalized&&(n=wL(n,this.array)),this.data.array[e*this.data.stride+this.offset+t]=n,this}},{key:"setX",value:function(e,t){return this.normalized&&(t=wL(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}},{key:"setY",value:function(e,t){return this.normalized&&(t=wL(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}},{key:"setZ",value:function(e,t){return this.normalized&&(t=wL(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}},{key:"setW",value:function(e,t){return this.normalized&&(t=wL(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}},{key:"getX",value:function(e){var t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=_L(t,this.array)),t}},{key:"getY",value:function(e){var t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=_L(t,this.array)),t}},{key:"getZ",value:function(e){var t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=_L(t,this.array)),t}},{key:"getW",value:function(e){var t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=_L(t,this.array)),t}},{key:"setXY",value:function(e,t,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=wL(t,this.array),n=wL(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this}},{key:"setXYZ",value:function(e,t,n,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=wL(t,this.array),n=wL(n,this.array),r=wL(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this}},{key:"setXYZW",value:function(e,t,n,r,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=wL(t,this.array),n=wL(n,this.array),r=wL(r,this.array),i=wL(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=i,this}},{key:"clone",value:function(t){if(void 0===t){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");for(var n=[],r=0;r<this.count;r++)for(var i=r*this.data.stride+this.offset,a=0;a<this.itemSize;a++)n.push(this.data.array[i+a]);return new CF(new this.array.constructor(n),this.itemSize,this.normalized)}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new e(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}},{key:"toJSON",value:function(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");for(var t=[],n=0;n<this.count;n++)for(var r=n*this.data.stride+this.offset,i=0;i<this.itemSize;i++)t.push(this.data.array[r+i]);return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}]),e}(),mU=function(e){Y(n,e);var t=$(n);function n(e){var r;return V(this,n),(r=t.call(this)).isSpriteMaterial=!0,r.color=new gF(16777215),r.map=null,r.alphaMap=null,r.rotation=0,r.sizeAttenuation=!0,r.transparent=!0,r.fog=!0,r.setValues(e),r}return W(n,[{key:"copy",value:function(e){return oe(Q(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}],[{key:"type",get:function(){return"SpriteMaterial"}}]),n}(xF);var gU=function(e){Y(n,e);var t=$(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0,u=arguments.length>5?arguments[5]:void 0,l=arguments.length>6?arguments[6]:void 0,c=arguments.length>7?arguments[7]:void 0,h=arguments.length>8&&void 0!==arguments[8]?arguments[8]:KI,d=arguments.length>9&&void 0!==arguments[9]?arguments[9]:KI,f=arguments.length>10?arguments[10]:void 0,p=arguments.length>11?arguments[11]:void 0;return V(this,n),(e=t.call(this,null,u,l,c,h,d,o,s,f,p)).isDataTexture=!0,e.image={data:r,width:i,height:a},e.generateMipmaps=!1,e.flipY=!1,e.unpackAlignment=1,e}return W(n)}(VL),yU=function(e){Y(n,e);var t=$(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return V(this,n),(a=t.call(this,e,r,i)).isInstancedBufferAttribute=!0,a.meshPerAttribute=o,a}return W(n,[{key:"copy",value:function(e){return oe(Q(n.prototype),"copy",this).call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}},{key:"toJSON",value:function(){var e=oe(Q(n.prototype),"toJSON",this).call(this);return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}]),n}(CF),bU=new JL,xU=new JL,_U=new kL,wU=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new JL(1,0,0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;V(this,e),this.isPlane=!0,this.normal=t,this.constant=n}return W(e,[{key:"set",value:function(e,t){return this.normal.copy(e),this.constant=t,this}},{key:"setComponents",value:function(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this}},{key:"setFromNormalAndCoplanarPoint",value:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}},{key:"setFromCoplanarPoints",value:function(e,t,n){var r=bU.subVectors(n,t).cross(xU.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}},{key:"copy",value:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this}},{key:"normalize",value:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}},{key:"negate",value:function(){return this.constant*=-1,this.normal.negate(),this}},{key:"distanceToPoint",value:function(e){return this.normal.dot(e)+this.constant}},{key:"distanceToSphere",value:function(e){return this.distanceToPoint(e.center)-e.radius}},{key:"projectPoint",value:function(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}},{key:"intersectLine",value:function(e,t){var n=e.delta(bU),r=this.normal.dot(n);if(0===r)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;var i=-(e.start.dot(this.normal)+this.constant)/r;return i<0||i>1?null:t.copy(e.start).addScaledVector(n,i)}},{key:"intersectsLine",value:function(e){var t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}},{key:"intersectsBox",value:function(e){return e.intersectsPlane(this)}},{key:"intersectsSphere",value:function(e){return e.intersectsPlane(this)}},{key:"coplanarPoint",value:function(e){return e.copy(this.normal).multiplyScalar(-this.constant)}},{key:"applyMatrix4",value:function(e,t){var n=t||_U.getNormalMatrix(e),r=this.coplanarPoint(bU).applyMatrix4(e),i=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(i),this}},{key:"translate",value:function(e){return this.constant-=e.dot(this.normal),this}},{key:"equals",value:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}(),SU=new mO,MU=new JL,kU=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new wU,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new wU,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new wU,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new wU,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new wU,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:new wU;V(this,e),this.planes=[t,n,r,i,a,o]}return W(e,[{key:"set",value:function(e,t,n,r,i,a){var o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(n),o[3].copy(r),o[4].copy(i),o[5].copy(a),this}},{key:"copy",value:function(e){for(var t=this.planes,n=0;n<6;n++)t[n].copy(e.planes[n]);return this}},{key:"setFromProjectionMatrix",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:hL,n=this.planes,r=e.elements,i=r[0],a=r[1],o=r[2],s=r[3],u=r[4],l=r[5],c=r[6],h=r[7],d=r[8],f=r[9],p=r[10],A=r[11],v=r[12],m=r[13],g=r[14],y=r[15];if(n[0].setComponents(s-i,h-u,A-d,y-v).normalize(),n[1].setComponents(s+i,h+u,A+d,y+v).normalize(),n[2].setComponents(s+a,h+l,A+f,y+m).normalize(),n[3].setComponents(s-a,h-l,A-f,y-m).normalize(),n[4].setComponents(s-o,h-c,A-p,y-g).normalize(),t===hL)n[5].setComponents(s+o,h+c,A+p,y+g).normalize();else{if(t!==dL)throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);n[5].setComponents(o,c,p,g).normalize()}return this}},{key:"intersectsObject",value:function(e){if(void 0!==e.boundingSphere)null===e.boundingSphere&&e.computeBoundingSphere(),SU.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{var t=e.geometry;null===t.boundingSphere&&t.computeBoundingSphere(),SU.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(SU)}},{key:"intersectsSprite",value:function(e){return SU.center.set(0,0,0),SU.radius=.7071067811865476,SU.applyMatrix4(e.matrixWorld),this.intersectsSphere(SU)}},{key:"intersectsSphere",value:function(e){for(var t=this.planes,n=e.center,r=-e.radius,i=0;i<6;i++){if(t[i].distanceToPoint(n)<r)return!1}return!0}},{key:"intersectsBox",value:function(e){for(var t=this.planes,n=0;n<6;n++){var r=t[n];if(MU.x=r.normal.x>0?e.max.x:e.min.x,MU.y=r.normal.y>0?e.max.y:e.min.y,MU.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(MU)<0)return!1}return!0}},{key:"containsPoint",value:function(e){for(var t=this.planes,n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}();var TU=function(e){Y(n,e);var t=$(n);function n(e){var r;return V(this,n),(r=t.call(this)).isLineBasicMaterial=!0,r.color=new gF(16777215),r.map=null,r.linewidth=1,r.linecap="round",r.linejoin="round",r.fog=!0,r.setValues(e),r}return W(n,[{key:"copy",value:function(e){return oe(Q(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}],[{key:"type",get:function(){return"LineBasicMaterial"}}]),n}(xF);var EU=function(e){Y(n,e);var t=$(n);function n(e){var r;return V(this,n),(r=t.call(this)).isPointsMaterial=!0,r.color=new gF(16777215),r.map=null,r.alphaMap=null,r.size=1,r.sizeAttenuation=!0,r.fog=!0,r.setValues(e),r}return W(n,[{key:"copy",value:function(e){return oe(Q(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}],[{key:"type",get:function(){return"PointsMaterial"}}]),n}(xF);var CU=function(e){Y(n,e);var t=$(n);function n(e,r){var i;return V(this,n),(i=t.call(this,{width:e,height:r})).isFramebufferTexture=!0,i.magFilter=KI,i.minFilter=KI,i.generateMipmaps=!1,i.needsUpdate=!0,i}return W(n)}(VL),RU=function(e){Y(n,e);var t=$(n);function n(e,r,i,a,o,s,u,l,c){var h,d=arguments.length>9&&void 0!==arguments[9]?arguments[9]:AD;if(V(this,n),d!==AD&&d!==vD)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");return void 0===i&&d===AD&&(i=uD),void 0===i&&d===vD&&(i=hD),(h=t.call(this,null,a,o,s,u,l,d,i,c)).isDepthTexture=!0,h.image={width:e,height:r},h.magFilter=void 0!==u?u:KI,h.minFilter=void 0!==l?l:KI,h.flipY=!1,h.generateMipmaps=!1,h.compareFunction=null,h}return W(n,[{key:"copy",value:function(e){return oe(Q(n.prototype),"copy",this).call(this,e),this.compareFunction=e.compareFunction,this}},{key:"toJSON",value:function(e){var t=oe(Q(n.prototype),"toJSON",this).call(this,e);return null!==this.compareFunction&&(t.compareFunction=this.compareFunction),t}}]),n}(VL);var BU=function(e){Y(n,e);var t=$(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2*Math.PI,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Math.PI;V(this,n),(e=t.call(this)).type="SphereGeometry",e.parameters={radius:r,widthSegments:i,heightSegments:a,phiStart:o,phiLength:s,thetaStart:u,thetaLength:l},i=Math.max(3,Math.floor(i)),a=Math.max(2,Math.floor(a));for(var c=Math.min(u+l,Math.PI),h=0,d=[],f=new JL,p=new JL,A=[],v=[],m=[],g=[],y=0;y<=a;y++){var b=[],x=y/a,_=0;0===y&&0===u?_=.5/i:y===a&&c===Math.PI&&(_=-.5/i);for(var w=0;w<=i;w++){var S=w/i;f.x=-r*Math.cos(o+S*s)*Math.sin(u+x*l),f.y=r*Math.cos(u+x*l),f.z=r*Math.sin(o+S*s)*Math.sin(u+x*l),v.push(f.x,f.y,f.z),p.copy(f).normalize(),m.push(p.x,p.y,p.z),g.push(S+_,1-x),b.push(h++)}d.push(b)}for(var M=0;M<a;M++)for(var k=0;k<i;k++){var T=d[M][k+1],E=d[M][k],C=d[M+1][k],R=d[M+1][k+1];(0!==M||u>0)&&A.push(T,E,R),(M!==a-1||c<Math.PI)&&A.push(E,C,R)}return e.setIndex(A),e.setAttribute("position",new NF(v,3)),e.setAttribute("normal",new NF(m,3)),e.setAttribute("uv",new NF(g,2)),e}return W(n,[{key:"copy",value:function(e){return oe(Q(n.prototype),"copy",this).call(this,e),this.parameters=Object.assign({},e.parameters),this}}],[{key:"fromJSON",value:function(e){return new n(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}]),n}(GF);var PU=function(e){Y(n,e);var t=$(n);function n(e){var r;return V(this,n),(r=t.call(this)).isShadowMaterial=!0,r.color=new gF(0),r.transparent=!0,r.fog=!0,r.setValues(e),r}return W(n,[{key:"copy",value:function(e){return oe(Q(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.fog=e.fog,this}}],[{key:"type",get:function(){return"ShadowMaterial"}}]),n}(xF),NU=function(e){Y(n,e);var t=$(n);function n(e){var r;return V(this,n),(r=t.call(this)).isMeshStandardMaterial=!0,r.defines={STANDARD:""},r.color=new gF(16777215),r.roughness=1,r.metalness=0,r.map=null,r.lightMap=null,r.lightMapIntensity=1,r.aoMap=null,r.aoMapIntensity=1,r.emissive=new gF(0),r.emissiveIntensity=1,r.emissiveMap=null,r.bumpMap=null,r.bumpScale=1,r.normalMap=null,r.normalMapType=0,r.normalScale=new ML(1,1),r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.roughnessMap=null,r.metalnessMap=null,r.alphaMap=null,r.envMap=null,r.envMapRotation=new LO,r.envMapIntensity=1,r.wireframe=!1,r.wireframeLinewidth=1,r.wireframeLinecap="round",r.wireframeLinejoin="round",r.flatShading=!1,r.fog=!0,r.setValues(e),r}return W(n,[{key:"copy",value:function(e){return oe(Q(n.prototype),"copy",this).call(this,e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}],[{key:"type",get:function(){return"MeshStandardMaterial"}}]),n}(xF),IU=function(e){Y(n,e);var t=$(n);function n(e){var r;return V(this,n),(r=t.call(this)).isMeshPhysicalMaterial=!0,r.defines={STANDARD:"",PHYSICAL:""},r.anisotropyRotation=0,r.anisotropyMap=null,r.clearcoatMap=null,r.clearcoatRoughness=0,r.clearcoatRoughnessMap=null,r.clearcoatNormalScale=new ML(1,1),r.clearcoatNormalMap=null,r.ior=1.5,Object.defineProperty(K(r),"reflectivity",{get:function(){return yL(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(e){this.ior=(1+.4*e)/(1-.4*e)}}),r.iridescenceMap=null,r.iridescenceIOR=1.3,r.iridescenceThicknessRange=[100,400],r.iridescenceThicknessMap=null,r.sheenColor=new gF(0),r.sheenColorMap=null,r.sheenRoughness=1,r.sheenRoughnessMap=null,r.transmissionMap=null,r.thickness=0,r.thicknessMap=null,r.attenuationDistance=1/0,r.attenuationColor=new gF(1,1,1),r.specularIntensity=1,r.specularIntensityMap=null,r.specularColor=new gF(1,1,1),r.specularColorMap=null,r._anisotropy=0,r._clearcoat=0,r._dispersion=0,r._iridescence=0,r._sheen=0,r._transmission=0,r.setValues(e),r}return W(n,[{key:"anisotropy",get:function(){return this._anisotropy},set:function(e){this._anisotropy>0!==e>0&&this.version++,this._anisotropy=e}},{key:"clearcoat",get:function(){return this._clearcoat},set:function(e){this._clearcoat>0!==e>0&&this.version++,this._clearcoat=e}},{key:"iridescence",get:function(){return this._iridescence},set:function(e){this._iridescence>0!==e>0&&this.version++,this._iridescence=e}},{key:"dispersion",get:function(){return this._dispersion},set:function(e){this._dispersion>0!==e>0&&this.version++,this._dispersion=e}},{key:"sheen",get:function(){return this._sheen},set:function(e){this._sheen>0!==e>0&&this.version++,this._sheen=e}},{key:"transmission",get:function(){return this._transmission},set:function(e){this._transmission>0!==e>0&&this.version++,this._transmission=e}},{key:"copy",value:function(e){return oe(Q(n.prototype),"copy",this).call(this,e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=q(e.iridescenceThicknessRange),this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}],[{key:"type",get:function(){return"MeshPhysicalMaterial"}}]),n}(NU),DU=function(e){Y(n,e);var t=$(n);function n(e){var r;return V(this,n),(r=t.call(this)).isMeshPhongMaterial=!0,r.color=new gF(16777215),r.specular=new gF(1118481),r.shininess=30,r.map=null,r.lightMap=null,r.lightMapIntensity=1,r.aoMap=null,r.aoMapIntensity=1,r.emissive=new gF(0),r.emissiveIntensity=1,r.emissiveMap=null,r.bumpMap=null,r.bumpScale=1,r.normalMap=null,r.normalMapType=0,r.normalScale=new ML(1,1),r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.specularMap=null,r.alphaMap=null,r.envMap=null,r.envMapRotation=new LO,r.combine=0,r.reflectivity=1,r.refractionRatio=.98,r.wireframe=!1,r.wireframeLinewidth=1,r.wireframeLinecap="round",r.wireframeLinejoin="round",r.flatShading=!1,r.fog=!0,r.setValues(e),r}return W(n,[{key:"copy",value:function(e){return oe(Q(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}],[{key:"type",get:function(){return"MeshPhongMaterial"}}]),n}(xF),LU=function(e){Y(n,e);var t=$(n);function n(e){var r;return V(this,n),(r=t.call(this)).isMeshToonMaterial=!0,r.defines={TOON:""},r.color=new gF(16777215),r.map=null,r.gradientMap=null,r.lightMap=null,r.lightMapIntensity=1,r.aoMap=null,r.aoMapIntensity=1,r.emissive=new gF(0),r.emissiveIntensity=1,r.emissiveMap=null,r.bumpMap=null,r.bumpScale=1,r.normalMap=null,r.normalMapType=0,r.normalScale=new ML(1,1),r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.alphaMap=null,r.wireframe=!1,r.wireframeLinewidth=1,r.wireframeLinecap="round",r.wireframeLinejoin="round",r.fog=!0,r.setValues(e),r}return W(n,[{key:"copy",value:function(e){return oe(Q(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}],[{key:"type",get:function(){return"MeshToonMaterial"}}]),n}(xF),OU=function(e){Y(n,e);var t=$(n);function n(e){var r;return V(this,n),(r=t.call(this)).isMeshNormalMaterial=!0,r.bumpMap=null,r.bumpScale=1,r.normalMap=null,r.normalMapType=0,r.normalScale=new ML(1,1),r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.wireframe=!1,r.wireframeLinewidth=1,r.flatShading=!1,r.setValues(e),r}return W(n,[{key:"copy",value:function(e){return oe(Q(n.prototype),"copy",this).call(this,e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}],[{key:"type",get:function(){return"MeshNormalMaterial"}}]),n}(xF),FU=function(e){Y(n,e);var t=$(n);function n(e){var r;return V(this,n),(r=t.call(this)).isMeshLambertMaterial=!0,r.color=new gF(16777215),r.map=null,r.lightMap=null,r.lightMapIntensity=1,r.aoMap=null,r.aoMapIntensity=1,r.emissive=new gF(0),r.emissiveIntensity=1,r.emissiveMap=null,r.bumpMap=null,r.bumpScale=1,r.normalMap=null,r.normalMapType=0,r.normalScale=new ML(1,1),r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.specularMap=null,r.alphaMap=null,r.envMap=null,r.envMapRotation=new LO,r.combine=0,r.reflectivity=1,r.refractionRatio=.98,r.wireframe=!1,r.wireframeLinewidth=1,r.wireframeLinecap="round",r.wireframeLinejoin="round",r.flatShading=!1,r.fog=!0,r.setValues(e),r}return W(n,[{key:"copy",value:function(e){return oe(Q(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}],[{key:"type",get:function(){return"MeshLambertMaterial"}}]),n}(xF),UU=function(e){Y(n,e);var t=$(n);function n(e){var r;return V(this,n),(r=t.call(this)).isMeshMatcapMaterial=!0,r.defines={MATCAP:""},r.color=new gF(16777215),r.matcap=null,r.map=null,r.bumpMap=null,r.bumpScale=1,r.normalMap=null,r.normalMapType=0,r.normalScale=new ML(1,1),r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.alphaMap=null,r.flatShading=!1,r.fog=!0,r.setValues(e),r}return W(n,[{key:"copy",value:function(e){return oe(Q(n.prototype),"copy",this).call(this,e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}],[{key:"type",get:function(){return"MeshMatcapMaterial"}}]),n}(xF),zU=function(e){Y(n,e);var t=$(n);function n(e){var r;return V(this,n),(r=t.call(this)).isLineDashedMaterial=!0,r.scale=1,r.dashSize=3,r.gapSize=1,r.setValues(e),r}return W(n,[{key:"copy",value:function(e){return oe(Q(n.prototype),"copy",this).call(this,e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}],[{key:"type",get:function(){return"LineDashedMaterial"}}]),n}(TU);function GU(e,t,n){return!e||!n&&e.constructor===t?e:"number"===typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)}function qU(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}var HU=function(){function e(t,n,r,i){V(this,e),this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==i?i:new n.constructor(r),this.sampleValues=n,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}return W(e,[{key:"evaluate",value:function(e){var t=this.parameterPositions,n=this._cachedIndex,r=t[n],i=t[n-1];e:{t:{var a;n:{r:if(!(e<r)){for(var o=n+2;;){if(void 0===r){if(e<i)break r;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===o)break;if(i=r,e<(r=t[++n]))break t}a=t.length;break n}if(e>=i)break e;var s=t[1];e<s&&(n=2,i=s);for(var u=n-2;;){if(void 0===i)return this._cachedIndex=0,this.copySampleValue_(0);if(n===u)break;if(r=i,e>=(i=t[--n-1]))break t}a=n,n=0}for(;n<a;){var l=n+a>>>1;e<t[l]?a=l:n=l+1}if(r=t[n],void 0===(i=t[n-1]))return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===r)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,e,r)}},{key:"getSettings_",value:function(){return this.settings||this.DefaultSettings_}},{key:"copySampleValue_",value:function(e){for(var t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r,a=0;a!==r;++a)t[a]=n[i+a];return t}},{key:"interpolate_",value:function(){throw new Error("call to abstract method")}},{key:"intervalChanged_",value:function(){}}]),e}(),VU=function(e){Y(n,e);var t=$(n);function n(e,r,i,a){var o;return V(this,n),(o=t.call(this,e,r,i,a))._weightPrev=-0,o._offsetPrev=-0,o._weightNext=-0,o._offsetNext=-0,o.DefaultSettings_={endingStart:eL,endingEnd:eL},o}return W(n,[{key:"intervalChanged_",value:function(e,t,n){var r=this.parameterPositions,i=e-2,a=e+1,o=r[i],s=r[a];if(void 0===o)switch(this.getSettings_().endingStart){case tL:i=e,o=2*t-n;break;case nL:o=t+r[i=r.length-2]-r[i+1];break;default:i=e,o=n}if(void 0===s)switch(this.getSettings_().endingEnd){case tL:a=e,s=2*n-t;break;case nL:a=1,s=n+r[1]-r[0];break;default:a=e-1,s=t}var u=.5*(n-t),l=this.valueSize;this._weightPrev=u/(t-o),this._weightNext=u/(s-n),this._offsetPrev=i*l,this._offsetNext=a*l}},{key:"interpolate_",value:function(e,t,n,r){for(var i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=e*o,u=s-o,l=this._offsetPrev,c=this._offsetNext,h=this._weightPrev,d=this._weightNext,f=(n-t)/(r-t),p=f*f,A=p*f,v=-h*A+2*h*p-h*f,m=(1+h)*A+(-1.5-2*h)*p+(-.5+h)*f+1,g=(-1-d)*A+(1.5+d)*p+.5*f,y=d*A-d*p,b=0;b!==o;++b)i[b]=v*a[l+b]+m*a[u+b]+g*a[s+b]+y*a[c+b];return i}}]),n}(HU),jU=function(e){Y(n,e);var t=$(n);function n(e,r,i,a){return V(this,n),t.call(this,e,r,i,a)}return W(n,[{key:"interpolate_",value:function(e,t,n,r){for(var i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=e*o,u=s-o,l=(n-t)/(r-t),c=1-l,h=0;h!==o;++h)i[h]=a[u+h]*c+a[s+h]*l;return i}}]),n}(HU),WU=function(e){Y(n,e);var t=$(n);function n(e,r,i,a){return V(this,n),t.call(this,e,r,i,a)}return W(n,[{key:"interpolate_",value:function(e){return this.copySampleValue_(e-1)}}]),n}(HU),XU=function(){function e(t,n,r,i){if(V(this,e),void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===n||0===n.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=GU(n,this.TimeBufferType),this.values=GU(r,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}return W(e,[{key:"InterpolantFactoryMethodDiscrete",value:function(e){return new WU(this.times,this.values,this.getValueSize(),e)}},{key:"InterpolantFactoryMethodLinear",value:function(e){return new jU(this.times,this.values,this.getValueSize(),e)}},{key:"InterpolantFactoryMethodSmooth",value:function(e){return new VU(this.times,this.values,this.getValueSize(),e)}},{key:"setInterpolation",value:function(e){var t;switch(e){case KD:t=this.InterpolantFactoryMethodDiscrete;break;case ZD:t=this.InterpolantFactoryMethodLinear;break;case $D:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){var n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=t,this}},{key:"getInterpolation",value:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return KD;case this.InterpolantFactoryMethodLinear:return ZD;case this.InterpolantFactoryMethodSmooth:return $D}}},{key:"getValueSize",value:function(){return this.values.length/this.times.length}},{key:"shift",value:function(e){if(0!==e)for(var t=this.times,n=0,r=t.length;n!==r;++n)t[n]+=e;return this}},{key:"scale",value:function(e){if(1!==e)for(var t=this.times,n=0,r=t.length;n!==r;++n)t[n]*=e;return this}},{key:"trim",value:function(e,t){for(var n=this.times,r=n.length,i=0,a=r-1;i!==r&&n[i]<e;)++i;for(;-1!==a&&n[a]>t;)--a;if(++a,0!==i||a!==r){i>=a&&(i=(a=Math.max(a,1))-1);var o=this.getValueSize();this.times=n.slice(i,a),this.values=this.values.slice(i*o,a*o)}return this}},{key:"validate",value:function(){var e=!0,t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);var n=this.times,r=this.values,i=n.length;0===i&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);for(var a=null,o=0;o!==i;o++){var s=n[o];if("number"===typeof s&&isNaN(s)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,o,s),e=!1;break}if(null!==a&&a>s){console.error("THREE.KeyframeTrack: Out of order keys.",this,o,s,a),e=!1;break}a=s}if(void 0!==r&&qU(r))for(var u=0,l=r.length;u!==l;++u){var c=r[u];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,u,c),e=!1;break}}return e}},{key:"optimize",value:function(){for(var e=this.times.slice(),t=this.values.slice(),n=this.getValueSize(),r=this.getInterpolation()===$D,i=e.length-1,a=1,o=1;o<i;++o){var s=!1,u=e[o];if(u!==e[o+1]&&(1!==o||u!==e[0]))if(r)s=!0;else for(var l=o*n,c=l-n,h=l+n,d=0;d!==n;++d){var f=t[l+d];if(f!==t[c+d]||f!==t[h+d]){s=!0;break}}if(s){if(o!==a){e[a]=e[o];for(var p=o*n,A=a*n,v=0;v!==n;++v)t[A+v]=t[p+v]}++a}}if(i>0){e[a]=e[i];for(var m=i*n,g=a*n,y=0;y!==n;++y)t[g+y]=t[m+y];++a}return a!==e.length?(this.times=e.slice(0,a),this.values=t.slice(0,a*n)):(this.times=e,this.values=t),this}},{key:"clone",value:function(){var e=this.times.slice(),t=this.values.slice(),n=new(0,this.constructor)(this.name,e,t);return n.createInterpolant=this.createInterpolant,n}}],[{key:"toJSON",value:function(e){var t,n=e.constructor;if(n.toJSON!==this.toJSON)t=n.toJSON(e);else{t={name:e.name,times:GU(e.times,Array),values:GU(e.values,Array)};var r=e.getInterpolation();r!==e.DefaultInterpolation&&(t.interpolation=r)}return t.type=e.ValueTypeName,t}}]),e}();XU.prototype.TimeBufferType=Float32Array,XU.prototype.ValueBufferType=Float32Array,XU.prototype.DefaultInterpolation=ZD;var YU=function(e){Y(n,e);var t=$(n);function n(e,r,i){return V(this,n),t.call(this,e,r,i)}return W(n)}(XU);YU.prototype.ValueTypeName="bool",YU.prototype.ValueBufferType=Array,YU.prototype.DefaultInterpolation=KD,YU.prototype.InterpolantFactoryMethodLinear=void 0,YU.prototype.InterpolantFactoryMethodSmooth=void 0;var QU=function(e){Y(n,e);var t=$(n);function n(){return V(this,n),t.apply(this,arguments)}return W(n)}(XU);QU.prototype.ValueTypeName="color";var JU=function(e){Y(n,e);var t=$(n);function n(){return V(this,n),t.apply(this,arguments)}return W(n)}(XU);JU.prototype.ValueTypeName="number";var KU=function(e){Y(n,e);var t=$(n);function n(e,r,i,a){return V(this,n),t.call(this,e,r,i,a)}return W(n,[{key:"interpolate_",value:function(e,t,n,r){for(var i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=(n-t)/(r-t),u=e*o,l=u+o;u!==l;u+=4)QL.slerpFlat(i,0,a,u-o,a,u,s);return i}}]),n}(HU),ZU=function(e){Y(n,e);var t=$(n);function n(){return V(this,n),t.apply(this,arguments)}return W(n,[{key:"InterpolantFactoryMethodLinear",value:function(e){return new KU(this.times,this.values,this.getValueSize(),e)}}]),n}(XU);ZU.prototype.ValueTypeName="quaternion",ZU.prototype.InterpolantFactoryMethodSmooth=void 0;var $U=function(e){Y(n,e);var t=$(n);function n(e,r,i){return V(this,n),t.call(this,e,r,i)}return W(n)}(XU);$U.prototype.ValueTypeName="string",$U.prototype.ValueBufferType=Array,$U.prototype.DefaultInterpolation=KD,$U.prototype.InterpolantFactoryMethodLinear=void 0,$U.prototype.InterpolantFactoryMethodSmooth=void 0;var ez=function(e){Y(n,e);var t=$(n);function n(){return V(this,n),t.apply(this,arguments)}return W(n)}(XU);ez.prototype.ValueTypeName="vector";var tz=W((function e(t,n,r){V(this,e);var i=this,a=!1,o=0,s=0,u=void 0,l=[];this.onStart=void 0,this.onLoad=t,this.onProgress=n,this.onError=r,this.itemStart=function(e){s++,!1===a&&void 0!==i.onStart&&i.onStart(e,o,s),a=!0},this.itemEnd=function(e){o++,void 0!==i.onProgress&&i.onProgress(e,o,s),o===s&&(a=!1,void 0!==i.onLoad&&i.onLoad())},this.itemError=function(e){void 0!==i.onError&&i.onError(e)},this.resolveURL=function(e){return u?u(e):e},this.setURLModifier=function(e){return u=e,this},this.addHandler=function(e,t){return l.push(e,t),this},this.removeHandler=function(e){var t=l.indexOf(e);return-1!==t&&l.splice(t,2),this},this.getHandler=function(e){for(var t=0,n=l.length;t<n;t+=2){var r=l[t],i=l[t+1];if(r.global&&(r.lastIndex=0),r.test(e))return i}return null}})),nz=new tz,rz=function(){function e(t){V(this,e),this.manager=void 0!==t?t:nz,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}return W(e,[{key:"load",value:function(){}},{key:"loadAsync",value:function(e,t){var n=this;return new Promise((function(r,i){n.load(e,r,t,i)}))}},{key:"parse",value:function(){}},{key:"setCrossOrigin",value:function(e){return this.crossOrigin=e,this}},{key:"setWithCredentials",value:function(e){return this.withCredentials=e,this}},{key:"setPath",value:function(e){return this.path=e,this}},{key:"setResourcePath",value:function(e){return this.resourcePath=e,this}},{key:"setRequestHeader",value:function(e){return this.requestHeader=e,this}}]),e}();rz.DEFAULT_MATERIAL_NAME="__DEFAULT";Error;var iz=function(e){Y(n,e);var t=$(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return V(this,n),(r=t.call(this)).isLight=!0,r.type="Light",r.color=new gF(e),r.intensity=i,r}return W(n,[{key:"dispose",value:function(){}},{key:"copy",value:function(e,t){return oe(Q(n.prototype),"copy",this).call(this,e,t),this.color.copy(e.color),this.intensity=e.intensity,this}},{key:"toJSON",value:function(e){var t=oe(Q(n.prototype),"toJSON",this).call(this,e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),void 0!==this.target&&(t.object.target=this.target.uuid),t}}]),n}($O),az=function(e){Y(n,e);var t=$(n);function n(e,r,i){var a;return V(this,n),(a=t.call(this,e,i)).isHemisphereLight=!0,a.type="HemisphereLight",a.position.copy($O.DEFAULT_UP),a.updateMatrix(),a.groundColor=new gF(r),a}return W(n,[{key:"copy",value:function(e,t){return oe(Q(n.prototype),"copy",this).call(this,e,t),this.groundColor.copy(e.groundColor),this}}]),n}(iz),oz=new kO,sz=new JL,uz=new JL,lz=function(){function e(t){V(this,e),this.camera=t,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new ML(512,512),this.map=null,this.mapPass=null,this.matrix=new kO,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new kU,this._frameExtents=new ML(1,1),this._viewportCount=1,this._viewports=[new jL(0,0,1,1)]}return W(e,[{key:"getViewportCount",value:function(){return this._viewportCount}},{key:"getFrustum",value:function(){return this._frustum}},{key:"updateMatrices",value:function(e){var t=this.camera,n=this.matrix;sz.setFromMatrixPosition(e.matrixWorld),t.position.copy(sz),uz.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(uz),t.updateMatrixWorld(),oz.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(oz),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(oz)}},{key:"getViewport",value:function(e){return this._viewports[e]}},{key:"getFrameExtents",value:function(){return this._frameExtents}},{key:"dispose",value:function(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}},{key:"copy",value:function(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"toJSON",value:function(){var e={};return 1!==this.intensity&&(e.intensity=this.intensity),0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}]),e}(),cz=function(e){Y(n,e);var t=$(n);function n(){var e;return V(this,n),(e=t.call(this,new uU(50,1,.5,500))).isSpotLightShadow=!0,e.focus=1,e}return W(n,[{key:"updateMatrices",value:function(e){var t=this.camera,r=2*mL*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,a=e.distance||t.far;r===t.fov&&i===t.aspect&&a===t.far||(t.fov=r,t.aspect=i,t.far=a,t.updateProjectionMatrix()),oe(Q(n.prototype),"updateMatrices",this).call(this,e)}},{key:"copy",value:function(e){return oe(Q(n.prototype),"copy",this).call(this,e),this.focus=e.focus,this}}]),n}(lz),hz=function(e){Y(n,e);var t=$(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Math.PI/3,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2;return V(this,n),(i=t.call(this,e,r)).isSpotLight=!0,i.type="SpotLight",i.position.copy($O.DEFAULT_UP),i.updateMatrix(),i.target=new $O,i.distance=a,i.angle=o,i.penumbra=s,i.decay=u,i.map=null,i.shadow=new cz,i}return W(n,[{key:"power",get:function(){return this.intensity*Math.PI},set:function(e){this.intensity=e/Math.PI}},{key:"dispose",value:function(){this.shadow.dispose()}},{key:"copy",value:function(e,t){return oe(Q(n.prototype),"copy",this).call(this,e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}]),n}(iz),dz=new kO,fz=new JL,pz=new JL,Az=function(e){Y(n,e);var t=$(n);function n(){var e;return V(this,n),(e=t.call(this,new uU(90,1,.5,500))).isPointLightShadow=!0,e._frameExtents=new ML(4,2),e._viewportCount=6,e._viewports=[new jL(2,1,1,1),new jL(0,1,1,1),new jL(3,1,1,1),new jL(1,1,1,1),new jL(3,0,1,1),new jL(1,0,1,1)],e._cubeDirections=[new JL(1,0,0),new JL(-1,0,0),new JL(0,0,1),new JL(0,0,-1),new JL(0,1,0),new JL(0,-1,0)],e._cubeUps=[new JL(0,1,0),new JL(0,1,0),new JL(0,1,0),new JL(0,1,0),new JL(0,0,1),new JL(0,0,-1)],e}return W(n,[{key:"updateMatrices",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.camera,r=this.matrix,i=e.distance||n.far;i!==n.far&&(n.far=i,n.updateProjectionMatrix()),fz.setFromMatrixPosition(e.matrixWorld),n.position.copy(fz),pz.copy(n.position),pz.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(pz),n.updateMatrixWorld(),r.makeTranslation(-fz.x,-fz.y,-fz.z),dz.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(dz)}}]),n}(lz),vz=function(e){Y(n,e);var t=$(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2;return V(this,n),(i=t.call(this,e,r)).isPointLight=!0,i.type="PointLight",i.distance=a,i.decay=o,i.shadow=new Az,i}return W(n,[{key:"power",get:function(){return 4*this.intensity*Math.PI},set:function(e){this.intensity=e/(4*Math.PI)}},{key:"dispose",value:function(){this.shadow.dispose()}},{key:"copy",value:function(e,t){return oe(Q(n.prototype),"copy",this).call(this,e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}]),n}(iz),mz=function(e){Y(n,e);var t=$(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.1,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2e3;return V(this,n),(e=t.call(this)).isOrthographicCamera=!0,e.type="OrthographicCamera",e.zoom=1,e.view=null,e.left=r,e.right=i,e.top=a,e.bottom=o,e.near=s,e.far=u,e.updateProjectionMatrix(),e}return W(n,[{key:"copy",value:function(e,t){return oe(Q(n.prototype),"copy",this).call(this,e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}},{key:"setViewOffset",value:function(e,t,n,r,i,a){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=a,this.updateProjectionMatrix()}},{key:"clearViewOffset",value:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}},{key:"updateProjectionMatrix",value:function(){var e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2,i=n-e,a=n+e,o=r+t,s=r-t;if(null!==this.view&&this.view.enabled){var u=(this.right-this.left)/this.view.fullWidth/this.zoom,l=(this.top-this.bottom)/this.view.fullHeight/this.zoom;a=(i+=u*this.view.offsetX)+u*this.view.width,s=(o-=l*this.view.offsetY)-l*this.view.height}this.projectionMatrix.makeOrthographic(i,a,o,s,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}},{key:"toJSON",value:function(e){var t=oe(Q(n.prototype),"toJSON",this).call(this,e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}]),n}(iU),gz=function(e){Y(n,e);var t=$(n);function n(){var e;return V(this,n),(e=t.call(this,new mz(-5,5,5,-5,.5,500))).isDirectionalLightShadow=!0,e}return W(n)}(lz),yz=function(e){Y(n,e);var t=$(n);function n(e,r){var i;return V(this,n),(i=t.call(this,e,r)).isDirectionalLight=!0,i.type="DirectionalLight",i.position.copy($O.DEFAULT_UP),i.updateMatrix(),i.target=new $O,i.shadow=new gz,i}return W(n,[{key:"dispose",value:function(){this.shadow.dispose()}},{key:"copy",value:function(e){return oe(Q(n.prototype),"copy",this).call(this,e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}]),n}(iz),bz=function(e){Y(n,e);var t=$(n);function n(e,r){var i;return V(this,n),(i=t.call(this,e,r)).isAmbientLight=!0,i.type="AmbientLight",i}return W(n)}(iz),xz=function(e){Y(n,e);var t=$(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10;return V(this,n),(i=t.call(this,e,r)).isRectAreaLight=!0,i.type="RectAreaLight",i.width=a,i.height=o,i}return W(n,[{key:"power",get:function(){return this.intensity*this.width*this.height*Math.PI},set:function(e){this.intensity=e/(this.width*this.height*Math.PI)}},{key:"copy",value:function(e){return oe(Q(n.prototype),"copy",this).call(this,e),this.width=e.width,this.height=e.height,this}},{key:"toJSON",value:function(e){var t=oe(Q(n.prototype),"toJSON",this).call(this,e);return t.object.width=this.width,t.object.height=this.height,t}}]),n}(iz),_z=function(){function e(){V(this,e),this.isSphericalHarmonics3=!0,this.coefficients=[];for(var t=0;t<9;t++)this.coefficients.push(new JL)}return W(e,[{key:"set",value:function(e){for(var t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}},{key:"zero",value:function(){for(var e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}},{key:"getAt",value:function(e,t){var n=e.x,r=e.y,i=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.282095),t.addScaledVector(a[1],.488603*r),t.addScaledVector(a[2],.488603*i),t.addScaledVector(a[3],.488603*n),t.addScaledVector(a[4],n*r*1.092548),t.addScaledVector(a[5],r*i*1.092548),t.addScaledVector(a[6],.315392*(3*i*i-1)),t.addScaledVector(a[7],n*i*1.092548),t.addScaledVector(a[8],.546274*(n*n-r*r)),t}},{key:"getIrradianceAt",value:function(e,t){var n=e.x,r=e.y,i=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.886227),t.addScaledVector(a[1],1.023328*r),t.addScaledVector(a[2],1.023328*i),t.addScaledVector(a[3],1.023328*n),t.addScaledVector(a[4],.858086*n*r),t.addScaledVector(a[5],.858086*r*i),t.addScaledVector(a[6],.743125*i*i-.247708),t.addScaledVector(a[7],.858086*n*i),t.addScaledVector(a[8],.429043*(n*n-r*r)),t}},{key:"add",value:function(e){for(var t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}},{key:"addScaledSH",value:function(e,t){for(var n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}},{key:"scale",value:function(e){for(var t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}},{key:"lerp",value:function(e,t){for(var n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}},{key:"equals",value:function(e){for(var t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}},{key:"copy",value:function(e){return this.set(e.coefficients)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"fromArray",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.coefficients,r=0;r<9;r++)n[r].fromArray(e,t+3*r);return this}},{key:"toArray",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.coefficients,r=0;r<9;r++)n[r].toArray(e,t+3*r);return e}}],[{key:"getBasisAt",value:function(e,t){var n=e.x,r=e.y,i=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*i,t[3]=.488603*n,t[4]=1.092548*n*r,t[5]=1.092548*r*i,t[6]=.315392*(3*i*i-1),t[7]=1.092548*n*i,t[8]=.546274*(n*n-r*r)}}]),e}(),wz=function(e){Y(n,e);var t=$(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new _z,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return V(this,n),(e=t.call(this,void 0,i)).isLightProbe=!0,e.sh=r,e}return W(n,[{key:"copy",value:function(e){return oe(Q(n.prototype),"copy",this).call(this,e),this.sh.copy(e.sh),this}},{key:"fromJSON",value:function(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}},{key:"toJSON",value:function(e){var t=oe(Q(n.prototype),"toJSON",this).call(this,e);return t.object.sh=this.sh.toArray(),t}}]),n}(iz);var Sz="\\[\\]\\.:\\/",Mz=new RegExp("["+Sz+"]","g"),kz="[^"+Sz+"]",Tz="[^"+Sz.replace("\\.","")+"]",Ez=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",kz)+/(WCOD+)?/.source.replace("WCOD",Tz)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",kz)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",kz)+"$"),Cz=["material","materials","bones","map"],Rz=function(){function e(t,n,r){V(this,e);var i=r||Bz.parseTrackName(n);this._targetGroup=t,this._bindings=t.subscribe_(n,i)}return W(e,[{key:"getValue",value:function(e,t){this.bind();var n=this._targetGroup.nCachedObjects_,r=this._bindings[n];void 0!==r&&r.getValue(e,t)}},{key:"setValue",value:function(e,t){for(var n=this._bindings,r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(e,t)}},{key:"bind",value:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}},{key:"unbind",value:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}]),e}(),Bz=function(){function e(t,n,r){V(this,e),this.path=n,this.parsedPath=r||e.parseTrackName(n),this.node=e.findNode(t,this.parsedPath.nodeName),this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}return W(e,[{key:"_getValue_unavailable",value:function(){}},{key:"_setValue_unavailable",value:function(){}},{key:"_getValue_direct",value:function(e,t){e[t]=this.targetObject[this.propertyName]}},{key:"_getValue_array",value:function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)e[t++]=n[r]}},{key:"_getValue_arrayElement",value:function(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}},{key:"_getValue_toArray",value:function(e,t){this.resolvedProperty.toArray(e,t)}},{key:"_setValue_direct",value:function(e,t){this.targetObject[this.propertyName]=e[t]}},{key:"_setValue_direct_setNeedsUpdate",value:function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}},{key:"_setValue_direct_setMatrixWorldNeedsUpdate",value:function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_array",value:function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++]}},{key:"_setValue_array_setNeedsUpdate",value:function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.needsUpdate=!0}},{key:"_setValue_array_setMatrixWorldNeedsUpdate",value:function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_arrayElement",value:function(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}},{key:"_setValue_arrayElement_setNeedsUpdate",value:function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}},{key:"_setValue_arrayElement_setMatrixWorldNeedsUpdate",value:function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_fromArray",value:function(e,t){this.resolvedProperty.fromArray(e,t)}},{key:"_setValue_fromArray_setNeedsUpdate",value:function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}},{key:"_setValue_fromArray_setMatrixWorldNeedsUpdate",value:function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_getValue_unbound",value:function(e,t){this.bind(),this.getValue(e,t)}},{key:"_setValue_unbound",value:function(e,t){this.bind(),this.setValue(e,t)}},{key:"bind",value:function(){var t=this.node,n=this.parsedPath,r=n.objectName,i=n.propertyName,a=n.propertyIndex;if(t||(t=e.findNode(this.rootNode,n.nodeName),this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,t){if(r){var o=n.objectIndex;switch(r){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(var s=0;s<t.length;s++)if(t[s].name===o){o=s;break}break;case"map":if("map"in t){t=t.map;break}if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);t=t.material.map;break;default:if(void 0===t[r])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[r]}if(void 0!==o){if(void 0===t[o])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[o]}}var u=t[i];if(void 0!==u){var l=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?l=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(l=this.Versioning.MatrixWorldNeedsUpdate);var c=this.BindingType.Direct;if(void 0!==a){if("morphTargetInfluences"===i){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[a]&&(a=t.morphTargetDictionary[a])}c=this.BindingType.ArrayElement,this.resolvedProperty=u,this.propertyIndex=a}else void 0!==u.fromArray&&void 0!==u.toArray?(c=this.BindingType.HasFromToArray,this.resolvedProperty=u):Array.isArray(u)?(c=this.BindingType.EntireArray,this.resolvedProperty=u):this.propertyName=i;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][l]}else{var h=n.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+h+"."+i+" but it wasn't found.",t)}}else console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".")}},{key:"unbind",value:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}],[{key:"create",value:function(t,n,r){return t&&t.isAnimationObjectGroup?new e.Composite(t,n,r):new e(t,n,r)}},{key:"sanitizeNodeName",value:function(e){return e.replace(/\s/g,"_").replace(Mz,"")}},{key:"parseTrackName",value:function(e){var t=Ez.exec(e);if(null===t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);var n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){var i=n.nodeName.substring(r+1);-1!==Cz.indexOf(i)&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=i)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}},{key:"findNode",value:function(e,t){if(void 0===t||""===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){var n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){var r=function e(n){for(var r=0;r<n.length;r++){var i=n[r];if(i.name===t||i.uuid===t)return i;var a=e(i.children);if(a)return a}return null}(e.children);if(r)return r}return null}}]),e}();Bz.Composite=Rz,Bz.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Bz.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},Bz.prototype.GetterByBindingType=[Bz.prototype._getValue_direct,Bz.prototype._getValue_array,Bz.prototype._getValue_arrayElement,Bz.prototype._getValue_toArray],Bz.prototype.SetterByBindingTypeAndVersioning=[[Bz.prototype._setValue_direct,Bz.prototype._setValue_direct_setNeedsUpdate,Bz.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Bz.prototype._setValue_array,Bz.prototype._setValue_array_setNeedsUpdate,Bz.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Bz.prototype._setValue_arrayElement,Bz.prototype._setValue_arrayElement_setNeedsUpdate,Bz.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Bz.prototype._setValue_fromArray,Bz.prototype._setValue_fromArray_setNeedsUpdate,Bz.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];new Float32Array(1);var Pz=function(e){Y(n,e);var t=$(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return V(this,n),(i=t.call(this,e,r)).isInstancedInterleavedBuffer=!0,i.meshPerAttribute=a,i}return W(n,[{key:"copy",value:function(e){return oe(Q(n.prototype),"copy",this).call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}},{key:"clone",value:function(e){var t=oe(Q(n.prototype),"clone",this).call(this,e);return t.meshPerAttribute=this.meshPerAttribute,t}},{key:"toJSON",value:function(e){var t=oe(Q(n.prototype),"toJSON",this).call(this,e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}]),n}(pU);var Nz=["alphaMap","alphaTest","anisotropy","anisotropyMap","anisotropyRotation","aoMap","attenuationColor","attenuationDistance","bumpMap","clearcoat","clearcoatMap","clearcoatNormalMap","clearcoatNormalScale","clearcoatRoughness","color","dispersion","displacementMap","emissive","emissiveMap","envMap","gradientMap","ior","iridescence","iridescenceIOR","iridescenceMap","iridescenceThicknessMap","lightMap","map","matcap","metalness","metalnessMap","normalMap","normalScale","opacity","roughness","roughnessMap","sheen","sheenColor","sheenColorMap","sheenRoughnessMap","shininess","specular","specularColor","specularColorMap","specularIntensity","specularIntensityMap","specularMap","thickness","transmission","transmissionMap"],Iz=function(){function e(t){V(this,e),this.renderObjects=new WeakMap,this.hasNode=this.containsNode(t),this.hasAnimation=!0===t.object.isSkinnedMesh,this.refreshUniforms=Nz,this.renderId=0}return W(e,[{key:"firstInitialization",value:function(e){return!1===this.renderObjects.has(e)&&(this.getRenderObjectData(e),!0)}},{key:"getRenderObjectData",value:function(e){var t=this.renderObjects.get(e);if(void 0===t){var n=e.geometry,r=e.material;if(t={material:this.getMaterialData(r),geometry:{attributes:this.getAttributesData(n.attributes),indexVersion:n.index?n.index.version:null,drawRange:{start:n.drawRange.start,count:n.drawRange.count}},worldMatrix:e.object.matrixWorld.clone()},e.object.center&&(t.center=e.object.center.clone()),e.object.morphTargetInfluences&&(t.morphTargetInfluences=e.object.morphTargetInfluences.slice()),null!==e.bundle&&(t.version=e.bundle.version),t.material.transmission>0){var i=e.context,a=i.width,o=i.height;t.bufferWidth=a,t.bufferHeight=o}this.renderObjects.set(e,t)}return t}},{key:"getAttributesData",value:function(e){var t={};for(var n in e){var r=e[n];t[n]={version:r.version}}return t}},{key:"containsNode",value:function(e){var t=e.material;for(var n in t)if(t[n]&&t[n].isNode)return!0;return null!==e.renderer.nodes.modelViewMatrix||null!==e.renderer.nodes.modelNormalViewMatrix}},{key:"getMaterialData",value:function(e){var t,n={},r=ee(this.refreshUniforms);try{for(r.s();!(t=r.n()).done;){var i=t.value,a=e[i];null!==a&&void 0!==a&&("object"===typeof a&&void 0!==a.clone?!0===a.isTexture?n[i]={id:a.id,version:a.version}:n[i]=a.clone():n[i]=a)}}catch(o){r.e(o)}finally{r.f()}return n}},{key:"equals",value:function(e){var t=e.object,n=e.material,r=e.geometry,i=this.getRenderObjectData(e);if(!0!==i.worldMatrix.equals(t.matrixWorld))return i.worldMatrix.copy(t.matrixWorld),!1;var a=i.material;for(var o in a){var s=a[o],u=n[o];if(void 0!==s.equals){if(!1===s.equals(u))return s.copy(u),!1}else if(!0===u.isTexture){if(s.id!==u.id||s.version!==u.version)return s.id=u.id,s.version=u.version,!1}else if(s!==u)return a[o]=u,!1}if(a.transmission>0){var l=e.context,c=l.width,h=l.height;if(i.bufferWidth!==c||i.bufferHeight!==h)return i.bufferWidth=c,i.bufferHeight=h,!1}var d=i.geometry,f=r.attributes,p=d.attributes,A=Object.keys(p),v=Object.keys(f);if(A.length!==v.length)return i.geometry.attributes=this.getAttributesData(f),!1;for(var m=0,g=A;m<g.length;m++){var y=g[m],b=p[y],x=f[y];if(void 0===x)return delete p[y],!1;if(b.version!==x.version)return b.version=x.version,!1}var _=r.index,w=d.indexVersion,S=_?_.version:null;if(w!==S)return d.indexVersion=S,!1;if(d.drawRange.start!==r.drawRange.start||d.drawRange.count!==r.drawRange.count)return d.drawRange.start=r.drawRange.start,d.drawRange.count=r.drawRange.count,!1;if(i.morphTargetInfluences){for(var M=!1,k=0;k<i.morphTargetInfluences.length;k++)i.morphTargetInfluences[k]!==t.morphTargetInfluences[k]&&(M=!0);if(M)return!0}return i.center&&!1===i.center.equals(t.center)?(i.center.copy(t.center),!0):(null!==e.bundle&&(i.version=e.bundle.version),!0)}},{key:"needsRefresh",value:function(e,t){if(this.hasNode||this.hasAnimation||this.firstInitialization(e))return!0;var n=t.renderId;if(this.renderId!==n)return this.renderId=n,!0;var r=!0===e.object.static,i=null!==e.bundle&&!0===e.bundle.static&&this.getRenderObjectData(e).version===e.bundle.version;return!r&&!i&&!0!==this.equals(e)}}]),e}();function Dz(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=3735928559^t,r=1103547991^t;if(e instanceof Array)for(var i,a=0;a<e.length;a++)i=e[a],n=Math.imul(n^i,2654435761),r=Math.imul(r^i,1597334677);else for(var o,s=0;s<e.length;s++)o=e.charCodeAt(s),n=Math.imul(n^o,2654435761),r=Math.imul(r^o,1597334677);return n=Math.imul(n^n>>>16,2246822507),n^=Math.imul(r^r>>>13,3266489909),r=Math.imul(r^r>>>16,2246822507),4294967296*(2097151&(r^=Math.imul(n^n>>>13,3266489909)))+(n>>>0)}var Lz=function(e){return Dz(e)},Oz=function(e){return Dz(e)},Fz=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Dz(t)};function Uz(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=[];!0===e.isNode&&(n.push(e.id),e=e.getSelf());var r,i=ee(zz(e));try{for(i.s();!(r=i.n()).done;){var a=r.value,o=a.property,s=a.childNode;n.push(n,Dz(o.slice(0,-4)),s.getCacheKey(t))}}catch(u){i.e(u)}finally{i.f()}return Dz(n)}function zz(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return se().mark((function n(){var r,i,a,o,s,u;return se().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:n.t0=se().keys(e);case 1:if((n.t1=n.t0()).done){n.next=35;break}if(!0!==(r=n.t1.value).startsWith("_")){n.next=5;break}return n.abrupt("continue",1);case 5:if(i=e[r],!0!==Array.isArray(i)){n.next=18;break}a=0;case 8:if(!(a<i.length)){n.next=16;break}if(!(o=i[a])||!(!0===o.isNode||t&&"function"===typeof o.toJSON)){n.next=13;break}return n.next=13,{property:r,index:a,childNode:o};case 13:a++,n.next=8;break;case 16:n.next=33;break;case 18:if(!i||!0!==i.isNode){n.next=23;break}return n.next=21,{property:r,childNode:i};case 21:n.next=33;break;case 23:if("object"!==typeof i){n.next=33;break}n.t2=se().keys(i);case 25:if((n.t3=n.t2()).done){n.next=33;break}if(s=n.t3.value,!(u=i[s])||!(!0===u.isNode||t&&"function"===typeof u.toJSON)){n.next=31;break}return n.next=31,{property:r,index:s,childNode:u};case 31:n.next=25;break;case 33:n.next=1;break;case 35:case"end":return n.stop()}}),n)}))()}function Gz(e){if(void 0===e||null===e)return null;var t=typeof e;return!0===e.isNode?"node":"number"===t?"float":"boolean"===t?"bool":"string"===t?"string":"function"===t?"shader":!0===e.isVector2?"vec2":!0===e.isVector3?"vec3":!0===e.isVector4?"vec4":!0===e.isMatrix3?"mat3":!0===e.isMatrix4?"mat4":!0===e.isColor?"color":e instanceof ArrayBuffer?"ArrayBuffer":null}function qz(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=e?e.slice(-4):void 0;return 1===n.length&&("vec2"===i?n=[n[0],n[0]]:"vec3"===i?n=[n[0],n[0],n[0]]:"vec4"===i&&(n=[n[0],n[0],n[0],n[0]])),"color"===e?te(gF,q(n)):"vec2"===i?te(ML,q(n)):"vec3"===i?te(JL,q(n)):"vec4"===i?te(jL,q(n)):"mat3"===i?te(kL,q(n)):"mat4"===i?te(kO,q(n)):"bool"===e?n[0]||!1:"float"===e||"int"===e||"uint"===e?n[0]||0:"string"===e?n[0]||"":"ArrayBuffer"===e?Vz(n[0]):null}function Hz(e){for(var t="",n=new Uint8Array(e),r=0;r<n.length;r++)t+=String.fromCharCode(n[r]);return btoa(t)}function Vz(e){return Uint8Array.from(atob(e),(function(e){return e.charCodeAt(0)})).buffer}var jz="vertex",Wz="none",Xz="frame",Yz="render",Qz="object",Jz=["setup","analyze","generate"],Kz=[].concat(["fragment","vertex"],["compute"]),Zz=["x","y","z","w"],$z=0,eG=function(e){Y(n,e);var t=$(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return V(this,n),(e=t.call(this)).nodeType=r,e.updateType=Wz,e.updateBeforeType=Wz,e.updateAfterType=Wz,e.uuid=SL.generateUUID(),e.version=0,e._cacheKey=null,e._cacheKeyVersion=0,e.global=!1,e.isNode=!0,Object.defineProperty(K(e),"id",{value:$z++}),e}return W(n,[{key:"needsUpdate",set:function(e){!0===e&&this.version++}},{key:"type",get:function(){return this.constructor.type}},{key:"onUpdate",value:function(e,t){return this.updateType=t,this.update=e.bind(this.getSelf()),this}},{key:"onFrameUpdate",value:function(e){return this.onUpdate(e,Xz)}},{key:"onRenderUpdate",value:function(e){return this.onUpdate(e,Yz)}},{key:"onObjectUpdate",value:function(e){return this.onUpdate(e,Qz)}},{key:"onReference",value:function(e){return this.updateReference=e.bind(this.getSelf()),this}},{key:"getSelf",value:function(){return this.self||this}},{key:"updateReference",value:function(){return this}},{key:"isGlobal",value:function(){return this.global}},{key:"getChildren",value:se().mark((function e(){var t,n,r;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=ee(zz(this)),e.prev=1,t.s();case 3:if((n=t.n()).done){e.next=9;break}return r=n.value.childNode,e.next=7,r;case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),t.e(e.t0);case 14:return e.prev=14,t.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,this,[[1,11,14,17]])}))},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}},{key:"traverse",value:function(e){e(this);var t,n=ee(this.getChildren());try{for(n.s();!(t=n.n()).done;){t.value.traverse(e)}}catch(r){n.e(r)}finally{n.f()}}},{key:"getCacheKey",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return!0!==(e=e||this.version!==this._cacheKeyVersion)&&null!==this._cacheKey||(this._cacheKey=Uz(this,e),this._cacheKeyVersion=this.version),this._cacheKey}},{key:"getScope",value:function(){return this}},{key:"getHash",value:function(){return this.uuid}},{key:"getUpdateType",value:function(){return this.updateType}},{key:"getUpdateBeforeType",value:function(){return this.updateBeforeType}},{key:"getUpdateAfterType",value:function(){return this.updateAfterType}},{key:"getElementType",value:function(e){var t=this.getNodeType(e);return e.getElementType(t)}},{key:"getNodeType",value:function(e){var t=e.getNodeProperties(this);return t.outputNode?t.outputNode.getNodeType(e):this.nodeType}},{key:"getShared",value:function(e){var t=this.getHash(e);return e.getNodeFromHash(t)||this}},{key:"setup",value:function(e){var t,n=e.getNodeProperties(this),r=0,i=ee(this.getChildren());try{for(i.s();!(t=i.n()).done;){var a=t.value;n["node"+r++]=a}}catch(o){i.e(o)}finally{i.f()}return null}},{key:"analyze",value:function(e){if(1===e.increaseUsage(this))for(var t=e.getNodeProperties(this),n=0,r=Object.values(t);n<r.length;n++){var i=r[n];i&&!0===i.isNode&&i.build(e)}}},{key:"generate",value:function(e,t){var n=e.getNodeProperties(this).outputNode;if(n&&!0===n.isNode)return n.build(e,t)}},{key:"updateBefore",value:function(){console.warn("Abstract function.")}},{key:"updateAfter",value:function(){console.warn("Abstract function.")}},{key:"update",value:function(){console.warn("Abstract function.")}},{key:"build",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this.getShared(e);if(this!==n)return n.build(e,t);e.addNode(this),e.addChain(this);var r=null,i=e.getBuildStage();if("setup"===i){this.updateReference(e);var a=e.getNodeProperties(this);if(!0!==a.initialized){e.stack.nodes.length;a.initialized=!0,a.outputNode=this.setup(e),null!==a.outputNode&&e.stack.nodes.length;for(var o=0,s=Object.values(a);o<s.length;o++){var u=s[o];u&&!0===u.isNode&&u.build(e)}}}else if("analyze"===i)this.analyze(e);else if("generate"===i){var l=1===this.generate.length;if(l){var c=this.getNodeType(e),h=e.getDataFromNode(this);void 0===(r=h.snippet)?(r=this.generate(e)||"",h.snippet=r):void 0!==h.flowCodes&&void 0!==e.context.nodeBlock&&e.addFlowCodeHierarchy(this,e.context.nodeBlock),r=e.format(r,c,t)}else r=this.generate(e,t)||""}return e.removeChain(this),e.addSequentialNode(this),r}},{key:"getSerializeChildren",value:function(){return zz(this)}},{key:"serialize",value:function(e){var t,n={},r=ee(this.getSerializeChildren());try{for(r.s();!(t=r.n()).done;){var i=t.value,a=i.property,o=i.index,s=i.childNode;void 0!==o?(void 0===n[a]&&(n[a]=Number.isInteger(o)?[]:{}),n[a][o]=s.toJSON(e.meta).uuid):n[a]=s.toJSON(e.meta).uuid}}catch(u){r.e(u)}finally{r.f()}Object.keys(n).length>0&&(e.inputNodes=n)}},{key:"deserialize",value:function(e){if(void 0!==e.inputNodes){var t=e.meta.nodes;for(var n in e.inputNodes)if(Array.isArray(e.inputNodes[n])){var r,i=[],a=ee(e.inputNodes[n]);try{for(a.s();!(r=a.n()).done;){var o=r.value;i.push(t[o])}}catch(h){a.e(h)}finally{a.f()}this[n]=i}else if("object"===typeof e.inputNodes[n]){var s={};for(var u in e.inputNodes[n]){var l=e.inputNodes[n][u];s[u]=t[l]}this[n]=s}else{var c=e.inputNodes[n];this[n]=t[c]}}}},{key:"toJSON",value:function(e){var t=this.uuid,n=this.type,r=void 0===e||"string"===typeof e;r&&(e={textures:{},images:{},nodes:{}});var i=e.nodes[t];function a(e){var t=[];for(var n in e){var r=e[n];delete r.metadata,t.push(r)}return t}if(void 0===i&&(i={uuid:t,type:n,meta:e,metadata:{version:4.6,type:"Node",generator:"Node.toJSON"}},!0!==r&&(e.nodes[i.uuid]=i),this.serialize(i),delete i.meta),r){var o=a(e.textures),s=a(e.images),u=a(e.nodes);o.length>0&&(i.textures=o),s.length>0&&(i.images=s),u.length>0&&(i.nodes=u)}return i}}],[{key:"type",get:function(){return"Node"}}]),n}(fL),tG=function(e){Y(n,e);var t=$(n);function n(e,r){var i;return V(this,n),(i=t.call(this)).node=e,i.indexNode=r,i.isArrayElementNode=!0,i}return W(n,[{key:"getNodeType",value:function(e){return this.node.getElementType(e)}},{key:"generate",value:function(e){var t=this.node.build(e),n=this.indexNode.build(e,"uint");return"".concat(t,"[ ").concat(n," ]")}}],[{key:"type",get:function(){return"ArrayElementNode"}}]),n}(eG),nG=function(e){Y(n,e);var t=$(n);function n(e,r){var i;return V(this,n),(i=t.call(this)).node=e,i.convertTo=r,i}return W(n,[{key:"getNodeType",value:function(e){var t,n=this.node.getNodeType(e),r=null,i=ee(this.convertTo.split("|"));try{for(i.s();!(t=i.n()).done;){var a=t.value;null!==r&&e.getTypeLength(n)!==e.getTypeLength(a)||(r=a)}}catch(o){i.e(o)}finally{i.f()}return r}},{key:"serialize",value:function(e){oe(Q(n.prototype),"serialize",this).call(this,e),e.convertTo=this.convertTo}},{key:"deserialize",value:function(e){oe(Q(n.prototype),"deserialize",this).call(this,e),this.convertTo=e.convertTo}},{key:"generate",value:function(e,t){var n=this.node,r=this.getNodeType(e),i=n.build(e,r);return e.format(i,r,t)}}],[{key:"type",get:function(){return"ConvertNode"}}]),n}(eG),rG=function(e){Y(n,e);var t=$(n);function n(e){var r;return V(this,n),(r=t.call(this,e)).isTempNode=!0,r}return W(n,[{key:"hasDependencies",value:function(e){return e.getDataFromNode(this).usageCount>1}},{key:"build",value:function(e,t){if("generate"===e.getBuildStage()){var r=e.getVectorType(this.getNodeType(e,t)),i=e.getDataFromNode(this);if(void 0!==i.propertyName)return e.format(i.propertyName,r,t);if("void"!==r&&"void"!==t&&this.hasDependencies(e)){var a=oe(Q(n.prototype),"build",this).call(this,e,r),o=e.getVarFromNode(this,null,r),s=e.getPropertyName(o);return e.addLineFlowCode("".concat(s," = ").concat(a),this),i.snippet=a,i.propertyName=s,e.format(i.propertyName,r,t)}}return oe(Q(n.prototype),"build",this).call(this,e,t)}}],[{key:"type",get:function(){return"TempNode"}}]),n}(eG),iG=function(e){Y(n,e);var t=$(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return V(this,n),(e=t.call(this,i)).nodes=r,e}return W(n,[{key:"getNodeType",value:function(e){return null!==this.nodeType?e.getVectorType(this.nodeType):e.getTypeFromLength(this.nodes.reduce((function(t,n){return t+e.getTypeLength(n.getNodeType(e))}),0))}},{key:"generate",value:function(e,t){var n,r=this.getNodeType(e),i=this.nodes,a=e.getComponentType(r),o=[],s=ee(i);try{for(s.s();!(n=s.n()).done;){var u=n.value,l=u.build(e),c=e.getComponentType(u.getNodeType(e));c!==a&&(l=e.format(l,c,a)),o.push(l)}}catch(d){s.e(d)}finally{s.f()}var h="".concat(e.getType(r),"( ").concat(o.join(", ")," )");return e.format(h,r,t)}}],[{key:"type",get:function(){return"JoinNode"}}]),n}(rG),aG=Zz.join(""),oG=function(e){Y(n,e);var t=$(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x";return V(this,n),(r=t.call(this)).node=e,r.components=i,r.isSplitNode=!0,r}return W(n,[{key:"getVectorLength",value:function(){var e,t=this.components.length,n=ee(this.components);try{for(n.s();!(e=n.n()).done;){var r=e.value;t=Math.max(Zz.indexOf(r)+1,t)}}catch(i){n.e(i)}finally{n.f()}return t}},{key:"getComponentType",value:function(e){return e.getComponentType(this.node.getNodeType(e))}},{key:"getNodeType",value:function(e){return e.getTypeFromLength(this.components.length,this.getComponentType(e))}},{key:"generate",value:function(e,t){var n=this.node,r=e.getTypeLength(n.getNodeType(e)),i=null;if(r>1){var a=null;this.getVectorLength()>=r&&(a=e.getTypeFromLength(this.getVectorLength(),this.getComponentType(e)));var o=n.build(e,a);i=this.components.length===r&&this.components===aG.slice(0,this.components.length)?e.format(o,a,t):e.format("".concat(o,".").concat(this.components),this.getNodeType(e),t)}else i=n.build(e,t);return i}},{key:"serialize",value:function(e){oe(Q(n.prototype),"serialize",this).call(this,e),e.components=this.components}},{key:"deserialize",value:function(e){oe(Q(n.prototype),"deserialize",this).call(this,e),this.components=e.components}}],[{key:"type",get:function(){return"SplitNode"}}]),n}(eG),sG=function(e){Y(n,e);var t=$(n);function n(e,r,i){var a;return V(this,n),(a=t.call(this)).sourceNode=e,a.components=r,a.targetNode=i,a}return W(n,[{key:"getNodeType",value:function(e){return this.sourceNode.getNodeType(e)}},{key:"generate",value:function(e){for(var t=this.sourceNode,n=this.components,r=this.targetNode,i=this.getNodeType(e),a=e.getTypeFromLength(n.length,r.getNodeType(e)),o=r.build(e,a),s=t.build(e,i),u=e.getTypeLength(i),l=[],c=0;c<u;c++){var h=Zz[c];h===n[0]?(l.push(o),c+=n.length-1):l.push(s+"."+h)}return"".concat(e.getType(i),"( ").concat(l.join(", ")," )")}}],[{key:"type",get:function(){return"SetNode"}}]),n}(rG),uG=function(e){Y(n,e);var t=$(n);function n(e,r){var i;return V(this,n),(i=t.call(this)).sourceNode=e,i.components=r,i}return W(n,[{key:"getNodeType",value:function(e){return this.sourceNode.getNodeType(e)}},{key:"generate",value:function(e){var t=this.components,n=this.sourceNode,r=this.getNodeType(e),i=n.build(e),a=e.getVarFromNode(this),o=e.getPropertyName(a);e.addLineFlowCode(o+" = "+i,this);for(var s=e.getTypeLength(r),u=[],l=0,c=0;c<s;c++){var h=Zz[c];h===t[l]?(u.push("1.0 - "+o+"."+h),l++):u.push(o+"."+h)}return"".concat(e.getType(r),"( ").concat(u.join(", ")," )")}}],[{key:"type",get:function(){return"FlipNode"}}]),n}(rG),lG=function(e){Y(n,e);var t=$(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return V(this,n),(r=t.call(this,i)).isInputNode=!0,r.value=e,r.precision=null,r}return W(n,[{key:"getNodeType",value:function(){return null===this.nodeType?Gz(this.value):this.nodeType}},{key:"getInputType",value:function(e){return this.getNodeType(e)}},{key:"setPrecision",value:function(e){return this.precision=e,this}},{key:"serialize",value:function(e){oe(Q(n.prototype),"serialize",this).call(this,e),e.value=this.value,this.value&&this.value.toArray&&(e.value=this.value.toArray()),e.valueType=Gz(this.value),e.nodeType=this.nodeType,"ArrayBuffer"===e.valueType&&(e.value=Hz(e.value)),e.precision=this.precision}},{key:"deserialize",value:function(e){oe(Q(n.prototype),"deserialize",this).call(this,e),this.nodeType=e.nodeType,this.value=Array.isArray(e.value)?qz.apply(void 0,[e.valueType].concat(q(e.value))):e.value,this.precision=e.precision||null,this.value&&this.value.fromArray&&(this.value=this.value.fromArray(e.value))}},{key:"generate",value:function(){console.warn("Abstract function.")}}],[{key:"type",get:function(){return"InputNode"}}]),n}(eG),cG=function(e){Y(n,e);var t=$(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return V(this,n),(r=t.call(this,e,i)).isConstNode=!0,r}return W(n,[{key:"generateConst",value:function(e){return e.generateConst(this.getNodeType(e),this.value)}},{key:"generate",value:function(e,t){var n=this.getNodeType(e);return e.format(this.generateConst(e),n,t)}}],[{key:"type",get:function(){return"ConstNode"}}]),n}(lG),hG=null,dG=new Map;function fG(e,t){if(dG.has(e))console.warn("Redefinition of method chaining ".concat(e));else{if("function"!==typeof t)throw new Error("Node element ".concat(e," is not a function"));dG.set(e,t)}}for(var pG=function(e){return e.replace(/r|s/g,"x").replace(/g|t/g,"y").replace(/b|p/g,"z").replace(/a|q/g,"w")},AG=function(e){return pG(e).split("").sort().join("")},vG={setup:function(e,t){var n=t.shift();return e.apply(void 0,[eq(n)].concat(q(t)))},get:function(e,t,n){if("string"===typeof t&&void 0===e[t]){if(!0!==e.isStackNode&&"assign"===t)return function(){for(var e,t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return(e=hG).assign.apply(e,[n].concat(r)),n};if(dG.has(t)){var r=dG.get(t);return e.isStackNode?function(){return n.add(r.apply(void 0,arguments))}:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return r.apply(void 0,[n].concat(t))}}if("self"===t)return e;if(t.endsWith("Assign")&&dG.has(t.slice(0,t.length-"Assign".length))){var i=dG.get(t.slice(0,t.length-"Assign".length));return e.isStackNode?function(){return n.assign(arguments.length<=0?void 0:arguments[0],i.apply(void 0,arguments))}:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return n.assign(i.apply(void 0,[n].concat(t)))}}if(!0===/^[xyzwrgbastpq]{1,4}$/.test(t))return t=pG(t),$G(new oG(n,t));if(!0===/^set[XYZWRGBASTPQ]{1,4}$/.test(t))return t=AG(t.slice(3).toLowerCase()),function(n){return $G(new sG(e,t,n))};if(!0===/^flip[XYZWRGBASTPQ]{1,4}$/.test(t))return t=AG(t.slice(4).toLowerCase()),function(){return $G(new uG($G(e),t))};if("width"===t||"height"===t||"depth"===t)return"width"===t?t="x":"height"===t?t="y":"depth"===t&&(t="z"),$G(new oG(e,t));if(!0===/^\d+$/.test(t))return $G(new tG(n,new cG(Number(t),"uint")))}return Reflect.get(e,t,n)},set:function(e,t,n,r){return"string"!==typeof t||void 0!==e[t]||!0!==/^[xyzwrgbastpq]{1,4}$/.test(t)&&"width"!==t&&"height"!==t&&"depth"!==t&&!0!==/^\d+$/.test(t)?Reflect.set(e,t,n,r):(r[t].assign(n),!0)}},mG=new WeakMap,gG=new WeakMap,yG=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=Gz(e);if("node"===n){var r=mG.get(e);return void 0===r&&(r=new Proxy(e,vG),mG.set(e,r),mG.set(r,r)),r}return null===t&&("float"===n||"boolean"===n)||n&&"shader"!==n&&"string"!==n?$G(YG(e,t)):"shader"===n?iq(e):e},bG=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;for(var n in e)e[n]=$G(e[n],t);return e},xG=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=e.length,r=0;r<n;r++)e[r]=$G(e[r],t);return e},_G=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=function(e){return $G(null!==r?Object.assign(e,r):e)};return null===t?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return i(te(e,q(tq(n))))}:null!==n?(n=$G(n),function(){for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return i(te(e,[t].concat(q(tq(a)),[n])))}):function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return i(te(e,[t].concat(q(tq(r)))))}},wG=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return $G(te(e,q(tq(n))))},SG=function(e){Y(n,e);var t=$(n);function n(e,r){var i;return V(this,n),(i=t.call(this)).shaderNode=e,i.inputNodes=r,i}return W(n,[{key:"getNodeType",value:function(e){return this.shaderNode.nodeType||this.getOutputNode(e).getNodeType(e)}},{key:"call",value:function(e){var t=this.shaderNode,n=this.inputNodes,r=e.getNodeProperties(t);if(r.onceOutput)return r.onceOutput;var i=null;if(t.layout){var a=gG.get(e.constructor);void 0===a&&(a=new WeakMap,gG.set(e.constructor,a));var o=a.get(t);void 0===o&&(o=$G(e.buildFunctionNode(t)),a.set(t,o)),null!==e.currentFunctionNode&&e.currentFunctionNode.includes.push(o),i=$G(o.call(n))}else{var s=t.jsFunc,u=null!==n?s(n,e):s(e);i=$G(u)}return t.once&&(r.onceOutput=i),i}},{key:"getOutputNode",value:function(e){var t=e.getNodeProperties(this);return null===t.outputNode&&(t.outputNode=this.setupOutput(e)),t.outputNode}},{key:"setup",value:function(e){return this.getOutputNode(e)}},{key:"setupOutput",value:function(e){return e.addStack(),e.stack.outputNode=this.call(e),e.removeStack()}},{key:"generate",value:function(e,t){return this.getOutputNode(e).build(e,t)}}]),n}(eG),MG=function(e){Y(n,e);var t=$(n);function n(e,r){var i;return V(this,n),(i=t.call(this,r)).jsFunc=e,i.layout=null,i.global=!0,i.once=!1,i}return W(n,[{key:"setLayout",value:function(e){return this.layout=e,this}},{key:"call",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return eq(e),$G(new SG(this,e))}},{key:"setup",value:function(){return this.call()}}]),n}(eG),kG=[.5,1.5,1/3,1e-6,1e6,Math.PI,2*Math.PI,1/Math.PI,2/Math.PI,1/(2*Math.PI),Math.PI/2],TG=new Map,EG=0,CG=[!1,!0];EG<CG.length;EG++){var RG=CG[EG];TG.set(RG,new cG(RG))}for(var BG=new Map,PG=0,NG=[0,1,2,3];PG<NG.length;PG++){var IG=NG[PG];BG.set(IG,new cG(IG,"uint"))}for(var DG=new Map(q(BG).map((function(e){return new cG(e.value,"int")}))),LG=0,OG=[-1,-2];LG<OG.length;LG++){var FG=OG[LG];DG.set(FG,new cG(FG,"int"))}for(var UG=new Map(q(DG).map((function(e){return new cG(e.value)}))),zG=0,GG=kG;zG<GG.length;zG++){var qG=GG[zG];UG.set(qG,new cG(qG))}for(var HG=0,VG=kG;HG<VG.length;HG++){var jG=VG[HG];UG.set(-jG,new cG(-jG))}var WG={bool:TG,uint:BG,ints:DG,float:UG},XG=new Map([].concat(q(TG),q(UG))),YG=function(e,t){return XG.has(e)?XG.get(e):!0===e.isNode?e:new cG(e,t)},QG=function(e){try{return e.getNodeType()}catch(t){return}},JG=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];if((0===r.length||!["bool","float","int","uint"].includes(e)&&r.every((function(e){return"object"!==typeof e})))&&(r=[qz.apply(void 0,[e].concat(q(r)))]),1===r.length&&null!==t&&t.has(r[0]))return $G(t.get(r[0]));if(1===r.length){var a=YG(r[0],e);return QG(a)===e?$G(a):$G(new nG(a,e))}var o=r.map((function(e){return YG(e)}));return $G(new iG(o,e))}},KG=function(e){return"object"===typeof e&&null!==e?e.value:e};function ZG(e,t){return new Proxy(new MG(e,t),vG)}var $G=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return yG(e,t)},eq=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new bG(e,t)},tq=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new xG(e,t)},nq=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return te(_G,t)},rq=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return te(wG,t)},iq=function(e,t){var n=new ZG(e,t),r=function(){for(var e,t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return eq(r),e=r[0]&&r[0].isNode?[].concat(r):r[0],n.call(e)};return r.shaderNode=n,r.setLayout=function(e){return n.setLayout(e),r},r.once=function(){return n.once=!0,r},r};fG("toGlobal",(function(e){return e.global=!0,e}));var aq=function(e){hG=e},oq=function(){return hG},sq=function(){var e;return(e=hG).If.apply(e,arguments)};fG("append",(function(e){return hG&&hG.add(e),e}));var uq=new JG("color"),lq=new JG("float",WG.float),cq=new JG("int",WG.ints),hq=new JG("uint",WG.uint),dq=new JG("bool",WG.bool),fq=new JG("vec2"),pq=new JG("ivec2"),Aq=new JG("uvec2"),vq=new JG("bvec2"),mq=new JG("vec3"),gq=new JG("ivec3"),yq=new JG("uvec3"),bq=new JG("bvec3"),xq=new JG("vec4"),_q=new JG("ivec4"),wq=new JG("uvec4"),Sq=new JG("bvec4"),Mq=new JG("mat2"),kq=new JG("mat3"),Tq=new JG("mat4");fG("toColor",uq),fG("toFloat",lq),fG("toInt",cq),fG("toUint",hq),fG("toBool",dq),fG("toVec2",fq),fG("toIVec2",pq),fG("toUVec2",Aq),fG("toBVec2",vq),fG("toVec3",mq),fG("toIVec3",gq),fG("toUVec3",yq),fG("toBVec3",bq),fG("toVec4",xq),fG("toIVec4",_q),fG("toUVec4",wq),fG("toBVec4",Sq),fG("toMat2",Mq),fG("toMat3",kq),fG("toMat4",Tq);fG("element",nq(tG)),fG("convert",(function(e,t){return $G(new nG($G(e),t))}));var Eq=function(e){Y(n,e);var t=$(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return V(this,n),(r=t.call(this,"string")).name=e,r.version=0,r.shared=i,r.order=a,r.isUniformGroup=!0,r}return W(n,[{key:"needsUpdate",set:function(e){!0===e&&this.version++}},{key:"serialize",value:function(e){oe(Q(n.prototype),"serialize",this).call(this,e),e.name=this.name,e.version=this.version,e.shared=this.shared}},{key:"deserialize",value:function(e){oe(Q(n.prototype),"deserialize",this).call(this,e),this.name=e.name,this.version=e.version,this.shared=e.shared}}],[{key:"type",get:function(){return"UniformGroupNode"}}]),n}(eG),Cq=function(e){return new Eq(e)},Rq=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return new Eq(e,!0,t)},Bq=Rq("frame"),Pq=Rq("render"),Nq=Cq("object"),Iq=function(e){Y(n,e);var t=$(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return V(this,n),(r=t.call(this,e,i)).isUniformNode=!0,r.name="",r.groupNode=Nq,r}return W(n,[{key:"label",value:function(e){return this.name=e,this}},{key:"setGroup",value:function(e){return this.groupNode=e,this}},{key:"getGroup",value:function(){return this.groupNode}},{key:"getUniformHash",value:function(e){return this.getHash(e)}},{key:"onUpdate",value:function(e,t){var r=this,i=this.getSelf();return e=e.bind(i),oe(Q(n.prototype),"onUpdate",this).call(this,(function(t){var n=e(t,i);void 0!==n&&(r.value=n)}),t)}},{key:"generate",value:function(e,t){var n=this.getNodeType(e),r=this.getUniformHash(e),i=e.getNodeFromHash(r);void 0===i&&(e.setHashNode(this,r),i=this);var a=i.getInputType(e),o=e.getUniformFromNode(i,a,e.shaderStage,this.name||e.context.label),s=e.getPropertyName(o);return void 0!==e.context.label&&delete e.context.label,e.format(s,n,t)}}],[{key:"type",get:function(){return"UniformNode"}}]),n}(lG),Dq=function(e,t){var n=function(e){return void 0!==e&&null!==e?e.nodeType||e.convertTo||("string"===typeof e?e:null):null}(t||e),r=e&&!0===e.isNode?e.node&&e.node.value||e.value:e;return $G(new Iq(r,n))},Lq=function(e){Y(n,e);var t=$(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return V(this,n),(r=t.call(this,e)).name=i,r.varying=a,r.isPropertyNode=!0,r}return W(n,[{key:"getHash",value:function(e){return this.name||oe(Q(n.prototype),"getHash",this).call(this,e)}},{key:"isGlobal",value:function(){return!0}},{key:"generate",value:function(e){var t;return!0===this.varying?(t=e.getVaryingFromNode(this,this.name)).needsInterpolation=!0:t=e.getVarFromNode(this,this.name),e.getPropertyName(t)}}],[{key:"type",get:function(){return"PropertyNode"}}]),n}(eG),Oq=function(e,t){return $G(new Lq(e,t))},Fq=function(e,t){return $G(new Lq(e,t,!0))},Uq=rq(Lq,"vec4","DiffuseColor"),zq=rq(Lq,"vec3","EmissiveColor"),Gq=rq(Lq,"float","Roughness"),qq=rq(Lq,"float","Metalness"),Hq=rq(Lq,"float","Clearcoat"),Vq=rq(Lq,"float","ClearcoatRoughness"),jq=rq(Lq,"vec3","Sheen"),Wq=rq(Lq,"float","SheenRoughness"),Xq=rq(Lq,"float","Iridescence"),Yq=rq(Lq,"float","IridescenceIOR"),Qq=rq(Lq,"float","IridescenceThickness"),Jq=rq(Lq,"float","AlphaT"),Kq=rq(Lq,"float","Anisotropy"),Zq=rq(Lq,"vec3","AnisotropyT"),$q=rq(Lq,"vec3","AnisotropyB"),eH=rq(Lq,"color","SpecularColor"),tH=rq(Lq,"float","SpecularF90"),nH=rq(Lq,"float","Shininess"),rH=rq(Lq,"vec4","Output"),iH=rq(Lq,"float","dashSize"),aH=rq(Lq,"float","gapSize"),oH=rq(Lq,"float","IOR"),sH=rq(Lq,"float","Transmission"),uH=rq(Lq,"float","Thickness"),lH=rq(Lq,"float","AttenuationDistance"),cH=rq(Lq,"color","AttenuationColor"),hH=rq(Lq,"float","Dispersion"),dH=function(e){Y(n,e);var t=$(n);function n(e,r){var i;return V(this,n),(i=t.call(this)).targetNode=e,i.sourceNode=r,i}return W(n,[{key:"hasDependencies",value:function(){return!1}},{key:"getNodeType",value:function(e,t){return"void"!==t?this.targetNode.getNodeType(e):"void"}},{key:"needsSplitAssign",value:function(e){var t=this.targetNode;if(!1===e.isAvailable("swizzleAssign")&&t.isSplitNode&&t.components.length>1){var n=e.getTypeLength(t.node.getNodeType(e));return Zz.join("").slice(0,n)!==t.components}return!1}},{key:"generate",value:function(e,t){var n,r=this.targetNode,i=this.sourceNode,a=this.needsSplitAssign(e),o=r.getNodeType(e),s=r.context({assign:!0}).build(e),u=i.build(e,o),l=i.getNodeType(e),c=e.getDataFromNode(this);if(!0===c.initialized)"void"!==t&&(n=s);else if(a){var h=e.getVarFromNode(this,null,o),d=e.getPropertyName(h);e.addLineFlowCode("".concat(d," = ").concat(u),this);for(var f=r.node.context({assign:!0}).build(e),p=0;p<r.components.length;p++){var A=r.components[p];e.addLineFlowCode("".concat(f,".").concat(A," = ").concat(d,"[ ").concat(p," ]"),this)}"void"!==t&&(n=s)}else n="".concat(s," = ").concat(u),"void"!==t&&"void"!==l||(e.addLineFlowCode(n,this),"void"!==t&&(n=s));return c.initialized=!0,e.format(n,o,t)}}],[{key:"type",get:function(){return"AssignNode"}}]),n}(rG);fG("assign",nq(dH));var fH=function(e){Y(n,e);var t=$(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return V(this,n),(e=t.call(this)).functionNode=r,e.parameters=i,e}return W(n,[{key:"setParameters",value:function(e){return this.parameters=e,this}},{key:"getParameters",value:function(){return this.parameters}},{key:"getNodeType",value:function(e){return this.functionNode.getNodeType(e)}},{key:"generate",value:function(e){var t=[],n=this.functionNode,r=n.getInputs(e),i=this.parameters,a=function(t,n){var r=n.type;return"pointer"===r?"&"+t.build(e):t.build(e,r)};if(Array.isArray(i))for(var o=0;o<i.length;o++)t.push(a(i[o],r[o]));else{var s,u=ee(r);try{for(u.s();!(s=u.n()).done;){var l=s.value,c=i[l.name];if(void 0===c)throw new Error("FunctionCallNode: Input '".concat(l.name,"' not found in FunctionNode."));t.push(a(c,l))}}catch(d){u.e(d)}finally{u.f()}}var h=n.build(e,"property");return"".concat(h,"( ").concat(t.join(", ")," )")}}],[{key:"type",get:function(){return"FunctionCallNode"}}]),n}(rG);fG("call",(function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n=n.length>1||n[0]&&!0===n[0].isNode?tq(n):eq(n[0]),$G(new fH($G(e),n))}));var pH=function(e){Y(n,e);var t=$(n);function n(e,r,i){var a;if(V(this,n),a=t.call(this),(arguments.length<=3?0:arguments.length-3)>0){for(var o,s=new n(e,r,i),u=0;u<(arguments.length<=3?0:arguments.length-3)-1;u++)s=new n(e,s,u+3<3||arguments.length<=u+3?void 0:arguments[u+3]);r=s,i=(o=(arguments.length<=3?0:arguments.length-3)-1+3)<3||arguments.length<=o?void 0:arguments[o]}return a.op=e,a.aNode=r,a.bNode=i,a}return W(n,[{key:"getNodeType",value:function(e,t){var n=this.op,r=this.aNode,i=this.bNode,a=r.getNodeType(e),o="undefined"!==typeof i?i.getNodeType(e):null;if("void"===a||"void"===o)return"void";if("%"===n)return a;if("~"===n||"&"===n||"|"===n||"^"===n||">>"===n||"<<"===n)return e.getIntegerType(a);if("!"===n||"=="===n||"&&"===n||"||"===n||"^^"===n)return"bool";if("<"===n||">"===n||"<="===n||">="===n){var s=t?e.getTypeLength(t):Math.max(e.getTypeLength(a),e.getTypeLength(o));return s>1?"bvec".concat(s):"bool"}return"float"===a&&e.isMatrix(o)?o:e.isMatrix(a)&&e.isVector(o)?e.getVectorFromMatrix(a):e.isVector(a)&&e.isMatrix(o)?e.getVectorFromMatrix(o):e.getTypeLength(o)>e.getTypeLength(a)?o:a}},{key:"generate",value:function(e,t){var n=this.op,r=this.aNode,i=this.bNode,a=this.getNodeType(e,t),o=null,s=null;"void"!==a?(o=r.getNodeType(e),s="undefined"!==typeof i?i.getNodeType(e):null,"<"===n||">"===n||"<="===n||">="===n||"=="===n?e.isVector(o)?s=o:o!==s&&(o=s="float"):">>"===n||"<<"===n?(o=a,s=e.changeComponentType(s,"uint")):e.isMatrix(o)&&e.isVector(s)?s=e.getVectorFromMatrix(o):o=e.isVector(o)&&e.isMatrix(s)?e.getVectorFromMatrix(s):s=a):o=s=a;var u=r.build(e,o),l="undefined"!==typeof i?i.build(e,s):null,c=e.getTypeLength(t),h=e.getFunctionOperator(n);return"void"!==t?"<"===n&&c>1?e.useComparisonMethod?e.format("".concat(e.getMethod("lessThan",t),"( ").concat(u,", ").concat(l," )"),a,t):e.format("( ".concat(u," < ").concat(l," )"),a,t):"<="===n&&c>1?e.useComparisonMethod?e.format("".concat(e.getMethod("lessThanEqual",t),"( ").concat(u,", ").concat(l," )"),a,t):e.format("( ".concat(u," <= ").concat(l," )"),a,t):">"===n&&c>1?e.useComparisonMethod?e.format("".concat(e.getMethod("greaterThan",t),"( ").concat(u,", ").concat(l," )"),a,t):e.format("( ".concat(u," > ").concat(l," )"),a,t):">="===n&&c>1?e.useComparisonMethod?e.format("".concat(e.getMethod("greaterThanEqual",t),"( ").concat(u,", ").concat(l," )"),a,t):e.format("( ".concat(u," >= ").concat(l," )"),a,t):"!"===n||"~"===n?e.format("(".concat(n).concat(u,")"),o,t):h?e.format("".concat(h,"( ").concat(u,", ").concat(l," )"),a,t):e.format("( ".concat(u," ").concat(n," ").concat(l," )"),a,t):"void"!==o?h?e.format("".concat(h,"( ").concat(u,", ").concat(l," )"),a,t):e.format("".concat(u," ").concat(n," ").concat(l),a,t):void 0}},{key:"serialize",value:function(e){oe(Q(n.prototype),"serialize",this).call(this,e),e.op=this.op}},{key:"deserialize",value:function(e){oe(Q(n.prototype),"deserialize",this).call(this,e),this.op=e.op}}],[{key:"type",get:function(){return"OperatorNode"}}]),n}(rG),AH=nq(pH,"+"),vH=nq(pH,"-"),mH=nq(pH,"*"),gH=nq(pH,"/"),yH=nq(pH,"%"),bH=nq(pH,"=="),xH=nq(pH,"!="),_H=nq(pH,"<"),wH=nq(pH,">"),SH=nq(pH,"<="),MH=nq(pH,">="),kH=nq(pH,"&&"),TH=nq(pH,"||"),EH=nq(pH,"!"),CH=nq(pH,"^^"),RH=nq(pH,"&"),BH=nq(pH,"~"),PH=nq(pH,"|"),NH=nq(pH,"^"),IH=nq(pH,"<<"),DH=nq(pH,">>");fG("add",AH),fG("sub",vH),fG("mul",mH),fG("div",gH),fG("modInt",yH),fG("equal",bH),fG("notEqual",xH),fG("lessThan",_H),fG("greaterThan",wH),fG("lessThanEqual",SH),fG("greaterThanEqual",MH),fG("and",kH),fG("or",TH),fG("not",EH),fG("xor",CH),fG("bitAnd",RH),fG("bitNot",BH),fG("bitOr",PH),fG("bitXor",NH),fG("shiftLeft",IH),fG("shiftRight",DH);fG("remainder",(function(){return console.warn("TSL.OperatorNode: .remainder() has been renamed to .modInt()."),yH.apply(void 0,arguments)}));var LH=function(e){Y(n,e);var t=$(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return V(this,n),(i=t.call(this)).method=e,i.aNode=r,i.bNode=a,i.cNode=o,i}return W(n,[{key:"getInputType",value:function(e){var t=this.aNode.getNodeType(e),n=this.bNode?this.bNode.getNodeType(e):null,r=this.cNode?this.cNode.getNodeType(e):null,i=e.isMatrix(t)?0:e.getTypeLength(t),a=e.isMatrix(n)?0:e.getTypeLength(n),o=e.isMatrix(r)?0:e.getTypeLength(r);return i>a&&i>o?t:a>o?n:o>i?r:t}},{key:"getNodeType",value:function(e){var t=this.method;return t===n.LENGTH||t===n.DISTANCE||t===n.DOT?"float":t===n.CROSS?"vec3":t===n.ALL?"bool":t===n.EQUALS?e.changeComponentType(this.aNode.getNodeType(e),"bool"):t===n.MOD?this.aNode.getNodeType(e):this.getInputType(e)}},{key:"generate",value:function(e,t){var r=this.method,i=this.getNodeType(e),a=this.getInputType(e),o=this.aNode,s=this.bNode,u=this.cNode,l=!0===e.renderer.isWebGLRenderer;if(r===n.TRANSFORM_DIRECTION){var c=o,h=s;e.isMatrix(c.getNodeType(e))?h=xq(mq(h),0):c=xq(mq(c),0);var d=mH(c,h).xyz;return ZH(d).build(e,t)}if(r===n.NEGATE)return e.format("( - "+o.build(e,a)+" )",i,t);if(r===n.ONE_MINUS)return vH(1,o).build(e,t);if(r===n.RECIPROCAL)return gH(1,o).build(e,t);if(r===n.DIFFERENCE)return oV(vH(o,s)).build(e,t);var f=[];return r===n.CROSS||r===n.MOD?f.push(o.build(e,i),s.build(e,i)):l&&r===n.STEP?f.push(o.build(e,1===e.getTypeLength(o.getNodeType(e))?"float":a),s.build(e,a)):l&&(r===n.MIN||r===n.MAX)||r===n.MOD?f.push(o.build(e,a),s.build(e,1===e.getTypeLength(s.getNodeType(e))?"float":a)):r===n.REFRACT?f.push(o.build(e,a),s.build(e,a),u.build(e,"float")):r===n.MIX?f.push(o.build(e,a),s.build(e,a),u.build(e,1===e.getTypeLength(u.getNodeType(e))?"float":a)):(f.push(o.build(e,a)),null!==s&&f.push(s.build(e,a)),null!==u&&f.push(u.build(e,a))),e.format("".concat(e.getMethod(r,i),"( ").concat(f.join(", ")," )"),i,t)}},{key:"serialize",value:function(e){oe(Q(n.prototype),"serialize",this).call(this,e),e.method=this.method}},{key:"deserialize",value:function(e){oe(Q(n.prototype),"deserialize",this).call(this,e),this.method=e.method}}],[{key:"type",get:function(){return"MathNode"}}]),n}(rG);LH.ALL="all",LH.ANY="any",LH.EQUALS="equals",LH.RADIANS="radians",LH.DEGREES="degrees",LH.EXP="exp",LH.EXP2="exp2",LH.LOG="log",LH.LOG2="log2",LH.SQRT="sqrt",LH.INVERSE_SQRT="inversesqrt",LH.FLOOR="floor",LH.CEIL="ceil",LH.NORMALIZE="normalize",LH.FRACT="fract",LH.SIN="sin",LH.COS="cos",LH.TAN="tan",LH.ASIN="asin",LH.ACOS="acos",LH.ATAN="atan",LH.ABS="abs",LH.SIGN="sign",LH.LENGTH="length",LH.NEGATE="negate",LH.ONE_MINUS="oneMinus",LH.DFDX="dFdx",LH.DFDY="dFdy",LH.ROUND="round",LH.RECIPROCAL="reciprocal",LH.TRUNC="trunc",LH.FWIDTH="fwidth",LH.BITCAST="bitcast",LH.TRANSPOSE="transpose",LH.ATAN2="atan2",LH.MIN="min",LH.MAX="max",LH.MOD="mod",LH.STEP="step",LH.REFLECT="reflect",LH.DISTANCE="distance",LH.DIFFERENCE="difference",LH.DOT="dot",LH.CROSS="cross",LH.POW="pow",LH.TRANSFORM_DIRECTION="transformDirection",LH.MIX="mix",LH.CLAMP="clamp",LH.REFRACT="refract",LH.SMOOTHSTEP="smoothstep",LH.FACEFORWARD="faceforward";var OH=lq(1e-6),FH=lq(Math.PI),UH=(Math.PI,nq(LH,LH.ALL)),zH=nq(LH,LH.ANY),GH=nq(LH,LH.EQUALS),qH=nq(LH,LH.RADIANS),HH=nq(LH,LH.DEGREES),VH=nq(LH,LH.EXP),jH=nq(LH,LH.EXP2),WH=nq(LH,LH.LOG),XH=nq(LH,LH.LOG2),YH=nq(LH,LH.SQRT),QH=nq(LH,LH.INVERSE_SQRT),JH=nq(LH,LH.FLOOR),KH=nq(LH,LH.CEIL),ZH=nq(LH,LH.NORMALIZE),$H=nq(LH,LH.FRACT),eV=nq(LH,LH.SIN),tV=nq(LH,LH.COS),nV=nq(LH,LH.TAN),rV=nq(LH,LH.ASIN),iV=nq(LH,LH.ACOS),aV=nq(LH,LH.ATAN),oV=nq(LH,LH.ABS),sV=nq(LH,LH.SIGN),uV=nq(LH,LH.LENGTH),lV=nq(LH,LH.NEGATE),cV=nq(LH,LH.ONE_MINUS),hV=nq(LH,LH.DFDX),dV=nq(LH,LH.DFDY),fV=nq(LH,LH.ROUND),pV=nq(LH,LH.RECIPROCAL),AV=nq(LH,LH.TRUNC),vV=nq(LH,LH.FWIDTH),mV=(LH.BITCAST,nq(LH,LH.TRANSPOSE)),gV=nq(LH,LH.ATAN2),yV=nq(LH,LH.MIN),bV=nq(LH,LH.MAX),xV=nq(LH,LH.MOD),_V=nq(LH,LH.STEP),wV=nq(LH,LH.REFLECT),SV=nq(LH,LH.DISTANCE),MV=nq(LH,LH.DIFFERENCE),kV=nq(LH,LH.DOT),TV=nq(LH,LH.CROSS),EV=nq(LH,LH.POW),CV=nq(LH,LH.POW,2),RV=nq(LH,LH.POW,3),BV=nq(LH,LH.POW,4),PV=nq(LH,LH.TRANSFORM_DIRECTION),NV=function(e){return kV(e,e)},IV=nq(LH,LH.MIX),DV=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return $G(new LH(LH.CLAMP,$G(e),$G(t),$G(n)))},LV=nq(LH,LH.REFRACT),OV=nq(LH,LH.SMOOTHSTEP),FV=nq(LH,LH.FACEFORWARD),UV=iq((function(e){var t=l(e,1)[0],n=kV(t.xy,fq(12.9898,78.233)),r=xV(n,FH);return $H(eV(r).mul(43758.5453))}));fG("all",UH),fG("any",zH),fG("equals",GH),fG("radians",qH),fG("degrees",HH),fG("exp",VH),fG("exp2",jH),fG("log",WH),fG("log2",XH),fG("sqrt",YH),fG("inverseSqrt",QH),fG("floor",JH),fG("ceil",KH),fG("normalize",ZH),fG("fract",$H),fG("sin",eV),fG("cos",tV),fG("tan",nV),fG("asin",rV),fG("acos",iV),fG("atan",aV),fG("abs",oV),fG("sign",sV),fG("length",uV),fG("lengthSq",NV),fG("negate",lV),fG("oneMinus",cV),fG("dFdx",hV),fG("dFdy",dV),fG("round",fV),fG("reciprocal",pV),fG("trunc",AV),fG("fwidth",vV),fG("atan2",gV),fG("min",yV),fG("max",bV),fG("mod",xV),fG("step",_V),fG("reflect",wV),fG("distance",SV),fG("dot",kV),fG("cross",TV),fG("pow",EV),fG("pow2",CV),fG("pow3",RV),fG("pow4",BV),fG("transformDirection",PV),fG("mix",(function(e,t,n){return IV(t,n,e)})),fG("clamp",DV),fG("refract",LV),fG("smoothstep",(function(e,t,n){return OV(t,n,e)})),fG("faceForward",FV),fG("difference",MV),fG("saturate",(function(e){return DV(e)})),fG("cbrt",(function(e){return mH(sV(e),EV(oV(e),1/3))})),fG("transpose",mV),fG("rand",UV);var zV=function(e){Y(n,e);var t=$(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return V(this,n),(i=t.call(this)).condNode=e,i.ifNode=r,i.elseNode=a,i}return W(n,[{key:"getNodeType",value:function(e){var t=this.ifNode.getNodeType(e);if(null!==this.elseNode){var n=this.elseNode.getNodeType(e);if(e.getTypeLength(n)>e.getTypeLength(t))return n}return t}},{key:"setup",value:function(e){var t=this.condNode.cache(),n=this.ifNode.cache(),r=this.elseNode?this.elseNode.cache():null,i=e.context.nodeBlock;e.getDataFromNode(n).parentNodeBlock=i,null!==r&&(e.getDataFromNode(r).parentNodeBlock=i);var a=e.getNodeProperties(this);a.condNode=t,a.ifNode=n.context({nodeBlock:n}),a.elseNode=r?r.context({nodeBlock:r}):null}},{key:"generate",value:function(e,t){var n=this.getNodeType(e),r=e.getDataFromNode(this);if(void 0!==r.nodeProperty)return r.nodeProperty;var i=e.getNodeProperties(this),a=i.condNode,o=i.ifNode,s=i.elseNode,u="void"!==t,l=u?Oq(n).build(e):"";r.nodeProperty=l;var c=a.build(e,"bool");e.addFlowCode("\n".concat(e.tab,"if ( ").concat(c," ) {\n\n")).addFlowTab();var h=o.build(e,n);if(h&&(h=u?l+" = "+h+";":"return "+h+";"),e.removeFlowTab().addFlowCode(e.tab+"\t"+h+"\n\n"+e.tab+"}"),null!==s){e.addFlowCode(" else {\n\n").addFlowTab();var d=s.build(e,n);d&&(d=u?l+" = "+d+";":"return "+d+";"),e.removeFlowTab().addFlowCode(e.tab+"\t"+d+"\n\n"+e.tab+"}\n\n")}else e.addFlowCode("\n\n");return e.format(l,n,t)}}],[{key:"type",get:function(){return"ConditionalNode"}}]),n}(eG),GV=nq(zV);fG("select",GV);fG("cond",(function(){return console.warn("TSL.ConditionalNode: cond() has been renamed to select()."),GV.apply(void 0,arguments)}));var qV=function(e){Y(n,e);var t=$(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return V(this,n),(r=t.call(this)).isContextNode=!0,r.node=e,r.value=i,r}return W(n,[{key:"getScope",value:function(){return this.node.getScope()}},{key:"getNodeType",value:function(e){return this.node.getNodeType(e)}},{key:"analyze",value:function(e){this.node.build(e)}},{key:"setup",value:function(e){var t=e.getContext();e.setContext(b(b({},e.context),this.value));var n=this.node.build(e);return e.setContext(t),n}},{key:"generate",value:function(e,t){var n=e.getContext();e.setContext(b(b({},e.context),this.value));var r=this.node.build(e,t);return e.setContext(n),r}}],[{key:"type",get:function(){return"ContextNode"}}]),n}(eG),HV=nq(qV);fG("context",HV),fG("label",(function(e,t){return HV(e,{label:t})}));var VV=function(e){Y(n,e);var t=$(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return V(this,n),(r=t.call(this)).node=e,r.name=i,r.global=!0,r.isVarNode=!0,r}return W(n,[{key:"getHash",value:function(e){return this.name||oe(Q(n.prototype),"getHash",this).call(this,e)}},{key:"getNodeType",value:function(e){return this.node.getNodeType(e)}},{key:"generate",value:function(e){var t=this.node,n=this.name,r=e.getVarFromNode(this,n,e.getVectorType(this.getNodeType(e))),i=e.getPropertyName(r),a=t.build(e,r.type);return e.addLineFlowCode("".concat(i," = ").concat(a),this),i}}],[{key:"type",get:function(){return"VarNode"}}]),n}(eG),jV=nq(VV);fG("toVar",(function(){return jV.apply(void 0,arguments).append()}));fG("temp",(function(e){return console.warn('TSL: "temp" is deprecated. Use ".toVar()" instead.'),jV(e)}));var WV=function(e){Y(n,e);var t=$(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return V(this,n),(r=t.call(this)).node=e,r.name=i,r.isVaryingNode=!0,r}return W(n,[{key:"isGlobal",value:function(){return!0}},{key:"getHash",value:function(e){return this.name||oe(Q(n.prototype),"getHash",this).call(this,e)}},{key:"getNodeType",value:function(e){return this.node.getNodeType(e)}},{key:"setupVarying",value:function(e){var t=e.getNodeProperties(this),n=t.varying;if(void 0===n){var r=this.name,i=this.getNodeType(e);t.varying=n=e.getVaryingFromNode(this,r,i),t.node=this.node}return n.needsInterpolation||(n.needsInterpolation="fragment"===e.shaderStage),n}},{key:"setup",value:function(e){this.setupVarying(e)}},{key:"analyze",value:function(e){return this.setupVarying(e),this.node.analyze(e)}},{key:"generate",value:function(e){var t=e.getNodeProperties(this),n=this.setupVarying(e);if(void 0===t.propertyName){var r=this.getNodeType(e),i=e.getPropertyName(n,jz);e.flowNodeFromShaderStage(jz,this.node,r,i),t.propertyName=i}return e.getPropertyName(n)}}],[{key:"type",get:function(){return"VaryingNode"}}]),n}(eG),XV=nq(WV);fG("varying",XV);var YV=iq((function(e){var t=l(e,1)[0],n=t.mul(.9478672986).add(.0521327014).pow(2.4),r=t.mul(.0773993808),i=t.lessThanEqual(.04045);return IV(n,r,i)})).setLayout({name:"sRGBTransferEOTF",type:"vec3",inputs:[{name:"color",type:"vec3"}]}),QV=iq((function(e){var t=l(e,1)[0],n=t.pow(.41666).mul(1.055).sub(.055),r=t.mul(12.92),i=t.lessThanEqual(.0031308);return IV(n,r,i)})).setLayout({name:"sRGBTransferOETF",type:"vec3",inputs:[{name:"color",type:"vec3"}]}),JV="WorkingColorSpace",KV="OutputColorSpace",ZV=function(e){Y(n,e);var t=$(n);function n(e,r,i){var a;return V(this,n),(a=t.call(this,"vec4")).colorNode=e,a.source=r,a.target=i,a}return W(n,[{key:"resolveColorSpace",value:function(e,t){return t===JV?RL.workingColorSpace:t===KV?e.context.outputColorSpace||e.renderer.outputColorSpace:t}},{key:"setup",value:function(e){var t=this.colorNode,n=this.resolveColorSpace(e,this.source),r=this.resolveColorSpace(e,this.target),i=t;return!1!==RL.enabled&&n!==r&&n&&r?(RL.getTransfer(n)===sL&&(i=xq(YV(i.rgb),i.a)),RL.getPrimaries(n)!==RL.getPrimaries(r)&&(i=xq(kq(RL._getMatrix(new kL,n,r)).mul(i.rgb),i.a)),RL.getTransfer(r)===sL&&(i=xq(QV(i.rgb),i.a)),i):i}}],[{key:"type",get:function(){return"ColorSpaceNode"}}]),n}(rG),$V=function(e,t){return $G(new ZV($G(e),t,JV))};fG("toOutputColorSpace",(function(e){return $G(new ZV($G(e),JV,KV))})),fG("toWorkingColorSpace",(function(e){return $G(new ZV($G(e),KV,JV))})),fG("workingToColorSpace",(function(e,t){return $G(new ZV($G(e),JV,t))})),fG("colorSpaceToWorking",$V);var ej=function(e){Y(n,e);var t=$(n);function n(e,r){var i;return V(this,n),(i=t.call(this,e,r)).referenceNode=e,i.isReferenceElementNode=!0,i}return W(n,[{key:"getNodeType",value:function(){return this.referenceNode.uniformType}},{key:"generate",value:function(e){var t=oe(Q(n.prototype),"generate",this).call(this,e),r=this.referenceNode.getNodeType(),i=this.getNodeType();return e.format(t,r,i)}}],[{key:"type",get:function(){return"ReferenceElementNode"}}]),n}(tG),tj=function(e){Y(n,e);var t=$(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return V(this,n),(i=t.call(this)).property=e,i.uniformType=r,i.object=a,i.count=o,i.properties=e.split("."),i.reference=a,i.node=null,i.group=null,i.updateType=Qz,i}return W(n,[{key:"setGroup",value:function(e){return this.group=e,this}},{key:"element",value:function(e){return $G(new ej(this,$G(e)))}},{key:"setNodeType",value:function(e){var t=Dq(null,e).getSelf();null!==this.group&&t.setGroup(this.group),this.node=t}},{key:"getNodeType",value:function(e){return null===this.node&&(this.updateReference(e),this.updateValue()),this.node.getNodeType(e)}},{key:"getValueFromReference",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.reference,t=this.properties,n=e[t[0]],r=1;r<t.length;r++)n=n[t[r]];return n}},{key:"updateReference",value:function(e){return this.reference=null!==this.object?this.object:e.object,this.reference}},{key:"setup",value:function(){return this.updateValue(),this.node}},{key:"update",value:function(){this.updateValue()}},{key:"updateValue",value:function(){null===this.node&&this.setNodeType(this.uniformType);var e=this.getValueFromReference();Array.isArray(e)?this.node.array=e:this.node.value=e}}],[{key:"type",get:function(){return"ReferenceBaseNode"}}]),n}(eG),nj=function(e){Y(n,e);var t=$(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return V(this,n),(i=t.call(this,e,r,a)).renderer=a,i.setGroup(Pq),i}return W(n,[{key:"updateReference",value:function(e){return this.reference=null!==this.renderer?this.renderer:e.renderer,this.reference}}],[{key:"type",get:function(){return"RendererReferenceNode"}}]),n}(tj),rj=function(e,t,n){return $G(new nj(e,t,n))},ij=function(e){Y(n,e);var t=$(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:aj,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return V(this,n),(r=t.call(this,"vec3")).toneMapping=e,r.exposureNode=i,r.colorNode=a,r}return W(n,[{key:"getCacheKey",value:function(){return Fz(oe(Q(n.prototype),"getCacheKey",this).call(this),this.toneMapping)}},{key:"setup",value:function(e){var t=this.colorNode||e.context.color,n=this.toneMapping;if(0===n)return t;var r=null,i=e.renderer.library.getToneMappingFunction(n);return null!==i?r=xq(i(t.rgb,this.exposureNode),t.a):(console.error("ToneMappingNode: Unsupported Tone Mapping configuration.",n),r=t),r}}],[{key:"type",get:function(){return"ToneMappingNode"}}]),n}(rG),aj=rj("toneMappingExposure","float");fG("toneMapping",(function(e,t,n){return function(e,t,n){return $G(new ij(e,$G(t),$G(n)))}(t,n,e)}));var oj=function(e){Y(n,e);var t=$(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return V(this,n),(r=t.call(this,e,i)).isBufferNode=!0,r.bufferType=i,r.bufferStride=a,r.bufferOffset=o,r.usage=lL,r.instanced=!1,r.attribute=null,r.global=!0,e&&!0===e.isBufferAttribute&&(r.attribute=e,r.usage=e.usage,r.instanced=e.isInstancedBufferAttribute),r}return W(n,[{key:"getHash",value:function(e){if(0===this.bufferStride&&0===this.bufferOffset){var t=e.globalCache.getData(this.value);return void 0===t&&(t={node:this},e.globalCache.setData(this.value,t)),t.node.uuid}return this.uuid}},{key:"getNodeType",value:function(e){return null===this.bufferType&&(this.bufferType=e.getTypeFromAttribute(this.attribute)),this.bufferType}},{key:"setup",value:function(e){if(null===this.attribute){var t=this.getNodeType(e),n=this.value,r=e.getTypeLength(t),i=this.bufferStride||r,a=this.bufferOffset,o=!0===n.isInterleavedBuffer?n:new pU(n,i),s=new vU(o,r,a);o.setUsage(this.usage),this.attribute=s,this.attribute.isInstancedBufferAttribute=this.instanced}}},{key:"generate",value:function(e){var t=this.getNodeType(e),n=e.getBufferAttributeFromNode(this,t),r=e.getPropertyName(n),i=null;"vertex"===e.shaderStage||"compute"===e.shaderStage?(this.name=r,i=r):i=XV(this).build(e,t);return i}},{key:"getInputType",value:function(){return"bufferAttribute"}},{key:"setUsage",value:function(e){return this.usage=e,this.attribute&&!0===this.attribute.isBufferAttribute&&(this.attribute.usage=e),this}},{key:"setInstanced",value:function(e){return this.instanced=e,this}}],[{key:"type",get:function(){return"BufferAttributeNode"}}]),n}(lG),sj=function(e,t,n,r){return $G(new oj(e,t,n,r))},uj=function(e,t,n,r){return sj(e,t,n,r).setInstanced(!0)},lj=function(e,t,n,r){return function(e,t,n,r){return sj(e,t,n,r).setUsage(cL)}(e,t,n,r).setInstanced(!0)};fG("toAttribute",(function(e){return sj(e.value)}));var cj=function(e){Y(n,e);var t=$(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[64];return V(this,n),(i=t.call(this,"void")).isComputeNode=!0,i.computeNode=e,i.count=r,i.workgroupSize=a,i.dispatchCount=0,i.version=1,i.updateBeforeType=Qz,i.onInitFunction=null,i.updateDispatchCount(),i}return W(n,[{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}},{key:"needsUpdate",set:function(e){!0===e&&this.version++}},{key:"updateDispatchCount",value:function(){for(var e=this.count,t=this.workgroupSize,n=t[0],r=1;r<t.length;r++)n*=t[r];this.dispatchCount=Math.ceil(e/n)}},{key:"onInit",value:function(e){return this.onInitFunction=e,this}},{key:"updateBefore",value:function(e){e.renderer.compute(this)}},{key:"generate",value:function(e){if("compute"===e.shaderStage){var t=this.computeNode.build(e,"void");""!==t&&e.addLineFlowCode(t,this)}}}],[{key:"type",get:function(){return"ComputeNode"}}]),n}(eG);fG("compute",(function(e,t,n){return $G(new cj($G(e),t,n))}));var hj=function(e){Y(n,e);var t=$(n);function n(e){var r,i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return V(this,n),(r=t.call(this)).node=e,r.parent=i,r.isCacheNode=!0,r}return W(n,[{key:"getNodeType",value:function(e){return this.node.getNodeType(e)}},{key:"build",value:function(e){var t,n=e.getCache(),r=e.getCacheFromNode(this,this.parent);e.setCache(r);for(var i=arguments.length,a=new Array(i>1?i-1:0),o=1;o<i;o++)a[o-1]=arguments[o];var s=(t=this.node).build.apply(t,[e].concat(a));return e.setCache(n),s}}],[{key:"type",get:function(){return"CacheNode"}}]),n}(eG),dj=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return $G(te(hj,[$G(e)].concat(n)))};fG("cache",dj),fG("bypass",nq(function(e){Y(n,e);var t=$(n);function n(e,r){var i;return V(this,n),(i=t.call(this)).isBypassNode=!0,i.outputNode=e,i.callNode=r,i}return W(n,[{key:"getNodeType",value:function(e){return this.outputNode.getNodeType(e)}},{key:"generate",value:function(e){var t=this.callNode.build(e,"void");return""!==t&&e.addLineFlowCode(t,this),this.outputNode.build(e)}}],[{key:"type",get:function(){return"BypassNode"}}]),n}(eG)));var fj=function(e){Y(n,e);var t=$(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:lq(0),s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:lq(1);return V(this,n),(a=t.call(this)).node=e,a.inLowNode=r,a.inHighNode=i,a.outLowNode=o,a.outHighNode=s,a.doClamp=!0,a}return W(n,[{key:"setup",value:function(){var e=this.node,t=this.inLowNode,n=this.inHighNode,r=this.outLowNode,i=this.outHighNode,a=this.doClamp,o=e.sub(t).div(n.sub(t));return!0===a&&(o=o.clamp()),o.mul(i.sub(r)).add(r)}}],[{key:"type",get:function(){return"RemapNode"}}]),n}(eG),pj=nq(fj,null,null,{doClamp:!1}),Aj=nq(fj);fG("remap",pj),fG("remapClamp",Aj);var vj=function(e){Y(n,e);var t=$(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"void";return V(this,n),(e=t.call(this,i)).snippet=r,e}return W(n,[{key:"generate",value:function(e,t){var n=this.getNodeType(e),r=this.snippet;if("void"!==n)return e.format("( ".concat(r," )"),n,t);e.addLineFlowCode(r,this)}}],[{key:"type",get:function(){return"ExpressionNode"}}]),n}(eG),mj=nq(vj);fG("discard",(function(e){return(e?GV(e,mj("discard")):mj("discard")).append()}));var gj=function(e){Y(n,e);var t=$(n);function n(e,r,i){var a;return V(this,n),(a=t.call(this,"vec4")).colorNode=e,a.toneMapping=r,a.outputColorSpace=i,a.isRenderOutput=!0,a}return W(n,[{key:"setup",value:function(e){var t=e.context,n=this.colorNode||t.color,r=(null!==this.toneMapping?this.toneMapping:t.toneMapping)||0,i=(null!==this.outputColorSpace?this.outputColorSpace:t.outputColorSpace)||rL;return 0!==r&&(n=n.toneMapping(r)),i!==rL&&i!==RL.workingColorSpace&&(n=n.workingToColorSpace(i)),n}}],[{key:"type",get:function(){return"RenderOutputNode"}}]),n}(rG),yj=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return $G(new gj($G(e),t,n))};fG("renderOutput",yj);var bj=function(e){Y(n,e);var t=$(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return V(this,n),(r=t.call(this,i)).global=!0,r._attributeName=e,r}return W(n,[{key:"getHash",value:function(e){return this.getAttributeName(e)}},{key:"getNodeType",value:function(e){var t=this.nodeType;if(null===t){var n=this.getAttributeName(e);if(e.hasGeometryAttribute(n)){var r=e.geometry.getAttribute(n);t=e.getTypeFromAttribute(r)}else t="float"}return t}},{key:"setAttributeName",value:function(e){return this._attributeName=e,this}},{key:"getAttributeName",value:function(){return this._attributeName}},{key:"generate",value:function(e){var t=this.getAttributeName(e),n=this.getNodeType(e);if(!0===e.hasGeometryAttribute(t)){var r=e.geometry.getAttribute(t),i=e.getTypeFromAttribute(r),a=e.getAttribute(t,i);return"vertex"===e.shaderStage?e.format(a.name,i,n):XV(this).build(e,n)}return console.warn('AttributeNode: Vertex attribute "'.concat(t,'" not found on geometry.')),e.generateConst(n)}},{key:"serialize",value:function(e){oe(Q(n.prototype),"serialize",this).call(this,e),e.global=this.global,e._attributeName=this._attributeName}},{key:"deserialize",value:function(e){oe(Q(n.prototype),"deserialize",this).call(this,e),this.global=e.global,this._attributeName=e._attributeName}}],[{key:"type",get:function(){return"AttributeNode"}}]),n}(eG),xj=function(e,t){return $G(new bj(e,t))},_j=function(e){return xj("uv"+(e>0?e:""),"vec2")},wj=function(e){Y(n,e);var t=$(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return V(this,n),(r=t.call(this,"uvec2")).isTextureSizeNode=!0,r.textureNode=e,r.levelNode=i,r}return W(n,[{key:"generate",value:function(e,t){var n=this.textureNode.build(e,"property"),r=null===this.levelNode?"0":this.levelNode.build(e,"int");return e.format("".concat(e.getMethod("textureDimensions"),"( ").concat(n,", ").concat(r," )"),this.getNodeType(e),t)}}],[{key:"type",get:function(){return"TextureSizeNode"}}]),n}(eG),Sj=nq(wj),Mj=function(e){Y(n,e);var t=$(n);function n(e){var r;return V(this,n),(r=t.call(this,0))._textureNode=e,r.updateType=Xz,r}return W(n,[{key:"textureNode",get:function(){return this._textureNode}},{key:"texture",get:function(){return this._textureNode.value}},{key:"update",value:function(){var e=this.texture,t=e.images,n=t&&t.length>0?t[0]&&t[0].image||t[0]:e.image;if(n&&void 0!==n.width){var r=n.width,i=n.height;this.value=Math.log2(Math.max(r,i))}}}],[{key:"type",get:function(){return"MaxMipLevelNode"}}]),n}(Iq),kj=nq(Mj),Tj=function(e){Y(n,e);var t=$(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return V(this,n),(r=t.call(this,e)).isTextureNode=!0,r.uvNode=i,r.levelNode=a,r.biasNode=o,r.compareNode=null,r.depthNode=null,r.gradNode=null,r.sampler=!0,r.updateMatrix=!1,r.updateType=Wz,r.referenceNode=null,r._value=e,r._matrixUniform=null,r.setUpdateMatrix(null===i),r}return W(n,[{key:"value",get:function(){return this.referenceNode?this.referenceNode.value:this._value},set:function(e){this.referenceNode?this.referenceNode.value=e:this._value=e}},{key:"getUniformHash",value:function(){return this.value.uuid}},{key:"getNodeType",value:function(){return!0===this.value.isDepthTexture?"float":this.value.type===uD?"uvec4":this.value.type===sD?"ivec4":"vec4"}},{key:"getInputType",value:function(){return"texture"}},{key:"getDefaultUV",value:function(){return _j(this.value.channel)}},{key:"updateReference",value:function(){return this.value}},{key:"getTransformedUV",value:function(e){return null===this._matrixUniform&&(this._matrixUniform=Dq(this.value.matrix)),this._matrixUniform.mul(mq(e,1)).xy}},{key:"setUpdateMatrix",value:function(e){return this.updateMatrix=e,this.updateType=e?Xz:Wz,this}},{key:"setupUV",value:function(e,t){var n=this.value;return!e.isFlipY()||!0!==n.isRenderTargetTexture&&!0!==n.isFramebufferTexture&&!0!==n.isDepthTexture||(t=this.sampler?t.flipY():t.setY(cq(Sj(this,this.levelNode).y).sub(t.y).sub(1))),t}},{key:"setup",value:function(e){var t=e.getNodeProperties(this);t.referenceNode=this.referenceNode;var n=this.uvNode;null!==n&&!0!==e.context.forceUVContext||!e.context.getUV||(n=e.context.getUV(this)),n||(n=this.getDefaultUV()),!0===this.updateMatrix&&(n=this.getTransformedUV(n)),n=this.setupUV(e,n);var r=this.levelNode;null===r&&e.context.getTextureLevel&&(r=e.context.getTextureLevel(this)),t.uvNode=n,t.levelNode=r,t.biasNode=this.biasNode,t.compareNode=this.compareNode,t.gradNode=this.gradNode,t.depthNode=this.depthNode}},{key:"generateUV",value:function(e,t){return t.build(e,!0===this.sampler?"vec2":"ivec2")}},{key:"generateSnippet",value:function(e,t,n,r,i,a,o,s){var u=this.value;return r?e.generateTextureLevel(u,t,n,r,a):i?e.generateTextureBias(u,t,n,i,a):s?e.generateTextureGrad(u,t,n,s,a):o?e.generateTextureCompare(u,t,n,o,a):!1===this.sampler?e.generateTextureLoad(u,t,n,a):e.generateTexture(u,t,n,a)}},{key:"generate",value:function(e,t){var r=e.getNodeProperties(this),i=this.value;if(!i||!0!==i.isTexture)throw new Error("TextureNode: Need a three.js texture.");var a=oe(Q(n.prototype),"generate",this).call(this,e,"property");if("sampler"===t)return a+"_sampler";if(e.isReference(t))return a;var o=e.getDataFromNode(this),s=o.propertyName;if(void 0===s){var u=r.uvNode,l=r.levelNode,c=r.biasNode,h=r.compareNode,d=r.depthNode,f=r.gradNode,p=this.generateUV(e,u),A=l?l.build(e,"float"):null,v=c?c.build(e,"float"):null,m=d?d.build(e,"int"):null,g=h?h.build(e,"float"):null,y=f?[f[0].build(e,"vec2"),f[1].build(e,"vec2")]:null,b=e.getVarFromNode(this);s=e.getPropertyName(b);var x=this.generateSnippet(e,a,p,A,v,m,g,y);e.addLineFlowCode("".concat(s," = ").concat(x),this),o.snippet=x,o.propertyName=s}var _=s,w=this.getNodeType(e);return e.needsToWorkingColorSpace(i)&&(_=$V(mj(_,w),i.colorSpace).setup(e).build(e,w)),e.format(_,w,t)}},{key:"setSampler",value:function(e){return this.sampler=e,this}},{key:"getSampler",value:function(){return this.sampler}},{key:"uv",value:function(e){var t=this.clone();return t.uvNode=$G(e),t.referenceNode=this.getSelf(),$G(t)}},{key:"blur",value:function(e){var t=this.clone();return t.biasNode=$G(e).mul(kj(t)),t.referenceNode=this.getSelf(),$G(t)}},{key:"level",value:function(e){var t=this.clone();return t.levelNode=$G(e),t.referenceNode=this.getSelf(),$G(t)}},{key:"size",value:function(e){return Sj(this,e)}},{key:"bias",value:function(e){var t=this.clone();return t.biasNode=$G(e),t.referenceNode=this.getSelf(),$G(t)}},{key:"compare",value:function(e){var t=this.clone();return t.compareNode=$G(e),t.referenceNode=this.getSelf(),$G(t)}},{key:"grad",value:function(e,t){var n=this.clone();return n.gradNode=[$G(e),$G(t)],n.referenceNode=this.getSelf(),$G(n)}},{key:"depth",value:function(e){var t=this.clone();return t.depthNode=$G(e),t.referenceNode=this.getSelf(),$G(t)}},{key:"serialize",value:function(e){oe(Q(n.prototype),"serialize",this).call(this,e),e.value=this.value.toJSON(e.meta).uuid,e.sampler=this.sampler,e.updateMatrix=this.updateMatrix,e.updateType=this.updateType}},{key:"deserialize",value:function(e){oe(Q(n.prototype),"deserialize",this).call(this,e),this.value=e.meta.textures[e.value],this.sampler=e.sampler,this.updateMatrix=e.updateMatrix,this.updateType=e.updateType}},{key:"update",value:function(){var e=this.value,t=this._matrixUniform;null!==t&&(t.value=e.matrix),!0===e.matrixAutoUpdate&&e.updateMatrix()}},{key:"clone",value:function(){var e=new this.constructor(this.value,this.uvNode,this.levelNode,this.biasNode);return e.sampler=this.sampler,e}}],[{key:"type",get:function(){return"TextureNode"}}]),n}(Iq),Ej=nq(Tj),Cj=function(){return Ej.apply(void 0,arguments).setSampler(!1)},Rj=Dq("float").label("cameraNear").setGroup(Pq).onRenderUpdate((function(e){return e.camera.near})),Bj=Dq("float").label("cameraFar").setGroup(Pq).onRenderUpdate((function(e){return e.camera.far})),Pj=Dq("mat4").label("cameraProjectionMatrix").setGroup(Pq).onRenderUpdate((function(e){return e.camera.projectionMatrix})),Nj=Dq("mat4").label("cameraViewMatrix").setGroup(Pq).onRenderUpdate((function(e){return e.camera.matrixWorldInverse})),Ij=Dq(new JL).label("cameraPosition").setGroup(Pq).onRenderUpdate((function(e,t){var n=e.camera;return t.value.setFromMatrixPosition(n.matrixWorld)})),Dj=function(e){Y(n,e);var t=$(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return V(this,n),(r=t.call(this)).scope=e,r.object3d=i,r.updateType=Qz,r._uniformNode=new Iq(null),r}return W(n,[{key:"getNodeType",value:function(){var e=this.scope;return e===n.WORLD_MATRIX?"mat4":e===n.POSITION||e===n.VIEW_POSITION||e===n.DIRECTION||e===n.SCALE?"vec3":void 0}},{key:"update",value:function(e){var t=this.object3d,r=this._uniformNode,i=this.scope;if(i===n.WORLD_MATRIX)r.value=t.matrixWorld;else if(i===n.POSITION)r.value=r.value||new JL,r.value.setFromMatrixPosition(t.matrixWorld);else if(i===n.SCALE)r.value=r.value||new JL,r.value.setFromMatrixScale(t.matrixWorld);else if(i===n.DIRECTION)r.value=r.value||new JL,t.getWorldDirection(r.value);else if(i===n.VIEW_POSITION){var a=e.camera;r.value=r.value||new JL,r.value.setFromMatrixPosition(t.matrixWorld),r.value.applyMatrix4(a.matrixWorldInverse)}}},{key:"generate",value:function(e){var t=this.scope;return t===n.WORLD_MATRIX?this._uniformNode.nodeType="mat4":t!==n.POSITION&&t!==n.VIEW_POSITION&&t!==n.DIRECTION&&t!==n.SCALE||(this._uniformNode.nodeType="vec3"),this._uniformNode.build(e)}},{key:"serialize",value:function(e){oe(Q(n.prototype),"serialize",this).call(this,e),e.scope=this.scope}},{key:"deserialize",value:function(e){oe(Q(n.prototype),"deserialize",this).call(this,e),this.scope=e.scope}}],[{key:"type",get:function(){return"Object3DNode"}}]),n}(eG);Dj.WORLD_MATRIX="worldMatrix",Dj.POSITION="position",Dj.SCALE="scale",Dj.VIEW_POSITION="viewPosition",Dj.DIRECTION="direction";Dj.DIRECTION,Dj.WORLD_MATRIX,Dj.POSITION,Dj.SCALE,Dj.VIEW_POSITION;var Lj=function(e){Y(n,e);var t=$(n);function n(e){return V(this,n),t.call(this,e)}return W(n,[{key:"update",value:function(e){this.object3d=e.object,oe(Q(n.prototype),"update",this).call(this,e)}}],[{key:"type",get:function(){return"ModelNode"}}]),n}(Dj),Oj=(Lj.DIRECTION,rq(Lj,Lj.WORLD_MATRIX)),Fj=(Lj.POSITION,Lj.SCALE,Lj.VIEW_POSITION,Dq(new kL).onObjectUpdate((function(e,t){var n=e.object;return t.value.getNormalMatrix(n.matrixWorld)}))),Uj=Nj.mul(Oj).toVar("modelViewMatrix"),zj=xj("position","vec3"),Gj=zj.varying("positionLocal"),qj=zj.varying("positionPrevious"),Hj=Oj.mul(Gj).xyz.varying("v_positionWorld"),Vj=Gj.transformDirection(Oj).varying("v_positionWorldDirection").normalize().toVar("positionWorldDirection"),jj=Uj.mul(Gj).xyz.varying("v_positionView"),Wj=jj.negate().varying("v_positionViewDirection").normalize().toVar("positionViewDirection"),Xj=lq(rq(function(e){Y(n,e);var t=$(n);function n(){var e;return V(this,n),(e=t.call(this,"bool")).isFrontFacingNode=!0,e}return W(n,[{key:"generate",value:function(e){var t=e.renderer,n=e.material;return t.coordinateSystem===hL&&1===n.side?"false":e.getFrontFacing()}}],[{key:"type",get:function(){return"FrontFacingNode"}}]),n}(eG))).mul(2).sub(1),Yj=xj("normal","vec3"),Qj=iq((function(e){return!1===e.geometry.hasAttribute("normal")?(console.warn('TSL.NormalNode: Vertex attribute "normal" not found on geometry.'),mq(0,1,0)):Yj}),"vec3").once()().toVar("normalLocal"),Jj=jj.dFdx().cross(jj.dFdy()).normalize().toVar("normalFlat"),Kj=iq((function(e){return!0===e.material.flatShading?Jj:XV(rW(Qj),"v_normalView").normalize()}),"vec3").once()().toVar("normalView"),Zj=XV(Kj.transformDirection(Nj),"v_normalWorld").normalize().toVar("normalWorld"),$j=iq((function(e){return e.context.setupNormal()}),"vec3").once()().mul(Xj).toVar("transformedNormalView"),eW=$j.transformDirection(Nj).toVar("transformedNormalWorld"),tW=iq((function(e){return e.context.setupClearcoatNormal()}),"vec3").once()().mul(Xj).toVar("transformedClearcoatNormalView"),nW=iq((function(e){var t=l(e,2),n=t[0],r=t[1],i=kq(void 0===r?Oj:r),a=n.div(mq(i[0].dot(i[0]),i[1].dot(i[1]),i[2].dot(i[2])));return i.mul(a).xyz})),rW=iq((function(e,t){var n=l(e,1)[0],r=t.renderer.nodes.modelNormalViewMatrix;if(null!==r)return r.transformDirection(n);var i=Fj.mul(n);return Nj.transformDirection(i)})),iW=Dq(0).onReference((function(e){return e.material})).onRenderUpdate((function(e){return e.material.refractionRatio})),aW=Wj.negate().reflect($j),oW=Wj.negate().refract($j,iW),sW=aW.transformDirection(Nj).toVar("reflectVector"),uW=oW.transformDirection(Nj).toVar("reflectVector"),lW=function(e){Y(n,e);var t=$(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return V(this,n),(r=t.call(this,e,i,a,o)).isCubeTextureNode=!0,r}return W(n,[{key:"getInputType",value:function(){return"cubeTexture"}},{key:"getDefaultUV",value:function(){var e=this.value;return e.mapping===HI?sW:e.mapping===VI?uW:(console.error('THREE.CubeTextureNode: Mapping "%s" not supported.',e.mapping),mq(0,0,0))}},{key:"setUpdateMatrix",value:function(){}},{key:"setupUV",value:function(e,t){var n=this.value;return e.renderer.coordinateSystem!==dL&&n.isRenderTargetTexture?t:mq(t.x.negate(),t.yz)}},{key:"generateUV",value:function(e,t){return t.build(e,"vec3")}}],[{key:"type",get:function(){return"CubeTextureNode"}}]),n}(Tj),cW=nq(lW),hW=function(e){Y(n,e);var t=$(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return V(this,n),(i=t.call(this,e,r)).isBufferNode=!0,i.bufferType=r,i.bufferCount=a,i}return W(n,[{key:"getElementType",value:function(e){return this.getNodeType(e)}},{key:"getInputType",value:function(){return"buffer"}}],[{key:"type",get:function(){return"BufferNode"}}]),n}(Iq),dW=function(e,t,n){return $G(new hW(e,t,n))},fW=function(e){Y(n,e);var t=$(n);function n(e,r){var i;return V(this,n),(i=t.call(this,e,r)).isArrayBufferElementNode=!0,i}return W(n,[{key:"generate",value:function(e){var t=oe(Q(n.prototype),"generate",this).call(this,e),r=this.getNodeType();return e.format(t,"vec4",r)}}],[{key:"type",get:function(){return"UniformArrayElementNode"}}]),n}(tG),pW=function(e){Y(n,e);var t=$(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return V(this,n),(r=t.call(this,null,"vec4")).array=e,r.elementType=i,r._elementType=null,r._elementLength=0,r.updateType=Yz,r.isArrayBufferNode=!0,r}return W(n,[{key:"getElementType",value:function(){return this.elementType||this._elementType}},{key:"getElementLength",value:function(){return this._elementLength}},{key:"update",value:function(){var e=this.array,t=this.value,n=this.getElementLength(),r=this.getElementType();if(1===n)for(var i=0;i<e.length;i++){t[4*i]=e[i]}else if("color"===r)for(var a=0;a<e.length;a++){var o=4*a,s=e[a];t[o]=s.r,t[o+1]=s.g,t[o+2]=s.b||0}else for(var u=0;u<e.length;u++){var l=4*u,c=e[u];t[l]=c.x,t[l+1]=c.y,t[l+2]=c.z||0,t[l+3]=c.w||0}}},{key:"setup",value:function(e){var t=this.array.length;this._elementType=null===this.elementType?Gz(this.array[0]):this.elementType,this._elementLength=e.getTypeLength(this._elementType);var r=Float32Array;return"i"===this._elementType.charAt(0)?r=Int32Array:"u"===this._elementType.charAt(0)&&(r=Uint32Array),this.value=new r(4*t),this.bufferCount=t,this.bufferType=e.changeComponentType("vec4",e.getComponentType(this._elementType)),oe(Q(n.prototype),"setup",this).call(this,e)}},{key:"element",value:function(e){return $G(new fW(this,$G(e)))}}],[{key:"type",get:function(){return"UniformArrayNode"}}]),n}(hW),AW=function(e,t){return $G(new pW(e,t))},vW=function(e){Y(n,e);var t=$(n);function n(e,r){var i;return V(this,n),(i=t.call(this,e,r)).referenceNode=e,i.isReferenceElementNode=!0,i}return W(n,[{key:"getNodeType",value:function(){return this.referenceNode.uniformType}},{key:"generate",value:function(e){var t=oe(Q(n.prototype),"generate",this).call(this,e),r=this.referenceNode.getNodeType(),i=this.getNodeType();return e.format(t,r,i)}}],[{key:"type",get:function(){return"ReferenceElementNode"}}]),n}(tG),mW=function(e){Y(n,e);var t=$(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return V(this,n),(i=t.call(this)).property=e,i.uniformType=r,i.object=a,i.count=o,i.properties=e.split("."),i.reference=a,i.node=null,i.group=null,i.name=null,i.updateType=Qz,i}return W(n,[{key:"element",value:function(e){return $G(new vW(this,$G(e)))}},{key:"setGroup",value:function(e){return this.group=e,this}},{key:"label",value:function(e){return this.name=e,this}},{key:"setNodeType",value:function(e){var t=null;t=null!==this.count?dW(null,e,this.count):Array.isArray(this.getValueFromReference())?AW(null,e):"texture"===e?Ej(null):"cubeTexture"===e?cW(null):Dq(null,e),null!==this.group&&t.setGroup(this.group),null!==this.name&&t.label(this.name),this.node=t.getSelf()}},{key:"getNodeType",value:function(e){return null===this.node&&(this.updateReference(e),this.updateValue()),this.node.getNodeType(e)}},{key:"getValueFromReference",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.reference,t=this.properties,n=e[t[0]],r=1;r<t.length;r++)n=n[t[r]];return n}},{key:"updateReference",value:function(e){return this.reference=null!==this.object?this.object:e.object,this.reference}},{key:"setup",value:function(){return this.updateValue(),this.node}},{key:"update",value:function(){this.updateValue()}},{key:"updateValue",value:function(){null===this.node&&this.setNodeType(this.uniformType);var e=this.getValueFromReference();Array.isArray(e)?this.node.array=e:this.node.value=e}}],[{key:"type",get:function(){return"ReferenceNode"}}]),n}(eG),gW=function(e,t,n){return $G(new mW(e,t,n))},yW=function(e,t,n,r){return $G(new mW(e,t,r,n))},bW=function(e){Y(n,e);var t=$(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return V(this,n),(i=t.call(this,e,r,a)).material=a,i.isMaterialReferenceNode=!0,i}return W(n,[{key:"updateReference",value:function(e){return this.reference=null!==this.material?this.material:e.material,this.reference}}],[{key:"type",get:function(){return"MaterialReferenceNode"}}]),n}(mW),xW=function(e,t,n){return $G(new bW(e,t,n))},_W=iq((function(e){return!1===e.geometry.hasAttribute("tangent")&&e.geometry.computeTangents(),xj("tangent","vec4")}))(),wW=_W.xyz.toVar("tangentLocal"),SW=Uj.mul(xq(wW,0)).xyz.varying("v_tangentView").normalize().toVar("tangentView"),MW=function(e){return e.mul(_W.w).xyz},kW=kq(SW,XV(MW(Kj.cross(SW)),"v_bitangentView").normalize().toVar("bitangentView"),Kj),TW=function(){var e=$q.cross(Wj);return e=e.cross($q).normalize(),e=IV(e,$j,Kq.mul(Gq.oneMinus()).oneMinus().pow2().pow2()).normalize()}(),EW=iq((function(e){var t=e.eye_pos,n=e.surf_norm,r=e.mapN,i=e.uv,a=t.dFdx(),o=t.dFdy(),s=i.dFdx(),u=i.dFdy(),l=n,c=o.cross(l),h=l.cross(a),d=c.mul(s.x).add(h.mul(u.x)),f=c.mul(s.y).add(h.mul(u.y)),p=d.dot(d).max(f.dot(f)),A=Xj.mul(p.inverseSqrt());return AH(d.mul(r.x,A),f.mul(r.y,A),l.mul(r.z)).normalize()})),CW=function(e){Y(n,e);var t=$(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return V(this,n),(r=t.call(this,"vec3")).node=e,r.scaleNode=i,r.normalMapType=0,r}return W(n,[{key:"setup",value:function(e){var t=this.normalMapType,n=this.scaleNode,r=this.node.mul(2).sub(1);null!==n&&(r=mq(r.xy.mul(n),r.z));var i=null;if(1===t)i=rW(r);else if(0===t){i=!0===e.hasGeometryAttribute("tangent")?kW.mul(r).normalize():EW({eye_pos:jj,surf_norm:Kj,mapN:r,uv:_j()})}return i}}],[{key:"type",get:function(){return"NormalMapNode"}}]),n}(rG),RW=nq(CW),BW=iq((function(e){var t=e.textureNode,n=e.bumpScale,r=function(e){return t.cache().context({getUV:function(t){return e(t.uvNode||_j())},forceUVContext:!0})},i=lq(r((function(e){return e})));return fq(lq(r((function(e){return e.add(e.dFdx())}))).sub(i),lq(r((function(e){return e.add(e.dFdy())}))).sub(i)).mul(n)})),PW=iq((function(e){var t=e.surf_pos,n=e.surf_norm,r=e.dHdxy,i=t.dFdx().normalize(),a=n,o=t.dFdy().normalize().cross(a),s=a.cross(i),u=i.dot(o).mul(Xj),l=u.sign().mul(r.x.mul(o).add(r.y.mul(s)));return u.abs().mul(n).sub(l).normalize()})),NW=function(e){Y(n,e);var t=$(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return V(this,n),(r=t.call(this,"vec3")).textureNode=e,r.scaleNode=i,r}return W(n,[{key:"setup",value:function(){var e=null!==this.scaleNode?this.scaleNode:1,t=BW({textureNode:this.textureNode,bumpScale:e});return PW({surf_pos:jj,surf_norm:Kj,dHdxy:t})}}],[{key:"type",get:function(){return"BumpMapNode"}}]),n}(rG),IW=nq(NW),DW=new Map,LW=function(e){Y(n,e);var t=$(n);function n(e){var r;return V(this,n),(r=t.call(this)).scope=e,r}return W(n,[{key:"getCache",value:function(e,t){var n=DW.get(e);return void 0===n&&(n=xW(e,t),DW.set(e,n)),n}},{key:"getFloat",value:function(e){return this.getCache(e,"float")}},{key:"getColor",value:function(e){return this.getCache(e,"color")}},{key:"getTexture",value:function(e){return this.getCache("map"===e?"map":e+"Map","texture")}},{key:"setup",value:function(e){var t=e.context.material,r=this.scope,i=null;if(r===n.COLOR){var a=void 0!==t.color?this.getColor(r):mq();i=t.map&&!0===t.map.isTexture?a.mul(this.getTexture("map")):a}else if(r===n.OPACITY){var o=this.getFloat(r);i=t.alphaMap&&!0===t.alphaMap.isTexture?o.mul(this.getTexture("alpha")):o}else if(r===n.SPECULAR_STRENGTH)i=t.specularMap&&!0===t.specularMap.isTexture?this.getTexture("specular").r:lq(1);else if(r===n.SPECULAR_INTENSITY){var s=this.getFloat(r);i=t.specularMap?s.mul(this.getTexture(r).a):s}else if(r===n.SPECULAR_COLOR){var u=this.getColor(r);i=t.specularColorMap&&!0===t.specularColorMap.isTexture?u.mul(this.getTexture(r).rgb):u}else if(r===n.ROUGHNESS){var l=this.getFloat(r);i=t.roughnessMap&&!0===t.roughnessMap.isTexture?l.mul(this.getTexture(r).g):l}else if(r===n.METALNESS){var c=this.getFloat(r);i=t.metalnessMap&&!0===t.metalnessMap.isTexture?c.mul(this.getTexture(r).b):c}else if(r===n.EMISSIVE){var h=this.getFloat("emissiveIntensity"),d=this.getColor(r).mul(h);i=t.emissiveMap&&!0===t.emissiveMap.isTexture?d.mul(this.getTexture(r)):d}else if(r===n.NORMAL)t.normalMap?(i=RW(this.getTexture("normal"),this.getCache("normalScale","vec2"))).normalMapType=t.normalMapType:i=t.bumpMap?IW(this.getTexture("bump").r,this.getFloat("bumpScale")):Kj;else if(r===n.CLEARCOAT){var f=this.getFloat(r);i=t.clearcoatMap&&!0===t.clearcoatMap.isTexture?f.mul(this.getTexture(r).r):f}else if(r===n.CLEARCOAT_ROUGHNESS){var p=this.getFloat(r);i=t.clearcoatRoughnessMap&&!0===t.clearcoatRoughnessMap.isTexture?p.mul(this.getTexture(r).r):p}else if(r===n.CLEARCOAT_NORMAL)i=t.clearcoatNormalMap?RW(this.getTexture(r),this.getCache(r+"Scale","vec2")):Kj;else if(r===n.SHEEN){var A=this.getColor("sheenColor").mul(this.getFloat("sheen"));i=t.sheenColorMap&&!0===t.sheenColorMap.isTexture?A.mul(this.getTexture("sheenColor").rgb):A}else if(r===n.SHEEN_ROUGHNESS){var v=this.getFloat(r);i=(i=t.sheenRoughnessMap&&!0===t.sheenRoughnessMap.isTexture?v.mul(this.getTexture(r).a):v).clamp(.07,1)}else if(r===n.ANISOTROPY)if(t.anisotropyMap&&!0===t.anisotropyMap.isTexture){var m=this.getTexture(r);i=Mq(mX.x,mX.y,mX.y.negate(),mX.x).mul(m.rg.mul(2).sub(fq(1)).normalize().mul(m.b))}else i=mX;else if(r===n.IRIDESCENCE_THICKNESS){var g=gW("1","float",t.iridescenceThicknessRange);if(t.iridescenceThicknessMap){var y=gW("0","float",t.iridescenceThicknessRange);i=g.sub(y).mul(this.getTexture(r).g).add(y)}else i=g}else if(r===n.TRANSMISSION){var b=this.getFloat(r);i=t.transmissionMap?b.mul(this.getTexture(r).r):b}else if(r===n.THICKNESS){var x=this.getFloat(r);i=t.thicknessMap?x.mul(this.getTexture(r).g):x}else if(r===n.IOR)i=this.getFloat(r);else if(r===n.LIGHT_MAP)i=this.getTexture(r).rgb.mul(this.getFloat("lightMapIntensity"));else if(r===n.AO_MAP)i=this.getTexture(r).r.sub(1).mul(this.getFloat("aoMapIntensity")).add(1);else{var _=this.getNodeType(e);i=this.getCache(r,_)}return i}}],[{key:"type",get:function(){return"MaterialNode"}}]),n}(eG);LW.ALPHA_TEST="alphaTest",LW.COLOR="color",LW.OPACITY="opacity",LW.SHININESS="shininess",LW.SPECULAR="specular",LW.SPECULAR_STRENGTH="specularStrength",LW.SPECULAR_INTENSITY="specularIntensity",LW.SPECULAR_COLOR="specularColor",LW.REFLECTIVITY="reflectivity",LW.ROUGHNESS="roughness",LW.METALNESS="metalness",LW.NORMAL="normal",LW.CLEARCOAT="clearcoat",LW.CLEARCOAT_ROUGHNESS="clearcoatRoughness",LW.CLEARCOAT_NORMAL="clearcoatNormal",LW.EMISSIVE="emissive",LW.ROTATION="rotation",LW.SHEEN="sheen",LW.SHEEN_ROUGHNESS="sheenRoughness",LW.ANISOTROPY="anisotropy",LW.IRIDESCENCE="iridescence",LW.IRIDESCENCE_IOR="iridescenceIOR",LW.IRIDESCENCE_THICKNESS="iridescenceThickness",LW.IOR="ior",LW.TRANSMISSION="transmission",LW.THICKNESS="thickness",LW.ATTENUATION_DISTANCE="attenuationDistance",LW.ATTENUATION_COLOR="attenuationColor",LW.LINE_SCALE="scale",LW.LINE_DASH_SIZE="dashSize",LW.LINE_GAP_SIZE="gapSize",LW.LINE_WIDTH="linewidth",LW.LINE_DASH_OFFSET="dashOffset",LW.POINT_WIDTH="pointWidth",LW.DISPERSION="dispersion",LW.LIGHT_MAP="light",LW.AO_MAP="ao";var OW=rq(LW,LW.ALPHA_TEST),FW=rq(LW,LW.COLOR),UW=rq(LW,LW.SHININESS),zW=rq(LW,LW.EMISSIVE),GW=rq(LW,LW.OPACITY),qW=rq(LW,LW.SPECULAR),HW=rq(LW,LW.SPECULAR_INTENSITY),VW=rq(LW,LW.SPECULAR_COLOR),jW=rq(LW,LW.SPECULAR_STRENGTH),WW=rq(LW,LW.REFLECTIVITY),XW=rq(LW,LW.ROUGHNESS),YW=rq(LW,LW.METALNESS),QW=rq(LW,LW.NORMAL).context({getUV:null}),JW=rq(LW,LW.CLEARCOAT),KW=rq(LW,LW.CLEARCOAT_ROUGHNESS),ZW=rq(LW,LW.CLEARCOAT_NORMAL).context({getUV:null}),$W=rq(LW,LW.ROTATION),eX=rq(LW,LW.SHEEN),tX=rq(LW,LW.SHEEN_ROUGHNESS),nX=rq(LW,LW.ANISOTROPY),rX=rq(LW,LW.IRIDESCENCE),iX=rq(LW,LW.IRIDESCENCE_IOR),aX=rq(LW,LW.IRIDESCENCE_THICKNESS),oX=rq(LW,LW.TRANSMISSION),sX=rq(LW,LW.THICKNESS),uX=rq(LW,LW.IOR),lX=rq(LW,LW.ATTENUATION_DISTANCE),cX=rq(LW,LW.ATTENUATION_COLOR),hX=rq(LW,LW.LINE_SCALE),dX=rq(LW,LW.LINE_DASH_SIZE),fX=rq(LW,LW.LINE_GAP_SIZE),pX=(LW.LINE_WIDTH,LW.LINE_DASH_OFFSET,LW.POINT_WIDTH,rq(LW,LW.DISPERSION)),AX=rq(LW,LW.LIGHT_MAP),vX=rq(LW,LW.AO_MAP),mX=Dq(new ML).onReference((function(e){return e.material})).onRenderUpdate((function(e){var t=e.material;this.value.set(t.anisotropy*Math.cos(t.anisotropyRotation),t.anisotropy*Math.sin(t.anisotropyRotation))})),gX=function(e){Y(n,e);var t=$(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return V(this,n),(e=t.call(this,"vec4")).positionNode=r,e}return W(n,[{key:"setup",value:function(e){if("fragment"===e.shaderStage)return XV(e.context.mvp);var t=this.positionNode||Gj,n=e.renderer.nodes.modelViewMatrix||Uj;return Pj.mul(n).mul(t)}}],[{key:"type",get:function(){return"ModelViewProjectionNode"}}]),n}(rG),yX=nq(gX),bX=function(e){Y(n,e);var t=$(n);function n(e){var r;return V(this,n),(r=t.call(this,"uint")).scope=e,r.isInstanceIndexNode=!0,r}return W(n,[{key:"generate",value:function(e){var t,r,i=this.getNodeType(e),a=this.scope;if(a===n.VERTEX)t=e.getVertexIndex();else if(a===n.INSTANCE)t=e.getInstanceIndex();else if(a===n.DRAW)t=e.getDrawIndex();else if(a===n.INVOCATION_LOCAL)t=e.getInvocationLocalIndex();else if(a===n.INVOCATION_SUBGROUP)t=e.getInvocationSubgroupIndex();else{if(a!==n.SUBGROUP)throw new Error("THREE.IndexNode: Unknown scope: "+a);t=e.getSubgroupIndex()}"vertex"===e.shaderStage||"compute"===e.shaderStage?r=t:r=XV(this).build(e,i);return r}}],[{key:"type",get:function(){return"IndexNode"}}]),n}(eG);bX.VERTEX="vertex",bX.INSTANCE="instance",bX.SUBGROUP="subgroup",bX.INVOCATION_LOCAL="invocationLocal",bX.INVOCATION_SUBGROUP="invocationSubgroup",bX.DRAW="draw";var xX=rq(bX,bX.VERTEX),_X=rq(bX,bX.INSTANCE),wX=(bX.SUBGROUP,bX.INVOCATION_SUBGROUP,bX.INVOCATION_LOCAL,rq(bX,bX.DRAW)),SX=nq(function(e){Y(n,e);var t=$(n);function n(e){var r;return V(this,n),(r=t.call(this,"void")).instanceMesh=e,r.instanceMatrixNode=null,r.instanceColorNode=null,r.updateType=Xz,r.buffer=null,r.bufferColor=null,r}return W(n,[{key:"setup",value:function(e){var t=this.instanceMatrixNode,n=this.instanceColorNode,r=this.instanceMesh;if(null===t){var i=r.instanceMatrix;if(r.count<=1e3)t=dW(i.array,"mat4",Math.max(r.count,1)).element(_X);else{var a=new Pz(i.array,16,1);this.buffer=a;var o=i.usage===cL?lj:uj,s=[o(a,"vec4",16,0),o(a,"vec4",16,4),o(a,"vec4",16,8),o(a,"vec4",16,12)];t=Tq.apply(void 0,s)}this.instanceMatrixNode=t}var u=r.instanceColor;if(u&&null===n){var l=new yU(u.array,3),c=u.usage===cL?lj:uj;this.bufferColor=l,n=mq(c(l,"vec3",3,0)),this.instanceColorNode=n}var h=t.mul(Gj).xyz;if(Gj.assign(h),e.hasGeometryAttribute("normal")){var d=nW(Qj,t);Qj.assign(d)}null!==this.instanceColorNode&&Fq("vec3","vInstanceColor").assign(this.instanceColorNode)}},{key:"update",value:function(){this.instanceMesh.instanceMatrix.usage!==cL&&null!=this.buffer&&this.instanceMesh.instanceMatrix.version!==this.buffer.version&&(this.buffer.version=this.instanceMesh.instanceMatrix.version),this.instanceMesh.instanceColor&&this.instanceMesh.instanceColor.usage!==cL&&null!=this.bufferColor&&this.instanceMesh.instanceColor.version!==this.bufferColor.version&&(this.bufferColor.version=this.instanceMesh.instanceColor.version)}}],[{key:"type",get:function(){return"InstanceNode"}}]),n}(eG)),MX=function(e){Y(n,e);var t=$(n);function n(e){var r;return V(this,n),(r=t.call(this,"void")).batchMesh=e,r.batchingIdNode=null,r}return W(n,[{key:"setup",value:function(e){var t=this;null===this.batchingIdNode&&(null===e.getDrawIndex()?this.batchingIdNode=_X:this.batchingIdNode=wX);var n=iq((function(e){var n=l(e,1)[0],r=Sj(Cj(t.batchMesh._indirectTexture),0),i=cq(n).modInt(cq(r)),a=cq(n).div(cq(r));return Cj(t.batchMesh._indirectTexture,pq(i,a)).x})).setLayout({name:"getIndirectIndex",type:"uint",inputs:[{name:"id",type:"int"}]}),r=n(cq(this.batchingIdNode)),i=this.batchMesh._matricesTexture,a=Sj(Cj(i),0),o=lq(r).mul(4).toInt().toVar(),s=o.modInt(a),u=o.div(cq(a)),c=Tq(Cj(i,pq(s,u)),Cj(i,pq(s.add(1),u)),Cj(i,pq(s.add(2),u)),Cj(i,pq(s.add(3),u))),h=this.batchMesh._colorsTexture;if(null!==h){var d=iq((function(e){var t=l(e,1)[0],n=Sj(Cj(h),0).x,r=t,i=r.modInt(n),a=r.div(n);return Cj(h,pq(i,a)).rgb})).setLayout({name:"getBatchingColor",type:"vec3",inputs:[{name:"id",type:"int"}]}),f=d(r);Fq("vec3","vBatchColor").assign(f)}var p=kq(c);Gj.assign(c.mul(Gj));var A=Qj.div(mq(p[0].dot(p[0]),p[1].dot(p[1]),p[2].dot(p[2]))),v=p.mul(A).xyz;Qj.assign(v),e.hasGeometryAttribute("tangent")&&wW.mulAssign(p)}}],[{key:"type",get:function(){return"BatchNode"}}]),n}(eG),kX=nq(MX),TX=new WeakMap,EX=function(e){Y(n,e);var t=$(n);function n(e){var r,i,a,o,s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return V(this,n),(r=t.call(this,"void")).skinnedMesh=e,r.useReference=s,r.updateType=Qz,r.skinIndexNode=xj("skinIndex","uvec4"),r.skinWeightNode=xj("skinWeight","vec4"),s?(i=gW("bindMatrix","mat4"),a=gW("bindMatrixInverse","mat4"),o=yW("skeleton.boneMatrices","mat4",e.skeleton.bones.length)):(i=Dq(e.bindMatrix,"mat4"),a=Dq(e.bindMatrixInverse,"mat4"),o=dW(e.skeleton.boneMatrices,"mat4",e.skeleton.bones.length)),r.bindMatrixNode=i,r.bindMatrixInverseNode=a,r.boneMatricesNode=o,r.previousBoneMatricesNode=null,r}return W(n,[{key:"getSkinnedPosition",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.boneMatricesNode,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Gj,n=this.skinIndexNode,r=this.skinWeightNode,i=this.bindMatrixNode,a=this.bindMatrixInverseNode,o=e.element(n.x),s=e.element(n.y),u=e.element(n.z),l=e.element(n.w),c=i.mul(t),h=AH(o.mul(r.x).mul(c),s.mul(r.y).mul(c),u.mul(r.z).mul(c),l.mul(r.w).mul(c));return a.mul(h).xyz}},{key:"getSkinnedNormal",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.boneMatricesNode,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Qj,n=this.skinIndexNode,r=this.skinWeightNode,i=this.bindMatrixNode,a=this.bindMatrixInverseNode,o=e.element(n.x),s=e.element(n.y),u=e.element(n.z),l=e.element(n.w),c=AH(r.x.mul(o),r.y.mul(s),r.z.mul(u),r.w.mul(l));return(c=a.mul(c).mul(i)).transformDirection(t).xyz}},{key:"getPreviousSkinnedPosition",value:function(e){var t=e.object;return null===this.previousBoneMatricesNode&&(t.skeleton.previousBoneMatrices=new Float32Array(t.skeleton.boneMatrices),this.previousBoneMatricesNode=yW("skeleton.previousBoneMatrices","mat4",t.skeleton.bones.length)),this.getSkinnedPosition(this.previousBoneMatricesNode,qj)}},{key:"needsPreviousBoneMatrices",value:function(e){var t=e.renderer.getMRT();return t&&t.has("velocity")}},{key:"setup",value:function(e){this.needsPreviousBoneMatrices(e)&&qj.assign(this.getPreviousSkinnedPosition(e));var t=this.getSkinnedPosition();if(Gj.assign(t),e.hasGeometryAttribute("normal")){var n=this.getSkinnedNormal();Qj.assign(n),e.hasGeometryAttribute("tangent")&&wW.assign(n)}}},{key:"generate",value:function(e,t){if("void"!==t)return Gj.build(e,t)}},{key:"update",value:function(e){var t=(this.useReference?e.object:this.skinnedMesh).skeleton;TX.get(t)!==e.frameId&&(TX.set(t,e.frameId),null!==this.previousBoneMatricesNode&&t.previousBoneMatrices.set(t.boneMatrices),t.update())}}],[{key:"type",get:function(){return"SkinningNode"}}]),n}(eG),CX=function(e){Y(n,e);var t=$(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return V(this,n),(e=t.call(this)).params=r,e}return W(n,[{key:"getVarName",value:function(e){return String.fromCharCode("i".charCodeAt()+e)}},{key:"getProperties",value:function(e){var t=e.getNodeProperties(this);if(void 0!==t.stackNode)return t;for(var n={},r=0,i=this.params.length-1;r<i;r++){var a=this.params[r],o=!0!==a.isNode&&a.name||this.getVarName(r),s=!0!==a.isNode&&a.type||"int";n[o]=mj(o,s)}var u=e.addStack();return t.returnsNode=this.params[this.params.length-1](n,u,e),t.stackNode=u,e.removeStack(),t}},{key:"getNodeType",value:function(e){var t=this.getProperties(e).returnsNode;return t?t.getNodeType(e):"void"}},{key:"setup",value:function(e){this.getProperties(e)}},{key:"generate",value:function(e){for(var t=this.getProperties(e),n=this.params,r=t.stackNode,i=0,a=n.length-1;i<a;i++){var o=n[i],s=null,u=null,l=null,c=null,h=null,d=null;o.isNode?(c="int",l=this.getVarName(i),s="0",u=o.build(e,c),h="<"):(c=o.type||"int",l=o.name||this.getVarName(i),s=o.start,u=o.end,h=o.condition,d=o.update,"number"===typeof s?s=e.generateConst(c,s):s&&s.isNode&&(s=s.build(e,c)),"number"===typeof u?u=e.generateConst(c,u):u&&u.isNode&&(u=u.build(e,c)),void 0!==s&&void 0===u?(s+=" - 1",u="0",h=">="):void 0!==u&&void 0===s&&(s="0",h="<"),void 0===h&&(h=Number(s)>Number(u)?">=":"<"));var f={start:s,end:u,condition:h},p=f.start,A=f.end,v="",m="",g="";d||(d="int"===c||"uint"===c?h.includes("<")?"++":"--":h.includes("<")?"+= 1.":"-= 1."),v+=e.getVar(c,l)+" = "+p,m+=l+" "+h+" "+A,g+=l+" "+d;var y="for ( ".concat(v,"; ").concat(m,"; ").concat(g," )");e.addFlowCode((0===i?"\n":"")+e.tab+y+" {\n\n").addFlowTab()}var b=r.build(e,"void"),x=t.returnsNode?t.returnsNode.build(e):"";e.removeFlowTab().addFlowCode("\n"+e.tab+b);for(var _=0,w=this.params.length-1;_<w;_++)e.addFlowCode((0===_?"":e.tab)+"}\n\n").removeFlowTab();return e.addFlowTab(),x}}],[{key:"type",get:function(){return"LoopNode"}}]),n}(eG),RX=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return $G(new CX(tq(t,"int"))).append()},BX=function(){return mj("break").append()},PX=new WeakMap,NX=new jL,IX=iq((function(e){var t=e.bufferMap,n=e.influence,r=e.stride,i=e.width,a=e.depth,o=e.offset,s=cq(xX).mul(r).add(o),u=s.div(i),l=s.sub(u.mul(i));return Cj(t,pq(l,u)).depth(a).mul(n)}));var DX,LX,OX=function(e){Y(n,e);var t=$(n);function n(e){var r;return V(this,n),(r=t.call(this,"void")).mesh=e,r.morphBaseInfluence=Dq(1),r.updateType=Qz,r}return W(n,[{key:"setup",value:function(e){var t=this,n=e.geometry,r=void 0!==n.morphAttributes.position,i=n.hasAttribute("normal")&&void 0!==n.morphAttributes.normal,a=n.morphAttributes.position||n.morphAttributes.normal||n.morphAttributes.color,o=void 0!==a?a.length:0,s=function(e){var t=void 0!==e.morphAttributes.position,n=void 0!==e.morphAttributes.normal,r=void 0!==e.morphAttributes.color,i=e.morphAttributes.position||e.morphAttributes.normal||e.morphAttributes.color,a=void 0!==i?i.length:0,o=PX.get(e);if(void 0===o||o.count!==a){void 0!==o&&o.texture.dispose();var s=e.morphAttributes.position||[],u=e.morphAttributes.normal||[],l=e.morphAttributes.color||[],c=0;!0===t&&(c=1),!0===n&&(c=2),!0===r&&(c=3);var h=e.attributes.position.count*c,d=1,f=4096;h>f&&(d=Math.ceil(h/f),h=f);var p=new Float32Array(h*d*4*a),A=new YL(p,h,d,a);A.type=lD,A.needsUpdate=!0;for(var v=4*c,m=0;m<a;m++)for(var g=s[m],y=u[m],b=l[m],x=h*d*4*m,_=0;_<g.count;_++){var w=_*v;!0===t&&(NX.fromBufferAttribute(g,_),p[x+w+0]=NX.x,p[x+w+1]=NX.y,p[x+w+2]=NX.z,p[x+w+3]=0),!0===n&&(NX.fromBufferAttribute(y,_),p[x+w+4]=NX.x,p[x+w+5]=NX.y,p[x+w+6]=NX.z,p[x+w+7]=0),!0===r&&(NX.fromBufferAttribute(b,_),p[x+w+8]=NX.x,p[x+w+9]=NX.y,p[x+w+10]=NX.z,p[x+w+11]=4===b.itemSize?NX.w:1)}o={count:a,texture:A,stride:c,size:new ML(h,d)},PX.set(e,o),e.addEventListener("dispose",(function t(){A.dispose(),PX.delete(e),e.removeEventListener("dispose",t)}))}return o}(n),u=s.texture,l=s.stride,c=s.size;!0===r&&Gj.mulAssign(this.morphBaseInfluence),!0===i&&Qj.mulAssign(this.morphBaseInfluence);var h=cq(c.width);RX(o,(function(e){var n=e.i,a=lq(0).toVar();t.mesh.count>1&&null!==t.mesh.morphTexture&&void 0!==t.mesh.morphTexture?a.assign(Cj(t.mesh.morphTexture,pq(cq(n).add(1),cq(_X))).r):a.assign(gW("morphTargetInfluences","float").element(n).toVar()),!0===r&&Gj.addAssign(IX({bufferMap:u,influence:a,stride:l,width:h,depth:n,offset:cq(0)})),!0===i&&Qj.addAssign(IX({bufferMap:u,influence:a,stride:l,width:h,depth:n,offset:cq(1)}))}))}},{key:"update",value:function(){var e=this.morphBaseInfluence;this.mesh.geometry.morphTargetsRelative?e.value=1:e.value=1-this.mesh.morphTargetInfluences.reduce((function(e,t){return e+t}),0)}}],[{key:"type",get:function(){return"MorphNode"}}]),n}(eG),FX=nq(OX),UX=function(e){Y(n,e);var t=$(n);function n(){var e;return V(this,n),(e=t.call(this,"vec3")).isLightingNode=!0,e}return W(n,[{key:"generate",value:function(){console.warn("Abstract function.")}}],[{key:"type",get:function(){return"LightingNode"}}]),n}(eG),zX=function(e){Y(n,e);var t=$(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return V(this,n),(e=t.call(this)).aoNode=r,e}return W(n,[{key:"setup",value:function(e){e.context.ambientOcclusion.mulAssign(this.aoNode)}}],[{key:"type",get:function(){return"AONode"}}]),n}(UX),GX=function(e){Y(n,e);var t=$(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return V(this,n),(r=t.call(this,e)).lightingModel=i,r.backdropNode=a,r.backdropAlphaNode=o,r._value=null,r}return W(n,[{key:"getContext",value:function(){var e=this.backdropNode,t=this.backdropAlphaNode,n={directDiffuse:mq().toVar("directDiffuse"),directSpecular:mq().toVar("directSpecular"),indirectDiffuse:mq().toVar("indirectDiffuse"),indirectSpecular:mq().toVar("indirectSpecular")};return{radiance:mq().toVar("radiance"),irradiance:mq().toVar("irradiance"),iblIrradiance:mq().toVar("iblIrradiance"),ambientOcclusion:lq(1).toVar("ambientOcclusion"),reflectedLight:n,backdrop:e,backdropAlpha:t}}},{key:"setup",value:function(e){return this.value=this._value||(this._value=this.getContext()),this.value.lightingModel=this.lightingModel||e.context.lightingModel,oe(Q(n.prototype),"setup",this).call(this,e)}}],[{key:"type",get:function(){return"LightingContextNode"}}]),n}(qV),qX=nq(GX),HX=function(e){Y(n,e);var t=$(n);function n(e){var r;return V(this,n),(r=t.call(this)).node=e,r}return W(n,[{key:"setup",value:function(e){e.context.irradiance.addAssign(this.node)}}],[{key:"type",get:function(){return"IrradianceNode"}}]),n}(UX),VX=function(e){Y(n,e);var t=$(n);function n(e){var r;return V(this,n),(r=t.call(this)).scope=e,r.isViewportNode=!0,r}return W(n,[{key:"getNodeType",value:function(){return this.scope===n.VIEWPORT?"vec4":"vec2"}},{key:"getUpdateType",value:function(){var e=Wz;return this.scope!==n.SIZE&&this.scope!==n.VIEWPORT||(e=Yz),this.updateType=e,e}},{key:"update",value:function(e){var t=e.renderer,r=t.getRenderTarget();this.scope===n.VIEWPORT?null!==r?LX.copy(r.viewport):(t.getViewport(LX),LX.multiplyScalar(t.getPixelRatio())):null!==r?(DX.width=r.width,DX.height=r.height):t.getDrawingBufferSize(DX)}},{key:"setup",value:function(){var e=this.scope;return e===n.SIZE?Dq(DX||(DX=new ML)):e===n.VIEWPORT?Dq(LX||(LX=new jL)):fq(XX.div(WX))}},{key:"generate",value:function(e){if(this.scope===n.COORDINATE){var t=e.getFragCoord();if(e.isFlipY()){var r=e.getNodeProperties(WX).outputNode.build(e);t="".concat(e.getType("vec2"),"( ").concat(t,".x, ").concat(r,".y - ").concat(t,".y )")}return t}return oe(Q(n.prototype),"generate",this).call(this,e)}}],[{key:"type",get:function(){return"ScreenNode"}}]),n}(eG);VX.COORDINATE="coordinate",VX.VIEWPORT="viewport",VX.SIZE="size",VX.UV="uv";var jX=rq(VX,VX.UV),WX=rq(VX,VX.SIZE),XX=rq(VX,VX.COORDINATE),YX=rq(VX,VX.VIEWPORT),QX=(YX.zw,YX.xy,new ML),JX=function(e){Y(n,e);var t=$(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:jX,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return V(this,n),null===a&&((a=new CU).minFilter=nD),(e=t.call(this,a,r,i)).generateMipmaps=!1,e.isOutputTextureNode=!0,e.updateBeforeType=Xz,e}return W(n,[{key:"updateBefore",value:function(e){var t=e.renderer;t.getDrawingBufferSize(QX);var n=this.value;n.image.width===QX.width&&n.image.height===QX.height||(n.image.width=QX.width,n.image.height=QX.height,n.needsUpdate=!0);var r=n.generateMipmaps;n.generateMipmaps=this.generateMipmaps,t.copyFramebufferToTexture(n),n.generateMipmaps=r}},{key:"clone",value:function(){var e=new this.constructor(this.uvNode,this.levelNode,this.value);return e.generateMipmaps=this.generateMipmaps,e}}],[{key:"type",get:function(){return"ViewportTextureNode"}}]),n}(Tj),KX=nq(JX,null,null,{generateMipmaps:!0}),ZX=null,$X=function(e){Y(n,e);var t=$(n);function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:jX,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return V(this,n),null===ZX&&(ZX=new RU),t.call(this,e,r,ZX)}return W(n,null,[{key:"type",get:function(){return"ViewportDepthTextureNode"}}]),n}(JX),eY=nq($X),tY=function(e){Y(n,e);var t=$(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return V(this,n),(r=t.call(this,"float")).scope=e,r.valueNode=i,r.isViewportDepthNode=!0,r}return W(n,[{key:"generate",value:function(e){return this.scope===n.DEPTH_BASE?e.getFragDepth():oe(Q(n.prototype),"generate",this).call(this,e)}},{key:"setup",value:function(e){var t=e.camera,r=this.scope,i=this.valueNode,a=null;if(r===n.DEPTH_BASE)null!==i&&(a=oY().assign(i));else if(r===n.DEPTH)a=t.isPerspectiveCamera?rY(jj.z,Rj,Bj):nY(jj.z,Rj,Bj);else if(r===n.LINEAR_DEPTH)if(null!==i)if(t.isPerspectiveCamera){var o=iY(i,Rj,Bj);a=nY(o,Rj,Bj)}else a=i;else a=nY(jj.z,Rj,Bj);return a}}],[{key:"type",get:function(){return"ViewportDepthNode"}}]),n}(eG);tY.DEPTH_BASE="depthBase",tY.DEPTH="depth",tY.LINEAR_DEPTH="linearDepth";var nY=function(e,t,n){return e.add(t).div(t.sub(n))},rY=function(e,t,n){return t.add(e).mul(n).div(n.sub(t).mul(e))},iY=function(e,t,n){return t.mul(n).div(n.sub(t).mul(e).sub(n))},aY=function(e,t,n){t=t.max(1e-6).toVar();var r=XH(e.div(t).add(1)),i=XH(n.div(t).add(1));return r.div(i)},oY=nq(tY,tY.DEPTH_BASE),sY=rq(tY,tY.DEPTH),uY=nq(tY,tY.LINEAR_DEPTH);eY();sY.assign=function(e){return oY(e)};var lY=function(e){Y(n,e);var t=$(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.DEFAULT;return V(this,n),(e=t.call(this)).scope=r,e}return W(n,[{key:"setup",value:function(e){oe(Q(n.prototype),"setup",this).call(this,e);var t=e.clippingContext,r=t.localClipIntersection,i=t.localClippingCount,a=t.globalClippingCount+i,o=r?a-i:a;return this.scope===n.ALPHA_TO_COVERAGE?this.setupAlphaToCoverage(t.planes,a,o):this.setupDefault(t.planes,a,o)}},{key:"setupAlphaToCoverage",value:function(e,t,n){return iq((function(){var r,i=AW(e),a=Oq("float","distanceToPlane"),o=Oq("float","distanceToGradient"),s=Oq("float","clipOpacity");if(s.assign(1),RX(n,(function(e){var t=e.i;r=i.element(t),a.assign(jj.dot(r.xyz).negate().add(r.w)),o.assign(a.fwidth().div(2)),s.mulAssign(OV(o.negate(),o,a)),s.equal(0).discard()})),n<t){var u=Oq("float","unionclipOpacity");u.assign(1),RX({start:n,end:t},(function(e){var t=e.i;r=i.element(t),a.assign(jj.dot(r.xyz).negate().add(r.w)),o.assign(a.fwidth().div(2)),u.mulAssign(OV(o.negate(),o,a).oneMinus())})),s.mulAssign(u.oneMinus())}Uq.a.mulAssign(s),Uq.a.equal(0).discard()}))()}},{key:"setupDefault",value:function(e,t,n){return iq((function(){var r,i=AW(e);if(RX(n,(function(e){var t=e.i;r=i.element(t),jj.dot(r.xyz).greaterThan(r.w).discard()})),n<t){var a=Oq("bool","clipped");a.assign(!0),RX({start:n,end:t},(function(e){var t=e.i;r=i.element(t),a.assign(jj.dot(r.xyz).greaterThan(r.w).and(a))})),a.discard()}}))()}}],[{key:"type",get:function(){return"ClippingNode"}}]),n}(eG);lY.ALPHA_TO_COVERAGE="alphaToCoverage",lY.DEFAULT="default";var cY=iq((function(e){var t=l(e,1)[0];return $H(mH(1e4,eV(mH(17,t.x).add(mH(.1,t.y)))).mul(AH(.1,oV(eV(mH(13,t.y).add(t.x))))))})),hY=iq((function(e){var t=l(e,1)[0];return cY(fq(cY(t.xy),t.z))})),dY=iq((function(e){var t=l(e,1)[0],n=bV(uV(hV(t.xyz)),uV(dV(t.xyz))).toVar("maxDeriv"),r=lq(1).div(lq(.05).mul(n)).toVar("pixScale"),i=fq(jH(JH(XH(r))),jH(KH(XH(r)))).toVar("pixScales"),a=fq(hY(JH(i.x.mul(t.xyz))),hY(JH(i.y.mul(t.xyz)))).toVar("alpha"),o=$H(XH(r)).toVar("lerpFactor"),s=AH(mH(o.oneMinus(),a.x),mH(o,a.y)).toVar("x"),u=yV(o,o.oneMinus()).toVar("a"),c=mq(s.mul(s).div(mH(2,u).mul(vH(1,u))),s.sub(mH(.5,u)).div(vH(1,u)),vH(1,vH(1,s).mul(vH(1,s)).div(mH(2,u).mul(vH(1,u))))).toVar("cases"),h=s.lessThan(u.oneMinus()).select(s.lessThan(u).select(c.x,c.y),c.z);return DV(h,1e-6,1)})),fY=function(e){Y(n,e);var t=$(n);function n(){var e;return V(this,n),(e=t.call(this)).isNodeMaterial=!0,e.type=e.constructor.type,e.forceSinglePass=!1,e.fog=!0,e.lights=!1,e.lightsNode=null,e.envNode=null,e.aoNode=null,e.colorNode=null,e.normalNode=null,e.opacityNode=null,e.backdropNode=null,e.backdropAlphaNode=null,e.alphaTestNode=null,e.positionNode=null,e.geometryNode=null,e.depthNode=null,e.shadowNode=null,e.shadowPositionNode=null,e.outputNode=null,e.mrtNode=null,e.fragmentNode=null,e.vertexNode=null,e}return W(n,[{key:"customProgramCacheKey",value:function(){return this.type+Uz(this)}},{key:"build",value:function(e){this.setup(e)}},{key:"setupObserver",value:function(e){return new Iz(e)}},{key:"setup",value:function(e){var t,n=this;e.context.setupNormal=function(){return n.setupNormal(e)},e.addStack(),e.stack.outputNode=this.vertexNode||this.setupPosition(e),null!==this.geometryNode&&(e.stack.outputNode=e.stack.outputNode.bypass(this.geometryNode)),e.addFlow("vertex",e.removeStack()),e.addStack();var r=this.setupClipping(e);if(!0===this.depthWrite&&this.setupDepth(e),null===this.fragmentNode){this.setupDiffuseColor(e),this.setupVariants(e);var i=this.setupLighting(e);null!==r&&e.stack.add(r);var a=xq(i,Uq.a).max(0);if(t=this.setupOutput(e,a),rH.assign(t),null!==this.outputNode&&(t=this.outputNode),null!==e.renderer.getRenderTarget()){var o=e.renderer.getMRT(),s=this.mrtNode;null!==o?(t=o,null!==s&&(t=o.merge(s))):null!==s&&(t=s)}}else{var u=this.fragmentNode;!0!==u.isOutputStructNode&&(u=xq(u)),t=this.setupOutput(e,u)}e.stack.outputNode=t,e.addFlow("fragment",e.removeStack()),e.monitor=this.setupObserver(e)}},{key:"setupClipping",value:function(e){if(null===e.clippingContext)return null;var t=e.clippingContext,n=t.globalClippingCount,r=t.localClippingCount,i=null;if(n||r){var a=e.renderer.samples;this.alphaToCoverage&&a>1?i=$G(new lY(lY.ALPHA_TO_COVERAGE)):e.stack.add($G(new lY))}return i}},{key:"setupDepth",value:function(e){var t=e.renderer,n=e.camera,r=this.depthNode;if(null===r){var i=t.getMRT();i&&i.has("depth")?r=i.get("depth"):!0===t.logarithmicDepthBuffer&&(r=n.isPerspectiveCamera?aY(yX().w,Rj,Bj):nY(jj.z,Rj,Bj))}null!==r&&sY.assign(r).append()}},{key:"setupPosition",value:function(e){var t,n=e.object,r=n.geometry;if(e.addStack(),(r.morphAttributes.position||r.morphAttributes.normal||r.morphAttributes.color)&&FX(n).append(),!0===n.isSkinnedMesh&&(t=n,$G(new EX(t,!0))).append(),this.displacementMap){var i=xW("displacementMap","texture"),a=xW("displacementScale","float"),o=xW("displacementBias","float");Gj.addAssign(Qj.normalize().mul(i.x.mul(a).add(o)))}n.isBatchedMesh&&kX(n).append(),n.instanceMatrix&&!0===n.instanceMatrix.isInstancedBufferAttribute&&SX(n).append(),null!==this.positionNode&&Gj.assign(this.positionNode);var s=yX();return e.context.vertex=e.removeStack(),e.context.mvp=s,s}},{key:"setupDiffuseColor",value:function(e){var t=e.object,n=e.geometry,r=this.colorNode?xq(this.colorNode):FW;(!0===this.vertexColors&&n.hasAttribute("color")&&(r=xq(r.xyz.mul(xj("color","vec3")),r.a)),t.instanceColor)&&(r=Fq("vec3","vInstanceColor").mul(r));t.isBatchedMesh&&t._colorsTexture&&(r=Fq("vec3","vBatchColor").mul(r));Uq.assign(r);var i=this.opacityNode?lq(this.opacityNode):GW;if(Uq.a.assign(Uq.a.mul(i)),null!==this.alphaTestNode||this.alphaTest>0){var a=null!==this.alphaTestNode?lq(this.alphaTestNode):OW;Uq.a.lessThanEqual(a).discard()}!0===this.alphaHash&&Uq.a.lessThan(dY(Gj)).discard(),!1===this.transparent&&1===this.blending&&!1===this.alphaToCoverage&&Uq.a.assign(1)}},{key:"setupVariants",value:function(){}},{key:"setupOutgoingLight",value:function(){return!0===this.lights?mq(0):Uq.rgb}},{key:"setupNormal",value:function(){return this.normalNode?mq(this.normalNode):QW}},{key:"setupEnvironment",value:function(){var e=null;return this.envNode?e=this.envNode:this.envMap&&(e=this.envMap.isCubeTexture?xW("envMap","cubeTexture"):xW("envMap","texture")),e}},{key:"setupLightMap",value:function(e){var t=null;return e.material.lightMap&&(t=new HX(AX)),t}},{key:"setupLights",value:function(e){var t=[],n=this.setupEnvironment(e);n&&n.isLightingNode&&t.push(n);var r=this.setupLightMap(e);if(r&&r.isLightingNode&&t.push(r),null!==this.aoNode||e.material.aoMap){var i=null!==this.aoNode?this.aoNode:vX;t.push(new zX(i))}var a=this.lightsNode||e.lightsNode;return t.length>0&&(a=e.renderer.lighting.createNode([].concat(q(a.getLights()),t))),a}},{key:"setupLightingModel",value:function(){}},{key:"setupLighting",value:function(e){var t=e.material,n=this.backdropNode,r=this.backdropAlphaNode,i=this.emissiveNode,a=!0===this.lights||null!==this.lightsNode?this.setupLights(e):null,o=this.setupOutgoingLight(e);if(a&&a.getScope().hasLights){var s=this.setupLightingModel(e);o=qX(a,s,n,r)}else null!==n&&(o=mq(null!==r?IV(o,n,r):n));return(i&&!0===i.isNode||t.emissive&&!0===t.emissive.isColor)&&(zq.assign(mq(i||zW)),o=o.add(zq)),o}},{key:"setupOutput",value:function(e,t){if(!0===this.fog){var n=e.fogNode;n&&(t=xq(n.mix(t.rgb,n.colorNode),t.a))}return t}},{key:"setDefaultValues",value:function(e){for(var t in e){var n=e[t];void 0===this[t]&&(this[t]=n,n&&n.clone&&(this[t]=n.clone()))}var r=Object.getOwnPropertyDescriptors(e.constructor.prototype);for(var i in r)void 0===Object.getOwnPropertyDescriptor(this.constructor.prototype,i)&&void 0!==r[i].get&&Object.defineProperty(this.constructor.prototype,i,r[i])}},{key:"toJSON",value:function(e){var t=void 0===e||"string"===typeof e;t&&(e={textures:{},images:{},nodes:{}});var n=xF.prototype.toJSON.call(this,e),r=zz(this);n.inputNodes={};var i,a=ee(r);try{for(a.s();!(i=a.n()).done;){var o=i.value,s=o.property,u=o.childNode;n.inputNodes[s]=u.toJSON(e).uuid}}catch(f){a.e(f)}finally{a.f()}function l(e){var t=[];for(var n in e){var r=e[n];delete r.metadata,t.push(r)}return t}if(t){var c=l(e.textures),h=l(e.images),d=l(e.nodes);c.length>0&&(n.textures=c),h.length>0&&(n.images=h),d.length>0&&(n.nodes=d)}return n}},{key:"copy",value:function(e){return this.lightsNode=e.lightsNode,this.envNode=e.envNode,this.colorNode=e.colorNode,this.normalNode=e.normalNode,this.opacityNode=e.opacityNode,this.backdropNode=e.backdropNode,this.backdropAlphaNode=e.backdropAlphaNode,this.alphaTestNode=e.alphaTestNode,this.positionNode=e.positionNode,this.geometryNode=e.geometryNode,this.depthNode=e.depthNode,this.shadowNode=e.shadowNode,this.shadowPositionNode=e.shadowPositionNode,this.outputNode=e.outputNode,this.mrtNode=e.mrtNode,this.fragmentNode=e.fragmentNode,this.vertexNode=e.vertexNode,oe(Q(n.prototype),"copy",this).call(this,e)}}],[{key:"type",get:function(){return"NodeMaterial"}}]),n}(xF),pY=new TU,AY=function(e){Y(n,e);var t=$(n);function n(e){var r;return V(this,n),(r=t.call(this)).isLineBasicNodeMaterial=!0,r.lights=!1,r.setDefaultValues(pY),r.setValues(e),r}return W(n,null,[{key:"type",get:function(){return"LineBasicNodeMaterial"}}]),n}(fY),vY=new zU,mY=function(e){Y(n,e);var t=$(n);function n(e){var r;return V(this,n),(r=t.call(this)).isLineDashedNodeMaterial=!0,r.lights=!1,r.setDefaultValues(vY),r.offsetNode=null,r.dashScaleNode=null,r.dashSizeNode=null,r.gapSizeNode=null,r.setValues(e),r}return W(n,[{key:"setupVariants",value:function(){var e=this.offsetNode,t=this.dashScaleNode?lq(this.dashScaleNode):hX,n=this.dashSizeNode?lq(this.dashSizeNode):dX,r=this.dashSizeNode?lq(this.dashGapNode):fX;iH.assign(n),aH.assign(r);var i=XV(xj("lineDistance").mul(t));(e?i.add(e):i).mod(iH.add(aH)).greaterThan(iH).discard()}}],[{key:"type",get:function(){return"LineDashedNodeMaterial"}}]),n}(fY),gY=new OU,yY=function(e){Y(n,e);var t=$(n);function n(e){var r;return V(this,n),(r=t.call(this)).lights=!1,r.isMeshNormalNodeMaterial=!0,r.setDefaultValues(gY),r.setValues(e),r}return W(n,[{key:"setupDiffuseColor",value:function(){var e=this.opacityNode?lq(this.opacityNode):GW;Uq.assign(xq($G($j).mul(.5).add(.5),e))}}],[{key:"type",get:function(){return"MeshNormalNodeMaterial"}}]),n}(fY),bY=function(e){Y(n,e);var t=$(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vj;return V(this,n),(e=t.call(this,"vec2")).dirNode=r,e}return W(n,[{key:"setup",value:function(){var e=this.dirNode,t=e.z.atan2(e.x).mul(1/(2*Math.PI)).add(.5),n=e.y.clamp(-1,1).asin().mul(1/Math.PI).add(.5);return fq(t,n)}}],[{key:"type",get:function(){return"EquirectUVNode"}}]),n}(rG),xY=nq(bY),_Y=function(e){Y(n,e);var t=$(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return V(this,n),(e=t.call(this,r,i)).isCubeRenderTarget=!0,e}return W(n,[{key:"fromEquirectangularTexture",value:function(e,t){var n=t.minFilter,r=t.generateMipmaps;t.generateMipmaps=!0,this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;var i=new tU(5,5,5),a=xY(Vj),o=new fY;o.colorNode=Ej(t,a,0),o.side=1,o.blending=0;var s=new $F(i,o),u=new fU;u.add(s),t.minFilter===nD&&(t.minFilter=eD);var l=new cU(1,10,this),c=e.getMRT();return e.setMRT(null),l.update(e,u),e.setMRT(c),t.minFilter=n,t.currentGenerateMipmaps=r,s.geometry.dispose(),s.material.dispose(),this}}]),n}(dU),wY=new WeakMap;function SY(e){var t=e.target;t.removeEventListener("dispose",SY);var n=wY.get(t);void 0!==n&&(wY.delete(t),n.dispose())}function MY(e,t){t===jI?e.mapping=HI:t===WI&&(e.mapping=VI)}var kY=nq(function(e){Y(n,e);var t=$(n);function n(e){var r;V(this,n),(r=t.call(this,"vec3")).envNode=e,r._cubeTexture=null,r._cubeTextureNode=cW();var i=new hU;return i.isRenderTargetTexture=!0,r._defaultTexture=i,r.updateBeforeType=Yz,r}return W(n,[{key:"updateBefore",value:function(e){var t=e.renderer,n=e.material,r=this.envNode;if(r.isTextureNode||r.isMaterialReferenceNode){var i=r.isTextureNode?r.value:n[r.property];if(i&&i.isTexture){var a=i.mapping;if(a===jI||a===WI){if(wY.has(i)){var o=wY.get(i);MY(o,i.mapping),this._cubeTexture=o}else{var s=i.image;if(function(e){return null!==e&&void 0!==e&&e.height>0}(s)){var u=new _Y(s.height);u.fromEquirectangularTexture(t,i),MY(u.texture,i.mapping),this._cubeTexture=u.texture,wY.set(i,u.texture),i.addEventListener("dispose",SY)}else this._cubeTexture=this._defaultTexture}this._cubeTextureNode.value=this._cubeTexture}else this._cubeTextureNode=this.envNode}}}},{key:"setup",value:function(e){return this.updateBefore(e),this._cubeTextureNode}}],[{key:"type",get:function(){return"CubeMapNode"}}]),n}(rG)),TY=function(e){Y(n,e);var t=$(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return V(this,n),(e=t.call(this)).envNode=r,e}return W(n,[{key:"setup",value:function(e){e.context.environment=kY(this.envNode)}}],[{key:"type",get:function(){return"BasicEnvironmentNode"}}]),n}(UX),EY=function(e){Y(n,e);var t=$(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return V(this,n),(e=t.call(this)).lightMapNode=r,e}return W(n,[{key:"setup",value:function(e){var t=lq(1/Math.PI);e.context.irradianceLightMap=this.lightMapNode.mul(t)}}],[{key:"type",get:function(){return"BasicLightMapNode"}}]),n}(UX),CY=function(){function e(){V(this,e)}return W(e,[{key:"start",value:function(){}},{key:"finish",value:function(){}},{key:"direct",value:function(){}},{key:"directRectArea",value:function(){}},{key:"indirect",value:function(){}},{key:"ambientOcclusion",value:function(){}}]),e}(),RY=function(e){Y(n,e);var t=$(n);function n(){return V(this,n),t.call(this)}return W(n,[{key:"indirect",value:function(e,t,n){var r=e.ambientOcclusion,i=e.reflectedLight,a=n.context.irradianceLightMap;i.indirectDiffuse.assign(xq(0)),a?i.indirectDiffuse.addAssign(a):i.indirectDiffuse.addAssign(xq(1,1,1,0)),i.indirectDiffuse.mulAssign(r),i.indirectDiffuse.mulAssign(Uq.rgb)}},{key:"finish",value:function(e,t,n){var r=n.material,i=e.outgoingLight,a=n.context.environment;if(a)switch(r.combine){case 0:i.rgb.assign(IV(i.rgb,i.rgb.mul(a.rgb),jW.mul(WW)));break;case 1:i.rgb.assign(IV(i.rgb,a.rgb,jW.mul(WW)));break;case 2:i.rgb.addAssign(a.rgb.mul(jW.mul(WW)));break;default:console.warn("THREE.BasicLightingModel: Unsupported .combine value:",r.combine)}}}]),n}(CY),BY=new _F,PY=function(e){Y(n,e);var t=$(n);function n(e){var r;return V(this,n),(r=t.call(this)).isMeshBasicNodeMaterial=!0,r.lights=!0,r.setDefaultValues(BY),r.setValues(e),r}return W(n,[{key:"setupNormal",value:function(){return Kj}},{key:"setupEnvironment",value:function(e){var t=oe(Q(n.prototype),"setupEnvironment",this).call(this,e);return t?new TY(t):null}},{key:"setupLightMap",value:function(e){var t=null;return e.material.lightMap&&(t=new EY(AX)),t}},{key:"setupOutgoingLight",value:function(){return Uq.rgb}},{key:"setupLightingModel",value:function(){return new RY}}],[{key:"type",get:function(){return"MeshBasicNodeMaterial"}}]),n}(fY),NY=iq((function(e){var t=e.f0,n=e.f90,r=e.dotVH,i=r.mul(-5.55473).sub(6.98316).mul(r).exp2();return t.mul(i.oneMinus()).add(n.mul(i))})),IY=iq((function(e){return e.diffuseColor.mul(1/Math.PI)})),DY=iq((function(e){var t=e.dotNH;return nH.mul(lq(.5)).add(1).mul(lq(1/Math.PI)).mul(t.pow(nH))})),LY=iq((function(e){var t=e.lightDirection.add(Wj).normalize(),n=$j.dot(t).clamp(),r=Wj.dot(t).clamp(),i=NY({f0:eH,f90:1,dotVH:r}),a=lq(.25),o=DY({dotNH:n});return i.mul(a).mul(o)})),OY=function(e){Y(n,e);var t=$(n);function n(){var e,r=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return V(this,n),(e=t.call(this)).specular=r,e}return W(n,[{key:"direct",value:function(e){var t=e.lightDirection,n=e.lightColor,r=e.reflectedLight,i=$j.dot(t).clamp().mul(n);r.directDiffuse.addAssign(i.mul(IY({diffuseColor:Uq.rgb}))),!0===this.specular&&r.directSpecular.addAssign(i.mul(LY({lightDirection:t})).mul(jW))}},{key:"indirect",value:function(e){var t=e.ambientOcclusion,n=e.irradiance,r=e.reflectedLight;r.indirectDiffuse.addAssign(n.mul(IY({diffuseColor:Uq}))),r.indirectDiffuse.mulAssign(t)}}]),n}(RY),FY=new FU,UY=function(e){Y(n,e);var t=$(n);function n(e){var r;return V(this,n),(r=t.call(this)).isMeshLambertNodeMaterial=!0,r.lights=!0,r.setDefaultValues(FY),r.setValues(e),r}return W(n,[{key:"setupEnvironment",value:function(e){var t=oe(Q(n.prototype),"setupEnvironment",this).call(this,e);return t?new TY(t):null}},{key:"setupLightingModel",value:function(){return new OY(!1)}}],[{key:"type",get:function(){return"MeshLambertNodeMaterial"}}]),n}(fY),zY=new DU,GY=function(e){Y(n,e);var t=$(n);function n(e){var r;return V(this,n),(r=t.call(this)).isMeshPhongNodeMaterial=!0,r.lights=!0,r.shininessNode=null,r.specularNode=null,r.setDefaultValues(zY),r.setValues(e),r}return W(n,[{key:"setupEnvironment",value:function(e){var t=oe(Q(n.prototype),"setupEnvironment",this).call(this,e);return t?new TY(t):null}},{key:"setupLightingModel",value:function(){return new OY}},{key:"setupVariants",value:function(){var e=(this.shininessNode?lq(this.shininessNode):UW).max(1e-4);nH.assign(e);var t=this.specularNode||qW;eH.assign(t)}},{key:"copy",value:function(e){return this.shininessNode=e.shininessNode,this.specularNode=e.specularNode,oe(Q(n.prototype),"copy",this).call(this,e)}}],[{key:"type",get:function(){return"MeshPhongNodeMaterial"}}]),n}(fY),qY=iq((function(e){if(!1===e.geometry.hasAttribute("normal"))return lq(0);var t=Kj.dFdx().abs().max(Kj.dFdy().abs());return t.x.max(t.y).max(t.z)})),HY=iq((function(e){var t=e.roughness,n=qY(),r=t.max(.0525);return r=(r=r.add(n)).min(1)})),VY=iq((function(e){var t=e.alpha,n=e.dotNL,r=e.dotNV,i=t.pow2(),a=n.mul(i.add(i.oneMinus().mul(r.pow2())).sqrt()),o=r.mul(i.add(i.oneMinus().mul(n.pow2())).sqrt());return gH(.5,a.add(o).max(OH))})).setLayout({name:"V_GGX_SmithCorrelated",type:"float",inputs:[{name:"alpha",type:"float"},{name:"dotNL",type:"float"},{name:"dotNV",type:"float"}]}),jY=iq((function(e){var t=e.alphaT,n=e.alphaB,r=e.dotTV,i=e.dotBV,a=e.dotTL,o=e.dotBL,s=e.dotNV,u=e.dotNL,l=u.mul(mq(t.mul(r),n.mul(i),s).length()),c=s.mul(mq(t.mul(a),n.mul(o),u).length());return gH(.5,l.add(c)).saturate()})).setLayout({name:"V_GGX_SmithCorrelated_Anisotropic",type:"float",inputs:[{name:"alphaT",type:"float",qualifier:"in"},{name:"alphaB",type:"float",qualifier:"in"},{name:"dotTV",type:"float",qualifier:"in"},{name:"dotBV",type:"float",qualifier:"in"},{name:"dotTL",type:"float",qualifier:"in"},{name:"dotBL",type:"float",qualifier:"in"},{name:"dotNV",type:"float",qualifier:"in"},{name:"dotNL",type:"float",qualifier:"in"}]}),WY=iq((function(e){var t=e.alpha,n=e.dotNH,r=t.pow2(),i=n.pow2().mul(r.oneMinus()).oneMinus();return r.div(i.pow2()).mul(1/Math.PI)})).setLayout({name:"D_GGX",type:"float",inputs:[{name:"alpha",type:"float"},{name:"dotNH",type:"float"}]}),XY=lq(1/Math.PI),YY=iq((function(e){var t=e.alphaT,n=e.alphaB,r=e.dotNH,i=e.dotTH,a=e.dotBH,o=t.mul(n),s=mq(n.mul(i),t.mul(a),o.mul(r)),u=s.dot(s),l=o.div(u);return XY.mul(o.mul(l.pow2()))})).setLayout({name:"D_GGX_Anisotropic",type:"float",inputs:[{name:"alphaT",type:"float",qualifier:"in"},{name:"alphaB",type:"float",qualifier:"in"},{name:"dotNH",type:"float",qualifier:"in"},{name:"dotTH",type:"float",qualifier:"in"},{name:"dotBH",type:"float",qualifier:"in"}]}),QY=iq((function(e){var t,n,r=e.lightDirection,i=e.f0,a=e.f90,o=e.roughness,s=e.f,u=e.USE_IRIDESCENCE,l=e.USE_ANISOTROPY,c=e.normalView||$j,h=o.pow2(),d=r.add(Wj).normalize(),f=c.dot(r).clamp(),p=c.dot(Wj).clamp(),A=c.dot(d).clamp(),v=Wj.dot(d).clamp(),m=NY({f0:i,f90:a,dotVH:v});if(KG(u)&&(m=Xq.mix(m,s)),KG(l)){var g=Zq.dot(r),y=Zq.dot(Wj),b=Zq.dot(d),x=$q.dot(r),_=$q.dot(Wj),w=$q.dot(d);t=jY({alphaT:Jq,alphaB:h,dotTV:y,dotBV:_,dotTL:g,dotBL:x,dotNV:p,dotNL:f}),n=YY({alphaT:Jq,alphaB:h,dotNH:A,dotTH:b,dotBH:w})}else t=VY({alpha:h,dotNL:f,dotNV:p}),n=WY({alpha:h,dotNH:A});return m.mul(t).mul(n)})),JY=iq((function(e){var t=e.roughness,n=e.dotNV,r=xq(-1,-.0275,-.572,.022),i=xq(1,.0425,1.04,-.04),a=t.mul(r).add(i),o=a.x.mul(a.x).min(n.mul(-9.28).exp2()).mul(a.x).add(a.y);return fq(-1.04,1.04).mul(o).add(a.zw)})).setLayout({name:"DFGApprox",type:"vec2",inputs:[{name:"roughness",type:"float"},{name:"dotNV",type:"vec3"}]}),KY=iq((function(e){var t=e.dotNV,n=e.specularColor,r=e.specularF90,i=e.roughness,a=JY({dotNV:t,roughness:i});return n.mul(a.x).add(r.mul(a.y))})),ZY=iq((function(e){var t=e.f,n=e.f90,r=e.dotVH.oneMinus().saturate(),i=r.mul(r),a=r.mul(i,i).clamp(0,.9999);return t.sub(mq(n).mul(a)).div(a.oneMinus())})).setLayout({name:"Schlick_to_F0",type:"vec3",inputs:[{name:"f",type:"vec3"},{name:"f90",type:"float"},{name:"dotVH",type:"float"}]}),$Y=iq((function(e){var t=e.roughness,n=e.dotNH,r=t.pow2(),i=lq(1).div(r),a=n.pow2().oneMinus().max(.0078125);return lq(2).add(i).mul(a.pow(i.mul(.5))).div(2*Math.PI)})).setLayout({name:"D_Charlie",type:"float",inputs:[{name:"roughness",type:"float"},{name:"dotNH",type:"float"}]}),eQ=iq((function(e){var t=e.dotNV,n=e.dotNL;return lq(1).div(lq(4).mul(n.add(t).sub(n.mul(t))))})).setLayout({name:"V_Neubelt",type:"float",inputs:[{name:"dotNV",type:"float"},{name:"dotNL",type:"float"}]}),tQ=iq((function(e){var t=e.lightDirection,n=t.add(Wj).normalize(),r=$j.dot(t).clamp(),i=$j.dot(Wj).clamp(),a=$j.dot(n).clamp(),o=$Y({roughness:Wq,dotNH:a}),s=eQ({dotNV:i,dotNL:r});return jq.mul(o).mul(s)})),nQ=iq((function(e){var t=e.N,n=e.V,r=e.roughness,i=t.dot(n).saturate(),a=fq(r,i.oneMinus().sqrt());return a.assign(a.mul(.984375).add(.0078125)),a})).setLayout({name:"LTC_Uv",type:"vec2",inputs:[{name:"N",type:"vec3"},{name:"V",type:"vec3"},{name:"roughness",type:"float"}]}),rQ=iq((function(e){var t=e.f,n=t.length();return bV(n.mul(n).add(t.z).div(n.add(1)),0)})).setLayout({name:"LTC_ClippedSphereFormFactor",type:"float",inputs:[{name:"f",type:"vec3"}]}),iQ=iq((function(e){var t=e.v1,n=e.v2,r=t.dot(n),i=r.abs().toVar(),a=i.mul(.0145206).add(.4965155).mul(i).add(.8543985).toVar(),o=i.add(4.1616724).mul(i).add(3.417594).toVar(),s=a.div(o),u=r.greaterThan(0).select(s,bV(r.mul(r).oneMinus(),1e-7).inverseSqrt().mul(.5).sub(s));return t.cross(n).mul(u)})).setLayout({name:"LTC_EdgeVectorFormFactor",type:"vec3",inputs:[{name:"v1",type:"vec3"},{name:"v2",type:"vec3"}]}),aQ=iq((function(e){var t=e.N,n=e.V,r=e.P,i=e.mInv,a=e.p0,o=e.p1,s=e.p2,u=e.p3,l=o.sub(a).toVar(),c=u.sub(a).toVar(),h=l.cross(c),d=mq().toVar();return sq(h.dot(r.sub(a)).greaterThanEqual(0),(function(){var e=n.sub(t.mul(n.dot(t))).normalize(),l=t.cross(e).negate(),c=i.mul(kq(e,l,t).transpose()).toVar(),h=c.mul(a.sub(r)).normalize().toVar(),f=c.mul(o.sub(r)).normalize().toVar(),p=c.mul(s.sub(r)).normalize().toVar(),A=c.mul(u.sub(r)).normalize().toVar(),v=mq(0).toVar();v.addAssign(iQ({v1:h,v2:f})),v.addAssign(iQ({v1:f,v2:p})),v.addAssign(iQ({v1:p,v2:A})),v.addAssign(iQ({v1:A,v2:h})),d.assign(mq(rQ({f:v})))})),d})).setLayout({name:"LTC_Evaluate",type:"vec3",inputs:[{name:"N",type:"vec3"},{name:"V",type:"vec3"},{name:"P",type:"vec3"},{name:"mInv",type:"mat3"},{name:"p0",type:"vec3"},{name:"p1",type:"vec3"},{name:"p2",type:"vec3"},{name:"p3",type:"vec3"}]}),oQ=1/6,sQ=function(e){return mH(oQ,mH(e,mH(e,e.negate().add(3)).sub(3)).add(1))},uQ=function(e){return mH(oQ,mH(e,mH(e,mH(3,e).sub(6))).add(4))},lQ=function(e){return mH(oQ,mH(e,mH(e,mH(-3,e).add(3)).add(3)).add(1))},cQ=function(e){return mH(oQ,EV(e,3))},hQ=function(e){return sQ(e).add(uQ(e))},dQ=function(e){return lQ(e).add(cQ(e))},fQ=function(e){return AH(-1,uQ(e).div(sQ(e).add(uQ(e))))},pQ=function(e){return AH(1,cQ(e).div(lQ(e).add(cQ(e))))},AQ=function(e,t,n){var r=e.uvNode,i=mH(r,t.zw).add(.5),a=JH(i),o=$H(i),s=hQ(o.x),u=dQ(o.x),l=fQ(o.x),c=pQ(o.x),h=fQ(o.y),d=pQ(o.y),f=fq(a.x.add(l),a.y.add(h)).sub(.5).mul(t.xy),p=fq(a.x.add(c),a.y.add(h)).sub(.5).mul(t.xy),A=fq(a.x.add(l),a.y.add(d)).sub(.5).mul(t.xy),v=fq(a.x.add(c),a.y.add(d)).sub(.5).mul(t.xy),m=hQ(o.y).mul(AH(s.mul(e.uv(f).level(n)),u.mul(e.uv(p).level(n)))),g=dQ(o.y).mul(AH(s.mul(e.uv(A).level(n)),u.mul(e.uv(v).level(n))));return m.add(g)},vQ=iq((function(e){var t=l(e,2),n=t[0],r=t[1],i=void 0===r?lq(3):r,a=fq(n.size(cq(i))),o=fq(n.size(cq(i.add(1)))),s=gH(1,a),u=gH(1,o),c=AQ(n,xq(s,a),JH(i)),h=AQ(n,xq(u,o),KH(i));return $H(i).mix(c,h)})),mQ=iq((function(e){var t=l(e,5),n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=mq(LV(r.negate(),ZH(n),gH(1,a))),u=mq(uV(o[0].xyz),uV(o[1].xyz),uV(o[2].xyz));return ZH(s).mul(i.mul(u))})).setLayout({name:"getVolumeTransmissionRay",type:"vec3",inputs:[{name:"n",type:"vec3"},{name:"v",type:"vec3"},{name:"thickness",type:"float"},{name:"ior",type:"float"},{name:"modelMatrix",type:"mat4"}]}),gQ=iq((function(e){var t=l(e,2),n=t[0],r=t[1];return n.mul(DV(r.mul(2).sub(2),0,1))})).setLayout({name:"applyIorToRoughness",type:"float",inputs:[{name:"roughness",type:"float"},{name:"ior",type:"float"}]}),yQ=KX(),bQ=KX(),xQ=iq((function(e,t){var n=l(e,3),r=n[0],i=n[1],a=n[2],o=(1==t.material.side?yQ:bQ).uv(r),s=XH(WX.x).mul(gQ(i,a));return vQ(o,s)})),_Q=iq((function(e){var t=l(e,3),n=t[0],r=t[1],i=t[2];return sq(i.notEqual(0),(function(){var e=WH(r).negate().div(i);return VH(e.negate().mul(n))})),mq(1)})).setLayout({name:"volumeAttenuation",type:"vec3",inputs:[{name:"transmissionDistance",type:"float"},{name:"attenuationColor",type:"vec3"},{name:"attenuationDistance",type:"float"}]}),wQ=iq((function(e){var t,n,r=l(e,15),i=r[0],a=r[1],o=r[2],s=r[3],u=r[4],c=r[5],h=r[6],d=r[7],f=r[8],p=r[9],A=r[10],v=r[11],m=r[12],g=r[13],y=r[14];if(y){t=xq().toVar(),n=mq().toVar();var b=A.sub(1).mul(y.mul(.025)),x=mq(A.sub(b),A,A.add(b));RX({start:0,end:3},(function(e){var r=e.i,u=x.element(r),l=mQ(i,a,v,u,d),c=h.add(l),A=p.mul(f.mul(xq(c,1))),y=fq(A.xy.div(A.w)).toVar();y.addAssign(1),y.divAssign(2),y.assign(fq(y.x,y.y.oneMinus()));var b=xQ(y,o,u);t.element(r).assign(b.element(r)),t.a.addAssign(b.a),n.element(r).assign(s.element(r).mul(_Q(uV(l),m,g).element(r)))})),t.a.divAssign(3)}else{var _=mQ(i,a,v,A,d),w=h.add(_),S=p.mul(f.mul(xq(w,1))),M=fq(S.xy.div(S.w)).toVar();M.addAssign(1),M.divAssign(2),M.assign(fq(M.x,M.y.oneMinus())),t=xQ(M,o,A),n=s.mul(_Q(uV(_),m,g))}var k=n.rgb.mul(t.rgb),T=i.dot(a).clamp(),E=mq(KY({dotNV:T,specularColor:u,specularF90:c,roughness:o})),C=n.r.add(n.g,n.b).div(3);return xq(E.oneMinus().mul(k),t.a.oneMinus().mul(C).oneMinus())})),SQ=kq(3.2404542,-.969266,.0556434,-1.5371385,1.8760108,-.2040259,-.4985314,.041556,1.0572252),MQ=function(e,t){return e.sub(t).div(e.add(t)).pow2()},kQ=iq((function(e){var t=e.outsideIOR,n=e.eta2,r=e.cosTheta1,i=e.thinFilmThickness,a=e.baseF0,o=IV(t,n,OV(0,.03,i)),s=t.div(o).pow2().mul(r.pow2().oneMinus()).oneMinus();sq(s.lessThan(0),(function(){return mq(1)}));var u=s.sqrt(),l=MQ(o,t),c=NY({f0:l,f90:1,dotVH:r}),h=c.oneMinus(),d=o.lessThan(t).select(Math.PI,0),f=lq(Math.PI).sub(d),p=function(e){var t=e.sqrt();return mq(1).add(t).div(mq(1).sub(t))}(a.clamp(0,.9999)),A=MQ(p,o.toVec3()),v=NY({f0:A,f90:1,dotVH:u}),m=mq(p.x.lessThan(o).select(Math.PI,0),p.y.lessThan(o).select(Math.PI,0),p.z.lessThan(o).select(Math.PI,0)),g=o.mul(i,u,2),y=mq(f).add(m),b=c.mul(v).clamp(1e-5,.9999),x=b.sqrt(),_=h.pow2().mul(v).div(mq(1).sub(b)),w=c.add(_).toVar(),S=_.sub(h).toVar();return RX({start:1,end:2,condition:"<=",name:"m"},(function(e){var t=e.m;S.mulAssign(x);var n=function(e,t){var n=e.mul(2*Math.PI*1e-9),r=mq(54856e-17,44201e-17,52481e-17),i=mq(1681e3,1795300,2208400),a=mq(43278e5,93046e5,66121e5),o=lq(9747e-17*Math.sqrt(2*Math.PI*45282e5)).mul(n.mul(2239900).add(t.x).cos()).mul(n.pow2().mul(-45282e5).exp()),s=r.mul(a.mul(2*Math.PI).sqrt()).mul(i.mul(n).add(t).cos()).mul(n.pow2().negate().mul(a).exp());return s=mq(s.x.add(o),s.y,s.z).div(1.0685e-7),SQ.mul(s)}(lq(t).mul(g),lq(t).mul(y)).mul(2);w.addAssign(S.mul(n))})),w.max(mq(0))})).setLayout({name:"evalIridescence",type:"vec3",inputs:[{name:"outsideIOR",type:"float"},{name:"eta2",type:"float"},{name:"cosTheta1",type:"float"},{name:"thinFilmThickness",type:"float"},{name:"baseF0",type:"vec3"}]}),TQ=iq((function(e){var t=e.normal,n=e.viewDir,r=e.roughness,i=t.dot(n).saturate(),a=r.pow2(),o=GV(r.lessThan(.25),lq(-339.2).mul(a).add(lq(161.4).mul(r)).sub(25.9),lq(-8.48).mul(a).add(lq(14.3).mul(r)).sub(9.95)),s=GV(r.lessThan(.25),lq(44).mul(a).sub(lq(23.7).mul(r)).add(3.26),lq(1.97).mul(a).sub(lq(3.27).mul(r)).add(.72));return GV(r.lessThan(.25),0,lq(.1).mul(r).sub(.025)).add(o.mul(i).add(s).exp()).mul(1/Math.PI).saturate()})),EQ=mq(.04),CQ=lq(1),RQ=function(e){Y(n,e);var t=$(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]&&arguments[4],u=arguments.length>5&&void 0!==arguments[5]&&arguments[5];return V(this,n),(e=t.call(this)).clearcoat=r,e.sheen=i,e.iridescence=a,e.anisotropy=o,e.transmission=s,e.dispersion=u,e.clearcoatRadiance=null,e.clearcoatSpecularDirect=null,e.clearcoatSpecularIndirect=null,e.sheenSpecularDirect=null,e.sheenSpecularIndirect=null,e.iridescenceFresnel=null,e.iridescenceF0=null,e}return W(n,[{key:"start",value:function(e){if(!0===this.clearcoat&&(this.clearcoatRadiance=mq().toVar("clearcoatRadiance"),this.clearcoatSpecularDirect=mq().toVar("clearcoatSpecularDirect"),this.clearcoatSpecularIndirect=mq().toVar("clearcoatSpecularIndirect")),!0===this.sheen&&(this.sheenSpecularDirect=mq().toVar("sheenSpecularDirect"),this.sheenSpecularIndirect=mq().toVar("sheenSpecularIndirect")),!0===this.iridescence){var t=$j.dot(Wj).clamp();this.iridescenceFresnel=kQ({outsideIOR:lq(1),eta2:Yq,cosTheta1:t,thinFilmThickness:Qq,baseF0:eH}),this.iridescenceF0=ZY({f:this.iridescenceFresnel,f90:1,dotVH:t})}if(!0===this.transmission){var n=Hj,r=Ij.sub(Hj).normalize(),i=eW;e.backdrop=wQ(i,r,Gq,Uq,eH,tH,n,Oj,Nj,Pj,oH,uH,cH,lH,this.dispersion?hH:null),e.backdropAlpha=sH,Uq.a.mulAssign(IV(1,e.backdrop.a,sH))}}},{key:"computeMultiscattering",value:function(e,t,n){var r=$j.dot(Wj).clamp(),i=JY({roughness:Gq,dotNV:r}),a=(this.iridescenceF0?Xq.mix(eH,this.iridescenceF0):eH).mul(i.x).add(n.mul(i.y)),o=i.x.add(i.y).oneMinus(),s=eH.add(eH.oneMinus().mul(.047619)),u=a.mul(s).div(o.mul(s).oneMinus());e.addAssign(a),t.addAssign(u.mul(o))}},{key:"direct",value:function(e){var t=e.lightDirection,n=e.lightColor,r=e.reflectedLight,i=$j.dot(t).clamp().mul(n);if(!0===this.sheen&&this.sheenSpecularDirect.addAssign(i.mul(tQ({lightDirection:t}))),!0===this.clearcoat){var a=tW.dot(t).clamp().mul(n);this.clearcoatSpecularDirect.addAssign(a.mul(QY({lightDirection:t,f0:EQ,f90:CQ,roughness:Vq,normalView:tW})))}r.directDiffuse.addAssign(i.mul(IY({diffuseColor:Uq.rgb}))),r.directSpecular.addAssign(i.mul(QY({lightDirection:t,f0:eH,f90:1,roughness:Gq,iridescence:this.iridescence,f:this.iridescenceFresnel,USE_IRIDESCENCE:this.iridescence,USE_ANISOTROPY:this.anisotropy})))}},{key:"directRectArea",value:function(e){var t=e.lightColor,n=e.lightPosition,r=e.halfWidth,i=e.halfHeight,a=e.reflectedLight,o=e.ltc_1,s=e.ltc_2,u=n.add(r).sub(i),l=n.sub(r).sub(i),c=n.sub(r).add(i),h=n.add(r).add(i),d=$j,f=Wj,p=jj.toVar(),A=nQ({N:d,V:f,roughness:Gq}),v=o.uv(A).toVar(),m=s.uv(A).toVar(),g=kq(mq(v.x,0,v.y),mq(0,1,0),mq(v.z,0,v.w)).toVar(),y=eH.mul(m.x).add(eH.oneMinus().mul(m.y)).toVar();a.directSpecular.addAssign(t.mul(y).mul(aQ({N:d,V:f,P:p,mInv:g,p0:u,p1:l,p2:c,p3:h}))),a.directDiffuse.addAssign(t.mul(Uq).mul(aQ({N:d,V:f,P:p,mInv:kq(1,0,0,0,1,0,0,0,1),p0:u,p1:l,p2:c,p3:h})))}},{key:"indirect",value:function(e,t,n){this.indirectDiffuse(e,t,n),this.indirectSpecular(e,t,n),this.ambientOcclusion(e,t,n)}},{key:"indirectDiffuse",value:function(e){var t=e.irradiance;e.reflectedLight.indirectDiffuse.addAssign(t.mul(IY({diffuseColor:Uq})))}},{key:"indirectSpecular",value:function(e){var t=e.radiance,n=e.iblIrradiance,r=e.reflectedLight;if(!0===this.sheen&&this.sheenSpecularIndirect.addAssign(n.mul(jq,TQ({normal:$j,viewDir:Wj,roughness:Wq}))),!0===this.clearcoat){var i=tW.dot(Wj).clamp(),a=KY({dotNV:i,specularColor:EQ,specularF90:CQ,roughness:Vq});this.clearcoatSpecularIndirect.addAssign(this.clearcoatRadiance.mul(a))}var o=mq().toVar("singleScattering"),s=mq().toVar("multiScattering"),u=n.mul(1/Math.PI);this.computeMultiscattering(o,s,tH);var l=o.add(s),c=Uq.mul(l.r.max(l.g).max(l.b).oneMinus());r.indirectSpecular.addAssign(t.mul(o)),r.indirectSpecular.addAssign(s.mul(u)),r.indirectDiffuse.addAssign(c.mul(u))}},{key:"ambientOcclusion",value:function(e){var t=e.ambientOcclusion,n=e.reflectedLight,r=$j.dot(Wj).clamp().add(t),i=Gq.mul(-16).oneMinus().negate().exp2(),a=t.sub(r.pow(i).oneMinus()).clamp();!0===this.clearcoat&&this.clearcoatSpecularIndirect.mulAssign(t),!0===this.sheen&&this.sheenSpecularIndirect.mulAssign(t),n.indirectDiffuse.mulAssign(t),n.indirectSpecular.mulAssign(a)}},{key:"finish",value:function(e){var t=e.outgoingLight;if(!0===this.clearcoat){var n=tW.dot(Wj).clamp(),r=NY({dotVH:n,f0:EQ,f90:CQ}),i=t.mul(Hq.mul(r).oneMinus()).add(this.clearcoatSpecularDirect.add(this.clearcoatSpecularIndirect).mul(Hq));t.assign(i)}if(!0===this.sheen){var a=jq.r.max(jq.g).max(jq.b).mul(.157).oneMinus(),o=t.mul(a).add(this.sheenSpecularDirect,this.sheenSpecularIndirect);t.assign(o)}}}]),n}(CY),BQ=lq(1),PQ=lq(-2),NQ=lq(.8),IQ=lq(-1),DQ=lq(.4),LQ=lq(2),OQ=lq(.305),FQ=lq(3),UQ=lq(.21),zQ=lq(4),GQ=lq(4),qQ=lq(16),HQ=iq((function(e){var t=l(e,1)[0],n=mq(oV(t)).toVar(),r=lq(-1).toVar();return sq(n.x.greaterThan(n.z),(function(){sq(n.x.greaterThan(n.y),(function(){r.assign(GV(t.x.greaterThan(0),0,3))})).Else((function(){r.assign(GV(t.y.greaterThan(0),1,4))}))})).Else((function(){sq(n.z.greaterThan(n.y),(function(){r.assign(GV(t.z.greaterThan(0),2,5))})).Else((function(){r.assign(GV(t.y.greaterThan(0),1,4))}))})),r})).setLayout({name:"getFace",type:"float",inputs:[{name:"direction",type:"vec3"}]}),VQ=iq((function(e){var t=l(e,2),n=t[0],r=t[1],i=fq().toVar();return sq(r.equal(0),(function(){i.assign(fq(n.z,n.y).div(oV(n.x)))})).ElseIf(r.equal(1),(function(){i.assign(fq(n.x.negate(),n.z.negate()).div(oV(n.y)))})).ElseIf(r.equal(2),(function(){i.assign(fq(n.x.negate(),n.y).div(oV(n.z)))})).ElseIf(r.equal(3),(function(){i.assign(fq(n.z.negate(),n.y).div(oV(n.x)))})).ElseIf(r.equal(4),(function(){i.assign(fq(n.x.negate(),n.z).div(oV(n.y)))})).Else((function(){i.assign(fq(n.x,n.y).div(oV(n.z)))})),mH(.5,i.add(1))})).setLayout({name:"getUV",type:"vec2",inputs:[{name:"direction",type:"vec3"},{name:"face",type:"float"}]}),jQ=iq((function(e){var t=l(e,1)[0],n=lq(0).toVar();return sq(t.greaterThanEqual(NQ),(function(){n.assign(BQ.sub(t).mul(IQ.sub(PQ)).div(BQ.sub(NQ)).add(PQ))})).ElseIf(t.greaterThanEqual(DQ),(function(){n.assign(NQ.sub(t).mul(LQ.sub(IQ)).div(NQ.sub(DQ)).add(IQ))})).ElseIf(t.greaterThanEqual(OQ),(function(){n.assign(DQ.sub(t).mul(FQ.sub(LQ)).div(DQ.sub(OQ)).add(LQ))})).ElseIf(t.greaterThanEqual(UQ),(function(){n.assign(OQ.sub(t).mul(zQ.sub(FQ)).div(OQ.sub(UQ)).add(FQ))})).Else((function(){n.assign(lq(-2).mul(XH(mH(1.16,t))))})),n})).setLayout({name:"roughnessToMip",type:"float",inputs:[{name:"roughness",type:"float"}]}),WQ=iq((function(e){var t=l(e,2),n=t[0],r=t[1],i=n.toVar();i.assign(mH(2,i).sub(1));var a=mq(i,1).toVar();return sq(r.equal(0),(function(){a.assign(a.zyx)})).ElseIf(r.equal(1),(function(){a.assign(a.xzy),a.xz.mulAssign(-1)})).ElseIf(r.equal(2),(function(){a.x.mulAssign(-1)})).ElseIf(r.equal(3),(function(){a.assign(a.zyx),a.xz.mulAssign(-1)})).ElseIf(r.equal(4),(function(){a.assign(a.xzy),a.xy.mulAssign(-1)})).ElseIf(r.equal(5),(function(){a.z.mulAssign(-1)})),a})).setLayout({name:"getDirection",type:"vec3",inputs:[{name:"uv",type:"vec2"},{name:"face",type:"float"}]}),XQ=iq((function(e){var t=l(e,6),n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],u=lq(i),c=mq(r),h=DV(jQ(u),PQ,s),d=$H(h),f=JH(h),p=mq(YQ(n,c,f,a,o,s)).toVar();return sq(d.notEqual(0),(function(){var e=mq(YQ(n,c,f.add(1),a,o,s)).toVar();p.assign(IV(p,e,d))})),p})),YQ=iq((function(e){var t=l(e,6),n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],u=lq(i).toVar(),c=mq(r),h=lq(HQ(c)).toVar(),d=lq(bV(GQ.sub(u),0)).toVar();u.assign(bV(u,GQ));var f=lq(jH(u)).toVar(),p=fq(VQ(c,h).mul(f.sub(2)).add(1)).toVar();return sq(h.greaterThan(2),(function(){p.y.addAssign(f),h.subAssign(3)})),p.x.addAssign(h.mul(f)),p.x.addAssign(d.mul(mH(3,qQ))),p.y.addAssign(mH(4,jH(s).sub(f))),p.x.mulAssign(a),p.y.mulAssign(o),n.uv(p).grad(fq(),fq())})),QQ=iq((function(e){var t=e.envMap,n=e.mipInt,r=e.outputDirection,i=e.theta,a=e.axis,o=e.CUBEUV_TEXEL_WIDTH,s=e.CUBEUV_TEXEL_HEIGHT,u=e.CUBEUV_MAX_MIP,l=tV(i),c=r.mul(l).add(a.cross(r).mul(eV(i))).add(a.mul(a.dot(r).mul(l.oneMinus())));return YQ(t,c,n,o,s,u)})),JQ=iq((function(e){var t=e.n,n=e.latitudinal,r=e.poleAxis,i=e.outputDirection,a=e.weights,o=e.samples,s=e.dTheta,u=e.mipInt,l=e.envMap,c=e.CUBEUV_TEXEL_WIDTH,h=e.CUBEUV_TEXEL_HEIGHT,d=e.CUBEUV_MAX_MIP,f=mq(GV(n,r,TV(r,i))).toVar();sq(UH(f.equals(mq(0))),(function(){f.assign(mq(i.z,0,i.x.negate()))})),f.assign(ZH(f));var p=mq().toVar();return p.addAssign(a.element(cq(0)).mul(QQ({theta:0,axis:f,outputDirection:i,mipInt:u,envMap:l,CUBEUV_TEXEL_WIDTH:c,CUBEUV_TEXEL_HEIGHT:h,CUBEUV_MAX_MIP:d}))),RX({start:cq(1),end:t},(function(e){var t=e.i;sq(t.greaterThanEqual(o),(function(){BX()}));var n=lq(s.mul(lq(t))).toVar();p.addAssign(a.element(t).mul(QQ({theta:n.mul(-1),axis:f,outputDirection:i,mipInt:u,envMap:l,CUBEUV_TEXEL_WIDTH:c,CUBEUV_TEXEL_HEIGHT:h,CUBEUV_MAX_MIP:d}))),p.addAssign(a.element(t).mul(QQ({theta:n,axis:f,outputDirection:i,mipInt:u,envMap:l,CUBEUV_TEXEL_WIDTH:c,CUBEUV_TEXEL_HEIGHT:h,CUBEUV_MAX_MIP:d})))})),xq(p,1)})),KQ=null,ZQ=new WeakMap;function $Q(e){var t=ZQ.get(e);if((void 0!==t?t.pmremVersion:-1)!==e.pmremVersion){var n=e.image;if(e.isCubeTexture){if(!function(e){if(null===e||void 0===e)return!1;for(var t=0,n=6,r=0;r<n;r++)void 0!==e[r]&&t++;return t===n}(n))return null;t=KQ.fromCubemap(e,t)}else{if(!function(e){return null!==e&&void 0!==e&&e.height>0}(n))return null;t=KQ.fromEquirectangular(e,t)}t.pmremVersion=e.pmremVersion,ZQ.set(e,t)}return t.texture}var eJ=function(e){Y(n,e);var t=$(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;V(this,n),(r=t.call(this,"vec3"))._value=e,r._pmrem=null,r.uvNode=i,r.levelNode=a,r._generator=null;var o=new VL;return o.isRenderTargetTexture=!0,r._texture=Ej(o),r._width=Dq(0),r._height=Dq(0),r._maxMip=Dq(0),r.updateBeforeType=Yz,r}return W(n,[{key:"value",get:function(){return this._value},set:function(e){this._value=e,this._pmrem=null}},{key:"updateFromTexture",value:function(e){var t=function(e){var t=Math.log2(e)-2,n=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),112)),texelHeight:n,maxMip:t}}(e.image.height);this._texture.value=e,this._width.value=t.texelWidth,this._height.value=t.texelHeight,this._maxMip.value=t.maxMip}},{key:"updateBefore",value:function(){var e=this._pmrem,t=e?e.pmremVersion:-1,n=this._value;t!==n.pmremVersion&&null!==(e=!0===n.isPMREMTexture?n:$Q(n))&&(this._pmrem=e,this.updateFromTexture(e))}},{key:"setup",value:function(e){null===KQ&&(KQ=e.createPMREMGenerator()),this.updateBefore(e);var t=this.uvNode;null===t&&e.context.getUV&&(t=e.context.getUV(this));var n=this.value;e.renderer.coordinateSystem===hL&&!0!==n.isPMREMTexture&&!0===n.isRenderTargetTexture&&(t=mq(t.x.negate(),t.yz));var r=this.levelNode;return null===r&&e.context.getTextureLevel&&(r=e.context.getTextureLevel(this)),XQ(this._texture,t,r,this._width,this._height,this._maxMip)}}],[{key:"type",get:function(){return"PMREMNode"}}]),n}(rG);var tJ=nq(eJ),nJ=new WeakMap,rJ=function(e){Y(n,e);var t=$(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return V(this,n),(e=t.call(this)).envNode=r,e}return W(n,[{key:"setup",value:function(e){var t=e.material,n=this.envNode;if(n.isTextureNode||n.isMaterialReferenceNode){var r=n.isTextureNode?n.value:t[n.property],i=nJ.get(r);void 0===i&&(i=tJ(r),nJ.set(r,i)),n=i}var a=t.envMap?gW("envMapIntensity","float",e.material):gW("environmentIntensity","float",e.scene),o=!0===t.useAnisotropy||t.anisotropy>0?TW:$j,s=n.context(iJ(Gq,o)).mul(a),u=n.context(aJ(eW)).mul(Math.PI).mul(a),l=dj(s),c=dj(u);e.context.radiance.addAssign(l),e.context.iblIrradiance.addAssign(c);var h=e.context.lightingModel.clearcoatRadiance;if(h){var d=n.context(iJ(Vq,tW)).mul(a),f=dj(d);h.addAssign(f)}}}],[{key:"type",get:function(){return"EnvironmentNode"}}]),n}(UX),iJ=function(e,t){var n=null;return{getUV:function(){return null===n&&(n=Wj.negate().reflect(t),n=(n=e.mul(e).mix(n,t).normalize()).transformDirection(Nj)),n},getTextureLevel:function(){return e}}},aJ=function(e){return{getUV:function(){return e},getTextureLevel:function(){return lq(1)}}},oJ=new NU,sJ=function(e){Y(n,e);var t=$(n);function n(e){var r;return V(this,n),(r=t.call(this)).isMeshStandardNodeMaterial=!0,r.lights=!0,r.emissiveNode=null,r.metalnessNode=null,r.roughnessNode=null,r.setDefaultValues(oJ),r.setValues(e),r}return W(n,[{key:"setupEnvironment",value:function(e){var t=oe(Q(n.prototype),"setupEnvironment",this).call(this,e);return null===t&&e.environmentNode&&(t=e.environmentNode),t?new rJ(t):null}},{key:"setupLightingModel",value:function(){return new RQ}},{key:"setupSpecular",value:function(){var e=IV(mq(.04),Uq.rgb,qq);eH.assign(e),tH.assign(1)}},{key:"setupVariants",value:function(){var e=this.metalnessNode?lq(this.metalnessNode):YW;qq.assign(e);var t=this.roughnessNode?lq(this.roughnessNode):XW;t=HY({roughness:t}),Gq.assign(t),this.setupSpecular(),Uq.assign(xq(Uq.rgb.mul(e.oneMinus()),Uq.a))}},{key:"copy",value:function(e){return this.emissiveNode=e.emissiveNode,this.metalnessNode=e.metalnessNode,this.roughnessNode=e.roughnessNode,oe(Q(n.prototype),"copy",this).call(this,e)}}],[{key:"type",get:function(){return"MeshStandardNodeMaterial"}}]),n}(fY),uJ=new IU,lJ=function(e){Y(n,e);var t=$(n);function n(e){var r;return V(this,n),(r=t.call(this)).isMeshPhysicalNodeMaterial=!0,r.clearcoatNode=null,r.clearcoatRoughnessNode=null,r.clearcoatNormalNode=null,r.sheenNode=null,r.sheenRoughnessNode=null,r.iridescenceNode=null,r.iridescenceIORNode=null,r.iridescenceThicknessNode=null,r.specularIntensityNode=null,r.specularColorNode=null,r.iorNode=null,r.transmissionNode=null,r.thicknessNode=null,r.attenuationDistanceNode=null,r.attenuationColorNode=null,r.dispersionNode=null,r.anisotropyNode=null,r.setDefaultValues(uJ),r.setValues(e),r}return W(n,[{key:"useClearcoat",get:function(){return this.clearcoat>0||null!==this.clearcoatNode}},{key:"useIridescence",get:function(){return this.iridescence>0||null!==this.iridescenceNode}},{key:"useSheen",get:function(){return this.sheen>0||null!==this.sheenNode}},{key:"useAnisotropy",get:function(){return this.anisotropy>0||null!==this.anisotropyNode}},{key:"useTransmission",get:function(){return this.transmission>0||null!==this.transmissionNode}},{key:"useDispersion",get:function(){return this.dispersion>0||null!==this.dispersionNode}},{key:"setupSpecular",value:function(){var e=this.iorNode?lq(this.iorNode):uX;oH.assign(e),eH.assign(IV(yV(CV(oH.sub(1).div(oH.add(1))).mul(VW),mq(1)).mul(HW),Uq.rgb,qq)),tH.assign(IV(HW,1,qq))}},{key:"setupLightingModel",value:function(){return new RQ(this.useClearcoat,this.useSheen,this.useIridescence,this.useAnisotropy,this.useTransmission,this.useDispersion)}},{key:"setupVariants",value:function(e){if(oe(Q(n.prototype),"setupVariants",this).call(this,e),this.useClearcoat){var t=this.clearcoatNode?lq(this.clearcoatNode):JW,r=this.clearcoatRoughnessNode?lq(this.clearcoatRoughnessNode):KW;Hq.assign(t),Vq.assign(HY({roughness:r}))}if(this.useSheen){var i=this.sheenNode?mq(this.sheenNode):eX,a=this.sheenRoughnessNode?lq(this.sheenRoughnessNode):tX;jq.assign(i),Wq.assign(a)}if(this.useIridescence){var o=this.iridescenceNode?lq(this.iridescenceNode):rX,s=this.iridescenceIORNode?lq(this.iridescenceIORNode):iX,u=this.iridescenceThicknessNode?lq(this.iridescenceThicknessNode):aX;Xq.assign(o),Yq.assign(s),Qq.assign(u)}if(this.useAnisotropy){var l=(this.anisotropyNode?fq(this.anisotropyNode):nX).toVar();Kq.assign(l.length()),sq(Kq.equal(0),(function(){l.assign(fq(1,0))})).Else((function(){l.divAssign(fq(Kq)),Kq.assign(Kq.saturate())})),Jq.assign(Kq.pow2().mix(Gq.pow2(),1)),Zq.assign(kW[0].mul(l.x).add(kW[1].mul(l.y))),$q.assign(kW[1].mul(l.x).sub(kW[0].mul(l.y)))}if(this.useTransmission){var c=this.transmissionNode?lq(this.transmissionNode):oX,h=this.thicknessNode?lq(this.thicknessNode):sX,d=this.attenuationDistanceNode?lq(this.attenuationDistanceNode):lX,f=this.attenuationColorNode?mq(this.attenuationColorNode):cX;if(sH.assign(c),uH.assign(h),lH.assign(d),cH.assign(f),this.useDispersion){var p=this.dispersionNode?lq(this.dispersionNode):pX;hH.assign(p)}}}},{key:"setupClearcoatNormal",value:function(){return this.clearcoatNormalNode?mq(this.clearcoatNormalNode):ZW}},{key:"setup",value:function(e){var t=this;e.context.setupClearcoatNormal=function(){return t.setupClearcoatNormal(e)},oe(Q(n.prototype),"setup",this).call(this,e)}},{key:"copy",value:function(e){return this.clearcoatNode=e.clearcoatNode,this.clearcoatRoughnessNode=e.clearcoatRoughnessNode,this.clearcoatNormalNode=e.clearcoatNormalNode,this.sheenNode=e.sheenNode,this.sheenRoughnessNode=e.sheenRoughnessNode,this.iridescenceNode=e.iridescenceNode,this.iridescenceIORNode=e.iridescenceIORNode,this.iridescenceThicknessNode=e.iridescenceThicknessNode,this.specularIntensityNode=e.specularIntensityNode,this.specularColorNode=e.specularColorNode,this.transmissionNode=e.transmissionNode,this.thicknessNode=e.thicknessNode,this.attenuationDistanceNode=e.attenuationDistanceNode,this.attenuationColorNode=e.attenuationColorNode,this.dispersionNode=e.dispersionNode,this.anisotropyNode=e.anisotropyNode,oe(Q(n.prototype),"copy",this).call(this,e)}}],[{key:"type",get:function(){return"MeshPhysicalNodeMaterial"}}]),n}(sJ),cJ=iq((function(e){var t=e.normal,n=e.lightDirection,r=e.builder,i=t.dot(n),a=fq(i.mul(.5).add(.5),0);if(r.material.gradientMap){var o=xW("gradientMap","texture").context({getUV:function(){return a}});return mq(o.r)}var s=a.fwidth().mul(.5);return IV(mq(.7),mq(1),OV(lq(.7).sub(s.x),lq(.7).add(s.x),a.x))})),hJ=function(e){Y(n,e);var t=$(n);function n(){return V(this,n),t.apply(this,arguments)}return W(n,[{key:"direct",value:function(e,t,n){var r=e.lightDirection,i=e.lightColor,a=e.reflectedLight,o=cJ({normal:Yj,lightDirection:r,builder:n}).mul(i);a.directDiffuse.addAssign(o.mul(IY({diffuseColor:Uq.rgb})))}},{key:"indirect",value:function(e){var t=e.ambientOcclusion,n=e.irradiance,r=e.reflectedLight;r.indirectDiffuse.addAssign(n.mul(IY({diffuseColor:Uq}))),r.indirectDiffuse.mulAssign(t)}}]),n}(CY),dJ=new LU,fJ=function(e){Y(n,e);var t=$(n);function n(e){var r;return V(this,n),(r=t.call(this)).isMeshToonNodeMaterial=!0,r.lights=!0,r.setDefaultValues(dJ),r.setValues(e),r}return W(n,[{key:"setupLightingModel",value:function(){return new hJ}}],[{key:"type",get:function(){return"MeshToonNodeMaterial"}}]),n}(fY),pJ=function(e){Y(n,e);var t=$(n);function n(){return V(this,n),t.call(this,"vec2")}return W(n,[{key:"setup",value:function(){var e=mq(Wj.z,0,Wj.x.negate()).normalize(),t=Wj.cross(e);return fq(e.dot($j),t.dot($j)).mul(.495).add(.5)}}],[{key:"type",get:function(){return"MatcapUVNode"}}]),n}(rG),AJ=rq(pJ),vJ=new UU,mJ=function(e){Y(n,e);var t=$(n);function n(e){var r;return V(this,n),(r=t.call(this)).lights=!1,r.isMeshMatcapNodeMaterial=!0,r.setDefaultValues(vJ),r.setValues(e),r}return W(n,[{key:"setupVariants",value:function(e){var t,n=AJ;t=e.material.matcap?xW("matcap","texture").context({getUV:function(){return n}}):mq(IV(.2,.8,n.y)),Uq.rgb.mulAssign(t.rgb)}}],[{key:"type",get:function(){return"MeshMatcapNodeMaterial"}}]),n}(fY),gJ=new EU,yJ=function(e){Y(n,e);var t=$(n);function n(e){var r;return V(this,n),(r=t.call(this)).isPointsNodeMaterial=!0,r.lights=!1,r.transparent=!0,r.sizeNode=null,r.setDefaultValues(gJ),r.setValues(e),r}return W(n,[{key:"copy",value:function(e){return this.sizeNode=e.sizeNode,oe(Q(n.prototype),"copy",this).call(this,e)}}],[{key:"type",get:function(){return"PointsNodeMaterial"}}]),n}(fY),bJ=function(e){Y(n,e);var t=$(n);function n(e,r){var i;return V(this,n),(i=t.call(this)).positionNode=e,i.rotationNode=r,i}return W(n,[{key:"getNodeType",value:function(e){return this.positionNode.getNodeType(e)}},{key:"setup",value:function(e){var t=this.rotationNode,n=this.positionNode;if("vec2"===this.getNodeType(e)){var r=t.cos(),i=t.sin();return Mq(r,i,i.negate(),r).mul(n)}var a=t,o=Tq(xq(1,0,0,0),xq(0,tV(a.x),eV(a.x).negate(),0),xq(0,eV(a.x),tV(a.x),0),xq(0,0,0,1)),s=Tq(xq(tV(a.y),0,eV(a.y),0),xq(0,1,0,0),xq(eV(a.y).negate(),0,tV(a.y),0),xq(0,0,0,1)),u=Tq(xq(tV(a.z),eV(a.z).negate(),0,0),xq(eV(a.z),tV(a.z),0,0),xq(0,0,1,0),xq(0,0,0,1));return o.mul(s).mul(u).mul(xq(n,1)).xyz}}],[{key:"type",get:function(){return"RotateNode"}}]),n}(rG),xJ=nq(bJ),_J=new mU,wJ=function(e){Y(n,e);var t=$(n);function n(e){var r;return V(this,n),(r=t.call(this)).isSpriteNodeMaterial=!0,r.lights=!1,r._useSizeAttenuation=!0,r.positionNode=null,r.rotationNode=null,r.scaleNode=null,r.setDefaultValues(_J),r.setValues(e),r}return W(n,[{key:"setupPosition",value:function(e){var t=e.object,n=e.camera,r=e.context,i=this.sizeAttenuation,a=this.positionNode,o=this.rotationNode,s=this.scaleNode,u=Gj,l=Uj.mul(mq(a||0)),c=fq(Oj[0].xyz.length(),Oj[1].xyz.length());if(null!==s&&(c=c.mul(s)),!i)if(n.isPerspectiveCamera)c=c.mul(l.z.negate());else{var h=lq(2).div(Pj.element(1).element(1));c=c.mul(h.mul(2))}var d=u.xy;if(t.center&&!0===t.center.isVector2){var f=function(e,t,n){return $G(new tj(e,t,n))}("center","vec2");d=d.sub(f.sub(.5))}d=d.mul(c);var p=lq(o||$W),A=xJ(d,p);l=xq(l.xy.add(A),l.zw);var v=Pj.mul(l);return r.vertex=u,v}},{key:"copy",value:function(e){return this.positionNode=e.positionNode,this.rotationNode=e.rotationNode,this.scaleNode=e.scaleNode,oe(Q(n.prototype),"copy",this).call(this,e)}},{key:"sizeAttenuation",get:function(){return this._useSizeAttenuation},set:function(e){this._useSizeAttenuation!==e&&(this._useSizeAttenuation=e,this.needsUpdate=!0)}}],[{key:"type",get:function(){return"SpriteNodeMaterial"}}]),n}(fY),SJ=function(e){Y(n,e);var t=$(n);function n(){var e;return V(this,n),(e=t.call(this)).shadowNode=lq(1).toVar("shadowMask"),e}return W(n,[{key:"direct",value:function(e){var t=e.shadowMask;this.shadowNode.mulAssign(t)}},{key:"finish",value:function(e){Uq.a.mulAssign(this.shadowNode.oneMinus()),e.outgoingLight.rgb.assign(Uq.rgb)}}]),n}(CY),MJ=new PU,kJ=function(e){Y(n,e);var t=$(n);function n(e){var r;return V(this,n),(r=t.call(this)).isShadowNodeMaterial=!0,r.lights=!0,r.setDefaultValues(MJ),r.setValues(e),r}return W(n,[{key:"setupLightingModel",value:function(){return new SJ}}],[{key:"type",get:function(){return"ShadowNodeMaterial"}}]),n}(fY),TJ=(iq((function(e){var t=e.texture,n=e.uv,r=1e-4,i=mq().toVar();return sq(n.x.lessThan(r),(function(){i.assign(mq(1,0,0))})).ElseIf(n.y.lessThan(r),(function(){i.assign(mq(0,1,0))})).ElseIf(n.z.lessThan(r),(function(){i.assign(mq(0,0,1))})).ElseIf(n.x.greaterThan(.9999),(function(){i.assign(mq(-1,0,0))})).ElseIf(n.y.greaterThan(.9999),(function(){i.assign(mq(0,-1,0))})).ElseIf(n.z.greaterThan(.9999),(function(){i.assign(mq(0,0,-1))})).Else((function(){var e=.01,r=t.uv(n.add(mq(-.01,0,0))).r.sub(t.uv(n.add(mq(e,0,0))).r),a=t.uv(n.add(mq(0,-.01,0))).r.sub(t.uv(n.add(mq(0,e,0))).r),o=t.uv(n.add(mq(0,0,-.01))).r.sub(t.uv(n.add(mq(0,0,e))).r);i.assign(mq(r,a,o))})),i.normalize()})),function(){function e(t,n){V(this,e),this.nodes=t,this.info=n,this.animationLoop=null,this.requestId=null,this._init()}return W(e,[{key:"_init",value:function(){var e=this;!function t(n,r){e.requestId=self.requestAnimationFrame(t),!0===e.info.autoReset&&e.info.reset(),e.nodes.nodeFrame.update(),e.info.frame=e.nodes.nodeFrame.frameId,null!==e.animationLoop&&e.animationLoop(n,r)}()}},{key:"dispose",value:function(){self.cancelAnimationFrame(this.requestId),this.requestId=null}},{key:"setAnimationLoop",value:function(e){this.animationLoop=e}}]),e}()),EJ=function(){function e(){V(this,e),this.weakMap=new WeakMap}return W(e,[{key:"get",value:function(e){for(var t=this.weakMap,n=0;n<e.length;n++)if(void 0===(t=t.get(e[n])))return;return t.get(e[e.length-1])}},{key:"set",value:function(e,t){for(var n=this.weakMap,r=0;r<e.length;r++){var i=e[r];!1===n.has(i)&&n.set(i,new WeakMap),n=n.get(i)}return n.set(e[e.length-1],t)}},{key:"delete",value:function(e){for(var t=this.weakMap,n=0;n<e.length;n++)if(void 0===(t=t.get(e[n])))return!1;return t.delete(e[e.length-1])}}]),e}(),CJ=new wU,RJ=function(){function e(){V(this,e),this.version=0,this.globalClippingCount=0,this.localClippingCount=0,this.localClippingEnabled=!1,this.localClipIntersection=!1,this.planes=[],this.parentVersion=0,this.viewNormalMatrix=new kL,this.cacheKey=0}return W(e,[{key:"projectPlanes",value:function(e,t){for(var n=e.length,r=this.planes,i=0;i<n;i++){CJ.copy(e[i]).applyMatrix4(this.viewMatrix,this.viewNormalMatrix);var a=r[t+i],o=CJ.normal;a.x=-o.x,a.y=-o.y,a.z=-o.z,a.w=CJ.constant}}},{key:"updateGlobal",value:function(e,t){var n=e.clippingPlanes;this.viewMatrix=t.matrixWorldInverse,this.viewNormalMatrix.getNormalMatrix(this.viewMatrix);var r=!1;if(Array.isArray(n)&&0!==n.length){var i=n.length;if(i!==this.globalClippingCount){for(var a=[],o=0;o<i;o++)a.push(new jL);this.globalClippingCount=i,this.planes=a,r=!0}this.projectPlanes(n,0)}else 0!==this.globalClippingCount&&(this.globalClippingCount=0,this.planes=[],r=!0);e.localClippingEnabled!==this.localClippingEnabled&&(this.localClippingEnabled=e.localClippingEnabled,r=!0),r&&(this.version++,this.cacheKey=Fz(this.globalClippingCount,!0===this.localClippingEnabled?1:0))}},{key:"update",value:function(e,t){var n=!1;if(this!==e&&e.version!==this.parentVersion&&(this.globalClippingCount=t.isShadowNodeMaterial?0:e.globalClippingCount,this.localClippingEnabled=e.localClippingEnabled,this.planes=Array.from(e.planes),this.parentVersion=e.version,this.viewMatrix=e.viewMatrix,this.viewNormalMatrix=e.viewNormalMatrix,n=!0),this.localClippingEnabled){var r=t.clippingPlanes;if(Array.isArray(r)&&0!==r.length){var i=r.length,a=this.planes,o=this.globalClippingCount;if(n||i!==this.localClippingCount){a.length=o+i;for(var s=0;s<i;s++)a[o+s]=new jL;this.localClippingCount=i,n=!0}this.projectPlanes(r,o)}else 0!==this.localClippingCount&&(this.localClippingCount=0,n=!0);this.localClipIntersection!==t.clipIntersection&&(this.localClipIntersection=t.clipIntersection,n=!0)}n&&(this.version+=e.version,this.cacheKey=Fz(e.cacheKey,this.localClippingCount,!0===this.localClipIntersection?1:0))}}]),e}(),BJ=0;var PJ=function(){function e(t,n,r,i,a,o,s,u,l){var c=this;V(this,e),this._nodes=t,this._geometries=n,this.id=BJ++,this.renderer=r,this.object=i,this.material=a,this.scene=o,this.camera=s,this.lightsNode=u,this.context=l,this.geometry=i.geometry,this.version=a.version,this.drawRange=null,this.attributes=null,this.pipeline=null,this.vertexBuffers=null,this.drawParams=null,this.bundle=null,this.updateClipping(l.clippingContext),this.clippingContextVersion=this.clippingContext.version,this.initialNodesCacheKey=this.getDynamicCacheKey(),this.initialCacheKey=this.getCacheKey(),this._nodeBuilderState=null,this._bindings=null,this._monitor=null,this.onDispose=null,this.isRenderObject=!0,this.onMaterialDispose=function(){c.dispose()},this.material.addEventListener("dispose",this.onMaterialDispose)}return W(e,[{key:"updateClipping",value:function(e){var t=this.material,n=this.clippingContext;Array.isArray(t.clippingPlanes)?(n!==e&&n||(n=new RJ,this.clippingContext=n),n.update(e,t)):this.clippingContext!==e&&(this.clippingContext=e)}},{key:"clippingNeedsUpdate",get:function(){return this.clippingContext.version!==this.clippingContextVersion&&(this.clippingContextVersion=this.clippingContext.version,!0)}},{key:"getNodeBuilderState",value:function(){return this._nodeBuilderState||(this._nodeBuilderState=this._nodes.getForRender(this))}},{key:"getMonitor",value:function(){return this._monitor||(this._monitor=this.getNodeBuilderState().monitor)}},{key:"getBindings",value:function(){return this._bindings||(this._bindings=this.getNodeBuilderState().createBindings())}},{key:"getIndex",value:function(){return this._geometries.getIndex(this)}},{key:"getIndirect",value:function(){return this._geometries.getIndirect(this)}},{key:"getChainArray",value:function(){return[this.object,this.material,this.context,this.lightsNode]}},{key:"getAttributes",value:function(){if(null!==this.attributes)return this.attributes;var e,t=this.getNodeBuilderState().nodeAttributes,n=this.geometry,r=[],i=new Set,a=ee(t);try{for(a.s();!(e=a.n()).done;){var o=e.value,s=o.node&&o.node.attribute?o.node.attribute:n.getAttribute(o.name);if(void 0!==s){r.push(s);var u=s.isInterleavedBufferAttribute?s.data:s;i.add(u)}}}catch(l){a.e(l)}finally{a.f()}return this.attributes=r,this.vertexBuffers=Array.from(i.values()),r}},{key:"getVertexBuffers",value:function(){return null===this.vertexBuffers&&this.getAttributes(),this.vertexBuffers}},{key:"getDrawParameters",value:function(){var e=this.object,t=this.material,n=this.geometry,r=this.group,i=this.drawRange,a=this.drawParams||(this.drawParams={vertexCount:0,firstVertex:0,instanceCount:0,firstInstance:0}),o=this.getIndex(),s=null!==o,u=n.isInstancedBufferGeometry?n.instanceCount:e.count>1?e.count:1;if(0===u)return null;if(a.instanceCount=u,!0===e.isBatchedMesh)return a;var l=1;!0!==t.wireframe||e.isPoints||e.isLineSegments||e.isLine||e.isLineLoop||(l=2);var c=i.start*l,h=(i.start+i.count)*l;null!==r&&(c=Math.max(c,r.start*l),h=Math.min(h,(r.start+r.count)*l));var d=n.attributes.position,f=1/0;s?f=o.count:void 0!==d&&null!==d&&(f=d.count),c=Math.max(c,0);var p=(h=Math.min(h,f))-c;return p<0||p===1/0?null:(a.vertexCount=p,a.firstVertex=c,a)}},{key:"getGeometryCacheKey",value:function(){var e,t=this.geometry,n="",r=ee(Object.keys(t.attributes).sort());try{for(r.s();!(e=r.n()).done;){var i=e.value,a=t.attributes[i];n+=i+",",a.data&&(n+=a.data.stride+","),a.offset&&(n+=a.offset+","),a.itemSize&&(n+=a.itemSize+","),a.normalized&&(n+="n,")}}catch(o){r.e(o)}finally{r.f()}return t.index&&(n+="index,"),n}},{key:"getMaterialCacheKey",value:function(){var e,t=this.object,n=this.material,r=n.customProgramCacheKey(),i=ee(function(e){for(var t=Object.keys(e),n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptors(n);for(var i in r)if(void 0!==r[i]){var a=r[i];a&&"function"===typeof a.get&&t.push(i)}n=Object.getPrototypeOf(n)}return t}(n));try{for(i.s();!(e=i.n()).done;){var a=e.value;if(!/^(is[A-Z]|_)|^(visible|version|uuid|name|opacity|userData)$/.test(a)){var o=n[a],s=void 0;if(null!==o){var u=typeof o;"number"===u?s=0!==o?"1":"0":"object"===u?(s="{",o.isTexture&&(s+=o.mapping),s+="}"):s=String(o)}else s=String(o);r+=s+","}}}catch(l){i.e(l)}finally{i.f()}return r+=this.clippingContext.cacheKey+",",t.geometry&&(r+=this.getGeometryCacheKey()),t.skeleton&&(r+=t.skeleton.bones.length+","),t.morphTargetInfluences&&(r+=t.morphTargetInfluences.length+","),t.isBatchedMesh&&(r+=t._matricesTexture.uuid+",",null!==t._colorsTexture&&(r+=t._colorsTexture.uuid+",")),t.count>1&&(r+=t.uuid+","),Lz(r)}},{key:"needsUpdate",get:function(){return this.initialNodesCacheKey!==this.getDynamicCacheKey()||this.clippingNeedsUpdate}},{key:"getDynamicCacheKey",value:function(){var e=this._nodes.getCacheKey(this.scene,this.lightsNode);return this.object.receiveShadow&&(e+=1),e}},{key:"getCacheKey",value:function(){return this.getMaterialCacheKey()+this.getDynamicCacheKey()}},{key:"dispose",value:function(){this.material.removeEventListener("dispose",this.onMaterialDispose),this.onDispose()}}]),e}(),NJ=[],IJ=function(){function e(t,n,r,i,a,o){V(this,e),this.renderer=t,this.nodes=n,this.geometries=r,this.pipelines=i,this.bindings=a,this.info=o,this.chainMaps={}}return W(e,[{key:"get",value:function(e,t,n,r,i,a,o){var s=this.getChainMap(o);NJ[0]=e,NJ[1]=t,NJ[2]=a,NJ[3]=i;var u=s.get(NJ);return void 0===u?(u=this.createRenderObject(this.nodes,this.geometries,this.renderer,e,t,n,r,i,a,o),s.set(NJ,u)):(u.updateClipping(a.clippingContext),(u.version!==t.version||u.needsUpdate)&&(u.initialCacheKey!==u.getCacheKey()?(u.dispose(),u=this.get(e,t,n,r,i,a,o)):u.version=t.version)),u}},{key:"getChainMap",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";return this.chainMaps[e]||(this.chainMaps[e]=new EJ)}},{key:"dispose",value:function(){this.chainMaps={}}},{key:"createRenderObject",value:function(e,t,n,r,i,a,o,s,u,l){var c=this,h=this.getChainMap(l),d=new PJ(e,t,n,r,i,a,o,s,u);return d.onDispose=function(){c.pipelines.delete(d),c.bindings.delete(d),c.nodes.delete(d),h.delete(d.getChainArray())},d}}]),e}(),DJ=function(){function e(){V(this,e),this.data=new WeakMap}return W(e,[{key:"get",value:function(e){var t=this.data.get(e);return void 0===t&&(t={},this.data.set(e,t)),t}},{key:"delete",value:function(e){var t;return this.data.has(e)&&(t=this.data.get(e),this.data.delete(e)),t}},{key:"has",value:function(e){return this.data.has(e)}},{key:"dispose",value:function(){this.data=new WeakMap}}]),e}(),LJ=1,OJ=2,FJ=3,UJ=4,zJ=16,GJ=function(e){Y(n,e);var t=$(n);function n(e){var r;return V(this,n),(r=t.call(this)).backend=e,r}return W(n,[{key:"delete",value:function(e){var t=oe(Q(n.prototype),"delete",this).call(this,e);return void 0!==t&&this.backend.destroyAttribute(e),t}},{key:"update",value:function(e,t){var n=this.get(e);if(void 0===n.version)t===LJ?this.backend.createAttribute(e):t===OJ?this.backend.createIndexAttribute(e):t===FJ?this.backend.createStorageAttribute(e):t===UJ&&this.backend.createIndirectStorageAttribute(e),n.version=this._getBufferAttribute(e).version;else{var r=this._getBufferAttribute(e);(n.version<r.version||r.usage===cL)&&(this.backend.updateAttribute(e),n.version=r.version)}}},{key:"_getBufferAttribute",value:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),e}}]),n}(DJ);function qJ(e){return null!==e.index?e.index.version:e.attributes.position.version}function HJ(e){var t=[],n=e.index,r=e.attributes.position;if(null!==n)for(var i=n.array,a=0,o=i.length;a<o;a+=3){var s=i[a+0],u=i[a+1],l=i[a+2];t.push(s,u,u,l,l,s)}else for(var c=0,h=r.array.length/3-1;c<h;c+=3){var d=c+0,f=c+1,p=c+2;t.push(d,f,f,p,p,d)}var A=new(function(e){for(var t=e.length-1;t>=0;--t)if(e[t]>=65535)return!0;return!1}(t)?BF:RF)(t,1);return A.version=qJ(e),A}var VJ=function(e){Y(n,e);var t=$(n);function n(e,r){var i;return V(this,n),(i=t.call(this)).attributes=e,i.info=r,i.wireframes=new WeakMap,i.attributeCall=new WeakMap,i}return W(n,[{key:"has",value:function(e){var t=e.geometry;return oe(Q(n.prototype),"has",this).call(this,t)&&!0===this.get(t).initialized}},{key:"updateForRender",value:function(e){!1===this.has(e)&&this.initGeometry(e),this.updateAttributes(e)}},{key:"initGeometry",value:function(e){var t=this,n=e.geometry;this.get(n).initialized=!0,this.info.memory.geometries++;n.addEventListener("dispose",(function r(){t.info.memory.geometries--;var i=n.index,a=e.getAttributes();null!==i&&t.attributes.delete(i);var o,s=ee(a);try{for(s.s();!(o=s.n()).done;){var u=o.value;t.attributes.delete(u)}}catch(c){s.e(c)}finally{s.f()}var l=t.wireframes.get(n);void 0!==l&&t.attributes.delete(l),n.removeEventListener("dispose",r)}))}},{key:"updateAttributes",value:function(e){var t,n=ee(e.getAttributes());try{for(n.s();!(t=n.n()).done;){var r=t.value;r.isStorageBufferAttribute||r.isStorageInstancedBufferAttribute?this.updateAttribute(r,FJ):this.updateAttribute(r,LJ)}}catch(o){n.e(o)}finally{n.f()}var i=this.getIndex(e);null!==i&&this.updateAttribute(i,OJ);var a=e.geometry.indirect;null!==a&&this.updateAttribute(a,UJ)}},{key:"updateAttribute",value:function(e,t){var n=this.info.render.calls;e.isInterleavedBufferAttribute?void 0===this.attributeCall.get(e)?(this.attributes.update(e,t),this.attributeCall.set(e,n)):this.attributeCall.get(e.data)!==n&&(this.attributes.update(e,t),this.attributeCall.set(e.data,n),this.attributeCall.set(e,n)):this.attributeCall.get(e)!==n&&(this.attributes.update(e,t),this.attributeCall.set(e,n))}},{key:"getIndirect",value:function(e){return e.geometry.indirect}},{key:"getIndex",value:function(e){var t=e.geometry,n=e.material,r=t.index;if(!0===n.wireframe){var i=this.wireframes,a=i.get(t);void 0===a?(a=HJ(t),i.set(t,a)):a.version!==qJ(t)&&(this.attributes.delete(a),a=HJ(t),i.set(t,a)),r=a}return r}}]),n}(DJ),jJ=function(){function e(){V(this,e),this.autoReset=!0,this.frame=0,this.calls=0,this.render={calls:0,frameCalls:0,drawCalls:0,triangles:0,points:0,lines:0,timestamp:0,previousFrameCalls:0,timestampCalls:0},this.compute={calls:0,frameCalls:0,timestamp:0,previousFrameCalls:0,timestampCalls:0},this.memory={geometries:0,textures:0}}return W(e,[{key:"update",value:function(e,t,n){this.render.drawCalls++,e.isMesh||e.isSprite?this.render.triangles+=n*(t/3):e.isPoints?this.render.points+=n*t:e.isLineSegments?this.render.lines+=n*(t/2):e.isLine?this.render.lines+=n*(t-1):console.error("THREE.WebGPUInfo: Unknown object type.")}},{key:"updateTimestamp",value:function(e,t){0===this[e].timestampCalls&&(this[e].timestamp=0),this[e].timestamp+=t,this[e].timestampCalls++,this[e].timestampCalls>=this[e].previousFrameCalls&&(this[e].timestampCalls=0)}},{key:"reset",value:function(){var e=this.render.frameCalls;this.render.previousFrameCalls=e;var t=this.compute.frameCalls;this.compute.previousFrameCalls=t,this.render.drawCalls=0,this.render.frameCalls=0,this.compute.frameCalls=0,this.render.triangles=0,this.render.points=0,this.render.lines=0}},{key:"dispose",value:function(){this.reset(),this.calls=0,this.render.calls=0,this.compute.calls=0,this.render.timestamp=0,this.compute.timestamp=0,this.memory.geometries=0,this.memory.textures=0}}]),e}(),WJ=W((function e(t){V(this,e),this.cacheKey=t,this.usedTimes=0})),XJ=function(e){Y(n,e);var t=$(n);function n(e,r,i){var a;return V(this,n),(a=t.call(this,e)).vertexProgram=r,a.fragmentProgram=i,a}return W(n)}(WJ),YJ=function(e){Y(n,e);var t=$(n);function n(e,r){var i;return V(this,n),(i=t.call(this,e)).computeProgram=r,i.isComputePipeline=!0,i}return W(n)}(WJ),QJ=0,JJ=W((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;V(this,e),this.id=QJ++,this.code=t,this.stage=n,this.transforms=r,this.attributes=i,this.usedTimes=0})),KJ=function(e){Y(n,e);var t=$(n);function n(e,r){var i;return V(this,n),(i=t.call(this)).backend=e,i.nodes=r,i.bindings=null,i.caches=new Map,i.programs={vertex:new Map,fragment:new Map,compute:new Map},i}return W(n,[{key:"getForCompute",value:function(e,t){var n=this.backend,r=this.get(e);if(this._needsComputeUpdate(e)){var i=r.pipeline;i&&(i.usedTimes--,i.computeProgram.usedTimes--);var a=this.nodes.getForCompute(e),o=this.programs.compute.get(a.computeShader);void 0===o&&(i&&0===i.computeProgram.usedTimes&&this._releaseProgram(i.computeProgram),o=new JJ(a.computeShader,"compute",a.transforms,a.nodeAttributes),this.programs.compute.set(a.computeShader,o),n.createProgram(o));var s=this._getComputeCacheKey(e,o),u=this.caches.get(s);void 0===u&&(i&&0===i.usedTimes&&this._releasePipeline(i),u=this._getComputePipeline(e,o,s,t)),u.usedTimes++,o.usedTimes++,r.version=e.version,r.pipeline=u}return r.pipeline}},{key:"getForRender",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this.backend,r=this.get(e);if(this._needsRenderUpdate(e)){var i=r.pipeline;i&&(i.usedTimes--,i.vertexProgram.usedTimes--,i.fragmentProgram.usedTimes--);var a=e.getNodeBuilderState(),o=this.programs.vertex.get(a.vertexShader);void 0===o&&(i&&0===i.vertexProgram.usedTimes&&this._releaseProgram(i.vertexProgram),o=new JJ(a.vertexShader,"vertex"),this.programs.vertex.set(a.vertexShader,o),n.createProgram(o));var s=this.programs.fragment.get(a.fragmentShader);void 0===s&&(i&&0===i.fragmentProgram.usedTimes&&this._releaseProgram(i.fragmentProgram),s=new JJ(a.fragmentShader,"fragment"),this.programs.fragment.set(a.fragmentShader,s),n.createProgram(s));var u=this._getRenderCacheKey(e,o,s),l=this.caches.get(u);void 0===l?(i&&0===i.usedTimes&&this._releasePipeline(i),l=this._getRenderPipeline(e,o,s,u,t)):e.pipeline=l,l.usedTimes++,o.usedTimes++,s.usedTimes++,r.pipeline=l}return r.pipeline}},{key:"delete",value:function(e){var t=this.get(e).pipeline;return t&&(t.usedTimes--,0===t.usedTimes&&this._releasePipeline(t),t.isComputePipeline?(t.computeProgram.usedTimes--,0===t.computeProgram.usedTimes&&this._releaseProgram(t.computeProgram)):(t.fragmentProgram.usedTimes--,t.vertexProgram.usedTimes--,0===t.vertexProgram.usedTimes&&this._releaseProgram(t.vertexProgram),0===t.fragmentProgram.usedTimes&&this._releaseProgram(t.fragmentProgram))),oe(Q(n.prototype),"delete",this).call(this,e)}},{key:"dispose",value:function(){oe(Q(n.prototype),"dispose",this).call(this),this.caches=new Map,this.programs={vertex:new Map,fragment:new Map,compute:new Map}}},{key:"updateForRender",value:function(e){this.getForRender(e)}},{key:"_getComputePipeline",value:function(e,t,n,r){n=n||this._getComputeCacheKey(e,t);var i=this.caches.get(n);return void 0===i&&(i=new YJ(n,t),this.caches.set(n,i),this.backend.createComputePipeline(i,r)),i}},{key:"_getRenderPipeline",value:function(e,t,n,r,i){r=r||this._getRenderCacheKey(e,t,n);var a=this.caches.get(r);return void 0===a&&(a=new XJ(r,t,n),this.caches.set(r,a),e.pipeline=a,this.backend.createRenderPipeline(e,i)),a}},{key:"_getComputeCacheKey",value:function(e,t){return e.id+","+t.id}},{key:"_getRenderCacheKey",value:function(e,t,n){return t.id+","+n.id+","+this.backend.getRenderCacheKey(e)}},{key:"_releasePipeline",value:function(e){this.caches.delete(e.cacheKey)}},{key:"_releaseProgram",value:function(e){var t=e.code,n=e.stage;this.programs[n].delete(t)}},{key:"_needsComputeUpdate",value:function(e){var t=this.get(e);return void 0===t.pipeline||t.version!==e.version}},{key:"_needsRenderUpdate",value:function(e){return void 0===this.get(e).pipeline||this.backend.needsRenderUpdate(e)}}]),n}(DJ),ZJ=function(e){Y(n,e);var t=$(n);function n(e,r,i,a,o,s){var u;return V(this,n),(u=t.call(this)).backend=e,u.textures=i,u.pipelines=o,u.attributes=a,u.nodes=r,u.info=s,u.pipelines.bindings=K(u),u}return W(n,[{key:"getForRender",value:function(e){var t,n=e.getBindings(),r=ee(n);try{for(r.s();!(t=r.n()).done;){var i=t.value,a=this.get(i);void 0===a.bindGroup&&(this._init(i),this.backend.createBindings(i,n),a.bindGroup=i)}}catch(o){r.e(o)}finally{r.f()}return n}},{key:"getForCompute",value:function(e){var t,n=this.nodes.getForCompute(e).bindings,r=ee(n);try{for(r.s();!(t=r.n()).done;){var i=t.value,a=this.get(i);void 0===a.bindGroup&&(this._init(i),this.backend.createBindings(i,n),a.bindGroup=i)}}catch(o){r.e(o)}finally{r.f()}return n}},{key:"updateForCompute",value:function(e){this._updateBindings(this.getForCompute(e))}},{key:"updateForRender",value:function(e){this._updateBindings(this.getForRender(e))}},{key:"_updateBindings",value:function(e){var t,n=ee(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;this._update(r,e)}}catch(i){n.e(i)}finally{n.f()}}},{key:"_init",value:function(e){var t,n=ee(e.bindings);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.isSampledTexture)this.textures.updateTexture(r.texture);else if(r.isStorageBuffer){var i=r.attribute,a=i.isIndirectStorageBufferAttribute?UJ:FJ;this.attributes.update(i,a)}}}catch(o){n.e(o)}finally{n.f()}}},{key:"_update",value:function(e,t){var n,r=this.backend,i=!1,a=ee(e.bindings);try{for(a.s();!(n=a.n()).done;){var o=n.value;if(o.isNodeUniformsGroup)if(!this.nodes.updateGroup(o))continue;if(o.isUniformBuffer)o.update()&&r.updateBinding(o);else if(o.isSampler)o.update();else if(o.isSampledTexture){o.needsBindingsUpdate(this.textures.get(o.texture).generation)&&(i=!0);var s=o.update(),u=o.texture;s&&this.textures.updateTexture(u);var l=r.get(u);if(!0===r.isWebGPUBackend&&void 0===l.texture&&void 0===l.externalTexture&&(console.error("Bindings._update: binding should be available:",o,s,u,o.textureNode.value,i),this.textures.updateTexture(u),i=!0),!0===u.isStorageTexture){var c=this.get(u);!0===o.store?c.needsMipmap=!0:this.textures.needsMipmaps(u)&&!0===c.needsMipmap&&(this.backend.generateMipmaps(u),c.needsMipmap=!1)}}}}catch(h){a.e(h)}finally{a.f()}!0===i&&this.backend.updateBindings(e,t)}}]),n}(DJ);function $J(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function eK(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function tK(e){return(e.transmission>0||e.transmissionNode)&&2===e.side&&!1===e.forceSinglePass}var nK=function(){function e(t,n,r){V(this,e),this.renderItems=[],this.renderItemsIndex=0,this.opaque=[],this.transparentDoublePass=[],this.transparent=[],this.bundles=[],this.lightsNode=t.getNode(n,r),this.lightsArray=[],this.scene=n,this.camera=r,this.occlusionQueryCount=0}return W(e,[{key:"begin",value:function(){return this.renderItemsIndex=0,this.opaque.length=0,this.transparentDoublePass.length=0,this.transparent.length=0,this.bundles.length=0,this.lightsArray.length=0,this.occlusionQueryCount=0,this}},{key:"getNextRenderItem",value:function(e,t,n,r,i,a){var o=this.renderItems[this.renderItemsIndex];return void 0===o?(o={id:e.id,object:e,geometry:t,material:n,groupOrder:r,renderOrder:e.renderOrder,z:i,group:a},this.renderItems[this.renderItemsIndex]=o):(o.id=e.id,o.object=e,o.geometry=t,o.material=n,o.groupOrder=r,o.renderOrder=e.renderOrder,o.z=i,o.group=a),this.renderItemsIndex++,o}},{key:"push",value:function(e,t,n,r,i,a){var o=this.getNextRenderItem(e,t,n,r,i,a);!0===e.occlusionTest&&this.occlusionQueryCount++,!0===n.transparent||n.transmission>0?(tK(n)&&this.transparentDoublePass.push(o),this.transparent.push(o)):this.opaque.push(o)}},{key:"unshift",value:function(e,t,n,r,i,a){var o=this.getNextRenderItem(e,t,n,r,i,a);!0===n.transparent||n.transmission>0?(tK(n)&&this.transparentDoublePass.unshift(o),this.transparent.unshift(o)):this.opaque.unshift(o)}},{key:"pushBundle",value:function(e){this.bundles.push(e)}},{key:"pushLight",value:function(e){this.lightsArray.push(e)}},{key:"sort",value:function(e,t){this.opaque.length>1&&this.opaque.sort(e||$J),this.transparentDoublePass.length>1&&this.transparentDoublePass.sort(t||eK),this.transparent.length>1&&this.transparent.sort(t||eK)}},{key:"finish",value:function(){this.lightsNode.setLights(this.lightsArray);for(var e=this.renderItemsIndex,t=this.renderItems.length;e<t;e++){var n=this.renderItems[e];if(null===n.id)break;n.id=null,n.object=null,n.geometry=null,n.material=null,n.groupOrder=null,n.renderOrder=null,n.z=null,n.group=null}}}]),e}(),rK=function(){function e(t){V(this,e),this.lighting=t,this.lists=new EJ}return W(e,[{key:"get",value:function(e,t){var n=this.lists,r=[e,t],i=n.get(r);return void 0===i&&(i=new nK(this.lighting,e,t),n.set(r,i)),i}},{key:"dispose",value:function(){this.lists=new EJ}}]),e}(),iK=0,aK=function(){function e(){V(this,e),this.id=iK++,this.color=!0,this.clearColor=!0,this.clearColorValue={r:0,g:0,b:0,a:1},this.depth=!0,this.clearDepth=!0,this.clearDepthValue=1,this.stencil=!1,this.clearStencil=!0,this.clearStencilValue=1,this.viewport=!1,this.viewportValue=new jL,this.scissor=!1,this.scissorValue=new jL,this.textures=null,this.depthTexture=null,this.activeCubeFace=0,this.sampleCount=1,this.width=0,this.height=0,this.isRenderContext=!0}return W(e,[{key:"getCacheKey",value:function(){return oK(this)}}]),e}();function oK(e){var t,n=e.textures,r=[e.activeCubeFace],i=ee(n);try{for(i.s();!(t=i.n()).done;){var a=t.value;r.push(a.id)}}catch(o){i.e(o)}finally{i.f()}return Oz(r)}var sK=function(){function e(){V(this,e),this.chainMaps={}}return W(e,[{key:"get",value:function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=[e,t];if(null===r)n="default";else{var a=r.texture.format,o=r.textures.length;n="".concat(o,":").concat(a,":").concat(r.samples,":").concat(r.depthBuffer,":").concat(r.stencilBuffer)}var s=this.getChainMap(n),u=s.get(i);return void 0===u&&(u=new aK,s.set(i,u)),null!==r&&(u.sampleCount=0===r.samples?1:r.samples),u}},{key:"getChainMap",value:function(e){return this.chainMaps[e]||(this.chainMaps[e]=new EJ)}},{key:"dispose",value:function(){this.chainMaps={}}}]),e}(),uK=new JL,lK=function(e){Y(n,e);var t=$(n);function n(e,r,i){var a;return V(this,n),(a=t.call(this)).renderer=e,a.backend=r,a.info=i,a}return W(n,[{key:"updateRenderTarget",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=this.get(e),i=0===e.samples?1:e.samples,a=r.depthTextureMips||(r.depthTextureMips={}),o=e.textures,s=this.getSize(o[0]),u=s.width>>n,l=s.height>>n,c=e.depthTexture||a[n],h=!0===e.depthBuffer||!0===e.stencilBuffer,d=!1;void 0===c&&h&&((c=new RU).format=e.stencilBuffer?vD:AD,c.type=e.stencilBuffer?hD:uD,c.image.width=u,c.image.height=l,a[n]=c),r.width===s.width&&s.height===r.height||(d=!0,c&&(c.needsUpdate=!0,c.image.width=u,c.image.height=l)),r.width=s.width,r.height=s.height,r.textures=o,r.depthTexture=c||null,r.depth=e.depthBuffer,r.stencil=e.stencilBuffer,r.renderTarget=e,r.sampleCount!==i&&(d=!0,c&&(c.needsUpdate=!0),r.sampleCount=i);for(var f={sampleCount:i},p=0;p<o.length;p++){var A=o[p];d&&(A.needsUpdate=!0),this.updateTexture(A,f)}if(c&&this.updateTexture(c,f),!0!==r.initialized){r.initialized=!0;var v=function n(){e.removeEventListener("dispose",n);for(var r=0;r<o.length;r++)t._destroyTexture(o[r]);c&&t._destroyTexture(c),t.delete(e)};e.addEventListener("dispose",v)}}},{key:"updateTexture",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.get(e);if(!0!==r.initialized||r.version!==e.version){var i=e.isRenderTargetTexture||e.isDepthTexture||e.isFramebufferTexture,a=this.backend;if(i&&!0===r.initialized&&(a.destroySampler(e),a.destroyTexture(e)),e.isFramebufferTexture){var o=this.renderer.getRenderTarget();e.type=o?o.texture.type:rD}var s=this.getSize(e),u=s.width,l=s.height,c=s.depth;if(n.width=u,n.height=l,n.depth=c,n.needsMipmaps=this.needsMipmaps(e),n.levels=n.needsMipmaps?this.getMipLevels(e,u,l):1,i||!0===e.isStorageTexture)a.createSampler(e),a.createTexture(e,n),r.generation=e.version;else{var h=!0!==r.initialized;if(h&&a.createSampler(e),e.version>0){var d=e.image;if(void 0===d)console.warn("THREE.Renderer: Texture marked for update but image is undefined.");else if(!1===d.complete)console.warn("THREE.Renderer: Texture marked for update but image is incomplete.");else{if(e.images){var f,p=[],A=ee(e.images);try{for(A.s();!(f=A.n()).done;){var v=f.value;p.push(v)}}catch(g){A.e(g)}finally{A.f()}n.images=p}else n.image=d;void 0!==r.isDefaultTexture&&!0!==r.isDefaultTexture||(a.createTexture(e,n),r.isDefaultTexture=!1,r.generation=e.version),!0===e.source.dataReady&&a.updateTexture(e,n),n.needsMipmaps&&0===e.mipmaps.length&&a.generateMipmaps(e)}}else a.createDefaultTexture(e),r.isDefaultTexture=!0,r.generation=e.version}if(!0!==r.initialized){r.initialized=!0,r.generation=e.version,this.info.memory.textures++;var m=function n(){e.removeEventListener("dispose",n),t._destroyTexture(e),t.info.memory.textures--};e.addEventListener("dispose",m)}r.version=e.version}}},{key:"getSize",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:uK,n=e.images?e.images[0]:e.image;return n?(void 0!==n.image&&(n=n.image),t.width=n.width,t.height=n.height,t.depth=e.isCubeTexture?6:n.depth||1):t.width=t.height=t.depth=1,t}},{key:"getMipLevels",value:function(e,t,n){return e.isCompressedTexture?e.mipmaps.length:Math.floor(Math.log2(Math.max(t,n)))+1}},{key:"needsMipmaps",value:function(e){return this.isEnvironmentTexture(e)||!0===e.isCompressedTexture||e.generateMipmaps}},{key:"isEnvironmentTexture",value:function(e){var t=e.mapping;return t===jI||t===WI||t===HI||t===VI}},{key:"_destroyTexture",value:function(e){this.backend.destroySampler(e),this.backend.destroyTexture(e),this.delete(e)}}]),n}(DJ),cK=function(e){Y(n,e);var t=$(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return V(this,n),(a=t.call(this,e,r,i)).a=o,a}return W(n,[{key:"set",value:function(e,t,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return this.a=i,oe(Q(n.prototype),"set",this).call(this,e,t,r)}},{key:"copy",value:function(e){return void 0!==e.a&&(this.a=e.a),oe(Q(n.prototype),"copy",this).call(this,e)}},{key:"clone",value:function(){return new this.constructor(this.r,this.g,this.b,this.a)}}]),n}(gF),hK=function(e){Y(n,e);var t=$(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return V(this,n),(r=t.call(this,e,i)).isParameterNode=!0,r}return W(n,[{key:"getHash",value:function(){return this.uuid}},{key:"generate",value:function(){return this.name}}],[{key:"type",get:function(){return"ParameterNode"}}]),n}(Lq),dK=function(e){Y(n,e);var t=$(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return V(this,n),(e=t.call(this)).nodes=[],e.outputNode=null,e.parent=r,e._currentCond=null,e.isStackNode=!0,e}return W(n,[{key:"getNodeType",value:function(e){return this.outputNode?this.outputNode.getNodeType(e):"void"}},{key:"add",value:function(e){return this.nodes.push(e),this}},{key:"If",value:function(e,t){var n=new ZG(t);return this._currentCond=GV(e,n),this.add(this._currentCond)}},{key:"ElseIf",value:function(e,t){var n=new ZG(t),r=GV(e,n);return this._currentCond.elseNode=r,this._currentCond=r,this}},{key:"Else",value:function(e){return this._currentCond.elseNode=new ZG(e),this}},{key:"build",value:function(e){var t,r,i=oq();aq(this);var a,o=ee(this.nodes);try{for(o.s();!(a=o.n()).done;){var s=a.value;s.build(e,"void")}}catch(h){o.e(h)}finally{o.f()}aq(i);for(var u=arguments.length,l=new Array(u>1?u-1:0),c=1;c<u;c++)l[c-1]=arguments[c];return this.outputNode?(t=this.outputNode).build.apply(t,[e].concat(l)):(r=oe(Q(n.prototype),"build",this)).call.apply(r,[this,e].concat(l))}},{key:"else",value:function(){return console.warn("TSL.StackNode: .else() has been renamed to .Else()."),this.Else.apply(this,arguments)}},{key:"elseif",value:function(){return console.warn("TSL.StackNode: .elseif() has been renamed to .ElseIf()."),this.ElseIf.apply(this,arguments)}}],[{key:"type",get:function(){return"StackNode"}}]),n}(eG),fK=nq(dK);new wU,new JL,new JL,new JL,new kO,new JL(0,0,-1),new jL,new JL,new JL,new jL,new ML;var pK=new WL;jX.flipX();pK.depthTexture=new RU(1,1);var AK=new mz(-1,1,1,-1,0,1),vK=function(e){Y(n,e);var t=$(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]&&arguments[0];V(this,n);var i=!1===r?[0,-1,0,1,2,1]:[0,2,0,0,2,0];return(e=t.call(this)).setAttribute("position",new NF([-1,3,0,-1,-1,0,3,-1,0],3)),e.setAttribute("uv",new NF(i,2)),e}return W(n)}(GF),mK=new vK,gK=function(e){Y(n,e);var t=$(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return V(this,n),(e=t.call(this,mK,r)).camera=AK,e.isQuadMesh=!0,e}return W(n,[{key:"renderAsync",value:function(e){return e.renderAsync(this,AK)}},{key:"render",value:function(e){e.render(this,AK)}}]),n}($F),yK=new LO,bK=new kO,xK=function(e){Y(n,e);var t=$(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.BACKGROUND_BLURRINESS,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return V(this,n),(e=t.call(this)).scope=r,e.scene=i,e}return W(n,[{key:"setup",value:function(e){var t,r=this.scope,i=null!==this.scene?this.scene:e.scene;return r===n.BACKGROUND_BLURRINESS?t=gW("backgroundBlurriness","float",i):r===n.BACKGROUND_INTENSITY?t=gW("backgroundIntensity","float",i):r===n.BACKGROUND_ROTATION?t=Dq("mat4").label("backgroundRotation").setGroup(Pq).onRenderUpdate((function(){var e=i.background;return null!==e&&e.isTexture&&e.mapping!==qI?(yK.copy(i.backgroundRotation),yK.x*=-1,yK.y*=-1,yK.z*=-1,bK.makeRotationFromEuler(yK)):bK.identity(),bK})):console.error("THREE.SceneNode: Unknown scope:",r),t}}],[{key:"type",get:function(){return"SceneNode"}}]),n}(eG);xK.BACKGROUND_BLURRINESS="backgroundBlurriness",xK.BACKGROUND_INTENSITY="backgroundIntensity",xK.BACKGROUND_ROTATION="backgroundRotation";var _K=rq(xK,xK.BACKGROUND_BLURRINESS),wK=rq(xK,xK.BACKGROUND_INTENSITY),SK=rq(xK,xK.BACKGROUND_ROTATION),MK="point-list",kK="line-list",TK="line-strip",EK="triangle-list",CK="triangle-strip",RK="never",BK="less",PK="equal",NK="less-equal",IK="greater",DK="not-equal",LK="greater-equal",OK="always",FK="store",UK="load",zK="clear",GK="ccw",qK="none",HK="front",VK="back",jK="uint16",WK="uint32",XK={R8Unorm:"r8unorm",R8Snorm:"r8snorm",R8Uint:"r8uint",R8Sint:"r8sint",R16Uint:"r16uint",R16Sint:"r16sint",R16Float:"r16float",RG8Unorm:"rg8unorm",RG8Snorm:"rg8snorm",RG8Uint:"rg8uint",RG8Sint:"rg8sint",R32Uint:"r32uint",R32Sint:"r32sint",R32Float:"r32float",RG16Uint:"rg16uint",RG16Sint:"rg16sint",RG16Float:"rg16float",RGBA8Unorm:"rgba8unorm",RGBA8UnormSRGB:"rgba8unorm-srgb",RGBA8Snorm:"rgba8snorm",RGBA8Uint:"rgba8uint",RGBA8Sint:"rgba8sint",BGRA8Unorm:"bgra8unorm",BGRA8UnormSRGB:"bgra8unorm-srgb",RGB9E5UFloat:"rgb9e5ufloat",RGB10A2Unorm:"rgb10a2unorm",RG11B10uFloat:"rgb10a2unorm",RG32Uint:"rg32uint",RG32Sint:"rg32sint",RG32Float:"rg32float",RGBA16Uint:"rgba16uint",RGBA16Sint:"rgba16sint",RGBA16Float:"rgba16float",RGBA32Uint:"rgba32uint",RGBA32Sint:"rgba32sint",RGBA32Float:"rgba32float",Stencil8:"stencil8",Depth16Unorm:"depth16unorm",Depth24Plus:"depth24plus",Depth24PlusStencil8:"depth24plus-stencil8",Depth32Float:"depth32float",Depth32FloatStencil8:"depth32float-stencil8",BC1RGBAUnorm:"bc1-rgba-unorm",BC1RGBAUnormSRGB:"bc1-rgba-unorm-srgb",BC2RGBAUnorm:"bc2-rgba-unorm",BC2RGBAUnormSRGB:"bc2-rgba-unorm-srgb",BC3RGBAUnorm:"bc3-rgba-unorm",BC3RGBAUnormSRGB:"bc3-rgba-unorm-srgb",BC4RUnorm:"bc4-r-unorm",BC4RSnorm:"bc4-r-snorm",BC5RGUnorm:"bc5-rg-unorm",BC5RGSnorm:"bc5-rg-snorm",BC6HRGBUFloat:"bc6h-rgb-ufloat",BC6HRGBFloat:"bc6h-rgb-float",BC7RGBAUnorm:"bc7-rgba-unorm",BC7RGBAUnormSRGB:"bc7-rgba-srgb",ETC2RGB8Unorm:"etc2-rgb8unorm",ETC2RGB8UnormSRGB:"etc2-rgb8unorm-srgb",ETC2RGB8A1Unorm:"etc2-rgb8a1unorm",ETC2RGB8A1UnormSRGB:"etc2-rgb8a1unorm-srgb",ETC2RGBA8Unorm:"etc2-rgba8unorm",ETC2RGBA8UnormSRGB:"etc2-rgba8unorm-srgb",EACR11Unorm:"eac-r11unorm",EACR11Snorm:"eac-r11snorm",EACRG11Unorm:"eac-rg11unorm",EACRG11Snorm:"eac-rg11snorm",ASTC4x4Unorm:"astc-4x4-unorm",ASTC4x4UnormSRGB:"astc-4x4-unorm-srgb",ASTC5x4Unorm:"astc-5x4-unorm",ASTC5x4UnormSRGB:"astc-5x4-unorm-srgb",ASTC5x5Unorm:"astc-5x5-unorm",ASTC5x5UnormSRGB:"astc-5x5-unorm-srgb",ASTC6x5Unorm:"astc-6x5-unorm",ASTC6x5UnormSRGB:"astc-6x5-unorm-srgb",ASTC6x6Unorm:"astc-6x6-unorm",ASTC6x6UnormSRGB:"astc-6x6-unorm-srgb",ASTC8x5Unorm:"astc-8x5-unorm",ASTC8x5UnormSRGB:"astc-8x5-unorm-srgb",ASTC8x6Unorm:"astc-8x6-unorm",ASTC8x6UnormSRGB:"astc-8x6-unorm-srgb",ASTC8x8Unorm:"astc-8x8-unorm",ASTC8x8UnormSRGB:"astc-8x8-unorm-srgb",ASTC10x5Unorm:"astc-10x5-unorm",ASTC10x5UnormSRGB:"astc-10x5-unorm-srgb",ASTC10x6Unorm:"astc-10x6-unorm",ASTC10x6UnormSRGB:"astc-10x6-unorm-srgb",ASTC10x8Unorm:"astc-10x8-unorm",ASTC10x8UnormSRGB:"astc-10x8-unorm-srgb",ASTC10x10Unorm:"astc-10x10-unorm",ASTC10x10UnormSRGB:"astc-10x10-unorm-srgb",ASTC12x10Unorm:"astc-12x10-unorm",ASTC12x10UnormSRGB:"astc-12x10-unorm-srgb",ASTC12x12Unorm:"astc-12x12-unorm",ASTC12x12UnormSRGB:"astc-12x12-unorm-srgb"},YK="clamp-to-edge",QK="repeat",JK="mirror-repeat",KK="linear",ZK="nearest",$K="zero",eZ="one",tZ="src",nZ="one-minus-src",rZ="src-alpha",iZ="one-minus-src-alpha",aZ="dst",oZ="one-minus-dst",sZ="dst-alpha",uZ="one-minus-dst-alpha",lZ="src-alpha-saturated",cZ="constant",hZ="one-minus-constant",dZ="add",fZ="subtract",pZ="reverse-subtract",AZ="min",vZ="max",mZ=0,gZ=15,yZ="keep",bZ="zero",xZ="replace",_Z="invert",wZ="increment-clamp",SZ="decrement-clamp",MZ="increment-wrap",kZ="decrement-wrap",TZ="storage",EZ="read-only-storage",CZ="write-only",RZ="read-only",BZ="float",PZ="unfilterable-float",NZ="depth",IZ="sint",DZ="uint",LZ="2d",OZ="3d",FZ="2d",UZ="2d-array",zZ="cube",GZ="3d",qZ="all",HZ="vertex",VZ="instance",jZ={DepthClipControl:"depth-clip-control",Depth32FloatStencil8:"depth32float-stencil8",TextureCompressionBC:"texture-compression-bc",TextureCompressionETC2:"texture-compression-etc2",TextureCompressionASTC:"texture-compression-astc",TimestampQuery:"timestamp-query",IndirectFirstInstance:"indirect-first-instance",ShaderF16:"shader-f16",RG11B10UFloat:"rg11b10ufloat-renderable",BGRA8UNormStorage:"bgra8unorm-storage",Float32Filterable:"float32-filterable",ClipDistances:"clip-distances",DualSourceBlending:"dual-source-blending",Subgroups:"subgroups"};new WeakMap;var WZ=new ML,XZ=function(e){Y(n,e);var t=$(n);function n(e,r){var i;return V(this,n),(i=t.call(this,r)).passNode=e,i.setUpdateMatrix(!1),i}return W(n,[{key:"setup",value:function(e){return e.object.isQuadMesh&&this.passNode.build(e),oe(Q(n.prototype),"setup",this).call(this,e)}},{key:"clone",value:function(){return new this.constructor(this.passNode,this.value)}}],[{key:"type",get:function(){return"PassTextureNode"}}]),n}(Tj),YZ=function(e){Y(n,e);var t=$(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return V(this,n),(i=t.call(this,e,null)).textureName=r,i.previousTexture=a,i}return W(n,[{key:"updateTexture",value:function(){this.value=this.previousTexture?this.passNode.getPreviousTexture(this.textureName):this.passNode.getTexture(this.textureName)}},{key:"setup",value:function(e){return this.updateTexture(),oe(Q(n.prototype),"setup",this).call(this,e)}},{key:"clone",value:function(){return new this.constructor(this.passNode,this.textureName,this.previousTexture)}}],[{key:"type",get:function(){return"PassMultipleTextureNode"}}]),n}(XZ),QZ=function(e){Y(n,e);var t=$(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};V(this,n),(a=t.call(this,"vec4")).scope=e,a.scene=r,a.camera=i,a.options=o,a._pixelRatio=1,a._width=1,a._height=1;var s=new RU;s.isRenderTargetTexture=!0,s.name="depth";var u=new WL(a._width*a._pixelRatio,a._height*a._pixelRatio,b({type:cD},o));return u.texture.name="output",u.depthTexture=s,a.renderTarget=u,a.updateBeforeType=Xz,a._textures={output:u.texture,depth:s},a._textureNodes={},a._linearDepthNodes={},a._viewZNodes={},a._previousTextures={},a._previousTextureNodes={},a._cameraNear=Dq(0),a._cameraFar=Dq(0),a._mrt=null,a.isPassNode=!0,a}return W(n,[{key:"setMRT",value:function(e){return this._mrt=e,this}},{key:"getMRT",value:function(){return this._mrt}},{key:"isGlobal",value:function(){return!0}},{key:"getTexture",value:function(e){var t=this._textures[e];void 0===t&&((t=this.renderTarget.texture.clone()).isRenderTargetTexture=!0,t.name=e,this._textures[e]=t,this.renderTarget.textures.push(t));return t}},{key:"getPreviousTexture",value:function(e){var t=this._previousTextures[e];return void 0===t&&((t=this.getTexture(e).clone()).isRenderTargetTexture=!0,this._previousTextures[e]=t),t}},{key:"toggleTexture",value:function(e){var t=this._previousTextures[e];if(void 0!==t){var n=this._textures[e],r=this.renderTarget.textures.indexOf(n);this.renderTarget.textures[r]=t,this._textures[e]=t,this._previousTextures[e]=n,this._textureNodes[e].updateTexture(),this._previousTextureNodes[e].updateTexture()}}},{key:"getTextureNode",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"output",t=this._textureNodes[e];return void 0===t&&((t=$G(new YZ(this,e))).updateTexture(),this._textureNodes[e]=t),t}},{key:"getPreviousTextureNode",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"output",t=this._previousTextureNodes[e];return void 0===t&&(void 0===this._textureNodes[e]&&this.getTextureNode(e),(t=$G(new YZ(this,e,!0))).updateTexture(),this._previousTextureNodes[e]=t),t}},{key:"getViewZNode",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"depth",t=this._viewZNodes[e];if(void 0===t){var n=this._cameraNear,r=this._cameraFar;this._viewZNodes[e]=t=iY(this.getTextureNode(e),n,r)}return t}},{key:"getLinearDepthNode",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"depth",t=this._linearDepthNodes[e];if(void 0===t){var n=this._cameraNear,r=this._cameraFar,i=this.getViewZNode(e);this._linearDepthNodes[e]=t=nY(i,n,r)}return t}},{key:"setup",value:function(e){var t=e.renderer;return this.renderTarget.samples=void 0===this.options.samples?t.samples:this.options.samples,!0===t.backend.isWebGLBackend&&(this.renderTarget.samples=0),this.renderTarget.depthTexture.isMultisampleRenderTargetTexture=this.renderTarget.samples>1,this.scope===n.COLOR?this.getTextureNode():this.getLinearDepthNode()}},{key:"updateBefore",value:function(e){var t=e.renderer,n=this.scene,r=this.camera;this._pixelRatio=t.getPixelRatio();var i=t.getSize(WZ);this.setSize(i.width,i.height);var a=t.getRenderTarget(),o=t.getMRT();for(var s in this._cameraNear.value=r.near,this._cameraFar.value=r.far,this._previousTextures)this.toggleTexture(s);t.setRenderTarget(this.renderTarget),t.setMRT(this._mrt),t.render(n,r),t.setRenderTarget(a),t.setMRT(o)}},{key:"setSize",value:function(e,t){this._width=e,this._height=t;var n=this._width*this._pixelRatio,r=this._height*this._pixelRatio;this.renderTarget.setSize(n,r)}},{key:"setPixelRatio",value:function(e){this._pixelRatio=e,this.setSize(this._width,this._height)}},{key:"dispose",value:function(){this.renderTarget.dispose()}}],[{key:"type",get:function(){return"PassNode"}}]),n}(rG);QZ.COLOR="color",QZ.DEPTH="depth";var JZ=iq((function(e){var t=l(e,2),n=t[0],r=t[1];return n.mul(r).clamp()})).setLayout({name:"linearToneMapping",type:"vec3",inputs:[{name:"color",type:"vec3"},{name:"exposure",type:"float"}]}),KZ=iq((function(e){var t=l(e,2),n=t[0],r=t[1];return(n=n.mul(r)).div(n.add(1)).clamp()})).setLayout({name:"reinhardToneMapping",type:"vec3",inputs:[{name:"color",type:"vec3"},{name:"exposure",type:"float"}]}),ZZ=iq((function(e){var t=l(e,2),n=t[0],r=t[1],i=(n=(n=n.mul(r)).sub(.004).max(0)).mul(n.mul(6.2).add(.5)),a=n.mul(n.mul(6.2).add(1.7)).add(.06);return i.div(a).pow(2.2)})).setLayout({name:"cineonToneMapping",type:"vec3",inputs:[{name:"color",type:"vec3"},{name:"exposure",type:"float"}]}),$Z=iq((function(e){var t=l(e,1)[0],n=t.mul(t.add(.0245786)).sub(90537e-9),r=t.mul(t.add(.432951).mul(.983729)).add(.238081);return n.div(r)})),e$=iq((function(e){var t=l(e,2),n=t[0],r=t[1],i=kq(.59719,.35458,.04823,.076,.90834,.01566,.0284,.13383,.83777),a=kq(1.60475,-.53108,-.07367,-.10208,1.10813,-.00605,-.00327,-.07276,1.07602);return n=n.mul(r).div(.6),n=i.mul(n),n=$Z(n),(n=a.mul(n)).clamp()})).setLayout({name:"acesFilmicToneMapping",type:"vec3",inputs:[{name:"color",type:"vec3"},{name:"exposure",type:"float"}]}),t$=kq(mq(1.6605,-.1246,-.0182),mq(-.5876,1.1329,-.1006),mq(-.0728,-.0083,1.1187)),n$=kq(mq(.6274,.0691,.0164),mq(.3293,.9195,.088),mq(.0433,.0113,.8956)),r$=iq((function(e){var t=l(e,1)[0],n=mq(t).toVar(),r=mq(n.mul(n)).toVar(),i=mq(r.mul(r)).toVar();return lq(15.5).mul(i.mul(r)).sub(mH(40.14,i.mul(n))).add(mH(31.96,i).sub(mH(6.868,r.mul(n))).add(mH(.4298,r).add(mH(.1191,n).sub(.00232))))})),i$=iq((function(e){var t=l(e,2),n=t[0],r=t[1],i=mq(n).toVar(),a=kq(mq(.856627153315983,.137318972929847,.11189821299995),mq(.0951212405381588,.761241990602591,.0767994186031903),mq(.0482516061458583,.101439036467562,.811302368396859)),o=kq(mq(1.1271005818144368,-.1413297634984383,-.14132976349843826),mq(-.11060664309660323,1.157823702216272,-.11060664309660294),mq(-.016493938717834573,-.016493938717834257,1.2519364065950405)),s=lq(-12.47393),u=lq(4.026069);return i.mulAssign(r),i.assign(n$.mul(i)),i.assign(a.mul(i)),i.assign(bV(i,1e-10)),i.assign(XH(i)),i.assign(i.sub(s).div(u.sub(s))),i.assign(DV(i,0,1)),i.assign(r$(i)),i.assign(o.mul(i)),i.assign(EV(bV(mq(0),i),mq(2.2))),i.assign(t$.mul(i)),i.assign(DV(i,0,1)),i})).setLayout({name:"agxToneMapping",type:"vec3",inputs:[{name:"color",type:"vec3"},{name:"exposure",type:"float"}]}),a$=iq((function(e){var t=l(e,2),n=t[0],r=t[1],i=lq(.76),a=lq(.15);n=n.mul(r);var o=yV(n.r,yV(n.g,n.b)),s=GV(o.lessThan(.08),o.sub(mH(6.25,o.mul(o))),.04);n.subAssign(s);var u=bV(n.r,bV(n.g,n.b));sq(u.lessThan(i),(function(){return n}));var c=vH(1,i),h=vH(1,c.mul(c).div(u.add(c.sub(i))));n.mulAssign(h.div(u));var d=vH(1,gH(1,a.mul(u.sub(h)).add(1)));return IV(n,mq(h),d)})).setLayout({name:"neutralToneMapping",type:"vec3",inputs:[{name:"color",type:"vec3"},{name:"exposure",type:"float"}]}),o$=function(e){Y(n,e);var t=$(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return V(this,n),(e=t.call(this,"code")).isCodeNode=!0,e.code=r,e.language=a,e.includes=i,e}return W(n,[{key:"isGlobal",value:function(){return!0}},{key:"setIncludes",value:function(e){return this.includes=e,this}},{key:"getIncludes",value:function(){return this.includes}},{key:"generate",value:function(e){var t,n=ee(this.getIncludes(e));try{for(n.s();!(t=n.n()).done;){t.value.build(e)}}catch(i){n.e(i)}finally{n.f()}var r=e.getCodeFromNode(this,this.getNodeType(e));return r.code=this.code,r.code}},{key:"serialize",value:function(e){oe(Q(n.prototype),"serialize",this).call(this,e),e.code=this.code,e.language=this.language}},{key:"deserialize",value:function(e){oe(Q(n.prototype),"deserialize",this).call(this,e),this.code=e.code,this.language=e.language}}],[{key:"type",get:function(){return"CodeNode"}}]),n}(eG),s$=function(e){Y(n,e);var t=$(n);function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return V(this,n),t.call(this,e,r,i)}return W(n,[{key:"getNodeType",value:function(e){return this.getNodeFunction(e).type}},{key:"getInputs",value:function(e){return this.getNodeFunction(e).inputs}},{key:"getNodeFunction",value:function(e){var t=e.getDataFromNode(this),n=t.nodeFunction;return void 0===n&&(n=e.parser.parseFunction(this.code),t.nodeFunction=n),n}},{key:"generate",value:function(e,t){oe(Q(n.prototype),"generate",this).call(this,e);var r=this.getNodeFunction(e),i=r.name,a=r.type,o=e.getCodeFromNode(this,a);""!==i&&(o.name=i);var s=e.getPropertyName(o),u=this.getNodeFunction(e).getCode(s);return o.code=u+"\n","property"===t?s:e.format("".concat(s,"()"),a,t)}}],[{key:"type",get:function(){return"FunctionNode"}}]),n}(o$),u$=function(e){Y(n,e);var t=$(n);function n(){return V(this,n),t.apply(this,arguments)}return W(n,[{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.has(e))return oe(Q(n.prototype),"get",this).call(this,e);if(null!==t){for(var r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];var o=t.apply(void 0,i);return this.set(e,o),o}}}]),n}(ne(Map)),l$=(new u$,function(e){Y(n,e);var t=$(n);function n(e,r){var i;return V(this,n),(i=t.call(this,"float")).isFogNode=!0,i.colorNode=e,i.factorNode=r,i}return W(n,[{key:"getViewZNode",value:function(e){var t,n=e.context.getViewZ;return void 0!==n&&(t=n(this)),(t||jj.z).negate()}},{key:"setup",value:function(){return this.factorNode}}],[{key:"type",get:function(){return"FogNode"}}]),n}(eG)),c$=nq(function(e){Y(n,e);var t=$(n);function n(e,r,i){var a;return V(this,n),(a=t.call(this,e)).isFogRangeNode=!0,a.nearNode=r,a.farNode=i,a}return W(n,[{key:"setup",value:function(e){var t=this.getViewZNode(e);return OV(this.nearNode,this.farNode,t)}}],[{key:"type",get:function(){return"FogRangeNode"}}]),n}(l$)),h$=nq(function(e){Y(n,e);var t=$(n);function n(e,r){var i;return V(this,n),(i=t.call(this,e)).isFogExp2Node=!0,i.densityNode=r,i}return W(n,[{key:"setup",value:function(e){var t=this.getViewZNode(e),n=this.densityNode;return n.mul(n,t,t).negate().exp().oneMinus()}}],[{key:"type",get:function(){return"FogExp2Node"}}]),n}(l$)),d$=(nq(function(e){Y(n,e);var t=$(n);function n(e){var r;return V(this,n),(r=t.call(this)).scope=e,r}return W(n,[{key:"generate",value:function(e){var t=this.scope;!0===e.renderer.backend.isWebGLBackend?e.addFlowCode("\t// ".concat(t,"Barrier \n")):e.addLineFlowCode("".concat(t,"Barrier()"),this)}}]),n}(eG)),function(e){Y(n,e);var t=$(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return V(this,n),(a=t.call(this,"uint")).method=e,a.pointerNode=r,a.valueNode=i,a.storeNode=o,a}return W(n,[{key:"getInputType",value:function(e){return this.pointerNode.getNodeType(e)}},{key:"getNodeType",value:function(e){return this.getInputType(e)}},{key:"generate",value:function(e){var t=this.method,n=this.getNodeType(e),r=this.getInputType(e),i=this.pointerNode,a=this.valueNode,o=[];o.push("&".concat(i.build(e,r))),o.push(a.build(e,r));var s="".concat(e.getMethod(t,n),"( ").concat(o.join(", ")," )");if(null!==this.storeNode){var u=this.storeNode.build(e,r);e.addLineFlowCode("".concat(u," = ").concat(s),this)}else e.addLineFlowCode(s,this)}}],[{key:"type",get:function(){return"AtomicFunctionNode"}}]),n}(rG));d$.ATOMIC_LOAD="atomicLoad",d$.ATOMIC_STORE="atomicStore",d$.ATOMIC_ADD="atomicAdd",d$.ATOMIC_SUB="atomicSub",d$.ATOMIC_MAX="atomicMax",d$.ATOMIC_MIN="atomicMin",d$.ATOMIC_AND="atomicAnd",d$.ATOMIC_OR="atomicOr",d$.ATOMIC_XOR="atomicXor";var f$;nq(d$);function p$(e){var t=(f$=f$||new WeakMap).get(e);return void 0===t&&f$.set(e,t={}),t}function A$(e){var t=p$(e);return t.position||(t.position=Dq(new JL).setGroup(Pq).onRenderUpdate((function(t,n){return n.value.setFromMatrixPosition(e.matrixWorld)})))}function v$(e){var t=p$(e);return t.viewPosition||(t.viewPosition=Dq(new JL).setGroup(Pq).onRenderUpdate((function(t,n){var r=t.camera;n.value=n.value||new JL,n.value.setFromMatrixPosition(e.matrixWorld),n.value.applyMatrix4(r.matrixWorldInverse)})))}var m$=function(e){return Nj.transformDirection(A$(e).sub(function(e){var t=p$(e);return t.targetPosition||(t.targetPosition=Dq(new JL).setGroup(Pq).onRenderUpdate((function(t,n){return n.value.setFromMatrixPosition(e.target.matrixWorld)})))}(e)))},g$=function(e,t){var n,r=ee(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.isAnalyticLightNode&&i.light.id===e)return i}}catch(a){r.e(a)}finally{r.f()}return null},y$=new WeakMap,b$=function(e){Y(n,e);var t=$(n);function n(){var e;return V(this,n),(e=t.call(this,"vec3")).totalDiffuseNode=mq().toVar("totalDiffuse"),e.totalSpecularNode=mq().toVar("totalSpecular"),e.outgoingLightNode=mq().toVar("outgoingLight"),e._lights=[],e._lightNodes=null,e._lightNodesHash=null,e.global=!0,e}return W(n,[{key:"getHash",value:function(e){if(null===this._lightNodesHash){null===this._lightNodes&&this.setupLightsNode(e);var t,n=[],r=ee(this._lightNodes);try{for(r.s();!(t=r.n()).done;){var i=t.value;n.push(i.getSelf().getHash())}}catch(a){r.e(a)}finally{r.f()}this._lightNodesHash="lights-"+n.join(",")}return this._lightNodesHash}},{key:"analyze",value:function(e){var t,n=ee(e.getDataFromNode(this).nodes);try{for(n.s();!(t=n.n()).done;){t.value.build(e)}}catch(r){n.e(r)}finally{n.f()}}},{key:"setupLightsNode",value:function(e){var t,n=[],r=this._lightNodes,i=function(e){return e.sort((function(e,t){return e.id-t.id}))}(this._lights),a=e.renderer.library,o=ee(i);try{for(o.s();!(t=o.n()).done;){var s=t.value;if(s.isNode)n.push($G(s));else{var u=null;if(null!==r&&(u=g$(s.id,r)),null===u){var l=a.getLightNodeClass(s.constructor);if(null===l){console.warn("LightsNode.setupNodeLights: Light node not found for ".concat(s.constructor.name));continue}var c=null;y$.has(s)?c=y$.get(s):(c=$G(new l(s)),y$.set(s,c)),n.push(c)}}}}catch(h){o.e(h)}finally{o.f()}this._lightNodes=n}},{key:"setupLights",value:function(e,t){var n,r=ee(t);try{for(r.s();!(n=r.n()).done;){n.value.build(e)}}catch(i){r.e(i)}finally{r.f()}}},{key:"setup",value:function(e){null===this._lightNodes&&this.setupLightsNode(e);var t=e.context,n=t.lightingModel,r=this.outgoingLightNode;if(n){var i=this._lightNodes,a=this.totalDiffuseNode,o=this.totalSpecularNode;t.outgoingLight=r;var s=e.addStack();e.getDataFromNode(this).nodes=s.nodes,n.start(t,s,e),this.setupLights(e,i),n.indirect(t,s,e);var u=t.backdrop,l=t.backdropAlpha,c=t.reflectedLight,h=c.directDiffuse,d=c.directSpecular,f=c.indirectDiffuse,p=c.indirectSpecular,A=h.add(f);null!==u&&(A=mq(null!==l?l.mix(A,u):u),t.material.transparent=!0),a.assign(A),o.assign(d.add(p)),r.assign(a.add(o)),n.finish(t,s,e),r=r.bypass(e.removeStack())}return r}},{key:"setLights",value:function(e){return this._lights=e,this._lightNodes=null,this._lightNodesHash=null,this}},{key:"getLights",value:function(){return this._lights}},{key:"hasLights",get:function(){return this._lights.length>0}}],[{key:"type",get:function(){return"LightsNode"}}]),n}(eG),x$=iq((function(e){var t=e.depthTexture,n=e.shadowCoord;return Ej(t,n.xy).compare(n.z)})),_$=iq((function(e){var t=e.depthTexture,n=e.shadowCoord,r=e.shadow,i=function(e,n){return Ej(t,e).compare(n)},a=gW("mapSize","vec2",r).setGroup(Pq),o=gW("radius","float",r).setGroup(Pq),s=fq(1).div(a),u=s.x.negate().mul(o),l=s.y.negate().mul(o),c=s.x.mul(o),h=s.y.mul(o),d=u.div(2),f=l.div(2),p=c.div(2),A=h.div(2);return AH(i(n.xy.add(fq(u,l)),n.z),i(n.xy.add(fq(0,l)),n.z),i(n.xy.add(fq(c,l)),n.z),i(n.xy.add(fq(d,f)),n.z),i(n.xy.add(fq(0,f)),n.z),i(n.xy.add(fq(p,f)),n.z),i(n.xy.add(fq(u,0)),n.z),i(n.xy.add(fq(d,0)),n.z),i(n.xy,n.z),i(n.xy.add(fq(p,0)),n.z),i(n.xy.add(fq(c,0)),n.z),i(n.xy.add(fq(d,A)),n.z),i(n.xy.add(fq(0,A)),n.z),i(n.xy.add(fq(p,A)),n.z),i(n.xy.add(fq(u,h)),n.z),i(n.xy.add(fq(0,h)),n.z),i(n.xy.add(fq(c,h)),n.z)).mul(1/17)})),w$=iq((function(e){var t=e.depthTexture,n=e.shadowCoord,r=e.shadow,i=function(e,n){return Ej(t,e).compare(n)},a=gW("mapSize","vec2",r).setGroup(Pq),o=fq(1).div(a),s=o.x,u=o.y,l=n.xy,c=$H(l.mul(a).add(.5));return l.subAssign(c.mul(o)),AH(i(l,n.z),i(l.add(fq(s,0)),n.z),i(l.add(fq(0,u)),n.z),i(l.add(o),n.z),IV(i(l.add(fq(s.negate(),0)),n.z),i(l.add(fq(s.mul(2),0)),n.z),c.x),IV(i(l.add(fq(s.negate(),u)),n.z),i(l.add(fq(s.mul(2),u)),n.z),c.x),IV(i(l.add(fq(0,u.negate())),n.z),i(l.add(fq(0,u.mul(2))),n.z),c.y),IV(i(l.add(fq(s,u.negate())),n.z),i(l.add(fq(s,u.mul(2))),n.z),c.y),IV(IV(i(l.add(fq(s.negate(),u.negate())),n.z),i(l.add(fq(s.mul(2),u.negate())),n.z),c.x),IV(i(l.add(fq(s.negate(),u.mul(2))),n.z),i(l.add(fq(s.mul(2),u.mul(2))),n.z),c.x),c.y)).mul(1/9)})),S$=iq((function(e){var t=e.depthTexture,n=e.shadowCoord,r=lq(1).toVar(),i=Ej(t).uv(n.xy).rg,a=_V(n.z,i.x);return sq(a.notEqual(lq(1)),(function(){var e=n.z.sub(i.x),t=bV(0,i.y.mul(i.y)),o=t.div(t.add(e.mul(e)));o=DV(vH(o,.3).div(.95-.3)),r.assign(DV(bV(a,o)))})),r})),M$=iq((function(e){var t=e.samples,n=e.radius,r=e.size,i=e.shadowPass,a=lq(0).toVar(),o=lq(0).toVar(),s=t.lessThanEqual(lq(1)).select(lq(0),lq(2).div(t.sub(1))),u=t.lessThanEqual(lq(1)).select(lq(0),lq(-1));RX({start:cq(0),end:cq(t),type:"int",condition:"<"},(function(e){var t=e.i,l=u.add(lq(t).mul(s)),c=i.uv(AH(XX.xy,fq(0,l).mul(n)).div(r)).x;a.addAssign(c),o.addAssign(c.mul(c))})),a.divAssign(t),o.divAssign(t);var l=YH(o.sub(a.mul(a)));return fq(a,l)})),k$=iq((function(e){var t=e.samples,n=e.radius,r=e.size,i=e.shadowPass,a=lq(0).toVar(),o=lq(0).toVar(),s=t.lessThanEqual(lq(1)).select(lq(0),lq(2).div(t.sub(1))),u=t.lessThanEqual(lq(1)).select(lq(0),lq(-1));RX({start:cq(0),end:cq(t),type:"int",condition:"<"},(function(e){var t=e.i,l=u.add(lq(t).mul(s)),c=i.uv(AH(XX.xy,fq(l,0).mul(n)).div(r));a.addAssign(c.x),o.addAssign(AH(c.y.mul(c.y),c.x.mul(c.x)))})),a.divAssign(t),o.divAssign(t);var l=YH(o.sub(a.mul(a)));return fq(a,l)})),T$=[x$,_$,w$,S$],E$=null,C$=new gK,R$=function(e){Y(n,e);var t=$(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return V(this,n),(r=t.call(this)).light=e,r.shadow=i||e.shadow,r.shadowMap=null,r.vsmShadowMapVertical=null,r.vsmShadowMapHorizontal=null,r.vsmMaterialVertical=null,r.vsmMaterialHorizontal=null,r.updateBeforeType=Yz,r._node=null,r.isShadowNode=!0,r}return W(n,[{key:"setupShadow",value:function(e){var t=e.object,n=e.renderer;null===E$&&((E$=new fY).fragmentNode=xq(0,0,0,1),E$.isShadowNodeMaterial=!0,E$.name="ShadowMaterial");var r=this.shadow,i=n.shadowMap.type,a=new RU(r.mapSize.width,r.mapSize.height);a.compareFunction=513;var o=e.createRenderTarget(r.mapSize.width,r.mapSize.height);if(o.depthTexture=a,r.camera.updateProjectionMatrix(),3===i){a.compareFunction=null,this.vsmShadowMapVertical=e.createRenderTarget(r.mapSize.width,r.mapSize.height,{format:yD,type:cD}),this.vsmShadowMapHorizontal=e.createRenderTarget(r.mapSize.width,r.mapSize.height,{format:yD,type:cD});var s=Ej(a),u=Ej(this.vsmShadowMapVertical.texture),l=gW("blurSamples","float",r).setGroup(Pq),c=gW("radius","float",r).setGroup(Pq),h=gW("mapSize","vec2",r).setGroup(Pq),d=this.vsmMaterialVertical||(this.vsmMaterialVertical=new fY);d.fragmentNode=M$({samples:l,radius:c,size:h,shadowPass:s}).context(e.getSharedContext()),d.name="VSMVertical",(d=this.vsmMaterialHorizontal||(this.vsmMaterialHorizontal=new fY)).fragmentNode=k$({samples:l,radius:c,size:h,shadowPass:u}).context(e.getSharedContext()),d.name="VSMHorizontal"}var f,p=gW("intensity","float",r).setGroup(Pq),A=gW("bias","float",r).setGroup(Pq),v=gW("normalBias","float",r).setGroup(Pq),m=t.material.shadowPositionNode||Hj,g=Dq(r.matrix).setGroup(Pq).mul(m.add(eW.mul(v)));if(r.camera.isOrthographicCamera||!0!==n.logarithmicDepthBuffer)f=(g=g.xyz.div(g.w)).z,n.coordinateSystem===dL&&(f=f.mul(2).sub(1));else{var y=g.w;g=g.xy.div(y);var b=Dq("float").onRenderUpdate((function(){return r.camera.near})),x=Dq("float").onRenderUpdate((function(){return r.camera.far}));f=aY(y,b,x)}var _=(g=mq(g.x,g.y.oneMinus(),f.add(A))).x.greaterThanEqual(0).and(g.x.lessThanEqual(1)).and(g.y.greaterThanEqual(0)).and(g.y.lessThanEqual(1)).and(g.z.lessThanEqual(1)),w=r.filterNode||T$[n.shadowMap.type]||null;if(null===w)throw new Error("THREE.WebGPURenderer: Shadow map type not supported yet.");var S=Ej(o.texture,g),M=_.select(w({depthTexture:3===i?this.vsmShadowMapHorizontal.texture:a,shadowCoord:g,shadow:r}),lq(1));return this.shadowMap=o,this.shadow.map=o,IV(1,M.rgb.mix(S,1),p.mul(S.a))}},{key:"setup",value:function(e){if(!1!==e.renderer.shadowMap.enabled)return null!==this._node?this._node:this._node=this.setupShadow(e)}},{key:"updateShadow",value:function(e){var t=this.shadowMap,n=this.light,r=this.shadow,i=e.renderer,a=e.scene,o=e.camera,s=i.shadowMap.type,u=t.depthTexture.version;this._depthVersionCached=u;var l=a.overrideMaterial;a.overrideMaterial=E$,t.setSize(r.mapSize.width,r.mapSize.height),r.updateMatrices(n),r.camera.layers.mask=o.layers.mask;var c=i.getRenderTarget(),h=i.getRenderObjectFunction();i.setRenderObjectFunction((function(e){if(!0===e.castShadow||e.receiveShadow&&3===s){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];i.renderObject.apply(i,[e].concat(n))}})),i.setRenderTarget(t),i.render(a,r.camera),i.setRenderObjectFunction(h),!0!==n.isPointLight&&3===s&&this.vsmPass(i),i.setRenderTarget(c),a.overrideMaterial=l}},{key:"vsmPass",value:function(e){var t=this.shadow;this.vsmShadowMapVertical.setSize(t.mapSize.width,t.mapSize.height),this.vsmShadowMapHorizontal.setSize(t.mapSize.width,t.mapSize.height),e.setRenderTarget(this.vsmShadowMapVertical),C$.material=this.vsmMaterialVertical,C$.render(e),e.setRenderTarget(this.vsmShadowMapHorizontal),C$.material=this.vsmMaterialHorizontal,C$.render(e)}},{key:"dispose",value:function(){this.shadowMap.dispose(),this.shadowMap=null,null!==this.vsmShadowMapVertical&&(this.vsmShadowMapVertical.dispose(),this.vsmShadowMapVertical=null,this.vsmMaterialVertical.dispose(),this.vsmMaterialVertical=null),null!==this.vsmShadowMapHorizontal&&(this.vsmShadowMapHorizontal.dispose(),this.vsmShadowMapHorizontal=null,this.vsmMaterialHorizontal.dispose(),this.vsmMaterialHorizontal=null),this.updateBeforeType=Wz}},{key:"updateBefore",value:function(e){var t=this.shadow;(t.needsUpdate||t.autoUpdate)&&(this.updateShadow(e),this.shadowMap.depthTexture.version===this._depthVersionCached&&(t.needsUpdate=!1))}}],[{key:"type",get:function(){return"ShadowNode"}}]),n}(eG),B$=function(e){Y(n,e);var t=$(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return V(this,n),(e=t.call(this)).updateType=Xz,e.light=r,e.color=new gF,e.colorNode=Dq(e.color).setGroup(Pq),e.baseColorNode=null,e.shadowNode=null,e.shadowColorNode=null,e.isAnalyticLightNode=!0,e}return W(n,[{key:"getCacheKey",value:function(){return Fz(oe(Q(n.prototype),"getCacheKey",this).call(this),this.light.id,this.light.castShadow?1:0)}},{key:"getHash",value:function(){return this.light.uuid}},{key:"setupShadow",value:function(e){if(!1!==e.renderer.shadowMap.enabled){var t,n,r=this.shadowColorNode;if(null===r){var i,a=this.light.shadow.shadowNode;void 0!==a?i=$G(a):(t=this.light,i=$G(new R$(t,n))),this.shadowNode=i,this.shadowColorNode=r=this.colorNode.mul(i),this.baseColorNode=this.colorNode}this.colorNode=r}}},{key:"setup",value:function(e){this.colorNode=this.baseColorNode||this.colorNode,this.light.castShadow?e.object.receiveShadow&&this.setupShadow(e):null!==this.shadowNode&&this.shadowNode.dispose()}},{key:"update",value:function(){var e=this.light;this.color.copy(e.color).multiplyScalar(e.intensity)}}],[{key:"type",get:function(){return"AnalyticLightNode"}}]),n}(UX),P$=iq((function(e){var t=e.lightDistance,n=e.cutoffDistance,r=e.decayExponent,i=t.pow(r).max(.01).reciprocal();return n.greaterThan(0).select(i.mul(t.div(n).pow4().oneMinus().clamp().pow2()),i)})),N$=iq((function(e,t){var n=e.color,r=e.lightViewPosition,i=e.cutoffDistance,a=e.decayExponent,o=t.context.lightingModel,s=r.sub(jj),u=s.normalize(),l=s.length(),c=P$({lightDistance:l,cutoffDistance:i,decayExponent:a}),h=n.mul(c),d=t.context.reflectedLight;o.direct({lightDirection:u,lightColor:h,reflectedLight:d},t.stack,t)})),I$=function(e){Y(n,e);var t=$(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return V(this,n),(e=t.call(this,r)).cutoffDistanceNode=Dq(0).setGroup(Pq),e.decayExponentNode=Dq(0).setGroup(Pq),e}return W(n,[{key:"update",value:function(e){var t=this.light;oe(Q(n.prototype),"update",this).call(this,e),this.cutoffDistanceNode.value=t.distance,this.decayExponentNode.value=t.decay}},{key:"setup",value:function(){N$({color:this.colorNode,lightViewPosition:v$(this.light),cutoffDistance:this.cutoffDistanceNode,decayExponent:this.decayExponentNode}).append()}}],[{key:"type",get:function(){return"PointLightNode"}}]),n}(B$),D$=iq((function(e){var t=l(e,2),n=t[0],r=t[1],i=n.x,a=n.y,o=n.z,s=r.element(0).mul(.886227);return s=(s=(s=(s=(s=(s=(s=(s=s.add(r.element(1).mul(1.023328).mul(a))).add(r.element(2).mul(1.023328).mul(o))).add(r.element(3).mul(1.023328).mul(i))).add(r.element(4).mul(.858086).mul(i).mul(a))).add(r.element(5).mul(.858086).mul(a).mul(o))).add(r.element(6).mul(o.mul(o).mul(.743125).sub(.247708)))).add(r.element(7).mul(.858086).mul(i).mul(o))).add(r.element(8).mul(.429043).mul(mH(i,i).sub(mH(a,a))))})),L$=new cK,O$=function(e){Y(n,e);var t=$(n);function n(e,r){var i;return V(this,n),(i=t.call(this)).renderer=e,i.nodes=r,i}return W(n,[{key:"update",value:function(e,t,n){var r=this.renderer,i=this.nodes.getBackgroundNode(e)||e.background,a=!1;if(null===i)r._clearColor.getRGB(L$,aL),L$.a=r._clearColor.a;else if(!0===i.isColor)i.getRGB(L$,aL),L$.a=1,a=!0;else if(!0===i.isNode){var o=this.get(e),s=i;L$.copy(r._clearColor);var u=o.backgroundMesh;if(void 0===u){var l=HV(xq(s).mul(wK),{getUV:function(){return SK.mul(Zj)},getTextureLevel:function(){return _K}}),c=yX();c=c.setZ(c.w);var h=new fY;h.name="Background.material",h.side=1,h.depthTest=!1,h.depthWrite=!1,h.fog=!1,h.lights=!1,h.vertexNode=c,h.colorNode=l,o.backgroundMeshNode=l,o.backgroundMesh=u=new $F(new BU(1,32,32),h),u.frustumCulled=!1,u.name="Background.mesh",u.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)}}var d=s.getCacheKey();o.backgroundCacheKey!==d&&(o.backgroundMeshNode.node=xq(s).mul(wK),o.backgroundMeshNode.needsUpdate=!0,u.material.needsUpdate=!0,o.backgroundCacheKey=d),t.unshift(u,u.geometry,u.material,0,0,null)}else console.error("THREE.Renderer: Unsupported background configuration.",i);if(!0===r.autoClear||!0===a){var f=n.clearColorValue;f.r=L$.r,f.g=L$.g,f.b=L$.b,f.a=L$.a,!0!==r.backend.isWebGLBackend&&!0!==r.alpha||(f.r*=f.a,f.g*=f.a,f.b*=f.a),n.depthClearValue=r._clearDepth,n.stencilClearValue=r._clearStencil,n.clearColor=!0===r.autoClearColor,n.clearDepth=!0===r.autoClearDepth,n.clearStencil=!0===r.autoClearStencil}else n.clearColor=!1,n.clearDepth=!1,n.clearStencil=!1}}]),n}(DJ),F$=0,U$=W((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];V(this,e),this.name=t,this.bindings=n,this.index=r,this.bindingsReference=i,this.id=F$++})),z$=function(){function e(t,n,r,i,a,o,s,u,l){var c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:[];V(this,e),this.vertexShader=t,this.fragmentShader=n,this.computeShader=r,this.transforms=c,this.nodeAttributes=i,this.bindings=a,this.updateNodes=o,this.updateBeforeNodes=s,this.updateAfterNodes=u,this.monitor=l,this.usedTimes=0}return W(e,[{key:"createBindings",value:function(){var e,t=[],n=ee(this.bindings);try{for(n.s();!(e=n.n()).done;){var r=e.value;if(!0!==r.bindings[0].groupNode.shared){var i=new U$(r.name,[],r.index,r);t.push(i);var a,o=ee(r.bindings);try{for(o.s();!(a=o.n()).done;){var s=a.value;i.bindings.push(s.clone())}}catch(u){o.e(u)}finally{o.f()}}else t.push(r)}}catch(u){n.e(u)}finally{n.f()}return t}}]),e}(),G$=W((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;V(this,e),this.isNodeAttribute=!0,this.name=t,this.type=n,this.node=r})),q$=function(){function e(t,n,r){V(this,e),this.isNodeUniform=!0,this.name=t,this.type=n,this.node=r.getSelf()}return W(e,[{key:"value",get:function(){return this.node.value},set:function(e){this.node.value=e}},{key:"id",get:function(){return this.node.id}},{key:"groupNode",get:function(){return this.node.groupNode}}]),e}(),H$=W((function e(t,n){V(this,e),this.isNodeVar=!0,this.name=t,this.type=n})),V$=function(e){Y(n,e);var t=$(n);function n(e,r){var i;return V(this,n),(i=t.call(this,e,r)).needsInterpolation=!1,i.isNodeVarying=!0,i}return W(n)}(H$),j$=W((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";V(this,e),this.name=t,this.type=n,this.code=r,Object.defineProperty(this,"isNodeCode",{value:!0})})),W$=0,X$=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;V(this,e),this.id=W$++,this.nodesData=new WeakMap,this.parent=t}return W(e,[{key:"getData",value:function(e){var t=this.nodesData.get(e);return void 0===t&&null!==this.parent&&(t=this.parent.getData(e)),t}},{key:"setData",value:function(e,t){this.nodesData.set(e,t)}}]),e}(),Y$=function(){function e(t,n){V(this,e),this.name=t,this.value=n,this.boundary=0,this.itemSize=0,this.offset=0}return W(e,[{key:"setValue",value:function(e){this.value=e}},{key:"getValue",value:function(){return this.value}}]),e}(),Q$=function(e){Y(n,e);var t=$(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return V(this,n),(r=t.call(this,e,i)).isNumberUniform=!0,r.boundary=4,r.itemSize=1,r}return W(n)}(Y$),J$=function(e){Y(n,e);var t=$(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ML;return V(this,n),(r=t.call(this,e,i)).isVector2Uniform=!0,r.boundary=8,r.itemSize=2,r}return W(n)}(Y$),K$=function(e){Y(n,e);var t=$(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new JL;return V(this,n),(r=t.call(this,e,i)).isVector3Uniform=!0,r.boundary=16,r.itemSize=3,r}return W(n)}(Y$),Z$=function(e){Y(n,e);var t=$(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new jL;return V(this,n),(r=t.call(this,e,i)).isVector4Uniform=!0,r.boundary=16,r.itemSize=4,r}return W(n)}(Y$),$$=function(e){Y(n,e);var t=$(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new gF;return V(this,n),(r=t.call(this,e,i)).isColorUniform=!0,r.boundary=16,r.itemSize=3,r}return W(n)}(Y$),e0=function(e){Y(n,e);var t=$(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new kL;return V(this,n),(r=t.call(this,e,i)).isMatrix3Uniform=!0,r.boundary=48,r.itemSize=12,r}return W(n)}(Y$),t0=function(e){Y(n,e);var t=$(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new kO;return V(this,n),(r=t.call(this,e,i)).isMatrix4Uniform=!0,r.boundary=64,r.itemSize=16,r}return W(n)}(Y$),n0=function(e){Y(n,e);var t=$(n);function n(e){var r;return V(this,n),(r=t.call(this,e.name,e.value)).nodeUniform=e,r}return W(n,[{key:"getValue",value:function(){return this.nodeUniform.value}}]),n}(Q$),r0=function(e){Y(n,e);var t=$(n);function n(e){var r;return V(this,n),(r=t.call(this,e.name,e.value)).nodeUniform=e,r}return W(n,[{key:"getValue",value:function(){return this.nodeUniform.value}}]),n}(J$),i0=function(e){Y(n,e);var t=$(n);function n(e){var r;return V(this,n),(r=t.call(this,e.name,e.value)).nodeUniform=e,r}return W(n,[{key:"getValue",value:function(){return this.nodeUniform.value}}]),n}(K$),a0=function(e){Y(n,e);var t=$(n);function n(e){var r;return V(this,n),(r=t.call(this,e.name,e.value)).nodeUniform=e,r}return W(n,[{key:"getValue",value:function(){return this.nodeUniform.value}}]),n}(Z$),o0=function(e){Y(n,e);var t=$(n);function n(e){var r;return V(this,n),(r=t.call(this,e.name,e.value)).nodeUniform=e,r}return W(n,[{key:"getValue",value:function(){return this.nodeUniform.value}}]),n}($$),s0=function(e){Y(n,e);var t=$(n);function n(e){var r;return V(this,n),(r=t.call(this,e.name,e.value)).nodeUniform=e,r}return W(n,[{key:"getValue",value:function(){return this.nodeUniform.value}}]),n}(e0),u0=function(e){Y(n,e);var t=$(n);function n(e){var r;return V(this,n),(r=t.call(this,e.name,e.value)).nodeUniform=e,r}return W(n,[{key:"getValue",value:function(){return this.nodeUniform.value}}]),n}(t0),l0=[.125,.215,.35,.446,.526,.582],c0=20,h0=new mz(-1,1,1,-1,0,1),d0=new uU(90,1),f0=new gF,p0=null,A0=0,v0=0,m0=(1+Math.sqrt(5))/2,g0=1/m0,y0=[new JL(-m0,g0,0),new JL(m0,g0,0),new JL(-g0,0,m0),new JL(g0,0,m0),new JL(0,m0,-g0),new JL(0,m0,g0),new JL(-1,1,-1),new JL(1,1,-1),new JL(-1,1,1),new JL(1,1,1)],b0=[3,1,5,0,4,2],x0=WQ(_j(),xj("faceIndex")).normalize(),_0=mq(x0.x,x0.y.negate(),x0.z),w0=function(){function e(t){V(this,e),this._renderer=t,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._lodMeshes=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._backgroundBox=null}return W(e,[{key:"fromScene",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100;p0=this._renderer.getRenderTarget(),A0=this._renderer.getActiveCubeFace(),v0=this._renderer.getActiveMipmapLevel(),this._setSize(256);var i=this._allocateTargets();return i.depthBuffer=!0,this._sceneToCubeUV(e,n,r,i),t>0&&this._blur(i,0,0,t),this._applyPMREM(i),this._cleanup(i),i}},{key:"fromEquirectangular",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._fromTexture(e,t)}},{key:"fromCubemap",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._fromTexture(e,t)}},{key:"compileCubemapShader",value:function(){var e=ie(se().mark((function e(){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._cubemapMaterial){e.next=4;break}return this._cubemapMaterial=T0(),e.next=4,this._compileMaterial(this._cubemapMaterial);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"compileEquirectangularShader",value:function(){var e=ie(se().mark((function e(){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._equirectMaterial){e.next=4;break}return this._equirectMaterial=E0(),e.next=4,this._compileMaterial(this._equirectMaterial);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"dispose",value:function(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose(),null!==this._backgroundBox&&(this._backgroundBox.geometry.dispose(),this._backgroundBox.material.dispose())}},{key:"_setSize",value:function(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}},{key:"_dispose",value:function(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(var e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}},{key:"_cleanup",value:function(e){this._renderer.setRenderTarget(p0,A0,v0),e.scissorTest=!1,M0(e,0,0,e.width,e.height)}},{key:"_fromTexture",value:function(e,t){e.mapping===HI||e.mapping===VI?this._setSize(0===e.image.length?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),p0=this._renderer.getRenderTarget(),A0=this._renderer.getActiveCubeFace(),v0=this._renderer.getActiveMipmapLevel();var n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}},{key:"_allocateTargets",value:function(){var e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:eD,minFilter:eD,generateMipmaps:!1,type:cD,format:pD,colorSpace:aL},r=S0(e,t,n);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=S0(e,t,n);var i=this._lodMax,a=function(e){for(var t=[],n=[],r=[],i=[],a=e,o=e-4+1+l0.length,s=0;s<o;s++){var u=Math.pow(2,a);n.push(u);var l=1/u;s>e-4?l=l0[s-e+4-1]:0===s&&(l=0),r.push(l);for(var c=1/(u-2),h=-c,d=1+c,f=[h,h,d,h,d,d,h,h,d,d,h,d],p=6,A=6,v=3,m=2,g=1,y=new Float32Array(v*A*p),b=new Float32Array(m*A*p),x=new Float32Array(g*A*p),_=0;_<p;_++){var w=_%3*2/3-1,S=_>2?0:-1,M=[w,S,0,w+2/3,S,0,w+2/3,S+1,0,w,S,0,w+2/3,S+1,0,w,S+1,0],k=b0[_];y.set(M,v*A*k),b.set(f,m*A*k);var T=[k,k,k,k,k,k];x.set(T,g*A*k)}var E=new GF;E.setAttribute("position",new CF(y,v)),E.setAttribute("uv",new CF(b,m)),E.setAttribute("faceIndex",new CF(x,g)),t.push(E),i.push(new $F(E,null)),a>4&&a--}return{lodPlanes:t,sizeLods:n,sigmas:r,lodMeshes:i}}(i);this._sizeLods=a.sizeLods,this._lodPlanes=a.lodPlanes,this._sigmas=a.sigmas,this._lodMeshes=a.lodMeshes,this._blurMaterial=function(e,t,n){var r=AW(new Array(c0).fill(0)),i=Dq(new JL(0,1,0)),a=Dq(0),o=lq(c0),s=Dq(0),u=Dq(1),l=Ej(null),c=Dq(0),h=lq(1/t),d=lq(1/n),f=lq(e),p={n:o,latitudinal:s,weights:r,poleAxis:i,outputDirection:_0,dTheta:a,samples:u,envMap:l,mipInt:c,CUBEUV_TEXEL_WIDTH:h,CUBEUV_TEXEL_HEIGHT:d,CUBEUV_MAX_MIP:f},A=k0("blur");return A.uniforms=p,A.fragmentNode=JQ(b(b({},p),{},{latitudinal:s.equal(1)})),A}(i,e,t)}return r}},{key:"_compileMaterial",value:function(){var e=ie(se().mark((function e(t){var n;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new $F(this._lodPlanes[0],t),e.next=3,this._renderer.compile(n,h0);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_sceneToCubeUV",value:function(e,t,n,r){var i=d0;i.near=t,i.far=n;var a=[-1,1,-1,-1,-1,-1],o=[1,1,1,-1,-1,-1],s=this._renderer,u=s.autoClear;s.getClearColor(f0),s.autoClear=!1;var l=this._backgroundBox;if(null===l){var c=new _F({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1});l=new $F(new tU,c)}var h=!1,d=e.background;d?d.isColor&&(l.material.color.copy(d),e.background=null,h=!0):(l.material.color.copy(f0),h=!0),s.setRenderTarget(r),s.clear(),h&&s.render(l,i);for(var f=0;f<6;f++){var p=f%3;0===p?(i.up.set(0,a[f],0),i.lookAt(o[f],0,0)):1===p?(i.up.set(0,0,a[f]),i.lookAt(0,o[f],0)):(i.up.set(0,a[f],0),i.lookAt(0,0,o[f]));var A=this._cubeSize;M0(r,p*A,f>2?A:0,A,A),s.render(e,i)}s.autoClear=u,e.background=d}},{key:"_textureToCubeUV",value:function(e,t){var n=this._renderer,r=e.mapping===HI||e.mapping===VI;r?null===this._cubemapMaterial&&(this._cubemapMaterial=T0(e)):null===this._equirectMaterial&&(this._equirectMaterial=E0(e));var i=r?this._cubemapMaterial:this._equirectMaterial;i.fragmentNode.value=e;var a=this._lodMeshes[0];a.material=i;var o=this._cubeSize;M0(t,0,0,3*o,2*o),n.setRenderTarget(t),n.render(a,h0)}},{key:"_applyPMREM",value:function(e){var t=this._renderer,n=t.autoClear;t.autoClear=!1;for(var r=this._lodPlanes.length,i=1;i<r;i++){var a=Math.sqrt(this._sigmas[i]*this._sigmas[i]-this._sigmas[i-1]*this._sigmas[i-1]),o=y0[(r-i-1)%y0.length];this._blur(e,i-1,i,a,o)}t.autoClear=n}},{key:"_blur",value:function(e,t,n,r,i){var a=this._pingPongRenderTarget;this._halfBlur(e,a,t,n,r,"latitudinal",i),this._halfBlur(a,e,n,n,r,"longitudinal",i)}},{key:"_halfBlur",value:function(e,t,n,r,i,a,o){var s=this._renderer,u=this._blurMaterial;"latitudinal"!==a&&"longitudinal"!==a&&console.error("blur direction must be either latitudinal or longitudinal!");var l=this._lodMeshes[r];l.material=u;var c=u.uniforms,h=this._sizeLods[n]-1,d=isFinite(i)?Math.PI/(2*h):2*Math.PI/39,f=i/d,p=isFinite(i)?1+Math.floor(3*f):c0;p>c0&&console.warn("sigmaRadians, ".concat(i,", is too large and will clip, as it requested ").concat(p," samples when the maximum is set to ").concat(c0));for(var A=[],v=0,m=0;m<c0;++m){var g=m/f,y=Math.exp(-g*g/2);A.push(y),0===m?v+=y:m<p&&(v+=2*y)}for(var b=0;b<A.length;b++)A[b]=A[b]/v;e.texture.frame=(e.texture.frame||0)+1,c.envMap.value=e.texture,c.samples.value=p,c.weights.array=A,c.latitudinal.value="latitudinal"===a?1:0,o&&(c.poleAxis.value=o);var x=this._lodMax;c.dTheta.value=d,c.mipInt.value=x-n;var _=this._sizeLods[r];M0(t,3*_*(r>x-4?r-x+4:0),4*(this._cubeSize-_),3*_,2*_),s.setRenderTarget(t),s.render(l,h0)}}]),e}();function S0(e,t,n){var r=new WL(e,t,n);return r.texture.mapping=XI,r.texture.name="PMREM.cubeUv",r.texture.isPMREMTexture=!0,r.scissorTest=!0,r}function M0(e,t,n,r,i){e.viewport.set(t,n,r,i),e.scissor.set(t,n,r,i)}function k0(e){var t=new fY;return t.depthTest=!1,t.depthWrite=!1,t.blending=0,t.name="PMREM_".concat(e),t}function T0(e){var t=k0("cubemap");return t.fragmentNode=cW(e,_0),t}function E0(e){var t=k0("equirect");return t.fragmentNode=Ej(e,xY(_0),0),t}var C0=new WeakMap,R0=new Map([[2,"vec2"],[3,"vec3"],[4,"vec4"],[9,"mat3"],[16,"mat4"]]),B0=new Map([[Int8Array,"int"],[Int16Array,"int"],[Int32Array,"int"],[Uint8Array,"uint"],[Uint16Array,"uint"],[Uint32Array,"uint"],[Float32Array,"float"]]),P0=function(e){return/e/g.test(e)?String(e).replace(/\+/g,""):(e=Number(e))+(e%1?"":".0")},N0=function(){function e(t,n,r){V(this,e),this.object=t,this.material=t&&t.material||null,this.geometry=t&&t.geometry||null,this.renderer=n,this.parser=r,this.scene=null,this.camera=null,this.nodes=[],this.sequentialNodes=[],this.updateNodes=[],this.updateBeforeNodes=[],this.updateAfterNodes=[],this.hashNodes={},this.monitor=null,this.lightsNode=null,this.environmentNode=null,this.fogNode=null,this.clippingContext=null,this.vertexShader=null,this.fragmentShader=null,this.computeShader=null,this.flowNodes={vertex:[],fragment:[],compute:[]},this.flowCode={vertex:"",fragment:"",compute:""},this.uniforms={vertex:[],fragment:[],compute:[],index:0},this.structs={vertex:[],fragment:[],compute:[],index:0},this.bindings={vertex:{},fragment:{},compute:{}},this.bindingsIndexes={},this.bindGroups=null,this.attributes=[],this.bufferAttributes=[],this.varyings=[],this.codes={},this.vars={},this.flow={code:""},this.chaining=[],this.stack=fK(),this.stacks=[],this.tab="\t",this.currentFunctionNode=null,this.context={material:this.material},this.cache=new X$,this.globalCache=this.cache,this.flowsData=new WeakMap,this.shaderStage=null,this.buildStage=null,this.useComparisonMethod=!1}return W(e,[{key:"getBindGroupsCache",value:function(){var e=C0.get(this.renderer);return void 0===e&&(e=new EJ,C0.set(this.renderer,e)),e}},{key:"createRenderTarget",value:function(e,t,n){return new WL(e,t,n)}},{key:"createCubeRenderTarget",value:function(e,t){return new _Y(e,t)}},{key:"createPMREMGenerator",value:function(){return new w0(this.renderer)}},{key:"includes",value:function(e){return this.nodes.includes(e)}},{key:"_getBindGroup",value:function(e,t){var n,r,i=this.getBindGroupsCache(),a=[],o=!0,s=ee(t);try{for(s.s();!(n=s.n()).done;){var u=n.value;a.push(u),o=o&&!0!==u.groupNode.shared}}catch(l){s.e(l)}finally{s.f()}return o?void 0===(r=i.get(a))&&(r=new U$(e,a,this.bindingsIndexes[e].group,a),i.set(a,r)):r=new U$(e,a,this.bindingsIndexes[e].group,a),r}},{key:"getBindGroupArray",value:function(e,t){var n=this.bindings[t],r=n[e];return void 0===r&&(void 0===this.bindingsIndexes[e]&&(this.bindingsIndexes[e]={binding:0,group:Object.keys(this.bindingsIndexes).length}),n[e]=r=[]),r}},{key:"getBindings",value:function(){var e=this.bindGroups;if(null===e){var t,n={},r=this.bindings,i=ee(Kz);try{for(i.s();!(t=i.n()).done;){var a=t.value;for(var o in r[a]){var s=r[a][o],u=n[o]||(n[o]=[]);u.push.apply(u,q(s))}}}catch(d){i.e(d)}finally{i.f()}for(var l in e=[],n){var c=n[l],h=this._getBindGroup(l,c);e.push(h)}this.bindGroups=e}return e}},{key:"sortBindingGroups",value:function(){var e=this.getBindings();e.sort((function(e,t){return e.bindings[0].groupNode.order-t.bindings[0].groupNode.order}));for(var t=0;t<e.length;t++){var n=e[t];this.bindingsIndexes[n.name].group=t,n.index=t}}},{key:"setHashNode",value:function(e,t){this.hashNodes[t]=e}},{key:"addNode",value:function(e){!1===this.nodes.includes(e)&&(this.nodes.push(e),this.setHashNode(e,e.getHash(this)))}},{key:"addSequentialNode",value:function(e){!1===this.sequentialNodes.includes(e)&&this.sequentialNodes.push(e)}},{key:"buildUpdateNodes",value:function(){var e,t=ee(this.nodes);try{for(t.s();!(e=t.n()).done;){var n=e.value;n.getUpdateType()!==Wz&&this.updateNodes.push(n.getSelf())}}catch(u){t.e(u)}finally{t.f()}var r,i=ee(this.sequentialNodes);try{for(i.s();!(r=i.n()).done;){var a=r.value,o=a.getUpdateBeforeType(),s=a.getUpdateAfterType();o!==Wz&&this.updateBeforeNodes.push(a.getSelf()),s!==Wz&&this.updateAfterNodes.push(a.getSelf())}}catch(u){i.e(u)}finally{i.f()}}},{key:"currentNode",get:function(){return this.chaining[this.chaining.length-1]}},{key:"isFilteredTexture",value:function(e){return e.magFilter===eD||e.magFilter===tD||e.magFilter===$I||e.magFilter===nD||e.minFilter===eD||e.minFilter===tD||e.minFilter===$I||e.minFilter===nD}},{key:"addChain",value:function(e){this.chaining.push(e)}},{key:"removeChain",value:function(e){if(this.chaining.pop()!==e)throw new Error("NodeBuilder: Invalid node chaining!")}},{key:"getMethod",value:function(e){return e}},{key:"getNodeFromHash",value:function(e){return this.hashNodes[e]}},{key:"addFlow",value:function(e,t){return this.flowNodes[e].push(t),t}},{key:"setContext",value:function(e){this.context=e}},{key:"getContext",value:function(){return this.context}},{key:"getSharedContext",value:function(){return b({},this.context),this.context}},{key:"setCache",value:function(e){this.cache=e}},{key:"getCache",value:function(){return this.cache}},{key:"getCacheFromNode",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.getDataFromNode(e);return void 0===n.cache&&(n.cache=new X$(t?this.getCache():null)),n.cache}},{key:"isAvailable",value:function(){return!1}},{key:"getVertexIndex",value:function(){console.warn("Abstract function.")}},{key:"getInstanceIndex",value:function(){console.warn("Abstract function.")}},{key:"getDrawIndex",value:function(){console.warn("Abstract function.")}},{key:"getFrontFacing",value:function(){console.warn("Abstract function.")}},{key:"getFragCoord",value:function(){console.warn("Abstract function.")}},{key:"isFlipY",value:function(){return!1}},{key:"increaseUsage",value:function(e){var t=this.getDataFromNode(e);return t.usageCount=void 0===t.usageCount?1:t.usageCount+1,t.usageCount}},{key:"generateTexture",value:function(){console.warn("Abstract function.")}},{key:"generateTextureLod",value:function(){console.warn("Abstract function.")}},{key:"generateConst",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===n&&("float"===e||"int"===e||"uint"===e?n=0:"bool"===e?n=!1:"color"===e?n=new gF:"vec2"===e?n=new ML:"vec3"===e?n=new JL:"vec4"===e&&(n=new jL)),"float"===e)return P0(n);if("int"===e)return"".concat(Math.round(n));if("uint"===e)return n>=0?"".concat(Math.round(n),"u"):"0u";if("bool"===e)return n?"true":"false";if("color"===e)return"".concat(this.getType("vec3"),"( ").concat(P0(n.r),", ").concat(P0(n.g),", ").concat(P0(n.b)," )");var r=this.getTypeLength(e),i=this.getComponentType(e),a=function(e){return t.generateConst(i,e)};if(2===r)return"".concat(this.getType(e),"( ").concat(a(n.x),", ").concat(a(n.y)," )");if(3===r)return"".concat(this.getType(e),"( ").concat(a(n.x),", ").concat(a(n.y),", ").concat(a(n.z)," )");if(4===r)return"".concat(this.getType(e),"( ").concat(a(n.x),", ").concat(a(n.y),", ").concat(a(n.z),", ").concat(a(n.w)," )");if(r>4&&n&&(n.isMatrix3||n.isMatrix4))return"".concat(this.getType(e),"( ").concat(n.elements.map(a).join(", ")," )");if(r>4)return"".concat(this.getType(e),"()");throw new Error("NodeBuilder: Type '".concat(e,"' not found in generate constant attempt."))}},{key:"getType",value:function(e){return"color"===e?"vec3":e}},{key:"hasGeometryAttribute",value:function(e){return this.geometry&&void 0!==this.geometry.getAttribute(e)}},{key:"getAttribute",value:function(e,t){var n,r=this.attributes,i=ee(r);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a.name===e)return a}}catch(s){i.e(s)}finally{i.f()}var o=new G$(e,t);return r.push(o),o}},{key:"getPropertyName",value:function(e){return e.name}},{key:"isVector",value:function(e){return/vec\d/.test(e)}},{key:"isMatrix",value:function(e){return/mat\d/.test(e)}},{key:"isReference",value:function(e){return"void"===e||"property"===e||"sampler"===e||"texture"===e||"cubeTexture"===e||"storageTexture"===e||"depthTexture"===e||"texture3D"===e}},{key:"needsToWorkingColorSpace",value:function(){return!1}},{key:"getComponentTypeFromTexture",value:function(e){var t=e.type;if(e.isDataTexture){if(t===sD)return"int";if(t===uD)return"uint"}return"float"}},{key:"getElementType",value:function(e){return"mat2"===e?"vec2":"mat3"===e?"vec3":"mat4"===e?"vec4":this.getComponentType(e)}},{key:"getComponentType",value:function(e){if("float"===(e=this.getVectorType(e))||"bool"===e||"int"===e||"uint"===e)return e;var t=/(b|i|u|)(vec|mat)([2-4])/.exec(e);return null===t?null:"b"===t[1]?"bool":"i"===t[1]?"int":"u"===t[1]?"uint":"float"}},{key:"getVectorType",value:function(e){return"color"===e?"vec3":"texture"===e||"cubeTexture"===e||"storageTexture"===e||"texture3D"===e?"vec4":e}},{key:"getTypeFromLength",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float";if(1===e)return t;var n=R0.get(e),r="float"===t?"":t[0];return r+n}},{key:"getTypeFromArray",value:function(e){return B0.get(e.constructor)}},{key:"getTypeFromAttribute",value:function(e){var t=e;e.isInterleavedBufferAttribute&&(t=e.data);var n,r=t.array,i=e.itemSize,a=e.normalized;return e instanceof PF||!0===a||(n=this.getTypeFromArray(r)),this.getTypeFromLength(i,n)}},{key:"getTypeLength",value:function(e){var t=this.getVectorType(e),n=/vec([2-4])/.exec(t);return null!==n?Number(n[1]):"float"===t||"bool"===t||"int"===t||"uint"===t?1:!0===/mat2/.test(e)?4:!0===/mat3/.test(e)?9:!0===/mat4/.test(e)?16:0}},{key:"getVectorFromMatrix",value:function(e){return e.replace("mat","vec")}},{key:"changeComponentType",value:function(e,t){return this.getTypeFromLength(this.getTypeLength(e),t)}},{key:"getIntegerType",value:function(e){var t=this.getComponentType(e);return"int"===t||"uint"===t?e:this.changeComponentType(e,"int")}},{key:"addStack",value:function(){return this.stack=fK(this.stack),this.stacks.push(oq()||this.stack),aq(this.stack),this.stack}},{key:"removeStack",value:function(){var e=this.stack;return this.stack=e.parent,aq(this.stacks.pop()),e}},{key:"getDataFromNode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.shaderStage,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=(n=null===n?e.isGlobal(this)?this.globalCache:this.cache:n).getData(e);return void 0===r&&(r={},n.setData(e,r)),void 0===r[t]&&(r[t]={}),r[t]}},{key:"getNodeProperties",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"any",n=this.getDataFromNode(e,t);return n.properties||(n.properties={outputNode:null})}},{key:"getBufferAttributeFromNode",value:function(e,t){var n=this.getDataFromNode(e),r=n.bufferAttribute;if(void 0===r){var i=this.uniforms.index++;r=new G$("nodeAttribute"+i,t,e),this.bufferAttributes.push(r),n.bufferAttribute=r}return r}},{key:"getStructTypeFromNode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.shaderStage,n=this.getDataFromNode(e,t);if(void 0===n.structType){var r=this.structs.index++;e.name="StructType".concat(r),this.structs[t].push(e),n.structType=e}return e}},{key:"getUniformFromNode",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.shaderStage,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=this.getDataFromNode(e,n,this.globalCache),a=i.uniform;if(void 0===a){var o=this.uniforms.index++;a=new q$(r||"nodeUniform"+o,t,e),this.uniforms[n].push(a),i.uniform=a}return a}},{key:"getVarFromNode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.getNodeType(this),r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.shaderStage,i=this.getDataFromNode(e,r),a=i.variable;if(void 0===a){var o=this.vars[r]||(this.vars[r]=[]);null===t&&(t="nodeVar"+o.length),a=new H$(t,n),o.push(a),i.variable=a}return a}},{key:"getVaryingFromNode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.getNodeType(this),r=this.getDataFromNode(e,"any"),i=r.varying;if(void 0===i){var a=this.varyings,o=a.length;null===t&&(t="nodeVarying"+o),i=new V$(t,n),a.push(i),r.varying=i}return i}},{key:"getCodeFromNode",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.shaderStage,r=this.getDataFromNode(e),i=r.code;if(void 0===i){var a=this.codes[n]||(this.codes[n]=[]),o=a.length;i=new j$("nodeCode"+o,t),a.push(i),r.code=i}return i}},{key:"addFlowCodeHierarchy",value:function(e,t){for(var n=this.getDataFromNode(e),r=n.flowCodes,i=n.flowCodeBlock,a=!0,o=t;o;){if(!0===i.get(o)){a=!1;break}o=this.getDataFromNode(o).parentNodeBlock}if(a){var s,u=ee(r);try{for(u.s();!(s=u.n()).done;){var l=s.value;this.addLineFlowCode(l)}}catch(c){u.e(c)}finally{u.f()}}}},{key:"addLineFlowCodeBlock",value:function(e,t,n){var r=this.getDataFromNode(e),i=r.flowCodes||(r.flowCodes=[]),a=r.flowCodeBlock||(r.flowCodeBlock=new WeakMap);i.push(t),a.set(n,!0)}},{key:"addLineFlowCode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return""===e||(null!==t&&this.context.nodeBlock&&this.addLineFlowCodeBlock(t,e,this.context.nodeBlock),e=this.tab+e,/;\s*$/.test(e)||(e+=";\n"),this.flow.code+=e),this}},{key:"addFlowCode",value:function(e){return this.flow.code+=e,this}},{key:"addFlowTab",value:function(){return this.tab+="\t",this}},{key:"removeFlowTab",value:function(){return this.tab=this.tab.slice(0,-1),this}},{key:"getFlowData",value:function(e){return this.flowsData.get(e)}},{key:"flowNode",value:function(e){var t=e.getNodeType(this),n=this.flowChildNode(e,t);return this.flowsData.set(e,n),n}},{key:"buildFunctionNode",value:function(e){var t=new s$,n=this.currentFunctionNode;return this.currentFunctionNode=t,t.code=this.buildFunctionCode(e),this.currentFunctionNode=n,t}},{key:"flowShaderNode",value:function(e){var t,n=e.layout,r=g({},Symbol.iterator,(function(){var e=0,t=Object.values(this);return{next:function(){return{value:t[e],done:e++>=t.length}}}})),i=ee(n.inputs);try{for(i.s();!(t=i.n()).done;){var a=t.value;r[a.name]=new hK(a.type,a.name)}}catch(u){i.e(u)}finally{i.f()}e.layout=null;var o=e.call(r),s=this.flowStagesNode(o,n.type);return e.layout=n,s}},{key:"flowStagesNode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this.flow,r=this.vars,i=this.cache,a=this.buildStage,o=this.stack,s={code:""};this.flow=s,this.vars={},this.cache=new X$,this.stack=fK();for(var u=0,l=Jz;u<l.length;u++){var c=l[u];this.setBuildStage(c),s.result=e.build(this,t)}return s.vars=this.getVars(this.shaderStage),this.flow=n,this.vars=r,this.cache=i,this.stack=o,this.setBuildStage(a),s}},{key:"getFunctionOperator",value:function(){return null}},{key:"flowChildNode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this.flow,r={code:""};return this.flow=r,r.result=e.build(this,t),this.flow=n,r}},{key:"flowNodeFromShaderStage",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=this.shaderStage;this.setShaderStage(e);var a=this.flowChildNode(t,n);return null!==r&&(a.code+="".concat(this.tab+r," = ").concat(a.result,";\n")),this.flowCode[e]=this.flowCode[e]+a.code,this.setShaderStage(i),a}},{key:"getAttributesArray",value:function(){return this.attributes.concat(this.bufferAttributes)}},{key:"getAttributes",value:function(){console.warn("Abstract function.")}},{key:"getVaryings",value:function(){console.warn("Abstract function.")}},{key:"getVar",value:function(e,t){return"".concat(this.getType(e)," ").concat(t)}},{key:"getVars",value:function(e){var t="",n=this.vars[e];if(void 0!==n){var r,i=ee(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;t+="".concat(this.getVar(a.type,a.name),"; ")}}catch(o){i.e(o)}finally{i.f()}}return t}},{key:"getUniforms",value:function(){console.warn("Abstract function.")}},{key:"getCodes",value:function(e){var t=this.codes[e],n="";if(void 0!==t){var r,i=ee(t);try{for(i.s();!(r=i.n()).done;){n+=r.value.code+"\n"}}catch(a){i.e(a)}finally{i.f()}}return n}},{key:"getHash",value:function(){return this.vertexShader+this.fragmentShader+this.computeShader}},{key:"setShaderStage",value:function(e){this.shaderStage=e}},{key:"getShaderStage",value:function(){return this.shaderStage}},{key:"setBuildStage",value:function(e){this.buildStage=e}},{key:"getBuildStage",value:function(){return this.buildStage}},{key:"buildCode",value:function(){console.warn("Abstract function.")}},{key:"build",value:function(){var e=this.object,t=this.material,n=this.renderer;if(null!==t){var r=n.library.fromMaterial(t);null===r&&(console.error('NodeMaterial: Material "'.concat(t.type,'" is not compatible.')),r=new fY),r.build(this)}else this.addFlow("compute",e);for(var i=0,a=Jz;i<a.length;i++){var o=a[i];this.setBuildStage(o),this.context.vertex&&this.context.vertex.isNode&&this.flowNodeFromShaderStage("vertex",this.context.vertex);var s,u=ee(Kz);try{for(u.s();!(s=u.n()).done;){var l=s.value;this.setShaderStage(l);var c,h=ee(this.flowNodes[l]);try{for(h.s();!(c=h.n()).done;){var d=c.value;"generate"===o?this.flowNode(d):d.build(this)}}catch(f){h.e(f)}finally{h.f()}}}catch(f){u.e(f)}finally{u.f()}}return this.setBuildStage(null),this.setShaderStage(null),this.buildCode(),this.buildUpdateNodes(),this}},{key:"getNodeUniform",value:function(e,t){if("float"===t||"int"===t||"uint"===t)return new n0(e);if("vec2"===t||"ivec2"===t||"uvec2"===t)return new r0(e);if("vec3"===t||"ivec3"===t||"uvec3"===t)return new i0(e);if("vec4"===t||"ivec4"===t||"uvec4"===t)return new a0(e);if("color"===t)return new o0(e);if("mat3"===t)return new s0(e);if("mat4"===t)return new u0(e);throw new Error('Uniform "'.concat(t,'" not declared.'))}},{key:"createNodeMaterial",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"NodeMaterial";throw new Error("THREE.NodeBuilder: createNodeMaterial() was deprecated. Use new ".concat(e,"() instead."))}},{key:"format",value:function(e,t,n){if((t=this.getVectorType(t))===(n=this.getVectorType(n))||null===n||this.isReference(n))return e;var r=this.getTypeLength(t),i=this.getTypeLength(n);return 16===r&&9===i?"".concat(this.getType(n),"(").concat(e,"[0].xyz, ").concat(e,"[1].xyz, ").concat(e,"[2].xyz)"):9===r&&4===i?"".concat(this.getType(n),"(").concat(e,"[0].xy, ").concat(e,"[1].xy)"):r>4||i>4||0===i?e:r===i?"".concat(this.getType(n),"( ").concat(e," )"):r>i?this.format("".concat(e,".").concat("xyz".slice(0,i)),this.getTypeFromLength(i,this.getComponentType(t)),n):4===i&&r>1?"".concat(this.getType(n),"( ").concat(this.format(e,t,"vec3"),", 1.0 )"):2===r?"".concat(this.getType(n),"( ").concat(this.format(e,t,"vec2"),", 0.0 )"):(1===r&&i>1&&t!==this.getComponentType(n)&&(e="".concat(this.getType(this.getComponentType(n)),"( ").concat(e," )")),"".concat(this.getType(n),"( ").concat(e," )"))}},{key:"getSignature",value:function(){return"// Three.js r".concat(FI," - Node System\n")}}]),e}(),I0=function(){function e(){V(this,e),this.time=0,this.deltaTime=0,this.frameId=0,this.renderId=0,this.startTime=null,this.updateMap=new WeakMap,this.updateBeforeMap=new WeakMap,this.updateAfterMap=new WeakMap,this.renderer=null,this.material=null,this.camera=null,this.object=null,this.scene=null}return W(e,[{key:"_getMaps",value:function(e,t){var n=e.get(t);return void 0===n&&(n={renderMap:new WeakMap,frameMap:new WeakMap},e.set(t,n)),n}},{key:"updateBeforeNode",value:function(e){var t=e.getUpdateBeforeType(),n=e.updateReference(this);if(t===Xz){var r=this._getMaps(this.updateBeforeMap,n).frameMap;r.get(n)!==this.frameId&&!1!==e.updateBefore(this)&&r.set(n,this.frameId)}else if(t===Yz){var i=this._getMaps(this.updateBeforeMap,n).renderMap;i.get(n)!==this.renderId&&!1!==e.updateBefore(this)&&i.set(n,this.renderId)}else t===Qz&&e.updateBefore(this)}},{key:"updateAfterNode",value:function(e){var t=e.getUpdateAfterType(),n=e.updateReference(this);if(t===Xz){var r=this._getMaps(this.updateAfterMap,n).frameMap;r.get(n)!==this.frameId&&!1!==e.updateAfter(this)&&r.set(n,this.frameId)}else if(t===Yz){var i=this._getMaps(this.updateAfterMap,n).renderMap;i.get(n)!==this.renderId&&!1!==e.updateAfter(this)&&i.set(n,this.renderId)}else t===Qz&&e.updateAfter(this)}},{key:"updateNode",value:function(e){var t=e.getUpdateType(),n=e.updateReference(this);if(t===Xz){var r=this._getMaps(this.updateMap,n).frameMap;r.get(n)!==this.frameId&&!1!==e.update(this)&&r.set(n,this.frameId)}else if(t===Yz){var i=this._getMaps(this.updateMap,n).renderMap;i.get(n)!==this.renderId&&!1!==e.update(this)&&i.set(n,this.renderId)}else t===Qz&&e.update(this)}},{key:"update",value:function(){this.frameId++,void 0===this.lastTime&&(this.lastTime=performance.now()),this.deltaTime=(performance.now()-this.lastTime)/1e3,this.lastTime=performance.now(),this.time+=this.deltaTime}}]),e}(),D0=W((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];V(this,e),this.type=t,this.name=n,this.count=r,this.qualifier=i,this.isConst=a}));D0.isNodeFunctionInput=!0;var L0=function(e){Y(n,e);var t=$(n);function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return V(this,n),t.call(this,e)}return W(n,[{key:"setup",value:function(e){oe(Q(n.prototype),"setup",this).call(this,e);var t=e.context.lightingModel,r=this.colorNode,i=m$(this.light),a=e.context.reflectedLight;t.direct({lightDirection:i,lightColor:r,reflectedLight:a},e.stack,e)}}],[{key:"type",get:function(){return"DirectionalLightNode"}}]),n}(B$),O0=new kO,F0=new kO,U0=null,z0=function(e){Y(n,e);var t=$(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return V(this,n),(e=t.call(this,r)).halfHeight=Dq(new JL).setGroup(Pq),e.halfWidth=Dq(new JL).setGroup(Pq),e.updateType=Yz,e}return W(n,[{key:"update",value:function(e){oe(Q(n.prototype),"update",this).call(this,e);var t=this.light,r=e.camera.matrixWorldInverse;F0.identity(),O0.copy(t.matrixWorld),O0.premultiply(r),F0.extractRotation(O0),this.halfWidth.value.set(.5*t.width,0,0),this.halfHeight.value.set(0,.5*t.height,0),this.halfWidth.value.applyMatrix4(F0),this.halfHeight.value.applyMatrix4(F0)}},{key:"setup",value:function(e){var t,r;oe(Q(n.prototype),"setup",this).call(this,e),e.isAvailable("float32Filterable")?(t=Ej(U0.LTC_FLOAT_1),r=Ej(U0.LTC_FLOAT_2)):(t=Ej(U0.LTC_HALF_1),r=Ej(U0.LTC_HALF_2));var i=this.colorNode,a=this.light,o=e.context.lightingModel,s=v$(a),u=e.context.reflectedLight;o.directRectArea({lightColor:i,lightPosition:s,halfWidth:this.halfWidth,halfHeight:this.halfHeight,reflectedLight:u,ltc_1:t,ltc_2:r},e.stack,e)}}],[{key:"type",get:function(){return"RectAreaLightNode"}},{key:"setLTC",value:function(e){U0=e}}]),n}(B$),G0=function(e){Y(n,e);var t=$(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return V(this,n),(e=t.call(this,r)).coneCosNode=Dq(0).setGroup(Pq),e.penumbraCosNode=Dq(0).setGroup(Pq),e.cutoffDistanceNode=Dq(0).setGroup(Pq),e.decayExponentNode=Dq(0).setGroup(Pq),e}return W(n,[{key:"update",value:function(e){oe(Q(n.prototype),"update",this).call(this,e);var t=this.light;this.coneCosNode.value=Math.cos(t.angle),this.penumbraCosNode.value=Math.cos(t.angle*(1-t.penumbra)),this.cutoffDistanceNode.value=t.distance,this.decayExponentNode.value=t.decay}},{key:"getSpotAttenuation",value:function(e){var t=this.coneCosNode,n=this.penumbraCosNode;return OV(t,n,e)}},{key:"setup",value:function(e){oe(Q(n.prototype),"setup",this).call(this,e);var t=e.context.lightingModel,r=this.colorNode,i=this.cutoffDistanceNode,a=this.decayExponentNode,o=this.light,s=v$(o).sub(jj),u=s.normalize(),l=u.dot(m$(o)),c=this.getSpotAttenuation(l),h=s.length(),d=P$({lightDistance:h,cutoffDistance:i,decayExponent:a}),f=r.mul(c).mul(d),p=e.context.reflectedLight;t.direct({lightDirection:u,lightColor:f,reflectedLight:p},e.stack,e)}}],[{key:"type",get:function(){return"SpotLightNode"}}]),n}(B$),q0=function(e){Y(n,e);var t=$(n);function n(){return V(this,n),t.apply(this,arguments)}return W(n,[{key:"getSpotAttenuation",value:function(e){var t=this.light.iesMap,r=null;if(t&&!0===t.isTexture){var i=e.acos().mul(1/Math.PI);r=Ej(t,fq(i,0),0).r}else r=oe(Q(n.prototype),"getSpotAttenuation",this).call(this,e);return r}}],[{key:"type",get:function(){return"IESSpotLightNode"}}]),n}(G0),H0=function(e){Y(n,e);var t=$(n);function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return V(this,n),t.call(this,e)}return W(n,[{key:"setup",value:function(e){e.context.irradiance.addAssign(this.colorNode)}}],[{key:"type",get:function(){return"AmbientLightNode"}}]),n}(B$),V0=function(e){Y(n,e);var t=$(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return V(this,n),(e=t.call(this,r)).lightPositionNode=A$(r),e.lightDirectionNode=e.lightPositionNode.normalize(),e.groundColorNode=Dq(new gF).setGroup(Pq),e}return W(n,[{key:"update",value:function(e){var t=this.light;oe(Q(n.prototype),"update",this).call(this,e),this.lightPositionNode.object3d=t,this.groundColorNode.value.copy(t.groundColor).multiplyScalar(t.intensity)}},{key:"setup",value:function(e){var t=this.colorNode,n=this.groundColorNode,r=this.lightDirectionNode,i=Kj.dot(r).mul(.5).add(.5),a=IV(n,t,i);e.context.irradiance.addAssign(a)}}],[{key:"type",get:function(){return"HemisphereLightNode"}}]),n}(B$),j0=function(e){Y(n,e);var t=$(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;V(this,n),e=t.call(this,r);for(var i=[],a=0;a<9;a++)i.push(new JL);return e.lightProbe=AW(i),e}return W(n,[{key:"update",value:function(e){var t=this.light;oe(Q(n.prototype),"update",this).call(this,e);for(var r=0;r<9;r++)this.lightProbe.array[r].copy(t.sh.coefficients[r]).multiplyScalar(t.intensity)}},{key:"setup",value:function(e){var t=D$(Zj,this.lightProbe);e.context.irradiance.addAssign(t)}}],[{key:"type",get:function(){return"LightProbeNode"}}]),n}(B$),W0=function(){function e(){V(this,e)}return W(e,[{key:"parseFunction",value:function(){console.warn("Abstract function.")}}]),e}(),X0=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";V(this,e),this.type=t,this.inputs=n,this.name=r,this.precision=i}return W(e,[{key:"getCode",value:function(){console.warn("Abstract function.")}}]),e}();X0.isNodeFunction=!0;var Y0=/^\s*(highp|mediump|lowp)?\s*([a-z_0-9]+)\s*([a-z_0-9]+)?\s*\(([\s\S]*?)\)/i,Q0=/[a-z_0-9]+/gi,J0="#pragma main",K0=function(e){Y(n,e);var t=$(n);function n(e){var r;V(this,n);var i=function(e){var t=(e=e.trim()).indexOf(J0),n=-1!==t?e.slice(t+J0.length):e,r=n.match(Y0);if(null!==r&&5===r.length){for(var i=r[4],a=[],o=null;null!==(o=Q0.exec(i));)a.push(o);for(var s=[],u=0;u<a.length;){var l="const"===a[u][0];!0===l&&u++;var c=a[u][0];"in"===c||"out"===c||"inout"===c?u++:c="";var h=a[u++][0],d=Number.parseInt(a[u][0]);!1===Number.isNaN(d)?u++:d=null;var f=a[u++][0];s.push(new D0(h,f,d,c,l))}var p=n.substring(r[0].length),A=void 0!==r[3]?r[3]:"";return{type:r[2],inputs:s,name:A,precision:void 0!==r[1]?r[1]:"",inputsCode:i,blockCode:p,headerCode:-1!==t?e.slice(0,t):""}}throw new Error("FunctionNode: Function is not a GLSL code.")}(e),a=i.type,o=i.inputs,s=i.name,u=i.precision,l=i.inputsCode,c=i.blockCode,h=i.headerCode;return(r=t.call(this,a,o,s,u)).inputsCode=l,r.blockCode=c,r.headerCode=h,r}return W(n,[{key:"getCode",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.name,n=this.blockCode;if(""!==n){var r=this.type,i=this.inputsCode,a=this.headerCode,o=this.precision,s="".concat(r," ").concat(t," ( ").concat(i.trim()," )");""!==o&&(s="".concat(o," ").concat(s)),e=a+s+n}else e="";return e}}]),n}(X0),Z0=function(e){Y(n,e);var t=$(n);function n(){return V(this,n),t.apply(this,arguments)}return W(n,[{key:"parseFunction",value:function(e){return new K0(e)}}]),n}(W0),$0=new WeakMap,e1=function(e){Y(n,e);var t=$(n);function n(e,r){var i;return V(this,n),(i=t.call(this)).renderer=e,i.backend=r,i.nodeFrame=new I0,i.nodeBuilderCache=new Map,i.callHashCache=new EJ,i.groupsData=new EJ,i}return W(n,[{key:"updateGroup",value:function(e){var t=e.groupNode,n=t.name;if(n===Nq.name)return!0;if(n===Pq.name){var r=this.get(e),i=this.nodeFrame.renderId;return r.renderId!==i&&(r.renderId=i,!0)}if(n===Bq.name){var a=this.get(e),o=this.nodeFrame.frameId;return a.frameId!==o&&(a.frameId=o,!0)}var s=[t,e],u=this.groupsData.get(s);return void 0===u&&this.groupsData.set(s,u={}),u.version!==t.version&&(u.version=t.version,!0)}},{key:"getForRenderCacheKey",value:function(e){return e.initialCacheKey}},{key:"getForRender",value:function(e){var t=this.get(e),n=t.nodeBuilderState;if(void 0===n){var r=this.nodeBuilderCache,i=this.getForRenderCacheKey(e);if(void 0===(n=r.get(i))){var a=this.backend.createNodeBuilder(e.object,this.renderer);a.scene=e.scene,a.material=e.material,a.camera=e.camera,a.context.material=e.material,a.lightsNode=e.lightsNode,a.environmentNode=this.getEnvironmentNode(e.scene),a.fogNode=this.getFogNode(e.scene),a.clippingContext=e.clippingContext,a.build(),n=this._createNodeBuilderState(a),r.set(i,n)}n.usedTimes++,t.nodeBuilderState=n}return n}},{key:"delete",value:function(e){if(e.isRenderObject){var t=this.get(e).nodeBuilderState;t.usedTimes--,0===t.usedTimes&&this.nodeBuilderCache.delete(this.getForRenderCacheKey(e))}return oe(Q(n.prototype),"delete",this).call(this,e)}},{key:"getForCompute",value:function(e){var t=this.get(e),n=t.nodeBuilderState;if(void 0===n){var r=this.backend.createNodeBuilder(e,this.renderer);r.build(),n=this._createNodeBuilderState(r),t.nodeBuilderState=n}return n}},{key:"_createNodeBuilderState",value:function(e){return new z$(e.vertexShader,e.fragmentShader,e.computeShader,e.getAttributesArray(),e.getBindings(),e.updateNodes,e.updateBeforeNodes,e.updateAfterNodes,e.monitor,e.transforms)}},{key:"getEnvironmentNode",value:function(e){return e.environmentNode||this.get(e).environmentNode||null}},{key:"getBackgroundNode",value:function(e){return e.backgroundNode||this.get(e).backgroundNode||null}},{key:"getFogNode",value:function(e){return e.fogNode||this.get(e).fogNode||null}},{key:"getCacheKey",value:function(e,t){var n=[e,t],r=this.renderer.info.calls,i=this.callHashCache.get(n);if(void 0===i||i.callId!==r){var a=this.getEnvironmentNode(e),o=this.getFogNode(e),s=[];t&&s.push(t.getCacheKey(!0)),a&&s.push(a.getCacheKey()),o&&s.push(o.getCacheKey()),s.push(this.renderer.shadowMap.enabled?1:0),i={callId:r,cacheKey:Oz(s)},this.callHashCache.set(n,i)}return i.cacheKey}},{key:"updateScene",value:function(e){this.updateEnvironment(e),this.updateFog(e),this.updateBackground(e)}},{key:"isToneMappingState",get:function(){return!this.renderer.getRenderTarget()}},{key:"updateBackground",value:function(e){var t=this.get(e),n=e.background;if(n){var r=0===e.backgroundBlurriness&&t.backgroundBlurriness>0||e.backgroundBlurriness>0&&0===t.backgroundBlurriness;if(t.background!==n||r){var i,a=null;if(!0===n.isCubeTexture||n.mapping===jI||n.mapping===WI||n.mapping===XI)if(e.backgroundBlurriness>0||n.mapping===XI)a=tJ(n);else i=!0===n.isCubeTexture?cW(n):Ej(n),a=kY(i);else!0===n.isTexture?a=Ej(n,jX.flipY()).setUpdateMatrix(!0):!0!==n.isColor&&console.error("WebGPUNodes: Unsupported background configuration.",n);t.backgroundNode=a,t.background=n,t.backgroundBlurriness=e.backgroundBlurriness}}else t.backgroundNode&&(delete t.backgroundNode,delete t.background)}},{key:"updateFog",value:function(e){var t=this.get(e),n=e.fog;if(n){if(t.fog!==n){var r=null;if(n.isFogExp2){var i=gW("color","color",n).setGroup(Pq),a=gW("density","float",n).setGroup(Pq);r=h$(i,a)}else if(n.isFog){var o=gW("color","color",n).setGroup(Pq),s=gW("near","float",n).setGroup(Pq),u=gW("far","float",n).setGroup(Pq);r=c$(o,s,u)}else console.error("WebGPUNodes: Unsupported fog configuration.",n);t.fogNode=r,t.fog=n}}else delete t.fogNode,delete t.fog}},{key:"updateEnvironment",value:function(e){var t=this.get(e),n=e.environment;if(n){if(t.environment!==n){var r=null;!0===n.isCubeTexture?r=cW(n):!0===n.isTexture?r=Ej(n):console.error("Nodes: Unsupported environment configuration.",n),t.environmentNode=r,t.environment=n}}else t.environmentNode&&(delete t.environmentNode,delete t.environment)}},{key:"getNodeFrame",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.renderer,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=this.nodeFrame;return a.renderer=e,a.scene=t,a.object=n,a.camera=r,a.material=i,a}},{key:"getNodeFrameForRender",value:function(e){return this.getNodeFrame(e.renderer,e.scene,e.object,e.camera,e.material)}},{key:"getOutputCacheKey",value:function(){var e=this.renderer;return e.toneMapping+","+e.currentColorSpace}},{key:"hasOutputChange",value:function(e){return $0.get(e)!==this.getOutputCacheKey()}},{key:"getOutputNode",value:function(e){var t=this.renderer,n=this.getOutputCacheKey(),r=Ej(e,jX).renderOutput(t.toneMapping,t.currentColorSpace);return $0.set(e,n),r}},{key:"updateBefore",value:function(e){var t,n=ee(e.getNodeBuilderState().updateBeforeNodes);try{for(n.s();!(t=n.n()).done;){var r=t.value;this.getNodeFrameForRender(e).updateBeforeNode(r)}}catch(i){n.e(i)}finally{n.f()}}},{key:"updateAfter",value:function(e){var t,n=ee(e.getNodeBuilderState().updateAfterNodes);try{for(n.s();!(t=n.n()).done;){var r=t.value;this.getNodeFrameForRender(e).updateAfterNode(r)}}catch(i){n.e(i)}finally{n.f()}}},{key:"updateForCompute",value:function(e){var t,n=this.getNodeFrame(),r=ee(this.getForCompute(e).updateNodes);try{for(r.s();!(t=r.n()).done;){var i=t.value;n.updateNode(i)}}catch(a){r.e(a)}finally{r.f()}}},{key:"updateForRender",value:function(e){var t,n=this.getNodeFrameForRender(e),r=ee(e.getNodeBuilderState().updateNodes);try{for(r.s();!(t=r.n()).done;){var i=t.value;n.updateNode(i)}}catch(a){r.e(a)}finally{r.f()}}},{key:"needsRefresh",value:function(e){var t=this.getNodeFrameForRender(e);return e.getMonitor().needsRefresh(e,t)}},{key:"dispose",value:function(){oe(Q(n.prototype),"dispose",this).call(this),this.nodeFrame=new I0,this.nodeBuilderCache=new Map}}]),n}(DJ),t1=function(){function e(t,n){V(this,e),this.scene=t,this.camera=n}return W(e,[{key:"clone",value:function(){return Object.assign(new this.constructor,this)}}]),e}(),n1=function(){function e(){V(this,e),this.lists=new EJ}return W(e,[{key:"get",value:function(e,t){var n=this.lists,r=[e,t],i=n.get(r);return void 0===i&&(i=new t1(e,t),n.set(r,i)),i}},{key:"dispose",value:function(){this.lists=new EJ}}]),e}(),r1=function(){function e(){V(this,e),this.lightNodes=new WeakMap,this.materialNodes=new Map,this.toneMappingNodes=new Map}return W(e,[{key:"fromMaterial",value:function(e){if(e.isNodeMaterial)return e;var t=null,n=this.getMaterialNodeClass(e.type);if(null!==n)for(var r in t=new n,e)t[r]=e[r];return t}},{key:"addToneMapping",value:function(e,t){this.addType(e,t,this.toneMappingNodes)}},{key:"getToneMappingFunction",value:function(e){return this.toneMappingNodes.get(e)||null}},{key:"getMaterialNodeClass",value:function(e){return this.materialNodes.get(e)||null}},{key:"addMaterial",value:function(e,t){this.addType(e,t.type,this.materialNodes)}},{key:"getLightNodeClass",value:function(e){return this.lightNodes.get(e)||null}},{key:"addLight",value:function(e,t){this.addClass(e,t,this.lightNodes)}},{key:"addType",value:function(e,t,n){if(n.has(t))console.warn("Redefinition of node ".concat(t));else{if("function"!==typeof e)throw new Error("Node class ".concat(e.name," is not a class."));if("function"===typeof t||"object"===typeof t)throw new Error("Base class ".concat(t," is not a class."));n.set(t,e)}}},{key:"addClass",value:function(e,t,n){if(n.has(t))console.warn("Redefinition of node ".concat(t.name));else{if("function"!==typeof e)throw new Error("Node class ".concat(e.name," is not a class."));if("function"!==typeof t)throw new Error("Base class ".concat(t.name," is not a class."));n.set(t,e)}}}]),e}(),i1=new b$,a1=function(e){Y(n,e);var t=$(n);function n(){return V(this,n),t.call(this)}return W(n,[{key:"createNode",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(new b$).setLights(e)}},{key:"getNode",value:function(e,t){if(e.isQuadMesh)return i1;var n=[e,t],r=this.get(n);return void 0===r&&(r=this.createNode(),this.set(n,r)),r}}]),n}(EJ),o1=new fU,s1=new ML,u1=new jL,l1=new kU,c1=new kO,h1=new jL,d1=function(){function e(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};V(this,e),this.isRenderer=!0;var i=r.logarithmicDepthBuffer,a=void 0!==i&&i,o=r.alpha,s=void 0===o||o,u=r.depth,l=void 0===u||u,c=r.stencil,h=void 0!==c&&c,d=r.antialias,f=void 0!==d&&d,p=r.samples,A=void 0===p?0:p,v=r.getFallback,m=void 0===v?null:v;this.domElement=t.getDomElement(),this.backend=t,this.samples=A||!0===f?4:0,this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.alpha=s,this.logarithmicDepthBuffer=a,this.outputColorSpace=iL,this.toneMapping=0,this.toneMappingExposure=1,this.sortObjects=!0,this.depth=l,this.stencil=h,this.clippingPlanes=[],this.info=new jJ,this.nodes={modelViewMatrix:null,modelNormalViewMatrix:null},this.library=new r1,this.lighting=new a1,this._getFallback=m,this._pixelRatio=1,this._width=this.domElement.width,this._height=this.domElement.height,this._viewport=new jL(0,0,this._width,this._height),this._scissor=new jL(0,0,this._width,this._height),this._scissorTest=!1,this._attributes=null,this._geometries=null,this._nodes=null,this._animation=null,this._bindings=null,this._objects=null,this._pipelines=null,this._bundles=null,this._renderLists=null,this._renderContexts=null,this._textures=null,this._background=null,this._quad=new gK(new fY),this._quad.material.type="Renderer_output",this._currentRenderContext=null,this._opaqueSort=null,this._transparentSort=null,this._frameBufferTarget=null;var g=!0===this.alpha?0:1;this._clearColor=new cK(0,0,0,g),this._clearDepth=1,this._clearStencil=0,this._renderTarget=null,this._activeCubeFace=0,this._activeMipmapLevel=0,this._mrt=null,this._renderObjectFunction=null,this._currentRenderObjectFunction=null,this._currentRenderBundle=null,this._handleObjectFunction=this._renderObjectDirect,this._isDeviceLost=!1,this.onDeviceLost=this._onDeviceLost,this._initialized=!1,this._initPromise=null,this._compilationPromises=null,this.transparent=!0,this.opaque=!0,this.shadowMap={enabled:!1,type:1},this.xr={enabled:!1},this.debug={checkShaderErrors:!0,onShaderError:null,getShaderAsync:function(){var e=ie(se().mark((function e(t,r,i){var a,o,s,u,l,c,h;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.compileAsync(t,r);case 2:return a=n._renderLists.get(t,r),o=n._renderContexts.get(t,r,n._renderTarget),s=t.overrideMaterial||i.material,u=n._objects.get(i,s,t,r,a.lightsNode,o),l=u.getNodeBuilderState(),c=l.fragmentShader,h=l.vertexShader,e.abrupt("return",{fragmentShader:c,vertexShader:h});case 8:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()}}return W(e,[{key:"init",value:function(){var e=ie(se().mark((function e(){var t=this;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._initialized){e.next=2;break}throw new Error("Renderer: Backend has already been initialized.");case 2:if(null===this._initPromise){e.next=4;break}return e.abrupt("return",this._initPromise);case 4:return this._initPromise=new Promise(function(){var e=ie(se().mark((function e(n,r){var i;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.backend,e.prev=1,e.next=4,i.init(t);case 4:e.next=23;break;case 6:if(e.prev=6,e.t0=e.catch(1),null===t._getFallback){e.next=21;break}return e.prev=9,t.backend=i=t._getFallback(e.t0),e.next=13,i.init(t);case 13:e.next=19;break;case 15:return e.prev=15,e.t1=e.catch(9),r(e.t1),e.abrupt("return");case 19:e.next=23;break;case 21:return r(e.t0),e.abrupt("return");case 23:t._nodes=new e1(t,i),t._animation=new TJ(t._nodes,t.info),t._attributes=new GJ(i),t._background=new O$(t,t._nodes),t._geometries=new VJ(t._attributes,t.info),t._textures=new lK(t,i,t.info),t._pipelines=new KJ(i,t._nodes),t._bindings=new ZJ(i,t._nodes,t._textures,t._attributes,t._pipelines,t.info),t._objects=new IJ(t,t._nodes,t._geometries,t._pipelines,t._bindings,t.info),t._renderLists=new rK(t.lighting),t._bundles=new n1,t._renderContexts=new sK,t._initialized=!0,n();case 37:case"end":return e.stop()}}),e,null,[[1,6],[9,15]])})));return function(t,n){return e.apply(this,arguments)}}()),e.abrupt("return",this._initPromise);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"coordinateSystem",get:function(){return this.backend.coordinateSystem}},{key:"compileAsync",value:function(){var e=ie(se().mark((function e(t,n){var r,i,a,o,s,u,l,c,h,d,f,p,A,v,m,g,y=arguments;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=y.length>2&&void 0!==y[2]?y[2]:null,!0!==this._isDeviceLost){e.next=3;break}return e.abrupt("return");case 3:if(!1!==this._initialized){e.next=6;break}return e.next=6,this.init();case 6:return i=this._nodes.nodeFrame,a=i.renderId,o=this._currentRenderContext,s=this._currentRenderObjectFunction,u=this._compilationPromises,l=!0===t.isScene?t:o1,null===r&&(r=t),c=this._renderTarget,h=this._renderContexts.get(r,n,c),d=this._activeMipmapLevel,f=[],this._currentRenderContext=h,this._currentRenderObjectFunction=this.renderObject,this._handleObjectFunction=this._createObjectPipeline,this._compilationPromises=f,i.renderId++,i.update(),h.depth=this.depth,h.stencil=this.stencil,h.clippingContext||(h.clippingContext=new RJ),h.clippingContext.updateGlobal(this,n),l.onBeforeRender(this,t,n,c),(p=this._renderLists.get(t,n)).begin(),this._projectObject(t,n,0,p),r!==t&&r.traverseVisible((function(e){e.isLight&&e.layers.test(n.layers)&&p.pushLight(e)})),p.finish(),null!==c?(this._textures.updateRenderTarget(c,d),A=this._textures.get(c),h.textures=A.textures,h.depthTexture=A.depthTexture):(h.textures=null,h.depthTexture=null),this._nodes.updateScene(l),this._background.update(l,p,h),v=p.opaque,m=p.transparent,g=p.lightsNode,!0===this.opaque&&v.length>0&&this._renderObjects(v,n,l,g),!0===this.transparent&&m.length>0&&this._renderTransparents(m,n,l,g),i.renderId=a,this._currentRenderContext=o,this._currentRenderObjectFunction=s,this._compilationPromises=u,this._handleObjectFunction=this._renderObjectDirect,e.next=48,Promise.all(f);case 48:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"renderAsync",value:function(){var e=ie(se().mark((function e(t,n){var r;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!1!==this._initialized){e.next=3;break}return e.next=3,this.init();case 3:return r=this._renderScene(t,n),e.next=6,this.backend.resolveTimestampAsync(r,"render");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"waitForGPU",value:function(){var e=ie(se().mark((function e(){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.backend.waitForGPU();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setMRT",value:function(e){return this._mrt=e,this}},{key:"getMRT",value:function(){return this._mrt}},{key:"_onDeviceLost",value:function(e){var t="THREE.WebGPURenderer: ".concat(e.api," Device Lost:\n\nMessage: ").concat(e.message);e.reason&&(t+="\nReason: ".concat(e.reason)),console.error(t),this._isDeviceLost=!0}},{key:"_renderBundle",value:function(e,t,n){var r=e.bundleGroup,i=e.camera,a=e.renderList,o=this._currentRenderContext,s=this._bundles.get(r,i),u=this.backend.get(s);void 0===u.renderContexts&&(u.renderContexts=new Set);var l=r.version!==u.version,c=!1===u.renderContexts.has(o)||l;if(u.renderContexts.add(o),c){this.backend.beginBundle(o),(void 0===u.renderObjects||l)&&(u.renderObjects=[]),this._currentRenderBundle=s;var h=a.opaque;!0===this.opaque&&h.length>0&&this._renderObjects(h,i,t,n),this._currentRenderBundle=null,this.backend.finishBundle(o,s),u.version=r.version}else for(var d=u.renderObjects,f=0,p=d.length;f<p;f++){var A=d[f];this._nodes.needsRefresh(A)&&(this._nodes.updateBefore(A),this._nodes.updateForRender(A),this._bindings.updateForRender(A),this._nodes.updateAfter(A))}this.backend.addBundle(o,s)}},{key:"render",value:function(e,t){if(!1===this._initialized)return console.warn("THREE.Renderer: .render() called before the backend is initialized. Try using .renderAsync() instead."),this.renderAsync(e,t);this._renderScene(e,t)}},{key:"_getFrameBufferTarget",value:function(){var e=this.currentToneMapping,t=this.currentColorSpace;if(!1===(0!==e)&&!1===(t!==aL))return null;var n=this.getDrawingBufferSize(s1),r=n.width,i=n.height,a=this.depth,o=this.stencil,s=this._frameBufferTarget;return null===s&&((s=new WL(r,i,{depthBuffer:a,stencilBuffer:o,type:cD,format:pD,colorSpace:aL,generateMipmaps:!1,minFilter:eD,magFilter:eD,samples:this.samples})).isPostProcessingRenderTarget=!0,this._frameBufferTarget=s),s.depthBuffer=a,s.stencilBuffer=o,s.setSize(r,i),s.viewport.copy(this._viewport),s.scissor.copy(this._scissor),s.viewport.multiplyScalar(this._pixelRatio),s.scissor.multiplyScalar(this._pixelRatio),s.scissorTest=this._scissorTest,s}},{key:"_renderScene",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!0!==this._isDeviceLost){var r,i=n?this._getFrameBufferTarget():null,a=this._nodes.nodeFrame,o=a.renderId,s=this._currentRenderContext,u=this._currentRenderObjectFunction,l=!0===e.isScene?e:o1,c=this._renderTarget,h=this._activeCubeFace,d=this._activeMipmapLevel;null!==i?(r=i,this.setRenderTarget(r)):r=c;var f=this._renderContexts.get(e,t,r);this._currentRenderContext=f,this._currentRenderObjectFunction=this._renderObjectFunction||this.renderObject,this.info.calls++,this.info.render.calls++,this.info.render.frameCalls++,a.renderId=this.info.calls;var p=this.coordinateSystem;t.coordinateSystem!==p&&(t.coordinateSystem=p,t.updateProjectionMatrix()),!0===e.matrixWorldAutoUpdate&&e.updateMatrixWorld(),null===t.parent&&!0===t.matrixWorldAutoUpdate&&t.updateMatrixWorld();var A=this._viewport,v=this._scissor,m=this._pixelRatio;null!==r&&(A=r.viewport,v=r.scissor,m=1),this.getDrawingBufferSize(s1),u1.set(0,0,s1.width,s1.height);var g=void 0===A.minDepth?0:A.minDepth,y=void 0===A.maxDepth?1:A.maxDepth;f.viewportValue.copy(A).multiplyScalar(m).floor(),f.viewportValue.width>>=d,f.viewportValue.height>>=d,f.viewportValue.minDepth=g,f.viewportValue.maxDepth=y,f.viewport=!1===f.viewportValue.equals(u1),f.scissorValue.copy(v).multiplyScalar(m).floor(),f.scissor=this._scissorTest&&!1===f.scissorValue.equals(u1),f.scissorValue.width>>=d,f.scissorValue.height>>=d,f.clippingContext||(f.clippingContext=new RJ),f.clippingContext.updateGlobal(this,t),l.onBeforeRender(this,e,t,r),c1.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),l1.setFromProjectionMatrix(c1,p);var b=this._renderLists.get(e,t);if(b.begin(),this._projectObject(e,t,0,b),b.finish(),!0===this.sortObjects&&b.sort(this._opaqueSort,this._transparentSort),null!==r){this._textures.updateRenderTarget(r,d);var x=this._textures.get(r);f.textures=x.textures,f.depthTexture=x.depthTexture,f.width=x.width,f.height=x.height,f.renderTarget=r,f.depth=r.depthBuffer,f.stencil=r.stencilBuffer}else f.textures=null,f.depthTexture=null,f.width=this.domElement.width,f.height=this.domElement.height,f.depth=this.depth,f.stencil=this.stencil;f.width>>=d,f.height>>=d,f.activeCubeFace=h,f.activeMipmapLevel=d,f.occlusionQueryCount=b.occlusionQueryCount,this._nodes.updateScene(l),this._background.update(l,b,f),this.backend.beginRender(f);var _=b.bundles,w=b.lightsNode,S=b.transparentDoublePass,M=b.transparent,k=b.opaque;if(_.length>0&&this._renderBundles(_,l,w),!0===this.opaque&&k.length>0&&this._renderObjects(k,t,l,w),!0===this.transparent&&M.length>0&&this._renderTransparents(M,S,t,l,w),this.backend.finishRender(f),a.renderId=o,this._currentRenderContext=s,this._currentRenderObjectFunction=u,null!==i){this.setRenderTarget(c,h,d);var T=this._quad;this._nodes.hasOutputChange(r.texture)&&(T.material.fragmentNode=this._nodes.getOutputNode(r.texture),T.material.needsUpdate=!0),this._renderScene(T,T.camera,!1)}return l.onAfterRender(this,e,t,r),f}}},{key:"getMaxAnisotropy",value:function(){return this.backend.getMaxAnisotropy()}},{key:"getActiveCubeFace",value:function(){return this._activeCubeFace}},{key:"getActiveMipmapLevel",value:function(){return this._activeMipmapLevel}},{key:"setAnimationLoop",value:function(){var e=ie(se().mark((function e(t){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!1!==this._initialized){e.next=3;break}return e.next=3,this.init();case 3:this._animation.setAnimationLoop(t);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getArrayBufferAsync",value:function(){var e=ie(se().mark((function e(t){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.backend.getArrayBufferAsync(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getContext",value:function(){return this.backend.getContext()}},{key:"getPixelRatio",value:function(){return this._pixelRatio}},{key:"getDrawingBufferSize",value:function(e){return e.set(this._width*this._pixelRatio,this._height*this._pixelRatio).floor()}},{key:"getSize",value:function(e){return e.set(this._width,this._height)}},{key:"setPixelRatio",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this._pixelRatio!==e&&(this._pixelRatio=e,this.setSize(this._width,this._height,!1))}},{key:"setDrawingBufferSize",value:function(e,t,n){this._width=e,this._height=t,this._pixelRatio=n,this.domElement.width=Math.floor(e*n),this.domElement.height=Math.floor(t*n),this.setViewport(0,0,e,t),this._initialized&&this.backend.updateSize()}},{key:"setSize",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this._width=e,this._height=t,this.domElement.width=Math.floor(e*this._pixelRatio),this.domElement.height=Math.floor(t*this._pixelRatio),!0===n&&(this.domElement.style.width=e+"px",this.domElement.style.height=t+"px"),this.setViewport(0,0,e,t),this._initialized&&this.backend.updateSize()}},{key:"setOpaqueSort",value:function(e){this._opaqueSort=e}},{key:"setTransparentSort",value:function(e){this._transparentSort=e}},{key:"getScissor",value:function(e){var t=this._scissor;return e.x=t.x,e.y=t.y,e.width=t.width,e.height=t.height,e}},{key:"setScissor",value:function(e,t,n,r){var i=this._scissor;e.isVector4?i.copy(e):i.set(e,t,n,r)}},{key:"getScissorTest",value:function(){return this._scissorTest}},{key:"setScissorTest",value:function(e){this._scissorTest=e,this.backend.setScissorTest(e)}},{key:"getViewport",value:function(e){return e.copy(this._viewport)}},{key:"setViewport",value:function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,o=this._viewport;e.isVector4?o.copy(e):o.set(e,t,n,r),o.minDepth=i,o.maxDepth=a}},{key:"getClearColor",value:function(e){return e.copy(this._clearColor)}},{key:"setClearColor",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this._clearColor.set(e),this._clearColor.a=t}},{key:"getClearAlpha",value:function(){return this._clearColor.a}},{key:"setClearAlpha",value:function(e){this._clearColor.a=e}},{key:"getClearDepth",value:function(){return this._clearDepth}},{key:"setClearDepth",value:function(e){this._clearDepth=e}},{key:"getClearStencil",value:function(){return this._clearStencil}},{key:"setClearStencil",value:function(e){this._clearStencil=e}},{key:"isOccluded",value:function(e){var t=this._currentRenderContext;return t&&this.backend.isOccluded(t,e)}},{key:"clear",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!1===this._initialized)return console.warn("THREE.Renderer: .clear() called before the backend is initialized. Try using .clearAsync() instead."),this.clearAsync(e,t,n);var r=this._renderTarget||this._getFrameBufferTarget(),i=null;if(null!==r&&(this._textures.updateRenderTarget(r),i=this._textures.get(r)),this.backend.clear(e,t,n,i),null!==r&&null===this._renderTarget){var a=this._quad;this._nodes.hasOutputChange(r.texture)&&(a.material.fragmentNode=this._nodes.getOutputNode(r.texture),a.material.needsUpdate=!0),this._renderScene(a,a.camera,!1)}}},{key:"clearColor",value:function(){return this.clear(!0,!1,!1)}},{key:"clearDepth",value:function(){return this.clear(!1,!0,!1)}},{key:"clearStencil",value:function(){return this.clear(!1,!1,!0)}},{key:"clearAsync",value:function(){var e=ie(se().mark((function e(){var t,n,r,i=arguments;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=!(i.length>0&&void 0!==i[0])||i[0],n=!(i.length>1&&void 0!==i[1])||i[1],r=!(i.length>2&&void 0!==i[2])||i[2],!1!==this._initialized){e.next=6;break}return e.next=6,this.init();case 6:this.clear(t,n,r);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"clearColorAsync",value:function(){return this.clearAsync(!0,!1,!1)}},{key:"clearDepthAsync",value:function(){return this.clearAsync(!1,!0,!1)}},{key:"clearStencilAsync",value:function(){return this.clearAsync(!1,!1,!0)}},{key:"currentToneMapping",get:function(){return null!==this._renderTarget?0:this.toneMapping}},{key:"currentColorSpace",get:function(){return null!==this._renderTarget?aL:this.outputColorSpace}},{key:"dispose",value:function(){this.info.dispose(),this.backend.dispose(),this._animation.dispose(),this._objects.dispose(),this._pipelines.dispose(),this._nodes.dispose(),this._bindings.dispose(),this._renderLists.dispose(),this._renderContexts.dispose(),this._textures.dispose(),this.setRenderTarget(null),this.setAnimationLoop(null)}},{key:"setRenderTarget",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this._renderTarget=e,this._activeCubeFace=t,this._activeMipmapLevel=n}},{key:"getRenderTarget",value:function(){return this._renderTarget}},{key:"setRenderObjectFunction",value:function(e){this._renderObjectFunction=e}},{key:"getRenderObjectFunction",value:function(){return this._renderObjectFunction}},{key:"compute",value:function(e){var t=this;if(!0!==this.isDeviceLost){if(!1===this._initialized)return console.warn("THREE.Renderer: .compute() called before the backend is initialized. Try using .computeAsync() instead."),this.computeAsync(e);var n=this._nodes.nodeFrame,r=n.renderId;this.info.calls++,this.info.compute.calls++,this.info.compute.frameCalls++,n.renderId=this.info.calls;var i=this.backend,a=this._pipelines,o=this._bindings,s=this._nodes,u=Array.isArray(e)?e:[e];if(void 0===u[0]||!0!==u[0].isComputeNode)throw new Error("THREE.Renderer: .compute() expects a ComputeNode.");i.beginCompute(e);var l,c=ee(u);try{var h=function(){var n=l.value;if(!1===a.has(n)){n.addEventListener("dispose",(function e(){n.removeEventListener("dispose",e),a.delete(n),o.delete(n),s.delete(n)}));var r=n.onInitFunction;null!==r&&r.call(n,{renderer:t})}s.updateForCompute(n),o.updateForCompute(n);var u=o.getForCompute(n),c=a.getForCompute(n,u);i.compute(e,n,u,c)};for(c.s();!(l=c.n()).done;)h()}catch(d){c.e(d)}finally{c.f()}i.finishCompute(e),n.renderId=r}}},{key:"computeAsync",value:function(){var e=ie(se().mark((function e(t){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!1!==this._initialized){e.next=3;break}return e.next=3,this.init();case 3:return this.compute(t),e.next=6,this.backend.resolveTimestampAsync(t,"compute");case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"hasFeatureAsync",value:function(){var e=ie(se().mark((function e(t){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!1!==this._initialized){e.next=3;break}return e.next=3,this.init();case 3:return e.abrupt("return",this.backend.hasFeature(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"hasFeature",value:function(e){return!1===this._initialized?(console.warn("THREE.Renderer: .hasFeature() called before the backend is initialized. Try using .hasFeatureAsync() instead."),!1):this.backend.hasFeature(e)}},{key:"copyFramebufferToTexture",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null!==t)if(t.isVector2)t=h1.set(t.x,t.y,e.image.width,e.image.height).floor();else{if(!t.isVector4)return void console.error("THREE.Renderer.copyFramebufferToTexture: Invalid rectangle.");t=h1.copy(t).floor()}else t=h1.set(0,0,e.image.width,e.image.height);var n,r=this._currentRenderContext;null!==r?n=r.renderTarget:null!==(n=this._renderTarget||this._getFrameBufferTarget())&&(this._textures.updateRenderTarget(n),r=this._textures.get(n)),this._textures.updateTexture(e,{renderTarget:n}),this.backend.copyFramebufferToTexture(e,r,t)}},{key:"copyTextureToTexture",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;this._textures.updateTexture(e),this._textures.updateTexture(t),this.backend.copyTextureToTexture(e,t,n,r,i)}},{key:"readRenderTargetPixelsAsync",value:function(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0;return this.backend.copyTextureToBuffer(e.textures[a],t,n,r,i,o)}},{key:"_projectObject",value:function(e,t,n,r){if(!1!==e.visible){if(e.layers.test(t.layers))if(e.isGroup)n=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)r.pushLight(e);else if(e.isSprite){if(!e.frustumCulled||l1.intersectsSprite(e)){!0===this.sortObjects&&h1.setFromMatrixPosition(e.matrixWorld).applyMatrix4(c1);var i=e.geometry,a=e.material;a.visible&&r.push(e,i,a,n,h1.z,null)}}else if(e.isLineLoop)console.error("THREE.Renderer: Objects of type THREE.LineLoop are not supported. Please use THREE.Line or THREE.LineSegments.");else if((e.isMesh||e.isLine||e.isPoints)&&(!e.frustumCulled||l1.intersectsObject(e))){var o=e.geometry,s=e.material;if(!0===this.sortObjects&&(null===o.boundingSphere&&o.computeBoundingSphere(),h1.copy(o.boundingSphere.center).applyMatrix4(e.matrixWorld).applyMatrix4(c1)),Array.isArray(s))for(var u=o.groups,l=0,c=u.length;l<c;l++){var h=u[l],d=s[h.materialIndex];d&&d.visible&&r.push(e,o,d,n,h1.z,h)}else s.visible&&r.push(e,o,s,n,h1.z,null)}if(!0===e.isBundleGroup&&void 0!==this.backend.beginBundle){var f=r;(r=this._renderLists.get(e,t)).begin(),f.pushBundle({bundleGroup:e,camera:t,renderList:r}),r.finish()}for(var p=e.children,A=0,v=p.length;A<v;A++)this._projectObject(p[A],t,n,r)}}},{key:"_renderBundles",value:function(e,t,n){var r,i=ee(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;this._renderBundle(a,t,n)}}catch(o){i.e(o)}finally{i.f()}}},{key:"_renderTransparents",value:function(e,t,n,r,i){if(t.length>0){var a,o=ee(t);try{for(o.s();!(a=o.n()).done;){a.value.material.side=1}}catch(h){o.e(h)}finally{o.f()}this._renderObjects(t,n,r,i,"backSide");var s,u=ee(t);try{for(u.s();!(s=u.n()).done;){s.value.material.side=0}}catch(h){u.e(h)}finally{u.f()}this._renderObjects(e,n,r,i);var l,c=ee(t);try{for(c.s();!(l=c.n()).done;){l.value.material.side=2}}catch(h){c.e(h)}finally{c.f()}}else this._renderObjects(e,n,r,i)}},{key:"_renderObjects",value:function(e,t,n,r){for(var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=0,o=e.length;a<o;a++){var s=e[a],u=s.object,l=s.geometry,c=s.material,h=s.group;if(t.isArrayCamera)for(var d=t.cameras,f=0,p=d.length;f<p;f++){var A=d[f];if(u.layers.test(A.layers)){var v=A.viewport,m=void 0===v.minDepth?0:v.minDepth,g=void 0===v.maxDepth?1:v.maxDepth,y=this._currentRenderContext.viewportValue;y.copy(v).multiplyScalar(this._pixelRatio).floor(),y.minDepth=m,y.maxDepth=g,this.backend.updateViewport(this._currentRenderContext),this._currentRenderObjectFunction(u,n,A,l,c,h,r,i)}}else this._currentRenderObjectFunction(u,n,t,l,c,h,r,i)}}},{key:"renderObject",value:function(e,t,n,r,i,a,o){var s,u,l,c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;if(e.onBeforeRender(this,t,n,r,i,a),null!==t.overrideMaterial){var h=t.overrideMaterial;i.positionNode&&i.positionNode.isNode&&(s=h.positionNode,h.positionNode=i.positionNode),h.isShadowNodeMaterial&&(h.side=null===i.shadowSide?i.side:i.shadowSide,i.depthNode&&i.depthNode.isNode&&(l=h.depthNode,h.depthNode=i.depthNode),i.shadowNode&&i.shadowNode.isNode&&(u=h.fragmentNode,h.fragmentNode=i.shadowNode),this.localClippingEnabled&&(i.clipShadows?(h.clippingPlanes!==i.clippingPlanes&&(h.clippingPlanes=i.clippingPlanes,h.needsUpdate=!0),h.clipIntersection!==i.clipIntersection&&(h.clipIntersection=i.clipIntersection)):Array.isArray(h.clippingPlanes)&&(h.clippingPlanes=null,h.needsUpdate=!0))),i=h}!0===i.transparent&&2===i.side&&!1===i.forceSinglePass?(i.side=1,this._handleObjectFunction(e,i,t,n,o,a,"backSide"),i.side=0,this._handleObjectFunction(e,i,t,n,o,a,c),i.side=2):this._handleObjectFunction(e,i,t,n,o,a,c),void 0!==s&&(t.overrideMaterial.positionNode=s),void 0!==l&&(t.overrideMaterial.depthNode=l),void 0!==u&&(t.overrideMaterial.fragmentNode=u),e.onAfterRender(this,t,n,r,i,a)}},{key:"_renderObjectDirect",value:function(e,t,n,r,i,a,o){var s=this._objects.get(e,t,n,r,i,this._currentRenderContext,o);s.drawRange=e.geometry.drawRange,s.group=a;var u=this._nodes.needsRefresh(s);(u&&(this._nodes.updateBefore(s),this._geometries.updateForRender(s),this._nodes.updateForRender(s),this._bindings.updateForRender(s)),this._pipelines.updateForRender(s),null!==this._currentRenderBundle)&&(this.backend.get(this._currentRenderBundle).renderObjects.push(s),s.bundle=this._currentRenderBundle.scene);this.backend.draw(s,this.info),u&&this._nodes.updateAfter(s)}},{key:"_createObjectPipeline",value:function(e,t,n,r,i,a){var o=this._objects.get(e,t,n,r,i,this._currentRenderContext,a);this._nodes.updateBefore(o),this._geometries.updateForRender(o),this._nodes.updateForRender(o),this._bindings.updateForRender(o),this._pipelines.getForRender(o,this._compilationPromises),this._nodes.updateAfter(o)}},{key:"compile",get:function(){return this.compileAsync}}]),e}(),f1=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";V(this,e),this.name=t,this.visibility=0}return W(e,[{key:"setVisibility",value:function(e){this.visibility|=e}},{key:"clone",value:function(){return Object.assign(new this.constructor,this)}}]),e}();var p1=function(e){Y(n,e);var t=$(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return V(this,n),(r=t.call(this,e)).isBuffer=!0,r.bytesPerElement=Float32Array.BYTES_PER_ELEMENT,r._buffer=i,r}return W(n,[{key:"byteLength",get:function(){return(e=this._buffer.byteLength)+(zJ-e%zJ)%zJ;var e}},{key:"buffer",get:function(){return this._buffer}},{key:"update",value:function(){return!0}}]),n}(f1),A1=function(e){Y(n,e);var t=$(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return V(this,n),(r=t.call(this,e,i)).isUniformBuffer=!0,r}return W(n)}(p1),v1=0,m1=function(e){Y(n,e);var t=$(n);function n(e,r){var i;return V(this,n),(i=t.call(this,"UniformBuffer_"+v1++,e?e.value:null)).nodeUniform=e,i.groupNode=r,i}return W(n,[{key:"buffer",get:function(){return this.nodeUniform.value}}]),n}(A1),g1=function(e){Y(n,e);var t=$(n);function n(e){var r;return V(this,n),(r=t.call(this,e)).isUniformsGroup=!0,r._values=null,r.uniforms=[],r}return W(n,[{key:"addUniform",value:function(e){return this.uniforms.push(e),this}},{key:"removeUniform",value:function(e){var t=this.uniforms.indexOf(e);return-1!==t&&this.uniforms.splice(t,1),this}},{key:"values",get:function(){return null===this._values&&(this._values=Array.from(this.buffer)),this._values}},{key:"buffer",get:function(){var e=this._buffer;if(null===e){var t=this.byteLength;e=new Float32Array(new ArrayBuffer(t)),this._buffer=e}return e}},{key:"byteLength",get:function(){for(var e=0,t=0,n=this.uniforms.length;t<n;t++){var r=this.uniforms[t],i=r.boundary,a=r.itemSize,o=e%zJ;0!==o&&zJ-o-i<0?e+=zJ-o:o%i!==0&&(e+=o%i),r.offset=e/this.bytesPerElement,e+=a*this.bytesPerElement}return Math.ceil(e/zJ)*zJ}},{key:"update",value:function(){var e,t=!1,n=ee(this.uniforms);try{for(n.s();!(e=n.n()).done;){var r=e.value;!0===this.updateByType(r)&&(t=!0)}}catch(i){n.e(i)}finally{n.f()}return t}},{key:"updateByType",value:function(e){return e.isNumberUniform?this.updateNumber(e):e.isVector2Uniform?this.updateVector2(e):e.isVector3Uniform?this.updateVector3(e):e.isVector4Uniform?this.updateVector4(e):e.isColorUniform?this.updateColor(e):e.isMatrix3Uniform?this.updateMatrix3(e):e.isMatrix4Uniform?this.updateMatrix4(e):void console.error("THREE.WebGPUUniformsGroup: Unsupported uniform type.",e)}},{key:"updateNumber",value:function(e){var t=!1,n=this.values,r=e.getValue(),i=e.offset;n[i]!==r&&(this.buffer[i]=n[i]=r,t=!0);return t}},{key:"updateVector2",value:function(e){var t=!1,n=this.values,r=e.getValue(),i=e.offset;if(n[i+0]!==r.x||n[i+1]!==r.y){var a=this.buffer;a[i+0]=n[i+0]=r.x,a[i+1]=n[i+1]=r.y,t=!0}return t}},{key:"updateVector3",value:function(e){var t=!1,n=this.values,r=e.getValue(),i=e.offset;if(n[i+0]!==r.x||n[i+1]!==r.y||n[i+2]!==r.z){var a=this.buffer;a[i+0]=n[i+0]=r.x,a[i+1]=n[i+1]=r.y,a[i+2]=n[i+2]=r.z,t=!0}return t}},{key:"updateVector4",value:function(e){var t=!1,n=this.values,r=e.getValue(),i=e.offset;if(n[i+0]!==r.x||n[i+1]!==r.y||n[i+2]!==r.z||n[i+4]!==r.w){var a=this.buffer;a[i+0]=n[i+0]=r.x,a[i+1]=n[i+1]=r.y,a[i+2]=n[i+2]=r.z,a[i+3]=n[i+3]=r.w,t=!0}return t}},{key:"updateColor",value:function(e){var t=!1,n=this.values,r=e.getValue(),i=e.offset;if(n[i+0]!==r.r||n[i+1]!==r.g||n[i+2]!==r.b){var a=this.buffer;a[i+0]=n[i+0]=r.r,a[i+1]=n[i+1]=r.g,a[i+2]=n[i+2]=r.b,t=!0}return t}},{key:"updateMatrix3",value:function(e){var t=!1,n=this.values,r=e.getValue().elements,i=e.offset;if(n[i+0]!==r[0]||n[i+1]!==r[1]||n[i+2]!==r[2]||n[i+4]!==r[3]||n[i+5]!==r[4]||n[i+6]!==r[5]||n[i+8]!==r[6]||n[i+9]!==r[7]||n[i+10]!==r[8]){var a=this.buffer;a[i+0]=n[i+0]=r[0],a[i+1]=n[i+1]=r[1],a[i+2]=n[i+2]=r[2],a[i+4]=n[i+4]=r[3],a[i+5]=n[i+5]=r[4],a[i+6]=n[i+6]=r[5],a[i+8]=n[i+8]=r[6],a[i+9]=n[i+9]=r[7],a[i+10]=n[i+10]=r[8],t=!0}return t}},{key:"updateMatrix4",value:function(e){var t=!1,n=this.values,r=e.getValue().elements,i=e.offset;!1===function(e,t,n){for(var r=0,i=t.length;r<i;r++)if(e[n+r]!==t[r])return!1;return!0}(n,r,i)&&(this.buffer.set(r,i),function(e,t,n){for(var r=0,i=t.length;r<i;r++)e[n+r]=t[r]}(n,r,i),t=!0);return t}}]),n}(A1);var y1,b1,x1,_1,w1,S1=0,M1=function(e){Y(n,e);var t=$(n);function n(e,r){var i;return V(this,n),(i=t.call(this,e)).id=S1++,i.groupNode=r,i.isNodeUniformsGroup=!0,i}return W(n,[{key:"getNodes",value:function(){var e,t=[],n=ee(this.uniforms);try{for(n.s();!(e=n.n()).done;){var r=e.value.nodeUniform.node;if(!r)throw new Error("NodeUniformsGroup: Uniform has no node.");t.push(r)}}catch(i){n.e(i)}finally{n.f()}return t}}]),n}(g1),k1=0,T1=function(e){Y(n,e);var t=$(n);function n(e,r){var i;return V(this,n),(i=t.call(this,e)).id=k1++,i.texture=r,i.version=r?r.version:0,i.store=!1,i.generation=null,i.isSampledTexture=!0,i}return W(n,[{key:"needsBindingsUpdate",value:function(e){var t=this.texture;return e!==this.generation?(this.generation=e,!0):t.isVideoTexture}},{key:"update",value:function(){var e=this.texture;return this.version!==e.version&&(this.version=e.version,!0)}}]),n}(f1),E1=function(e){Y(n,e);var t=$(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return V(this,n),(a=t.call(this,e,r?r.value:null)).textureNode=r,a.groupNode=i,a.access=o,a}return W(n,[{key:"needsBindingsUpdate",value:function(e){return this.textureNode.value!==this.texture||oe(Q(n.prototype),"needsBindingsUpdate",this).call(this,e)}},{key:"update",value:function(){var e=this.textureNode;return this.texture!==e.value?(this.texture=e.value,!0):oe(Q(n.prototype),"update",this).call(this)}}]),n}(T1),C1=function(e){Y(n,e);var t=$(n);function n(e,r,i,a){var o;return V(this,n),(o=t.call(this,e,r,i,a)).isSampledCubeTexture=!0,o}return W(n)}(E1),R1=function(e){Y(n,e);var t=$(n);function n(e,r,i,a){var o;return V(this,n),(o=t.call(this,e,r,i,a)).isSampledTexture3D=!0,o}return W(n)}(E1),B1={atan2:"atan",textureDimensions:"textureSize",equals:"equal"},P1={low:"lowp",medium:"mediump",high:"highp"},N1={swizzleAssign:!0,storageBuffer:!1},I1="\nprecision highp float;\nprecision highp int;\nprecision highp sampler2D;\nprecision highp sampler3D;\nprecision highp samplerCube;\nprecision highp sampler2DArray;\n\nprecision highp usampler2D;\nprecision highp usampler3D;\nprecision highp usamplerCube;\nprecision highp usampler2DArray;\n\nprecision highp isampler2D;\nprecision highp isampler3D;\nprecision highp isamplerCube;\nprecision highp isampler2DArray;\n\nprecision lowp sampler2DShadow;\n",D1=function(e){Y(n,e);var t=$(n);function n(e,r){var i;return V(this,n),(i=t.call(this,e,r,new Z0)).uniformGroups={},i.transforms=[],i.extensions={},i.useComparisonMethod=!0,i}return W(n,[{key:"needsColorSpaceToLinearSRGB",value:function(e){return!0===e.isVideoTexture&&e.colorSpace!==rL}},{key:"getMethod",value:function(e){return B1[e]||e}},{key:"getOutputStructName",value:function(){return""}},{key:"buildFunctionCode",value:function(e){var t,n=e.layout,r=this.flowShaderNode(e),i=[],a=ee(n.inputs);try{for(a.s();!(t=a.n()).done;){var o=t.value;i.push(this.getType(o.type)+" "+o.name)}}catch(s){a.e(s)}finally{a.f()}return"".concat(this.getType(n.type)," ").concat(n.name,"( ").concat(i.join(", ")," ) {\n\n\t").concat(r.vars,"\n\n").concat(r.code,"\n\treturn ").concat(r.result,";\n\n}")}},{key:"setupPBO",value:function(e){var t=e.value;if(void 0===t.pbo){var n=t.array,r=t.count*t.itemSize,i=t.itemSize,a=t.array.constructor.name.toLowerCase().includes("int"),o=a?gD:mD;2===i?o=a?bD:yD:3===i?o=a?1032:fD:4===i&&(o=a?xD:pD);var s={Float32Array:lD,Uint8Array:rD,Uint16Array:oD,Uint32Array:uD,Int8Array:iD,Int16Array:aD,Int32Array:sD,Uint8ClampedArray:rD},u=Math.pow(2,Math.ceil(Math.log2(Math.sqrt(r/i)))),l=Math.ceil(r/i/u);u*l*i<r&&l++;var c=u*l*i,h=new n.constructor(c);h.set(n,0),t.array=h;var d=new gU(t.array,u,l,o,s[t.array.constructor.name]||lD);d.needsUpdate=!0,d.isPBOTexture=!0;var f=new Tj(d,null,null);f.setPrecision("high"),t.pboNode=f,t.pbo=f.value,this.getUniformFromNode(t.pboNode,"texture",this.shaderStage,this.context.label)}}},{key:"getPropertyName",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.shaderStage;return e.isNodeUniform&&!0!==e.node.isTextureNode&&!0!==e.node.isBufferNode?t.charAt(0)+"_"+e.name:oe(Q(n.prototype),"getPropertyName",this).call(this,e,t)}},{key:"generatePBO",value:function(e){var t=e.node,n=e.indexNode,r=t.value;this.renderer.backend.has(r)&&(this.renderer.backend.get(r).pbo=r.pbo);var i=this.getUniformFromNode(r.pboNode,"texture",this.shaderStage,this.context.label),a=this.getPropertyName(i);this.increaseUsage(n);var o=n.build(this,"uint"),s=this.getDataFromNode(e),u=s.propertyName;if(void 0===u){var l=this.getVarFromNode(e);u=this.getPropertyName(l);var c=this.getDataFromNode(t),h=c.propertySizeName;void 0===h&&(h=u+"Size",this.getVarFromNode(t,h,"uint"),this.addLineFlowCode("".concat(h," = uint( textureSize( ").concat(a,", 0 ).x )"),e),c.propertySizeName=h);var d=r.itemSize,f="."+Zz.join("").slice(0,d),p="ivec2(".concat(o," % ").concat(h,", ").concat(o," / ").concat(h,")"),A=this.generateTextureLoad(null,a,p,null,"0"),v="vec4";r.pbo.type===uD?v="uvec4":r.pbo.type===sD&&(v="ivec4"),this.addLineFlowCode("".concat(u," = ").concat(v,"(").concat(A,")").concat(f),e),s.propertyName=u}return u}},{key:"generateTextureLoad",value:function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"0";return r?"texelFetch( ".concat(t,", ivec3( ").concat(n,", ").concat(r," ), ").concat(i," )"):"texelFetch( ".concat(t,", ").concat(n,", ").concat(i," )")}},{key:"generateTexture",value:function(e,t,n,r){return e.isDepthTexture?"texture( ".concat(t,", ").concat(n," ).x"):(r&&(n="vec3( ".concat(n,", ").concat(r," )")),"texture( ".concat(t,", ").concat(n," )"))}},{key:"generateTextureLevel",value:function(e,t,n,r){return"textureLod( ".concat(t,", ").concat(n,", ").concat(r," )")}},{key:"generateTextureBias",value:function(e,t,n,r){return"texture( ".concat(t,", ").concat(n,", ").concat(r," )")}},{key:"generateTextureGrad",value:function(e,t,n,r){return"textureGrad( ".concat(t,", ").concat(n,", ").concat(r[0],", ").concat(r[1]," )")}},{key:"generateTextureCompare",value:function(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:this.shaderStage;if("fragment"===a)return"texture( ".concat(t,", vec3( ").concat(n,", ").concat(r," ) )");console.error("WebGPURenderer: THREE.DepthTexture.compareFunction() does not support ".concat(a," shader."))}},{key:"getVars",value:function(e){var t=[],n=this.vars[e];if(void 0!==n){var r,i=ee(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;t.push("".concat(this.getVar(a.type,a.name),";"))}}catch(o){i.e(o)}finally{i.f()}}return t.join("\n\t")}},{key:"getUniforms",value:function(e){var t,n=[],r={},i=ee(this.uniforms[e]);try{for(i.s();!(t=i.n()).done;){var a=t.value,o=null,s=!1;if("texture"===a.type){var u=a.node.value,l="";!0===u.isDataTexture&&(u.type===uD?l="u":u.type===sD&&(l="i")),o=u.compareFunction?"sampler2DShadow ".concat(a.name,";"):!0===u.isDataArrayTexture||!0===u.isCompressedArrayTexture?"".concat(l,"sampler2DArray ").concat(a.name,";"):"".concat(l,"sampler2D ").concat(a.name,";")}else if("cubeTexture"===a.type)o="samplerCube ".concat(a.name,";");else if("texture3D"===a.type)o="sampler3D ".concat(a.name,";");else if("buffer"===a.type){var c=a.node,h=this.getType(c.bufferType),d=c.bufferCount,f=d>0?d:"";o="".concat(c.name," {\n\t").concat(h," ").concat(a.name,"[").concat(f,"];\n};\n")}else{var p=this.getVectorType(a.type);o="".concat(p," ").concat(this.getPropertyName(a,e),";"),s=!0}var A=a.node.precision;if(null!==A&&(o=P1[A]+" "+o),s){o="\t"+o;var v=a.groupNode.name;(r[v]||(r[v]=[])).push(o)}else o="uniform "+o,n.push(o)}}catch(b){i.e(b)}finally{i.f()}var m="";for(var g in r){var y=r[g];m+=this._getGLSLUniformStruct(e+"_"+g,y.join("\n"))+"\n"}return m+=n.join("\n")}},{key:"getTypeFromAttribute",value:function(e){var t=oe(Q(n.prototype),"getTypeFromAttribute",this).call(this,e);if(/^[iu]/.test(t)&&e.gpuType!==sD){var r=e;e.isInterleavedBufferAttribute&&(r=e.data);var i=r.array;!1===(i instanceof Uint32Array||i instanceof Int32Array)&&(t=t.slice(1))}return t}},{key:"getAttributes",value:function(e){var t="";if("vertex"===e||"compute"===e){var n,r=0,i=ee(this.getAttributesArray());try{for(i.s();!(n=i.n()).done;){var a=n.value;t+="layout( location = ".concat(r++," ) in ").concat(a.type," ").concat(a.name,";\n")}}catch(o){i.e(o)}finally{i.f()}}return t}},{key:"getStructMembers",value:function(e){for(var t=[],n=e.getMemberTypes(),r=0;r<n.length;r++){var i=n[r];t.push("layout( location = ".concat(r," ) out ").concat(i," m").concat(r,";"))}return t.join("\n")}},{key:"getStructs",value:function(e){var t=[],n=this.structs[e];if(0===n.length)return"layout( location = 0 ) out vec4 fragColor;\n";for(var r=0,i=n.length;r<i;r++){var a=n[r],o="\n";o+=this.getStructMembers(a),o+="\n",t.push(o)}return t.join("\n\n")}},{key:"getVaryings",value:function(e){var t="",n=this.varyings;if("vertex"===e||"compute"===e){var r,i=ee(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;"compute"===e&&(a.needsInterpolation=!0);var o=a.type,s=o.includes("int")||o.includes("uv")||o.includes("iv")?"flat ":"";t+="".concat(s).concat(a.needsInterpolation?"out":"/*out*/"," ").concat(o," ").concat(a.name,";\n")}}catch(f){i.e(f)}finally{i.f()}}else if("fragment"===e){var u,l=ee(n);try{for(l.s();!(u=l.n()).done;){var c=u.value;if(c.needsInterpolation){var h=c.type,d=h.includes("int")||h.includes("uv")||h.includes("iv")?"flat ":"";t+="".concat(d,"in ").concat(h," ").concat(c.name,";\n")}}}catch(f){l.e(f)}finally{l.f()}}return t}},{key:"getVertexIndex",value:function(){return"uint( gl_VertexID )"}},{key:"getInstanceIndex",value:function(){return"uint( gl_InstanceID )"}},{key:"getInvocationLocalIndex",value:function(){var e=this.object.workgroupSize.reduce((function(e,t){return e*t}),1);return"uint( gl_InstanceID ) % ".concat(e,"u")}},{key:"getDrawIndex",value:function(){return this.renderer.backend.extensions.has("WEBGL_multi_draw")?"uint( gl_DrawID )":null}},{key:"getFrontFacing",value:function(){return"gl_FrontFacing"}},{key:"getFragCoord",value:function(){return"gl_FragCoord.xy"}},{key:"getFragDepth",value:function(){return"gl_FragDepth"}},{key:"enableExtension",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.shaderStage,r=this.extensions[n]||(this.extensions[n]=new Map);!1===r.has(e)&&r.set(e,{name:e,behavior:t})}},{key:"getExtensions",value:function(e){var t=[];if("vertex"===e){var n=this.renderer.backend.extensions;this.object.isBatchedMesh&&n.has("WEBGL_multi_draw")&&this.enableExtension("GL_ANGLE_multi_draw","require",e)}var r=this.extensions[e];if(void 0!==r){var i,a=ee(r.values());try{for(a.s();!(i=a.n()).done;){var o=i.value,s=o.name,u=o.behavior;t.push("#extension ".concat(s," : ").concat(u))}}catch(l){a.e(l)}finally{a.f()}}return t.join("\n")}},{key:"isAvailable",value:function(e){var t=N1[e];if(void 0===t){if("float32Filterable"===e){var n=this.renderer.backend.extensions;n.has("OES_texture_float_linear")?(n.get("OES_texture_float_linear"),t=!0):t=!1}N1[e]=t}return t}},{key:"isFlipY",value:function(){return!0}},{key:"registerTransform",value:function(e,t){this.transforms.push({varyingName:e,attributeNode:t})}},{key:"getTransforms",value:function(){for(var e=this.transforms,t="",n=0;n<e.length;n++){var r=e[n],i=this.getPropertyName(r.attributeNode);t+="".concat(r.varyingName," = ").concat(i,";\n\t")}return t}},{key:"_getGLSLUniformStruct",value:function(e,t){return"\nlayout( std140 ) uniform ".concat(e," {\n").concat(t,"\n};")}},{key:"_getGLSLVertexCode",value:function(e){return"#version 300 es\n\n".concat(this.getSignature(),"\n\n// extensions \n").concat(e.extensions,"\n\n// precision\n").concat(I1,"\n\n// uniforms\n").concat(e.uniforms,"\n\n// varyings\n").concat(e.varyings,"\n\n// attributes\n").concat(e.attributes,"\n\n// codes\n").concat(e.codes,"\n\nvoid main() {\n\n\t// vars\n\t").concat(e.vars,"\n\n\t// transforms\n\t").concat(e.transforms,"\n\n\t// flow\n\t").concat(e.flow,"\n\n\tgl_PointSize = 1.0;\n\n}\n")}},{key:"_getGLSLFragmentCode",value:function(e){return"#version 300 es\n\n".concat(this.getSignature(),"\n\n// precision\n").concat(I1,"\n\n// uniforms\n").concat(e.uniforms,"\n\n// varyings\n").concat(e.varyings,"\n\n// codes\n").concat(e.codes,"\n\n").concat(e.structs,"\n\nvoid main() {\n\n\t// vars\n\t").concat(e.vars,"\n\n\t// flow\n\t").concat(e.flow,"\n\n}\n")}},{key:"buildCode",value:function(){var e=null!==this.material?{fragment:{},vertex:{}}:{compute:{}};for(var t in this.sortBindingGroups(),e){var n="// code\n\n";n+=this.flowCode[t];var r,i=this.flowNodes[t],a=i[i.length-1],o=ee(i);try{for(o.s();!(r=o.n()).done;){var s=r.value,u=this.getFlowData(s),l=s.name;l&&(n.length>0&&(n+="\n"),n+="\t// flow -> ".concat(l,"\n\t")),n+="".concat(u.code,"\n\t"),s===a&&"compute"!==t&&(n+="// result\n\t","vertex"===t?(n+="gl_Position = ",n+="".concat(u.result,";")):"fragment"===t&&(s.outputNode.isOutputStructNode||(n+="fragColor = ",n+="".concat(u.result,";"))))}}catch(h){o.e(h)}finally{o.f()}var c=e[t];c.extensions=this.getExtensions(t),c.uniforms=this.getUniforms(t),c.attributes=this.getAttributes(t),c.varyings=this.getVaryings(t),c.vars=this.getVars(t),c.structs=this.getStructs(t),c.codes=this.getCodes(t),c.transforms=this.getTransforms(t),c.flow=n}null!==this.material?(this.vertexShader=this._getGLSLVertexCode(e.vertex),this.fragmentShader=this._getGLSLFragmentCode(e.fragment)):this.computeShader=this._getGLSLVertexCode(e.compute)}},{key:"getUniformFromNode",value:function(e,t,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=oe(Q(n.prototype),"getUniformFromNode",this).call(this,e,t,r,i),o=this.getDataFromNode(e,r,this.globalCache),s=o.uniformGPU;if(void 0===s){var u=e.groupNode,l=u.name,c=this.getBindGroupArray(l,r);if("texture"===t)s=new E1(a.name,a.node,u),c.push(s);else if("cubeTexture"===t)s=new C1(a.name,a.node,u),c.push(s);else if("texture3D"===t)s=new R1(a.name,a.node,u),c.push(s);else if("buffer"===t){e.name="NodeBuffer_".concat(e.id),a.name="buffer".concat(e.id);var h=new m1(e,u);h.name=e.name,c.push(h),s=h}else{var d=this.uniformGroups[r]||(this.uniformGroups[r]={}),f=d[l];void 0===f&&(f=new M1(r+"_"+l,u),d[l]=f,c.push(f)),s=this.getNodeUniform(a,t),f.addUniform(s)}o.uniformGPU=s}return a}}]),n}(N0),L1=null,O1=null,F1=null,U1=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};V(this,e),this.parameters=Object.assign({},t),this.data=new WeakMap,this.renderer=null,this.domElement=null}return W(e,[{key:"init",value:function(){var e=ie(se().mark((function e(t){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.renderer=t;case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"begin",value:function(){}},{key:"finish",value:function(){}},{key:"draw",value:function(){}},{key:"createProgram",value:function(){}},{key:"destroyProgram",value:function(){}},{key:"createBindings",value:function(){}},{key:"updateBindings",value:function(){}},{key:"createRenderPipeline",value:function(){}},{key:"createComputePipeline",value:function(){}},{key:"destroyPipeline",value:function(){}},{key:"needsRenderUpdate",value:function(){}},{key:"getRenderCacheKey",value:function(){}},{key:"createNodeBuilder",value:function(){}},{key:"createSampler",value:function(){}},{key:"createDefaultTexture",value:function(){}},{key:"createTexture",value:function(){}},{key:"copyTextureToBuffer",value:function(){}},{key:"createAttribute",value:function(){}},{key:"createIndexAttribute",value:function(){}},{key:"updateAttribute",value:function(){}},{key:"destroyAttribute",value:function(){}},{key:"getContext",value:function(){}},{key:"updateSize",value:function(){}},{key:"resolveTimestampAsync",value:function(){}},{key:"hasFeatureAsync",value:function(){}},{key:"hasFeature",value:function(){}},{key:"getInstanceCount",value:function(e){var t=e.object,n=e.geometry;return n.isInstancedBufferGeometry?n.instanceCount:t.count>1?t.count:1}},{key:"getDrawingBufferSize",value:function(){return L1=L1||new ML,this.renderer.getDrawingBufferSize(L1)}},{key:"getScissor",value:function(){return O1=O1||new jL,this.renderer.getScissor(O1)}},{key:"setScissorTest",value:function(){}},{key:"getClearColor",value:function(){var e=this.renderer;return F1=F1||new cK,e.getClearColor(F1),F1.getRGB(F1,this.renderer.currentColorSpace),F1}},{key:"getDomElement",value:function(){var e=this.domElement;return null===e&&("setAttribute"in(e=void 0!==this.parameters.canvas?this.parameters.canvas:function(){var e=EL("canvas");return e.style.display="block",e}())&&e.setAttribute("data-engine","three.js r".concat(FI," webgpu")),this.domElement=e),e}},{key:"set",value:function(e,t){this.data.set(e,t)}},{key:"get",value:function(e){var t=this.data.get(e);return void 0===t&&(t={},this.data.set(e,t)),t}},{key:"has",value:function(e){return this.data.has(e)}},{key:"delete",value:function(e){this.data.delete(e)}},{key:"dispose",value:function(){}}]),e}(),z1=0,G1=function(){function e(t,n){V(this,e),this.buffers=[t.bufferGPU,n],this.type=t.type,this.bufferType=t.bufferType,this.pbo=t.pbo,this.byteLength=t.byteLength,this.bytesPerElement=t.BYTES_PER_ELEMENT,this.version=t.version,this.isInteger=t.isInteger,this.activeBufferIndex=0,this.baseId=t.id}return W(e,[{key:"id",get:function(){return"".concat(this.baseId,"|").concat(this.activeBufferIndex)}},{key:"bufferGPU",get:function(){return this.buffers[this.activeBufferIndex]}},{key:"transformBuffer",get:function(){return this.buffers[1^this.activeBufferIndex]}},{key:"switchBuffers",value:function(){this.activeBufferIndex^=1}}]),e}(),q1=function(){function e(t){V(this,e),this.backend=t}return W(e,[{key:"createAttribute",value:function(e,t){var n,r=this.backend,i=r.gl,a=e.array,o=e.usage||i.STATIC_DRAW,s=e.isInterleavedBufferAttribute?e.data:e,u=r.get(s),l=u.bufferGPU;if(void 0===l&&(l=this._createBuffer(i,t,a,o),u.bufferGPU=l,u.bufferType=t,u.version=s.version),a instanceof Float32Array)n=i.FLOAT;else if(a instanceof Uint16Array)n=e.isFloat16BufferAttribute?i.HALF_FLOAT:i.UNSIGNED_SHORT;else if(a instanceof Int16Array)n=i.SHORT;else if(a instanceof Uint32Array)n=i.UNSIGNED_INT;else if(a instanceof Int32Array)n=i.INT;else if(a instanceof Int8Array)n=i.BYTE;else if(a instanceof Uint8Array)n=i.UNSIGNED_BYTE;else{if(!(a instanceof Uint8ClampedArray))throw new Error("THREE.WebGLBackend: Unsupported buffer data format: "+a);n=i.UNSIGNED_BYTE}var c={bufferGPU:l,bufferType:t,type:n,byteLength:a.byteLength,bytesPerElement:a.BYTES_PER_ELEMENT,version:e.version,pbo:e.pbo,isInteger:n===i.INT||n===i.UNSIGNED_INT||e.gpuType===sD,id:z1++};if(e.isStorageBufferAttribute||e.isStorageInstancedBufferAttribute){var h=this._createBuffer(i,t,a,o);c=new G1(c,h)}r.set(e,c)}},{key:"updateAttribute",value:function(e){var t=this.backend,n=t.gl,r=e.array,i=e.isInterleavedBufferAttribute?e.data:e,a=t.get(i),o=a.bufferType,s=e.isInterleavedBufferAttribute?e.data.updateRanges:e.updateRanges;if(n.bindBuffer(o,a.bufferGPU),0===s.length)n.bufferSubData(o,0,r);else{for(var u=0,l=s.length;u<l;u++){var c=s[u];n.bufferSubData(o,c.start*r.BYTES_PER_ELEMENT,r,c.start,c.count)}i.clearUpdateRanges()}n.bindBuffer(o,null),a.version=i.version}},{key:"destroyAttribute",value:function(e){var t=this.backend,n=t.gl;e.isInterleavedBufferAttribute&&t.delete(e.data);var r=t.get(e);n.deleteBuffer(r.bufferGPU),t.delete(e)}},{key:"getArrayBufferAsync",value:function(){var e=ie(se().mark((function e(t){var n,r,i,a,o,s,u,l,c;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.backend,r=n.gl,i=t.isInterleavedBufferAttribute?t.data:t,a=n.get(i),o=a.bufferGPU,s=t.array,u=s.byteLength,r.bindBuffer(r.COPY_READ_BUFFER,o),l=r.createBuffer(),r.bindBuffer(r.COPY_WRITE_BUFFER,l),r.bufferData(r.COPY_WRITE_BUFFER,u,r.STREAM_READ),r.copyBufferSubData(r.COPY_READ_BUFFER,r.COPY_WRITE_BUFFER,0,0,u),e.next=13,n.utils._clientWaitAsync();case 13:return c=new t.array.constructor(s.length),r.bindBuffer(r.COPY_WRITE_BUFFER,l),r.getBufferSubData(r.COPY_WRITE_BUFFER,0,c),r.deleteBuffer(l),r.bindBuffer(r.COPY_READ_BUFFER,null),r.bindBuffer(r.COPY_WRITE_BUFFER,null),e.abrupt("return",c.buffer);case 20:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_createBuffer",value:function(e,t,n,r){var i=e.createBuffer();return e.bindBuffer(t,i),e.bufferData(t,n,r),e.bindBuffer(t,null),i}}]),e}(),H1=!1,V1=function(){function e(t){V(this,e),this.backend=t,this.gl=this.backend.gl,this.enabled={},this.currentFlipSided=null,this.currentCullFace=null,this.currentProgram=null,this.currentBlendingEnabled=!1,this.currentBlending=null,this.currentBlendSrc=null,this.currentBlendDst=null,this.currentBlendSrcAlpha=null,this.currentBlendDstAlpha=null,this.currentPremultipledAlpha=null,this.currentPolygonOffsetFactor=null,this.currentPolygonOffsetUnits=null,this.currentColorMask=null,this.currentDepthFunc=null,this.currentDepthMask=null,this.currentStencilFunc=null,this.currentStencilRef=null,this.currentStencilFuncMask=null,this.currentStencilFail=null,this.currentStencilZFail=null,this.currentStencilZPass=null,this.currentStencilMask=null,this.currentLineWidth=null,this.currentBoundFramebuffers={},this.currentDrawbuffers=new WeakMap,this.maxTextures=this.gl.getParameter(this.gl.MAX_TEXTURE_IMAGE_UNITS),this.currentTextureSlot=null,this.currentBoundTextures={},this.currentBoundBufferBases={},!1===H1&&(this._init(this.gl),H1=!0)}return W(e,[{key:"_init",value:function(e){var t,n;g(t={},UI,e.FUNC_ADD),g(t,101,e.FUNC_SUBTRACT),g(t,102,e.FUNC_REVERSE_SUBTRACT),y1=t,g(n={},200,e.ZERO),g(n,201,e.ONE),g(n,202,e.SRC_COLOR),g(n,zI,e.SRC_ALPHA),g(n,210,e.SRC_ALPHA_SATURATE),g(n,208,e.DST_COLOR),g(n,206,e.DST_ALPHA),g(n,203,e.ONE_MINUS_SRC_COLOR),g(n,GI,e.ONE_MINUS_SRC_ALPHA),g(n,209,e.ONE_MINUS_DST_COLOR),g(n,207,e.ONE_MINUS_DST_ALPHA),b1=n}},{key:"enable",value:function(e){var t=this.enabled;!0!==t[e]&&(this.gl.enable(e),t[e]=!0)}},{key:"disable",value:function(e){var t=this.enabled;!1!==t[e]&&(this.gl.disable(e),t[e]=!1)}},{key:"setFlipSided",value:function(e){if(this.currentFlipSided!==e){var t=this.gl;e?t.frontFace(t.CW):t.frontFace(t.CCW),this.currentFlipSided=e}}},{key:"setCullFace",value:function(e){var t=this.gl;0!==e?(this.enable(t.CULL_FACE),e!==this.currentCullFace&&(1===e?t.cullFace(t.BACK):2===e?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK))):this.disable(t.CULL_FACE),this.currentCullFace=e}},{key:"setLineWidth",value:function(e){var t=this.currentLineWidth,n=this.gl;e!==t&&(n.lineWidth(e),this.currentLineWidth=e)}},{key:"setBlending",value:function(e,t,n,r,i,a,o,s){var u=this.gl;if(0!==e){if(!1===this.currentBlendingEnabled&&(this.enable(u.BLEND),this.currentBlendingEnabled=!0),5===e)i=i||t,a=a||n,o=o||r,t===this.currentBlendEquation&&i===this.currentBlendEquationAlpha||(u.blendEquationSeparate(y1[t],y1[i]),this.currentBlendEquation=t,this.currentBlendEquationAlpha=i),n===this.currentBlendSrc&&r===this.currentBlendDst&&a===this.currentBlendSrcAlpha&&o===this.currentBlendDstAlpha||(u.blendFuncSeparate(b1[n],b1[r],b1[a],b1[o]),this.currentBlendSrc=n,this.currentBlendDst=r,this.currentBlendSrcAlpha=a,this.currentBlendDstAlpha=o),this.currentBlending=e,this.currentPremultipledAlpha=!1;else if(e!==this.currentBlending||s!==this.currentPremultipledAlpha){if(this.currentBlendEquation===UI&&this.currentBlendEquationAlpha===UI||(u.blendEquation(u.FUNC_ADD),this.currentBlendEquation=UI,this.currentBlendEquationAlpha=UI),s)switch(e){case 1:u.blendFuncSeparate(u.ONE,u.ONE_MINUS_SRC_ALPHA,u.ONE,u.ONE_MINUS_SRC_ALPHA);break;case 2:u.blendFunc(u.ONE,u.ONE);break;case 3:u.blendFuncSeparate(u.ZERO,u.ONE_MINUS_SRC_COLOR,u.ZERO,u.ONE);break;case 4:u.blendFuncSeparate(u.ZERO,u.SRC_COLOR,u.ZERO,u.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",e)}else switch(e){case 1:u.blendFuncSeparate(u.SRC_ALPHA,u.ONE_MINUS_SRC_ALPHA,u.ONE,u.ONE_MINUS_SRC_ALPHA);break;case 2:u.blendFunc(u.SRC_ALPHA,u.ONE);break;case 3:u.blendFuncSeparate(u.ZERO,u.ONE_MINUS_SRC_COLOR,u.ZERO,u.ONE);break;case 4:u.blendFunc(u.ZERO,u.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",e)}this.currentBlendSrc=null,this.currentBlendDst=null,this.currentBlendSrcAlpha=null,this.currentBlendDstAlpha=null,this.currentBlending=e,this.currentPremultipledAlpha=s}}else!0===this.currentBlendingEnabled&&(this.disable(u.BLEND),this.currentBlendingEnabled=!1)}},{key:"setColorMask",value:function(e){this.currentColorMask!==e&&(this.gl.colorMask(e,e,e,e),this.currentColorMask=e)}},{key:"setDepthTest",value:function(e){var t=this.gl;e?this.enable(t.DEPTH_TEST):this.disable(t.DEPTH_TEST)}},{key:"setDepthMask",value:function(e){this.currentDepthMask!==e&&(this.gl.depthMask(e),this.currentDepthMask=e)}},{key:"setDepthFunc",value:function(e){if(this.currentDepthFunc!==e){var t=this.gl;switch(e){case 0:t.depthFunc(t.NEVER);break;case 1:t.depthFunc(t.ALWAYS);break;case 2:t.depthFunc(t.LESS);break;case 3:default:t.depthFunc(t.LEQUAL);break;case 4:t.depthFunc(t.EQUAL);break;case 5:t.depthFunc(t.GEQUAL);break;case 6:t.depthFunc(t.GREATER);break;case 7:t.depthFunc(t.NOTEQUAL)}this.currentDepthFunc=e}}},{key:"setStencilTest",value:function(e){var t=this.gl;e?this.enable(t.STENCIL_TEST):this.disable(t.STENCIL_TEST)}},{key:"setStencilMask",value:function(e){this.currentStencilMask!==e&&(this.gl.stencilMask(e),this.currentStencilMask=e)}},{key:"setStencilFunc",value:function(e,t,n){this.currentStencilFunc===e&&this.currentStencilRef===t&&this.currentStencilFuncMask===n||(this.gl.stencilFunc(e,t,n),this.currentStencilFunc=e,this.currentStencilRef=t,this.currentStencilFuncMask=n)}},{key:"setStencilOp",value:function(e,t,n){this.currentStencilFail===e&&this.currentStencilZFail===t&&this.currentStencilZPass===n||(this.gl.stencilOp(e,t,n),this.currentStencilFail=e,this.currentStencilZFail=t,this.currentStencilZPass=n)}},{key:"setMaterial",value:function(e,t){var n=this.gl;2===e.side?this.disable(n.CULL_FACE):this.enable(n.CULL_FACE);var r=1===e.side;t&&(r=!r),this.setFlipSided(r),1===e.blending&&!1===e.transparent?this.setBlending(0):this.setBlending(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha),this.setDepthFunc(e.depthFunc),this.setDepthTest(e.depthTest),this.setDepthMask(e.depthWrite),this.setColorMask(e.colorWrite);var i=e.stencilWrite;this.setStencilTest(i),i&&(this.setStencilMask(e.stencilWriteMask),this.setStencilFunc(e.stencilFunc,e.stencilRef,e.stencilFuncMask),this.setStencilOp(e.stencilFail,e.stencilZFail,e.stencilZPass)),this.setPolygonOffset(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits),!0===e.alphaToCoverage&&this.backend.renderer.samples>1?this.enable(n.SAMPLE_ALPHA_TO_COVERAGE):this.disable(n.SAMPLE_ALPHA_TO_COVERAGE)}},{key:"setPolygonOffset",value:function(e,t,n){var r=this.gl;e?(this.enable(r.POLYGON_OFFSET_FILL),this.currentPolygonOffsetFactor===t&&this.currentPolygonOffsetUnits===n||(r.polygonOffset(t,n),this.currentPolygonOffsetFactor=t,this.currentPolygonOffsetUnits=n)):this.disable(r.POLYGON_OFFSET_FILL)}},{key:"useProgram",value:function(e){return this.currentProgram!==e&&(this.gl.useProgram(e),this.currentProgram=e,!0)}},{key:"bindFramebuffer",value:function(e,t){var n=this.gl,r=this.currentBoundFramebuffers;return r[e]!==t&&(n.bindFramebuffer(e,t),r[e]=t,e===n.DRAW_FRAMEBUFFER&&(r[n.FRAMEBUFFER]=t),e===n.FRAMEBUFFER&&(r[n.DRAW_FRAMEBUFFER]=t),!0)}},{key:"drawBuffers",value:function(e,t){var n=this.gl,r=[],i=!1;if(null!==e.textures){r=this.currentDrawbuffers.get(t),void 0===r&&(r=[],this.currentDrawbuffers.set(t,r));var a=e.textures;if(r.length!==a.length||r[0]!==n.COLOR_ATTACHMENT0){for(var o=0,s=a.length;o<s;o++)r[o]=n.COLOR_ATTACHMENT0+o;r.length=a.length,i=!0}}else r[0]!==n.BACK&&(r[0]=n.BACK,i=!0);i&&n.drawBuffers(r)}},{key:"activeTexture",value:function(e){var t=this.gl,n=this.currentTextureSlot,r=this.maxTextures;void 0===e&&(e=t.TEXTURE0+r-1),n!==e&&(t.activeTexture(e),this.currentTextureSlot=e)}},{key:"bindTexture",value:function(e,t,n){var r=this.gl,i=this.currentTextureSlot,a=this.currentBoundTextures,o=this.maxTextures;void 0===n&&(n=null===i?r.TEXTURE0+o-1:i);var s=a[n];void 0===s&&(s={type:void 0,texture:void 0},a[n]=s),s.type===e&&s.texture===t||(i!==n&&(r.activeTexture(n),this.currentTextureSlot=n),r.bindTexture(e,t),s.type=e,s.texture=t)}},{key:"bindBufferBase",value:function(e,t,n){var r=this.gl,i="".concat(e,"-").concat(t);return this.currentBoundBufferBases[i]!==n&&(r.bindBufferBase(e,t,n),this.currentBoundBufferBases[i]=n,!0)}},{key:"unbindTexture",value:function(){var e=this.gl,t=this.currentTextureSlot,n=this.currentBoundTextures[t];void 0!==n&&void 0!==n.type&&(e.bindTexture(n.type,null),n.type=void 0,n.texture=void 0)}}]),e}(),j1=function(){function e(t){V(this,e),this.backend=t,this.gl=this.backend.gl,this.extensions=t.extensions}return W(e,[{key:"convert",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:rL,r=this.gl,i=this.extensions;if(e===rD)return r.UNSIGNED_BYTE;if(1017===e)return r.UNSIGNED_SHORT_4_4_4_4;if(1018===e)return r.UNSIGNED_SHORT_5_5_5_1;if(e===dD)return r.UNSIGNED_INT_5_9_9_9_REV;if(e===iD)return r.BYTE;if(e===aD)return r.SHORT;if(e===oD)return r.UNSIGNED_SHORT;if(e===sD)return r.INT;if(e===uD)return r.UNSIGNED_INT;if(e===lD)return r.FLOAT;if(e===cD)return r.HALF_FLOAT;if(1021===e)return r.ALPHA;if(e===fD)return r.RGB;if(e===pD)return r.RGBA;if(1024===e)return r.LUMINANCE;if(1025===e)return r.LUMINANCE_ALPHA;if(e===AD)return r.DEPTH_COMPONENT;if(e===vD)return r.DEPTH_STENCIL;if(e===mD)return r.RED;if(e===gD)return r.RED_INTEGER;if(e===yD)return r.RG;if(e===bD)return r.RG_INTEGER;if(e===xD)return r.RGBA_INTEGER;if(e===_D||e===wD||e===SD||e===MD)if(n===iL){if(null===(t=i.get("WEBGL_compressed_texture_s3tc_srgb")))return null;if(e===_D)return t.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(e===wD)return t.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(e===SD)return t.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(e===MD)return t.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(null===(t=i.get("WEBGL_compressed_texture_s3tc")))return null;if(e===_D)return t.COMPRESSED_RGB_S3TC_DXT1_EXT;if(e===wD)return t.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(e===SD)return t.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(e===MD)return t.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(e===kD||e===TD||e===ED||e===CD){if(null===(t=i.get("WEBGL_compressed_texture_pvrtc")))return null;if(e===kD)return t.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(e===TD)return t.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(e===ED)return t.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(e===CD)return t.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(e===RD||e===BD||e===PD){if(null===(t=i.get("WEBGL_compressed_texture_etc")))return null;if(e===RD||e===BD)return n===iL?t.COMPRESSED_SRGB8_ETC2:t.COMPRESSED_RGB8_ETC2;if(e===PD)return n===iL?t.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:t.COMPRESSED_RGBA8_ETC2_EAC}if(e===ND||e===ID||e===DD||e===LD||e===OD||e===FD||e===UD||e===zD||e===GD||e===qD||e===HD||e===VD||e===jD||e===WD){if(null===(t=i.get("WEBGL_compressed_texture_astc")))return null;if(e===ND)return n===iL?t.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:t.COMPRESSED_RGBA_ASTC_4x4_KHR;if(e===ID)return n===iL?t.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:t.COMPRESSED_RGBA_ASTC_5x4_KHR;if(e===DD)return n===iL?t.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:t.COMPRESSED_RGBA_ASTC_5x5_KHR;if(e===LD)return n===iL?t.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:t.COMPRESSED_RGBA_ASTC_6x5_KHR;if(e===OD)return n===iL?t.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:t.COMPRESSED_RGBA_ASTC_6x6_KHR;if(e===FD)return n===iL?t.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:t.COMPRESSED_RGBA_ASTC_8x5_KHR;if(e===UD)return n===iL?t.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:t.COMPRESSED_RGBA_ASTC_8x6_KHR;if(e===zD)return n===iL?t.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:t.COMPRESSED_RGBA_ASTC_8x8_KHR;if(e===GD)return n===iL?t.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:t.COMPRESSED_RGBA_ASTC_10x5_KHR;if(e===qD)return n===iL?t.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:t.COMPRESSED_RGBA_ASTC_10x6_KHR;if(e===HD)return n===iL?t.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:t.COMPRESSED_RGBA_ASTC_10x8_KHR;if(e===VD)return n===iL?t.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:t.COMPRESSED_RGBA_ASTC_10x10_KHR;if(e===jD)return n===iL?t.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:t.COMPRESSED_RGBA_ASTC_12x10_KHR;if(e===WD)return n===iL?t.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:t.COMPRESSED_RGBA_ASTC_12x12_KHR}if(e===XD){if(null===(t=i.get("EXT_texture_compression_bptc")))return null;if(e===XD)return n===iL?t.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:t.COMPRESSED_RGBA_BPTC_UNORM_EXT}if(36283===e||e===YD||e===QD||e===JD){if(null===(t=i.get("EXT_texture_compression_rgtc")))return null;if(e===XD)return t.COMPRESSED_RED_RGTC1_EXT;if(e===YD)return t.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(e===QD)return t.COMPRESSED_RED_GREEN_RGTC2_EXT;if(e===JD)return t.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return e===hD?r.UNSIGNED_INT_24_8:void 0!==r[e]?r[e]:null}},{key:"_clientWaitAsync",value:function(){var e=this.gl,t=e.fenceSync(e.SYNC_GPU_COMMANDS_COMPLETE,0);return e.flush(),new Promise((function(n,r){!function i(){var a=e.clientWaitSync(t,e.SYNC_FLUSH_COMMANDS_BIT,0);if(a===e.WAIT_FAILED)return e.deleteSync(t),void r();a!==e.TIMEOUT_EXPIRED?(e.deleteSync(t),n()):requestAnimationFrame(i)}()}))}}]),e}(),W1=!1,X1=function(){function e(t){V(this,e),this.backend=t,this.gl=t.gl,this.extensions=t.extensions,this.defaultTextures={},!1===W1&&(this._init(this.gl),W1=!0)}return W(e,[{key:"_init",value:function(e){var t,n,r;g(t={},YI,e.REPEAT),g(t,QI,e.CLAMP_TO_EDGE),g(t,JI,e.MIRRORED_REPEAT),x1=t,g(n={},KI,e.NEAREST),g(n,ZI,e.NEAREST_MIPMAP_NEAREST),g(n,$I,e.NEAREST_MIPMAP_LINEAR),g(n,eD,e.LINEAR),g(n,tD,e.LINEAR_MIPMAP_NEAREST),g(n,nD,e.LINEAR_MIPMAP_LINEAR),_1=n,g(r={},512,e.NEVER),g(r,519,e.ALWAYS),g(r,513,e.LESS),g(r,515,e.LEQUAL),g(r,514,e.EQUAL),g(r,518,e.GEQUAL),g(r,516,e.GREATER),g(r,517,e.NOTEQUAL),w1=r}},{key:"filterFallback",value:function(e){var t=this.gl;return e===KI||e===ZI||e===$I?t.NEAREST:t.LINEAR}},{key:"getGLTextureType",value:function(e){var t=this.gl;return!0===e.isCubeTexture?t.TEXTURE_CUBE_MAP:!0===e.isDataArrayTexture||!0===e.isCompressedArrayTexture?t.TEXTURE_2D_ARRAY:!0===e.isData3DTexture?t.TEXTURE_3D:t.TEXTURE_2D}},{key:"getInternalFormat",value:function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=this.gl,o=this.extensions;if(null!==e){if(void 0!==a[e])return a[e];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+e+"'")}var s=t;return t===a.RED&&(n===a.FLOAT&&(s=a.R32F),n===a.HALF_FLOAT&&(s=a.R16F),n===a.UNSIGNED_BYTE&&(s=a.R8),n===a.UNSIGNED_SHORT&&(s=a.R16),n===a.UNSIGNED_INT&&(s=a.R32UI),n===a.BYTE&&(s=a.R8I),n===a.SHORT&&(s=a.R16I),n===a.INT&&(s=a.R32I)),t===a.RED_INTEGER&&(n===a.UNSIGNED_BYTE&&(s=a.R8UI),n===a.UNSIGNED_SHORT&&(s=a.R16UI),n===a.UNSIGNED_INT&&(s=a.R32UI),n===a.BYTE&&(s=a.R8I),n===a.SHORT&&(s=a.R16I),n===a.INT&&(s=a.R32I)),t===a.RG&&(n===a.FLOAT&&(s=a.RG32F),n===a.HALF_FLOAT&&(s=a.RG16F),n===a.UNSIGNED_BYTE&&(s=a.RG8),n===a.UNSIGNED_SHORT&&(s=a.RG16),n===a.UNSIGNED_INT&&(s=a.RG32UI),n===a.BYTE&&(s=a.RG8I),n===a.SHORT&&(s=a.RG16I),n===a.INT&&(s=a.RG32I)),t===a.RG_INTEGER&&(n===a.UNSIGNED_BYTE&&(s=a.RG8UI),n===a.UNSIGNED_SHORT&&(s=a.RG16UI),n===a.UNSIGNED_INT&&(s=a.RG32UI),n===a.BYTE&&(s=a.RG8I),n===a.SHORT&&(s=a.RG16I),n===a.INT&&(s=a.RG32I)),t===a.RGB&&(n===a.FLOAT&&(s=a.RGB32F),n===a.HALF_FLOAT&&(s=a.RGB16F),n===a.UNSIGNED_BYTE&&(s=a.RGB8),n===a.UNSIGNED_SHORT&&(s=a.RGB16),n===a.UNSIGNED_INT&&(s=a.RGB32UI),n===a.BYTE&&(s=a.RGB8I),n===a.SHORT&&(s=a.RGB16I),n===a.INT&&(s=a.RGB32I),n===a.UNSIGNED_BYTE&&(s=r===iL&&!1===i?a.SRGB8:a.RGB8),n===a.UNSIGNED_SHORT_5_6_5&&(s=a.RGB565),n===a.UNSIGNED_SHORT_5_5_5_1&&(s=a.RGB5_A1),n===a.UNSIGNED_SHORT_4_4_4_4&&(s=a.RGB4),n===a.UNSIGNED_INT_5_9_9_9_REV&&(s=a.RGB9_E5)),t===a.RGB_INTEGER&&(n===a.UNSIGNED_BYTE&&(s=a.RGB8UI),n===a.UNSIGNED_SHORT&&(s=a.RGB16UI),n===a.UNSIGNED_INT&&(s=a.RGB32UI),n===a.BYTE&&(s=a.RGB8I),n===a.SHORT&&(s=a.RGB16I),n===a.INT&&(s=a.RGB32I)),t===a.RGBA&&(n===a.FLOAT&&(s=a.RGBA32F),n===a.HALF_FLOAT&&(s=a.RGBA16F),n===a.UNSIGNED_BYTE&&(s=a.RGBA8),n===a.UNSIGNED_SHORT&&(s=a.RGBA16),n===a.UNSIGNED_INT&&(s=a.RGBA32UI),n===a.BYTE&&(s=a.RGBA8I),n===a.SHORT&&(s=a.RGBA16I),n===a.INT&&(s=a.RGBA32I),n===a.UNSIGNED_BYTE&&(s=r===iL&&!1===i?a.SRGB8_ALPHA8:a.RGBA8),n===a.UNSIGNED_SHORT_4_4_4_4&&(s=a.RGBA4),n===a.UNSIGNED_SHORT_5_5_5_1&&(s=a.RGB5_A1)),t===a.RGBA_INTEGER&&(n===a.UNSIGNED_BYTE&&(s=a.RGBA8UI),n===a.UNSIGNED_SHORT&&(s=a.RGBA16UI),n===a.UNSIGNED_INT&&(s=a.RGBA32UI),n===a.BYTE&&(s=a.RGBA8I),n===a.SHORT&&(s=a.RGBA16I),n===a.INT&&(s=a.RGBA32I)),t===a.DEPTH_COMPONENT&&(n===a.UNSIGNED_INT&&(s=a.DEPTH24_STENCIL8),n===a.FLOAT&&(s=a.DEPTH_COMPONENT32F)),t===a.DEPTH_STENCIL&&n===a.UNSIGNED_INT_24_8&&(s=a.DEPTH24_STENCIL8),s!==a.R16F&&s!==a.R32F&&s!==a.RG16F&&s!==a.RG32F&&s!==a.RGBA16F&&s!==a.RGBA32F||o.get("EXT_color_buffer_float"),s}},{key:"setTextureParameters",value:function(e,t){var n=this.gl,r=this.extensions,i=this.backend;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,t.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,t.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,n.NONE),n.texParameteri(e,n.TEXTURE_WRAP_S,x1[t.wrapS]),n.texParameteri(e,n.TEXTURE_WRAP_T,x1[t.wrapT]),e!==n.TEXTURE_3D&&e!==n.TEXTURE_2D_ARRAY||n.texParameteri(e,n.TEXTURE_WRAP_R,x1[t.wrapR]),n.texParameteri(e,n.TEXTURE_MAG_FILTER,_1[t.magFilter]);var a=void 0!==t.mipmaps&&t.mipmaps.length>0,o=t.minFilter===eD&&a?nD:t.minFilter;if(n.texParameteri(e,n.TEXTURE_MIN_FILTER,_1[o]),t.compareFunction&&(n.texParameteri(e,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(e,n.TEXTURE_COMPARE_FUNC,w1[t.compareFunction])),!0===r.has("EXT_texture_filter_anisotropic")){if(t.magFilter===KI)return;if(t.minFilter!==$I&&t.minFilter!==nD)return;if(t.type===lD&&!1===r.has("OES_texture_float_linear"))return;if(t.anisotropy>1){var s=r.get("EXT_texture_filter_anisotropic");n.texParameterf(e,s.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(t.anisotropy,i.getMaxAnisotropy()))}}}},{key:"createDefaultTexture",value:function(e){var t=this.gl,n=this.backend,r=this.defaultTextures,i=this.getGLTextureType(e),a=r[i];void 0===a&&(a=t.createTexture(),n.state.bindTexture(i,a),t.texParameteri(i,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(i,t.TEXTURE_MAG_FILTER,t.NEAREST),r[i]=a),n.set(e,{textureGPU:a,glTextureType:i,isDefault:!0})}},{key:"createTexture",value:function(e,t){var n=this.gl,r=this.backend,i=t.levels,a=t.width,o=t.height,s=t.depth,u=r.utils.convert(e.format,e.colorSpace),l=r.utils.convert(e.type),c=this.getInternalFormat(e.internalFormat,u,l,e.colorSpace,e.isVideoTexture),h=n.createTexture(),d=this.getGLTextureType(e);r.state.bindTexture(d,h),this.setTextureParameters(d,e),e.isDataArrayTexture||e.isCompressedArrayTexture?n.texStorage3D(n.TEXTURE_2D_ARRAY,i,c,a,o,s):e.isData3DTexture?n.texStorage3D(n.TEXTURE_3D,i,c,a,o,s):e.isVideoTexture||n.texStorage2D(d,i,c,a,o),r.set(e,{textureGPU:h,glTextureType:d,glFormat:u,glType:l,glInternalFormat:c})}},{key:"copyBufferToTexture",value:function(e,t){var n=this.gl,r=this.backend,i=r.get(t),a=i.textureGPU,o=i.glTextureType,s=i.glFormat,u=i.glType,l=t.source.data,c=l.width,h=l.height;n.bindBuffer(n.PIXEL_UNPACK_BUFFER,e),r.state.bindTexture(o,a),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,!1),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),n.texSubImage2D(o,0,0,0,c,h,s,u,0),n.bindBuffer(n.PIXEL_UNPACK_BUFFER,null),r.state.unbindTexture()}},{key:"updateTexture",value:function(e,t){var n=this.gl,r=t.width,i=t.height,a=this.backend.get(e),o=a.textureGPU,s=a.glTextureType,u=a.glFormat,l=a.glType,c=a.glInternalFormat;if(!e.isRenderTargetTexture&&void 0!==o){var h=function(e){return e.isDataTexture?e.image.data:e instanceof ImageBitmap||e instanceof OffscreenCanvas||e instanceof HTMLImageElement||e instanceof HTMLCanvasElement?e:e.data};if(this.backend.state.bindTexture(s,o),this.setTextureParameters(s,e),e.isCompressedTexture)for(var d=e.mipmaps,f=t.image,p=0;p<d.length;p++){var A=d[p];e.isCompressedArrayTexture?e.format!==n.RGBA?null!==u?n.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,p,0,0,0,A.width,A.height,f.depth,u,A.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texSubImage3D(n.TEXTURE_2D_ARRAY,p,0,0,0,A.width,A.height,f.depth,u,l,A.data):null!==u?n.compressedTexSubImage2D(n.TEXTURE_2D,p,0,0,A.width,A.height,u,A.data):console.warn("Unsupported compressed texture format")}else if(e.isCubeTexture)for(var v=t.images,m=0;m<6;m++){var g=h(v[m]);n.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+m,0,0,0,r,i,u,l,g)}else if(e.isDataArrayTexture){var y=t.image;n.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,y.width,y.height,y.depth,u,l,y.data)}else if(e.isData3DTexture){var b=t.image;n.texSubImage3D(n.TEXTURE_3D,0,0,0,0,b.width,b.height,b.depth,u,l,b.data)}else if(e.isVideoTexture)e.update(),n.texImage2D(s,0,c,u,l,t.image);else{var x=h(t.image);n.texSubImage2D(s,0,0,0,r,i,u,l,x)}}}},{key:"generateMipmaps",value:function(e){var t=this.gl,n=this.backend,r=n.get(e),i=r.textureGPU,a=r.glTextureType;n.state.bindTexture(a,i),t.generateMipmap(a)}},{key:"deallocateRenderBuffers",value:function(e){var t=this.gl,n=this.backend;if(e){var r=n.get(e);if(r.renderBufferStorageSetup=void 0,r.framebuffers){for(var i in r.framebuffers)t.deleteFramebuffer(r.framebuffers[i]);delete r.framebuffers}if(r.depthRenderbuffer&&(t.deleteRenderbuffer(r.depthRenderbuffer),delete r.depthRenderbuffer),r.stencilRenderbuffer&&(t.deleteRenderbuffer(r.stencilRenderbuffer),delete r.stencilRenderbuffer),r.msaaFrameBuffer&&(t.deleteFramebuffer(r.msaaFrameBuffer),delete r.msaaFrameBuffer),r.msaaRenderbuffers){for(var a=0;a<r.msaaRenderbuffers.length;a++)t.deleteRenderbuffer(r.msaaRenderbuffers[a]);delete r.msaaRenderbuffers}}}},{key:"destroyTexture",value:function(e){var t=this.gl,n=this.backend,r=n.get(e),i=r.textureGPU,a=r.renderTarget;this.deallocateRenderBuffers(a),t.deleteTexture(i),n.delete(e)}},{key:"copyTextureToTexture",value:function(e,t){var n,r,i,a,o,s,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,h=this.gl,d=this.backend,f=this.backend.state,p=d.get(t),A=p.textureGPU,v=p.glTextureType,m=p.glType,g=p.glFormat;null!==u?(n=u.max.x-u.min.x,r=u.max.y-u.min.y,i=u.min.x,a=u.min.y):(n=e.image.width,r=e.image.height,i=0,a=0),null!==l?(o=l.x,s=l.y):(o=0,s=0),f.bindTexture(v,A),h.pixelStorei(h.UNPACK_ALIGNMENT,t.unpackAlignment),h.pixelStorei(h.UNPACK_FLIP_Y_WEBGL,t.flipY),h.pixelStorei(h.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultiplyAlpha),h.pixelStorei(h.UNPACK_ALIGNMENT,t.unpackAlignment);var y=h.getParameter(h.UNPACK_ROW_LENGTH),b=h.getParameter(h.UNPACK_IMAGE_HEIGHT),x=h.getParameter(h.UNPACK_SKIP_PIXELS),_=h.getParameter(h.UNPACK_SKIP_ROWS),w=h.getParameter(h.UNPACK_SKIP_IMAGES),S=e.isCompressedTexture?e.mipmaps[c]:e.image;if(h.pixelStorei(h.UNPACK_ROW_LENGTH,S.width),h.pixelStorei(h.UNPACK_IMAGE_HEIGHT,S.height),h.pixelStorei(h.UNPACK_SKIP_PIXELS,i),h.pixelStorei(h.UNPACK_SKIP_ROWS,a),e.isRenderTargetTexture||e.isDepthTexture){var M=d.get(e),k=d.get(t),T=d.get(M.renderTarget),E=d.get(k.renderTarget),C=T.framebuffers[M.cacheKey],R=E.framebuffers[k.cacheKey];f.bindFramebuffer(h.READ_FRAMEBUFFER,C),f.bindFramebuffer(h.DRAW_FRAMEBUFFER,R);var B=h.COLOR_BUFFER_BIT;e.isDepthTexture&&(B=h.DEPTH_BUFFER_BIT),h.blitFramebuffer(i,a,n,r,o,s,n,r,B,h.NEAREST),f.bindFramebuffer(h.READ_FRAMEBUFFER,null),f.bindFramebuffer(h.DRAW_FRAMEBUFFER,null)}else e.isDataTexture?h.texSubImage2D(h.TEXTURE_2D,c,o,s,n,r,g,m,S.data):e.isCompressedTexture?h.compressedTexSubImage2D(h.TEXTURE_2D,c,o,s,S.width,S.height,g,S.data):h.texSubImage2D(h.TEXTURE_2D,c,o,s,n,r,g,m,S);h.pixelStorei(h.UNPACK_ROW_LENGTH,y),h.pixelStorei(h.UNPACK_IMAGE_HEIGHT,b),h.pixelStorei(h.UNPACK_SKIP_PIXELS,x),h.pixelStorei(h.UNPACK_SKIP_ROWS,_),h.pixelStorei(h.UNPACK_SKIP_IMAGES,w),0===c&&t.generateMipmaps&&h.generateMipmap(h.TEXTURE_2D),f.unbindTexture()}},{key:"copyFramebufferToTexture",value:function(e,t,n){var r=this.gl,i=this.backend.state,a=this.backend.get(e).textureGPU,o=n.x,s=n.y,u=n.z,l=n.w,c=!0===e.isDepthTexture||t.renderTarget&&t.renderTarget.samples>0,h=t.renderTarget?t.renderTarget.height:this.backend.gerDrawingBufferSize().y;if(c){var d,f,p=0!==o||0!==s;if(!0===e.isDepthTexture?(d=r.DEPTH_BUFFER_BIT,f=r.DEPTH_ATTACHMENT,t.stencil&&(d|=r.STENCIL_BUFFER_BIT)):(d=r.COLOR_BUFFER_BIT,f=r.COLOR_ATTACHMENT0),p){var A=this.backend.get(t.renderTarget),v=A.framebuffers[t.getCacheKey()],m=A.msaaFrameBuffer;i.bindFramebuffer(r.DRAW_FRAMEBUFFER,v),i.bindFramebuffer(r.READ_FRAMEBUFFER,m);var g=h-s-l;r.blitFramebuffer(o,g,o+u,g+l,o,g,o+u,g+l,d,r.NEAREST),i.bindFramebuffer(r.READ_FRAMEBUFFER,v),i.bindTexture(r.TEXTURE_2D,a),r.copyTexSubImage2D(r.TEXTURE_2D,0,0,0,o,g,u,l),i.unbindTexture()}else{var y=r.createFramebuffer();i.bindFramebuffer(r.DRAW_FRAMEBUFFER,y),r.framebufferTexture2D(r.DRAW_FRAMEBUFFER,f,r.TEXTURE_2D,a,0),r.blitFramebuffer(0,0,u,l,0,0,u,l,d,r.NEAREST),r.deleteFramebuffer(y)}}else i.bindTexture(r.TEXTURE_2D,a),r.copyTexSubImage2D(r.TEXTURE_2D,0,0,0,o,h-l-s,u,l),i.unbindTexture();e.generateMipmaps&&this.generateMipmaps(e),this.backend._setFramebuffer(t)}},{key:"setupRenderBufferStorage",value:function(e,t){var n=this.gl,r=t.renderTarget,i=r.samples,a=r.depthTexture,o=r.depthBuffer,s=r.stencilBuffer,u=r.width,l=r.height;if(n.bindRenderbuffer(n.RENDERBUFFER,e),o&&!s){var c=n.DEPTH_COMPONENT24;i>0?(a&&a.isDepthTexture&&a.type===n.FLOAT&&(c=n.DEPTH_COMPONENT32F),n.renderbufferStorageMultisample(n.RENDERBUFFER,i,c,u,l)):n.renderbufferStorage(n.RENDERBUFFER,c,u,l),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,e)}else o&&s&&(i>0?n.renderbufferStorageMultisample(n.RENDERBUFFER,i,n.DEPTH24_STENCIL8,u,l):n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,u,l),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,e))}},{key:"copyTextureToBuffer",value:function(){var e=ie(se().mark((function e(t,n,r,i,a,o){var s,u,l,c,h,d,f,p,A,v,m,g,y;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=this.backend,u=this.gl,l=this.backend.get(t),c=l.textureGPU,h=l.glFormat,d=l.glType,f=u.createFramebuffer(),u.bindFramebuffer(u.READ_FRAMEBUFFER,f),p=t.isCubeTexture?u.TEXTURE_CUBE_MAP_POSITIVE_X+o:u.TEXTURE_2D,u.framebufferTexture2D(u.READ_FRAMEBUFFER,u.COLOR_ATTACHMENT0,p,c,0),A=this._getTypedArrayType(d),v=this._getBytesPerTexel(d,h),m=i*a*v,g=u.createBuffer(),u.bindBuffer(u.PIXEL_PACK_BUFFER,g),u.bufferData(u.PIXEL_PACK_BUFFER,m,u.STREAM_READ),u.readPixels(n,r,i,a,h,d,0),u.bindBuffer(u.PIXEL_PACK_BUFFER,null),e.next=17,s.utils._clientWaitAsync();case 17:return y=new A(m/A.BYTES_PER_ELEMENT),u.bindBuffer(u.PIXEL_PACK_BUFFER,g),u.getBufferSubData(u.PIXEL_PACK_BUFFER,0,y),u.bindBuffer(u.PIXEL_PACK_BUFFER,null),u.deleteFramebuffer(f),e.abrupt("return",y);case 23:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i,a,o){return e.apply(this,arguments)}}()},{key:"_getTypedArrayType",value:function(e){var t=this.gl;if(e===t.UNSIGNED_BYTE)return Uint8Array;if(e===t.UNSIGNED_SHORT_4_4_4_4)return Uint16Array;if(e===t.UNSIGNED_SHORT_5_5_5_1)return Uint16Array;if(e===t.UNSIGNED_SHORT_5_6_5)return Uint16Array;if(e===t.UNSIGNED_SHORT)return Uint16Array;if(e===t.UNSIGNED_INT)return Uint32Array;if(e===t.HALF_FLOAT)return Uint16Array;if(e===t.FLOAT)return Float32Array;throw new Error("Unsupported WebGL type: ".concat(e))}},{key:"_getBytesPerTexel",value:function(e,t){var n=this.gl,r=0;return e===n.UNSIGNED_BYTE&&(r=1),e!==n.UNSIGNED_SHORT_4_4_4_4&&e!==n.UNSIGNED_SHORT_5_5_5_1&&e!==n.UNSIGNED_SHORT_5_6_5&&e!==n.UNSIGNED_SHORT&&e!==n.HALF_FLOAT||(r=2),e!==n.UNSIGNED_INT&&e!==n.FLOAT||(r=4),t===n.RGBA?4*r:t===n.RGB?3*r:t===n.ALPHA?r:void 0}}]),e}(),Y1=function(){function e(t){V(this,e),this.backend=t,this.gl=this.backend.gl,this.availableExtensions=this.gl.getSupportedExtensions(),this.extensions={}}return W(e,[{key:"get",value:function(e){var t=this.extensions[e];return void 0===t&&(t=this.gl.getExtension(e),this.extensions[e]=t),t}},{key:"has",value:function(e){return this.availableExtensions.includes(e)}}]),e}(),Q1=function(){function e(t){V(this,e),this.backend=t,this.maxAnisotropy=null}return W(e,[{key:"getMaxAnisotropy",value:function(){if(null!==this.maxAnisotropy)return this.maxAnisotropy;var e=this.backend.gl,t=this.backend.extensions;if(!0===t.has("EXT_texture_filter_anisotropic")){var n=t.get("EXT_texture_filter_anisotropic");this.maxAnisotropy=e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else this.maxAnisotropy=0;return this.maxAnisotropy}}]),e}(),J1={WEBGL_multi_draw:"WEBGL_multi_draw",WEBGL_compressed_texture_astc:"texture-compression-astc",WEBGL_compressed_texture_etc:"texture-compression-etc2",WEBGL_compressed_texture_etc1:"texture-compression-etc1",WEBGL_compressed_texture_pvrtc:"texture-compression-pvrtc",WEBKIT_WEBGL_compressed_texture_pvrtc:"texture-compression-pvrtc",WEBGL_compressed_texture_s3tc:"texture-compression-bc",EXT_texture_compression_bptc:"texture-compression-bptc",EXT_disjoint_timer_query_webgl2:"timestamp-query"},K1=function(){function e(t){V(this,e),this.gl=t.gl,this.extensions=t.extensions,this.info=t.renderer.info,this.mode=null,this.index=0,this.type=null,this.object=null}return W(e,[{key:"render",value:function(e,t){var n=this.gl,r=this.mode,i=this.object,a=this.type,o=this.info;0!==this.index?n.drawElements(r,t,a,e):n.drawArrays(r,e,t),o.update(i,t,r,1)}},{key:"renderInstances",value:function(e,t,n){var r=this.gl,i=this.mode,a=this.type,o=this.index,s=this.object,u=this.info;0!==n&&(0!==o?r.drawElementsInstanced(i,t,a,e,n):r.drawArraysInstanced(i,e,t,n),u.update(s,t,i,n))}},{key:"renderMultiDraw",value:function(e,t,n){var r=this.extensions,i=this.mode,a=this.object,o=this.info;if(0!==n){var s=r.get("WEBGL_multi_draw");if(null===s)for(var u=0;u<n;u++)this.render(e[u],t[u]);else{0!==this.index?s.multiDrawElementsWEBGL(i,t,0,this.type,e,0,n):s.multiDrawArraysWEBGL(i,e,0,t,0,n);for(var l=0,c=0;c<n;c++)l+=t[c];o.update(a,l,i,1)}}}},{key:"renderMultiDrawInstances",value:function(e,t,n,r){var i=this.extensions,a=this.mode,o=this.object,s=this.info;if(0!==n){var u=i.get("WEBGL_multi_draw");if(null===u)for(var l=0;l<n;l++)this.renderInstances(e[l],t[l],r[l]);else{0!==this.index?u.multiDrawElementsInstancedWEBGL(a,t,0,this.type,e,0,r,0,n):u.multiDrawArraysInstancedWEBGL(a,e,0,t,0,r,0,n);for(var c=0,h=0;h<n;h++)c+=t[h]*r[h];s.update(o,c,a,1)}}}}]),e}(),Z1=function(e){Y(n,e);var t=$(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return V(this,n),(e=t.call(this,r)).isWebGLBackend=!0,e}return W(n,[{key:"init",value:function(e){oe(Q(n.prototype),"init",this).call(this,e);var t=this.parameters,r=void 0!==t.context?t.context:e.domElement.getContext("webgl2");function i(t){t.preventDefault();var n={api:"WebGL",message:t.statusMessage||"Unknown reason",reason:null,originalEvent:t};e.onDeviceLost(n)}this._onContextLost=i,e.domElement.addEventListener("webglcontextlost",i,!1),this.gl=r,this.extensions=new Y1(this),this.capabilities=new Q1(this),this.attributeUtils=new q1(this),this.textureUtils=new X1(this),this.bufferRenderer=new K1(this),this.state=new V1(this),this.utils=new j1(this),this.vaoCache={},this.transformFeedbackCache={},this.discard=!1,this.trackTimestamp=!0===t.trackTimestamp,this.extensions.get("EXT_color_buffer_float"),this.extensions.get("WEBGL_clip_cull_distance"),this.extensions.get("OES_texture_float_linear"),this.extensions.get("EXT_color_buffer_half_float"),this.extensions.get("WEBGL_multisampled_render_to_texture"),this.extensions.get("WEBGL_render_shared_exponent"),this.extensions.get("WEBGL_multi_draw"),this.disjoint=this.extensions.get("EXT_disjoint_timer_query_webgl2"),this.parallel=this.extensions.get("KHR_parallel_shader_compile"),this._knownBindings=new WeakSet,this._currentContext=null}},{key:"coordinateSystem",get:function(){return hL}},{key:"getArrayBufferAsync",value:function(){var e=ie(se().mark((function e(t){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.attributeUtils.getArrayBufferAsync(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"waitForGPU",value:function(){var e=ie(se().mark((function e(){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.utils._clientWaitAsync();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initTimestampQuery",value:function(e){if(this.disjoint&&this.trackTimestamp){var t=this.get(e);if(this.queryRunning)return t.queryQueue||(t.queryQueue=[]),void t.queryQueue.push(e);t.activeQuery&&(this.gl.endQuery(this.disjoint.TIME_ELAPSED_EXT),t.activeQuery=null),t.activeQuery=this.gl.createQuery(),null!==t.activeQuery&&(this.gl.beginQuery(this.disjoint.TIME_ELAPSED_EXT,t.activeQuery),this.queryRunning=!0)}}},{key:"prepareTimestampBuffer",value:function(e){if(this.disjoint&&this.trackTimestamp){var t=this.get(e);if(t.activeQuery&&(this.gl.endQuery(this.disjoint.TIME_ELAPSED_EXT),t.gpuQueries||(t.gpuQueries=[]),t.gpuQueries.push({query:t.activeQuery}),t.activeQuery=null,this.queryRunning=!1,t.queryQueue&&t.queryQueue.length>0)){var n=t.queryQueue.shift();this.initTimestampQuery(n)}}}},{key:"resolveTimestampAsync",value:function(){var e=ie(se().mark((function e(t){var n,r,i,a,o,s,u,l,c=arguments;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=c.length>1&&void 0!==c[1]?c[1]:"render",this.disjoint&&this.trackTimestamp){e.next=3;break}return e.abrupt("return");case 3:for((r=this.get(t)).gpuQueries||(r.gpuQueries=[]),i=0;i<r.gpuQueries.length;i++)a=r.gpuQueries[i],o=this.gl.getQueryParameter(a.query,this.gl.QUERY_RESULT_AVAILABLE),s=this.gl.getParameter(this.disjoint.GPU_DISJOINT_EXT),o&&!s&&(u=this.gl.getQueryParameter(a.query,this.gl.QUERY_RESULT),l=Number(u)/1e6,this.gl.deleteQuery(a.query),r.gpuQueries.splice(i,1),i--,this.renderer.info.updateTimestamp(n,l));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getContext",value:function(){return this.gl}},{key:"beginRender",value:function(e){var t=this.gl,n=this.get(e);if(this.initTimestampQuery(e),n.previousContext=this._currentContext,this._currentContext=e,this._setFramebuffer(e),this.clear(e.clearColor,e.clearDepth,e.clearStencil,e,!1),e.viewport?this.updateViewport(e):t.viewport(0,0,t.drawingBufferWidth,t.drawingBufferHeight),e.scissor){var r=e.scissorValue,i=r.x,a=r.y,o=r.width,s=r.height;t.scissor(i,e.height-s-a,o,s)}var u=e.occlusionQueryCount;u>0&&(n.currentOcclusionQueries=n.occlusionQueries,n.currentOcclusionQueryObjects=n.occlusionQueryObjects,n.lastOcclusionObject=null,n.occlusionQueries=new Array(u),n.occlusionQueryObjects=new Array(u),n.occlusionQueryIndex=0)}},{key:"finishRender",value:function(e){var t=this.gl,n=this.state,r=this.get(e),i=r.previousContext,a=e.occlusionQueryCount;a>0&&(a>r.occlusionQueryIndex&&t.endQuery(t.ANY_SAMPLES_PASSED),this.resolveOccludedAsync(e));var o=e.textures;if(null!==o)for(var s=0;s<o.length;s++){var u=o[s];u.generateMipmaps&&this.generateMipmaps(u)}if(this._currentContext=i,null!==e.textures&&e.renderTarget){var l=this.get(e.renderTarget);if(e.renderTarget.samples>0){var c=l.framebuffers[e.getCacheKey()],h=t.COLOR_BUFFER_BIT,d=l.msaaFrameBuffer,f=e.textures;n.bindFramebuffer(t.READ_FRAMEBUFFER,d),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,c);for(var p=0;p<f.length;p++)if(e.scissor){var A=e.scissorValue,v=A.x,m=A.y,g=A.width,y=A.height,b=e.height-y-m;t.blitFramebuffer(v,b,v+g,b+y,v,b,v+g,b+y,h,t.NEAREST),t.invalidateSubFramebuffer(t.READ_FRAMEBUFFER,l.invalidationArray,v,b,g,y)}else t.blitFramebuffer(0,0,e.width,e.height,0,0,e.width,e.height,h,t.NEAREST),t.invalidateFramebuffer(t.READ_FRAMEBUFFER,l.invalidationArray)}}null!==i&&(this._setFramebuffer(i),i.viewport?this.updateViewport(i):t.viewport(0,0,t.drawingBufferWidth,t.drawingBufferHeight)),this.prepareTimestampBuffer(e)}},{key:"resolveOccludedAsync",value:function(e){var t=this.get(e),n=t.currentOcclusionQueries,r=t.currentOcclusionQueryObjects;if(n&&r){var i=new WeakSet,a=this.gl;t.currentOcclusionQueryObjects=null,t.currentOcclusionQueries=null;!function e(){for(var o=0,s=0;s<n.length;s++){var u=n[s];null!==u&&(a.getQueryParameter(u,a.QUERY_RESULT_AVAILABLE)&&(a.getQueryParameter(u,a.QUERY_RESULT)>0&&i.add(r[s]),n[s]=null,a.deleteQuery(u),o++))}o<n.length?requestAnimationFrame(e):t.occluded=i}()}}},{key:"isOccluded",value:function(e,t){var n=this.get(e);return n.occluded&&n.occluded.has(t)}},{key:"updateViewport",value:function(e){var t=this.gl,n=e.viewportValue,r=n.x,i=n.y,a=n.width,o=n.height;t.viewport(r,e.height-o-i,a,o)}},{key:"setScissorTest",value:function(e){var t=this.gl;e?t.enable(t.SCISSOR_TEST):t.disable(t.SCISSOR_TEST)}},{key:"clear",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],a=this.gl;if(null===r){var o=this.getClearColor();o.r*=o.a,o.g*=o.a,o.b*=o.a,r={textures:null,clearColorValue:o}}var s,u=0;if(e&&(u|=a.COLOR_BUFFER_BIT),t&&(u|=a.DEPTH_BUFFER_BIT),n&&(u|=a.STENCIL_BUFFER_BIT),0!==u)if(r.clearColorValue?s=r.clearColorValue:((s=this.getClearColor()).r*=s.a,s.g*=s.a,s.b*=s.a),t&&this.state.setDepthMask(!0),null===r.textures)a.clearColor(s.r,s.g,s.b,s.a),a.clear(u);else{if(i&&this._setFramebuffer(r),e)for(var l=0;l<r.textures.length;l++)a.clearBufferfv(a.COLOR,l,[s.r,s.g,s.b,s.a]);t&&n?a.clearBufferfi(a.DEPTH_STENCIL,0,1,0):t?a.clearBufferfv(a.DEPTH,0,[1]):n&&a.clearBufferiv(a.STENCIL,0,[0])}}},{key:"beginCompute",value:function(e){var t=this.state,n=this.gl;t.bindFramebuffer(n.FRAMEBUFFER,null),this.initTimestampQuery(e)}},{key:"compute",value:function(e,t,n,r){var i=this.state,a=this.gl;this.discard||(a.enable(a.RASTERIZER_DISCARD),this.discard=!0);var o=this.get(r),s=o.programGPU,u=o.transformBuffers,l=o.attributes,c=this._getVaoKey(null,l),h=this.vaoCache[c];void 0===h?this._createVao(null,l):a.bindVertexArray(h),i.useProgram(s),this._bindUniforms(n);var d=this._getTransformFeedback(u);a.bindTransformFeedback(a.TRANSFORM_FEEDBACK,d),a.beginTransformFeedback(a.POINTS),l[0].isStorageInstancedBufferAttribute?a.drawArraysInstanced(a.POINTS,0,1,t.count):a.drawArrays(a.POINTS,0,t.count),a.endTransformFeedback(),a.bindTransformFeedback(a.TRANSFORM_FEEDBACK,null);for(var f=0;f<u.length;f++){var p=u[f];p.pbo&&this.textureUtils.copyBufferToTexture(p.transformBuffer,p.pbo),p.switchBuffers()}}},{key:"finishCompute",value:function(e){var t=this.gl;this.discard=!1,t.disable(t.RASTERIZER_DISCARD),this.prepareTimestampBuffer(e),this._currentContext&&this._setFramebuffer(this._currentContext)}},{key:"draw",value:function(e){var t=e.object,n=e.pipeline,r=e.material,i=e.context,a=this.get(n).programGPU,o=this.gl,s=this.state,u=this.get(i),l=e.getDrawParameters();if(null!==l){this._bindUniforms(e.getBindings());var c=t.isMesh&&t.matrixWorld.determinant()<0;s.setMaterial(r,c),s.useProgram(a);var h=e.staticVao;if(void 0===h){var d=this._getVaoKey(e.getIndex(),e.getAttributes());if(void 0===(h=this.vaoCache[d])){var f=this._createVao(e.getIndex(),e.getAttributes());h=f.vaoGPU,f.staticVao&&(e.staticVao=h)}}o.bindVertexArray(h);var p=e.getIndex(),A=u.lastOcclusionObject;if(A!==t&&void 0!==A){if(null!==A&&!0===A.occlusionTest&&(o.endQuery(o.ANY_SAMPLES_PASSED),u.occlusionQueryIndex++),!0===t.occlusionTest){var v=o.createQuery();o.beginQuery(o.ANY_SAMPLES_PASSED,v),u.occlusionQueries[u.occlusionQueryIndex]=v,u.occlusionQueryObjects[u.occlusionQueryIndex]=t}u.lastOcclusionObject=t}var m=this.bufferRenderer;t.isPoints?m.mode=o.POINTS:t.isLineSegments?m.mode=o.LINES:t.isLine?m.mode=o.LINE_STRIP:t.isLineLoop?m.mode=o.LINE_LOOP:!0===r.wireframe?(s.setLineWidth(r.wireframeLinewidth*this.renderer.getPixelRatio()),m.mode=o.LINES):m.mode=o.TRIANGLES;var g,y=l.vertexCount,b=l.instanceCount,x=l.firstVertex;if(m.object=t,null!==p){x*=p.array.BYTES_PER_ELEMENT;var _=this.get(p);m.index=p.count,m.type=_.type}else m.index=0;t.isBatchedMesh?null!==t._multiDrawInstances?m.renderMultiDrawInstances(t._multiDrawStarts,t._multiDrawCounts,t._multiDrawCount,t._multiDrawInstances):this.hasFeature("WEBGL_multi_draw")?m.renderMultiDraw(t._multiDrawStarts,t._multiDrawCounts,t._multiDrawCount):(g="THREE.WebGLRenderer: WEBGL_multi_draw not supported.")in CL||(CL[g]=!0,console.warn(g)):b>1?m.renderInstances(x,y,b):m.render(x,y),o.bindVertexArray(null)}}},{key:"needsRenderUpdate",value:function(){return!1}},{key:"getRenderCacheKey",value:function(){return""}},{key:"createDefaultTexture",value:function(e){this.textureUtils.createDefaultTexture(e)}},{key:"createTexture",value:function(e,t){this.textureUtils.createTexture(e,t)}},{key:"updateTexture",value:function(e,t){this.textureUtils.updateTexture(e,t)}},{key:"generateMipmaps",value:function(e){this.textureUtils.generateMipmaps(e)}},{key:"destroyTexture",value:function(e){this.textureUtils.destroyTexture(e)}},{key:"copyTextureToBuffer",value:function(e,t,n,r,i,a){return this.textureUtils.copyTextureToBuffer(e,t,n,r,i,a)}},{key:"createSampler",value:function(){}},{key:"destroySampler",value:function(){}},{key:"createNodeBuilder",value:function(e,t){return new D1(e,t)}},{key:"createProgram",value:function(e){var t=this.gl,n=e.stage,r=e.code,i="fragment"===n?t.createShader(t.FRAGMENT_SHADER):t.createShader(t.VERTEX_SHADER);t.shaderSource(i,r),t.compileShader(i),this.set(e,{shaderGPU:i})}},{key:"destroyProgram",value:function(){console.warn("Abstract class.")}},{key:"createRenderPipeline",value:function(e,t){var n=this,r=this.gl,i=e.pipeline,a=i.fragmentProgram,o=i.vertexProgram,s=r.createProgram(),u=this.get(a).shaderGPU,l=this.get(o).shaderGPU;if(r.attachShader(s,u),r.attachShader(s,l),r.linkProgram(s),this.set(i,{programGPU:s,fragmentShader:u,vertexShader:l}),null!==t&&this.parallel){var c=new Promise((function(t){var a=n.parallel;!function o(){r.getProgramParameter(s,a.COMPLETION_STATUS_KHR)?(n._completeCompile(e,i),t()):requestAnimationFrame(o)}()}));t.push(c)}else this._completeCompile(e,i)}},{key:"_handleSource",value:function(e,t){for(var n=e.split("\n"),r=[],i=Math.max(t-6,0),a=Math.min(t+6,n.length),o=i;o<a;o++){var s=o+1;r.push("".concat(s===t?">":" "," ").concat(s,": ").concat(n[o]))}return r.join("\n")}},{key:"_getShaderErrors",value:function(e,t,n){var r=e.getShaderParameter(t,e.COMPILE_STATUS),i=e.getShaderInfoLog(t).trim();if(r&&""===i)return"";var a=/ERROR: 0:(\d+)/.exec(i);if(a){var o=parseInt(a[1]);return n.toUpperCase()+"\n\n"+i+"\n\n"+this._handleSource(e.getShaderSource(t),o)}return i}},{key:"_logProgramError",value:function(e,t,n){if(this.renderer.debug.checkShaderErrors){var r=this.gl,i=r.getProgramInfoLog(e).trim();if(!1===r.getProgramParameter(e,r.LINK_STATUS))if("function"===typeof this.renderer.debug.onShaderError)this.renderer.debug.onShaderError(r,e,n,t);else{var a=this._getShaderErrors(r,n,"vertex"),o=this._getShaderErrors(r,t,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(e,r.VALIDATE_STATUS)+"\n\nProgram Info Log: "+i+"\n"+a+"\n"+o)}else""!==i&&console.warn("THREE.WebGLProgram: Program Info Log:",i)}}},{key:"_completeCompile",value:function(e,t){var n=this.state,r=this.gl,i=this.get(t),a=i.programGPU,o=i.fragmentShader,s=i.vertexShader;!1===r.getProgramParameter(a,r.LINK_STATUS)&&this._logProgramError(a,o,s),n.useProgram(a);var u=e.getBindings();this._setupBindings(u,a),this.set(t,{programGPU:a})}},{key:"createComputePipeline",value:function(e,t){var n=this.state,r=this.gl,i={stage:"fragment",code:"#version 300 es\nprecision highp float;\nvoid main() {}"};this.createProgram(i);for(var a=e.computeProgram,o=r.createProgram(),s=this.get(i).shaderGPU,u=this.get(a).shaderGPU,l=a.transforms,c=[],h=[],d=0;d<l.length;d++){var f=l[d];c.push(f.varyingName),h.push(f.attributeNode)}r.attachShader(o,s),r.attachShader(o,u),r.transformFeedbackVaryings(o,c,r.SEPARATE_ATTRIBS),r.linkProgram(o),!1===r.getProgramParameter(o,r.LINK_STATUS)&&this._logProgramError(o,s,u),n.useProgram(o),this._setupBindings(t,o);for(var p=a.attributes,A=[],v=[],m=0;m<p.length;m++){var g=p[m].node.attribute;A.push(g),this.has(g)||this.attributeUtils.createAttribute(g,r.ARRAY_BUFFER)}for(var y=0;y<h.length;y++){var b=h[y].attribute;this.has(b)||this.attributeUtils.createAttribute(b,r.ARRAY_BUFFER);var x=this.get(b);v.push(x)}this.set(e,{programGPU:o,transformBuffers:v,attributes:A})}},{key:"createBindings",value:function(e,t){if(!1===this._knownBindings.has(t)){this._knownBindings.add(t);var n,r=0,i=0,a=ee(t);try{for(a.s();!(n=a.n()).done;){var o=n.value;this.set(o,{textures:i,uniformBuffers:r});var s,u=ee(o.bindings);try{for(u.s();!(s=u.n()).done;){var l=s.value;l.isUniformBuffer&&r++,l.isSampledTexture&&i++}}catch(c){u.e(c)}finally{u.f()}}}catch(c){a.e(c)}finally{a.f()}}this.updateBindings(e,t)}},{key:"updateBindings",value:function(e){var t,n=this.gl,r=this.get(e),i=r.uniformBuffers,a=r.textures,o=ee(e.bindings);try{for(o.s();!(t=o.n()).done;){var s=t.value;if(s.isUniformsGroup||s.isUniformBuffer){var u=s.buffer,l=n.createBuffer();n.bindBuffer(n.UNIFORM_BUFFER,l),n.bufferData(n.UNIFORM_BUFFER,u,n.DYNAMIC_DRAW),this.set(s,{index:i++,bufferGPU:l})}else if(s.isSampledTexture){var c=this.get(s.texture),h=c.textureGPU,d=c.glTextureType;this.set(s,{index:a++,textureGPU:h,glTextureType:d})}}}catch(f){o.e(f)}finally{o.f()}}},{key:"updateBinding",value:function(e){var t=this.gl;if(e.isUniformsGroup||e.isUniformBuffer){var n=this.get(e).bufferGPU,r=e.buffer;t.bindBuffer(t.UNIFORM_BUFFER,n),t.bufferData(t.UNIFORM_BUFFER,r,t.DYNAMIC_DRAW)}}},{key:"createIndexAttribute",value:function(e){var t=this.gl;this.attributeUtils.createAttribute(e,t.ELEMENT_ARRAY_BUFFER)}},{key:"createAttribute",value:function(e){if(!this.has(e)){var t=this.gl;this.attributeUtils.createAttribute(e,t.ARRAY_BUFFER)}}},{key:"createStorageAttribute",value:function(e){if(!this.has(e)){var t=this.gl;this.attributeUtils.createAttribute(e,t.ARRAY_BUFFER)}}},{key:"updateAttribute",value:function(e){this.attributeUtils.updateAttribute(e)}},{key:"destroyAttribute",value:function(e){this.attributeUtils.destroyAttribute(e)}},{key:"updateSize",value:function(){}},{key:"hasFeature",value:function(e){for(var t=Object.keys(J1).filter((function(t){return J1[t]===e})),n=this.extensions,r=0;r<t.length;r++)if(n.has(t[r]))return!0;return!1}},{key:"getMaxAnisotropy",value:function(){return this.capabilities.getMaxAnisotropy()}},{key:"copyTextureToTexture",value:function(e,t,n,r,i){this.textureUtils.copyTextureToTexture(e,t,n,r,i)}},{key:"copyFramebufferToTexture",value:function(e,t,n){this.textureUtils.copyFramebufferToTexture(e,t,n)}},{key:"_setFramebuffer",value:function(e){var t=this.gl,n=this.state,r=null;if(null!==e.textures){var i,a=e.renderTarget,o=this.get(a),s=a.samples,u=a.depthBuffer,l=a.stencilBuffer,c=!0===a.isWebGLCubeRenderTarget,h=o.msaaFrameBuffer,d=o.depthRenderbuffer,f=oK(e);if(c?(o.cubeFramebuffers||(o.cubeFramebuffers={}),i=o.cubeFramebuffers[f]):(o.framebuffers||(o.framebuffers={}),i=o.framebuffers[f]),void 0===i){i=t.createFramebuffer(),n.bindFramebuffer(t.FRAMEBUFFER,i);var p=e.textures;if(c){o.cubeFramebuffers[f]=i;var A=this.get(p[0]).textureGPU,v=this.renderer._activeCubeFace;t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+v,A,0)}else{o.framebuffers[f]=i;for(var m=0;m<p.length;m++){var g=p[m],y=this.get(g);y.renderTarget=e.renderTarget,y.cacheKey=f;var b=t.COLOR_ATTACHMENT0+m;t.framebufferTexture2D(t.FRAMEBUFFER,b,t.TEXTURE_2D,y.textureGPU,0)}n.drawBuffers(e,i)}if(null!==e.depthTexture){var x=this.get(e.depthTexture),_=l?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT;x.renderTarget=e.renderTarget,x.cacheKey=f,t.framebufferTexture2D(t.FRAMEBUFFER,_,t.TEXTURE_2D,x.textureGPU,0)}}if(s>0){if(void 0===h){var w=[];h=t.createFramebuffer(),n.bindFramebuffer(t.FRAMEBUFFER,h);for(var S=[],M=e.textures,k=0;k<M.length;k++){if(S[k]=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,S[k]),w.push(t.COLOR_ATTACHMENT0+k),u){var T=l?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT;w.push(T)}var E=e.textures[k],C=this.get(E);t.renderbufferStorageMultisample(t.RENDERBUFFER,s,C.glInternalFormat,e.width,e.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+k,t.RENDERBUFFER,S[k])}if(o.msaaFrameBuffer=h,o.msaaRenderbuffers=S,void 0===d){d=t.createRenderbuffer(),this.textureUtils.setupRenderBufferStorage(d,e),o.depthRenderbuffer=d;var R=l?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT;w.push(R)}o.invalidationArray=w}r=o.msaaFrameBuffer}else r=i}n.bindFramebuffer(t.FRAMEBUFFER,r)}},{key:"_getVaoKey",value:function(e,t){var n=[];null!==e&&(n+=":"+this.get(e).id);for(var r=0;r<t.length;r++){n+=":"+this.get(t[r]).id}return n}},{key:"_createVao",value:function(e,t){var n=this.gl,r=n.createVertexArray(),i="",a=!0;if(n.bindVertexArray(r),null!==e){var o=this.get(e);n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,o.bufferGPU),i+=":"+o.id}for(var s=0;s<t.length;s++){var u=t[s],l=this.get(u);i+=":"+l.id,n.bindBuffer(n.ARRAY_BUFFER,l.bufferGPU),n.enableVertexAttribArray(s),(u.isStorageBufferAttribute||u.isStorageInstancedBufferAttribute)&&(a=!1);var c=void 0,h=void 0;!0===u.isInterleavedBufferAttribute?(c=u.data.stride*l.bytesPerElement,h=u.offset*l.bytesPerElement):(c=0,h=0),l.isInteger?n.vertexAttribIPointer(s,u.itemSize,l.type,c,h):n.vertexAttribPointer(s,u.itemSize,l.type,u.normalized,c,h),u.isInstancedBufferAttribute&&!u.isInterleavedBufferAttribute?n.vertexAttribDivisor(s,u.meshPerAttribute):u.isInterleavedBufferAttribute&&u.data.isInstancedInterleavedBuffer&&n.vertexAttribDivisor(s,u.data.meshPerAttribute)}return n.bindBuffer(n.ARRAY_BUFFER,null),this.vaoCache[i]=r,{vaoGPU:r,staticVao:a}}},{key:"_getTransformFeedback",value:function(e){for(var t="",n=0;n<e.length;n++)t+=":"+e[n].id;var r=this.transformFeedbackCache[t];if(void 0!==r)return r;var i=this.gl;r=i.createTransformFeedback(),i.bindTransformFeedback(i.TRANSFORM_FEEDBACK,r);for(var a=0;a<e.length;a++){var o=e[a];i.bindBufferBase(i.TRANSFORM_FEEDBACK_BUFFER,a,o.transformBuffer)}return i.bindTransformFeedback(i.TRANSFORM_FEEDBACK,null),this.transformFeedbackCache[t]=r,r}},{key:"_setupBindings",value:function(e,t){var n,r=this.gl,i=ee(e);try{for(i.s();!(n=i.n()).done;){var a,o=ee(n.value.bindings);try{for(o.s();!(a=o.n()).done;){var s=a.value,u=this.get(s).index;if(s.isUniformsGroup||s.isUniformBuffer){var l=r.getUniformBlockIndex(t,s.name);r.uniformBlockBinding(t,l,u)}else if(s.isSampledTexture){var c=r.getUniformLocation(t,s.name);r.uniform1i(c,u)}}}catch(h){o.e(h)}finally{o.f()}}}catch(h){i.e(h)}finally{i.f()}}},{key:"_bindUniforms",value:function(e){var t,n=this.gl,r=this.state,i=ee(e);try{for(i.s();!(t=i.n()).done;){var a,o=ee(t.value.bindings);try{for(o.s();!(a=o.n()).done;){var s=a.value,u=this.get(s),l=u.index;s.isUniformsGroup||s.isUniformBuffer?r.bindBufferBase(n.UNIFORM_BUFFER,l,u.bufferGPU):s.isSampledTexture&&r.bindTexture(u.glTextureType,u.textureGPU,n.TEXTURE0+l)}}catch(c){o.e(c)}finally{o.f()}}}catch(c){i.e(c)}finally{i.f()}}},{key:"dispose",value:function(){this.renderer.domElement.removeEventListener("webglcontextlost",this._onContextLost)}}]),n}(U1),$1=function(e){Y(n,e);var t=$(n);function n(e,r){var i;return V(this,n),(i=t.call(this,e)).texture=r,i.version=r?r.version:0,i.isSampler=!0,i}return W(n)}(f1),e2=function(e){Y(n,e);var t=$(n);function n(e,r,i){var a;return V(this,n),(a=t.call(this,e,r?r.value:null)).textureNode=r,a.groupNode=i,a}return W(n,[{key:"update",value:function(){this.texture=this.textureNode.value}}]),n}($1),t2=function(e){Y(n,e);var t=$(n);function n(e,r){var i;return V(this,n),(i=t.call(this,e,r?r.array:null)).attribute=r,i.isStorageBuffer=!0,i}return W(n)}(p1),n2=0,r2=function(e){Y(n,e);var t=$(n);function n(e,r){var i;return V(this,n),(i=t.call(this,"StorageBuffer_"+n2++,e?e.value:null)).nodeUniform=e,i.access=e?e.access:TZ,i.groupNode=r,i}return W(n,[{key:"buffer",get:function(){return this.nodeUniform.value}}]),n}(t2),i2=function(e){Y(n,e);var t=$(n);function n(e){var r;V(this,n),(r=t.call(this)).device=e;return r.mipmapSampler=e.createSampler({minFilter:KK}),r.flipYSampler=e.createSampler({minFilter:ZK}),r.transferPipelines={},r.flipYPipelines={},r.mipmapVertexShaderModule=e.createShaderModule({label:"mipmapVertex",code:"\nstruct VarysStruct {\n\t@builtin( position ) Position: vec4<f32>,\n\t@location( 0 ) vTex : vec2<f32>\n};\n\n@vertex\nfn main( @builtin( vertex_index ) vertexIndex : u32 ) -> VarysStruct {\n\n\tvar Varys : VarysStruct;\n\n\tvar pos = array< vec2<f32>, 4 >(\n\t\tvec2<f32>( -1.0,  1.0 ),\n\t\tvec2<f32>(  1.0,  1.0 ),\n\t\tvec2<f32>( -1.0, -1.0 ),\n\t\tvec2<f32>(  1.0, -1.0 )\n\t);\n\n\tvar tex = array< vec2<f32>, 4 >(\n\t\tvec2<f32>( 0.0, 0.0 ),\n\t\tvec2<f32>( 1.0, 0.0 ),\n\t\tvec2<f32>( 0.0, 1.0 ),\n\t\tvec2<f32>( 1.0, 1.0 )\n\t);\n\n\tVarys.vTex = tex[ vertexIndex ];\n\tVarys.Position = vec4<f32>( pos[ vertexIndex ], 0.0, 1.0 );\n\n\treturn Varys;\n\n}\n"}),r.mipmapFragmentShaderModule=e.createShaderModule({label:"mipmapFragment",code:"\n@group( 0 ) @binding( 0 )\nvar imgSampler : sampler;\n\n@group( 0 ) @binding( 1 )\nvar img : texture_2d<f32>;\n\n@fragment\nfn main( @location( 0 ) vTex : vec2<f32> ) -> @location( 0 ) vec4<f32> {\n\n\treturn textureSample( img, imgSampler, vTex );\n\n}\n"}),r.flipYFragmentShaderModule=e.createShaderModule({label:"flipYFragment",code:"\n@group( 0 ) @binding( 0 )\nvar imgSampler : sampler;\n\n@group( 0 ) @binding( 1 )\nvar img : texture_2d<f32>;\n\n@fragment\nfn main( @location( 0 ) vTex : vec2<f32> ) -> @location( 0 ) vec4<f32> {\n\n\treturn textureSample( img, imgSampler, vec2( vTex.x, 1.0 - vTex.y ) );\n\n}\n"}),r}return W(n,[{key:"getTransferPipeline",value:function(e){var t=this.transferPipelines[e];return void 0===t&&(t=this.device.createRenderPipeline({label:"mipmap-".concat(e),vertex:{module:this.mipmapVertexShaderModule,entryPoint:"main"},fragment:{module:this.mipmapFragmentShaderModule,entryPoint:"main",targets:[{format:e}]},primitive:{topology:CK,stripIndexFormat:WK},layout:"auto"}),this.transferPipelines[e]=t),t}},{key:"getFlipYPipeline",value:function(e){var t=this.flipYPipelines[e];return void 0===t&&(t=this.device.createRenderPipeline({label:"flipY-".concat(e),vertex:{module:this.mipmapVertexShaderModule,entryPoint:"main"},fragment:{module:this.flipYFragmentShaderModule,entryPoint:"main",targets:[{format:e}]},primitive:{topology:CK,stripIndexFormat:WK},layout:"auto"}),this.flipYPipelines[e]=t),t}},{key:"flipY",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=t.format,a=t.size,o=a.width,s=a.height,u=this.getTransferPipeline(i),l=this.getFlipYPipeline(i),c=this.device.createTexture({size:{width:o,height:s,depthOrArrayLayers:1},format:i,usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.TEXTURE_BINDING}),h=e.createView({baseMipLevel:0,mipLevelCount:1,dimension:FZ,baseArrayLayer:r}),d=c.createView({baseMipLevel:0,mipLevelCount:1,dimension:FZ,baseArrayLayer:0}),f=this.device.createCommandEncoder({}),p=function(e,t,r){var i=e.getBindGroupLayout(0),a=n.device.createBindGroup({layout:i,entries:[{binding:0,resource:n.flipYSampler},{binding:1,resource:t}]}),o=f.beginRenderPass({colorAttachments:[{view:r,loadOp:zK,storeOp:FK,clearValue:[0,0,0,0]}]});o.setPipeline(e),o.setBindGroup(0,a),o.draw(4,1,0,0),o.end()};p(u,h,d),p(l,d,h),this.device.queue.submit([f.finish()]),c.destroy()}},{key:"generateMipmaps",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=this.get(e);void 0===r.useCount&&(r.useCount=0,r.layers=[]);var i=r.layers[n]||this._mipmapCreateBundles(e,t,n),a=this.device.createCommandEncoder({});this._mipmapRunBundles(a,i),this.device.queue.submit([a.finish()]),0!==r.useCount&&(r.layers[n]=i),r.useCount++}},{key:"_mipmapCreateBundles",value:function(e,t,n){for(var r=this.getTransferPipeline(t.format),i=r.getBindGroupLayout(0),a=e.createView({baseMipLevel:0,mipLevelCount:1,dimension:FZ,baseArrayLayer:n}),o=[],s=1;s<t.mipLevelCount;s++){var u=this.device.createBindGroup({layout:i,entries:[{binding:0,resource:this.mipmapSampler},{binding:1,resource:a}]}),l=e.createView({baseMipLevel:s,mipLevelCount:1,dimension:FZ,baseArrayLayer:n}),c={colorAttachments:[{view:l,loadOp:zK,storeOp:FK,clearValue:[0,0,0,0]}]},h=this.device.createRenderBundleEncoder({colorFormats:[t.format]});h.setPipeline(r),h.setBindGroup(0,u),h.draw(4,1,0,0),o.push({renderBundles:[h.finish()],passDescriptor:c}),a=l}return o}},{key:"_mipmapRunBundles",value:function(e,t){for(var n=t.length,r=0;r<n;r++){var i=t[r],a=e.beginRenderPass(i.passDescriptor);a.executeBundles(i.renderBundles),a.end()}}}]),n}(DJ),a2=(g(DI={},512,"never"),g(DI,513,"less"),g(DI,514,"equal"),g(DI,515,"less-equal"),g(DI,516,"greater"),g(DI,518,"greater-equal"),g(DI,519,"always"),g(DI,517,"not-equal"),DI),o2=[0,1,3,2,4,5],s2=function(){function e(t){V(this,e),this.backend=t,this._passUtils=null,this.defaultTexture={},this.defaultCubeTexture={},this.defaultVideoFrame=null,this.colorBuffer=null,this.depthTexture=new RU,this.depthTexture.name="depthBuffer"}return W(e,[{key:"createSampler",value:function(e){var t=this.backend,n=t.device,r=t.get(e),i={addressModeU:this._convertAddressMode(e.wrapS),addressModeV:this._convertAddressMode(e.wrapT),addressModeW:this._convertAddressMode(e.wrapR),magFilter:this._convertFilterMode(e.magFilter),minFilter:this._convertFilterMode(e.minFilter),mipmapFilter:this._convertFilterMode(e.minFilter),maxAnisotropy:1};i.magFilter===KK&&i.minFilter===KK&&i.mipmapFilter===KK&&(i.maxAnisotropy=e.anisotropy),e.isDepthTexture&&null!==e.compareFunction&&(i.compare=a2[e.compareFunction]),r.sampler=n.createSampler(i)}},{key:"createDefaultTexture",value:function(e){var t,n=u2(e);e.isCubeTexture?t=this._getDefaultCubeTextureGPU(n):e.isVideoTexture?this.backend.get(e).externalTexture=this._getDefaultVideoFrame():t=this._getDefaultTextureGPU(n),this.backend.get(e).texture=t}},{key:"createTexture",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.backend,r=n.get(e);if(r.initialized)throw new Error("WebGPUTextureUtils: Texture already initialized.");void 0===t.needsMipmaps&&(t.needsMipmaps=!1),void 0===t.levels&&(t.levels=1),void 0===t.depth&&(t.depth=1);var i=t.width,a=t.height,o=t.depth,s=t.levels;e.isFramebufferTexture&&(t.renderTarget?t.format=this.backend.utils.getCurrentColorFormat(t.renderTarget):t.format=this.backend.utils.getPreferredCanvasFormat());var u=this._getDimension(e),l=e.internalFormat||t.format||u2(e,n.device);r.format=l;var c=void 0!==t.sampleCount?t.sampleCount:1;c=n.utils.getSampleCount(c);var h=e.isRenderTargetTexture&&!e.isMultisampleRenderTargetTexture?1:c,d=GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST|GPUTextureUsage.COPY_SRC;!0===e.isStorageTexture&&(d|=GPUTextureUsage.STORAGE_BINDING),!0!==e.isCompressedTexture&&!0!==e.isCompressedArrayTexture&&(d|=GPUTextureUsage.RENDER_ATTACHMENT);var f={label:e.name,size:{width:i,height:a,depthOrArrayLayers:o},mipLevelCount:s,sampleCount:h,dimension:u,format:l,usage:d};if(e.isVideoTexture){var p=e.source.data,A=new VideoFrame(p);f.size.width=A.displayWidth,f.size.height=A.displayHeight,A.close(),r.externalTexture=p}else{if(void 0===l)return console.warn("WebGPURenderer: Texture format not supported."),this.createDefaultTexture(e);r.texture=n.device.createTexture(f)}if(e.isRenderTargetTexture&&c>1&&!e.isMultisampleRenderTargetTexture){var v=Object.assign({},f);v.label=v.label+"-msaa",v.sampleCount=c,r.msaaTexture=n.device.createTexture(v)}r.initialized=!0,r.textureDescriptorGPU=f}},{key:"destroyTexture",value:function(e){var t=this.backend,n=t.get(e);n.texture.destroy(),void 0!==n.msaaTexture&&n.msaaTexture.destroy(),t.delete(e)}},{key:"destroySampler",value:function(e){delete this.backend.get(e).sampler}},{key:"generateMipmaps",value:function(e){var t=this.backend.get(e);if(e.isCubeTexture)for(var n=0;n<6;n++)this._generateMipmaps(t.texture,t.textureDescriptorGPU,n);else for(var r=e.image.depth||1,i=0;i<r;i++)this._generateMipmaps(t.texture,t.textureDescriptorGPU,i)}},{key:"getColorBuffer",value:function(){this.colorBuffer&&this.colorBuffer.destroy();var e=this.backend,t=e.getDrawingBufferSize(),n=t.width,r=t.height;return this.colorBuffer=e.device.createTexture({label:"colorBuffer",size:{width:n,height:r,depthOrArrayLayers:1},sampleCount:e.utils.getSampleCount(e.renderer.samples),format:e.utils.getPreferredCanvasFormat(),usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.COPY_SRC}),this.colorBuffer}},{key:"getDepthBuffer",value:function(){var e,t,n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this.backend,a=i.getDrawingBufferSize(),o=a.width,s=a.height,u=this.depthTexture,l=i.get(u).texture;if(r?(e=vD,t=hD):n&&(e=AD,t=uD),void 0!==l){if(u.image.width===o&&u.image.height===s&&u.format===e&&u.type===t)return l;this.destroyTexture(u)}return u.name="depthBuffer",u.format=e,u.type=t,u.image.width=o,u.image.height=s,this.createTexture(u,{sampleCount:i.utils.getSampleCount(i.renderer.samples),width:o,height:s}),i.get(u).texture}},{key:"updateTexture",value:function(e,t){var n=this.backend.get(e),r=n.textureDescriptorGPU;if(!e.isRenderTargetTexture&&void 0!==r){if(e.isDataTexture)this._copyBufferToTexture(t.image,n.texture,r,0,e.flipY);else if(e.isDataArrayTexture||e.isData3DTexture)for(var i=0;i<t.image.depth;i++)this._copyBufferToTexture(t.image,n.texture,r,i,e.flipY,i);else if(e.isCompressedTexture||e.isCompressedArrayTexture)this._copyCompressedBufferToTexture(e.mipmaps,n.texture,r);else if(e.isCubeTexture)this._copyCubeMapToTexture(t.images,n.texture,r,e.flipY);else if(e.isVideoTexture){var a=e.source.data;n.externalTexture=a}else this._copyImageToTexture(t.image,n.texture,r,0,e.flipY);n.version=e.version,e.onUpdate&&e.onUpdate(e)}}},{key:"copyTextureToBuffer",value:function(){var e=ie(se().mark((function e(t,n,r,i,a,o){var s,u,l,c,h,d,f,p,A,v;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=this.backend.device,u=this.backend.get(t),l=u.texture,c=u.textureDescriptorGPU.format,h=this._getBytesPerTexel(c),d=i*h,d=256*Math.ceil(d/256),f=s.createBuffer({size:i*a*h,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ}),(p=s.createCommandEncoder()).copyTextureToBuffer({texture:l,origin:{x:n,y:r,z:o}},{buffer:f,bytesPerRow:d},{width:i,height:a}),A=this._getTypedArrayType(c),s.queue.submit([p.finish()]),e.next=14,f.mapAsync(GPUMapMode.READ);case 14:return v=f.getMappedRange(),e.abrupt("return",new A(v));case 16:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i,a,o){return e.apply(this,arguments)}}()},{key:"_isEnvironmentTexture",value:function(e){var t=e.mapping;return t===jI||t===WI||t===HI||t===VI}},{key:"_getDefaultTextureGPU",value:function(e){var t=this.defaultTexture[e];if(void 0===t){var n=new VL;n.minFilter=KI,n.magFilter=KI,this.createTexture(n,{width:1,height:1,format:e}),this.defaultTexture[e]=t=n}return this.backend.get(t).texture}},{key:"_getDefaultCubeTextureGPU",value:function(e){var t=this.defaultTexture[e];if(void 0===t){var n=new hU;n.minFilter=KI,n.magFilter=KI,this.createTexture(n,{width:1,height:1,depth:6}),this.defaultCubeTexture[e]=t=n}return this.backend.get(t).texture}},{key:"_getDefaultVideoFrame",value:function(){var e=this.defaultVideoFrame;if(null===e){this.defaultVideoFrame=e=new VideoFrame(new Uint8Array([0,0,0,255]),{timestamp:0,codedWidth:1,codedHeight:1,format:"RGBA"})}return e}},{key:"_copyCubeMapToTexture",value:function(e,t,n,r){for(var i=0;i<6;i++){var a=e[i],o=!0===r?o2[i]:i;a.isDataTexture?this._copyBufferToTexture(a.image,t,n,o,r):this._copyImageToTexture(a,t,n,o,r)}}},{key:"_copyImageToTexture",value:function(e,t,n,r,i){this.backend.device.queue.copyExternalImageToTexture({source:e},{texture:t,mipLevel:0,origin:{x:0,y:0,z:r}},{width:e.width,height:e.height,depthOrArrayLayers:1}),!0===i&&this._flipY(t,n,r)}},{key:"_getPassUtils",value:function(){var e=this._passUtils;return null===e&&(this._passUtils=e=new i2(this.backend.device)),e}},{key:"_generateMipmaps",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this._getPassUtils().generateMipmaps(e,t,n)}},{key:"_flipY",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this._getPassUtils().flipY(e,t,n)}},{key:"_copyBufferToTexture",value:function(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=this.backend.device,s=e.data,u=this._getBytesPerTexel(n.format),l=e.width*u;o.queue.writeTexture({texture:t,mipLevel:0,origin:{x:0,y:0,z:r}},s,{offset:e.width*e.height*u*a,bytesPerRow:l},{width:e.width,height:e.height,depthOrArrayLayers:1}),!0===i&&this._flipY(t,n,r)}},{key:"_copyCompressedBufferToTexture",value:function(e,t,n){for(var r=this.backend.device,i=this._getBlockData(n.format),a=n.size.depthOrArrayLayers>1,o=0;o<e.length;o++)for(var s=e[o],u=s.width,l=s.height,c=a?n.size.depthOrArrayLayers:1,h=Math.ceil(u/i.width)*i.byteLength,d=h*Math.ceil(l/i.height),f=0;f<c;f++)r.queue.writeTexture({texture:t,mipLevel:o,origin:{x:0,y:0,z:f}},s.data,{offset:f*d,bytesPerRow:h,rowsPerImage:Math.ceil(l/i.height)},{width:Math.ceil(u/i.width)*i.width,height:Math.ceil(l/i.height)*i.height,depthOrArrayLayers:1})}},{key:"_getBlockData",value:function(e){return e===XK.BC1RGBAUnorm||e===XK.BC1RGBAUnormSRGB?{byteLength:8,width:4,height:4}:e===XK.BC2RGBAUnorm||e===XK.BC2RGBAUnormSRGB||e===XK.BC3RGBAUnorm||e===XK.BC3RGBAUnormSRGB?{byteLength:16,width:4,height:4}:e===XK.BC4RUnorm||e===XK.BC4RSNorm?{byteLength:8,width:4,height:4}:e===XK.BC5RGUnorm||e===XK.BC5RGSnorm||e===XK.BC6HRGBUFloat||e===XK.BC6HRGBFloat||e===XK.BC7RGBAUnorm||e===XK.BC7RGBAUnormSRGB?{byteLength:16,width:4,height:4}:e===XK.ETC2RGB8Unorm||e===XK.ETC2RGB8UnormSRGB||e===XK.ETC2RGB8A1Unorm||e===XK.ETC2RGB8A1UnormSRGB?{byteLength:8,width:4,height:4}:e===XK.ETC2RGBA8Unorm||e===XK.ETC2RGBA8UnormSRGB?{byteLength:16,width:4,height:4}:e===XK.EACR11Unorm||e===XK.EACR11Snorm?{byteLength:8,width:4,height:4}:e===XK.EACRG11Unorm||e===XK.EACRG11Snorm||e===XK.ASTC4x4Unorm||e===XK.ASTC4x4UnormSRGB?{byteLength:16,width:4,height:4}:e===XK.ASTC5x4Unorm||e===XK.ASTC5x4UnormSRGB?{byteLength:16,width:5,height:4}:e===XK.ASTC5x5Unorm||e===XK.ASTC5x5UnormSRGB?{byteLength:16,width:5,height:5}:e===XK.ASTC6x5Unorm||e===XK.ASTC6x5UnormSRGB?{byteLength:16,width:6,height:5}:e===XK.ASTC6x6Unorm||e===XK.ASTC6x6UnormSRGB?{byteLength:16,width:6,height:6}:e===XK.ASTC8x5Unorm||e===XK.ASTC8x5UnormSRGB?{byteLength:16,width:8,height:5}:e===XK.ASTC8x6Unorm||e===XK.ASTC8x6UnormSRGB?{byteLength:16,width:8,height:6}:e===XK.ASTC8x8Unorm||e===XK.ASTC8x8UnormSRGB?{byteLength:16,width:8,height:8}:e===XK.ASTC10x5Unorm||e===XK.ASTC10x5UnormSRGB?{byteLength:16,width:10,height:5}:e===XK.ASTC10x6Unorm||e===XK.ASTC10x6UnormSRGB?{byteLength:16,width:10,height:6}:e===XK.ASTC10x8Unorm||e===XK.ASTC10x8UnormSRGB?{byteLength:16,width:10,height:8}:e===XK.ASTC10x10Unorm||e===XK.ASTC10x10UnormSRGB?{byteLength:16,width:10,height:10}:e===XK.ASTC12x10Unorm||e===XK.ASTC12x10UnormSRGB?{byteLength:16,width:12,height:10}:e===XK.ASTC12x12Unorm||e===XK.ASTC12x12UnormSRGB?{byteLength:16,width:12,height:12}:void 0}},{key:"_convertAddressMode",value:function(e){var t=YK;return e===YI?t=QK:e===JI&&(t=JK),t}},{key:"_convertFilterMode",value:function(e){var t=KK;return e!==KI&&e!==ZI&&e!==$I||(t=ZK),t}},{key:"_getBytesPerTexel",value:function(e){return e===XK.R8Unorm||e===XK.R8Snorm||e===XK.R8Uint||e===XK.R8Sint?1:e===XK.R16Uint||e===XK.R16Sint||e===XK.R16Float||e===XK.RG8Unorm||e===XK.RG8Snorm||e===XK.RG8Uint||e===XK.RG8Sint?2:e===XK.R32Uint||e===XK.R32Sint||e===XK.R32Float||e===XK.RG16Uint||e===XK.RG16Sint||e===XK.RG16Float||e===XK.RGBA8Unorm||e===XK.RGBA8UnormSRGB||e===XK.RGBA8Snorm||e===XK.RGBA8Uint||e===XK.RGBA8Sint||e===XK.BGRA8Unorm||e===XK.BGRA8UnormSRGB||e===XK.RGB9E5UFloat||e===XK.RGB10A2Unorm||e===XK.RG11B10UFloat||e===XK.Depth32Float||e===XK.Depth24Plus||e===XK.Depth24PlusStencil8||e===XK.Depth32FloatStencil8?4:e===XK.RG32Uint||e===XK.RG32Sint||e===XK.RG32Float||e===XK.RGBA16Uint||e===XK.RGBA16Sint||e===XK.RGBA16Float?8:e===XK.RGBA32Uint||e===XK.RGBA32Sint||e===XK.RGBA32Float?16:void 0}},{key:"_getTypedArrayType",value:function(e){return e===XK.R8Uint?Uint8Array:e===XK.R8Sint?Int8Array:e===XK.R8Unorm?Uint8Array:e===XK.R8Snorm?Int8Array:e===XK.RG8Uint?Uint8Array:e===XK.RG8Sint?Int8Array:e===XK.RG8Unorm?Uint8Array:e===XK.RG8Snorm?Int8Array:e===XK.RGBA8Uint?Uint8Array:e===XK.RGBA8Sint?Int8Array:e===XK.RGBA8Unorm?Uint8Array:e===XK.RGBA8Snorm?Int8Array:e===XK.R16Uint?Uint16Array:e===XK.R16Sint?Int16Array:e===XK.RG16Uint?Uint16Array:e===XK.RG16Sint?Int16Array:e===XK.RGBA16Uint?Uint16Array:e===XK.RGBA16Sint?Int16Array:e===XK.R16Float||e===XK.RG16Float||e===XK.RGBA16Float?Uint16Array:e===XK.R32Uint?Uint32Array:e===XK.R32Sint?Int32Array:e===XK.R32Float?Float32Array:e===XK.RG32Uint?Uint32Array:e===XK.RG32Sint?Int32Array:e===XK.RG32Float?Float32Array:e===XK.RGBA32Uint?Uint32Array:e===XK.RGBA32Sint?Int32Array:e===XK.RGBA32Float?Float32Array:e===XK.BGRA8Unorm||e===XK.BGRA8UnormSRGB?Uint8Array:e===XK.RGB10A2Unorm||e===XK.RGB9E5UFloat||e===XK.RG11B10UFloat?Uint32Array:e===XK.Depth32Float?Float32Array:e===XK.Depth24Plus||e===XK.Depth24PlusStencil8?Uint32Array:e===XK.Depth32FloatStencil8?Float32Array:void 0}},{key:"_getDimension",value:function(e){return e.isData3DTexture?OZ:LZ}}]),e}();function u2(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=e.format,i=e.type,a=e.colorSpace;if(!0===e.isCompressedTexture||!0===e.isCompressedArrayTexture)switch(r){case wD:t=a===iL?XK.BC1RGBAUnormSRGB:XK.BC1RGBAUnorm;break;case SD:t=a===iL?XK.BC2RGBAUnormSRGB:XK.BC2RGBAUnorm;break;case MD:t=a===iL?XK.BC3RGBAUnormSRGB:XK.BC3RGBAUnorm;break;case BD:t=a===iL?XK.ETC2RGB8UnormSRGB:XK.ETC2RGB8Unorm;break;case PD:t=a===iL?XK.ETC2RGBA8UnormSRGB:XK.ETC2RGBA8Unorm;break;case ND:t=a===iL?XK.ASTC4x4UnormSRGB:XK.ASTC4x4Unorm;break;case ID:t=a===iL?XK.ASTC5x4UnormSRGB:XK.ASTC5x4Unorm;break;case DD:t=a===iL?XK.ASTC5x5UnormSRGB:XK.ASTC5x5Unorm;break;case LD:t=a===iL?XK.ASTC6x5UnormSRGB:XK.ASTC6x5Unorm;break;case OD:t=a===iL?XK.ASTC6x6UnormSRGB:XK.ASTC6x6Unorm;break;case FD:t=a===iL?XK.ASTC8x5UnormSRGB:XK.ASTC8x5Unorm;break;case UD:t=a===iL?XK.ASTC8x6UnormSRGB:XK.ASTC8x6Unorm;break;case zD:t=a===iL?XK.ASTC8x8UnormSRGB:XK.ASTC8x8Unorm;break;case GD:t=a===iL?XK.ASTC10x5UnormSRGB:XK.ASTC10x5Unorm;break;case qD:t=a===iL?XK.ASTC10x6UnormSRGB:XK.ASTC10x6Unorm;break;case HD:t=a===iL?XK.ASTC10x8UnormSRGB:XK.ASTC10x8Unorm;break;case VD:t=a===iL?XK.ASTC10x10UnormSRGB:XK.ASTC10x10Unorm;break;case jD:t=a===iL?XK.ASTC12x10UnormSRGB:XK.ASTC12x10Unorm;break;case WD:t=a===iL?XK.ASTC12x12UnormSRGB:XK.ASTC12x12Unorm;break;default:console.error("WebGPURenderer: Unsupported texture format.",r)}else switch(r){case pD:switch(i){case iD:t=XK.RGBA8Snorm;break;case aD:t=XK.RGBA16Sint;break;case oD:t=XK.RGBA16Uint;break;case uD:t=XK.RGBA32Uint;break;case sD:t=XK.RGBA32Sint;break;case rD:t=a===iL?XK.RGBA8UnormSRGB:XK.RGBA8Unorm;break;case cD:t=XK.RGBA16Float;break;case lD:t=XK.RGBA32Float;break;default:console.error("WebGPURenderer: Unsupported texture type with RGBAFormat.",i)}break;case fD:if(i===dD)t=XK.RGB9E5UFloat;else console.error("WebGPURenderer: Unsupported texture type with RGBFormat.",i);break;case mD:switch(i){case iD:t=XK.R8Snorm;break;case aD:t=XK.R16Sint;break;case oD:t=XK.R16Uint;break;case uD:t=XK.R32Uint;break;case sD:t=XK.R32Sint;break;case rD:t=XK.R8Unorm;break;case cD:t=XK.R16Float;break;case lD:t=XK.R32Float;break;default:console.error("WebGPURenderer: Unsupported texture type with RedFormat.",i)}break;case yD:switch(i){case iD:t=XK.RG8Snorm;break;case aD:t=XK.RG16Sint;break;case oD:t=XK.RG16Uint;break;case uD:t=XK.RG32Uint;break;case sD:t=XK.RG32Sint;break;case rD:t=XK.RG8Unorm;break;case cD:t=XK.RG16Float;break;case lD:t=XK.RG32Float;break;default:console.error("WebGPURenderer: Unsupported texture type with RGFormat.",i)}break;case AD:switch(i){case oD:t=XK.Depth16Unorm;break;case uD:t=XK.Depth24Plus;break;case lD:t=XK.Depth32Float;break;default:console.error("WebGPURenderer: Unsupported texture type with DepthFormat.",i)}break;case vD:switch(i){case hD:t=XK.Depth24PlusStencil8;break;case lD:n&&!1===n.features.has(jZ.Depth32FloatStencil8)&&console.error('WebGPURenderer: Depth textures with DepthStencilFormat + FloatType can only be used with the "depth32float-stencil8" GPU feature.'),t=XK.Depth32FloatStencil8;break;default:console.error("WebGPURenderer: Unsupported texture type with DepthStencilFormat.",i)}break;case gD:switch(i){case sD:t=XK.R32Sint;break;case uD:t=XK.R32Uint;break;default:console.error("WebGPURenderer: Unsupported texture type with RedIntegerFormat.",i)}break;case bD:switch(i){case sD:t=XK.RG32Sint;break;case uD:t=XK.RG32Uint;break;default:console.error("WebGPURenderer: Unsupported texture type with RGIntegerFormat.",i)}break;case xD:switch(i){case sD:t=XK.RGBA32Sint;break;case uD:t=XK.RGBA32Uint;break;default:console.error("WebGPURenderer: Unsupported texture type with RGBAIntegerFormat.",i)}break;default:console.error("WebGPURenderer: Unsupported texture format.",r)}return t}var l2=/^[fn]*\s*([a-z_0-9]+)?\s*\(([\s\S]*?)\)\s*[\-\>]*\s*([a-z_0-9]+(?:<[\s\S]+?>)?)/i,c2=/([a-z_0-9]+)\s*:\s*([a-z_0-9]+(?:<[\s\S]+?>)?)/gi,h2={f32:"float",i32:"int",u32:"uint",bool:"bool","vec2<f32>":"vec2","vec2<i32>":"ivec2","vec2<u32>":"uvec2","vec2<bool>":"bvec2",vec2f:"vec2",vec2i:"ivec2",vec2u:"uvec2",vec2b:"bvec2","vec3<f32>":"vec3","vec3<i32>":"ivec3","vec3<u32>":"uvec3","vec3<bool>":"bvec3",vec3f:"vec3",vec3i:"ivec3",vec3u:"uvec3",vec3b:"bvec3","vec4<f32>":"vec4","vec4<i32>":"ivec4","vec4<u32>":"uvec4","vec4<bool>":"bvec4",vec4f:"vec4",vec4i:"ivec4",vec4u:"uvec4",vec4b:"bvec4","mat2x2<f32>":"mat2",mat2x2f:"mat2","mat3x3<f32>":"mat3",mat3x3f:"mat3","mat4x4<f32>":"mat4",mat4x4f:"mat4",sampler:"sampler",texture_1d:"texture",texture_2d:"texture",texture_2d_array:"texture",texture_multisampled_2d:"cubeTexture",texture_depth_2d:"depthTexture",texture_3d:"texture3D",texture_cube:"cubeTexture",texture_cube_array:"cubeTexture",texture_storage_1d:"storageTexture",texture_storage_2d:"storageTexture",texture_storage_2d_array:"storageTexture",texture_storage_3d:"storageTexture"},d2=function(e){Y(n,e);var t=$(n);function n(e){var r;V(this,n);var i=function(e){var t=(e=e.trim()).match(l2);if(null!==t&&4===t.length){for(var n=t[2],r=[],i=null;null!==(i=c2.exec(n));)r.push({name:i[1],type:i[2]});for(var a=[],o=0;o<r.length;o++){var s=r[o],u=s.name,l=s.type,c=l;c.startsWith("ptr")?c="pointer":(c.startsWith("texture")&&(c=l.split("<")[0]),c=h2[c]),a.push(new D0(c,u))}var h=e.substring(t[0].length),d=t[3]||"void",f=void 0!==t[1]?t[1]:"";return{type:h2[d]||d,inputs:a,name:f,inputsCode:n,blockCode:h,outputType:d}}throw new Error("FunctionNode: Function is not a WGSL code.")}(e),a=i.type,o=i.inputs,s=i.name,u=i.inputsCode,l=i.blockCode,c=i.outputType;return(r=t.call(this,a,o,s)).inputsCode=u,r.blockCode=l,r.outputType=c,r}return W(n,[{key:"getCode",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.name,t="void"!==this.outputType?"-> "+this.outputType:"";return"fn ".concat(e," ( ").concat(this.inputsCode.trim()," ) ").concat(t)+this.blockCode}}]),n}(X0),f2=function(e){Y(n,e);var t=$(n);function n(){return V(this,n),t.apply(this,arguments)}return W(n,[{key:"parseFunction",value:function(e){return new d2(e)}}]),n}(W0),p2=self.GPUShaderStage,A2={vertex:p2?p2.VERTEX:1,fragment:p2?p2.FRAGMENT:2,compute:p2?p2.COMPUTE:4},v2={instance:!0,swizzleAssign:!1,storageBuffer:!0},m2={"^^":"tsl_xor"},g2={float:"f32",int:"i32",uint:"u32",bool:"bool",color:"vec3<f32>",vec2:"vec2<f32>",ivec2:"vec2<i32>",uvec2:"vec2<u32>",bvec2:"vec2<bool>",vec3:"vec3<f32>",ivec3:"vec3<i32>",uvec3:"vec3<u32>",bvec3:"vec3<bool>",vec4:"vec4<f32>",ivec4:"vec4<i32>",uvec4:"vec4<u32>",bvec4:"vec4<bool>",mat2:"mat2x2<f32>",mat3:"mat3x3<f32>",mat4:"mat4x4<f32>"},y2={tsl_xor:new o$("fn tsl_xor( a : bool, b : bool ) -> bool { return ( a || b ) && !( a && b ); }"),mod_float:new o$("fn tsl_mod_float( x : f32, y : f32 ) -> f32 { return x - y * floor( x / y ); }"),mod_vec2:new o$("fn tsl_mod_vec2( x : vec2f, y : vec2f ) -> vec2f { return x - y * floor( x / y ); }"),mod_vec3:new o$("fn tsl_mod_vec3( x : vec3f, y : vec3f ) -> vec3f { return x - y * floor( x / y ); }"),mod_vec4:new o$("fn tsl_mod_vec4( x : vec4f, y : vec4f ) -> vec4f { return x - y * floor( x / y ); }"),equals_bool:new o$("fn tsl_equals_bool( a : bool, b : bool ) -> bool { return a == b; }"),equals_bvec2:new o$("fn tsl_equals_bvec2( a : vec2f, b : vec2f ) -> vec2<bool> { return vec2<bool>( a.x == b.x, a.y == b.y ); }"),equals_bvec3:new o$("fn tsl_equals_bvec3( a : vec3f, b : vec3f ) -> vec3<bool> { return vec3<bool>( a.x == b.x, a.y == b.y, a.z == b.z ); }"),equals_bvec4:new o$("fn tsl_equals_bvec4( a : vec4f, b : vec4f ) -> vec4<bool> { return vec4<bool>( a.x == b.x, a.y == b.y, a.z == b.z, a.w == b.w ); }"),repeatWrapping:new o$("\nfn tsl_repeatWrapping( uv : vec2<f32>, dimension : vec2<u32> ) -> vec2<u32> {\n\n\tlet uvScaled = vec2<u32>( uv * vec2<f32>( dimension ) );\n\n\treturn ( ( uvScaled % dimension ) + dimension ) % dimension;\n\n}\n"),biquadraticTexture:new o$("\nfn tsl_biquadraticTexture( map : texture_2d<f32>, coord : vec2f, level : i32 ) -> vec4f {\n\n\tlet iRes = vec2i( textureDimensions( map, level ) );\n\tlet res = vec2f( iRes );\n\n\tlet uvScaled = coord * res;\n\tlet uvWrapping = ( ( uvScaled % res ) + res ) % res;\n\n\t// https://www.shadertoy.com/view/WtyXRy\n\n\tlet uv = uvWrapping - 0.5;\n\tlet iuv = floor( uv );\n\tlet f = fract( uv );\n\n\tlet rg1 = textureLoad( map, vec2i( iuv + vec2( 0.5, 0.5 ) ) % iRes, level );\n\tlet rg2 = textureLoad( map, vec2i( iuv + vec2( 1.5, 0.5 ) ) % iRes, level );\n\tlet rg3 = textureLoad( map, vec2i( iuv + vec2( 0.5, 1.5 ) ) % iRes, level );\n\tlet rg4 = textureLoad( map, vec2i( iuv + vec2( 1.5, 1.5 ) ) % iRes, level );\n\n\treturn mix( mix( rg1, rg2, f.x ), mix( rg3, rg4, f.x ), f.y );\n\n}\n")},b2={dFdx:"dpdx",dFdy:"- dpdy",mod_float:"tsl_mod_float",mod_vec2:"tsl_mod_vec2",mod_vec3:"tsl_mod_vec3",mod_vec4:"tsl_mod_vec4",equals_bool:"tsl_equals_bool",equals_bvec2:"tsl_equals_bvec2",equals_bvec3:"tsl_equals_bvec3",equals_bvec4:"tsl_equals_bvec4",inversesqrt:"inverseSqrt",bitcast:"bitcast<f32>"};/Windows/g.test(navigator.userAgent)&&(y2.pow_float=new o$("fn tsl_pow_float( a : f32, b : f32 ) -> f32 { return select( -pow( -a, b ), pow( a, b ), a > 0.0 ); }"),y2.pow_vec2=new o$("fn tsl_pow_vec2( a : vec2f, b : vec2f ) -> vec2f { return vec2f( tsl_pow_float( a.x, b.x ), tsl_pow_float( a.y, b.y ) ); }",[y2.pow_float]),y2.pow_vec3=new o$("fn tsl_pow_vec3( a : vec3f, b : vec3f ) -> vec3f { return vec3f( tsl_pow_float( a.x, b.x ), tsl_pow_float( a.y, b.y ), tsl_pow_float( a.z, b.z ) ); }",[y2.pow_float]),y2.pow_vec4=new o$("fn tsl_pow_vec4( a : vec4f, b : vec4f ) -> vec4f { return vec4f( tsl_pow_float( a.x, b.x ), tsl_pow_float( a.y, b.y ), tsl_pow_float( a.z, b.z ), tsl_pow_float( a.w, b.w ) ); }",[y2.pow_float]),b2.pow_float="tsl_pow_float",b2.pow_vec2="tsl_pow_vec2",b2.pow_vec3="tsl_pow_vec3",b2.pow_vec4="tsl_pow_vec4");var x2="";!0!==/Firefox|Deno/g.test(navigator.userAgent)&&(x2+="diagnostic( off, derivative_uniformity );\n");var _2=function(e){Y(n,e);var t=$(n);function n(e,r){var i;return V(this,n),(i=t.call(this,e,r,new f2)).uniformGroups={},i.builtins={},i.directives={},i.scopedArrays=new Map,i}return W(n,[{key:"needsToWorkingColorSpace",value:function(e){return!0===e.isVideoTexture&&e.colorSpace!==rL}},{key:"_generateTextureSample",value:function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.shaderStage;return"fragment"===i?r?"textureSample( ".concat(t,", ").concat(t,"_sampler, ").concat(n,", ").concat(r," )"):"textureSample( ".concat(t,", ").concat(t,"_sampler, ").concat(n," )"):this.isFilteredTexture(e)?this.generateFilteredTexture(e,t,n):this.generateTextureLod(e,t,n,"0")}},{key:"_generateVideoSample",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.shaderStage;if("fragment"===n)return"textureSampleBaseClampToEdge( ".concat(e,", ").concat(e,"_sampler, vec2<f32>( ").concat(t,".x, 1.0 - ").concat(t,".y ) )");console.error("WebGPURenderer: THREE.VideoTexture does not support ".concat(n," shader."))}},{key:"_generateTextureSampleLevel",value:function(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:this.shaderStage;return"fragment"===a&&!1===this.isUnfilterable(e)?"textureSampleLevel( ".concat(t,", ").concat(t,"_sampler, ").concat(n,", ").concat(r," )"):this.isFilteredTexture(e)?this.generateFilteredTexture(e,t,n,r):this.generateTextureLod(e,t,n,r)}},{key:"generateFilteredTexture",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"0";return this._include("biquadraticTexture"),"tsl_biquadraticTexture( ".concat(t,", ").concat(n,", i32( ").concat(r," ) )")}},{key:"generateTextureLod",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"0";this._include("repeatWrapping");var i=!0===e.isMultisampleRenderTargetTexture?"textureDimensions( ".concat(t," )"):"textureDimensions( ".concat(t,", 0 )");return"textureLoad( ".concat(t,", tsl_repeatWrapping( ").concat(n,", ").concat(i," ), i32( ").concat(r," ) )")}},{key:"generateTextureLoad",value:function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"0u";return r?"textureLoad( ".concat(t,", ").concat(n,", ").concat(r,", ").concat(i," )"):"textureLoad( ".concat(t,", ").concat(n,", ").concat(i," )")}},{key:"generateTextureStore",value:function(e,t,n,r){return"textureStore( ".concat(t,", ").concat(n,", ").concat(r," )")}},{key:"isUnfilterable",value:function(e){return"float"!==this.getComponentTypeFromTexture(e)||!this.isAvailable("float32Filterable")&&!0===e.isDataTexture&&e.type===lD||!0===e.isMultisampleRenderTargetTexture}},{key:"generateTexture",value:function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.shaderStage;return!0===e.isVideoTexture?this._generateVideoSample(t,n,i):this.isUnfilterable(e)?this.generateTextureLod(e,t,n,"0",r,i):this._generateTextureSample(e,t,n,r,i)}},{key:"generateTextureGrad",value:function(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:this.shaderStage;if("fragment"===a)return"textureSampleGrad( ".concat(t,", ").concat(t,"_sampler, ").concat(n,",  ").concat(r[0],", ").concat(r[1]," )");console.error("WebGPURenderer: THREE.TextureNode.gradient() does not support ".concat(a," shader."))}},{key:"generateTextureCompare",value:function(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:this.shaderStage;if("fragment"===a)return"textureSampleCompare( ".concat(t,", ").concat(t,"_sampler, ").concat(n,", ").concat(r," )");console.error("WebGPURenderer: THREE.DepthTexture.compareFunction() does not support ".concat(a," shader."))}},{key:"generateTextureLevel",value:function(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:this.shaderStage;return!0===e.isVideoTexture?this._generateVideoSample(t,n,a):this._generateTextureSampleLevel(e,t,n,r,i,a)}},{key:"generateTextureBias",value:function(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:this.shaderStage;if("fragment"===a)return"textureSampleBias( ".concat(t,", ").concat(t,"_sampler, ").concat(n,", ").concat(r," )");console.error("WebGPURenderer: THREE.TextureNode.biasNode does not support ".concat(a," shader."))}},{key:"getPropertyName",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.shaderStage;if(!0===e.isNodeVarying&&!0===e.needsInterpolation){if("vertex"===t)return"varyings.".concat(e.name)}else if(!0===e.isNodeUniform){var r=e.name,i=e.type;return"texture"===i||"cubeTexture"===i||"storageTexture"===i||"texture3D"===i?r:"buffer"===i||"storageBuffer"===i||"indirectStorageBuffer"===i?"NodeBuffer_".concat(e.id,".").concat(r):e.groupNode.name+"."+r}return oe(Q(n.prototype),"getPropertyName",this).call(this,e)}},{key:"getOutputStructName",value:function(){return"output"}},{key:"_getUniformGroupCount",value:function(e){return Object.keys(this.uniforms[e]).length}},{key:"getFunctionOperator",value:function(e){var t=m2[e];return void 0!==t?(this._include(t),t):null}},{key:"getStorageAccess",value:function(e){if(e.isStorageTextureNode)switch(e.access){case RZ:return"read";case CZ:return"write";default:return"read_write"}else switch(e.access){case TZ:return"read_write";case EZ:return"read";default:return"write"}}},{key:"getUniformFromNode",value:function(e,t,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=oe(Q(n.prototype),"getUniformFromNode",this).call(this,e,t,r,i),o=this.getDataFromNode(e,r,this.globalCache);if(void 0===o.uniformGPU){var s,u=e.groupNode,l=u.name,c=this.getBindGroupArray(l,r);if("texture"===t||"cubeTexture"===t||"storageTexture"===t||"texture3D"===t){var h=null;if("texture"===t||"storageTexture"===t?h=new E1(a.name,a.node,u,e.access?e.access:null):"cubeTexture"===t?h=new C1(a.name,a.node,u,e.access?e.access:null):"texture3D"===t&&(h=new R1(a.name,a.node,u,e.access?e.access:null)),h.store=!0===e.isStorageTextureNode,h.setVisibility(A2[r]),"fragment"===r&&!1===this.isUnfilterable(e.value)&&!1===h.store){var d=new e2("".concat(a.name,"_sampler"),a.node,u);d.setVisibility(A2[r]),c.push(d,h),s=[d,h]}else c.push(h),s=[h]}else if("buffer"===t||"storageBuffer"===t||"indirectStorageBuffer"===t){var f="buffer"===t?m1:r2,p=new f(e,u);p.setVisibility(A2[r]),c.push(p),s=p}else{var A=this.uniformGroups[r]||(this.uniformGroups[r]={}),v=A[l];void 0===v&&((v=new M1(l,u)).setVisibility(A2[r]),A[l]=v,c.push(v)),s=this.getNodeUniform(a,t),v.addUniform(s)}o.uniformGPU=s}return a}},{key:"getBuiltin",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.shaderStage,i=this.builtins[r]||(this.builtins[r]=new Map);return!1===i.has(e)&&i.set(e,{name:e,property:t,type:n}),t}},{key:"hasBuiltin",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.shaderStage;return void 0!==this.builtins[t]&&this.builtins[t].has(e)}},{key:"getVertexIndex",value:function(){return"vertex"===this.shaderStage?this.getBuiltin("vertex_index","vertexIndex","u32","attribute"):"vertexIndex"}},{key:"buildFunctionCode",value:function(e){var t,n=e.layout,r=this.flowShaderNode(e),i=[],a=ee(n.inputs);try{for(a.s();!(t=a.n()).done;){var o=t.value;i.push(o.name+" : "+this.getType(o.type))}}catch(u){a.e(u)}finally{a.f()}var s="fn ".concat(n.name,"( ").concat(i.join(", ")," ) -> ").concat(this.getType(n.type)," {\n").concat(r.vars,"\n").concat(r.code,"\n");return r.result&&(s+="\treturn ".concat(r.result,";\n")),s+="\n}\n"}},{key:"getInstanceIndex",value:function(){return"vertex"===this.shaderStage?this.getBuiltin("instance_index","instanceIndex","u32","attribute"):"instanceIndex"}},{key:"getInvocationLocalIndex",value:function(){return this.getBuiltin("local_invocation_index","invocationLocalIndex","u32","attribute")}},{key:"getSubgroupSize",value:function(){return this.enableSubGroups(),this.getBuiltin("subgroup_size","subgroupSize","u32","attribute")}},{key:"getInvocationSubgroupIndex",value:function(){return this.enableSubGroups(),this.getBuiltin("subgroup_invocation_id","invocationSubgroupIndex","u32","attribute")}},{key:"getSubgroupIndex",value:function(){return this.enableSubGroups(),this.getBuiltin("subgroup_id","subgroupIndex","u32","attribute")}},{key:"getDrawIndex",value:function(){return null}},{key:"getFrontFacing",value:function(){return this.getBuiltin("front_facing","isFront","bool")}},{key:"getFragCoord",value:function(){return this.getBuiltin("position","fragCoord","vec4<f32>")+".xy"}},{key:"getFragDepth",value:function(){return"output."+this.getBuiltin("frag_depth","depth","f32","output")}},{key:"isFlipY",value:function(){return!1}},{key:"enableDirective",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.shaderStage,n=this.directives[t]||(this.directives[t]=new Set);n.add(e)}},{key:"getDirectives",value:function(e){var t=[],n=this.directives[e];if(void 0!==n){var r,i=ee(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;t.push("enable ".concat(a,";"))}}catch(o){i.e(o)}finally{i.f()}}return t.join("\n")}},{key:"enableSubGroups",value:function(){this.enableDirective("subgroups")}},{key:"enableSubgroupsF16",value:function(){this.enableDirective("subgroups-f16")}},{key:"enableClipDistances",value:function(){this.enableDirective("clip_distances")}},{key:"enableShaderF16",value:function(){this.enableDirective("f16")}},{key:"enableDualSourceBlending",value:function(){this.enableDirective("dual_source_blending")}},{key:"getBuiltins",value:function(e){var t=[],n=this.builtins[e];if(void 0!==n){var r,i=ee(n.values());try{for(i.s();!(r=i.n()).done;){var a=r.value,o=a.name,s=a.property,u=a.type;t.push("@builtin( ".concat(o," ) ").concat(s," : ").concat(u))}}catch(l){i.e(l)}finally{i.f()}}return t.join(",\n\t")}},{key:"getScopedArray",value:function(e,t,n,r){return!1===this.scopedArrays.has(e)&&this.scopedArrays.set(e,{name:e,scope:t,bufferType:n,bufferCount:r}),e}},{key:"getScopedArrays",value:function(e){if("compute"===e){var t,n=[],r=ee(this.scopedArrays.values());try{for(r.s();!(t=r.n()).done;){var i=t.value,a=i.name,o=i.scope,s=i.bufferType,u=i.bufferCount,l=this.getType(s);n.push("var<".concat(o,"> ").concat(a,": array< ").concat(l,", ").concat(u," >;"))}}catch(c){r.e(c)}finally{r.f()}return n.join("\n")}}},{key:"getAttributes",value:function(e){var t=[];if("compute"===e&&(this.getBuiltin("global_invocation_id","id","vec3<u32>","attribute"),this.getBuiltin("workgroup_id","workgroupId","vec3<u32>","attribute"),this.getBuiltin("local_invocation_id","localId","vec3<u32>","attribute"),this.getBuiltin("num_workgroups","numWorkgroups","vec3<u32>","attribute"),this.renderer.hasFeature("subgroups")&&(this.enableDirective("subgroups",e),this.getBuiltin("subgroup_size","subgroupSize","u32","attribute"))),"vertex"===e||"compute"===e){var n=this.getBuiltins("attribute");n&&t.push(n);for(var r=this.getAttributesArray(),i=0,a=r.length;i<a;i++){var o=r[i],s=o.name,u=this.getType(o.type);t.push("@location( ".concat(i," ) ").concat(s," : ").concat(u))}}return t.join(",\n\t")}},{key:"getStructMembers",value:function(e){for(var t=[],n=e.getMemberTypes(),r=0;r<n.length;r++){var i=n[r];t.push("\t@location( ".concat(r," ) m").concat(r," : ").concat(i,"<f32>"))}var a=this.getBuiltins("output");return a&&t.push("\t"+a),t.join(",\n")}},{key:"getStructs",value:function(e){for(var t=[],n=this.structs[e],r=0,i=n.length;r<i;r++){var a=n[r],o=a.name,s="struct ".concat(o," {\n");s+=this.getStructMembers(a),s+="\n}",t.push(s),t.push("\nvar<private> output : ".concat(o,";\n\n"))}return t.join("\n\n")}},{key:"getVar",value:function(e,t){return"var ".concat(t," : ").concat(this.getType(e))}},{key:"getVars",value:function(e){var t=[],n=this.vars[e];if(void 0!==n){var r,i=ee(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;t.push("\t".concat(this.getVar(a.type,a.name),";"))}}catch(o){i.e(o)}finally{i.f()}}return"\n".concat(t.join("\n"),"\n")}},{key:"getVaryings",value:function(e){var t=[];if("vertex"===e&&this.getBuiltin("position","Vertex","vec4<f32>","vertex"),"vertex"===e||"fragment"===e)for(var n=this.varyings,r=this.vars[e],i=0;i<n.length;i++){var a=n[i];if(a.needsInterpolation){var o="@location( ".concat(i," )");/^(int|uint|ivec|uvec)/.test(a.type)&&(o+=" @interpolate( flat )"),t.push("".concat(o," ").concat(a.name," : ").concat(this.getType(a.type)))}else"vertex"===e&&!1===r.includes(a)&&r.push(a)}var s=this.getBuiltins(e);s&&t.push(s);var u=t.join(",\n\t");return"vertex"===e?this._getWGSLStruct("VaryingsStruct","\t"+u):u}},{key:"getUniforms",value:function(e){var t,n=[],r=[],i=[],a={},o=ee(this.uniforms[e]);try{for(o.s();!(t=o.n()).done;){var s=t.value,u=s.groupNode.name,l=this.bindingsIndexes[u];if("texture"===s.type||"cubeTexture"===s.type||"storageTexture"===s.type||"texture3D"===s.type){var c=s.node.value;"fragment"===e&&!1===this.isUnfilterable(c)&&!0!==s.node.isStorageTextureNode&&(!0===c.isDepthTexture&&null!==c.compareFunction?n.push("@binding( ".concat(l.binding++," ) @group( ").concat(l.group," ) var ").concat(s.name,"_sampler : sampler_comparison;")):n.push("@binding( ".concat(l.binding++," ) @group( ").concat(l.group," ) var ").concat(s.name,"_sampler : sampler;")));var h=void 0,d="";if(!0===c.isMultisampleRenderTargetTexture&&(d="_multisampled"),!0===c.isCubeTexture)h="texture_cube<f32>";else if(!0===c.isDataArrayTexture||!0===c.isCompressedArrayTexture)h="texture_2d_array<f32>";else if(!0===c.isDepthTexture)h="texture_depth".concat(d,"_2d");else if(!0===c.isVideoTexture)h="texture_external";else if(!0===c.isData3DTexture)h="texture_3d<f32>";else if(!0===s.node.isStorageTextureNode){var f=u2(c),p=this.getStorageAccess(s.node);h="texture_storage_2d<".concat(f,", ").concat(p,">")}else{var A=this.getComponentTypeFromTexture(c).charAt(0);h="texture".concat(d,"_2d<").concat(A,"32>")}n.push("@binding( ".concat(l.binding++," ) @group( ").concat(l.group," ) var ").concat(s.name," : ").concat(h,";"))}else if("buffer"===s.type||"storageBuffer"===s.type||"indirectStorageBuffer"===s.type){var v=s.node,m=this.getType(v.bufferType),g=v.bufferCount,y=g>0&&"buffer"===s.type?", "+g:"",b=v.isAtomic?"atomic<".concat(m,">"):"".concat(m),x="\t".concat(s.name," : array< ").concat(b).concat(y," >\n"),_=v.isStorageBufferNode?"storage, ".concat(this.getStorageAccess(v)):"uniform";r.push(this._getWGSLStructBinding("NodeBuffer_"+v.id,x,_,l.binding++,l.group))}else{var w=this.getType(this.getVectorType(s.type)),S=s.groupNode.name;(a[S]||(a[S]={index:l.binding++,id:l.group,snippets:[]})).snippets.push("\t".concat(s.name," : ").concat(w))}}}catch(E){o.e(E)}finally{o.f()}for(var M in a){var k=a[M];i.push(this._getWGSLStructBinding(M,k.snippets.join(",\n"),"uniform",k.index,k.id))}var T=n.join("\n");return T+=r.join("\n"),T+=i.join("\n")}},{key:"buildCode",value:function(){var e=null!==this.material?{fragment:{},vertex:{}}:{compute:{}};for(var t in this.sortBindingGroups(),e){var n=e[t];n.uniforms=this.getUniforms(t),n.attributes=this.getAttributes(t),n.varyings=this.getVaryings(t),n.structs=this.getStructs(t),n.vars=this.getVars(t),n.codes=this.getCodes(t),n.directives=this.getDirectives(t),n.scopedArrays=this.getScopedArrays(t);var r="// code\n\n";r+=this.flowCode[t];var i,a=this.flowNodes[t],o=a[a.length-1],s=o.outputNode,u=void 0!==s&&!0===s.isOutputStructNode,l=ee(a);try{for(l.s();!(i=l.n()).done;){var c=i.value,h=this.getFlowData(c),d=c.name;if(d&&(r.length>0&&(r+="\n"),r+="\t// flow -> ".concat(d,"\n\t")),r+="".concat(h.code,"\n\t"),c===o&&"compute"!==t)if(r+="// result\n\n\t","vertex"===t)r+="varyings.Vertex = ".concat(h.result,";");else if("fragment"===t)if(u)n.returnType=s.nodeType,r+="return ".concat(h.result,";");else{var f="\t@location(0) color: vec4<f32>",p=this.getBuiltins("output");p&&(f+=",\n\t"+p),n.returnType="OutputStruct",n.structs+=this._getWGSLStruct("OutputStruct",f),n.structs+="\nvar<private> output : OutputStruct;\n\n",r+="output.color = ".concat(h.result,";\n\n\treturn output;")}}}catch(A){l.e(A)}finally{l.f()}n.flow=r}null!==this.material?(this.vertexShader=this._getWGSLVertexCode(e.vertex),this.fragmentShader=this._getWGSLFragmentCode(e.fragment)):this.computeShader=this._getWGSLComputeCode(e.compute,(this.object.workgroupSize||[64]).join(", "))}},{key:"getMethod",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return null!==n&&(t=this._getWGSLMethod(e+"_"+n)),void 0===t&&(t=this._getWGSLMethod(e)),t||e}},{key:"getType",value:function(e){return g2[e]||e}},{key:"isAvailable",value:function(e){var t=v2[e];return void 0===t&&("float32Filterable"===e&&(t=this.renderer.hasFeature("float32-filterable")),v2[e]=t),t}},{key:"_getWGSLMethod",value:function(e){return void 0!==y2[e]&&this._include(e),b2[e]}},{key:"_include",value:function(e){var t=y2[e];return t.build(this),null!==this.currentFunctionNode&&this.currentFunctionNode.includes.push(t),t}},{key:"_getWGSLVertexCode",value:function(e){return"".concat(this.getSignature(),"\n// directives\n").concat(e.directives,"\n\n// uniforms\n").concat(e.uniforms,"\n\n// varyings\n").concat(e.varyings,"\nvar<private> varyings : VaryingsStruct;\n\n// codes\n").concat(e.codes,"\n\n@vertex\nfn main( ").concat(e.attributes," ) -> VaryingsStruct {\n\n\t// vars\n\t").concat(e.vars,"\n\n\t// flow\n\t").concat(e.flow,"\n\n\treturn varyings;\n\n}\n")}},{key:"_getWGSLFragmentCode",value:function(e){return"".concat(this.getSignature(),"\n// global\n").concat(x2,"\n\n// uniforms\n").concat(e.uniforms,"\n\n// structs\n").concat(e.structs,"\n\n// codes\n").concat(e.codes,"\n\n@fragment\nfn main( ").concat(e.varyings," ) -> ").concat(e.returnType," {\n\n\t// vars\n\t").concat(e.vars,"\n\n\t// flow\n\t").concat(e.flow,"\n\n}\n")}},{key:"_getWGSLComputeCode",value:function(e,t){return"".concat(this.getSignature(),"\n// directives\n").concat(e.directives,"\n\n// system\nvar<private> instanceIndex : u32;\n\n// locals\n").concat(e.scopedArrays,"\n\n// uniforms\n").concat(e.uniforms,"\n\n// codes\n").concat(e.codes,"\n\n@compute @workgroup_size( ").concat(t," )\nfn main( ").concat(e.attributes," ) {\n\n\t// system\n\tinstanceIndex = id.x + id.y * numWorkgroups.x * u32(").concat(t,") + id.z * numWorkgroups.x * numWorkgroups.y * u32(").concat(t,");\n\n\t// vars\n\t").concat(e.vars,"\n\n\t// flow\n\t").concat(e.flow,"\n\n}\n")}},{key:"_getWGSLStruct",value:function(e,t){return"\nstruct ".concat(e," {\n").concat(t,"\n};")}},{key:"_getWGSLStructBinding",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=e+"Struct",o=this._getWGSLStruct(a,t);return"".concat(o,"\n@binding( ").concat(r," ) @group( ").concat(i," )\nvar<").concat(n,"> ").concat(e," : ").concat(a,";")}}]),n}(N0),w2=function(){function e(t){V(this,e),this.backend=t}return W(e,[{key:"getCurrentDepthStencilFormat",value:function(e){var t;return null!==e.depthTexture?t=this.getTextureFormatGPU(e.depthTexture):e.depth&&e.stencil?t=XK.Depth24PlusStencil8:e.depth&&(t=XK.Depth24Plus),t}},{key:"getTextureFormatGPU",value:function(e){return this.backend.get(e).format}},{key:"getCurrentColorFormat",value:function(e){return null!==e.textures?this.getTextureFormatGPU(e.textures[0]):this.getPreferredCanvasFormat()}},{key:"getCurrentColorSpace",value:function(e){return null!==e.textures?e.textures[0].colorSpace:this.backend.renderer.outputColorSpace}},{key:"getPrimitiveTopology",value:function(e,t){return e.isPoints?MK:e.isLineSegments||e.isMesh&&!0===t.wireframe?kK:e.isLine?TK:e.isMesh?EK:void 0}},{key:"getSampleCount",value:function(e){var t=1;return e>1&&2===(t=Math.pow(2,Math.floor(Math.log2(e))))&&(t=4),t}},{key:"getSampleCountRenderContext",value:function(e){return null!==e.textures?this.getSampleCount(e.sampleCount):this.getSampleCount(this.backend.renderer.samples)}},{key:"getPreferredCanvasFormat",value:function(){return navigator.userAgent.includes("Quest")?XK.BGRA8Unorm:navigator.gpu.getPreferredCanvasFormat()}}]),e}(),S2=new Map([[Int8Array,["sint8","snorm8"]],[Uint8Array,["uint8","unorm8"]],[Int16Array,["sint16","snorm16"]],[Uint16Array,["uint16","unorm16"]],[Int32Array,["sint32","snorm32"]],[Uint32Array,["uint32","unorm32"]],[Float32Array,["float32"]]]),M2=new Map([[PF,["float16"]]]),k2=new Map([[Int32Array,"sint32"],[Int16Array,"sint32"],[Uint32Array,"uint32"],[Uint16Array,"uint32"],[Float32Array,"float32"]]),T2=function(){function e(t){V(this,e),this.backend=t}return W(e,[{key:"createAttribute",value:function(e,t){var n=this._getBufferAttribute(e),r=this.backend,i=r.get(n),a=i.buffer;if(void 0===a){var o=r.device,s=n.array;if(!1===e.normalized&&(s.constructor===Int16Array||s.constructor===Uint16Array)){for(var u=new Uint32Array(s.length),l=0;l<s.length;l++)u[l]=s[l];s=u}if(n.array=s,(n.isStorageBufferAttribute||n.isStorageInstancedBufferAttribute)&&3===n.itemSize){s=new s.constructor(4*n.count);for(var c=0;c<n.count;c++)s.set(n.array.subarray(3*c,3*c+3),4*c);n.itemSize=4,n.array=s}var h=s.byteLength+(4-s.byteLength%4)%4;a=o.createBuffer({label:n.name,size:h,usage:t,mappedAtCreation:!0}),new s.constructor(a.getMappedRange()).set(s),a.unmap(),i.buffer=a}}},{key:"updateAttribute",value:function(e){var t=this._getBufferAttribute(e),n=this.backend,r=n.device,i=n.get(t).buffer,a=t.array,o=t.updateRanges;if(0===o.length)r.queue.writeBuffer(i,0,a,0);else{for(var s=0,u=o.length;s<u;s++){var l=o[s];r.queue.writeBuffer(i,0,a,l.start*a.BYTES_PER_ELEMENT,l.count*a.BYTES_PER_ELEMENT)}t.clearUpdateRanges()}}},{key:"createShaderVertexBuffers",value:function(e){for(var t=e.getAttributes(),n=new Map,r=0;r<t.length;r++){var i=t[r],a=i.array.BYTES_PER_ELEMENT,o=this._getBufferAttribute(i),s=n.get(o);if(void 0===s){var u=void 0,l=void 0;!0===i.isInterleavedBufferAttribute?(u=i.data.stride*a,l=i.data.isInstancedInterleavedBuffer?VZ:HZ):(u=i.itemSize*a,l=i.isInstancedBufferAttribute?VZ:HZ),!1!==i.normalized||i.array.constructor!==Int16Array&&i.array.constructor!==Uint16Array||(u=4),s={arrayStride:u,attributes:[],stepMode:l},n.set(o,s)}var c=this._getVertexFormat(i),h=!0===i.isInterleavedBufferAttribute?i.offset*a:0;s.attributes.push({shaderLocation:r,offset:h,format:c})}return Array.from(n.values())}},{key:"destroyAttribute",value:function(e){var t=this.backend;t.get(this._getBufferAttribute(e)).buffer.destroy(),t.delete(e)}},{key:"getArrayBufferAsync",value:function(){var e=ie(se().mark((function e(t){var n,r,i,a,o,s,u,l,c;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.backend,r=n.device,i=n.get(this._getBufferAttribute(t)),a=i.buffer,o=a.size,s=r.createBuffer({label:t.name,size:o,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ}),(u=r.createCommandEncoder({})).copyBufferToBuffer(a,0,s,0,o),s.unmap(),l=u.finish(),r.queue.submit([l]),e.next=13,s.mapAsync(GPUMapMode.READ);case 13:return c=s.getMappedRange(),e.abrupt("return",c);case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_getVertexFormat",value:function(e){var t,n=e.itemSize,r=e.normalized,i=e.array.constructor,a=e.constructor;if(1==n)t=k2.get(i);else{var o=(M2.get(a)||S2.get(i))[r?1:0];if(o){var s=i.BYTES_PER_ELEMENT*n,u=4*Math.floor((s+3)/4)/i.BYTES_PER_ELEMENT;if(u%1)throw new Error("THREE.WebGPUAttributeUtils: Bad vertex format item size.");t="".concat(o,"x").concat(u)}}return t||console.error("THREE.WebGPUAttributeUtils: Vertex format not supported yet."),t}},{key:"_getBufferAttribute",value:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),e}}]),e}(),E2=function(){function e(t){V(this,e),this.backend=t,this.bindGroupLayoutCache=new WeakMap}return W(e,[{key:"createBindingsLayout",value:function(e){var t,n=this.backend.device,r=[],i=0,a=ee(e.bindings);try{for(a.s();!(t=a.n()).done;){var o=t.value,s={binding:i++,visibility:o.visibility};if(o.isUniformBuffer||o.isStorageBuffer){var u={};o.isStorageBuffer&&(u.type=o.access),s.buffer=u}else if(o.isSampler){var l={};o.texture.isDepthTexture&&null!==o.texture.compareFunction&&(l.type="comparison"),s.sampler=l}else if(o.isSampledTexture&&o.texture.isVideoTexture)s.externalTexture={};else if(o.isSampledTexture&&o.store){var c=this.backend.get(o.texture).texture.format,h=o.access;s.storageTexture={format:c,access:h}}else if(o.isSampledTexture){var d={};if(!0===o.texture.isMultisampleRenderTargetTexture&&(d.multisampled=!0),o.texture.isDepthTexture)d.sampleType=NZ;else if(o.texture.isDataTexture||o.texture.isDataArrayTexture||o.texture.isData3DTexture){var f=o.texture.type;f===sD?d.sampleType=IZ:f===uD?d.sampleType=DZ:f===lD&&(this.backend.hasFeature("float32-filterable")?d.sampleType=BZ:d.sampleType=PZ)}o.isSampledCubeTexture?d.viewDimension=zZ:o.texture.isDataArrayTexture||o.texture.isCompressedArrayTexture?d.viewDimension=UZ:o.isSampledTexture3D&&(d.viewDimension=GZ),s.texture=d}else console.error('WebGPUBindingUtils: Unsupported binding "'.concat(o,'".'));r.push(s)}}catch(p){a.e(p)}finally{a.f()}return n.createBindGroupLayout({entries:r})}},{key:"createBindings",value:function(e){var t=this.backend,n=this.bindGroupLayoutCache,r=t.get(e),i=n.get(e.bindingsReference);void 0===i&&(i=this.createBindingsLayout(e),n.set(e.bindingsReference,i));var a=this.createBindGroup(e,i);r.layout=i,r.group=a}},{key:"updateBinding",value:function(e){var t=this.backend,n=t.device,r=e.buffer,i=t.get(e).buffer;n.queue.writeBuffer(i,0,r,0)}},{key:"createBindGroup",value:function(e,t){var n,r=this.backend,i=r.device,a=0,o=[],s=ee(e.bindings);try{for(s.s();!(n=s.n()).done;){var u=n.value;if(u.isUniformBuffer){var l=r.get(u);if(void 0===l.buffer){var c=u.byteLength,h=GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST,d=i.createBuffer({label:"bindingBuffer_"+u.name,size:c,usage:h});l.buffer=d}o.push({binding:a,resource:{buffer:l.buffer}})}else if(u.isStorageBuffer){var f=r.get(u);if(void 0===f.buffer){var p=u.attribute;f.buffer=r.get(p).buffer}o.push({binding:a,resource:{buffer:f.buffer}})}else if(u.isSampler){var A=r.get(u.texture);o.push({binding:a,resource:A.sampler})}else if(u.isSampledTexture){var v=r.get(u.texture),m=void 0;if(void 0!==v.externalTexture)m=i.importExternalTexture({source:v.externalTexture});else{var g=u.store?1:v.texture.mipLevelCount,y="view-".concat(v.texture.width,"-").concat(v.texture.height,"-").concat(g);if(void 0===(m=v[y])){var b=qZ,x=void 0;x=u.isSampledCubeTexture?zZ:u.isSampledTexture3D?GZ:u.texture.isDataArrayTexture||u.texture.isCompressedArrayTexture?UZ:FZ,m=v[y]=v.texture.createView({aspect:b,dimension:x,mipLevelCount:g})}}o.push({binding:a,resource:m})}a++}}catch(_){s.e(_)}finally{s.f()}return i.createBindGroup({label:"bindGroup_"+e.name,layout:t,entries:o})}}]),e}(),C2=function(){function e(t){V(this,e),this.backend=t}return W(e,[{key:"_getSampleCount",value:function(e){return this.backend.utils.getSampleCountRenderContext(e)}},{key:"createRenderPipeline",value:function(e,t){var n,r=e.object,i=e.material,a=e.geometry,o=e.pipeline,s=o.vertexProgram,u=o.fragmentProgram,l=this.backend,c=l.device,h=l.utils,d=l.get(o),f=[],p=ee(e.getBindings());try{for(p.s();!(n=p.n()).done;){var A=n.value,v=l.get(A);f.push(v.layout)}}catch(O){p.e(O)}finally{p.f()}var m,g=l.attributeUtils.createShaderVertexBuffers(e);!0===i.transparent&&0!==i.blending&&(m=this._getBlending(i));var y={};!0===i.stencilWrite&&(y={compare:this._getStencilCompare(i),failOp:this._getStencilOperation(i.stencilFail),depthFailOp:this._getStencilOperation(i.stencilZFail),passOp:this._getStencilOperation(i.stencilZPass)});var b=this._getColorWriteMask(i),x=[];if(null!==e.context.textures)for(var _=e.context.textures,w=0;w<_.length;w++){var S=h.getTextureFormatGPU(_[w]);x.push({format:S,blend:m,writeMask:b})}else{var M=h.getCurrentColorFormat(e.context);x.push({format:M,blend:m,writeMask:b})}var k=l.get(s).module,T=l.get(u).module,E=this._getPrimitiveState(r,a,i),C=this._getDepthCompare(i),R=h.getCurrentDepthStencilFormat(e.context),B=this._getSampleCount(e.context),P={label:"renderPipeline_".concat(i.name||i.type,"_").concat(i.id),vertex:Object.assign({},k,{buffers:g}),fragment:Object.assign({},T,{targets:x}),primitive:E,multisample:{count:B,alphaToCoverageEnabled:i.alphaToCoverage&&B>1},layout:c.createPipelineLayout({bindGroupLayouts:f})},N={},I=e.context.depth,D=e.context.stencil;if(!0!==I&&!0!==D||(!0===I&&(N.format=R,N.depthWriteEnabled=i.depthWrite,N.depthCompare=C),!0===D&&(N.stencilFront=y,N.stencilBack={},N.stencilReadMask=i.stencilFuncMask,N.stencilWriteMask=i.stencilWriteMask),P.depthStencil=N),null===t)d.pipeline=c.createRenderPipeline(P);else{var L=new Promise((function(e){c.createRenderPipelineAsync(P).then((function(t){d.pipeline=t,e()}))}));t.push(L)}}},{key:"createBundleEncoder",value:function(e){var t=this.backend,n=t.utils,r=t.device,i=n.getCurrentDepthStencilFormat(e),a={label:"renderBundleEncoder",colorFormats:[n.getCurrentColorFormat(e)],depthStencilFormat:i,sampleCount:this._getSampleCount(e)};return r.createRenderBundleEncoder(a)}},{key:"createComputePipeline",value:function(e,t){var n,r=this.backend,i=r.device,a=r.get(e.computeProgram).module,o=r.get(e),s=[],u=ee(t);try{for(u.s();!(n=u.n()).done;){var l=n.value,c=r.get(l);s.push(c.layout)}}catch(h){u.e(h)}finally{u.f()}o.pipeline=i.createComputePipeline({compute:a,layout:i.createPipelineLayout({bindGroupLayouts:s})})}},{key:"_getBlending",value:function(e){var t,n,r=e.blending,i=e.blendSrc,a=e.blendDst,o=e.blendEquation;if(5===r){var s=null!==e.blendSrcAlpha?e.blendSrcAlpha:i,u=null!==e.blendDstAlpha?e.blendDstAlpha:a,l=null!==e.blendEquationAlpha?e.blendEquationAlpha:o;t={srcFactor:this._getBlendFactor(i),dstFactor:this._getBlendFactor(a),operation:this._getBlendOperation(o)},n={srcFactor:this._getBlendFactor(s),dstFactor:this._getBlendFactor(u),operation:this._getBlendOperation(l)}}else{var c=function(e,r,i,a){t={srcFactor:e,dstFactor:r,operation:dZ},n={srcFactor:i,dstFactor:a,operation:dZ}};if(e.premultipliedAlpha)switch(r){case 1:c(eZ,iZ,eZ,iZ);break;case 2:c(eZ,eZ,eZ,eZ);break;case 3:c($K,nZ,$K,eZ);break;case 4:c($K,tZ,$K,rZ)}else switch(r){case 1:c(rZ,iZ,eZ,iZ);break;case 2:c(rZ,eZ,rZ,eZ);break;case 3:c($K,nZ,$K,eZ);break;case 4:c($K,tZ,$K,tZ)}}if(void 0!==t&&void 0!==n)return{color:t,alpha:n};console.error("THREE.WebGPURenderer: Invalid blending: ",r)}},{key:"_getBlendFactor",value:function(e){var t;switch(e){case 200:t=$K;break;case 201:t=eZ;break;case 202:t=tZ;break;case 203:t=nZ;break;case zI:t=rZ;break;case GI:t=iZ;break;case 208:t=aZ;break;case 209:t=oZ;break;case 206:t=sZ;break;case 207:t=uZ;break;case 210:t=lZ;break;case 211:t=cZ;break;case 212:t=hZ;break;default:console.error("THREE.WebGPURenderer: Blend factor not supported.",e)}return t}},{key:"_getStencilCompare",value:function(e){var t,n=e.stencilFunc;switch(n){case 512:t=RK;break;case 519:t=OK;break;case 513:t=BK;break;case 515:t=NK;break;case 514:t=PK;break;case 518:t=LK;break;case 516:t=IK;break;case 517:t=DK;break;default:console.error("THREE.WebGPURenderer: Invalid stencil function.",n)}return t}},{key:"_getStencilOperation",value:function(e){var t;switch(e){case uL:t=yZ;break;case 0:t=bZ;break;case 7681:t=xZ;break;case 5386:t=_Z;break;case 7682:t=wZ;break;case 7683:t=SZ;break;case 34055:t=MZ;break;case 34056:t=kZ;break;default:console.error("THREE.WebGPURenderer: Invalid stencil operation.",t)}return t}},{key:"_getBlendOperation",value:function(e){var t;switch(e){case UI:t=dZ;break;case 101:t=fZ;break;case 102:t=pZ;break;case 103:t=AZ;break;case 104:t=vZ;break;default:console.error("THREE.WebGPUPipelineUtils: Blend equation not supported.",e)}return t}},{key:"_getPrimitiveState",value:function(e,t,n){var r={},i=this.backend.utils;switch(r.topology=i.getPrimitiveTopology(e,n),null!==t.index&&!0===e.isLine&&!0!==e.isLineSegments&&(r.stripIndexFormat=t.index.array instanceof Uint16Array?jK:WK),n.side){case 0:r.frontFace=GK,r.cullMode=VK;break;case 1:r.frontFace=GK,r.cullMode=HK;break;case 2:r.frontFace=GK,r.cullMode=qK;break;default:console.error("THREE.WebGPUPipelineUtils: Unknown material.side value.",n.side)}return r}},{key:"_getColorWriteMask",value:function(e){return!0===e.colorWrite?gZ:mZ}},{key:"_getDepthCompare",value:function(e){var t;if(!1===e.depthTest)t=OK;else{var n=e.depthFunc;switch(n){case 0:t=RK;break;case 1:t=OK;break;case 2:t=BK;break;case 3:t=NK;break;case 4:t=PK;break;case 5:t=LK;break;case 6:t=IK;break;case 7:t=DK;break;default:console.error("THREE.WebGPUPipelineUtils: Invalid depth function.",n)}}return t}}]),e}(),R2=function(e){Y(n,e);var t=$(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return V(this,n),(e=t.call(this,r)).isWebGPUBackend=!0,e.parameters.alpha=void 0===r.alpha||r.alpha,e.parameters.requiredLimits=void 0===r.requiredLimits?{}:r.requiredLimits,e.trackTimestamp=!0===r.trackTimestamp,e.device=null,e.context=null,e.colorBuffer=null,e.defaultRenderPassdescriptor=null,e.utils=new w2(K(e)),e.attributeUtils=new T2(K(e)),e.bindingUtils=new E2(K(e)),e.pipelineUtils=new C2(K(e)),e.textureUtils=new s2(K(e)),e.occludedResolveCache=new Map,e}return W(n,[{key:"init",value:function(){var e=ie(se().mark((function e(t){var r,i,a,o,s,u,l,c,h,d,f,p;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oe(Q(n.prototype),"init",this).call(this,t);case 2:if(void 0!==(r=this.parameters).device){e.next=19;break}return a={powerPreference:r.powerPreference},e.next=7,navigator.gpu.requestAdapter(a);case 7:if(null!==(o=e.sent)){e.next=10;break}throw new Error("WebGPUBackend: Unable to create WebGPU adapter.");case 10:for(s=Object.values(jZ),u=[],l=0,c=s;l<c.length;l++)h=c[l],o.features.has(h)&&u.push(h);return d={requiredFeatures:u,requiredLimits:r.requiredLimits},e.next=16,o.requestDevice(d);case 16:i=e.sent,e.next=20;break;case 19:i=r.device;case 20:i.lost.then((function(e){var n={api:"WebGPU",message:e.message||"Unknown reason",reason:e.reason||null,originalEvent:e};t.onDeviceLost(n)})),f=void 0!==r.context?r.context:t.domElement.getContext("webgpu"),this.device=i,this.context=f,p=r.alpha?"premultiplied":"opaque",this.trackTimestamp=this.trackTimestamp&&this.hasFeature(jZ.TimestampQuery),this.context.configure({device:this.device,format:this.utils.getPreferredCanvasFormat(),usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.COPY_SRC,alphaMode:p}),this.updateSize();case 28:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"coordinateSystem",get:function(){return dL}},{key:"getArrayBufferAsync",value:function(){var e=ie(se().mark((function e(t){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.attributeUtils.getArrayBufferAsync(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getContext",value:function(){return this.context}},{key:"_getDefaultRenderPassDescriptor",value:function(){var e=this.defaultRenderPassdescriptor;if(null===e){var t=this.renderer;e={colorAttachments:[{view:null}]},!0!==this.renderer.depth&&!0!==this.renderer.stencil||(e.depthStencilAttachment={view:this.textureUtils.getDepthBuffer(t.depth,t.stencil).createView()});var n=e.colorAttachments[0];this.renderer.samples>0?n.view=this.colorBuffer.createView():n.resolveTarget=void 0,this.defaultRenderPassdescriptor=e}var r=e.colorAttachments[0];return this.renderer.samples>0?r.resolveTarget=this.context.getCurrentTexture().createView():r.view=this.context.getCurrentTexture().createView(),e}},{key:"_getRenderPassDescriptor",value:function(e){var t=this,n=e.renderTarget,r=this.get(n),i=r.descriptors;if(void 0===i||r.width!==n.width||r.height!==n.height||r.activeMipmapLevel!==n.activeMipmapLevel||r.samples!==n.samples){i={},r.descriptors=i;n.addEventListener("dispose",(function e(){n.removeEventListener("dispose",e),t.delete(n)}))}var a=e.getCacheKey(),o=i[a];if(void 0===o){for(var s=e.textures,u=[],l=0;l<s.length;l++){var c=this.get(s[l]),h=c.texture.createView({baseMipLevel:e.activeMipmapLevel,mipLevelCount:1,baseArrayLayer:e.activeCubeFace,dimension:FZ}),d=void 0,f=void 0;void 0!==c.msaaTexture?(d=c.msaaTexture.createView(),f=h):(d=h,f=void 0),u.push({view:d,resolveTarget:f,loadOp:UK,storeOp:FK})}if(o={colorAttachments:u},e.depth){var p={view:this.get(e.depthTexture).texture.createView()};o.depthStencilAttachment=p}i[a]=o,r.width=n.width,r.height=n.height,r.samples=n.samples,r.activeMipmapLevel=n.activeMipmapLevel}return o}},{key:"beginRender",value:function(e){var t,n,r=this.get(e),i=this.device,a=e.occlusionQueryCount;a>0&&(r.currentOcclusionQuerySet&&r.currentOcclusionQuerySet.destroy(),r.currentOcclusionQueryBuffer&&r.currentOcclusionQueryBuffer.destroy(),r.currentOcclusionQuerySet=r.occlusionQuerySet,r.currentOcclusionQueryBuffer=r.occlusionQueryBuffer,r.currentOcclusionQueryObjects=r.occlusionQueryObjects,t=i.createQuerySet({type:"occlusion",count:a}),r.occlusionQuerySet=t,r.occlusionQueryIndex=0,r.occlusionQueryObjects=new Array(a),r.lastOcclusionObject=null),n=null===e.textures?this._getDefaultRenderPassDescriptor():this._getRenderPassDescriptor(e),this.initTimestampQuery(e,n),n.occlusionQuerySet=t;var o=n.depthStencilAttachment;if(null!==e.textures)for(var s=n.colorAttachments,u=0;u<s.length;u++){var l=s[u];e.clearColor?(l.clearValue=0===u?e.clearColorValue:{r:0,g:0,b:0,a:1},l.loadOp=zK,l.storeOp=FK):(l.loadOp=UK,l.storeOp=FK)}else{var c=n.colorAttachments[0];e.clearColor?(c.clearValue=e.clearColorValue,c.loadOp=zK,c.storeOp=FK):(c.loadOp=UK,c.storeOp=FK)}e.depth&&(e.clearDepth?(o.depthClearValue=e.clearDepthValue,o.depthLoadOp=zK,o.depthStoreOp=FK):(o.depthLoadOp=UK,o.depthStoreOp=FK)),e.stencil&&(e.clearStencil?(o.stencilClearValue=e.clearStencilValue,o.stencilLoadOp=zK,o.stencilStoreOp=FK):(o.stencilLoadOp=UK,o.stencilStoreOp=FK));var h=i.createCommandEncoder({label:"renderContext_"+e.id}),d=h.beginRenderPass(n);if(r.descriptor=n,r.encoder=h,r.currentPass=d,r.currentSets={attributes:{},bindingGroups:[],pipeline:null,index:null},r.renderBundles=[],e.viewport&&this.updateViewport(e),e.scissor){var f=e.scissorValue,p=f.x,A=f.y,v=f.width,m=f.height;d.setScissorRect(p,A,v,m)}}},{key:"finishRender",value:function(e){var t=this.get(e),n=e.occlusionQueryCount;if(t.renderBundles.length>0&&t.currentPass.executeBundles(t.renderBundles),n>t.occlusionQueryIndex&&t.currentPass.endOcclusionQuery(),t.currentPass.end(),n>0){var r=8*n,i=this.occludedResolveCache.get(r);void 0===i&&(i=this.device.createBuffer({size:r,usage:GPUBufferUsage.QUERY_RESOLVE|GPUBufferUsage.COPY_SRC}),this.occludedResolveCache.set(r,i));var a=this.device.createBuffer({size:r,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ});t.encoder.resolveQuerySet(t.occlusionQuerySet,0,n,i,0),t.encoder.copyBufferToBuffer(i,0,a,0,r),t.occlusionQueryBuffer=a,this.resolveOccludedAsync(e)}if(this.prepareTimestampBuffer(e,t.encoder),this.device.queue.submit([t.encoder.finish()]),null!==e.textures)for(var o=e.textures,s=0;s<o.length;s++){var u=o[s];!0===u.generateMipmaps&&this.textureUtils.generateMipmaps(u)}}},{key:"isOccluded",value:function(e,t){var n=this.get(e);return n.occluded&&n.occluded.has(t)}},{key:"resolveOccludedAsync",value:function(){var e=ie(se().mark((function e(t){var n,r,i,a,o,s,u;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.get(t),r=n.currentOcclusionQueryBuffer,i=n.currentOcclusionQueryObjects,!r||!i){e.next=13;break}return a=new WeakSet,n.currentOcclusionQueryObjects=null,n.currentOcclusionQueryBuffer=null,e.next=8,r.mapAsync(GPUMapMode.READ);case 8:for(o=r.getMappedRange(),s=new BigUint64Array(o),u=0;u<i.length;u++)s[u]!==BigInt(0)&&a.add(i[u]);r.destroy(),n.occluded=a;case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateViewport",value:function(e){var t=this.get(e).currentPass,n=e.viewportValue,r=n.x,i=n.y,a=n.width,o=n.height,s=n.minDepth,u=n.maxDepth;t.setViewport(r,i,a,o,s,u)}},{key:"clear",value:function(e,t,n){var r,i,a,o,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,u=this.device,l=this.renderer,c=[];if(e){var h=this.getClearColor();if(!0===this.renderer.alpha){var d=h.a;i={r:h.r*d,g:h.g*d,b:h.b*d,a:d}}else i={r:h.r,g:h.g,b:h.b,a:h.a}}if(null===s){a=l.depth,o=l.stencil;var f=this._getDefaultRenderPassDescriptor();if(e){var p=(c=f.colorAttachments)[0];p.clearValue=i,p.loadOp=zK,p.storeOp=FK}(a||o)&&(r=f.depthStencilAttachment)}else{if(a=s.depth,o=s.stencil,e){var A,v=ee(s.textures);try{for(v.s();!(A=v.n()).done;){var m=A.value,g=this.get(m),y=g.texture.createView(),b=void 0,x=void 0;void 0!==g.msaaTexture?(b=g.msaaTexture.createView(),x=y):(b=y,x=void 0),c.push({view:b,resolveTarget:x,clearValue:i,loadOp:zK,storeOp:FK})}}catch(M){v.e(M)}finally{v.f()}}if(a||o){var _=this.get(s.depthTexture);r={view:_.texture.createView()}}}a&&(t?(r.depthLoadOp=zK,r.depthClearValue=l.getClearDepth(),r.depthStoreOp=FK):(r.depthLoadOp=UK,r.depthStoreOp=FK)),o&&(n?(r.stencilLoadOp=zK,r.stencilClearValue=l.getClearStencil(),r.stencilStoreOp=FK):(r.stencilLoadOp=UK,r.stencilStoreOp=FK));var w=u.createCommandEncoder({}),S=w.beginRenderPass({colorAttachments:c,depthStencilAttachment:r});S.end(),u.queue.submit([w.finish()])}},{key:"beginCompute",value:function(e){var t=this.get(e),n={};this.initTimestampQuery(e,n),t.cmdEncoderGPU=this.device.createCommandEncoder(),t.passEncoderGPU=t.cmdEncoderGPU.beginComputePass(n)}},{key:"compute",value:function(e,t,n,r){var i=this.get(e).passEncoderGPU,a=this.get(r).pipeline;i.setPipeline(a);for(var o=0,s=n.length;o<s;o++){var u=n[o],l=this.get(u);i.setBindGroup(o,l.group)}var c=this.device.limits.maxComputeWorkgroupsPerDimension,h=this.get(t);void 0===h.dispatchSize&&(h.dispatchSize={x:0,y:1,z:1});var d=h.dispatchSize;t.dispatchCount>c?(d.x=Math.min(t.dispatchCount,c),d.y=Math.ceil(t.dispatchCount/c)):d.x=t.dispatchCount,i.dispatchWorkgroups(d.x,d.y,d.z)}},{key:"finishCompute",value:function(e){var t=this.get(e);t.passEncoderGPU.end(),this.prepareTimestampBuffer(e,t.cmdEncoderGPU),this.device.queue.submit([t.cmdEncoderGPU.finish()])}},{key:"waitForGPU",value:function(){var e=ie(se().mark((function e(){return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.device.queue.onSubmittedWorkDone();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"draw",value:function(e,t){var n=e.object,r=e.context,i=e.pipeline,a=e.getBindings(),o=this.get(r),s=this.get(i).pipeline,u=o.currentSets,l=o.currentPass,c=e.getDrawParameters();if(null!==c){u.pipeline!==s&&(l.setPipeline(s),u.pipeline=s);for(var h=u.bindingGroups,d=0,f=a.length;d<f;d++){var p=a[d],A=this.get(p);h[p.index]!==p.id&&(l.setBindGroup(p.index,A.group),h[p.index]=p.id)}var v=e.getIndex(),m=null!==v;if(!0===m&&u.index!==v){var g=this.get(v).buffer,y=v.array instanceof Uint16Array?jK:WK;l.setIndexBuffer(g,y),u.index=v}for(var b=e.getVertexBuffers(),x=0,_=b.length;x<_;x++){var w=b[x];if(u.attributes[x]!==w){var S=this.get(w).buffer;l.setVertexBuffer(x,S),u.attributes[x]=w}}if(void 0!==o.occlusionQuerySet){var M=o.lastOcclusionObject;M!==n&&(null!==M&&!0===M.occlusionTest&&(l.endOcclusionQuery(),o.occlusionQueryIndex++),!0===n.occlusionTest&&(l.beginOcclusionQuery(o.occlusionQueryIndex),o.occlusionQueryObjects[o.occlusionQueryIndex]=n),o.lastOcclusionObject=n)}if(!0===n.isBatchedMesh)for(var k=n._multiDrawStarts,T=n._multiDrawCounts,E=n._multiDrawCount,C=n._multiDrawInstances,R=m?v.array.BYTES_PER_ELEMENT:1,B=0;B<E;B++){var P=C?C[B]:1,N=P>1?0:B;l.drawIndexed(T[B],P,k[B]/R,0,N)}else if(!0===m){var I=c.vertexCount,D=c.instanceCount,L=c.firstVertex,O=e.getIndirect();if(null!==O){var F=this.get(O).buffer;l.drawIndexedIndirect(F,0)}else l.drawIndexed(I,D,L,0,0);t.update(n,I,D)}else{var U=c.vertexCount,z=c.instanceCount,G=c.firstVertex,q=e.getIndirect();if(null!==q){var H=this.get(q).buffer;l.drawIndirect(H,0)}else l.draw(U,z,G,0);t.update(n,U,z)}}}},{key:"needsRenderUpdate",value:function(e){var t=this.get(e),n=e.object,r=e.material,i=this.utils,a=i.getSampleCountRenderContext(e.context),o=i.getCurrentColorSpace(e.context),s=i.getCurrentColorFormat(e.context),u=i.getCurrentDepthStencilFormat(e.context),l=i.getPrimitiveTopology(n,r),c=!1;return t.material===r&&t.materialVersion===r.version&&t.transparent===r.transparent&&t.blending===r.blending&&t.premultipliedAlpha===r.premultipliedAlpha&&t.blendSrc===r.blendSrc&&t.blendDst===r.blendDst&&t.blendEquation===r.blendEquation&&t.blendSrcAlpha===r.blendSrcAlpha&&t.blendDstAlpha===r.blendDstAlpha&&t.blendEquationAlpha===r.blendEquationAlpha&&t.colorWrite===r.colorWrite&&t.depthWrite===r.depthWrite&&t.depthTest===r.depthTest&&t.depthFunc===r.depthFunc&&t.stencilWrite===r.stencilWrite&&t.stencilFunc===r.stencilFunc&&t.stencilFail===r.stencilFail&&t.stencilZFail===r.stencilZFail&&t.stencilZPass===r.stencilZPass&&t.stencilFuncMask===r.stencilFuncMask&&t.stencilWriteMask===r.stencilWriteMask&&t.side===r.side&&t.alphaToCoverage===r.alphaToCoverage&&t.sampleCount===a&&t.colorSpace===o&&t.colorFormat===s&&t.depthStencilFormat===u&&t.primitiveTopology===l&&t.clippingContextCacheKey===e.clippingContext.cacheKey||(t.material=r,t.materialVersion=r.version,t.transparent=r.transparent,t.blending=r.blending,t.premultipliedAlpha=r.premultipliedAlpha,t.blendSrc=r.blendSrc,t.blendDst=r.blendDst,t.blendEquation=r.blendEquation,t.blendSrcAlpha=r.blendSrcAlpha,t.blendDstAlpha=r.blendDstAlpha,t.blendEquationAlpha=r.blendEquationAlpha,t.colorWrite=r.colorWrite,t.depthWrite=r.depthWrite,t.depthTest=r.depthTest,t.depthFunc=r.depthFunc,t.stencilWrite=r.stencilWrite,t.stencilFunc=r.stencilFunc,t.stencilFail=r.stencilFail,t.stencilZFail=r.stencilZFail,t.stencilZPass=r.stencilZPass,t.stencilFuncMask=r.stencilFuncMask,t.stencilWriteMask=r.stencilWriteMask,t.side=r.side,t.alphaToCoverage=r.alphaToCoverage,t.sampleCount=a,t.colorSpace=o,t.colorFormat=s,t.depthStencilFormat=u,t.primitiveTopology=l,t.clippingContextCacheKey=e.clippingContext.cacheKey,c=!0),c}},{key:"getRenderCacheKey",value:function(e){var t=e.object,n=e.material,r=this.utils,i=e.context;return[n.transparent,n.blending,n.premultipliedAlpha,n.blendSrc,n.blendDst,n.blendEquation,n.blendSrcAlpha,n.blendDstAlpha,n.blendEquationAlpha,n.colorWrite,n.depthWrite,n.depthTest,n.depthFunc,n.stencilWrite,n.stencilFunc,n.stencilFail,n.stencilZFail,n.stencilZPass,n.stencilFuncMask,n.stencilWriteMask,n.side,r.getSampleCountRenderContext(i),r.getCurrentColorSpace(i),r.getCurrentColorFormat(i),r.getCurrentDepthStencilFormat(i),r.getPrimitiveTopology(t,n),e.getGeometryCacheKey(),e.clippingContext.cacheKey].join()}},{key:"createSampler",value:function(e){this.textureUtils.createSampler(e)}},{key:"destroySampler",value:function(e){this.textureUtils.destroySampler(e)}},{key:"createDefaultTexture",value:function(e){this.textureUtils.createDefaultTexture(e)}},{key:"createTexture",value:function(e,t){this.textureUtils.createTexture(e,t)}},{key:"updateTexture",value:function(e,t){this.textureUtils.updateTexture(e,t)}},{key:"generateMipmaps",value:function(e){this.textureUtils.generateMipmaps(e)}},{key:"destroyTexture",value:function(e){this.textureUtils.destroyTexture(e)}},{key:"copyTextureToBuffer",value:function(e,t,n,r,i,a){return this.textureUtils.copyTextureToBuffer(e,t,n,r,i,a)}},{key:"initTimestampQuery",value:function(e,t){if(this.trackTimestamp){var n=this.get(e);if(!n.timeStampQuerySet){var r=this.device.createQuerySet({type:"timestamp",count:2}),i={querySet:r,beginningOfPassWriteIndex:0,endOfPassWriteIndex:1};Object.assign(t,{timestampWrites:i}),n.timeStampQuerySet=r}}}},{key:"prepareTimestampBuffer",value:function(e,t){if(this.trackTimestamp){var n=this.get(e),r=2*BigInt64Array.BYTES_PER_ELEMENT;void 0===n.currentTimestampQueryBuffers&&(n.currentTimestampQueryBuffers={resolveBuffer:this.device.createBuffer({label:"timestamp resolve buffer",size:r,usage:GPUBufferUsage.QUERY_RESOLVE|GPUBufferUsage.COPY_SRC}),resultBuffer:this.device.createBuffer({label:"timestamp result buffer",size:r,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ}),isMappingPending:!1});var i=n.currentTimestampQueryBuffers,a=i.resolveBuffer,o=i.resultBuffer;!0!==i.isMappingPending&&(t.resolveQuerySet(n.timeStampQuerySet,0,2,a,0),t.copyBufferToBuffer(a,0,o,0,r))}}},{key:"resolveTimestampAsync",value:function(){var e=ie(se().mark((function e(t){var n,r,i,a,o=this,s=arguments;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=s.length>1&&void 0!==s[1]?s[1]:"render",this.trackTimestamp){e.next=3;break}return e.abrupt("return");case 3:if(void 0!==(r=this.get(t)).currentTimestampQueryBuffers){e.next=6;break}return e.abrupt("return");case 6:if(i=r.currentTimestampQueryBuffers,a=i.resultBuffer,!0!==i.isMappingPending){e.next=9;break}return e.abrupt("return");case 9:r.currentTimestampQueryBuffers.isMappingPending=!0,a.mapAsync(GPUMapMode.READ).then((function(){var e=new BigUint64Array(a.getMappedRange()),t=Number(e[1]-e[0])/1e6;o.renderer.info.updateTimestamp(n,t),a.unmap(),r.currentTimestampQueryBuffers.isMappingPending=!1}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createNodeBuilder",value:function(e,t){return new _2(e,t)}},{key:"createProgram",value:function(e){this.get(e).module={module:this.device.createShaderModule({code:e.code,label:e.stage}),entryPoint:"main"}}},{key:"destroyProgram",value:function(e){this.delete(e)}},{key:"createRenderPipeline",value:function(e,t){this.pipelineUtils.createRenderPipeline(e,t)}},{key:"createComputePipeline",value:function(e,t){this.pipelineUtils.createComputePipeline(e,t)}},{key:"beginBundle",value:function(e){var t=this.get(e);t._currentPass=t.currentPass,t._currentSets=t.currentSets,t.currentSets={attributes:{},bindingGroups:[],pipeline:null,index:null},t.currentPass=this.pipelineUtils.createBundleEncoder(e)}},{key:"finishBundle",value:function(e,t){var n=this.get(e),r=n.currentPass.finish();this.get(t).bundleGPU=r,n.currentSets=n._currentSets,n.currentPass=n._currentPass}},{key:"addBundle",value:function(e,t){this.get(e).renderBundles.push(this.get(t).bundleGPU)}},{key:"createBindings",value:function(e){this.bindingUtils.createBindings(e)}},{key:"updateBindings",value:function(e){this.bindingUtils.createBindings(e)}},{key:"updateBinding",value:function(e){this.bindingUtils.updateBinding(e)}},{key:"createIndexAttribute",value:function(e){this.attributeUtils.createAttribute(e,GPUBufferUsage.INDEX|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST)}},{key:"createAttribute",value:function(e){this.attributeUtils.createAttribute(e,GPUBufferUsage.VERTEX|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST)}},{key:"createStorageAttribute",value:function(e){this.attributeUtils.createAttribute(e,GPUBufferUsage.STORAGE|GPUBufferUsage.VERTEX|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST)}},{key:"createIndirectStorageAttribute",value:function(e){this.attributeUtils.createAttribute(e,GPUBufferUsage.STORAGE|GPUBufferUsage.INDIRECT|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST)}},{key:"updateAttribute",value:function(e){this.attributeUtils.updateAttribute(e)}},{key:"destroyAttribute",value:function(e){this.attributeUtils.destroyAttribute(e)}},{key:"updateSize",value:function(){this.colorBuffer=this.textureUtils.getColorBuffer(),this.defaultRenderPassdescriptor=null}},{key:"getMaxAnisotropy",value:function(){return 16}},{key:"hasFeature",value:function(e){return this.device.features.has(e)}},{key:"copyTextureToTexture",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=0,o=0,s=0,u=0,l=0,c=0,h=e.image.width,d=e.image.height;null!==n&&(u=n.x,l=n.y,c=n.z||0,h=n.width,d=n.height),null!==r&&(a=r.x,o=r.y,s=r.z||0);var f=this.device.createCommandEncoder({label:"copyTextureToTexture_"+e.id+"_"+t.id}),p=this.get(e).texture,A=this.get(t).texture;f.copyTextureToTexture({texture:p,mipLevel:i,origin:{x:u,y:l,z:c}},{texture:A,mipLevel:i,origin:{x:a,y:o,z:s}},[h,d,1]),this.device.queue.submit([f.finish()])}},{key:"copyFramebufferToTexture",value:function(e,t,n){var r=this.get(t),i=null;i=t.renderTarget?e.isDepthTexture?this.get(t.depthTexture).texture:this.get(t.textures[0]).texture:e.isDepthTexture?this.textureUtils.getDepthBuffer(t.depth,t.stencil):this.context.getCurrentTexture();var a,o=this.get(e).texture;if(i.format===o.format)if(r.currentPass?(r.currentPass.end(),a=r.encoder):a=this.device.createCommandEncoder({label:"copyFramebufferToTexture_"+e.id}),a.copyTextureToTexture({texture:i,origin:{x:n.x,y:n.y,z:0}},{texture:o},[n.z,n.w]),e.generateMipmaps&&this.textureUtils.generateMipmaps(e),r.currentPass){for(var s=r.descriptor,u=0;u<s.colorAttachments.length;u++)s.colorAttachments[u].loadOp=UK;t.depth&&(s.depthStencilAttachment.depthLoadOp=UK),t.stencil&&(s.depthStencilAttachment.stencilLoadOp=UK),r.currentPass=a.beginRenderPass(s),r.currentSets={attributes:{},bindingGroups:[],pipeline:null,index:null}}else this.device.queue.submit([a.finish()]);else console.error("WebGPUBackend: copyFramebufferToTexture: Source and destination formats do not match.",i.format,o.format)}}]),n}(U1),B2=function(e){Y(n,e);var t=$(n);function n(e,r,i,a,o,s){var u;return V(this,n),(u=t.call(this,e,r,i,a,o,s)).iesMap=null,u}return W(n,[{key:"copy",value:function(e,t){return oe(Q(n.prototype),"copy",this).call(this,e,t),this.iesMap=e.iesMap,this}}]),n}(hz),P2=function(e){Y(n,e);var t=$(n);function n(){var e;return V(this,n),(e=t.call(this)).addMaterial(GY,DU),e.addMaterial(sJ,NU),e.addMaterial(lJ,IU),e.addMaterial(fJ,LU),e.addMaterial(PY,_F),e.addMaterial(UY,FU),e.addMaterial(yY,OU),e.addMaterial(mJ,UU),e.addMaterial(AY,TU),e.addMaterial(mY,zU),e.addMaterial(yJ,EU),e.addMaterial(wJ,mU),e.addMaterial(kJ,PU),e.addLight(I$,vz),e.addLight(L0,yz),e.addLight(z0,xz),e.addLight(G0,hz),e.addLight(H0,bz),e.addLight(V0,az),e.addLight(j0,wz),e.addLight(q0,B2),e.addToneMapping(JZ,1),e.addToneMapping(KZ,2),e.addToneMapping(ZZ,3),e.addToneMapping(e$,4),e.addToneMapping(i$,6),e.addToneMapping(a$,7),e}return W(n)}(r1),N2=function(e){Y(n,e);var t=$(n);function n(){var e,r,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};V(this,n),i.forceWebGL?r=Z1:(r=R2,i.getFallback=function(){return console.warn("THREE.WebGPURenderer: WebGPU is not available, running under WebGL2 backend."),new Z1(i)});var a=new r(i);return(e=t.call(this,a,i)).library=new P2,e.isWebGPURenderer=!0,e}return W(n)}(d1);"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:FI}})),"undefined"!==typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=FI);var I2={type:"change"},D2={type:"start"},L2={type:"end"},O2=1e-6,F2=-1,U2=0,z2=1,G2=2,q2=3,H2=4,V2=new ii,j2=new ii,W2=new zi,X2=new zi,Y2=new zi,Q2=new Ui,J2=new zi,K2=new zi,Z2=new zi,$2=new zi,e3=function(e){Y(n,e);var t=$(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return V(this,n),(r=t.call(this,e,i)).enabled=!0,r.screen={left:0,top:0,width:0,height:0},r.rotateSpeed=1,r.zoomSpeed=1.2,r.panSpeed=.3,r.noRotate=!1,r.noZoom=!1,r.noPan=!1,r.staticMoving=!1,r.dynamicDampingFactor=.2,r.minDistance=0,r.maxDistance=1/0,r.minZoom=0,r.maxZoom=1/0,r.keys=["KeyA","KeyS","KeyD"],r.mouseButtons={LEFT:le.ROTATE,MIDDLE:le.DOLLY,RIGHT:le.PAN},r.state=F2,r.keyState=F2,r.target=new zi,r._lastPosition=new zi,r._lastZoom=1,r._touchZoomDistanceStart=0,r._touchZoomDistanceEnd=0,r._lastAngle=0,r._eye=new zi,r._movePrev=new ii,r._moveCurr=new ii,r._lastAxis=new zi,r._zoomStart=new ii,r._zoomEnd=new ii,r._panStart=new ii,r._panEnd=new ii,r._pointers=[],r._pointerPositions={},r._onPointerMove=n3.bind(K(r)),r._onPointerDown=t3.bind(K(r)),r._onPointerUp=r3.bind(K(r)),r._onPointerCancel=i3.bind(K(r)),r._onContextMenu=h3.bind(K(r)),r._onMouseWheel=c3.bind(K(r)),r._onKeyDown=o3.bind(K(r)),r._onKeyUp=a3.bind(K(r)),r._onTouchStart=d3.bind(K(r)),r._onTouchMove=f3.bind(K(r)),r._onTouchEnd=p3.bind(K(r)),r._onMouseDown=s3.bind(K(r)),r._onMouseMove=u3.bind(K(r)),r._onMouseUp=l3.bind(K(r)),r._target0=r.target.clone(),r._position0=r.object.position.clone(),r._up0=r.object.up.clone(),r._zoom0=r.object.zoom,null!==i&&(r.connect(),r.handleResize()),r.update(),r}return W(n,[{key:"connect",value:function(){window.addEventListener("keydown",this._onKeyDown),window.addEventListener("keyup",this._onKeyUp),this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointercancel",this._onPointerCancel),this.domElement.addEventListener("wheel",this._onMouseWheel,{passive:!1}),this.domElement.addEventListener("contextmenu",this._onContextMenu),this.domElement.style.touchAction="none"}},{key:"disconnect",value:function(){window.removeEventListener("keydown",this._onKeyDown),window.removeEventListener("keyup",this._onKeyUp),this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.domElement.removeEventListener("pointercancel",this._onPointerCancel),this.domElement.removeEventListener("wheel",this._onMouseWheel),this.domElement.removeEventListener("contextmenu",this._onContextMenu),this.domElement.style.touchAction="auto"}},{key:"dispose",value:function(){this.disconnect()}},{key:"handleResize",value:function(){var e=this.domElement.getBoundingClientRect(),t=this.domElement.ownerDocument.documentElement;this.screen.left=e.left+window.pageXOffset-t.clientLeft,this.screen.top=e.top+window.pageYOffset-t.clientTop,this.screen.width=e.width,this.screen.height=e.height}},{key:"update",value:function(){this._eye.subVectors(this.object.position,this.target),this.noRotate||this._rotateCamera(),this.noZoom||this._zoomCamera(),this.noPan||this._panCamera(),this.object.position.addVectors(this.target,this._eye),this.object.isPerspectiveCamera?(this._checkDistances(),this.object.lookAt(this.target),this._lastPosition.distanceToSquared(this.object.position)>O2&&(this.dispatchEvent(I2),this._lastPosition.copy(this.object.position))):this.object.isOrthographicCamera?(this.object.lookAt(this.target),(this._lastPosition.distanceToSquared(this.object.position)>O2||this._lastZoom!==this.object.zoom)&&(this.dispatchEvent(I2),this._lastPosition.copy(this.object.position),this._lastZoom=this.object.zoom)):console.warn("THREE.TrackballControls: Unsupported camera type.")}},{key:"reset",value:function(){this.state=F2,this.keyState=F2,this.target.copy(this._target0),this.object.position.copy(this._position0),this.object.up.copy(this._up0),this.object.zoom=this._zoom0,this.object.updateProjectionMatrix(),this._eye.subVectors(this.object.position,this.target),this.object.lookAt(this.target),this.dispatchEvent(I2),this._lastPosition.copy(this.object.position),this._lastZoom=this.object.zoom}},{key:"_panCamera",value:function(){if(j2.copy(this._panEnd).sub(this._panStart),j2.lengthSq()){if(this.object.isOrthographicCamera){var e=(this.object.right-this.object.left)/this.object.zoom/this.domElement.clientWidth,t=(this.object.top-this.object.bottom)/this.object.zoom/this.domElement.clientWidth;j2.x*=e,j2.y*=t}j2.multiplyScalar(this._eye.length()*this.panSpeed),X2.copy(this._eye).cross(this.object.up).setLength(j2.x),X2.add(W2.copy(this.object.up).setLength(j2.y)),this.object.position.add(X2),this.target.add(X2),this.staticMoving?this._panStart.copy(this._panEnd):this._panStart.add(j2.subVectors(this._panEnd,this._panStart).multiplyScalar(this.dynamicDampingFactor))}}},{key:"_rotateCamera",value:function(){$2.set(this._moveCurr.x-this._movePrev.x,this._moveCurr.y-this._movePrev.y,0);var e=$2.length();e?(this._eye.copy(this.object.position).sub(this.target),J2.copy(this._eye).normalize(),K2.copy(this.object.up).normalize(),Z2.crossVectors(K2,J2).normalize(),K2.setLength(this._moveCurr.y-this._movePrev.y),Z2.setLength(this._moveCurr.x-this._movePrev.x),$2.copy(K2.add(Z2)),Y2.crossVectors($2,this._eye).normalize(),e*=this.rotateSpeed,Q2.setFromAxisAngle(Y2,e),this._eye.applyQuaternion(Q2),this.object.up.applyQuaternion(Q2),this._lastAxis.copy(Y2),this._lastAngle=e):!this.staticMoving&&this._lastAngle&&(this._lastAngle*=Math.sqrt(1-this.dynamicDampingFactor),this._eye.copy(this.object.position).sub(this.target),Q2.setFromAxisAngle(this._lastAxis,this._lastAngle),this._eye.applyQuaternion(Q2),this.object.up.applyQuaternion(Q2)),this._movePrev.copy(this._moveCurr)}},{key:"_zoomCamera",value:function(){var e;this.state===H2?(e=this._touchZoomDistanceStart/this._touchZoomDistanceEnd,this._touchZoomDistanceStart=this._touchZoomDistanceEnd,this.object.isPerspectiveCamera?this._eye.multiplyScalar(e):this.object.isOrthographicCamera?(this.object.zoom=ri.clamp(this.object.zoom/e,this.minZoom,this.maxZoom),this._lastZoom!==this.object.zoom&&this.object.updateProjectionMatrix()):console.warn("THREE.TrackballControls: Unsupported camera type")):(1!==(e=1+(this._zoomEnd.y-this._zoomStart.y)*this.zoomSpeed)&&e>0&&(this.object.isPerspectiveCamera?this._eye.multiplyScalar(e):this.object.isOrthographicCamera?(this.object.zoom=ri.clamp(this.object.zoom/e,this.minZoom,this.maxZoom),this._lastZoom!==this.object.zoom&&this.object.updateProjectionMatrix()):console.warn("THREE.TrackballControls: Unsupported camera type")),this.staticMoving?this._zoomStart.copy(this._zoomEnd):this._zoomStart.y+=(this._zoomEnd.y-this._zoomStart.y)*this.dynamicDampingFactor)}},{key:"_getMouseOnScreen",value:function(e,t){return V2.set((e-this.screen.left)/this.screen.width,(t-this.screen.top)/this.screen.height),V2}},{key:"_getMouseOnCircle",value:function(e,t){return V2.set((e-.5*this.screen.width-this.screen.left)/(.5*this.screen.width),(this.screen.height+2*(this.screen.top-t))/this.screen.width),V2}},{key:"_addPointer",value:function(e){this._pointers.push(e)}},{key:"_removePointer",value:function(e){delete this._pointerPositions[e.pointerId];for(var t=0;t<this._pointers.length;t++)if(this._pointers[t].pointerId==e.pointerId)return void this._pointers.splice(t,1)}},{key:"_trackPointer",value:function(e){var t=this._pointerPositions[e.pointerId];void 0===t&&(t=new ii,this._pointerPositions[e.pointerId]=t),t.set(e.pageX,e.pageY)}},{key:"_getSecondPointerPosition",value:function(e){var t=e.pointerId===this._pointers[0].pointerId?this._pointers[1]:this._pointers[0];return this._pointerPositions[t.pointerId]}},{key:"_checkDistances",value:function(){this.noZoom&&this.noPan||(this._eye.lengthSq()>this.maxDistance*this.maxDistance&&(this.object.position.addVectors(this.target,this._eye.setLength(this.maxDistance)),this._zoomStart.copy(this._zoomEnd)),this._eye.lengthSq()<this.minDistance*this.minDistance&&(this.object.position.addVectors(this.target,this._eye.setLength(this.minDistance)),this._zoomStart.copy(this._zoomEnd)))}}]),n}(Av);function t3(e){!1!==this.enabled&&(0===this._pointers.length&&(this.domElement.setPointerCapture(e.pointerId),this.domElement.addEventListener("pointermove",this._onPointerMove),this.domElement.addEventListener("pointerup",this._onPointerUp)),this._addPointer(e),"touch"===e.pointerType?this._onTouchStart(e):this._onMouseDown(e))}function n3(e){!1!==this.enabled&&("touch"===e.pointerType?this._onTouchMove(e):this._onMouseMove(e))}function r3(e){!1!==this.enabled&&("touch"===e.pointerType?this._onTouchEnd(e):this._onMouseUp(),this._removePointer(e),0===this._pointers.length&&(this.domElement.releasePointerCapture(e.pointerId),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp)))}function i3(e){this._removePointer(e)}function a3(){!1!==this.enabled&&(this.keyState=F2,window.addEventListener("keydown",this._onKeyDown))}function o3(e){!1!==this.enabled&&(window.removeEventListener("keydown",this._onKeyDown),this.keyState===F2&&(e.code!==this.keys[U2]||this.noRotate?e.code!==this.keys[z2]||this.noZoom?e.code!==this.keys[G2]||this.noPan||(this.keyState=G2):this.keyState=z2:this.keyState=U2))}function s3(e){var t;switch(e.button){case 0:t=this.mouseButtons.LEFT;break;case 1:t=this.mouseButtons.MIDDLE;break;case 2:t=this.mouseButtons.RIGHT;break;default:t=-1}switch(t){case le.DOLLY:this.state=z2;break;case le.ROTATE:this.state=U2;break;case le.PAN:this.state=G2;break;default:this.state=F2}var n=this.keyState!==F2?this.keyState:this.state;n!==U2||this.noRotate?n!==z2||this.noZoom?n!==G2||this.noPan||(this._panStart.copy(this._getMouseOnScreen(e.pageX,e.pageY)),this._panEnd.copy(this._panStart)):(this._zoomStart.copy(this._getMouseOnScreen(e.pageX,e.pageY)),this._zoomEnd.copy(this._zoomStart)):(this._moveCurr.copy(this._getMouseOnCircle(e.pageX,e.pageY)),this._movePrev.copy(this._moveCurr)),this.dispatchEvent(D2)}function u3(e){var t=this.keyState!==F2?this.keyState:this.state;t!==U2||this.noRotate?t!==z2||this.noZoom?t!==G2||this.noPan||this._panEnd.copy(this._getMouseOnScreen(e.pageX,e.pageY)):this._zoomEnd.copy(this._getMouseOnScreen(e.pageX,e.pageY)):(this._movePrev.copy(this._moveCurr),this._moveCurr.copy(this._getMouseOnCircle(e.pageX,e.pageY)))}function l3(){this.state=F2,this.dispatchEvent(L2)}function c3(e){if(!1!==this.enabled&&!0!==this.noZoom){switch(e.preventDefault(),e.deltaMode){case 2:this._zoomStart.y-=.025*e.deltaY;break;case 1:this._zoomStart.y-=.01*e.deltaY;break;default:this._zoomStart.y-=25e-5*e.deltaY}this.dispatchEvent(D2),this.dispatchEvent(L2)}}function h3(e){!1!==this.enabled&&e.preventDefault()}function d3(e){if(this._trackPointer(e),1===this._pointers.length)this.state=q2,this._moveCurr.copy(this._getMouseOnCircle(this._pointers[0].pageX,this._pointers[0].pageY)),this._movePrev.copy(this._moveCurr);else{this.state=H2;var t=this._pointers[0].pageX-this._pointers[1].pageX,n=this._pointers[0].pageY-this._pointers[1].pageY;this._touchZoomDistanceEnd=this._touchZoomDistanceStart=Math.sqrt(t*t+n*n);var r=(this._pointers[0].pageX+this._pointers[1].pageX)/2,i=(this._pointers[0].pageY+this._pointers[1].pageY)/2;this._panStart.copy(this._getMouseOnScreen(r,i)),this._panEnd.copy(this._panStart)}this.dispatchEvent(D2)}function f3(e){if(this._trackPointer(e),1===this._pointers.length)this._movePrev.copy(this._moveCurr),this._moveCurr.copy(this._getMouseOnCircle(e.pageX,e.pageY));else{var t=this._getSecondPointerPosition(e),n=e.pageX-t.x,r=e.pageY-t.y;this._touchZoomDistanceEnd=Math.sqrt(n*n+r*r);var i=(e.pageX+t.x)/2,a=(e.pageY+t.y)/2;this._panEnd.copy(this._getMouseOnScreen(i,a))}}function p3(e){switch(this._pointers.length){case 0:this.state=F2;break;case 1:this.state=q2,this._moveCurr.copy(this._getMouseOnCircle(e.pageX,e.pageY)),this._movePrev.copy(this._moveCurr);break;case 2:this.state=H2;for(var t=0;t<this._pointers.length;t++)if(this._pointers[t].pointerId!==e.pointerId){var n=this._pointerPositions[this._pointers[t].pointerId];this._moveCurr.copy(this._getMouseOnCircle(n.x,n.y)),this._movePrev.copy(this._moveCurr);break}}this.dispatchEvent(L2)}var A3={type:"change"},v3={type:"start"},m3={type:"end"},g3=new Aa,y3=new vs,b3=Math.cos(70*ri.DEG2RAD),x3=new zi,_3=2*Math.PI,w3=-1,S3=0,M3=1,k3=2,T3=3,E3=4,C3=5,R3=6,B3=1e-6,P3=function(e){Y(n,e);var t=$(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return V(this,n),(r=t.call(this,e,i)).state=w3,r.enabled=!0,r.target=new zi,r.cursor=new zi,r.minDistance=0,r.maxDistance=1/0,r.minZoom=0,r.maxZoom=1/0,r.minTargetRadius=0,r.maxTargetRadius=1/0,r.minPolarAngle=0,r.maxPolarAngle=Math.PI,r.minAzimuthAngle=-1/0,r.maxAzimuthAngle=1/0,r.enableDamping=!1,r.dampingFactor=.05,r.enableZoom=!0,r.zoomSpeed=1,r.enableRotate=!0,r.rotateSpeed=1,r.enablePan=!0,r.panSpeed=1,r.screenSpacePanning=!0,r.keyPanSpeed=7,r.zoomToCursor=!1,r.autoRotate=!1,r.autoRotateSpeed=2,r.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},r.mouseButtons={LEFT:le.ROTATE,MIDDLE:le.DOLLY,RIGHT:le.PAN},r.touches={ONE:ce.ROTATE,TWO:ce.DOLLY_PAN},r.target0=r.target.clone(),r.position0=r.object.position.clone(),r.zoom0=r.object.zoom,r._domElementKeyEvents=null,r._lastPosition=new zi,r._lastQuaternion=new Ui,r._lastTargetPosition=new zi,r._quat=(new Ui).setFromUnitVectors(e.up,new zi(0,1,0)),r._quatInverse=r._quat.clone().invert(),r._spherical=new CA,r._sphericalDelta=new CA,r._scale=1,r._panOffset=new zi,r._rotateStart=new ii,r._rotateEnd=new ii,r._rotateDelta=new ii,r._panStart=new ii,r._panEnd=new ii,r._panDelta=new ii,r._dollyStart=new ii,r._dollyEnd=new ii,r._dollyDelta=new ii,r._dollyDirection=new zi,r._mouse=new ii,r._performCursorZoom=!1,r._pointers=[],r._pointerPositions={},r._controlActive=!1,r._onPointerMove=I3.bind(K(r)),r._onPointerDown=N3.bind(K(r)),r._onPointerUp=D3.bind(K(r)),r._onContextMenu=q3.bind(K(r)),r._onMouseWheel=F3.bind(K(r)),r._onKeyDown=U3.bind(K(r)),r._onTouchStart=z3.bind(K(r)),r._onTouchMove=G3.bind(K(r)),r._onMouseDown=L3.bind(K(r)),r._onMouseMove=O3.bind(K(r)),r._interceptControlDown=H3.bind(K(r)),r._interceptControlUp=V3.bind(K(r)),null!==r.domElement&&r.connect(),r.update(),r}return W(n,[{key:"connect",value:function(){this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointercancel",this._onPointerUp),this.domElement.addEventListener("contextmenu",this._onContextMenu),this.domElement.addEventListener("wheel",this._onMouseWheel,{passive:!1}),this.domElement.getRootNode().addEventListener("keydown",this._interceptControlDown,{passive:!0,capture:!0}),this.domElement.style.touchAction="none"}},{key:"disconnect",value:function(){this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.domElement.removeEventListener("pointercancel",this._onPointerUp),this.domElement.removeEventListener("wheel",this._onMouseWheel),this.domElement.removeEventListener("contextmenu",this._onContextMenu),this.stopListenToKeyEvents(),this.domElement.getRootNode().removeEventListener("keydown",this._interceptControlDown,{capture:!0}),this.domElement.style.touchAction="auto"}},{key:"dispose",value:function(){this.disconnect()}},{key:"getPolarAngle",value:function(){return this._spherical.phi}},{key:"getAzimuthalAngle",value:function(){return this._spherical.theta}},{key:"getDistance",value:function(){return this.object.position.distanceTo(this.target)}},{key:"listenToKeyEvents",value:function(e){e.addEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=e}},{key:"stopListenToKeyEvents",value:function(){null!==this._domElementKeyEvents&&(this._domElementKeyEvents.removeEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=null)}},{key:"saveState",value:function(){this.target0.copy(this.target),this.position0.copy(this.object.position),this.zoom0=this.object.zoom}},{key:"reset",value:function(){this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this.dispatchEvent(A3),this.update(),this.state=w3}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this.object.position;x3.copy(t).sub(this.target),x3.applyQuaternion(this._quat),this._spherical.setFromVector3(x3),this.autoRotate&&this.state===w3&&this._rotateLeft(this._getAutoRotationAngle(e)),this.enableDamping?(this._spherical.theta+=this._sphericalDelta.theta*this.dampingFactor,this._spherical.phi+=this._sphericalDelta.phi*this.dampingFactor):(this._spherical.theta+=this._sphericalDelta.theta,this._spherical.phi+=this._sphericalDelta.phi);var n=this.minAzimuthAngle,r=this.maxAzimuthAngle;isFinite(n)&&isFinite(r)&&(n<-Math.PI?n+=_3:n>Math.PI&&(n-=_3),r<-Math.PI?r+=_3:r>Math.PI&&(r-=_3),this._spherical.theta=n<=r?Math.max(n,Math.min(r,this._spherical.theta)):this._spherical.theta>(n+r)/2?Math.max(n,this._spherical.theta):Math.min(r,this._spherical.theta)),this._spherical.phi=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,this._spherical.phi)),this._spherical.makeSafe(),!0===this.enableDamping?this.target.addScaledVector(this._panOffset,this.dampingFactor):this.target.add(this._panOffset),this.target.sub(this.cursor),this.target.clampLength(this.minTargetRadius,this.maxTargetRadius),this.target.add(this.cursor);var i=!1;if(this.zoomToCursor&&this._performCursorZoom||this.object.isOrthographicCamera)this._spherical.radius=this._clampDistance(this._spherical.radius);else{var a=this._spherical.radius;this._spherical.radius=this._clampDistance(this._spherical.radius*this._scale),i=a!=this._spherical.radius}if(x3.setFromSpherical(this._spherical),x3.applyQuaternion(this._quatInverse),t.copy(this.target).add(x3),this.object.lookAt(this.target),!0===this.enableDamping?(this._sphericalDelta.theta*=1-this.dampingFactor,this._sphericalDelta.phi*=1-this.dampingFactor,this._panOffset.multiplyScalar(1-this.dampingFactor)):(this._sphericalDelta.set(0,0,0),this._panOffset.set(0,0,0)),this.zoomToCursor&&this._performCursorZoom){var o=null;if(this.object.isPerspectiveCamera){var s=x3.length(),u=s-(o=this._clampDistance(s*this._scale));this.object.position.addScaledVector(this._dollyDirection,u),this.object.updateMatrixWorld(),i=!!u}else if(this.object.isOrthographicCamera){var l=new zi(this._mouse.x,this._mouse.y,0);l.unproject(this.object);var c=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),this.object.updateProjectionMatrix(),i=c!==this.object.zoom;var h=new zi(this._mouse.x,this._mouse.y,0);h.unproject(this.object),this.object.position.sub(h).add(l),this.object.updateMatrixWorld(),o=x3.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),this.zoomToCursor=!1;null!==o&&(this.screenSpacePanning?this.target.set(0,0,-1).transformDirection(this.object.matrix).multiplyScalar(o).add(this.object.position):(g3.origin.copy(this.object.position),g3.direction.set(0,0,-1).transformDirection(this.object.matrix),Math.abs(this.object.up.dot(g3.direction))<b3?this.object.lookAt(this.target):(y3.setFromNormalAndCoplanarPoint(this.object.up,this.target),g3.intersectPlane(y3,this.target))))}else if(this.object.isOrthographicCamera){var d=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),d!==this.object.zoom&&(this.object.updateProjectionMatrix(),i=!0)}return this._scale=1,this._performCursorZoom=!1,!!(i||this._lastPosition.distanceToSquared(this.object.position)>B3||8*(1-this._lastQuaternion.dot(this.object.quaternion))>B3||this._lastTargetPosition.distanceToSquared(this.target)>B3)&&(this.dispatchEvent(A3),this._lastPosition.copy(this.object.position),this._lastQuaternion.copy(this.object.quaternion),this._lastTargetPosition.copy(this.target),!0)}},{key:"_getAutoRotationAngle",value:function(e){return null!==e?_3/60*this.autoRotateSpeed*e:_3/60/60*this.autoRotateSpeed}},{key:"_getZoomScale",value:function(e){var t=Math.abs(.01*e);return Math.pow(.95,this.zoomSpeed*t)}},{key:"_rotateLeft",value:function(e){this._sphericalDelta.theta-=e}},{key:"_rotateUp",value:function(e){this._sphericalDelta.phi-=e}},{key:"_panLeft",value:function(e,t){x3.setFromMatrixColumn(t,0),x3.multiplyScalar(-e),this._panOffset.add(x3)}},{key:"_panUp",value:function(e,t){!0===this.screenSpacePanning?x3.setFromMatrixColumn(t,1):(x3.setFromMatrixColumn(t,0),x3.crossVectors(this.object.up,x3)),x3.multiplyScalar(e),this._panOffset.add(x3)}},{key:"_pan",value:function(e,t){var n=this.domElement;if(this.object.isPerspectiveCamera){var r=this.object.position;x3.copy(r).sub(this.target);var i=x3.length();i*=Math.tan(this.object.fov/2*Math.PI/180),this._panLeft(2*e*i/n.clientHeight,this.object.matrix),this._panUp(2*t*i/n.clientHeight,this.object.matrix)}else this.object.isOrthographicCamera?(this._panLeft(e*(this.object.right-this.object.left)/this.object.zoom/n.clientWidth,this.object.matrix),this._panUp(t*(this.object.top-this.object.bottom)/this.object.zoom/n.clientHeight,this.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),this.enablePan=!1)}},{key:"_dollyOut",value:function(e){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale/=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}},{key:"_dollyIn",value:function(e){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale*=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}},{key:"_updateZoomParameters",value:function(e,t){if(this.zoomToCursor){this._performCursorZoom=!0;var n=this.domElement.getBoundingClientRect(),r=e-n.left,i=t-n.top,a=n.width,o=n.height;this._mouse.x=r/a*2-1,this._mouse.y=-i/o*2+1,this._dollyDirection.set(this._mouse.x,this._mouse.y,1).unproject(this.object).sub(this.object.position).normalize()}}},{key:"_clampDistance",value:function(e){return Math.max(this.minDistance,Math.min(this.maxDistance,e))}},{key:"_handleMouseDownRotate",value:function(e){this._rotateStart.set(e.clientX,e.clientY)}},{key:"_handleMouseDownDolly",value:function(e){this._updateZoomParameters(e.clientX,e.clientX),this._dollyStart.set(e.clientX,e.clientY)}},{key:"_handleMouseDownPan",value:function(e){this._panStart.set(e.clientX,e.clientY)}},{key:"_handleMouseMoveRotate",value:function(e){this._rotateEnd.set(e.clientX,e.clientY),this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);var t=this.domElement;this._rotateLeft(_3*this._rotateDelta.x/t.clientHeight),this._rotateUp(_3*this._rotateDelta.y/t.clientHeight),this._rotateStart.copy(this._rotateEnd),this.update()}},{key:"_handleMouseMoveDolly",value:function(e){this._dollyEnd.set(e.clientX,e.clientY),this._dollyDelta.subVectors(this._dollyEnd,this._dollyStart),this._dollyDelta.y>0?this._dollyOut(this._getZoomScale(this._dollyDelta.y)):this._dollyDelta.y<0&&this._dollyIn(this._getZoomScale(this._dollyDelta.y)),this._dollyStart.copy(this._dollyEnd),this.update()}},{key:"_handleMouseMovePan",value:function(e){this._panEnd.set(e.clientX,e.clientY),this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd),this.update()}},{key:"_handleMouseWheel",value:function(e){this._updateZoomParameters(e.clientX,e.clientY),e.deltaY<0?this._dollyIn(this._getZoomScale(e.deltaY)):e.deltaY>0&&this._dollyOut(this._getZoomScale(e.deltaY)),this.update()}},{key:"_handleKeyDown",value:function(e){var t=!1;switch(e.code){case this.keys.UP:e.ctrlKey||e.metaKey||e.shiftKey?this._rotateUp(_3*this.rotateSpeed/this.domElement.clientHeight):this._pan(0,this.keyPanSpeed),t=!0;break;case this.keys.BOTTOM:e.ctrlKey||e.metaKey||e.shiftKey?this._rotateUp(-_3*this.rotateSpeed/this.domElement.clientHeight):this._pan(0,-this.keyPanSpeed),t=!0;break;case this.keys.LEFT:e.ctrlKey||e.metaKey||e.shiftKey?this._rotateLeft(_3*this.rotateSpeed/this.domElement.clientHeight):this._pan(this.keyPanSpeed,0),t=!0;break;case this.keys.RIGHT:e.ctrlKey||e.metaKey||e.shiftKey?this._rotateLeft(-_3*this.rotateSpeed/this.domElement.clientHeight):this._pan(-this.keyPanSpeed,0),t=!0}t&&(e.preventDefault(),this.update())}},{key:"_handleTouchStartRotate",value:function(e){if(1===this._pointers.length)this._rotateStart.set(e.pageX,e.pageY);else{var t=this._getSecondPointerPosition(e),n=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);this._rotateStart.set(n,r)}}},{key:"_handleTouchStartPan",value:function(e){if(1===this._pointers.length)this._panStart.set(e.pageX,e.pageY);else{var t=this._getSecondPointerPosition(e),n=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);this._panStart.set(n,r)}}},{key:"_handleTouchStartDolly",value:function(e){var t=this._getSecondPointerPosition(e),n=e.pageX-t.x,r=e.pageY-t.y,i=Math.sqrt(n*n+r*r);this._dollyStart.set(0,i)}},{key:"_handleTouchStartDollyPan",value:function(e){this.enableZoom&&this._handleTouchStartDolly(e),this.enablePan&&this._handleTouchStartPan(e)}},{key:"_handleTouchStartDollyRotate",value:function(e){this.enableZoom&&this._handleTouchStartDolly(e),this.enableRotate&&this._handleTouchStartRotate(e)}},{key:"_handleTouchMoveRotate",value:function(e){if(1==this._pointers.length)this._rotateEnd.set(e.pageX,e.pageY);else{var t=this._getSecondPointerPosition(e),n=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);this._rotateEnd.set(n,r)}this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);var i=this.domElement;this._rotateLeft(_3*this._rotateDelta.x/i.clientHeight),this._rotateUp(_3*this._rotateDelta.y/i.clientHeight),this._rotateStart.copy(this._rotateEnd)}},{key:"_handleTouchMovePan",value:function(e){if(1===this._pointers.length)this._panEnd.set(e.pageX,e.pageY);else{var t=this._getSecondPointerPosition(e),n=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);this._panEnd.set(n,r)}this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd)}},{key:"_handleTouchMoveDolly",value:function(e){var t=this._getSecondPointerPosition(e),n=e.pageX-t.x,r=e.pageY-t.y,i=Math.sqrt(n*n+r*r);this._dollyEnd.set(0,i),this._dollyDelta.set(0,Math.pow(this._dollyEnd.y/this._dollyStart.y,this.zoomSpeed)),this._dollyOut(this._dollyDelta.y),this._dollyStart.copy(this._dollyEnd);var a=.5*(e.pageX+t.x),o=.5*(e.pageY+t.y);this._updateZoomParameters(a,o)}},{key:"_handleTouchMoveDollyPan",value:function(e){this.enableZoom&&this._handleTouchMoveDolly(e),this.enablePan&&this._handleTouchMovePan(e)}},{key:"_handleTouchMoveDollyRotate",value:function(e){this.enableZoom&&this._handleTouchMoveDolly(e),this.enableRotate&&this._handleTouchMoveRotate(e)}},{key:"_addPointer",value:function(e){this._pointers.push(e.pointerId)}},{key:"_removePointer",value:function(e){delete this._pointerPositions[e.pointerId];for(var t=0;t<this._pointers.length;t++)if(this._pointers[t]==e.pointerId)return void this._pointers.splice(t,1)}},{key:"_isTrackingPointer",value:function(e){for(var t=0;t<this._pointers.length;t++)if(this._pointers[t]==e.pointerId)return!0;return!1}},{key:"_trackPointer",value:function(e){var t=this._pointerPositions[e.pointerId];void 0===t&&(t=new ii,this._pointerPositions[e.pointerId]=t),t.set(e.pageX,e.pageY)}},{key:"_getSecondPointerPosition",value:function(e){var t=e.pointerId===this._pointers[0]?this._pointers[1]:this._pointers[0];return this._pointerPositions[t]}},{key:"_customWheelEvent",value:function(e){var t=e.deltaMode,n={clientX:e.clientX,clientY:e.clientY,deltaY:e.deltaY};switch(t){case 1:n.deltaY*=16;break;case 2:n.deltaY*=100}return e.ctrlKey&&!this._controlActive&&(n.deltaY*=10),n}}]),n}(Av);function N3(e){!1!==this.enabled&&(0===this._pointers.length&&(this.domElement.setPointerCapture(e.pointerId),this.domElement.addEventListener("pointermove",this._onPointerMove),this.domElement.addEventListener("pointerup",this._onPointerUp)),this._isTrackingPointer(e)||(this._addPointer(e),"touch"===e.pointerType?this._onTouchStart(e):this._onMouseDown(e)))}function I3(e){!1!==this.enabled&&("touch"===e.pointerType?this._onTouchMove(e):this._onMouseMove(e))}function D3(e){switch(this._removePointer(e),this._pointers.length){case 0:this.domElement.releasePointerCapture(e.pointerId),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.dispatchEvent(m3),this.state=w3;break;case 1:var t=this._pointers[0],n=this._pointerPositions[t];this._onTouchStart({pointerId:t,pageX:n.x,pageY:n.y})}}function L3(e){var t;switch(e.button){case 0:t=this.mouseButtons.LEFT;break;case 1:t=this.mouseButtons.MIDDLE;break;case 2:t=this.mouseButtons.RIGHT;break;default:t=-1}switch(t){case le.DOLLY:if(!1===this.enableZoom)return;this._handleMouseDownDolly(e),this.state=M3;break;case le.ROTATE:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===this.enablePan)return;this._handleMouseDownPan(e),this.state=k3}else{if(!1===this.enableRotate)return;this._handleMouseDownRotate(e),this.state=S3}break;case le.PAN:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===this.enableRotate)return;this._handleMouseDownRotate(e),this.state=S3}else{if(!1===this.enablePan)return;this._handleMouseDownPan(e),this.state=k3}break;default:this.state=w3}this.state!==w3&&this.dispatchEvent(v3)}function O3(e){switch(this.state){case S3:if(!1===this.enableRotate)return;this._handleMouseMoveRotate(e);break;case M3:if(!1===this.enableZoom)return;this._handleMouseMoveDolly(e);break;case k3:if(!1===this.enablePan)return;this._handleMouseMovePan(e)}}function F3(e){!1!==this.enabled&&!1!==this.enableZoom&&this.state===w3&&(e.preventDefault(),this.dispatchEvent(v3),this._handleMouseWheel(this._customWheelEvent(e)),this.dispatchEvent(m3))}function U3(e){!1!==this.enabled&&!1!==this.enablePan&&this._handleKeyDown(e)}function z3(e){switch(this._trackPointer(e),this._pointers.length){case 1:switch(this.touches.ONE){case ce.ROTATE:if(!1===this.enableRotate)return;this._handleTouchStartRotate(e),this.state=T3;break;case ce.PAN:if(!1===this.enablePan)return;this._handleTouchStartPan(e),this.state=E3;break;default:this.state=w3}break;case 2:switch(this.touches.TWO){case ce.DOLLY_PAN:if(!1===this.enableZoom&&!1===this.enablePan)return;this._handleTouchStartDollyPan(e),this.state=C3;break;case ce.DOLLY_ROTATE:if(!1===this.enableZoom&&!1===this.enableRotate)return;this._handleTouchStartDollyRotate(e),this.state=R3;break;default:this.state=w3}break;default:this.state=w3}this.state!==w3&&this.dispatchEvent(v3)}function G3(e){switch(this._trackPointer(e),this.state){case T3:if(!1===this.enableRotate)return;this._handleTouchMoveRotate(e),this.update();break;case E3:if(!1===this.enablePan)return;this._handleTouchMovePan(e),this.update();break;case C3:if(!1===this.enableZoom&&!1===this.enablePan)return;this._handleTouchMoveDollyPan(e),this.update();break;case R3:if(!1===this.enableZoom&&!1===this.enableRotate)return;this._handleTouchMoveDollyRotate(e),this.update();break;default:this.state=w3}}function q3(e){!1!==this.enabled&&e.preventDefault()}function H3(e){"Control"===e.key&&(this._controlActive=!0,this.domElement.getRootNode().addEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}function V3(e){"Control"===e.key&&(this._controlActive=!1,this.domElement.getRootNode().removeEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}var j3={type:"change"},W3=1e-6,X3=new Ui,Y3=function(e){Y(n,e);var t=$(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return V(this,n),(r=t.call(this,e,i)).movementSpeed=1,r.rollSpeed=.005,r.dragToLook=!1,r.autoForward=!1,r._moveState={up:0,down:0,left:0,right:0,forward:0,back:0,pitchUp:0,pitchDown:0,yawLeft:0,yawRight:0,rollLeft:0,rollRight:0},r._moveVector=new zi(0,0,0),r._rotationVector=new zi(0,0,0),r._lastQuaternion=new Ui,r._lastPosition=new zi,r._status=0,r._onKeyDown=Q3.bind(K(r)),r._onKeyUp=J3.bind(K(r)),r._onPointerMove=Z3.bind(K(r)),r._onPointerDown=K3.bind(K(r)),r._onPointerUp=$3.bind(K(r)),r._onPointerCancel=e4.bind(K(r)),r._onContextMenu=t4.bind(K(r)),null!==i&&r.connect(),r}return W(n,[{key:"connect",value:function(){window.addEventListener("keydown",this._onKeyDown),window.addEventListener("keyup",this._onKeyUp),this.domElement.addEventListener("pointermove",this._onPointerMove),this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointerup",this._onPointerUp),this.domElement.addEventListener("pointercancel",this._onPointerCancel),this.domElement.addEventListener("contextmenu",this._onContextMenu)}},{key:"disconnect",value:function(){window.removeEventListener("keydown",this._onKeyDown),window.removeEventListener("keyup",this._onKeyUp),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.domElement.removeEventListener("pointercancel",this._onPointerCancel),this.domElement.removeEventListener("contextmenu",this._onContextMenu)}},{key:"dispose",value:function(){this.disconnect()}},{key:"update",value:function(e){if(!1!==this.enabled){var t=this.object,n=e*this.movementSpeed,r=e*this.rollSpeed;t.translateX(this._moveVector.x*n),t.translateY(this._moveVector.y*n),t.translateZ(this._moveVector.z*n),X3.set(this._rotationVector.x*r,this._rotationVector.y*r,this._rotationVector.z*r,1).normalize(),t.quaternion.multiply(X3),(this._lastPosition.distanceToSquared(t.position)>W3||8*(1-this._lastQuaternion.dot(t.quaternion))>W3)&&(this.dispatchEvent(j3),this._lastQuaternion.copy(t.quaternion),this._lastPosition.copy(t.position))}}},{key:"_updateMovementVector",value:function(){var e=this._moveState.forward||this.autoForward&&!this._moveState.back?1:0;this._moveVector.x=-this._moveState.left+this._moveState.right,this._moveVector.y=-this._moveState.down+this._moveState.up,this._moveVector.z=-e+this._moveState.back}},{key:"_updateRotationVector",value:function(){this._rotationVector.x=-this._moveState.pitchDown+this._moveState.pitchUp,this._rotationVector.y=-this._moveState.yawRight+this._moveState.yawLeft,this._rotationVector.z=-this._moveState.rollRight+this._moveState.rollLeft}},{key:"_getContainerDimensions",value:function(){return this.domElement!=document?{size:[this.domElement.offsetWidth,this.domElement.offsetHeight],offset:[this.domElement.offsetLeft,this.domElement.offsetTop]}:{size:[window.innerWidth,window.innerHeight],offset:[0,0]}}}]),n}(Av);function Q3(e){if(!e.altKey&&!1!==this.enabled){switch(e.code){case"ShiftLeft":case"ShiftRight":this.movementSpeedMultiplier=.1;break;case"KeyW":this._moveState.forward=1;break;case"KeyS":this._moveState.back=1;break;case"KeyA":this._moveState.left=1;break;case"KeyD":this._moveState.right=1;break;case"KeyR":this._moveState.up=1;break;case"KeyF":this._moveState.down=1;break;case"ArrowUp":this._moveState.pitchUp=1;break;case"ArrowDown":this._moveState.pitchDown=1;break;case"ArrowLeft":this._moveState.yawLeft=1;break;case"ArrowRight":this._moveState.yawRight=1;break;case"KeyQ":this._moveState.rollLeft=1;break;case"KeyE":this._moveState.rollRight=1}this._updateMovementVector(),this._updateRotationVector()}}function J3(e){if(!1!==this.enabled){switch(e.code){case"ShiftLeft":case"ShiftRight":this.movementSpeedMultiplier=1;break;case"KeyW":this._moveState.forward=0;break;case"KeyS":this._moveState.back=0;break;case"KeyA":this._moveState.left=0;break;case"KeyD":this._moveState.right=0;break;case"KeyR":this._moveState.up=0;break;case"KeyF":this._moveState.down=0;break;case"ArrowUp":this._moveState.pitchUp=0;break;case"ArrowDown":this._moveState.pitchDown=0;break;case"ArrowLeft":this._moveState.yawLeft=0;break;case"ArrowRight":this._moveState.yawRight=0;break;case"KeyQ":this._moveState.rollLeft=0;break;case"KeyE":this._moveState.rollRight=0}this._updateMovementVector(),this._updateRotationVector()}}function K3(e){if(!1!==this.enabled)if(this.dragToLook)this._status++;else{switch(e.button){case 0:this._moveState.forward=1;break;case 2:this._moveState.back=1}this._updateMovementVector()}}function Z3(e){if(!1!==this.enabled&&(!this.dragToLook||this._status>0)){var t=this._getContainerDimensions(),n=t.size[0]/2,r=t.size[1]/2;this._moveState.yawLeft=-(e.pageX-t.offset[0]-n)/n,this._moveState.pitchDown=(e.pageY-t.offset[1]-r)/r,this._updateRotationVector()}}function $3(e){if(!1!==this.enabled){if(this.dragToLook)this._status--,this._moveState.yawLeft=this._moveState.pitchDown=0;else{switch(e.button){case 0:this._moveState.forward=0;break;case 2:this._moveState.back=0}this._updateMovementVector()}this._updateRotationVector()}}function e4(){!1!==this.enabled&&(this.dragToLook?(this._status=0,this._moveState.yawLeft=this._moveState.pitchDown=0):(this._moveState.forward=0,this._moveState.back=0,this._updateMovementVector()),this._updateRotationVector())}function t4(e){!1!==this.enabled&&e.preventDefault()}var n4={name:"CopyShader",uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform float opacity;\n\n\t\tuniform sampler2D tDiffuse;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvec4 texel = texture2D( tDiffuse, vUv );\n\t\t\tgl_FragColor = opacity * texel;\n\n\n\t\t}"},r4=function(){function e(){V(this,e),this.isPass=!0,this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}return W(e,[{key:"setSize",value:function(){}},{key:"render",value:function(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}},{key:"dispose",value:function(){}}]),e}(),i4=new Ds(-1,1,1,-1,0,1),a4=new(function(e){Y(n,e);var t=$(n);function n(){var e;return V(this,n),(e=t.call(this)).setAttribute("position",new Ro([-1,3,0,-1,-1,0,3,-1,0],3)),e.setAttribute("uv",new Ro([0,2,0,0,2,0],2)),e}return W(n)}(Fo)),o4=function(){function e(t){V(this,e),this._mesh=new Jo(a4,t)}return W(e,[{key:"dispose",value:function(){this._mesh.geometry.dispose()}},{key:"render",value:function(e){e.render(this._mesh,i4)}},{key:"material",get:function(){return this._mesh.material},set:function(e){this._mesh.material=e}}]),e}(),s4=function(e){Y(n,e);var t=$(n);function n(e,r){var i;return V(this,n),(i=t.call(this)).textureID=void 0!==r?r:"tDiffuse",e instanceof rs?(i.uniforms=e.uniforms,i.material=e):e&&(i.uniforms=ns.clone(e.uniforms),i.material=new rs({name:void 0!==e.name?e.name:"unspecified",defines:Object.assign({},e.defines),uniforms:i.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),i.fsQuad=new o4(i.material),i}return W(n,[{key:"render",value:function(e,t,n){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=n.texture),this.fsQuad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this.fsQuad.render(e))}},{key:"dispose",value:function(){this.material.dispose(),this.fsQuad.dispose()}}]),n}(r4),u4=function(e){Y(n,e);var t=$(n);function n(e,r){var i;return V(this,n),(i=t.call(this)).scene=e,i.camera=r,i.clear=!0,i.needsSwap=!1,i.inverse=!1,i}return W(n,[{key:"render",value:function(e,t,n){var r,i,a=e.getContext(),o=e.state;o.buffers.color.setMask(!1),o.buffers.depth.setMask(!1),o.buffers.color.setLocked(!0),o.buffers.depth.setLocked(!0),this.inverse?(r=0,i=1):(r=1,i=0),o.buffers.stencil.setTest(!0),o.buffers.stencil.setOp(a.REPLACE,a.REPLACE,a.REPLACE),o.buffers.stencil.setFunc(a.ALWAYS,r,4294967295),o.buffers.stencil.setClear(i),o.buffers.stencil.setLocked(!0),e.setRenderTarget(n),this.clear&&e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(t),this.clear&&e.clear(),e.render(this.scene,this.camera),o.buffers.color.setLocked(!1),o.buffers.depth.setLocked(!1),o.buffers.color.setMask(!0),o.buffers.depth.setMask(!0),o.buffers.stencil.setLocked(!1),o.buffers.stencil.setFunc(a.EQUAL,1,4294967295),o.buffers.stencil.setOp(a.KEEP,a.KEEP,a.KEEP),o.buffers.stencil.setLocked(!0)}}]),n}(r4),l4=function(e){Y(n,e);var t=$(n);function n(){var e;return V(this,n),(e=t.call(this)).needsSwap=!1,e}return W(n,[{key:"render",value:function(e){e.state.buffers.stencil.setLocked(!1),e.state.buffers.stencil.setTest(!1)}}]),n}(r4),c4=function(){function e(t,n){if(V(this,e),this.renderer=t,this._pixelRatio=t.getPixelRatio(),void 0===n){var r=t.getSize(new ii);this._width=r.width,this._height=r.height,(n=new Ii(this._width*this._pixelRatio,this._height*this._pixelRatio,{type:Gt})).texture.name="EffectComposer.rt1"}else this._width=n.width,this._height=n.height;this.renderTarget1=n,this.renderTarget2=n.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],this.copyPass=new s4(n4),this.copyPass.material.blending=_e,this.clock=new Xp}return W(e,[{key:"swapBuffers",value:function(){var e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e}},{key:"addPass",value:function(e){this.passes.push(e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}},{key:"insertPass",value:function(e,t){this.passes.splice(t,0,e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}},{key:"removePass",value:function(e){var t=this.passes.indexOf(e);-1!==t&&this.passes.splice(t,1)}},{key:"isLastEnabledPass",value:function(e){for(var t=e+1;t<this.passes.length;t++)if(this.passes[t].enabled)return!1;return!0}},{key:"render",value:function(e){void 0===e&&(e=this.clock.getDelta());for(var t=this.renderer.getRenderTarget(),n=!1,r=0,i=this.passes.length;r<i;r++){var a=this.passes[r];if(!1!==a.enabled){if(a.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(r),a.render(this.renderer,this.writeBuffer,this.readBuffer,e,n),a.needsSwap){if(n){var o=this.renderer.getContext(),s=this.renderer.state.buffers.stencil;s.setFunc(o.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),s.setFunc(o.EQUAL,1,4294967295)}this.swapBuffers()}void 0!==u4&&(a instanceof u4?n=!0:a instanceof l4&&(n=!1))}}this.renderer.setRenderTarget(t)}},{key:"reset",value:function(e){if(void 0===e){var t=this.renderer.getSize(new ii);this._pixelRatio=this.renderer.getPixelRatio(),this._width=t.width,this._height=t.height,(e=this.renderTarget1.clone()).setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}},{key:"setSize",value:function(e,t){this._width=e,this._height=t;var n=this._width*this._pixelRatio,r=this._height*this._pixelRatio;this.renderTarget1.setSize(n,r),this.renderTarget2.setSize(n,r);for(var i=0;i<this.passes.length;i++)this.passes[i].setSize(n,r)}},{key:"setPixelRatio",value:function(e){this._pixelRatio=e,this.setSize(this._width,this._height)}},{key:"dispose",value:function(){this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.copyPass.dispose()}}]),e}(),h4=function(e){Y(n,e);var t=$(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;return V(this,n),(i=t.call(this)).scene=e,i.camera=r,i.overrideMaterial=a,i.clearColor=o,i.clearAlpha=s,i.clear=!0,i.clearDepth=!1,i.needsSwap=!1,i._oldClearColor=new uo,i}return W(n,[{key:"render",value:function(e,t,n){var r,i,a=e.autoClear;e.autoClear=!1,null!==this.overrideMaterial&&(i=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),null!==this.clearColor&&(e.getClearColor(this._oldClearColor),e.setClearColor(this.clearColor,e.getClearAlpha())),null!==this.clearAlpha&&(r=e.getClearAlpha(),e.setClearAlpha(this.clearAlpha)),1==this.clearDepth&&e.clearDepth(),e.setRenderTarget(this.renderToScreen?null:n),!0===this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),e.render(this.scene,this.camera),null!==this.clearColor&&e.setClearColor(this._oldClearColor),null!==this.clearAlpha&&e.setClearAlpha(r),null!==this.overrideMaterial&&(this.scene.overrideMaterial=i),e.autoClear=a}}]),n}(r4);var d4=function(e){var t,n;function r(t){return K(e.call(this,"An error occurred. See https://github.com/styled-components/polished/blob/main/src/internalHelpers/errors.md#"+t+" for more information.")||this)}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,X(t,n),r}(ne(Error));function f4(e,t){return e.substr(-t.length)===t}var p4=/^([+-]?(?:\d+|\d*\.\d+))([a-z]*|%)$/;function A4(e){return"string"!==typeof e?e:e.match(p4)?parseFloat(e):e}var v4=function(e){return function(t,n){void 0===n&&(n="16px");var r=t,i=n;if("string"===typeof t){if(!f4(t,"px"))throw new d4(69,e,t);r=A4(t)}if("string"===typeof n){if(!f4(n,"px"))throw new d4(70,e,n);i=A4(n)}if("string"===typeof r)throw new d4(71,t,e);if("string"===typeof i)throw new d4(72,n,e);return""+r/i+e}};v4("em");v4("rem");function m4(e){return Math.round(255*e)}function g4(e,t,n){return m4(e)+","+m4(t)+","+m4(n)}function y4(e,t,n,r){if(void 0===r&&(r=g4),0===t)return r(n,n,n);var i=(e%360+360)%360/60,a=(1-Math.abs(2*n-1))*t,o=a*(1-Math.abs(i%2-1)),s=0,u=0,l=0;i>=0&&i<1?(s=a,u=o):i>=1&&i<2?(s=o,u=a):i>=2&&i<3?(u=a,l=o):i>=3&&i<4?(u=o,l=a):i>=4&&i<5?(s=o,l=a):i>=5&&i<6&&(s=a,l=o);var c=n-a/2;return r(s+c,u+c,l+c)}var b4={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"639",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"};var x4=/^#[a-fA-F0-9]{6}$/,_4=/^#[a-fA-F0-9]{8}$/,w4=/^#[a-fA-F0-9]{3}$/,S4=/^#[a-fA-F0-9]{4}$/,M4=/^rgb\(\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*\)$/i,k4=/^rgb(?:a)?\(\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,|\/)\s*([-+]?\d*[.]?\d+[%]?)\s*\)$/i,T4=/^hsl\(\s*(\d{0,3}[.]?[0-9]+(?:deg)?)\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*\)$/i,E4=/^hsl(?:a)?\(\s*(\d{0,3}[.]?[0-9]+(?:deg)?)\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,|\/)\s*([-+]?\d*[.]?\d+[%]?)\s*\)$/i;function C4(e){if("string"!==typeof e)throw new d4(3);var t=function(e){if("string"!==typeof e)return e;var t=e.toLowerCase();return b4[t]?"#"+b4[t]:e}(e);if(t.match(x4))return{red:parseInt(""+t[1]+t[2],16),green:parseInt(""+t[3]+t[4],16),blue:parseInt(""+t[5]+t[6],16)};if(t.match(_4)){var n=parseFloat((parseInt(""+t[7]+t[8],16)/255).toFixed(2));return{red:parseInt(""+t[1]+t[2],16),green:parseInt(""+t[3]+t[4],16),blue:parseInt(""+t[5]+t[6],16),alpha:n}}if(t.match(w4))return{red:parseInt(""+t[1]+t[1],16),green:parseInt(""+t[2]+t[2],16),blue:parseInt(""+t[3]+t[3],16)};if(t.match(S4)){var r=parseFloat((parseInt(""+t[4]+t[4],16)/255).toFixed(2));return{red:parseInt(""+t[1]+t[1],16),green:parseInt(""+t[2]+t[2],16),blue:parseInt(""+t[3]+t[3],16),alpha:r}}var i=M4.exec(t);if(i)return{red:parseInt(""+i[1],10),green:parseInt(""+i[2],10),blue:parseInt(""+i[3],10)};var a=k4.exec(t.substring(0,50));if(a)return{red:parseInt(""+a[1],10),green:parseInt(""+a[2],10),blue:parseInt(""+a[3],10),alpha:parseFloat(""+a[4])>1?parseFloat(""+a[4])/100:parseFloat(""+a[4])};var o=T4.exec(t);if(o){var s="rgb("+y4(parseInt(""+o[1],10),parseInt(""+o[2],10)/100,parseInt(""+o[3],10)/100)+")",u=M4.exec(s);if(!u)throw new d4(4,t,s);return{red:parseInt(""+u[1],10),green:parseInt(""+u[2],10),blue:parseInt(""+u[3],10)}}var l=E4.exec(t.substring(0,50));if(l){var c="rgb("+y4(parseInt(""+l[1],10),parseInt(""+l[2],10)/100,parseInt(""+l[3],10)/100)+")",h=M4.exec(c);if(!h)throw new d4(4,t,c);return{red:parseInt(""+h[1],10),green:parseInt(""+h[2],10),blue:parseInt(""+h[3],10),alpha:parseFloat(""+l[4])>1?parseFloat(""+l[4])/100:parseFloat(""+l[4])}}throw new d4(5)}function R4(e){return function(e){var t,n=e.red/255,r=e.green/255,i=e.blue/255,a=Math.max(n,r,i),o=Math.min(n,r,i),s=(a+o)/2;if(a===o)return void 0!==e.alpha?{hue:0,saturation:0,lightness:s,alpha:e.alpha}:{hue:0,saturation:0,lightness:s};var u=a-o,l=s>.5?u/(2-a-o):u/(a+o);switch(a){case n:t=(r-i)/u+(r<i?6:0);break;case r:t=(i-n)/u+2;break;default:t=(n-r)/u+4}return t*=60,void 0!==e.alpha?{hue:t,saturation:l,lightness:s,alpha:e.alpha}:{hue:t,saturation:l,lightness:s}}(C4(e))}var B4=function(e){return 7===e.length&&e[1]===e[2]&&e[3]===e[4]&&e[5]===e[6]?"#"+e[1]+e[3]+e[5]:e};function P4(e){var t=e.toString(16);return 1===t.length?"0"+t:t}function N4(e){return P4(Math.round(255*e))}function I4(e,t,n){return B4("#"+N4(e)+N4(t)+N4(n))}function D4(e,t,n){return y4(e,t,n,I4)}function L4(e,t,n){if("number"===typeof e&&"number"===typeof t&&"number"===typeof n)return D4(e,t,n);if("object"===typeof e&&void 0===t&&void 0===n)return D4(e.hue,e.saturation,e.lightness);throw new d4(1)}function O4(e,t,n,r){if("number"===typeof e&&"number"===typeof t&&"number"===typeof n&&"number"===typeof r)return r>=1?D4(e,t,n):"rgba("+y4(e,t,n)+","+r+")";if("object"===typeof e&&void 0===t&&void 0===n&&void 0===r)return e.alpha>=1?D4(e.hue,e.saturation,e.lightness):"rgba("+y4(e.hue,e.saturation,e.lightness)+","+e.alpha+")";throw new d4(2)}function F4(e,t,n){if("number"===typeof e&&"number"===typeof t&&"number"===typeof n)return B4("#"+P4(e)+P4(t)+P4(n));if("object"===typeof e&&void 0===t&&void 0===n)return B4("#"+P4(e.red)+P4(e.green)+P4(e.blue));throw new d4(6)}function U4(e,t,n,r){if("string"===typeof e&&"number"===typeof t){var i=C4(e);return"rgba("+i.red+","+i.green+","+i.blue+","+t+")"}if("number"===typeof e&&"number"===typeof t&&"number"===typeof n&&"number"===typeof r)return r>=1?F4(e,t,n):"rgba("+e+","+t+","+n+","+r+")";if("object"===typeof e&&void 0===t&&void 0===n&&void 0===r)return e.alpha>=1?F4(e.red,e.green,e.blue):"rgba("+e.red+","+e.green+","+e.blue+","+e.alpha+")";throw new d4(7)}function z4(e){if("object"!==typeof e)throw new d4(8);if(function(e){return"number"===typeof e.red&&"number"===typeof e.green&&"number"===typeof e.blue&&"number"===typeof e.alpha}(e))return U4(e);if(function(e){return"number"===typeof e.red&&"number"===typeof e.green&&"number"===typeof e.blue&&("number"!==typeof e.alpha||"undefined"===typeof e.alpha)}(e))return F4(e);if(function(e){return"number"===typeof e.hue&&"number"===typeof e.saturation&&"number"===typeof e.lightness&&"number"===typeof e.alpha}(e))return O4(e);if(function(e){return"number"===typeof e.hue&&"number"===typeof e.saturation&&"number"===typeof e.lightness&&("number"!==typeof e.alpha||"undefined"===typeof e.alpha)}(e))return L4(e);throw new d4(8)}function G4(e,t,n){return function(){var r=n.concat(Array.prototype.slice.call(arguments));return r.length>=t?e.apply(this,r):G4(e,t,r)}}function q4(e){return G4(e,e.length,[])}q4((function(e,t){if("transparent"===t)return t;var n=R4(t);return z4(Fb({},n,{hue:n.hue+parseFloat(e)}))}));function H4(e,t,n){return Math.max(e,Math.min(t,n))}q4((function(e,t){if("transparent"===t)return t;var n=R4(t);return z4(Fb({},n,{lightness:H4(0,1,n.lightness-parseFloat(e))}))}));q4((function(e,t){if("transparent"===t)return t;var n=R4(t);return z4(Fb({},n,{saturation:H4(0,1,n.saturation-parseFloat(e))}))}));q4((function(e,t){if("transparent"===t)return t;var n=R4(t);return z4(Fb({},n,{lightness:H4(0,1,n.lightness+parseFloat(e))}))}));var V4=q4((function(e,t,n){if("transparent"===t)return n;if("transparent"===n)return t;if(0===e)return n;var r=C4(t),i=Fb({},r,{alpha:"number"===typeof r.alpha?r.alpha:1}),a=C4(n),o=Fb({},a,{alpha:"number"===typeof a.alpha?a.alpha:1}),s=i.alpha-o.alpha,u=2*parseFloat(e)-1,l=((u*s===-1?u:u+s)/(1+u*s)+1)/2,c=1-l;return U4({red:Math.floor(i.red*l+o.red*c),green:Math.floor(i.green*l+o.green*c),blue:Math.floor(i.blue*l+o.blue*c),alpha:i.alpha*parseFloat(e)+o.alpha*(1-parseFloat(e))})})),j4=V4;var W4=q4((function(e,t){if("transparent"===t)return t;var n=C4(t);return U4(Fb({},n,{alpha:H4(0,1,(100*("number"===typeof n.alpha?n.alpha:1)+100*parseFloat(e))/100)}))})),X4=W4;q4((function(e,t){if("transparent"===t)return t;var n=R4(t);return z4(Fb({},n,{saturation:H4(0,1,n.saturation+parseFloat(e))}))}));q4((function(e,t){return"transparent"===t?t:z4(Fb({},R4(t),{hue:parseFloat(e)}))}));q4((function(e,t){return"transparent"===t?t:z4(Fb({},R4(t),{lightness:parseFloat(e)}))}));q4((function(e,t){return"transparent"===t?t:z4(Fb({},R4(t),{saturation:parseFloat(e)}))}));q4((function(e,t){return"transparent"===t?t:j4(parseFloat(e),"rgb(0, 0, 0)",t)}));q4((function(e,t){return"transparent"===t?t:j4(parseFloat(e),"rgb(255, 255, 255)",t)}));q4((function(e,t){if("transparent"===t)return t;var n=C4(t);return U4(Fb({},n,{alpha:H4(0,1,+(100*("number"===typeof n.alpha?n.alpha:1)-100*parseFloat(e)).toFixed(2)/100)}))}));function Y4(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Q4(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function J4(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,s=[],u=!0,l=!1;try{if(a=(n=n.call(e)).next,0===t);else for(;!(u=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(e){l=!0,i=e}finally{try{if(!u&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(l)throw i}}return s}}(e,t)||Z4(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function K4(e){return function(e){if(Array.isArray(e))return Y4(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Z4(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Z4(e,t){if(e){if("string"==typeof e)return Y4(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Y4(e,t):void 0}}!function(e,t){void 0===t&&(t={});var n=t.insertAt;if("undefined"!==typeof document){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===n&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}}(".scene-nav-info {\n  bottom: 5px;\n  width: 100%;\n  text-align: center;\n  color: slategrey;\n  opacity: 0.7;\n  font-size: 10px;\n}\n\n.scene-tooltip {\n  top: 0;\n  color: lavender;\n  font-size: 15px;\n}\n\n.scene-nav-info, .scene-tooltip {\n  position: absolute;\n  font-family: sans-serif;\n  pointer-events: none;\n  user-select: none;\n}\n\n.scene-container canvas:focus {\n  outline: none;\n}");var $4=window.THREE?window.THREE:{WebGLRenderer:dc,Scene:Ac,PerspectiveCamera:us,Raycaster:kA,SRGBColorSpace:ar,TextureLoader:dp,Vector2:ii,Vector3:zi,Box3:Hi,Color:uo,Mesh:Jo,SphereGeometry:Af,MeshBasicMaterial:fo,BackSide:be,EventDispatcher:Wr,MOUSE:le,Quaternion:Ui,Spherical:CA,Clock:Xp},e5=w_({props:{width:{default:window.innerWidth,onChange:function(e,t,n){isNaN(e)&&(t.width=n)}},height:{default:window.innerHeight,onChange:function(e,t,n){isNaN(e)&&(t.height=n)}},backgroundColor:{default:"#000011"},backgroundImageUrl:{},onBackgroundImageLoaded:{},showNavInfo:{default:!0},skyRadius:{default:5e4},objects:{default:[]},lights:{default:[]},enablePointerInteraction:{default:!0,onChange:function(e,t){t.hoverObj=null,t.toolTipElem&&(t.toolTipElem.innerHTML="")},triggerUpdate:!1},lineHoverPrecision:{default:1,triggerUpdate:!1},hoverOrderComparator:{default:function(){return-1},triggerUpdate:!1},hoverFilter:{default:function(){return!0},triggerUpdate:!1},tooltipContent:{triggerUpdate:!1},hoverDuringDrag:{default:!1,triggerUpdate:!1},clickAfterDrag:{default:!1,triggerUpdate:!1},onHover:{default:function(){},triggerUpdate:!1},onClick:{default:function(){},triggerUpdate:!1},onRightClick:{triggerUpdate:!1}},methods:{tick:function(e){if(e.initialised){if(e.controls.update&&e.controls.update(Math.min(1,e.clock.getDelta())),e.postProcessingComposer?e.postProcessingComposer.render():e.renderer.render(e.scene,e.camera),e.extraRenderers.forEach((function(t){return t.render(e.scene,e.camera)})),e.enablePointerInteraction){var t=null;if(e.hoverDuringDrag||!e.isPointerDragging){var n=this.intersectingObjects(e.pointerPos.x,e.pointerPos.y).filter((function(t){return e.hoverFilter(t.object)})).sort((function(t,n){return e.hoverOrderComparator(t.object,n.object)})),r=n.length?n[0]:null;t=r?r.object:null,e.intersectionPoint=r?r.point:null}t!==e.hoverObj&&(e.onHover(t,e.hoverObj),e.toolTipElem.innerHTML=t&&kS(e.tooltipContent)(t)||"",e.hoverObj=t)}e.tweenGroup.update()}return this},getPointerPos:function(e){var t=e.pointerPos;return{x:t.x,y:t.y}},cameraPosition:function(e,t,n,r){var i=e.camera;if(t&&e.initialised){var a=t,o=n||{x:0,y:0,z:0};if(r){var s=Object.assign({},i.position),u=h();e.tweenGroup.add(new R_(s).to(a,r).easing(S_.Quadratic.Out).onUpdate(l).start()),e.tweenGroup.add(new R_(u).to(o,r/3).easing(S_.Quadratic.Out).onUpdate(c).start())}else l(a),c(o);return this}return Object.assign({},i.position,{lookAt:h()});function l(e){var t=e.x,n=e.y,r=e.z;void 0!==t&&(i.position.x=t),void 0!==n&&(i.position.y=n),void 0!==r&&(i.position.z=r)}function c(t){var n=new $4.Vector3(t.x,t.y,t.z);e.controls.target?e.controls.target=n:i.lookAt(n)}function h(){return Object.assign(new $4.Vector3(0,0,-1e3).applyQuaternion(i.quaternion).add(i.position))}},zoomToFit:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];return this.fitToBbox(this.getBbox.apply(this,i),t,n)},fitToBbox:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10,i=e.camera;if(t){var a=new $4.Vector3(0,0,0),o=2*Math.max.apply(Math,K4(Object.entries(t).map((function(e){var t=J4(e,2),n=t[0],r=t[1];return Math.max.apply(Math,K4(r.map((function(e){return Math.abs(a[n]-e)}))))})))),s=(1-2*r/e.height)*i.fov,u=o/Math.atan(s*Math.PI/180),l=u/i.aspect,c=Math.max(u,l);if(c>0){var h=a.clone().sub(i.position).normalize().multiplyScalar(-c);this.cameraPosition(h,a,n)}}return this},getBbox:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return!0},n=new $4.Box3(new $4.Vector3(0,0,0),new $4.Vector3(0,0,0)),r=e.objects.filter(t);return r.length?(r.forEach((function(e){return n.expandByObject(e)})),Object.assign.apply(Object,K4(["x","y","z"].map((function(e){return Q4({},e,[n.min[e],n.max[e]])}))))):null},getScreenCoords:function(e,t,n,r){var i=new $4.Vector3(t,n,r);return i.project(this.camera()),{x:(i.x+1)*e.width/2,y:-(i.y-1)*e.height/2}},getSceneCoords:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=new $4.Vector2(t/e.width*2-1,-n/e.height*2+1),a=new $4.Raycaster;return a.setFromCamera(i,e.camera),Object.assign({},a.ray.at(r,new $4.Vector3))},intersectingObjects:function(e,t,n){var r=new $4.Vector2(t/e.width*2-1,-n/e.height*2+1),i=new $4.Raycaster;return i.params.Line.threshold=e.lineHoverPrecision,i.setFromCamera(r,e.camera),i.intersectObjects(e.objects,!0)},renderer:function(e){return e.renderer},scene:function(e){return e.scene},camera:function(e){return e.camera},postProcessingComposer:function(e){return e.postProcessingComposer},controls:function(e){return e.controls},tbControls:function(e){return e.controls}},stateInit:function(){return{scene:new $4.Scene,camera:new $4.PerspectiveCamera,clock:new $4.Clock,tweenGroup:new k_}},init:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.controlType,i=void 0===r?"trackball":r,a=n.useWebGPU,o=void 0!==a&&a,s=n.rendererConfig,u=void 0===s?{}:s,l=n.extraRenderers,c=void 0===l?[]:l,h=n.waitForLoadComplete,d=void 0===h||h;e.innerHTML="",e.appendChild(t.container=document.createElement("div")),t.container.className="scene-container",t.container.style.position="relative",t.container.appendChild(t.navInfo=document.createElement("div")),t.navInfo.className="scene-nav-info",t.navInfo.textContent={orbit:"Left-click: rotate, Mouse-wheel/middle-click: zoom, Right-click: pan",trackball:"Left-click: rotate, Mouse-wheel/middle-click: zoom, Right-click: pan",fly:"WASD: move, R|F: up | down, Q|E: roll, up|down: pitch, left|right: yaw"}[i]||"",t.navInfo.style.display=t.showNavInfo?null:"none",t.toolTipElem=document.createElement("div"),t.toolTipElem.classList.add("scene-tooltip"),t.container.appendChild(t.toolTipElem),t.pointerPos=new $4.Vector2,t.pointerPos.x=-2,t.pointerPos.y=-2,["pointermove","pointerdown"].forEach((function(e){return t.container.addEventListener(e,(function(n){if("pointerdown"===e&&(t.isPointerPressed=!0),!t.isPointerDragging&&"pointermove"===n.type&&(n.pressure>0||t.isPointerPressed)&&("touch"!==n.pointerType||void 0===n.movementX||[n.movementX,n.movementY].some((function(e){return Math.abs(e)>1})))&&(t.isPointerDragging=!0),t.enablePointerInteraction){var r=function(e){var t=e.getBoundingClientRect(),n=window.pageXOffset||document.documentElement.scrollLeft,r=window.pageYOffset||document.documentElement.scrollTop;return{top:t.top+r,left:t.left+n}}(t.container);t.pointerPos.x=n.pageX-r.left,t.pointerPos.y=n.pageY-r.top,t.toolTipElem.style.top="".concat(t.pointerPos.y,"px"),t.toolTipElem.style.left="".concat(t.pointerPos.x,"px"),t.toolTipElem.style.transform="translate(-".concat(t.pointerPos.x/t.width*100,"%, ").concat(t.height-t.pointerPos.y<100?"calc(-100% - 8px)":"21px",")")}}),{passive:!0})})),t.container.addEventListener("pointerup",(function(e){t.isPointerPressed=!1,t.isPointerDragging&&(t.isPointerDragging=!1,!t.clickAfterDrag)||requestAnimationFrame((function(){0===e.button&&t.onClick(t.hoverObj||null,e,t.intersectionPoint),2===e.button&&t.onRightClick&&t.onRightClick(t.hoverObj||null,e,t.intersectionPoint)}))}),{passive:!0,capture:!0}),t.container.addEventListener("contextmenu",(function(e){t.onRightClick&&e.preventDefault()})),t.renderer=new(o?N2:$4.WebGLRenderer)(Object.assign({antialias:!0,alpha:!0},u)),t.renderer.setPixelRatio(Math.min(2,window.devicePixelRatio)),t.container.appendChild(t.renderer.domElement),t.extraRenderers=c,t.extraRenderers.forEach((function(e){e.domElement.style.position="absolute",e.domElement.style.top="0px",e.domElement.style.pointerEvents="none",t.container.appendChild(e.domElement)})),t.postProcessingComposer=new c4(t.renderer),t.postProcessingComposer.addPass(new h4(t.scene,t.camera)),t.controls=new{trackball:e3,orbit:P3,fly:Y3}[i](t.camera,t.renderer.domElement),"fly"===i&&(t.controls.movementSpeed=300,t.controls.rollSpeed=Math.PI/6,t.controls.dragToLook=!0),"trackball"!==i&&"orbit"!==i||(t.controls.minDistance=.1,t.controls.maxDistance=t.skyRadius,t.controls.addEventListener("start",(function(){t.controlsEngaged=!0})),t.controls.addEventListener("change",(function(){t.controlsEngaged&&(t.controlsDragging=!0)})),t.controls.addEventListener("end",(function(){t.controlsEngaged=!1,t.controlsDragging=!1}))),[t.renderer,t.postProcessingComposer].concat(K4(t.extraRenderers)).forEach((function(e){return e.setSize(t.width,t.height)})),t.camera.aspect=t.width/t.height,t.camera.updateProjectionMatrix(),t.camera.position.z=1e3,t.scene.add(t.skysphere=new $4.Mesh),t.skysphere.visible=!1,t.loadComplete=t.scene.visible=!d,window.scene=t.scene},update:function(e,t){if(e.width&&e.height&&(t.hasOwnProperty("width")||t.hasOwnProperty("height"))&&(e.container.style.width="".concat(e.width,"px"),e.container.style.height="".concat(e.height,"px"),[e.renderer,e.postProcessingComposer].concat(K4(e.extraRenderers)).forEach((function(t){return t.setSize(e.width,e.height)})),e.camera.aspect=e.width/e.height,e.camera.updateProjectionMatrix()),t.hasOwnProperty("skyRadius")&&e.skyRadius&&(e.controls.hasOwnProperty("maxDistance")&&t.skyRadius&&(e.controls.maxDistance=Math.min(e.controls.maxDistance,e.skyRadius)),e.camera.far=2.5*e.skyRadius,e.camera.updateProjectionMatrix(),e.skysphere.geometry=new $4.SphereGeometry(e.skyRadius)),t.hasOwnProperty("backgroundColor")){var n=C4(e.backgroundColor).alpha;void 0===n&&(n=1),e.renderer.setClearColor(new $4.Color(X4(1,e.backgroundColor)),n)}function r(){e.loadComplete=e.scene.visible=!0}t.hasOwnProperty("backgroundImageUrl")&&(e.backgroundImageUrl?(new $4.TextureLoader).load(e.backgroundImageUrl,(function(t){t.colorSpace=$4.SRGBColorSpace,e.skysphere.material=new $4.MeshBasicMaterial({map:t,side:$4.BackSide}),e.skysphere.visible=!0,e.onBackgroundImageLoaded&&setTimeout(e.onBackgroundImageLoaded),!e.loadComplete&&r()})):(e.skysphere.visible=!1,e.skysphere.material.map=null,!e.loadComplete&&r())),t.hasOwnProperty("showNavInfo")&&(e.navInfo.style.display=e.showNavInfo?null:"none"),t.hasOwnProperty("lights")&&((t.lights||[]).forEach((function(t){return e.scene.remove(t)})),e.lights.forEach((function(t){return e.scene.add(t)}))),t.hasOwnProperty("objects")&&((t.objects||[]).forEach((function(t){return e.scene.remove(t)})),e.objects.forEach((function(t){return e.scene.add(t)})))}});function t5(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function n5(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i5(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r5(Object(n),!0).forEach((function(t){n5(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r5(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a5(e){return function(e){if(Array.isArray(e))return t5(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return t5(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?t5(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o5(e,t){var n=new t;return n._destructor&&n._destructor(),{linkProp:function(t){return{default:n[t](),onChange:function(n,r){r[e][t](n)},triggerUpdate:!1}},linkMethod:function(t){return function(n){for(var r=n[e],i=arguments.length,a=new Array(i>1?i-1:0),o=1;o<i;o++)a[o-1]=arguments[o];var s=r[t].apply(r,a);return s===r?this:s}}}}!function(e,t){void 0===t&&(t={});var n=t.insertAt;if("undefined"!==typeof document){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===n&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}}(".scene-container .clickable {\n  cursor: pointer;\n}");var s5=["rendererConfig","waitForGlobeReady"],u5=i5(i5({},window.THREE?window.THREE:{AmbientLight:Ep,DirectionalLight:Tp,Vector2:ii,REVISION:ue}),{},{CSS2DRenderer:Hx}),l5=o5("globe",OI),c5=Object.assign.apply(Object,a5(["globeImageUrl","bumpImageUrl","showGlobe","showGraticules","showAtmosphere","atmosphereColor","atmosphereAltitude","onGlobeReady","pointsData","pointLat","pointLng","pointColor","pointAltitude","pointRadius","pointResolution","pointsMerge","pointsTransitionDuration","arcsData","arcStartLat","arcStartLng","arcEndLat","arcEndLng","arcColor","arcAltitude","arcAltitudeAutoScale","arcStroke","arcCurveResolution","arcCircularResolution","arcDashLength","arcDashGap","arcDashInitialGap","arcDashAnimateTime","arcsTransitionDuration","polygonsData","polygonGeoJsonGeometry","polygonCapColor","polygonCapMaterial","polygonSideColor","polygonSideMaterial","polygonStrokeColor","polygonAltitude","polygonCapCurvatureResolution","polygonsTransitionDuration","pathsData","pathPoints","pathPointLat","pathPointLng","pathPointAlt","pathResolution","pathColor","pathStroke","pathDashLength","pathDashGap","pathDashInitialGap","pathDashAnimateTime","pathTransitionDuration","heatmapsData","heatmapPoints","heatmapPointLat","heatmapPointLng","heatmapPointWeight","heatmapBandwidth","heatmapColorFn","heatmapColorSaturation","heatmapBaseAltitude","heatmapTopAltitude","heatmapsTransitionDuration","hexBinPointsData","hexBinPointLat","hexBinPointLng","hexBinPointWeight","hexBinResolution","hexMargin","hexTopCurvatureResolution","hexTopColor","hexSideColor","hexAltitude","hexBinMerge","hexTransitionDuration","hexPolygonsData","hexPolygonGeoJsonGeometry","hexPolygonColor","hexPolygonAltitude","hexPolygonResolution","hexPolygonMargin","hexPolygonUseDots","hexPolygonCurvatureResolution","hexPolygonDotResolution","hexPolygonsTransitionDuration","tilesData","tileLat","tileLng","tileAltitude","tileWidth","tileHeight","tileUseGlobeProjection","tileMaterial","tileCurvatureResolution","tilesTransitionDuration","ringsData","ringLat","ringLng","ringAltitude","ringColor","ringResolution","ringMaxRadius","ringPropagationSpeed","ringRepeatPeriod","labelsData","labelLat","labelLng","labelAltitude","labelRotation","labelText","labelSize","labelTypeFace","labelColor","labelResolution","labelIncludeDot","labelDotRadius","labelDotOrientation","labelsTransitionDuration","htmlElementsData","htmlLat","htmlLng","htmlAltitude","htmlElement","htmlTransitionDuration","objectsData","objectLat","objectLng","objectAltitude","objectRotation","objectFacesSurface","objectThreeObject","customLayerData","customThreeObject","customThreeObjectUpdate"].map((function(e){return n5({},e,l5.linkProp(e))})))),h5=Object.assign.apply(Object,a5(["globeMaterial","getGlobeRadius","getCoords","toGeoCoords"].map((function(e){return n5({},e,l5.linkMethod(e))})))),d5=o5("renderObjs",e5),f5=Object.assign.apply(Object,a5(["width","height","backgroundColor","backgroundImageUrl","enablePointerInteraction"].map((function(e){return n5({},e,d5.linkProp(e))})))),p5=Object.assign.apply(Object,a5(["lights","postProcessingComposer"].map((function(e){return n5({},e,d5.linkMethod(e))})))),A5=w_({props:i5(i5({onZoom:{triggerUpdate:!1},onGlobeClick:{triggerUpdate:!1},onGlobeRightClick:{triggerUpdate:!1},pointLabel:{default:"name",triggerUpdate:!1},onPointClick:{triggerUpdate:!1},onPointRightClick:{triggerUpdate:!1},onPointHover:{triggerUpdate:!1},arcLabel:{default:"name",triggerUpdate:!1},onArcClick:{triggerUpdate:!1},onArcRightClick:{triggerUpdate:!1},onArcHover:{triggerUpdate:!1},polygonLabel:{default:"name",triggerUpdate:!1},onPolygonClick:{triggerUpdate:!1},onPolygonRightClick:{triggerUpdate:!1},onPolygonHover:{triggerUpdate:!1},pathLabel:{default:"name",triggerUpdate:!1},onPathClick:{triggerUpdate:!1},onPathRightClick:{triggerUpdate:!1},onPathHover:{triggerUpdate:!1},onHeatmapClick:{triggerUpdate:!1},onHeatmapRightClick:{triggerUpdate:!1},onHeatmapHover:{triggerUpdate:!1},hexLabel:{triggerUpdate:!1},onHexClick:{triggerUpdate:!1},onHexRightClick:{triggerUpdate:!1},onHexHover:{triggerUpdate:!1},hexPolygonLabel:{triggerUpdate:!1},onHexPolygonClick:{triggerUpdate:!1},onHexPolygonRightClick:{triggerUpdate:!1},onHexPolygonHover:{triggerUpdate:!1},tileLabel:{default:"name",triggerUpdate:!1},onTileClick:{triggerUpdate:!1},onTileRightClick:{triggerUpdate:!1},onTileHover:{triggerUpdate:!1},labelLabel:{triggerUpdate:!1},onLabelClick:{triggerUpdate:!1},onLabelRightClick:{triggerUpdate:!1},onLabelHover:{triggerUpdate:!1},objectLabel:{default:"name",triggerUpdate:!1},onObjectClick:{triggerUpdate:!1},onObjectRightClick:{triggerUpdate:!1},onObjectHover:{triggerUpdate:!1},customLayerLabel:{default:"name",triggerUpdate:!1},onCustomLayerClick:{triggerUpdate:!1},onCustomLayerRightClick:{triggerUpdate:!1},onCustomLayerHover:{triggerUpdate:!1},pointerEventsFilter:{default:function(){return!0},triggerUpdate:!1,onChange:function(e,t){return t.renderObjs.hoverFilter((function(t){return e(t,t.__data)}))}},lineHoverPrecision:{default:.2,triggerUpdate:!1,onChange:function(e,t){return t.renderObjs.lineHoverPrecision(e)}}},c5),f5),methods:i5(i5({pauseAnimation:function(e){var t;return null!==e.animationFrameRequestId&&(cancelAnimationFrame(e.animationFrameRequestId),e.animationFrameRequestId=null),null===(t=e.globe)||void 0===t||t.pauseAnimation(),this},resumeAnimation:function(e){var t;return null===e.animationFrameRequestId&&this._animationCycle(),null===(t=e.globe)||void 0===t||t.resumeAnimation(),this},_animationCycle:function(e){e.renderObjs.tick(),e.tweenGroup.update(),e.animationFrameRequestId=requestAnimationFrame(this._animationCycle)},pointOfView:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=a();if(void 0===t.lat&&void 0===t.lng&&void 0===t.altitude)return r;var i=Object.assign({},r,t);if(["lat","lng","altitude"].forEach((function(e){return i[e]=+i[e]})),n){for(;r.lng-i.lng>180;)r.lng-=360;for(;r.lng-i.lng<-180;)r.lng+=360;e.tweenGroup.add(new R_(r).to(i,n).easing(S_.Cubic.InOut).onUpdate(o).start())}else o(i);return this;function a(){return e.globe.toGeoCoords(e.renderObjs.cameraPosition())}function o(t){var n=t.lat,r=t.lng,i=t.altitude;e.renderObjs.cameraPosition(e.globe.getCoords(n,r,i))}},getScreenCoords:function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=(t=e.globe).getCoords.apply(t,r);return e.renderObjs.getScreenCoords(a.x,a.y,a.z)},toGlobeCoords:function(e,t,n){var r=e.renderObjs.intersectingObjects(t,n).find((function(e){return"globe"===e.object.__globeObjType}));if(!r)return null;var i=e.globe.toGeoCoords(r.point);return{lat:i.lat,lng:i.lng}},scene:function(e){return e.renderObjs.scene()},camera:function(e){return e.renderObjs.camera()},renderer:function(e){return e.renderObjs.renderer()},controls:function(e){return e.renderObjs.controls()},_destructor:function(e){e.globe._destructor(),this.pauseAnimation(),this.pointsData([]),this.arcsData([]),this.polygonsData([]),this.pathsData([]),this.heatmapsData([]),this.hexBinPointsData([]),this.hexPolygonsData([]),this.tilesData([]),this.labelsData([]),this.htmlElementsData([]),this.objectsData([]),this.customLayerData([])}},h5),p5),stateInit:function(e){var t=e.rendererConfig,n=e.waitForGlobeReady,r=void 0===n||n,i=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.includes(n)||{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(e,s5),a=new OI(i5({waitForGlobeReady:r},i));return{globe:a,renderObjs:e5({controlType:"orbit",rendererConfig:t,waitForLoadComplete:r,extraRenderers:[new u5.CSS2DRenderer]}).skyRadius(500*a.getGlobeRadius()).showNavInfo(!1).objects([a]).lights([new u5.AmbientLight(13421772,Math.PI),new u5.DirectionalLight(16777215,.6*Math.PI)]),tweenGroup:new k_}},init:function(e,t){var n=this;e.innerHTML="",e.appendChild(t.container=document.createElement("div")),t.container.style.position="relative";var r=document.createElement("div");t.container.appendChild(r),t.renderObjs(r),t.globe.rendererSize(t.renderObjs.renderer().getSize(new u5.Vector2)),this.pointOfView({altitude:2.5});var i=t.globe.getGlobeRadius(),a=t.renderObjs.controls();a.minDistance=1.01*i,a.maxDistance=100*i,a.enablePan=!1,a.enableDamping=!0,a.dampingFactor=.1,a.rotateSpeed=.3,a.zoomSpeed=.3,a.addEventListener("change",(function(){var e=n.pointOfView();a.rotateSpeed=.2*e.altitude,a.zoomSpeed=.1*(e.altitude+1),t.globe.setPointOfView(t.renderObjs.camera()),t.onZoom&&t.onZoom(e)}));var o=function(e){for(var t=e;t&&!t.hasOwnProperty("__globeObjType");)t=t.parent;return t},s={point:function(e){return e},arc:function(e){return e},polygon:function(e){return e.data},path:function(e){return e},heatmap:function(e){return e},hexbin:function(e){return e},hexPolygon:function(e){return e},tile:function(e){return e},label:function(e){return e},object:function(e){return e},custom:function(e){return e}};u5.REVISION<155&&(t.renderObjs.renderer().useLegacyLights=!1),t.renderObjs.hoverOrderComparator((function(e,t){var n=o(e),r=o(t),i=function(e){return!e};return i(n)-i(r)})).tooltipContent((function(e){var n={point:t.pointLabel,arc:t.arcLabel,polygon:t.polygonLabel,path:t.pathLabel,hexbin:t.hexLabel,hexPolygon:t.hexPolygonLabel,tile:t.tileLabel,label:t.labelLabel,object:t.objectLabel,custom:t.customLayerLabel},r=o(e),i=r&&r.__globeObjType;return r&&i&&n.hasOwnProperty(i)&&s.hasOwnProperty(i)&&kS(n[i])(s[i](r.__data))||""})).onHover((function(e){var n={point:t.onPointHover,arc:t.onArcHover,polygon:t.onPolygonHover,path:t.onPathHover,heatmap:t.onHeatmapHover,hexbin:t.onHexHover,hexPolygon:t.onHexPolygonHover,tile:t.onTileHover,label:t.onLabelHover,object:t.onObjectHover,custom:t.onCustomLayerHover},r={globe:t.onGlobeClick,point:t.onPointClick,arc:t.onArcClick,polygon:t.onPolygonClick,path:t.onPathClick,heatmap:t.onHeatmapClick,hexbin:t.onHexClick,hexPolygon:t.onHexPolygonClick,tile:t.onTileClick,label:t.onLabelClick,object:t.onObjectClick,custom:t.onCustomLayerClick},i=o(e);if(i&&!n.hasOwnProperty(i.__globeObjType)&&(i=null),i!==t.hoverObj){var a=t.hoverObj?t.hoverObj.__globeObjType:null,u=t.hoverObj?s[a](t.hoverObj.__data):null,l=i?i.__globeObjType:null,c=i?s[l](i.__data):null;a&&a!==l&&n[a]&&n[a](null,u),l&&n[l]&&n[l](c,a===l?u:null),t.renderObjs.renderer().domElement.classList[l&&r[l]?"add":"remove"]("clickable"),t.hoverObj=i}})).onClick((function(e,r,i){if(e){var a={globe:t.onGlobeClick,point:t.onPointClick,arc:t.onArcClick,polygon:t.onPolygonClick,path:t.onPathClick,heatmap:t.onHeatmapClick,hexbin:t.onHexClick,hexPolygon:t.onHexPolygonClick,tile:t.onTileClick,label:t.onLabelClick,object:t.onObjectClick,custom:t.onCustomLayerClick},u=o(e),l=u.__globeObjType;if(u&&a.hasOwnProperty(l)&&a[l]){var c=[r];if("globe"===l){var h=n.toGeoCoords(i),d=h.lat,f=h.lng;c.unshift({lat:d,lng:f})}else c.push(n.toGeoCoords(i));s.hasOwnProperty(l)&&c.unshift(s[l](u.__data)),a[l].apply(a,c)}}})).onRightClick((function(e,r,i){if(e){var a={globe:t.onGlobeRightClick,point:t.onPointRightClick,arc:t.onArcRightClick,polygon:t.onPolygonRightClick,path:t.onPathRightClick,heatmap:t.onHeatmapRightClick,hexbin:t.onHexRightClick,hexPolygon:t.onHexPolygonRightClick,tile:t.onTileRightClick,label:t.onLabelRightClick,object:t.onObjectRightClick,custom:t.onCustomLayerRightClick},u=o(e),l=u.__globeObjType;if(u&&a.hasOwnProperty(l)&&a[l]){var c=[r];if("globe"===l){var h=n.toGeoCoords(i),d=h.lat,f=h.lng;c.unshift({lat:d,lng:f})}else c.push(n.toGeoCoords(i));s.hasOwnProperty(l)&&c.unshift(s[l](u.__data)),a[l].apply(a,c)}}})),this._animationCycle()}}),v5=n(2007),m5={width:v5.number,height:v5.number,backgroundColor:v5.string,backgroundImageUrl:v5.string,globeImageUrl:v5.string,bumpImageUrl:v5.string,showGlobe:v5.bool,showGraticules:v5.bool,showAtmosphere:v5.bool,atmosphereColor:v5.string,atmosphereAltitude:v5.number,globeMaterial:v5.object,onGlobeReady:v5.func,onGlobeClick:v5.func,onGlobeRightClick:v5.func,pointsData:v5.arrayOf(v5.object),pointLat:v5.oneOfType([v5.number,v5.string,v5.func]),pointLng:v5.oneOfType([v5.number,v5.string,v5.func]),pointColor:v5.oneOfType([v5.string,v5.func]),pointAltitude:v5.oneOfType([v5.number,v5.string,v5.func]),pointRadius:v5.oneOfType([v5.number,v5.string,v5.func]),pointResolution:v5.number,pointsMerge:v5.bool,pointsTransitionDuration:v5.number,pointLabel:v5.oneOfType([v5.string,v5.func]),onPointClick:v5.func,onPointRightClick:v5.func,onPointHover:v5.func,arcsData:v5.arrayOf(v5.object),arcStartLat:v5.oneOfType([v5.number,v5.string,v5.func]),arcStartLng:v5.oneOfType([v5.number,v5.string,v5.func]),arcEndLat:v5.oneOfType([v5.number,v5.string,v5.func]),arcEndLng:v5.oneOfType([v5.number,v5.string,v5.func]),arcColor:v5.oneOfType([v5.string,v5.arrayOf(v5.string),v5.func]),arcAltitude:v5.oneOfType([v5.number,v5.string,v5.func]),arcAltitudeAutoScale:v5.oneOfType([v5.number,v5.string,v5.func]),arcStroke:v5.oneOfType([v5.number,v5.string,v5.func]),arcCurveResolution:v5.number,arcCircularResolution:v5.number,arcDashLength:v5.oneOfType([v5.number,v5.string,v5.func]),arcDashGap:v5.oneOfType([v5.number,v5.string,v5.func]),arcDashInitialGap:v5.oneOfType([v5.number,v5.string,v5.func]),arcDashAnimateTime:v5.oneOfType([v5.number,v5.string,v5.func]),arcsTransitionDuration:v5.number,arcLabel:v5.oneOfType([v5.string,v5.func]),onArcClick:v5.func,onArcRightClick:v5.func,onArcHover:v5.func,polygonsData:v5.arrayOf(v5.object),polygonGeoJsonGeometry:v5.oneOfType([v5.string,v5.func]),polygonCapColor:v5.oneOfType([v5.string,v5.func]),polygonCapMaterial:v5.oneOfType([v5.object,v5.string,v5.func]),polygonSideColor:v5.oneOfType([v5.string,v5.func]),polygonSideMaterial:v5.oneOfType([v5.object,v5.string,v5.func]),polygonStrokeColor:v5.oneOfType([v5.string,v5.func]),polygonAltitude:v5.oneOfType([v5.number,v5.string,v5.func]),polygonCapCurvatureResolution:v5.oneOfType([v5.number,v5.string,v5.func]),polygonsTransitionDuration:v5.number,polygonLabel:v5.oneOfType([v5.string,v5.func]),onPolygonClick:v5.func,onPolygonRightClick:v5.func,onPolygonHover:v5.func,pathsData:v5.array,pathPoints:v5.oneOfType([v5.array,v5.string,v5.func]),pathPointLat:v5.oneOfType([v5.number,v5.string,v5.func]),pathPointLng:v5.oneOfType([v5.number,v5.string,v5.func]),pathPointAlt:v5.oneOfType([v5.number,v5.string,v5.func]),pathResolution:v5.number,pathColor:v5.oneOfType([v5.string,v5.arrayOf(v5.string),v5.func]),pathStroke:v5.oneOfType([v5.number,v5.string,v5.func]),pathDashLength:v5.oneOfType([v5.number,v5.string,v5.func]),pathDashGap:v5.oneOfType([v5.number,v5.string,v5.func]),pathDashInitialGap:v5.oneOfType([v5.number,v5.string,v5.func]),pathDashAnimateTime:v5.oneOfType([v5.number,v5.string,v5.func]),pathTransitionDuration:v5.number,pathLabel:v5.oneOfType([v5.string,v5.func]),onPathClick:v5.func,onPathRightClick:v5.func,onPathHover:v5.func,heatmapsData:v5.array,heatmapPoints:v5.oneOfType([v5.array,v5.string,v5.func]),heatmapPointLat:v5.oneOfType([v5.number,v5.string,v5.func]),heatmapPointLng:v5.oneOfType([v5.number,v5.string,v5.func]),heatmapPointWeight:v5.oneOfType([v5.number,v5.string,v5.func]),heatmapBandwidth:v5.oneOfType([v5.number,v5.string,v5.func]),heatmapColorFn:v5.oneOfType([v5.string,v5.func]),heatmapColorSaturation:v5.oneOfType([v5.number,v5.string,v5.func]),heatmapBaseAltitude:v5.oneOfType([v5.number,v5.string,v5.func]),heatmapTopAltitude:v5.oneOfType([v5.number,v5.string,v5.func]),heatmapsTransitionDuration:v5.number,onHeatmapClick:v5.func,onHeatmapRightClick:v5.func,onHeatmapHover:v5.func,hexBinPointsData:v5.arrayOf(v5.object),hexBinPointLat:v5.oneOfType([v5.number,v5.string,v5.func]),hexBinPointLng:v5.oneOfType([v5.number,v5.string,v5.func]),hexBinPointWeight:v5.oneOfType([v5.number,v5.string,v5.func]),hexBinResolution:v5.number,hexMargin:v5.oneOfType([v5.number,v5.func]),hexTopColor:v5.func,hexSideColor:v5.func,hexAltitude:v5.oneOfType([v5.number,v5.func]),hexTopCurvatureResolution:v5.number,hexBinMerge:v5.bool,hexTransitionDuration:v5.number,hexLabel:v5.oneOfType([v5.string,v5.func]),onHexClick:v5.func,onHexRightClick:v5.func,onHexHover:v5.func,hexPolygonsData:v5.arrayOf(v5.object),hexPolygonGeoJsonGeometry:v5.oneOfType([v5.string,v5.func]),hexPolygonColor:v5.oneOfType([v5.string,v5.func]),hexPolygonAltitude:v5.oneOfType([v5.number,v5.string,v5.func]),hexPolygonResolution:v5.oneOfType([v5.number,v5.string,v5.func]),hexPolygonMargin:v5.oneOfType([v5.number,v5.string,v5.func]),hexPolygonUseDots:v5.oneOfType([v5.bool,v5.string,v5.func]),hexPolygonCurvatureResolution:v5.oneOfType([v5.number,v5.string,v5.func]),hexPolygonDotResolution:v5.oneOfType([v5.number,v5.string,v5.func]),hexPolygonsTransitionDuration:v5.number,hexPolygonLabel:v5.oneOfType([v5.string,v5.func]),onHexPolygonClick:v5.func,onHexPolygonRightClick:v5.func,onHexPolygonHover:v5.func,tilesData:v5.arrayOf(v5.object),tileLat:v5.oneOfType([v5.number,v5.string,v5.func]),tileLng:v5.oneOfType([v5.number,v5.string,v5.func]),tileAltitude:v5.oneOfType([v5.number,v5.string,v5.func]),tileWidth:v5.oneOfType([v5.number,v5.string,v5.func]),tileHeight:v5.oneOfType([v5.number,v5.string,v5.func]),tileUseGlobeProjection:v5.oneOfType([v5.bool,v5.string,v5.func]),tileMaterial:v5.oneOfType([v5.object,v5.string,v5.func]),tileCurvatureResolution:v5.oneOfType([v5.number,v5.string,v5.func]),tilesTransitionDuration:v5.number,tileLabel:v5.oneOfType([v5.string,v5.func]),onTileClick:v5.func,onTileRightClick:v5.func,onTileHover:v5.func,ringsData:v5.arrayOf(v5.object),ringLat:v5.oneOfType([v5.number,v5.string,v5.func]),ringLng:v5.oneOfType([v5.number,v5.string,v5.func]),ringAltitude:v5.oneOfType([v5.number,v5.string,v5.func]),ringColor:v5.oneOfType([v5.string,v5.arrayOf(v5.string),v5.func]),ringResolution:v5.number,ringMaxRadius:v5.oneOfType([v5.number,v5.string,v5.func]),ringPropagationSpeed:v5.oneOfType([v5.number,v5.string,v5.func]),ringRepeatPeriod:v5.oneOfType([v5.number,v5.string,v5.func]),labelsData:v5.arrayOf(v5.object),labelLat:v5.oneOfType([v5.number,v5.string,v5.func]),labelLng:v5.oneOfType([v5.number,v5.string,v5.func]),labelAltitude:v5.oneOfType([v5.number,v5.string,v5.func]),labelRotation:v5.oneOfType([v5.number,v5.string,v5.func]),labelText:v5.oneOfType([v5.string,v5.func]),labelSize:v5.oneOfType([v5.number,v5.string,v5.func]),labelTypeFace:v5.object,labelColor:v5.oneOfType([v5.string,v5.func]),labelResolution:v5.number,labelIncludeDot:v5.oneOfType([v5.bool,v5.string,v5.func]),labelDotRadius:v5.oneOfType([v5.number,v5.string,v5.func]),labelDotOrientation:v5.oneOfType([v5.string,v5.func]),labelsTransitionDuration:v5.number,labelLabel:v5.oneOfType([v5.string,v5.func]),onLabelClick:v5.func,onLabelRightClick:v5.func,onLabelHover:v5.func,htmlElementsData:v5.arrayOf(v5.object),htmlLat:v5.oneOfType([v5.number,v5.string,v5.func]),htmlLng:v5.oneOfType([v5.number,v5.string,v5.func]),htmlAltitude:v5.oneOfType([v5.number,v5.string,v5.func]),htmlElement:v5.oneOfType([v5.string,v5.func]),htmlTransitionDuration:v5.number,objectsData:v5.arrayOf(v5.object),objectLat:v5.oneOfType([v5.number,v5.string,v5.func]),objectLng:v5.oneOfType([v5.number,v5.string,v5.func]),objectAltitude:v5.oneOfType([v5.number,v5.string,v5.func]),objectRotation:v5.oneOfType([v5.shape({x:v5.number,y:v5.number,z:v5.number}),v5.string,v5.func]),objectFacesSurface:v5.oneOfType([v5.bool,v5.string,v5.func]),objectThreeObject:v5.oneOfType([v5.object,v5.string,v5.func]),objectLabel:v5.oneOfType([v5.string,v5.func]),onObjectClick:v5.func,onObjectRightClick:v5.func,onObjectHover:v5.func,customLayerData:v5.arrayOf(v5.object),customThreeObject:v5.oneOfType([v5.object,v5.string,v5.func]),customThreeObjectUpdate:v5.oneOfType([v5.string,v5.func]),customLayerLabel:v5.oneOfType([v5.string,v5.func]),onCustomLayerClick:v5.func,onCustomLayerRightClick:v5.func,onCustomLayerHover:v5.func,enablePointerInteraction:v5.bool,pointerEventsFilter:v5.func,lineHoverPrecision:v5.number,onZoom:v5.func},g5=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.wrapperElementType,i=void 0===n?"div":n,a=t.nodeMapper,o=void 0===a?function(e){return e}:a,s=t.methodNames,u=void 0===s?[]:s,l=t.initPropNames,c=void 0===l?[]:l;return(0,r.forwardRef)((function(t,n){var a=(0,r.useRef)(),s=(0,r.useMemo)((function(){var n=Object.fromEntries(c.filter((function(e){return t.hasOwnProperty(e)})).map((function(e){return[e,t[e]]})));return e(n)}),[]);Lx((function(){s(o(a.current))}),r.useLayoutEffect),Lx((function(){return s._destructor instanceof Function?s._destructor:void 0}));var l=(0,r.useCallback)((function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return s[e]instanceof Function?s[e].apply(s,n):void 0}),[s]),h=(0,r.useRef)({});return Object.keys(Bx(t,[].concat(Ix(u),Ix(c)))).filter((function(e){return h.current[e]!==t[e]})).forEach((function(e){return l(e,t[e])})),h.current=t,(0,r.useImperativeHandle)(n,(function(){return Object.fromEntries(u.map((function(e){return[e,function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return l.apply(void 0,[e].concat(n))}]})))}),[l]),r.createElement(i,{ref:a})}))}(A5,{methodNames:["pauseAnimation","resumeAnimation","pointOfView","lights","scene","camera","renderer","postProcessingComposer","controls","getGlobeRadius","getCoords","getScreenCoords","toGeoCoords","toGlobeCoords"],initPropNames:["animateIn","waitForGlobeReady","rendererConfig"]});g5.displayName="Globe",g5.propTypes=m5;var y5=function(){return(0,p.jsx)("section",{className:"p-[20px] h-[100vh] max-sm:h-fit",id:"about",children:(0,p.jsxs)("div",{className:"grid grid-cols-10 grid-rows-5 gap-5 max-sm:flex max-sm:flex-col h-full",children:[(0,p.jsxs)("div",{className:"col-span-6 row-span-3 max-sm:h-[350px] max-sm:w-full object-contain border border-[#3d3d3d] bg-[#1b1b1b] rounded-lg flex flex-col",children:[(0,p.jsx)("div",{className:"h-[70%] w-full",children:(0,p.jsx)("img",{src:wx,alt:"gridImage",className:"h-full w-full object-cover"})}),(0,p.jsxs)("div",{className:"h-[30%] w-full flex flex-col justify-center items-start",children:[(0,p.jsx)("h3",{className:"text-white text-base max-md:text-[12px] font-heading font-semibold pl-3",children:"Hi i'm Jay"}),(0,p.jsx)("p",{className:"text-white font-body text-sm max-md:text-[10px] p-3",children:"Let's create something useful and unique together"})]})]}),(0,p.jsxs)("div",{className:"col-span-4 row-span-5 max-sm:h-[350px] max-sm:w-full border border-[#3d3d3d] bg-[#1b1b1b] rounded-lg",children:[(0,p.jsx)("div",{className:"h-[70%] w-full",children:(0,p.jsx)("img",{src:Sx,alt:"gridImage",className:"h-full w-full object-cover"})}),(0,p.jsxs)("div",{className:"h-[30%] w-full flex flex-col justify-center items-start",children:[(0,p.jsx)("h3",{className:"text-white text-base max-md:text-[12px] font-heading font-semibold pl-3",children:"Tech Stack"}),(0,p.jsx)("p",{className:"text-white font-body text-sm max-md:text-[10px] p-3",children:"I work with React, Next, and Tailwind CSS, and I love adding 3D models to websites with Three.js"})]})]}),(0,p.jsxs)("div",{className:"col-span-3 row-span-2 max-sm:h-[350px] max-sm:w-full border border-[#3d3d3d] bg-[#1b1b1b] rounded-lg",children:[(0,p.jsx)("div",{className:"h-[70%] w-full flex justify-center items-cnter",children:(0,p.jsx)(g5,{height:150,width:150,backgroundColor:"rgba(0, 0, 0, 0)",backgroundImageOpacity:.5,showAtmosphere:!0,showGraticules:!0,globeImageUrl:"//unpkg.com/three-globe/example/img/earth-night.jpg",bumpImageUrl:"//unpkg.com/three-globe/example/img/earth-topology.png"})}),(0,p.jsx)("div",{className:"h-[30%] w-full flex flex-col justify-center items-start",children:(0,p.jsx)("p",{className:"text-white font-body text-sm max-md:text-[10px] p-3",children:"Willing to work remotely from anywhere in the world"})})]}),(0,p.jsxs)("div",{className:"col-span-3 row-span-2 max-sm:h-[350px] max-sm:w-full border border-[#3d3d3d] bg-[#1b1b1b] rounded-lg",children:[(0,p.jsx)("div",{className:"h-[70%] w-full overflow-hidden",children:(0,p.jsx)("img",{src:Mx,alt:"gridImage",className:"h-full w-full object-cover"})}),(0,p.jsxs)("div",{className:"h-[30%] w-full flex flex-col justify-center items-start",children:[(0,p.jsx)("h3",{className:"text-white text-base max-md:text-[12px] font-heading font-semibold pl-3",children:"Conact Me"}),(0,p.jsx)("p",{className:"text-white font-body text-sm max-md:text-[10px] p-3",children:"Fill the form below to send an email"})]})]})]})})};var b5=function(){var e=l((0,r.useState)(!0),2),t=e[0],n=e[1];return(0,p.jsx)("div",{className:"App bg-[#212121]",children:(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(A,{}),(0,p.jsx)(_,{}),(0,p.jsx)(U,{}),(0,p.jsx)(y5,{}),(0,p.jsx)($b,{loading:t,setLoading:n}),(0,p.jsx)(_x,{}),(0,p.jsx)(nx,{})]})})},x5=function(e){e&&e instanceof Function&&n.e(787).then(n.bind(n,787)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),r(e),i(e),a(e),o(e)}))};i.createRoot(document.getElementById("root")).render((0,p.jsx)(r.StrictMode,{children:(0,p.jsx)(b5,{})})),x5()}()}();
//# sourceMappingURL=main.9cc6a91d.js.map